/*!
*  filename: create-item-menu.min.js
*  version : unknown version
*  Copyright Syncfusion Inc. 2001 - 2013. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
function setCreateMenuBackDrop(){createMenuBackdrop.css("width",$(window).width()-createMenu.width()+"px")}function saveDraftBtnClick(){$("#save-draft-form").submit()}function dlgCloseBtnClick(){draftDialogobj.hide()}function collapseCreateMenu(){createItemMenuContainer.toggleClass("create-menu-effect").toggleClass("create-menu-open");createMenuBackdrop.hide();unblurServerAppContainer()}function saveDraftDialogOpen(){saveDraftInputobj.value="";blurServerAppContainer()}function saveDraftDialogBeforeClose(){clearInputValueAndError();unblurServerAppContainer()}function clearInputValueAndError(){saveDraftInputobj.value="";saveDraftInputobj.refresh();$(".save-draft-input-segment").find("div").html("");$(".save-draft-input-segment").find("#validate-dashboard-name").text("")}function showSpinner(){ejs.popups.showSpinner(document.getElementById("save-draft-container"))}function hideSpinner(){ejs.popups.hideSpinner(document.getElementById("save-draft-container"))}function showLoaderForIntializing(){$("#server-app-container").hide();$(".preloader-wrap").show();$("#loader_text").text(window.Server.App.LocalizationContent.CreatingReport)}var createItemButton="",createItemMenuContainer="",createMenu="",createMenuBackdrop="",saveDraftInputobj="",saveDraftInputEle="",draftDialogobj="";$(document).ready(function(){$.extend(ej,Syncfusion);createItemButton=$("[data-action=create-items]");createItemMenuContainer=$("#create-item-container");createMenu=$(".create-menu");createMenuBackdrop=$("#create-menu-backdrop");saveDraftInputobj=new ejs.inputs.TextBox({placeholder:window.Server.App.LocalizationContent.UntitledReport,floatLabelType:"Never"});saveDraftInputEle=$("#save-draft-input");saveDraftInputobj.appendTo("#save-draft-input");draftDialogobj=new ejs.popups.Dialog({showCloseIcon:!1,isModal:!0,closeOnEscape:!0,visible:!1,buttons:[{click:saveDraftBtnClick,buttonModel:{content:window.Server.App.LocalizationContent.AddDesignButton,isPrimary:!0}},{click:dlgCloseBtnClick,buttonModel:{content:window.Server.App.LocalizationContent.CancelButton,isPrimary:!1}}],width:"500px",animationSettings:{effect:"Zoom"},beforeOpen:saveDraftDialogOpen,beforeClose:saveDraftDialogBeforeClose});draftDialogobj.appendTo("#save-draft-container");draftDialogobj.hide();ejs.popups.createSpinner({target:document.getElementById("save-draft-container")});ejs.popups.setSpinner({type:"Material"});createItemButton.on("click",function(){createItemMenuContainer.toggleClass("create-menu-effect").toggleClass("create-menu-open");setCreateMenuBackDrop();createMenuBackdrop.show();blurServerAppContainer()});$("body").click(function(n){n.target.id=="create-menu-backdrop"&&collapseCreateMenu()});$("#save-draft-form").submit(function(n){n.preventDefault();var t=saveDraftInputEle.val();$("#save-draft-form").valid()&&(showSpinner(),$.ajax({type:"POST",url:isDraftExistUrl,data:{reportName:t},success:function(n){n.Data?($(".save-draft-input-segment").find(".e-input-group").addClass("e-error"),$("#validate-dashboard-name").text(window.Server.App.LocalizationContent.IsReportExist),$("#validate-dashboard-name").css("display","block"),hideSpinner()):(hideSpinner(),draftDialogobj.hide(),setTimeout(function(){showLoaderForIntializing();window.location.href=n.RedirectUrl},500))},error:function(){$(".save-draft-input-segment").find(".e-input-group").addClass("e-error");$("#validate-dashboard-name").text(window.Server.App.LocalizationContent.InternalServerError);$("#validate-dashboard-name").css("display","block");hideSpinner()}}))});$(window).resize(function(){setCreateMenuBackDrop()});$.validator.addMethod("isRequired",function(n){return!parent.isEmptyOrWhitespace(n)},window.Server.App.LocalizationContent.ItemNameValidator);$.validator.addMethod("isValidName",function(n){return parent.IsValidName("name",n)},window.Server.App.LocalizationContent.AvoidSpecialCharactors);$("#save-draft-form").validate({errorElement:"div",onkeyup:function(n,t){t.keyCode!=9&&$(n).valid();t.keyCode!=8&&t.keyCode!=46&&$(n).valid()?!0:$("#validate-dashboard-name").text("")},onfocusout:function(n){$(n).valid()},rules:{dashboardName:{isRequired:!0,isValidName:!0}},messages:{dashboardName:{isRequired:window.Server.App.LocalizationContent.ReportValidator}},highlight:function(n){$(n).closest(".e-input-group").addClass("e-error")},unhighlight:function(n){$(n).attr("id")=="save-draft-input"&&($(n).closest(".e-input-group").removeClass("e-error"),$(n).closest(".save-draft-input-segment").find("div").html(""),$(n).closest(".save-draft-input-segment").find("#validate-dashboard-name").text(""))},errorPlacement:function(n,t){$(t).closest(".save-draft-input-segment").find("div").html(n.html())}});saveDraftInputEle.bind("keypress",function(n){if(n.keyCode==13)return n.preventDefault(),!1});$("#create-dataset-popup").ejDialog({width:$(window).width(),height:$(window).height(),showOnInit:!1,allowDraggable:!1,enableResize:!1,enableModal:!0,showHeader:!1});$("#create-dataset-popup_wrapper").ejWaitingPopup();$("#report_popup").ejDialog({width:"800px",showOnInit:!1,allowDraggable:!0,enableResize:!1,showHeader:!1,enableModal:!0,closeOnEscape:!0,open:"onReportDialogOpen",close:"onReportDialogClose"});$("#report_popup_wrapper").ejWaitingPopup();$("#addDataSetDom").ejDialog({width:"650px",showOnInit:!1,allowDraggable:!1,enableResize:!1,title:window.Server.App.LocalizationContent.AddDatasetButton,enableModal:!0,showHeader:!1,close:"onNewDataSetDialogClose"});$("#addDataSetDom_wrapper").ejWaitingPopup();$("#select_datasource_popup").ejDialog({width:"800px",showOnInit:!1,allowDraggable:!0,enableResize:!1,showHeader:!1,enableModal:!0,closeOnEscape:!0,close:"closeNewDataSourcePopup"});$("#select_datasource_popup_wrapper").ejWaitingPopup();$(document).on("click","#create-dataset-connection",function(){$("#create-dataset-iframe").attr("src",createDatasetUrl);$("#create-dataset-popup").ejDialog("open");$("#create-dataset-popup_wrapper").ejWaitingPopup("show")});$(document).on("click","#create-New-datasource-connection",function(){$("#create-dataset-iframe").attr("src",createNewDatasourceUrl);$("#create-dataset-popup").ejDialog("open");showWaitingPopup("create-dataset-popup")});$(document).on("click","#create-New-datasource-connection",function(){$("#create-dataset-iframe").attr("src",createNewDatasourceUrl);$("#create-dataset-popup").ejDialog("open");showWaitingPopup("create-dataset-popup")});$(document).on("click","#upload-report",function(){var n=$(this).attr("data-action");$("#report_popup").ejDialog("open");$("#report_popup_wrapper").ejWaitingPopup("show");$("#report_iframe").attr("src",addReportIframeUrl+"?itemAction="+n)});$(document).on("click","#upload-dataset-connection",function(){var n=$(this).attr("data-action");$("#addDataSetDom").ejDialog("open");$("#dataset_popup").attr("src",addDatasetUrl+"?itemAction="+n);$("#addDataSetDom_wrapper").ejWaitingPopup("show")})});$(document).on("click",".create-dashboard-scratch",function(){draftDialogobj.show()});$(document).on("click",".create-item-list-section",function(){collapseCreateMenu()})