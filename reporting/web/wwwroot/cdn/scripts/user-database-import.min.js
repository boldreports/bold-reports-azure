/*!
*  filename: ej.core.min.js
*  version : 14.4.0.15
*  Copyright Syncfusion Inc. 2001 - 2016. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e()}(function(){window.ej=window.Syncfusion=window.Syncfusion||{},function(e,t,i){"use strict";var s,l,n,o;t.version="14.4.0.15",t.consts={NamespaceJoin:"-"},t.TextAlign={Center:"center",Justify:"justify",Left:"left",Right:"right"},t.Orientation={Horizontal:"horizontal",Vertical:"vertical"},t.serverTimezoneOffset=0,t.persistStateVersion=null,Object.prototype.hasOwnProperty||(Object.prototype.hasOwnProperty=function(e,t){return e[t]!==i}),String.format=function(){for(var e=arguments[0],t=0;t<arguments.length-1;t++)e=e.replace(new RegExp("\\{"+t+"\\}","gm"),arguments[t+1]);return e.replace(/\{[0-9]\}/g,"")},jQuery.uaMatch=function(e){e=e.toLowerCase();var t=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];return{browser:t[1]||"",version:t[2]||"0"}},t.defineClass=function(e,s,l,n){if(!e||!l)return i;for(var o=e.split("."),a=window,r=0;r<o.length-1;r++)t.isNullOrUndefined(a[o[r]])&&(a[o[r]]={}),a=a[o[r]];return(n||t.isNullOrUndefined(a[o[r]]))&&(s="function"==typeof s?s:function(){},a[o[r]]=s,a[o[r]].prototype=l),a[o[r]]},t.util={getNameSpace:function(e){var i=e.toLowerCase().split(".");return"ej"===i[0]&&(i[0]="e"),i.join(t.consts.NamespaceJoin)},getObject:function(e,s){var l,n,o;if(!s)return i;for(l=s,n=e.split("."),o=0;o<n.length&&!t.util.isNullOrUndefined(l);o++)l=l[n[o]];return l},createObject:function(e,s,l){for(var n,o=e.split("."),a=l||window,r=a,d=o.length,h=0;h<d;h++)n=o[h],h+1==d?r[n]=s===i?{}:s:t.isNullOrUndefined(r[n])&&(r[n]={}),r=r[n];return a},isNullOrUndefined:function(e){return e===i||null===e},print:function(i,s){var l,n,o=t.buildTag("div"),a=i.clone();o.append(a),s||(s=window.open("","print","height=452,width=1024,tabbar=no")),s.document.write("<!DOCTYPE html>"),l=e("head").find("link").add("style"),"msie"===t.browserInfo().name?(n="",l.each(function(t,i){"LINK"==i.tagName&&e(i).attr("href",i.href),n+=i.outerHTML}),s.document.write("<html><head></head><body>"+n+o[0].innerHTML+"</body></html>")):(n="",s.document.write("<html><head>"),l.each(function(t,i){"LINK"==i.tagName&&e(i).attr("href",i.href),n+=i.outerHTML}),s.document.writeln(n+"</head><body>"),s.document.writeln(o[0].innerHTML+"</body></html>")),s.document.close(),s.focus(),setTimeout(function(){t.isNullOrUndefined(s.window)||(s.print(),setTimeout(function(){s.close()},1e3))},1e3)},ieClearRemover:function(t){var i=e(t).height();t.style.paddingTop=parseFloat(i/2)+"px",t.style.paddingBottom=parseFloat(i/2)+"px",t.style.height="1px",t.style.lineHeight="1px"},sendAjaxRequest:function(t){e.ajax({type:t.type,cache:t.cache,url:t.url,dataType:t.dataType,data:t.data,contentType:t.contentType,async:t.async,success:t.successHandler,error:t.errorHandler,beforeSend:t.beforeSendHandler,complete:t.completeHandler})},buildTag:function(t,s,l,n){var o,a=/^[a-z]*[0-9a-z]+/gi.exec(t)[0],r=/#([_a-z]+[-_0-9a-z]+)/gi.exec(t);return r=r?r[r.length-1]:i,o=(o=/\.([a-z]+[-_0-9a-z ]+)/gi.exec(t))?o[o.length-1]:i,e(document.createElement(a)).attr(r?{id:r}:{}).addClass(o||"").css(l||{}).attr(n||{}).html(s||"")},_preventDefaultException:function(e,t){if(e)for(var i in t)if(t[i].test(e[i]))return!0;return!1},getMaxZindex:function(){var t=1;return((t=Math.max.apply(null,e.map(e("body *"),function(t){if("absolute"==e(t).css("position")||"fixed"==e(t).css("position"))return parseInt(e(t).css("z-index"))||1})))==i||null==t)&&(t=1),t},blockDefaultActions:function(e){e.cancelBubble=!0,e.returnValue=!1,e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation()},getDimension:function(t,i){var s,l,n,o=e(t).parents().andSelf().filter(":hidden");return o&&(l={visibility:"hidden",display:"block"},n=[],o.each(function(){var e={};for(var t in l)e[t]=this.style[t],this.style[t]=l[t];n.push(e)}),s=/(outer)/g.test(i)?e(t)[i](!0):e(t)[i](),o.each(function(e){var t=n[e];for(var i in l)this.style[i]=t[i]})),s},transitionEndEvent:function(){return{"":"transitionend",webkit:"webkitTransitionEnd",Moz:"transitionend",O:"otransitionend",ms:"MSTransitionEnd"}[t.userAgent()]},animationEndEvent:function(){return{"":"animationend",webkit:"webkitAnimationEnd",Moz:"animationend",O:"webkitAnimationEnd",ms:"animationend"}[t.userAgent()]},startEvent:function(){return t.isTouchDevice()||e.support.hasPointer?"touchstart":"mousedown"},endEvent:function(){return t.isTouchDevice()||e.support.hasPointer?"touchend":"mouseup"},moveEvent:function(){return t.isTouchDevice()||e.support.hasPointer?e.support.hasPointer&&!t.isMobile()?"ejtouchmove":"touchmove":"mousemove"},cancelEvent:function(){return t.isTouchDevice()||e.support.hasPointer?"touchcancel":"mousecancel"},tapEvent:function(){return t.isTouchDevice()||e.support.hasPointer?"tap":"click"},tapHoldEvent:function(){return t.isTouchDevice()||e.support.hasPointer?"taphold":"click"},isDevice:function(){return t.getBooleanVal(e("head"),"data-ej-forceset",!1)?t.getBooleanVal(e("head"),"data-ej-device",this._device()):this._device()},isPortrait:function(){var e=document.documentElement;return e&&e.clientWidth/e.clientHeight<1.1},isLowerResolution:function(){return window.innerWidth<=640&&t.isPortrait()&&t.isDevice()||window.innerWidth<=800&&!t.isDevice()||window.innerWidth<=800&&!t.isPortrait()&&t.isWindows()&&t.isDevice()||t.isMobile()},isIOSWebView:function(){return/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(navigator.userAgent)},isAndroidWebView:function(){return!("undefined"==typeof Android)},isWindowsWebView:function(){return-1!=location.href.indexOf("x-wmapp")},_device:function(){return/Android|BlackBerry|iPhone|iPad|iPod|IEMobile|kindle|windows\sce|palm|smartphone|iemobile|mobile|pad|xoom|sch-i800|playbook/i.test(navigator.userAgent.toLowerCase())},isMobile:function(){return/iphone|ipod|android|blackberry|opera|mini|windows\sce|palm|smartphone|iemobile/i.test(navigator.userAgent.toLowerCase())&&/mobile/i.test(navigator.userAgent.toLowerCase())||!0===t.getBooleanVal(e("head"),"data-ej-mobile",!1)},isTablet:function(){return/ipad|xoom|sch-i800|playbook|tablet|kindle/i.test(navigator.userAgent.toLowerCase())||!0===t.getBooleanVal(e("head"),"data-ej-tablet",!1)||!t.isMobile()&&t.isDevice()},isTouchDevice:function(){return("ontouchstart"in window||window.navigator.msPointerEnabled&&t.isMobile())&&this.isDevice()},getClearString:function(t){return e.trim(t.replace(/\s+/g," ").replace(/(\r\n|\n|\r)/gm,"").replace(new RegExp(">[\n\t ]+<","g"),"><"))},getBooleanVal:function(t,i,s){var l=e(t).attr(i);return null!=l?"true"==l.toLowerCase():s},_getSkewClass:function(e,t,i){var s=e.width(),l=e.height(),n=e.offset().left,o=e.offset().left+s,a=e.offset().top,r=e.offset().top+l,d=.3*s,h=.3*l;return t<n+d&&i<a+h?"e-m-skew-topleft":t>o-d&&i<a+h?"e-m-skew-topright":t>o-d&&i>r-h?"e-m-skew-bottomright":t<n+d&&i>r-h?"e-m-skew-bottomleft":t>n+d&&i<a+h&&t<o-d?"e-m-skew-top":t<n+d?"e-m-skew-left":t>o-d?"e-m-skew-right":i>r-h?"e-m-skew-bottom":"e-m-skew-center"},_removeSkewClass:function(t){e(t).removeClass("e-m-skew-top e-m-skew-bottom e-m-skew-left e-m-skew-right e-m-skew-topleft e-m-skew-topright e-m-skew-bottomleft e-m-skew-bottomright e-m-skew-center e-skew-top e-skew-bottom e-skew-left e-skew-right e-skew-topleft e-skew-topright e-skew-bottomleft e-skew-bottomright e-skew-center")},_getObjectKeys:function(e){var t,i=[];if(e=Object.prototype.toString.call(e)===Object.prototype.toString()?e:{},!Object.keys){for(t in e)e.hasOwnProperty(t)&&i.push(t);return i}if(Object.keys)return Object.keys(e)},_touchStartPoints:function(e,t){if(e){var i=e.touches?e.touches[0]:e;t._distX=0,t._distY=0,t._moved=!1,t._pointX=i.pageX,t._pointY=i.pageY}},_isTouchMoved:function(e,t){if(e){var i,s,l=e.touches?e.touches[0]:e,n=l.pageX-t._pointX,o=l.pageY-t._pointY;Date.now();return t._pointX=l.pageX,t._pointY=l.pageY,t._distX+=n,t._distY+=o,i=Math.abs(t._distX),s=Math.abs(t._distY),!(i<5&&s<5)}},listenEvents:function(e,i,s,l,n,o){for(var a=0;a<e.length;a++)t.listenTouchEvent(e[a],i[a],s[a],l,n,o)},listenTouchEvent:function(i,s,l,n,o,a){for(var r,d=n?"removeEventListener":"addEventListener",h=n?"off":"on",c=e(i),u=0;u<c.length;u++)switch(r=c[u],s){case"touchstart":t._bindEvent(r,d,s,l,"mousedown","MSPointerDown","pointerdown",a);break;case"touchmove":t._bindEvent(r,d,s,l,"mousemove","MSPointerMove","pointermove",a);break;case"touchend":t._bindEvent(r,d,s,l,"mouseup","MSPointerUp","pointerup",a);break;case"touchcancel":t._bindEvent(r,d,s,l,"mousecancel","MSPointerCancel","pointercancel",a);break;case"tap":case"taphold":case"ejtouchmove":case"click":e(r)[h](s,l);break;default:"msie"==t.browserInfo().name&&t.browserInfo().version<9?o._on(e(r),s,l):r[d](s,l,!0)}},_bindEvent:function(t,i,s,l,n,o,a){e.support.hasPointer?t[i](window.navigator.pointerEnabled?a:o,l,!0):t[i](s,l,!0)},_browser:function(){return/webkit/i.test(navigator.appVersion)?"webkit":/firefox/i.test(navigator.userAgent)?"Moz":/trident/i.test(navigator.userAgent)?"ms":"opera"in window?"O":""},styles:document.createElement("div").style,userAgent:function(){for(var e="webkitT,t,MozT,msT,OT".split(","),i=0,s=e.length;i<s;i++)if(e[i]+"ransform"in t.styles)return e[i].substr(0,e[i].length-1);return!1},addPrefix:function(e){return""===t.userAgent()?e:(e=e.charAt(0).toUpperCase()+e.substr(1),t.userAgent()+e)},destroyWidgets:function(t){e(t).find("[data-role *= ejm]").each(function(t,i){var s=e(i),l=s.data("ejWidgets");l&&s[l]("destroy")})},getAttrVal:function(t,i,s){var l=e(t).attr(i);return null!=l?l:s},getOffset:function(t){var i,s={},l=t.offset()||{left:0,top:0};return e.extend(!0,s,l),"static"!=e("body").css("position")&&(i=e("body").offset(),s.left-=i.left,s.top-=i.top),s},getZindexPartial:function(i,s){var l,n,o;if(!t.isNullOrUndefined(i)&&i.length>0)return l=i.parents(),n=e("body").children(),!t.isNullOrUndefined(i)&&i.length>0&&n.splice(n.index(s),1),e(n).each(function(e,t){l.push(t)}),o=Math.max.apply(o,e.map(l,function(t){if("static"!=e(t).css("position"))return parseInt(e(t).css("z-index"))||1})),!o||o<1e4?o=1e4:o+=1,o},isValidAttr:function(t,i){var s;return void 0!==(t=e(t)[0])[i]||(s=!1,e.each(t,function(e){if(e.toLowerCase()==i.toLowerCase())return s=!0,!1}),s)}},e.extend(t,t.util),t.widgetBase={droppables:{default:[]},resizables:{default:[]},_renderEjTemplate:function(i,s,l,n){var o=null;return("object"==typeof i||i.startsWith("#")||i.startsWith("."))&&(o=e(i).attr("type")),o&&(o=o.toLowerCase(),t.template[o])?t.template[o](this,i,s,l,n):t.template.render(this,i,s,l,n)},destroy:function(){var i,s,l,n;if(!this._trigger("destroy")){this.model.enablePersistence&&(this.persistState(),e(window).off("unload",this._persistHandler));try{this._destroy()}catch(e){}for(i=this.element.data("ejWidgets")||[],n=0;n<i.length;n++)i[n]==this.pluginName&&i.splice(n,1);for(i.length||this.element.removeData("ejWidgets");this._events&&(l=[],s=this._events.pop());){for(n=0;n<s[1].length;n++)e.isPlainObject(s[1][n])||l.push(s[1][n]);e.fn.off.apply(s[0],l)}this._events=null,this.element.removeClass(t.util.getNameSpace(this.sfType)).removeClass("e-js").removeData(this.pluginName),this.element=null,this.model=null}},_on:function(i){this._events||(this._events=[]);for(var s=[].splice.call(arguments,1,arguments.length-1),l={},n=s.length;l&&"function"!=typeof l;)l=s[--n];return s[n]=t.proxy(s[n],this),this._events.push([i,s,l,s[n]]),e.fn.on.apply(i,s),this},_off:function(t,i,s,l){var n,o,a,r,d=this._events;if(!d||!d.length)return this;for("function"==typeof s&&(n=l,l=s,s=n),o=i.match(/\S+/g)||[""],a=0;a<d.length;a++)if((r=d[a])[0].length&&(!l||r[2]===l)&&(r[1][0]===i||o[0])&&(!s||r[1][1]===s)&&e.inArray(t[0],r[0])>-1){e.fn.off.apply(t,l?[i,s,r[3]]:[i,s]),d.splice(a,1);break}return this},_trigger:function(i,s){var l,n,o,a,r=null,d={};return e.extend(d,s),i in this.model&&(r=this.model[i]),r&&("string"==typeof r&&(r=t.util.getObject(r,window)),e.isFunction(r)&&(n=t.event(i,this.model,s),l=r.call(this,n),(o=this.model._applyScope)&&o.call(),s&&e.extend(s,n),n.cancel||!t.isNullOrUndefined(l)))?!1===l||n.cancel:(a=Boolean(s),(s=s||{}).originalEventType=i,s.type=this.pluginName+i,n=e.Event(s.type,t.event(s.type,this.model,s)),this.element.trigger(n),a&&e.extend(s,n),t.isOnWebForms&&0==n.cancel&&this.model.serverEvents&&this.model.serverEvents.length&&t.raiseWebFormsServerEvents(i,s,d),n.cancel)},setModel:function(t,i){var l,n,o,a;if(!this._trigger("modelChange",{changes:t})){for(l in t){if(!i){if(this.model[l]===t[l]){delete t[l];continue}if(e.isPlainObject(t[l])&&(s(this.model[l],t[l]),e.isEmptyObject(t[l]))){delete t[l];continue}}if(this.dataTypes&&!0!==(n=this._isValidModelValue(l,this.dataTypes,t)))throw"setModel - Invalid input for property :"+l+" - "+n;this.model.notifyOnEachPropertyChanges&&this.model[l]!==t[l]&&(o={oldValue:this.model[l],newValue:t[l]},t[l]=this._trigger(l+"Change",o)?this.model[l]:o.newValue)}e.isEmptyObject(t)||(this._setFirst?((a=t.dataSource)&&delete t.dataSource,e.extend(!0,this.model,t),a&&(this.model.dataSource=a instanceof Array?a.slice():a,t.dataSource=this.model.dataSource),this._setModel&&this._setModel(t)):this._setModel&&!1===this._setModel(t)||e.extend(!0,this.model,t),"enablePersistence"in t&&this._setState(t.enablePersistence))}},option:function(s,l,n){if(!s)return this.model;if(e.isPlainObject(s))return this.setModel(s,n);if("string"==typeof s){s=s.replace(/^model\./,"");var o=t.getObject(s,this.model);if(l===i&&!n)return o;if("enablePersistence"===s)return this._setState(l);if(n&&l===t.extensions.modelGUID)return this._setModel(t.createObject(s,t.getObject(s,this.model),{}));if(n||t.getObject(s,this.model)!==l)return this.setModel(t.createObject(s,l,{}),n)}return i},_isValidModelValue:function(e,t,i){var s,l,n,o=t[e],a=i[e];if(!o)return!0;if("string"==typeof o){if("enum"==o&&(i[e]=a?a.toString().toLowerCase():a,o="string"),"array"===o){if("[object Array]"===Object.prototype.toString.call(a))return!0}else if("data"===o||"parent"===o||typeof a===o)return!0;return"Expected type - "+o}if(a instanceof Array){for(l=0;l<a.length;l++)if(!0!==(s=this._isValidModelValue(e,t,a[l])))return" ["+l+"] - "+s;return!0}for(n in a)if(!0!==(s=this._isValidModelValue(n,o,a)))return n+" : "+s;return!0},_returnFn:function(e,t){-1!=t.indexOf(".")?this._returnFn(e[t.split(".")[0]],t.split(".").slice(1).join(".")):e[t]=e[t].call(e.propName)},stringify:function(e){for(var i,s=this.observables,l=0;l<s.length;l++)i=t.getObject(s[l],e),t.isNullOrUndefined(i)||"function"!=typeof i||this._returnFn(e,s[l]);return JSON.stringify(e)},_setState:function(i){!0===i?(this._persistHandler=t.proxy(this.persistState,this),e(window).on("unload",this._persistHandler)):(this.deleteState(),e(window).off("unload",this._persistHandler))},_removeProp:function(e,i){t.isNullOrUndefined(e)||(-1!=i.indexOf(".")?this._removeProp(e[i.split(".")[0]],i.split(".").slice(1).join(".")):delete e[i])},persistState:function(){var e,i;if(this._ignoreOnPersist){for(e=a({},this.model),i=0;i<this._ignoreOnPersist.length;i++)this._removeProp(e,this._ignoreOnPersist[i]);e.ignoreOnPersist=this._ignoreOnPersist}else if(this._addToPersist){for(e={},i=0;i<this._addToPersist.length;i++)t.createObject(this._addToPersist[i],t.getObject(this._addToPersist[i],this.model),e);e.addToPersist=this._addToPersist}else e=a({},this.model);this._persistState&&(e.customPersists={},this._persistState(e.customPersists)),window.localStorage?(t.isNullOrUndefined(t.persistStateVersion)||null!=window.localStorage.getItem("persistKey")||window.localStorage.setItem("persistKey",t.persistStateVersion),window.localStorage.setItem("$ej$"+this.pluginName+this._id,JSON.stringify(e))):document.cookie&&(t.isNullOrUndefined(t.persistStateVersion)||null!=t.cookie.get("persistKey")||t.cookie.set("persistKey",t.persistStateVersion),t.cookie.set("$ej$"+this.pluginName+this._id,e))},deleteState:function(){window.localStorage?window.localStorage.removeItem("$ej$"+this.pluginName+this._id):document.cookie&&t.cookie.set("$ej$"+this.pluginName+this._id,model,new Date)},restoreState:function(i){var s,l,n=null;if(window.localStorage?n=window.localStorage.getItem("$ej$"+this.pluginName+this._id):document.cookie&&(n=t.cookie.get("$ej$"+this.pluginName+this._id)),n&&(s=JSON.parse(n),this._restoreState&&(this._restoreState(s.customPersists),delete s.customPersists),!1===t.isNullOrUndefined(s)&&(t.isNullOrUndefined(s.ignoreOnPersist)?t.isNullOrUndefined(s.addToPersist)||(this._addToPersist=s.addToPersist,delete s.addToPersist):(this._ignoreOnPersist=s.ignoreOnPersist,delete s.ignoreOnPersist))),t.isNullOrUndefined(s)||t.isNullOrUndefined(this._ignoreOnPersist))this.model=e.extend(!0,this.model,s);else{for(l in this._ignoreOnPersist)-1!==this._ignoreOnPersist[l].indexOf(".")?t.createObject(this._ignoreOnPersist[l],t.getObject(this._ignoreOnPersist[l],this.model),s):s[this._ignoreOnPersist[l]]=this.model[this._ignoreOnPersist[l]];this.model=s}!i&&n&&this._setModel&&this._setModel(this.model)},ignoreOnPersist:function(e){var t,s,l=[];if("object"==typeof e?l=e:"string"==typeof e&&l.push(e),this._addToPersist===i)for(this._ignoreOnPersist=this._ignoreOnPersist||[],t=0;t<l.length;t++)this._ignoreOnPersist.push(l[t]);else for(t=0;t<l.length;t++)s=this._addToPersist.indexOf(l[t]),this._addToPersist.splice(s,1)},addToPersist:function(t){var s,l,n=[];if("object"==typeof t?n=t:"string"==typeof t&&n.push(t),this._addToPersist===i)for(this._ignoreOnPersist=this._ignoreOnPersist||[],l=0;l<n.length;l++)s=this._ignoreOnPersist.indexOf(n[l]),this._ignoreOnPersist.splice(s,1);else for(l=0;l<n.length;l++)-1===e.inArray(n[l],this._addToPersist)&&this._addToPersist.push(n[l])},formatting:function(i,s,l){var n,o,a,r,d,h,c,u;if(i=i.replace(/%280/g,'"').replace(/&lt;/g,"<").replace(/&gt;/g,">"),l=t.preferredCulture(l)?l:"en-US",n=i,o=i.split("{0:"),d=i.split("}"),a=o[0],r=d[1],"string"==typeof s&&e.isNumeric(s)&&(s=Number(s)),-1!=i.indexOf("{0:"))return null!=(h=new RegExp("\\{0(:([^\\}]+))?\\}","gm").exec(i))&&null!=s?null!=a&&null!=r?a+t.format(s,h[2],l)+r:t.format(s,h[2],l):null!=s?s:"";if(n.startsWith("{")&&!n.startsWith("{0:")){var m=n.split(""),p=(s=(s||"")+"").split(""),g=/[0aA\*CN<>\?]/gm;for(c=0,u=0;c<m.length;c++)m[c]=g.test(m[c])?"{"+u+++"}":m[c];return String.format.apply(String,[m.join("")].concat(p)).replace("{","").replace("}","")}return null!=this.data&&null==this.data.Value?(e.each(this.data,function(e,t){n=n.replace(new RegExp("\\{"+e+"\\}","gm"),t)}),n):this.data.Value}},t.WidgetBase=function(){},s=function(t,i){for(var l in t)t[l]===i[l]&&delete i[l],e.isPlainObject(i[l])&&e.isPlainObject(t[l])&&s(t[l],i[l])},t.widget=function(s,n,d){var c,u,m;if("object"!=typeof s)m=d._rootCSS||t.getNameSpace(n),d=t.defineClass(n,function(i,o){var h,c,u,p,g,f,_,v,b,C;if(this.sfType=n,this.pluginName=s,this.instance=r,t.isNullOrUndefined(this._setFirst)&&(this._setFirst=!0),this["ob.values"]={},e.extend(this,t.widgetBase),this.dataTypes)for(h in o)if(!0!==(c=this._isValidModelValue(h,this.dataTypes,o)))throw"setModel - Invalid input for property :"+h+" - "+c;for((u=i.data("ejWidgets")||[]).push(s),i.data("ejWidgets",u),g=0;t.widget.observables&&this.observables&&g<this.observables.length;g++)(p=t.getObject(this.observables[g],o))&&t.createObject(this.observables[g],t.widget.observables.register(p,this.observables[g],this,i),o);if(this.element=i.jquery?i:e(i),this.model=a(!0,{},d.prototype.defaults,o),this.model.keyConfigs=a(this.keyConfigs),this.element.addClass(m+" e-js").data(s,this),this._id=i[0].id,this.element.attr("tabIndex")||this.element.attr("tabIndex",""),this.model.enablePersistence){if(window.localStorage&&!t.isNullOrUndefined(t.persistStateVersion)&&window.localStorage.getItem("persistKey")!=t.persistStateVersion)for(g in window.localStorage)-1!=g.indexOf("$ej$")&&window.localStorage.removeItem(g);else if(document.cookie&&!t.isNullOrUndefined(t.persistStateVersion)&&t.cookie.get("persistKey")!=t.persistStateVersion)for(f in document.cookie.split(/; */))-1!=f.indexOf("$ej$")&&t.cookie.set(f.split("=")[0],model,new Date);this._persistHandler=t.proxy(this.persistState,this),e(window).on("unload",this._persistHandler),this.restoreState(!0)}if(this._init(o),"object"==typeof this.model.keyConfigs&&!(this.model.keyConfigs instanceof Array)){for(v in _=!1,this.model.keyConfigs.focus&&this.element.attr("accesskey",this.model.keyConfigs.focus),this.model.keyConfigs)if("focus"!==v){_=!0;break}_&&this._keyPressed&&(b=i,C="keydown",this.keySettings&&(b=this.keySettings.getElement&&this.keySettings.getElement()||b,C=this.keySettings.event||C),this._on(b,C,function(e){if(this.model.keyConfigs){var t=l.getActionFromCode(this.model.keyConfigs,e.which,e.ctrlKey,e.shiftKey,e.altKey),i={code:e.which,ctrl:e.ctrlKey,alt:e.altKey,shift:e.shiftKey};t&&!1===this._keyPressed(t,e.target,i,e)&&e.preventDefault()}}))}this._trigger("create")},d),e.fn[s]=function(l){for(var a,r,c=l,u=0;u<this.length;u++){var p=e(this[u]),g=p.data(s),f=g&&p.hasClass(m),_=null;if(this.length>0&&e.isPlainObject(c)&&(l=t.copyObject({},c)),f){if(l)if(r=[].slice.call(arguments,1),this.length>0&&r[0]&&"option"===c&&e.isPlainObject(r[0])&&(r[0]=t.copyObject({},r[0])),e.isPlainObject(l))g.setModel(l);else if(0!==l.indexOf("_")&&!t.isNullOrUndefined(_=t.getObject(l,g))||0===l.indexOf("model.")){if(!_||!e.isFunction(_)){if(1==arguments.length)return _;g.option(l,arguments[1]);continue}if((a=_.apply(g,r))!==i)return a}else o(n+": function/property - "+l+" does not exist")}else!0!==d.prototype._requiresID||e(this[u]).attr("id")||p.attr("id",h("ejControl_")),l&&"object"!=typeof l?o(s+": methods/properties can be accessed only after plugin creation"):(d.prototype.defaults&&!t.isNullOrUndefined(t.setCulture)&&"locale"in d.prototype.defaults&&"ejChart"!=s&&(!l||"locale"in l?t.isNullOrUndefined(l)&&((l={}).locale=t.setCulture().name):l.locale=t.setCulture().name),new d(p,l))}return-1!=s.indexOf("ejm")&&t.widget.registerInstance(p,s,n,d.prototype),this},t.widget.register(s,n,d.prototype);else for(c in d=n,s)(u=s[c])instanceof Array&&(d._rootCSS=u[1],u=u[0]),t.widget(c,u,d),s[c]instanceof Array&&(d._rootCSS="")},e.extend(t.widget,function(){var e={},i=[];return{register:function(i,s,l){t.isNullOrUndefined(e[i])||o("ej.widget : The widget named "+i+" is trying to register twice."),e[i]={name:i,className:s,proto:l},t.widget.extensions&&t.widget.extensions.registerWidget(i)},registerInstance:function(e,t,s,l){i.push({element:e,pluginName:t,className:s,proto:l})},registeredWidgets:e,registeredInstances:i}}()),t.widget.destroyAll=function(e){var t,i,s,l;if(e&&e.length)for(t=0;t<e.length;t++)if((s=(i=e.eq(t).data()).ejWidgets)&&s.length)for(l=0;l<s.length;l++)i[s[l]]&&i[s[l]].destroy&&i[s[l]].destroy()},t.cookie={get:function(e){var t=RegExp(e+"=([^;]+)").exec(document.cookie);return t&&t.length>1?t[1]:i},set:function(e,t,i){"object"==typeof t&&(t=JSON.stringify(t)),t=escape(t)+(null==i?"":"; expires="+i.toUTCString()),document.cookie=e+"="+t}},l={getActionFromCode:function(e,t,i,s,n){var o,a,r;for(o in i=i||!1,s=s||!1,n=n||!1,e)if("focus"!==o)for(a=l.getKeyObject(e[o]),r=0;r<a.length;r++)if(t===a[r].code&&i==a[r].isCtrl&&s==a[r].isShift&&n==a[r].isAlt)return o;return null},getKeyObject:function(t){for(var i,s,n,o={isCtrl:!1,isShift:!1,isAlt:!1},a=e.extend(!0,{},o),r=t.split(","),d=[],h=0;h<r.length;h++){if(i=null,-1!=r[h].indexOf("+"))for(s=r[h].split("+"),n=0;n<s.length;n++)i=l.getResult(e.trim(s[n]),o);else i=l.getResult(e.trim(r[h]),e.extend(!0,{},a));d.push(i)}return d},getResult:function(e,t){return"ctrl"===e?t.isCtrl=!0:"shift"===e?t.isShift=!0:"alt"===e?t.isAlt=!0:t.code=parseInt(e,10),t}},t.getScrollableParents=function(t){return e(t).parentsUntil("html").filter(function(){return"visible"!=e(this).css("overflow")}).add(e(window))},t.browserInfo=function(){var i,s,l,n,o={},a=[],r={opera:/(opera|opr)(?:.*version|)[ \/]([\w.]+)/i,edge:/(edge)(?:.*version|)[ \/]([\w.]+)/i,webkit:/(chrome)[ \/]([\w.]+)/i,safari:/(webkit)[ \/]([\w.]+)/i,msie:/(msie|trident) ([\w.]+)/i,mozilla:/(mozilla)(?:.*? rv:([\w.]+)|)/i};for(i in r)if(r.hasOwnProperty(i)&&(a=navigator.userAgent.match(r[i]))){if(o.name="opr"==a[1].toLowerCase()?"opera":a[1].toLowerCase(),o.version=a[2],o.culture={},o.culture.name=o.culture.language=navigator.language||navigator.userLanguage,void 0!==t.globalize){for(s=t.preferredCulture().name,l=navigator.language||navigator.userLanguage?t.preferredCulture(navigator.language||navigator.userLanguage):t.preferredCulture("en-US"),n=0;navigator.languages&&n<navigator.languages.length&&(l=t.preferredCulture(navigator.languages[n])).language!=navigator.languages[n];n++);t.preferredCulture(s),e.extend(!0,o.culture,l)}!navigator.userAgent.match(/Trident\/7\./)||(o.name="msie");break}return o.isMSPointerEnabled="msie"==o.name&&o.version>9&&window.navigator.msPointerEnabled,o.pointerEnabled=window.navigator.pointerEnabled,o},t.eventType={mouseDown:"mousedown touchstart",mouseMove:"mousemove touchmove",mouseUp:"mouseup touchend",mouseLeave:"mouseleave touchcancel",click:"click touchend"},t.event=function(t,i,s){return e.extend(s||{},{type:t,model:i,cancel:!1})},t.proxy=function(e,t,i){return e&&"function"==typeof e?"on"in e&&t?i?e.on(t,i):e.on(t):function(){var s=i?[i]:[];return s.push.apply(s,arguments),e.apply(t||this,s)}:null},t.hasStyle=function(e){var t,i,s=document.documentElement.style;if(e in s)return!0;for(t=["ms","Moz","Webkit","O","Khtml"],e=e[0].toUpperCase()+e.slice(1),i=0;i<t.length;i++)if(t[i]+e in s)return!0;return!1},Array.prototype.indexOf=Array.prototype.indexOf||function(e){var t,i=this.length;if(0===i)return-1;for(t=0;t<i;t++)if(t in this&&this[t]===e)return t;return-1},String.prototype.startsWith=String.prototype.startsWith||function(e){return this.slice(0,e.length)===e};var a=t.copyObject=function(e,s){var l,n,o,r,d,h,c=2;for("boolean"!=typeof e&&(c=1),o=[].slice.call(arguments,c),1===c&&(s=e,e=i),r=0;r<o.length;r++)for(d in o[r])if(l=s[d],(n=o[r][d])!==i&&l!==n&&o[r]!==n&&s!==n)if(n instanceof Array)if(0===r&&e)for(s[d]=[],h=0;h<n.length;h++)a(!0,s[d],n);else s[d]=n.slice();else t.isPlainObject(n)?(s[d]=l||{},e?a(e,s[d],n):a(s[d],n)):s[d]=n;return s},r=function(){return this},d=0,h=function(e){return e+d++};t.template={},t.template.render=t.template["text/x-jsrender"]=function(t,i,s,l,n){"#"!==i.slice(0,1)&&(i=["<div>",i,"</div>"].join(""));var o={prop:n,index:l};return e(i).render(s,o)},t.isPlainObject=function(e){if(!e||t.DataManager!==i&&e instanceof t.DataManager||"object"!=typeof e||e.nodeType||jQuery.isWindow(e))return!1;try{if(e.constructor&&!e.constructor.prototype.hasOwnProperty("isPrototypeOf"))return!1}catch(e){return!1}var s,l=t.support.isOwnLast;for(s in e)if(l)break;return s===i||e.hasOwnProperty(s)},n=!1,t.util.valueFunction=function(e){return function(s,l){var o=t.getObject(e,this.model);if(!1===n&&(n=t.getObject("observables.getValue",t.widget)),s===i)return t.isNullOrUndefined(n)?"function"==typeof o?o.call(this):o:n(o,l);"function"==typeof o?(this["ob.values"][e]=s,o.call(this,s)):t.createObject(e,s,this.model)}},t.util.getVal=function(e){return"function"==typeof e?e():e},t.support={isOwnLast:function(){var e,t=function(){this.a=1};for(e in t.prototype.b=1,new t)return"b"===e}(),outerHTML:document.createElement("div").outerHTML!==i},o=t.throwError=function(e){try{throw new Error(e)}catch(e){throw e.message+"\n"+e.stack}},t.getRandomValue=function(e,s){var l,n;return e===i||s===i?t.throwError("Min and Max values are required for generating a random number"):("crypto"in window&&"getRandomValues"in crypto?(n=new Uint16Array(1),window.crypto.getRandomValues(n),l=n[0]%(s-e)+e):l=Math.random()*(s-e)+e,0|l)},t.extensions={},t.extensions.modelGUID="{0B1051BA-1CCB-42C2-A3B5-635389B92A50}"}(window.jQuery,window.Syncfusion),function(){$.fn.addEleAttrs=function(e){var t=$(this);$.each(e,function(e,i){i&&i.specified&&t.attr(i.name,i.value)})},$.fn.removeEleAttrs=function(e){return this.each(function(){var t=$(this),i=$(this.attributes).clone();$.each(i,function(i,s){s&&s.specified&&e.test(s.name)&&t.removeAttr(s.name)})})},$.fn.attrNotStartsWith=function(e){var t,s=[];for(this.each(function(){t=$(this.attributes).clone()}),i=0;i<t.length;i++){if(t[i]&&t[i].specified&&e.test(t[i].name))continue;s.push(t[i])}return s},$.fn.removeEleEmptyAttrs=function(){return this.each(function(){var e=$(this),t=$(this.attributes).clone();$.each(t,function(t,i){i&&i.specified&&""===i.value&&e.removeAttr(i.name)})})},$.extend($.support,{has3d:ej.addPrefix("perspective")in ej.styles,hasTouch:"ontouchstart"in window,hasPointer:navigator.msPointerEnabled,hasTransform:!1!==ej.userAgent(),pushstate:"pushState"in history&&"replaceState"in history,hasTransition:ej.addPrefix("transition")in ej.styles}),$.extend($.expr[":"],{attrNotStartsWith:function(e,t,i){for(var s=e.attributes,l=0;l<s.length;l++)if(0===s[l].nodeName.indexOf(i[3]))return!1;return!0}});var e=$.fn.andSelf||$.fn.addBack;$.fn.andSelf=$.fn.addBack=function(){return e.apply(this,arguments)}}()}),
/*!
*  filename: ej.checkbox.min.js
*  version : 14.4.0.15
*  Copyright Syncfusion Inc. 2001 - 2016. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
function(e){"function"==typeof define&&define.amd?define(["./../common/ej.core.min"],e):e()}(function(){var e,t;e=jQuery,(t=Syncfusion).widget("ejCheckBox","ej.CheckBox",{_rootCSS:"e-checkbox",element:null,model:null,validTags:["input"],_addToPersist:["checked","checkState"],_setFirst:!1,angular:{require:["?ngModel","^?form","^?ngModelOptions"]},defaults:{id:null,name:null,value:null,htmlAttributes:{},checked:!1,enabled:!0,enableTriState:!1,showRoundedCorner:!1,enablePersistence:!1,cssClass:"",text:"",enableRTL:!1,idPrefix:"ej",size:"small",checkState:"uncheck",validationRules:null,validationMessage:null,beforeChange:null,change:null,create:null,destroy:null},dataTypes:{id:"string",name:"string",enablePersistence:"boolean",enableTriState:"boolean",size:"enum",checkState:"enum",enabled:"boolean",idPrefix:"string",validationRules:"data",validationMessage:"data",htmlAttributes:"data"},observables:["checked"],checked:t.util.valueFunction("checked"),_init:function(){var e=t.browserInfo();this._isIE8="msie"==e.name&&"8.0"==e.version,this._isDevice=this._checkDevice(),this._setValue(),this._renderControl(),this.model.enableRTL&&this._setRTL(),this.model.enabled&&this._wireEvents(),this._setEnabled(this.model.enabled),null!=this.model.validationRules&&(this._initValidator(),this._setValidation()),this._addAttr(this.model.htmlAttributes)},_checkDevice:function(){return t.isDevice()&&t.isTouchDevice()},_setRTL:function(){e(this.maindiv).addClass("e-rtl")},_initValidator:function(){this.wrapper.closest("form").data("validator")||this.wrapper.closest("form").validate()},_setValidation:function(){var i,s,l,n;for(s in this.wrapper.find("input").rules("add",this.model.validationRules),i=(i=this.wrapper.closest("form").data("validator"))||this.wrapper.closest("form").validate(),name=this.wrapper.find("input").attr("name"),i.settings.messages[name]={},this.model.validationRules)if(l=null,!t.isNullOrUndefined(this.model.validationRules[s])){if(t.isNullOrUndefined(this.model.validationRules.messages&&this.model.validationRules.messages[s]))for(n in i.settings.messages[name][s]=e.validator.messages[s],this.model.validationMessage)s==n&&(l=this.model.validationMessage[s]);else l=this.model.validationRules.messages[s];i.settings.messages[name][s]=null!=l?l:e.validator.messages[s]}},_addAttr:function(t){var i=this;e.map(t,function(e,t){"class"==t?i.wrapper.addClass(e):"name"==t||"required"==t?i.element.attr(t,e):"disabled"==t&&"disabled"==e?i._setEnabled(!1):"checked"==t&&"checked"==e?i.checked()instanceof Array?i._updateCheckedItem():i._checked(!0):i.wrapper.attr(t,e)})},_triggerBeforeChange:function(){var e={isChecked:this._isChecked,isInteraction:!1};if(1==this._trigger("beforeChange",e))return!1},_triggerChange:function(){var e={isChecked:this._isChecked,checkState:this.model.checkState,isInteraction:!1};this._trigger("change",e)},_setModel:function(i){var s,l,n;for(s in i)switch(s){case"checked":if(this.model.beforeChange)return this._triggerBeforeChange();this.checked()instanceof Array?(n=(l=t.util.getVal(i[s]))[l.length-1],this.model.value==n&&(this._isChecked=!0)):(this._isChecked=t.util.getVal(i[s]),this.checked(this._isChecked)),this._isChecked?this._checked():this._unChecked(),this.model.change&&this._triggerChange();break;case"enableTriState":i[s]&&(this.model.enableTriState=i[s],this._indeterminateState=i[s]);break;case"checkState":if(this.model.enableTriState){if(this.model.beforeChange)return this._triggerBeforeChange();this.model.checkState=i[s],this._changeState(this.model.checkState),this.checked()instanceof Array?this._updateCheckedItem():(i[s]="check")?this._hiddenInput.removeAttribute("name"):this._hiddenInput.setAttribute("name",this.model.name),this.model.change&&(this.checked()instanceof Array||(this._isChecked="uncheck"!=this.model.checkState),this._triggerChange())}break;case"cssClass":this._changeSkin(i[s]);break;case"enableRTL":i[s]?this._setRTL():e(this.maindiv).removeClass("e-rtl");break;case"text":this._setText(i[s]);break;case"validationRules":null!=this.model.validationRules&&(this.wrapper.find("input").rules("remove"),this.model.validationMessage=null),this.model.validationRules=i[s],null!=this.model.validationRules&&(this._initValidator(),this._setValidation());break;case"validationMessage":this.model.validationMessage=i[s],null!=this.model.validationRules&&null!=this.model.validationMessage&&(this._initValidator(),this._setValidation());break;case"id":this._setIdAttr(i[s]);break;case"name":this.element.attr("name",i[s]),(!this._isChecked||this.spanImg.hasClass("e-chk-indeter"))&&this._hiddenInput.setAttribute("name",i[s]),this.model.name=i[s];break;case"value":this.element.attr("value",i[s]);break;case"size":this._setSize(i[s]);break;case"showRoundedCorner":this._setRoundedCorner(i[s]);break;case"enabled":this._setEnabled(i[s]);break;case"htmlAttributes":this._addAttr(i[s])}},_destroy:function(){this.element.removeClass("e-checkbox e-input"),this.element.insertBefore(this.wrapper),this.wrapper.remove()},_changeSkin:function(t){this.model.cssClass!=t&&(this.wrapper.removeClass(this.model.cssClass).addClass(t),e("#"+this.model.idPrefix+this.model.id+"_wrapper").removeClass(this.model.cssClass).addClass(t))},_setValue:function(){this._indeterminateState=!1,this._isChecked=!1;var e=this.element[0].getAttribute("id"),i=this.element[0].getAttribute("name"),s=this.element[0].getAttribute("value");t.isNullOrUndefined(e)||(this.model.id=e),t.isNullOrUndefined(i)||(this.model.name=i),t.isNullOrUndefined(s)||""==s||(this.model.value=s),this.checked()||t.isNullOrUndefined(this.element.attr("checked"))||(this._isChecked=!0),t.isNullOrUndefined(this.model.name)&&(this.model.name=this.model.id),this.model.enabled=this.model.enabled&&!this.element.attr("disabled")},_setSize:function(i){i==t.CheckboxSize.Medium?e(this.innerdiv).removeClass("e-chkbox-small").addClass("e-chkbox-medium"):e(this.innerdiv).removeClass("e-chkbox-medium").addClass("e-chkbox-small")},_setRoundedCorner:function(e){e?this.span.addClass("e-corner"):this.span.removeClass("e-corner")},_setEnabled:function(e){e?this.enable():this.disable()},_setCheckBoxState:function(){this.model.enableTriState?"indeterminate"==this.model.checkState?this._indeterminateState=!0:"check"==this.model.checkState?this._isChecked=!0:"uncheck"==this.model.checkState&&(this._isChecked=!1):"indeterminate"==this.model.checkState&&(this.model.checkState="uncheck")},_createElement:function(e,t){var i=document.createElement(e);return this._setAttributes(i,t),i},_setAttributes:function(e,t){for(var i in t)e.setAttribute(i,t[i])},_renderControl:function(){this._setCheckBoxState(),this.maindiv=this._createElement("span",{class:"e-chkbox-wrap e-widget "+this.model.cssClass,role:"checkbox",tabindex:0}),this._isValid(this.model.id)&&(this.maindiv.setAttribute("id",this.model.idPrefix+this.model.id),this.element[0].setAttribute("id",this.model.id)),this.innerdiv=document.createElement("div"),this._setSize(this.model.size),this.span=document.createElement("span"),this.span=e(this.span),this.spanImg=this._createElement("span",{class:"e-chk-image e-icon",role:"presentation"}),this.spanImg=e(this.spanImg),this.element.addClass("e-input"),this.model.name=t.isNullOrUndefined(this.model.name)?this.model.id:this.model.name,this.model.value=!!t.isNullOrUndefined(this.model.value)||this.model.value,this._setAttributes(this.element[0],{name:this.model.name,value:this.model.value}),this._hiddenInput=this._createElement("input",{type:"checkbox",value:!1,style:"display:none"}),this._isValid(this.model.name)&&this._hiddenInput.setAttribute("id",this.model.name+"_hidden"),this._setRoundedCorner(this.model.showRoundedCorner),this.checked()&&this._setCheckedItem(this.checked()),this._isChecked?(this.spanImg.addClass("e-checkmark"),this.span.addClass("e-chk-act"),this.maindiv.setAttribute("aria-checked",!0),this.element.attr("checked","checked")):(this.span.addClass("e-chk-inact"),this.maindiv.setAttribute("aria-checked",!1),this._hiddenInput.setAttribute("name",this.model.name)),this.checked()instanceof Array||this.checked(this._isChecked),this.span[0].appendChild(this.spanImg[0]),this.innerdiv.appendChild(this.span[0]),this.element[0].parentNode&&this.element[0].parentNode.insertBefore(this.maindiv,this.element[0]),this.maindiv.appendChild(this.element[0]),this.maindiv.appendChild(this._hiddenInput),this.maindiv.appendChild(this.innerdiv),this.wrapper=e(this.maindiv),this._setTextWrapper(this.model.text),this.chkbx=this.element,1==this.model.enableTriState&&1==this._indeterminateState&&this._setIndeterminate(this._indeterminateState),this.checked()instanceof Array&&this._updateCheckedItem()},_changeState:function(e){"indeterminate"==e?(this.spanImg.removeClass("e-checkmark").addClass("e-stop"),this.span.removeClass("e-chk-act e-chk-inact").addClass("e-chk-indeter"),this.wrapper[0].setAttribute("aria-checked","mixed"),this.wrapper.find("input").prop("enableTriState",!0),this.checked()instanceof Array||this.checked(null)):"check"==e?(this.spanImg.removeClass("e-stop").addClass("e-checkmark"),this.span.removeClass("e-chk-act e-chk-inact e-chk-indeter").addClass("e-chk-act"),this.wrapper[0].setAttribute("aria-checked",!0)):"uncheck"==e&&(this.spanImg.removeClass("e-checkmark e-stop"),this.span.removeClass("e-chk-act e-chk-indeter").addClass("e-chk-inact"),this.wrapper[0].setAttribute("aria-checked",!1))},_setIndeterminate:function(e){e?(this.spanImg.removeClass("e-checkmark").addClass("e-stop"),this.span.removeClass("e-chk-act e-chk-inact").addClass("e-chk-indeter"),this.wrapper[0].setAttribute("aria-checked","mixed"),this.wrapper.find("input").prop("enableTriState",!0),this.model.checkState="indeterminate",this.checked()instanceof Array||this.checked(null),this._hiddenInput.setAttribute("name",this.model.name)):(this.span.removeClass("e-chk-indeter"),this.spanImg.removeClass("e-stop"),this.wrapper.find("input").removeAttr("enableTriState"),this.wrapper.find("input").prop("enableTriState",!1),this.checked()?this._checked():this._unChecked())},_setTextWrapper:function(e){""!=e&&(this.txtSpan=t.buildTag("div.e-text",e),this.wrapper.append(this.txtSpan),this.model.enableRTL&&this._setRTL())},_setText:function(e){""==this.model.text&&""!=e?this._setTextWrapper(e):this.txtSpan.html(e)},_setIdAttr:function(t){e("#"+this.model.idPrefix+this.model.id+"_wrapper").attr("id",this.model.idPrefix+t+"_wrapper"),this.element[0].setAttribute("id",t)},_isValid:function(e){return!t.isNullOrUndefined(e)&&""!=e},_wireEvents:function(){this._on(this.wrapper,"click",this._checkedHandler),this._isIE8&&this._isValid(this.model.id)&&this._on(e("label[for="+this.model.id+"]"),"click",function(){this.wrapper.click()}),this._on(this.wrapper,"focus",this._focusIn),this._on(this.wrapper,"focusout",this._focusOut)},_unWireEvents:function(){this._off(this.wrapper,this._isDevice&&e.isFunction(e.fn.tap)?"tap":"click"),this._isIE8&&this._isValid(this.model.id)&&this._off(e("label[for="+this.model.id+"]"),"click"),this._off(this.wrapper,"focus"),this._off(this.wrapper,"focusout")},_focusIn:function(){e(this.wrapper).addClass("e-focus"),e(this.wrapper).on("keydown",e.proxy(this._checkUnCheck,this))},_focusOut:function(){e(this.wrapper).removeClass("e-focus"),e(this.wrapper).off("keydown",e.proxy(this._checkUnCheck,this))},_checkUnCheck:function(e){32==e.keyCode&&(e.preventDefault(),this._checkedHandler())},_checkedHandler:function(e){var t={isChecked:this._isChecked,isInteraction:!0,event:e};return 1!=this._trigger("beforeChange",t)&&(this.span.hasClass("e-chk-inact")?(this._checked(),this.checked()instanceof Array||this.checked(!0),this.model.enableTriState&&(this._indeterminateState=!0)):this.span.hasClass("e-chk-act")?1==this.model.enableTriState&&1==this._indeterminateState?(this._setIndeterminate(!0),this.checked()instanceof Array||this.checked(!0)):(this._unChecked(),this.checked()instanceof Array||this.checked(!1)):this.span.hasClass("e-chk-indeter")&&(this.checked()instanceof Array?this._isChecked=!1:this.checked(!1),this._setIndeterminate(!1),this._indeterminateState=!1),this.checked()instanceof Array?this._updateCheckedItem():this._isChecked=this.checked(),t={isChecked:this._isChecked,checkState:this.model.checkState,isInteraction:!0,event:e},this._trigger("change",t),!0)},_checked:function(){this.span.removeClass("e-chk-inact").addClass("e-chk-act"),this.spanImg.removeClass("e-stop").addClass("e-checkmark"),this.wrapper[0].setAttribute("aria-checked",!0),this.wrapper.find("input[type=checkbox]").prop("checked",!0),this.model.checkState="check",this._hiddenInput.removeAttribute("name")},_unChecked:function(){this.span.removeClass("e-chk-act e-chk-indeter").addClass("e-chk-inact"),this.wrapper[0].setAttribute("aria-checked",!1),this.spanImg.removeClass("e-checkmark e-stop"),this.wrapper.find("input[type=checkbox]").prop("checked",!1),this.model.checkState="uncheck",this._hiddenInput.setAttribute("name",this.model.name)},_setCheckedItem:function(e){if(t.isNullOrUndefined(e)||""==e||e instanceof Array){if(e instanceof Array&&!t.isNullOrUndefined(this.model.value)&&""!=this.model.value)for(var i=0;i<e.length;i++)e[i]==this.model.value&&(this._isChecked=!0)}else this._isChecked=!0},_updateCheckedItem:function(){t.isNullOrUndefined(this.model.value)||""==this.model.value||this.wrapper.find("span:first").hasClass("e-chk-indeter")||(e.inArray(this.model.value,this.checked())<0&&this.wrapper.find("span:first").hasClass("e-chk-act")?(this.checked().push(this.model.value),this._isChecked=!0,this._hiddenInput.removeAttribute("name")):e.inArray(this.model.value,this.checked())>-1&&this.wrapper.find("span:first").hasClass("e-chk-inact")&&(this.checked().splice(e.inArray(this.model.value,this.checked()),1),this._isChecked=!1,this._hiddenInput.setAttribute("name",this.model.name)))},disable:function(){this.wrapper.hasClass("e-disable")||(this.wrapper.addClass("e-disable"),this.wrapper[0].setAttribute("aria-disabled",!0),this.element[0].setAttribute("disabled","disabled"),this._isIE8&&this.span.addClass("e-disable"),this._unWireEvents(),this.model.enabled=!1)},enable:function(){this.wrapper.hasClass("e-disable")&&(this.wrapper.removeClass("e-disable"),this.wrapper[0].setAttribute("aria-disabled",!1),this.element.prop("disabled",!1),this._isIE8&&this.span.removeClass("e-disable"),this._wireEvents(),this.model.enabled=!0)},isChecked:function(){if(null!=this._isChecked&&null!=this._isChecked)return this._isChecked}}),t.CheckboxSize={Small:"small",Medium:"medium"},t.CheckState={Check:"check",Uncheck:"uncheck",Indeterminate:"indeterminate"}}),jQuery.easing.jswing=jQuery.easing.swing,jQuery.extend(jQuery.easing,{def:"easeOutQuad",swing:function(e,t,i,s,l){return jQuery.easing[jQuery.easing.def](e,t,i,s,l)},easeInQuad:function(e,t,i,s,l){return s*(t/=l)*t+i},easeOutQuad:function(e,t,i,s,l){return-s*(t/=l)*(t-2)+i},easeInOutQuad:function(e,t,i,s,l){return(t/=l/2)<1?s/2*t*t+i:-s/2*(--t*(t-2)-1)+i},easeInCubic:function(e,t,i,s,l){return s*(t/=l)*t*t+i},easeOutCubic:function(e,t,i,s,l){return s*((t=t/l-1)*t*t+1)+i},easeInOutCubic:function(e,t,i,s,l){return(t/=l/2)<1?s/2*t*t*t+i:s/2*((t-=2)*t*t+2)+i},easeInQuart:function(e,t,i,s,l){return s*(t/=l)*t*t*t+i},easeOutQuart:function(e,t,i,s,l){return-s*((t=t/l-1)*t*t*t-1)+i},easeInOutQuart:function(e,t,i,s,l){return(t/=l/2)<1?s/2*t*t*t*t+i:-s/2*((t-=2)*t*t*t-2)+i},easeInQuint:function(e,t,i,s,l){return s*(t/=l)*t*t*t*t+i},easeOutQuint:function(e,t,i,s,l){return s*((t=t/l-1)*t*t*t*t+1)+i},easeInOutQuint:function(e,t,i,s,l){return(t/=l/2)<1?s/2*t*t*t*t*t+i:s/2*((t-=2)*t*t*t*t+2)+i},easeInSine:function(e,t,i,s,l){return-s*Math.cos(t/l*(Math.PI/2))+s+i},easeOutSine:function(e,t,i,s,l){return s*Math.sin(t/l*(Math.PI/2))+i},easeInOutSine:function(e,t,i,s,l){return-s/2*(Math.cos(Math.PI*t/l)-1)+i},easeInExpo:function(e,t,i,s,l){return 0==t?i:s*Math.pow(2,10*(t/l-1))+i},easeOutExpo:function(e,t,i,s,l){return t==l?i+s:s*(1-Math.pow(2,-10*t/l))+i},easeInOutExpo:function(e,t,i,s,l){return 0==t?i:t==l?i+s:(t/=l/2)<1?s/2*Math.pow(2,10*(t-1))+i:s/2*(2-Math.pow(2,-10*--t))+i},easeInCirc:function(e,t,i,s,l){return-s*(Math.sqrt(1-(t/=l)*t)-1)+i},easeOutCirc:function(e,t,i,s,l){return s*Math.sqrt(1-(t=t/l-1)*t)+i},easeInOutCirc:function(e,t,i,s,l){return(t/=l/2)<1?-s/2*(Math.sqrt(1-t*t)-1)+i:s/2*(Math.sqrt(1-(t-=2)*t)+1)+i},easeInElastic:function(e,t,i,s,l){e=1.70158;var n=0,o=s;return 0==t?i:1==(t/=l)?i+s:(n||(n=.3*l),o<Math.abs(s)?(o=s,e=n/4):e=n/(2*Math.PI)*Math.asin(s/o),-o*Math.pow(2,10*(t-=1))*Math.sin(2*(t*l-e)*Math.PI/n)+i)},easeOutElastic:function(e,t,i,s,l){e=1.70158;var n=0,o=s;return 0==t?i:1==(t/=l)?i+s:(n||(n=.3*l),o<Math.abs(s)?(o=s,e=n/4):e=n/(2*Math.PI)*Math.asin(s/o),o*Math.pow(2,-10*t)*Math.sin(2*(t*l-e)*Math.PI/n)+s+i)},easeInOutElastic:function(e,t,i,s,l){e=1.70158;var n=0,o=s;return 0==t?i:2==(t/=l/2)?i+s:(n||(n=.3*l*1.5),o<Math.abs(s)?(o=s,e=n/4):e=n/(2*Math.PI)*Math.asin(s/o),t<1?-.5*o*Math.pow(2,10*(t-=1))*Math.sin(2*(t*l-e)*Math.PI/n)+i:o*Math.pow(2,-10*(t-=1))*Math.sin(2*(t*l-e)*Math.PI/n)*.5+s+i)},easeInBack:function(e,t,i,s,l,n){return null==n&&(n=1.70158),s*(t/=l)*t*((n+1)*t-n)+i},easeOutBack:function(e,t,i,s,l,n){return null==n&&(n=1.70158),s*((t=t/l-1)*t*((n+1)*t+n)+1)+i},easeInOutBack:function(e,t,i,s,l,n){return null==n&&(n=1.70158),(t/=l/2)<1?s/2*t*t*((1+(n*=1.525))*t-n)+i:s/2*((t-=2)*t*((1+(n*=1.525))*t+n)+2)+i},easeInBounce:function(e,t,i,s,l){return s-jQuery.easing.easeOutBounce(e,l-t,0,s,l)+i},easeOutBounce:function(e,t,i,s,l){return(t/=l)<1/2.75?7.5625*s*t*t+i:t<2/2.75?s*(7.5625*(t-=1.5/2.75)*t+.75)+i:t<2.5/2.75?s*(7.5625*(t-=2.25/2.75)*t+.9375)+i:s*(7.5625*(t-=2.625/2.75)*t+.984375)+i},easeInOutBounce:function(e,t,i,s,l){return t<l/2?.5*jQuery.easing.easeInBounce(e,2*t,0,s,l)+i:.5*jQuery.easing.easeOutBounce(e,2*t-l,0,s,l)+.5*s+i}}),
/*!
* Globalize
*
* http://github.com/jquery/globalize
*
* Copyright Software Freedom Conservancy, Inc.
* Dual licensed under the MIT or GPL Version 2 licenses.
* http://jquery.org/license
*/
function(e,t){var i,s,l,n,o,a,r,d,h,c,u,m,p,g,f,_,v,b,C,w,y,S,x,T;i=function(e){return new i.prototype.init(e)},"undefined"!=typeof require&&"undefined"!=typeof exports&&"undefined"!=typeof module?module.exports=i:e.Globalize=i,i.cultures={},i.prototype={constructor:i,init:function(e){return this.cultures=i.cultures,this.cultureSelector=e,this}},i.prototype.init.prototype=i.prototype,i.cultures.default={name:"en",englishName:"English",nativeName:"English",isRTL:!1,language:"en",numberFormat:{pattern:["-n"],decimals:2,",":",",".":".",groupSizes:[3],"+":"+","-":"-",NaN:"NaN",negativeInfinity:"-Infinity",positiveInfinity:"Infinity",percent:{pattern:["-n %","n %"],decimals:2,groupSizes:[3],",":",",".":".",symbol:"%"},currency:{pattern:["($n)","$n"],decimals:2,groupSizes:[3],",":",",".":".",symbol:"$"}},calendars:{standard:{name:"Gregorian_USEnglish","/":"/",":":":",firstDay:0,days:{names:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],namesAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],namesShort:["Su","Mo","Tu","We","Th","Fr","Sa"]},months:{names:["January","February","March","April","May","June","July","August","September","October","November","December",""],namesAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",""]},AM:["AM","am","AM"],PM:["PM","pm","PM"],eras:[{name:"A.D.",start:null,offset:0}],twoDigitYearMax:2029,patterns:{d:"M/d/yyyy",D:"dddd, MMMM dd, yyyy",t:"h:mm tt",T:"h:mm:ss tt",f:"dddd, MMMM dd, yyyy h:mm tt",F:"dddd, MMMM dd, yyyy h:mm:ss tt",M:"MMMM dd",Y:"yyyy MMMM",S:"yyyy'-'MM'-'dd'T'HH':'mm':'ss"}}},messages:{}},i.cultures.default.calendar=i.cultures.default.calendars.standard,i.cultures.en=i.cultures.default,i.cultureSelector="en",s=/^0x[a-f0-9]+$/i,l=/^[+\-]?infinity$/i,n=/^[+\-]?\d*\.?\d*(e[+\-]?\d+)?$/,o=/^\s+|\s+$/g,a=function(e,t){if(e.indexOf)return e.indexOf(t);for(var i=0,s=e.length;i<s;i++)if(e[i]===t)return i;return-1},r=function(e,t){return e.substr(e.length-t.length)===t},d=function(){var e,t,i,s,l,n,o=arguments[0]||{},a=1,r=arguments.length,m=!1;for("boolean"==typeof o&&(m=o,o=arguments[1]||{},a=2),"object"==typeof o||c(o)||(o={});a<r;a++)if(null!=(e=arguments[a]))for(t in e)i=o[t],o!==(s=e[t])&&(m&&s&&(u(s)||(l=h(s)))?(l?(l=!1,n=i&&h(i)?i:[]):n=i&&u(i)?i:{},o[t]=d(m,n,s)):undefined!==s&&(o[t]=s));return o},h=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},c=function(e){return"[object Function]"===Object.prototype.toString.call(e)},u=function(e){return"[object Object]"===Object.prototype.toString.call(e)},m=function(e,t){return 0===e.indexOf(t)},p=function(e){return(e+"").replace(o,"")},g=function(e){return isNaN(e)?NaN:Math[e<0?"ceil":"floor"](e)},f=function(e,t,i){for(var s=e.length;s<t;s+=1)e=i?"0"+e:e+"0";return e},_=function(e,t){for(var i,s=0,l=!1,n=0,o=e.length;n<o;n++)switch(i=e.charAt(n)){case"'":l?t.push("'"):s++,l=!1;break;case"\\":l&&t.push("\\"),l=!l;break;default:t.push(i),l=!1}return s},v=function(e,t){t=t||"F";var i,s=e.patterns,l=t.length;if(1===l){if(!(i=s[t]))throw"Invalid date format string '"+t+"'.";t=i}else 2===l&&"%"===t.charAt(0)&&(t=t.charAt(1));return t},b=function(e,t,i){function s(e,t){var i,s=e+"";return t>1&&s.length<t?(i=k[t-2]+s).substr(i.length-t,t):i=s}function l(){return x||T||(x=I.test(t),T=!0),x}function n(e,t){if(D)return D[t];switch(t){case 0:return e.getFullYear();case 1:return e.getMonth();case 2:return e.getDate();default:throw"Invalid part value "+t}}var o,a,r,d,h,c,u,m,p,g=i.calendar,f=g.convert;if(!t||!t.length||"i"===t)return i&&i.name.length?f?o=b(e,g.patterns.F,i):(a=new Date(e.getTime()),r=y(e,g.eras),a.setFullYear(S(e,g,r)),o=a.toLocaleString()):o=e.toString(),o;d=g.eras,h="s"===t,t=v(g,t),o=[];var C,x,T,D,k=["0","00","000"],I=/([^d]|^)(d|dd)([^d]|$)/g,O=0,R=w();for(!h&&f&&(D=f.fromGregorian(e));;){var N=R.lastIndex,E=R.exec(t),A=t.slice(N,E?E.index:t.length);if(O+=_(A,o),!E)break;if(O%2)o.push(E[0]);else switch(u=(c=E[0]).length,c){case"ddd":case"dddd":m=3===u?g.days.namesAbbr:g.days.names,o.push(m[e.getDay()]);break;case"d":case"dd":x=!0,o.push(s(n(e,2),u));break;case"MMM":case"MMMM":p=n(e,1),o.push(g.monthsGenitive&&l()?g.monthsGenitive[3===u?"namesAbbr":"names"][p]:g.months[3===u?"namesAbbr":"names"][p]);break;case"M":case"MM":o.push(s(n(e,1)+1,u));break;case"y":case"yy":case"yyyy":p=D?D[0]:S(e,g,y(e,d),h),u<4&&(p%=100),o.push(s(p,u));break;case"h":case"hh":0===(C=e.getHours()%12)&&(C=12),o.push(s(C,u));break;case"H":case"HH":o.push(s(e.getHours(),u));break;case"m":case"mm":o.push(s(e.getMinutes(),u));break;case"s":case"ss":o.push(s(e.getSeconds(),u));break;case"t":case"tt":p=e.getHours()<12?g.AM?g.AM[0]:" ":g.PM?g.PM[0]:" ",o.push(1===u?p.charAt(0):p);break;case"f":case"ff":case"fff":o.push(s(e.getMilliseconds(),3).substr(0,u));break;case"z":case"zz":C=e.getTimezoneOffset()/60,o.push((C<=0?"+":"-")+s(Math.floor(Math.abs(C)),u));break;case"zzz":C=e.getTimezoneOffset()/60,o.push((C<=0?"+":"-")+s(Math.floor(Math.abs(C)),2)+":"+s(Math.abs(e.getTimezoneOffset()%60),2));break;case"g":case"gg":g.eras&&o.push(g.eras[y(e,d)].name);break;case"/":o.push(g["/"]);break;default:throw"Invalid date format pattern '"+c+"'."}}return o.join("")},function(){var e;e=function(e,t,i){var s=i.groupSizes,l=s[0],n=1,o=Math.pow(10,t),a=Math.round(e*o)/o;isFinite(a)||(a=e);var r=(e=a)+"",d="",h=r.split(/e/i),c=h.length>1?parseInt(h[1],10):0;h=(r=h[0]).split("."),r=h[0],d=h.length>1?h[1]:"",c>0?(r+=(d=f(d,c,!1)).slice(0,c),d=d.substr(c)):c<0&&(d=(r=f(r,(c=-c)+1,!0)).slice(-c,r.length)+d,r=r.slice(0,-c)),d=t>0?i["."]+(d.length>t?d.slice(0,t):f(d,t)):"";for(var u=r.length-1,m=i[","],p="";u>=0;){if(0===l||l>u)return r.slice(0,u+1)+(p.length?m+p+d:d);p=r.slice(u-l+1,u+1)+(p.length?m+p:""),u-=l,n<s.length&&(l=s[n],n++)}return r.slice(0,u+1)+m+p+d},C=function(t,i,s){var l,n,o,a,r,d;if(!isFinite(t))return t===1/0?s.numberFormat.positiveInfinity:t===-1/0?s.numberFormat.negativeInfinity:s.numberFormat.NaN;if(!i||"i"===i)return s.name.length?t.toLocaleString():t.toString();i=i||"D";var h,c=s.numberFormat,u=Math.abs(t),m=-1;switch(i.length>1&&(m=parseInt(i.slice(1),10)),l=i.charAt(0).toUpperCase()){case"D":h="n",u=g(u),-1!==m&&(u=f(""+u,m,!0)),t<0&&(u="-"+u);break;case"N":n=c;case"C":n=n||c.currency;case"P":n=n||c.percent,h=t<0?n.pattern[0]:n.pattern[1]||"n",-1===m&&(m=n.decimals),u=e(u*("P"===l?100:1),m,n);break;default:throw"Bad number format specifier: "+l}for(o=/n|\$|-|%/g,a="";r=o.lastIndex,d=o.exec(h),a+=h.slice(r,d?d.index:h.length),d;)switch(d[0]){case"n":a+=u;break;case"$":a+=c.currency.symbol;break;case"-":/[1-9]/.test(u)&&(a+=c["-"]);break;case"%":a+=c.percent.symbol}return a}}(),w=function(){return/\/|dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|y|hh|h|HH|H|mm|m|ss|s|tt|t|fff|ff|f|zzz|zz|z|gg|g/g},y=function(e,t){var i,s,l,n;if(!t)return 0;for(s=e.getTime(),l=0,n=t.length;l<n;l++)if(null===(i=t[l].start)||s>=i)return l;return 0},S=function(e,t,i,s){var l=e.getFullYear();return!s&&t.eras&&(l-=t.eras[i].offset),l},function(){var e,t,i,s,l,n,o;e=function(e,t){if(t<100){var i=new Date,s=y(i),l=S(i,e,s),n=e.twoDigitYearMax;(t+=l-l%100)>(n="string"==typeof n?(new Date).getFullYear()%100+parseInt(n,10):n)&&(t-=100)}return t},t=function(e,t,i){var s,l=e.days,r=e._upperDays;return r||(e._upperDays=r=[o(l.names),o(l.namesAbbr),o(l.namesShort)]),t=n(t),i?-1===(s=a(r[1],t))&&(s=a(r[2],t)):s=a(r[0],t),s},i=function(e,t,i){var s,l=e.months,r=e.monthsGenitive||e.months,d=e._upperMonths,h=e._upperMonthsGen;return d||(e._upperMonths=d=[o(l.names),o(l.namesAbbr)],e._upperMonthsGen=h=[o(r.names),o(r.namesAbbr)]),t=n(t),(s=a(i?d[1]:d[0],t))<0&&(s=a(i?h[1]:h[0],t)),s},s=function(e,t){var i,s,l,n,o,a,r=e._parseRegExp;if(r){if(i=r[t])return i}else e._parseRegExp=r={};for(var d,h=v(e,t).replace(/([\^\$\.\*\+\?\|\[\]\(\)\{\}])/g,"\\\\$1"),c=["^"],u=[],m=0,p=0,g=w();null!==(d=g.exec(h));)if(s=h.slice(m,d.index),m=g.lastIndex,(p+=_(s,c))%2)c.push(d[0]);else{switch(n=(l=d[0]).length,l){case"dddd":case"ddd":case"MMMM":case"MMM":case"gg":case"g":o="(\\D+)";break;case"tt":case"t":o="(\\D*)";break;case"yyyy":case"fff":case"ff":case"f":o="(\\d{"+n+"})";break;case"dd":case"d":case"MM":case"M":case"yy":case"y":case"HH":case"H":case"hh":case"h":case"mm":case"m":case"ss":case"s":o="(\\d\\d?)";break;case"zzz":o="([+-]?\\d\\d?:\\d{2})";break;case"zz":case"z":o="([+-]?\\d\\d?)";break;case"/":o="(\\/)";break;default:throw"Invalid date format pattern '"+l+"'."}o&&c.push(o),u.push(d[0])}return _(h.slice(m),c),c.push("$"),a={regExp:c.join("").replace(/\s+/g,"\\s+"),groups:u},r[t]=a},l=function(e,t,i){return e<t||e>i},n=function(e){return e.split("").join(" ").toUpperCase()},o=function(e){for(var t=[],i=0,s=e.length;i<s;i++)t[i]=n(e[i]);return t},x=function(n,o,a){var r,d,h,c,u,g,f,_,v,b,C,w;n=p(n);var y=a.calendar,S=s(y,o),x=new RegExp(S.regExp).exec(n);if(null===x)return null;var T,D=S.groups,k=null,I=null,O=null,R=null,N=null,E=0,A=0,M=0,P=0,L=null,F=!1;for(r=0,d=D.length;r<d;r++)if(h=x[r+1]){var j=D[r],V=j.length,z=parseInt(h,10);switch(j){case"dd":case"d":if(l(R=z,1,31))return null;break;case"MMM":case"MMMM":if(O=i(y,h,3===V),l(O,0,11))return null;break;case"M":case"MM":if(l(O=z-1,0,11))return null;break;case"y":case"yy":case"yyyy":if(I=V<4?e(y,z):z,l(I,0,9999))return null;break;case"h":case"hh":if(12===(E=z)&&(E=0),l(E,0,11))return null;break;case"H":case"HH":if(l(E=z,0,23))return null;break;case"m":case"mm":if(l(A=z,0,59))return null;break;case"s":case"ss":if(l(M=z,0,59))return null;break;case"tt":case"t":if(!(F=y.PM&&(h===y.PM[0]||h===y.PM[1]||h===y.PM[2]))&&(!y.AM||h!==y.AM[0]&&h!==y.AM[1]&&h!==y.AM[2]))return null;break;case"f":case"ff":case"fff":if(P=z*Math.pow(10,3-V),l(P,0,999))return null;break;case"ddd":case"dddd":if(N=t(y,h,3===V),l(N,0,6))return null;break;case"zzz":if(2!==(c=h.split(/:/)).length||(T=parseInt(c[0],10),l(T,-12,13))||(u=parseInt(c[1],10),l(u,0,59)))return null;L=60*T+(m(h,"-")?-u:u);break;case"z":case"zz":if(l(T=z,-12,13))return null;L=60*T;break;case"g":case"gg":if(!(g=h)||!y.eras)return null;for(g=p(g.toLowerCase()),f=0,_=y.eras.length;f<_;f++)if(g===y.eras[f].name.toLowerCase()){k=f;break}if(null===k)return null}}if(v=new Date,b=(C=y.convert)?C.fromGregorian(v)[0]:v.getFullYear(),null===I?I=b:y.eras&&(I+=y.eras[k||0].offset),null===O&&(O=0),null===R&&(R=1),C){if(null===(v=C.toGregorian(I,O,R)))return null}else if(v.setFullYear(I,O,R),v.getDate()!==R||null!==N&&v.getDay()!==N)return null;return F&&E<12&&(E+=12),v.setHours(E,A,M,P),null!==L&&(w=v.getMinutes()-(L+v.getTimezoneOffset()),v.setHours(v.getHours()+parseInt(w/60,10),w%60)),v}}(),T=function(e,t,i){var s,l=t["-"],n=t["+"];switch(i){case"n -":l=" "+l,n=" "+n;case"n-":r(e,l)?s=["-",e.substr(0,e.length-l.length)]:r(e,n)&&(s=["+",e.substr(0,e.length-n.length)]);break;case"- n":l+=" ",n+=" ";case"-n":m(e,l)?s=["-",e.substr(l.length)]:m(e,n)&&(s=["+",e.substr(n.length)]);break;case"(n)":m(e,"(")&&r(e,")")&&(s=["-",e.substr(1,e.length-2)])}return s||["",e]},i.prototype.findClosestCulture=function(e){return i.findClosestCulture.call(this,e)},i.prototype.format=function(e,t,s){return i.format.call(this,e,t,s)},i.prototype.localize=function(e,t){return i.localize.call(this,e,t)},i.prototype.parseInt=function(e,t,s){return i.parseInt.call(this,e,t,s)},i.prototype.parseFloat=function(e,t,s){return i.parseFloat.call(this,e,t,s)},i.prototype.culture=function(e){return i.culture.call(this,e)},i.addCultureInfo=function(e,t,i){var s={},l=!1;"string"!=typeof e?(i=e,e=this.culture().name,s=this.cultures[e]):"string"!=typeof t?(i=t,l=null==this.cultures[e],s=this.cultures[e]||this.cultures.default):(l=!0,s=this.cultures[t]),this.cultures[e]=d(!0,{},s,i),l&&(this.cultures[e].calendar=this.cultures[e].calendars.standard)},i.findClosestCulture=function(e){var t,i,s,l,n,o;if(!e)return this.findClosestCulture(this.cultureSelector)||this.cultures.default;if("string"==typeof e&&(e=e.split(",")),h(e)){for(var a,r=this.cultures,d=e,c=d.length,u=[],m=0;m<c;m++)s=(e=p(d[m])).split(";"),a=p(s[0]),1===s.length?i=1:0===(e=p(s[1])).indexOf("q=")?(e=e.substr(2),i=parseFloat(e),i=isNaN(i)?0:i):i=1,u.push({lang:a,pri:i});for(u.sort(function(e,t){return e.pri<t.pri?1:e.pri>t.pri?-1:0}),m=0;m<c;m++)if(t=r[a=u[m].lang])return t;for(m=0;m<c;m++)for(a=u[m].lang;;){if(-1===(l=a.lastIndexOf("-")))break;if(t=r[a=a.substr(0,l)])return t}for(m=0;m<c;m++)for(n in a=u[m].lang,r)if((o=r[n]).language==a)return o}else if("object"==typeof e)return e;return t||null},i.format=function(e,t,i){var s=this.findClosestCulture(i);return e instanceof Date?e=b(e,t,s):"number"==typeof e&&(e=C(e,t,s)),e},i.localize=function(e,t){return this.findClosestCulture(t).messages[e]||this.cultures.default.messages[e]},i.parseDate=function(e,t,i){var s,l,n,o,a,r;if(i=this.findClosestCulture(i),t){if("string"==typeof t&&(t=[t]),t.length)for(o=0,a=t.length;o<a&&(!(r=t[o])||!(s=x(e,r,i)));o++);}else for(l in n=i.calendar.patterns)if(s=x(e,n[l],i))break;return s||null},i.parseInt=function(e,t,s){return g(i.parseFloat(e,t,s))},i.parseFloat=function(e,t,i){var o,a,r,d,h,c,u,m,g,f,_;"number"!=typeof t&&(i=t,t=10);var v=this.findClosestCulture(i),b=NaN,C=v.numberFormat;if(e.indexOf(v.numberFormat.currency.symbol)>-1&&(e=(e=e.replace(v.numberFormat.currency.symbol,"")).replace(v.numberFormat.currency["."],v.numberFormat["."])),e=p(e),l.test(e))b=parseFloat(e);else if(!t&&s.test(e))b=parseInt(e,16);else{var w=T(e,C,C.pattern[0]),y=w[0],S=w[1];""===y&&"(n)"!==C.pattern[0]&&(y=(w=T(e,C,"(n)"))[0],S=w[1]),""===y&&"-n"!==C.pattern[0]&&(y=(w=T(e,C,"-n"))[0],S=w[1]),y=y||"+",(r=S.indexOf("e"))<0&&(r=S.indexOf("E")),r<0?(a=S,o=null):(a=S.substr(0,r),o=S.substr(r+1)),c=C["."],(u=a.indexOf(c))<0?(d=a,h=null):(d=a.substr(0,u),h=a.substr(u+c.length)),m=C[","],d=d.split(m).join(""),g=m.replace(/\u00A0/g," "),m!==g&&(d=d.split(g).join("")),f=y+d,null!==h&&(f+="."+h),null!==o&&(f+="e"+((_=T(o,C,"-n"))[0]||"+")+_[1]),n.test(f)&&(b=parseFloat(f))}return b},i.culture=function(e){return void 0!==e&&(this.cultureSelector=e),this.findClosestCulture(e)||this.cultures.default}}(this),
/*! JsRender v1.0pre: http://github.com/BorisMoore/jsrender */
function(e,t,i){"use strict";function s(e,t){t&&t.onError&&!1===t.onError(e)||(this.name="JsRender Error",this.message=e||"JsRender error")}function l(e,t){var i;for(i in e=e||{},t)e[i]=t[i];return e}function n(e,t,i){return(!J.rTag||arguments.length)&&(D=e?e.charAt(0):D,k=e?e.charAt(1):k,I=t?t.charAt(0):I,O=t?t.charAt(1):O,e="\\"+D+"(\\"+(R=i||R)+")?\\"+k,t="\\"+I+"\\"+O,x="(?:(?:(\\w+(?=[\\/\\s\\"+I+"]))|(?:(\\w+)?(:)|(>)|!--((?:[^-]|-(?!-))*)--|(\\*)))\\s*((?:[^\\"+I+"]|\\"+I+"(?!\\"+O+"))*?)",J.rTag=x+")",x=new RegExp(e+x+"(\\/)?|(?:\\/(\\w+)))"+t,"g"),T=new RegExp("<.*>|([^\\\\]|^)[{}]|"+e+".*"+t)),[D,k,I,O,R]}function o(e,t){t||(t=e,e=i);var s,l,n,o,a=this,r=!t||"root"===t;if(e){if(!(o=a.type===t?a:i))if(s=a.views,a._.useKey){for(l in s)if(o=s[l].get(e,t))break}else for(l=0,n=s.length;!o&&l<n;l++)o=s[l].get(e,t)}else if(r)for(;a.parent.parent;)o=a=a.parent;else for(;a&&!o;)o=a.type===t?a:i,a=a.parent;return o}function a(){var e=this.get("item");return e?e.index:i}function r(e){var t,s=this,n=(s.ctx||{})[e];return(n=n===i?s.getRsc("helpers",e):n)&&"function"==typeof n&&(t=function(){return n.apply(s,arguments)},l(t,n)),t||n}function d(e,t){for(var s=this,l=G[e],n=l&&l[t];n===i&&s;)n=(l=s.tmpl[e])&&l[t],s=s.parent;return n}function h(e,t,s,l,n,h,c,u){var m,p,g,f="array"===t,_={key:0,useKey:f?0:1,id:""+U++,onRender:u,bnds:{}},v={data:l,tmpl:n,content:c,views:f?[]:{},parent:s,ctx:e,type:t,get:o,getIndex:a,getRsc:d,hlp:r,_:_,_is:"view"};return s&&(m=s.views,(p=s._).useKey?(m[_.key="_"+p.useKey++]=v,g=p.tag,_.bnd=f&&(!g||!!g._.bnd&&g)):m.splice(_.key=v.index=h!==i?h:m.length,0,v),v.ctx=e||s.ctx),v}function c(e){var t,i,s,l,n;for(t in q)if((n=(l=q[t]).compile)&&(i=e[t+"s"]))for(s in i)i[s]=n(s,i[s],e,t,l)}function u(e,t){var i,s=X.wrapMap||{},n=l({markup:e,tmpls:[],links:{},tags:{},bnds:[],_is:"template",render:p},t);return t.htmlTag||(i=j.exec(e),n.htmlTag=i?i[1].toLowerCase():""),(i=s[n.htmlTag])&&i!==s.div&&(n.markup=y.trim(n.markup),n._elCnt=!0),n}function m(e,t){var s=e+"s";G[s]=function l(n,o,a){var r,d,h,c;if(n&&""+n!==n&&!n.nodeType&&!n.markup){for(h in n)l(h,n[h],o);return G}return c=a?a[s]=a[s]||{}:l,o===i&&(o=n,n=i),d=t.compile,(r=J.onBeforeStoreItem)&&(d=r(c,n,o,d)||d),n?""+n===n&&(null===o?delete c[n]:c[n]=d?o=d(n,o,a,e,t):o):o=d(i,o),o&&(o._is=e),(r=J.onStoreItem)&&r(c,n,o,d),o},q[e]=t}function p(e,t,s,l,n,o){var a,r,d,c,u,m,p,f,_,v,b,w,S,x=this,T=!x.attr||"html"===x.attr,D="";if(!0===l&&(p=!0,l=0),x.tag?(f=x,v=(x=x.tag)._,w=x.tagName,S=f.tmpl,t=C(t,x.ctx),_=f.content,!1===f.props.link&&((t=t||{}).link=!1),s=s||f.view,e=e===i?s:e):S=x.jquery&&(x[0]||g('Unknown template: "'+x.selector+'"'))||x,S&&(!s&&e&&"view"===e._is&&(s=e),s&&(_=_||s.content,o=o||s._.onRender,e===s&&(e=s.data,n=!0),t=C(t,s.ctx)),s&&s.data!==i||((t=t||{}).root=e),S.fn||(S=K[S]||K(S)),S)){if(b=o=!1!==(t&&t.link)&&T&&o,!0===o&&(b=i,o=s._.onRender),y.isArray(e)&&!n)for(c=p?s:l!==i&&s||h(t,"array",s,e,S,l,_,o),a=0,r=e.length;a<r;a++)u=h(t,"item",c,d=e[a],S,(l||0)+a,_,o),m=S.fn(d,u,G),D+=c._.onRender?c._.onRender(m,u):m;else c=p?s:h(t,w||"data",s,e,S,l,_,o),v&&!x.flow&&(c.tag=x),D+=S.fn(e,c,G);return b?b(D,c):D}return""}function g(e){if(X.debugMode)throw new G.sub.Error(e)}function f(e){g("Syntax error\n"+e)}function _(e,t,i,s){function l(t){(t-=d)&&c.push(e.substr(d,t).replace(A,"\\n"))}function n(t){t&&f('Unmatched or missing tag: "{{/'+t+'}}" in template:\n'+e)}var o,a=t&&t.allowCode,r=[],d=0,h=[],c=r,u=[,,,r];return e=e.replace(P,"\\$1"),n(h[0]&&h[0][3].pop()[0]),e.replace(x,function(t,r,m,p,g,_,v,C,w,y,S,x){_&&(g=":",p="html");var T,D,k=r&&[],I="",O="",R="",N=!(y=y||i)&&!g&&!v;m=m||g,l(x),d=x+t.length,C?a&&c.push(["*","\n"+w.replace(M,"$1")+"\n"]):m?("else"===m&&(F.test(w)&&f('for "{{else if expr}}" use "{{else expr}}"'),k=u[6],u[7]=e.substring(u[7],x),u=h.pop(),c=u[3],N=!0),w&&(I=b(w=w.replace(A," "),k).replace(L,function(e,t,i){return t?R+=i+",":O+=i+",",""})),O=O.slice(0,-1),I=I.slice(0,-1),T=O&&O.indexOf("noerror:true")+1&&O||"",o=[m,p||!!s||"",I,N&&[],'params:"'+w+'",props:{'+O+"}"+(R?",ctx:{"+R.slice(0,-1)+"}":""),T,k||0],c.push(o),N&&(h.push(u),(u=o)[7]=d)):S&&(n(S!==(D=u[0])&&"else"!==D&&S),u[7]=e.substring(u[7],x),u=h.pop()),n(!u&&S),c=u[3]}),l(e.length),(d=r[r.length-1])&&n(""+d!==d&&+d[7]===d[7]&&d[0]),v(r,t||e,i)}function v(e,i,s){var l,n,o,a,r,d,h,c,m,p,g,_,b,C,w,y,S,x,T,D,k,I,O,R,N=0,E="",M="",P={},L=e.length;for(""+i===i?(C=s?'data-link="'+i.replace(A," ").slice(1,-1)+'"':i,i=0):(C=i.tmplName||"unnamed",i.allowCode&&(P.allowCode=!0),i.debug&&(P.debug=!0),g=i.bnds,b=i.tmpls),l=0;l<L;l++)if(""+(n=e[l])===n)E+='\nret+="'+n+'";';else if("*"===(o=n[0]))E+=""+n[1];else{if(a=n[1],r=n[2],S=n[3],d=n[4],M=n[5],x=n[7],(k="else"===o)||(N=0,g&&(_=n[6])&&(N=g.push(_))),(I=":"===o)?(a&&(o="html"===a?">":a+o),M&&(M="try{var "+(O="prm"+l)+"=["+r+"][0];}catch(e){"+O+'="";}\n',r=O)):(S&&((w=u(x,P)).tmplName=C+"/"+o,v(S,w),b.push(w)),k||(y=o,D=E,E="",l),T=(T=e[l+1])&&"else"===T[0]),d+=",args:["+r+"]}",I&&_||a&&">"!==o){if((R=new Function("data,view,j,u"," // "+C+" "+N+" "+o+"\n"+M+"return {"+d+";")).paths=_,R._ctxs=o,s)return R;p=!0}if(E+=I?"\n"+(_?"":M)+(s?"return ":"ret+=")+(p?(p=!0,'c("'+a+'",view,'+(_?(g[N-1]=R,N):"{"+d)+");"):">"===o?(c=!0,"h("+r+");"):(m=!0,"(v="+r+")!="+(s?"=":"")+'u?v:"";')):(h=!0,"{tmpl:"+(S?b.length:"0")+","+d+","),y&&!T){if(E="["+E.slice(0,-1)+"]",(s||_)&&(E=new Function("data,view,j,u"," // "+C+" "+N+" "+y+"\nreturn "+E+";"),_&&((g[N-1]=E).paths=_),E._ctxs=o,s))return E;E=D+'\nret+=t("'+y+'",view,this,'+(N||E)+");",_=0,y=0}}E="// "+C+"\nvar j=j||"+(t?"jQuery.":"js")+"views"+(m?",v":"")+(h?",t=j._tag":"")+(p?",c=j._cnvt":"")+(c?",h=j.converters.html":"")+(s?";\n":',ret="";\n')+(X.tryCatch?"try{\n":"")+(P.debug?"debugger;":"")+E+(s?"\n":"\nreturn ret;\n")+(X.tryCatch?"\n}catch(e){return j._err(e);}":"");try{E=new Function("data,view,j,u",E)}catch(e){f("Compiled template code:\n\n"+E)}return i&&(i.fn=E),E}function b(e,t){var i,s,l={},n={0:-1},o=0,a=!1,r=!1;return(e+" ").replace(E,function(d,h,c,u,m,p,g,_,v,b,C,w,y,S,x,T,D,k,I){if(m=m||"",c=c||h||C,u=u||_,t&&x&&t.push({_jsvOb:I.slice(n[o-1]+1,k+1)}),v=v||T||"",!p)return r?(r=!w)?d:'"':a?(a=!y)?d:'"':(c?(o++,n[o]=k,c):"")+(D?o?"":i?(i=s=!1,"\b"):",":g?(o&&f(e),i=u,s="~"===u.charAt(0),"\b"+u+":"):u?u.split("^").join(".").replace(N,function(e,i,l,n,o,a,r){if(i&&(t&&!s&&t.push(u),"."!==i)){var d=(l?'view.hlp("'+l+'")':n?"view":"data")+(r?(o?"."+o:l||n?"":"."+i)+(a||""):(r=l?"":n?o||"":i,""));return"view.data"===(d+=r?"."+r:"").slice(0,9)?d.slice(5):d}return e})+(v?(l[++o]=!0,v):m):m||(S?(l[o--]=!1,S+(v?(l[++o]=!0,v):"")):b?(l[o]||f(e),","):h?"":(r=w,a=y,'"')));f(e)})}function C(e,t){return e&&e!==t?t?l(l({},t),e):e:t&&l({},t)}function w(e){return B[e]}if(!(t&&t.views||e.jsviews)){var y,S,x,T,D="{",k="{",I="}",O="}",R="^",N=/^(?:null|true|false|\d[\d.]*|([\w$]+|\.|~([\w$]+)|#(view|([\w$]+))?)([\w$.^]*?)(?:[.[^]([\w$]+)\]?)?)$/g,E=/(\()(?=\s*\()|(?:([([])\s*)?(?:([#~]?[\w$.^]+)?\s*((\+\+|--)|\+|-|&&|\|\||===|!==|==|!=|<=|>=|[<>%*!:?\/]|(=))\s*|([#~]?[\w$.^]+)([([])?)|(,\s*)|(\(?)\\?(?:(')|("))|(?:\s*((\))(?=\s*\.|\s*\^)|\)|\])([([]?))|(\s+)/g,A=/\s*\n/g,M=/\\(['"])/g,P=/([\\'"])/g,L=/\x08(~)?([^\x08]+)\x08/g,F=/^if\s/,j=/<(\w+)[>\s]/,V=/[<"'&]/g,z=/[><"'&]/g,H=0,U=0,B={"&":"&amp;","<":"&lt;",">":"&gt;","\0":"&#0;","'":"&#39;",'"':"&#34;"},$="data-jsv-tmpl",W={},q={template:{compile:function s(l,n,o,a,r,d){function h(i){if(""+i===i||i.nodeType>0){try{p=i.nodeType>0?i:!T.test(i)&&t&&t(e.document).find(i)[0]}catch(e){}return p&&(i=p.getAttribute($),l=l||i,(i=K[i])||(l=l||"_"+H++,p.setAttribute($,l),i=K[l]=s(l,p.innerHTML,o,a,r,d))),i}}var m,p;return m=h(n=n||""),(d=d||(n.markup?n:{})).tmplName=l,o&&(d._parentTmpl=o),!m&&n.markup&&(m=h(n.markup))&&m.fn&&(m.debug!==n.debug||m.allowCode!==n.allowCode)&&(m=m.markup),m!==i?(l&&!o&&(W[l]=function(){return n.render.apply(n,arguments)}),m.fn||n.fn?m.fn&&(n=l&&l!==m.tmplName?C(d,m):m):_(m,n=u(m,d)),c(d),n):void 0}},tag:{compile:function(e,t,i){var s,l;return"function"==typeof t?t={depends:t.depends,render:t}:((l=t.template)&&(t.template=""+l===l?K[l]||K(l):l),!1!==t.init&&((s=t.init=t.init||function(){}).prototype=t,(s.prototype=t).constructor=s)),i&&(t._parentTmpl=i),t}},helper:{},converter:{}},G={jsviews:"v1.0pre",render:W,View:h,settings:{delimiters:n,debugMode:!0,tryCatch:!0},sub:{Error:s,tmplFn:_,parse:b,extend:l,error:g,syntaxError:f},_cnvt:function(e,t,i){var s,l,n,o=+i===i&&i,a=t.linkCtx;return o&&(i=(o=t.tmpl.bnds[o-1])(t.data,t,G)),n=i.args[0],(e||o)&&((l=a&&a.tag||{_:{inline:!a},tagName:e+":",flow:!0,_is:"tag"})._.bnd=o,a&&(a.tag=l,l.linkCtx=a,i.ctx=C(i.ctx,a.view.ctx)),l.tagCtx=i,i.view=t,l.ctx=i.ctx||{},delete i.ctx,t._.tag=l,(e="true"!==e&&e)&&((s=t.getRsc("converters",e))||g("Unknown converter: {{"+e+":"))&&(l.depends=s.depends,n=s.apply(l,i.args)),n=o&&t._.onRender?t._.onRender(n,t,o):n),n},_tag:function(e,t,s,n){var o,a,r,d,h,c,u,m,f,_,v,b,w,y="",S=+n===n&&n,x=t.linkCtx||0,T=t.ctx,D=s||t.tmpl,k=t._;for("tag"===e._is&&(e=(a=e).tagName),S&&(n=(b=D.bnds[S-1])(t.data,t,G)),u=n.length,a=a||x.tag,c=0;c<u;c++)v=(f=n[c]).tmpl,v=f.content=v&&D.tmpls[v-1],s=f.props.tmpl,c||s&&a||(w=t.getRsc("tags",e)||g("Unknown tag: {{"+e+"}}")),l(f,{tmpl:s=""+(s=s||!c&&w.template||v)===s?t.getRsc("templates",s)||K(s):s,render:p,index:c,view:t,ctx:C(f.ctx,T)}),a||(w.init?(a=new w.init(f,x,T)).attr=a.attr||w.attr||i:a={render:w.render},a._={inline:!x},x&&(x.attr=a.attr=x.attr||a.attr,x.tag=a,a.linkCtx=x),(a._.bnd=b||x)&&(a._.arrVws={}),a.tagName=e,a.parent=h=T&&T.tag,a._is="tag"),k.tag=a,f.tag=a,a.tagCtxs=n,a.rendering={},a.flow||(r=(_=f.ctx=f.ctx||{}).parentTags=T&&C(_.parentTags,T.parentTags)||{},h&&(r[h.tagName]=h),_.tag=a);for(c=0;c<u;c++)f=a.tagCtx=n[c],a.ctx=f.ctx,(o=a.render)&&(m=o.apply(a,f.args)),y+=m!==i?m:f.tmpl?f.render():"";return delete a.rendering,a.tagCtx=a.tagCtxs[0],a.ctx=a.tagCtx.ctx,a._.inline&&(d=a.attr)&&"html"!==d&&(y="text"===d?Q.html(y):""),S&&t._.onRender?t._.onRender(y,t,S):y},_err:function(e){return X.debugMode?"Error: "+(e.message||e)+". ":""}};for(S in(s.prototype=new Error).constructor=s,a.depends=function(){return[this.get("item"),"index"]},q)m(S,q[S]);var K=G.templates,Q=G.converters,Y=(G.helpers,G.tags),J=G.sub,X=G.settings;t?(y=t).fn.render=p:(y=e.jsviews={}).isArray=Array&&Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},y.render=W,y.views=G,y.templates=K=G.templates,Y({else:function(){},if:{render:function(e){var t=this;return t.rendering.done||!e&&(arguments.length||!t.tagCtx.index)?"":(t.rendering.done=!0,t.selected=t.tagCtx.index,t.tagCtx.render())},onUpdate:function(e,t,i){for(var s,l,n=0;(s=this.tagCtxs[n])&&s.args.length;n++)if(l=!(s=s.args[0])!=!i[n].args[0],s||l)return l;return!1},flow:!0},for:{render:function(e){var t=this,s=t.tagCtx,l=!arguments.length,n="",o=l||0;return t.rendering.done||(l?n=i:e!==i&&(n+=s.render(e),o+=y.isArray(e)?e.length:1),(t.rendering.done=o)&&(t.selected=s.index)),n},onUpdate:function(){},onArrayChange:function(e,t){var i,s=t.change;if(this.tagCtxs[1]&&("insert"===s&&e.target.length===t.items.length||"remove"===s&&!e.target.length||"refresh"===s&&!t.oldItems.length!=!e.target.length))this.refresh();else for(i in this._.arrVws)(i=this._.arrVws[i]).data===e.target&&i._.onArrayChange.apply(i,arguments);e.done=!0},flow:!0},include:{flow:!0},"*":{render:function(e){return e},flow:!0}}),Q({html:function(e){return e!=i?String(e).replace(z,w):""},attr:function(e){return e!=i?String(e).replace(V,w):null===e?null:""},url:function(e){return e!=i?encodeURI(String(e)):null===e?null:""}}),n()}}(this,this.jQuery),
/*!
*  filename: ej.data.min.js
*  version : 14.4.0.15
*  Copyright Syncfusion Inc. 2001 - 2016. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
function(e){"function"==typeof define&&define.amd?define(["./ej.core.min"],e):e()}(function(){window.ej=window.Syncfusion=window.Syncfusion||{},function(e,t,i,s){"use strict";var l,n,o,a,r,d,h,c,u;t.DataManager=function(i,l,n){if(!(this instanceof t.DataManager))return new t.DataManager(i,l,n);i||(i=[]),"string"==typeof(n=n||i.adaptor)&&(n=new t[n]);var o=[],a=this;return i instanceof Array?o={json:i,offline:!0}:"object"==typeof i?e.isPlainObject(i)?(i.json||(i.json=[]),i.table&&(i.json=this._getJsonFromElement(i.table,i.headerOption)),o={url:i.url,insertUrl:i.insertUrl,removeUrl:i.removeUrl,updateUrl:i.updateUrl,crudUrl:i.crudUrl,batchUrl:i.batchUrl,json:i.json,headers:i.headers,accept:i.accept,data:i.data,timeTillExpiration:i.timeTillExpiration,cachingPageSize:i.cachingPageSize,enableCaching:i.enableCaching,requestType:i.requestType,key:i.key,crossDomain:i.crossDomain,jsonp:i.jsonp,dataType:i.dataType,offline:i.offline!==s?i.offline:!("remoteSaveAdaptor"==i.adaptor||i.adaptor instanceof t.remoteSaveAdaptor)&&!i.url,requiresFormat:i.requiresFormat}):(i.jquery||L(i))&&(o={json:this._getJsonFromElement(i),offline:!0,table:i}):"string"==typeof i&&(o={url:i,offline:!1,dataType:"json",json:[]}),o.requiresFormat!==s||t.support.cors||(o.requiresFormat=!!c(o.crossDomain)||o.crossDomain),o.dataType===s&&(o.dataType="json"),this.dataSource=o,this.defaultQuery=l,o.url&&o.offline&&!o.json.length?(this.isDataAvailable=!1,this.adaptor=n||new t.ODataAdaptor,this.dataSource.offline=!1,this.ready=this.executeQuery(l||t.Query()).done(function(e){a.dataSource.offline=!0,a.isDataAvailable=!0,o.json=e.result,a.adaptor=new t.JsonAdaptor})):this.adaptor=o.offline?new t.JsonAdaptor:new t.ODataAdaptor,!o.jsonp&&this.adaptor instanceof t.ODataAdaptor&&(o.jsonp="callback"),this.adaptor=n||this.adaptor,o.enableCaching&&(this.adaptor=new t.CacheAdaptor(this.adaptor,o.timeTillExpiration,o.cachingPageSize)),this},t.DataManager.prototype={setDefaultQuery:function(e){this.defaultQuery=e},executeQuery:function(i,l,n,o){var a,d,h;return"function"==typeof i&&(o=n,n=l,l=i,i=null),i||(i=this.defaultQuery),i instanceof t.Query||u("DataManager - executeQuery() : A query is required to execute"),(a=e.Deferred()).then(l,n,o),d={query:i},this.dataSource.offline||this.dataSource.url==s?t.isNullOrUndefined(this.dataSource.async)||0!=this.dataSource.async?r(function(){this._localQueryProcess(i,d,a)},this):this._localQueryProcess(i,d,a):(h=this.adaptor.processQuery(this,i),t.isNullOrUndefined(h.url)?r(function(){d=this._getDeferedArgs(i,h,d),a.resolveWith(this,[d])},this):this._makeRequest(h,a,d,i)),a.promise()},_localQueryProcess:function(e,t,i){var s=this.executeLocal(e);t=this._getDeferedArgs(e,s,t),i.resolveWith(this,[t])},_getDeferedArgs:function(e,t,i){return e._requiresCount?(i.result=t.result,i.count=t.count):i.result=t,i.getTableModel=j(e._fromTable,i.result,this),i.getKnockoutModel=V(i.result),i},executeLocal:function(i){var s,l;if(this.defaultQuery||i instanceof t.Query||u("DataManager - executeLocal() : A query is required to execute"),this.dataSource.json||u("DataManager - executeLocal() : Json data is required to execute"),i=i||this.defaultQuery,s=this.adaptor.processQuery(this,i),i._subQuery){var n=i._subQuery._fromTable,o=i._subQuery._lookup,a=i._requiresCount?s.result:s;for(o&&o instanceof Array&&m(i._subQuery._fKey,n,a,o,i._subQuery._key),l=0;l<a.length;l++)a[l][n]instanceof Array&&(a[l]=e.extend({},a[l]),a[l][n]=this.adaptor.processResponse(i._subQuery.using(t.DataManager(a[l][n].slice(0))).executeLocal(),this,i))}return this.adaptor.processResponse(s,this,i)},_makeRequest:function(i,s,l,n){var o,a=!!n._subQuerySelector,r=h(function(e){l.error=e,s.rejectWith(this,[l])},this),c=h(function(e,t,i,o,r,d,h){a||(l.xhr=i,l.count=parseInt(t,10),l.result=e,l.request=o,l.aggregates=d,l.getTableModel=j(n._fromTable,e,this),l.getKnockoutModel=V(e),l.actual=r,l.virtualSelectRecords=h,s.resolveWith(this,[l]))},this),u=h(function(t,i){var s,o,d=e.Deferred(),h={parent:l};return n._subQuery._isChild=!0,s=this.adaptor.processQuery(this,n._subQuery,t?this.adaptor.processResponse(t):i),o=this._makeRequest(s,d,h,n._subQuery),a||d.then(function(e){t&&(m(n._subQuery._fKey,n._subQuery._fromTable,t,e,n._subQuery._key),c(t))},r),o},this),p=d(function(e,i,s,l){-1==s.getResponseHeader("Content-Type").indexOf("xml")&&t.dateParse&&(e=t.parseJSON(e));var o=this.adaptor.processResponse(e,this,n,s,l),r=0,d=null,h=e.virtualSelectRecords;n._requiresCount&&(r=o.count,d=o.aggregates,o=o.result),n._subQuery?a||u(o):c(o,r,s,l,e,d,h)},this),g=e.extend({type:"GET",dataType:this.dataSource.dataType,crossDomain:this.dataSource.crossDomain,jsonp:this.dataSource.jsonp,cache:!0,beforeSend:h(this._beforeSend,this),processData:!1,success:p,error:r},i);return"async"in this.dataSource&&(g.async=this.dataSource.async),g=e.ajax(g),a&&((o=n._subQuerySelector.call(this,{query:n._subQuery,parent:n}))&&o.length?(g=e.when(g,u(null,o))).then(d(function(e,t,i){var s,l=this.adaptor.processResponse(e[0],this,n,e[2],i[0]),o=0;n._requiresCount&&(o=l.count,l=l.result),s=this.adaptor.processResponse(t[0],this,n._subQuery,t[2],i[1]),o=0,n._subQuery._requiresCount&&(o=s.count,s=s.result),m(n._subQuery._fKey,n._subQuery._fromTable,l,s,n._subQuery._key),a=!1,c(l,o,e[2])},this),r):a=!1),g},_beforeSend:function(e,t){var i,s,l,n;for(this.adaptor.beforeSend(this,e,t),i=this.dataSource.headers,l=0;i&&l<i.length;l++)for(n in s=[],i[l])s.push(n),e.setRequestHeader(n,i[l][n])},saveChanges:function(i,s,l,n){var o,a,r;return l instanceof t.Query&&(n=l,l=null),o={url:l,key:s||this.dataSource.key},a=this.adaptor.batchRequest(this,i,o,n),this.dataSource.offline?a:(r=e.Deferred(),e.ajax(e.extend({beforeSend:h(this._beforeSend,this),success:d(function(e,t,s,l){r.resolveWith(this,[this.adaptor.processResponse(e,this,null,s,l,i)])},this),error:function(e){r.rejectWith(this,[{error:e}])}},a)),r.promise())},insert:function(i,s,l){var n,o;return i=C.replacer(i),s instanceof t.Query&&(l=s,s=null),n=this.adaptor.insert(this,i,s,l),this.dataSource.offline?n:(o=e.Deferred(),e.ajax(e.extend({type:"POST",contentType:"application/json; charset=utf-8",processData:!1,beforeSend:h(this._beforeSend,this),success:d(function(e,i,s,l){try{t.isNullOrUndefined(e)?e=[]:C.parseJson(e)}catch(t){e=[]}e=this.adaptor.processResponse(C.parseJson(e),this,null,s,l),o.resolveWith(this,[{record:e,dataManager:this}])},this),error:function(e){o.rejectWith(this,[{error:e,dataManager:this}])}},n)),o.promise())},remove:function(i,s,l,n){var o,a;return"object"==typeof s&&(s=s[i]),l instanceof t.Query&&(n=l,l=null),o=this.adaptor.remove(this,i,s,l,n),this.dataSource.offline?o:(a=e.Deferred(),e.ajax(e.extend({type:"POST",contentType:"application/json; charset=utf-8",beforeSend:h(this._beforeSend,this),success:d(function(e,i,s,l){try{t.isNullOrUndefined(e)?e=[]:C.parseJson(e)}catch(t){e=[]}e=this.adaptor.processResponse(C.parseJson(e),this,null,s,l),a.resolveWith(this,[{record:e,dataManager:this}])},this),error:function(e){a.rejectWith(this,[{error:e,dataManager:this}])}},o)),a.promise())},update:function(i,s,l,n){var o,a;return s=C.replacer(s),l instanceof t.Query&&(n=l,l=null),o=this.adaptor.update(this,i,s,l,n),this.dataSource.offline?o:(a=e.Deferred(),e.ajax(e.extend({contentType:"application/json; charset=utf-8",beforeSend:h(this._beforeSend,this),success:d(function(e,i,s,l){try{t.isNullOrUndefined(e)?e=[]:C.parseJson(e)}catch(t){e=[]}e=this.adaptor.processResponse(C.parseJson(e),this,null,s,l),a.resolveWith(this,[{record:e,dataManager:this}])},this),error:function(e){a.rejectWith(this,[{error:e,dataManager:this}])}},o)),a.promise())},_getJsonFromElement:function(i){"string"==typeof i&&(i=e(e(i).html()));var s=(i=i.jquery?i[0]:i).tagName.toLowerCase();return"table"!==s&&u("ej.DataManager : Unsupported htmlElement : "+s),t.parseTable(i)}};var m=function(e,i,s,l,n){var o,a,r={};for(l.result&&(l=l.result),l.GROUPGUID&&u("ej.DataManager: Do not have support Grouping in hierarchy"),o=0;o<l.length;o++)(r[a=t.getObject(e,l[o])]||(r[a]=[])).push(l[o]);for(o=0;o<s.length;o++)s[o][i]=r[t.getObject(n||e,s[o])]},p="application/json;odata=light;q=1,application/json;odata=verbose;q=0.5",g="multipart/mixed",f="--changeset_",_="batch_",v="Content-Type: application/http\nContent-Transfer-Encoding: binary ",b="Content-Type: application/json; charset=utf-8 ",C={parseJson:function(e){var t=typeof e;return"string"===t?e=JSON.parse(e,C.jsonReviver):e instanceof Array?C.iterateAndReviveArray(e):"object"===t&&C.iterateAndReviveJson(e),e},iterateAndReviveArray:function(e){for(var t=0;t<e.length;t++)"object"==typeof e[t]?C.iterateAndReviveJson(e[t]):e[t]="string"!=typeof e[t]||/^[\s]*\[|^[\s]*\{|\"/g.test(e[t])?C.parseJson(e[t]):C.jsonReviver("",e[t])},iterateAndReviveJson:function(e){var t;for(var i in e)i.startsWith("__")||("object"==typeof(t=e[i])?t instanceof Array?C.iterateAndReviveArray(t):C.iterateAndReviveJson(t):e[i]=C.jsonReviver(i,t))},jsonReviver:function(e,t){var i,s,l=t;if("string"==typeof t){if(i=/^\/Date\(([+-]?[0-9]+)([+-][0-9]{4})?\)\/$/.exec(t))return C.replacer(new Date(parseInt(i[1])));/^(\d{4}\-\d\d\-\d\d([tT][\d:\.]*){1})([zZ]|([+\-])(\d\d):?(\d\d))?$/.test(t)&&(t=C.replacer(new Date(t)),isNaN(t)&&(s=l.split(/[^0-9]/),t=C.replacer(new Date(s[0],s[1]-1,s[2],s[3],s[4],s[5]))))}return t},isJson:function(e){return"string"==typeof e[0]?e:t.parseJSON(e)},isGuid:function(e){return null!=/[A-Fa-f0-9]{8}(?:-[A-Fa-f0-9]{4}){3}-[A-Fa-f0-9]{12}/i.exec(e)},replacer:function(e){return t.isPlainObject(e)?C.jsonReplacer(e):e instanceof Array?C.arrayReplacer(e):e instanceof Date?C.jsonReplacer({val:e}).val:e},jsonReplacer:function(e){var i;for(var s in e)(i=e[s])instanceof Date&&(e[s]=new Date(+i+36e5*t.serverTimezoneOffset));return e},arrayReplacer:function(e){for(var i=0;i<e.length;i++)t.isPlainObject(e[i])?e[i]=C.jsonReplacer(e[i]):e[i]instanceof Date&&(e[i]=C.jsonReplacer({date:e[i]}).date);return e}};t.isJSON=C.isJson,t.parseJSON=C.parseJson,t.dateParse=!0,t.isGUID=C.isGuid,t.Query=function(e){return this instanceof t.Query?(this.queries=[],this._key="",this._fKey="","string"==typeof e?this._fromTable=e||"":e&&e instanceof Array&&(this._lookup=e),this._expands=[],this._sortedColumns=[],this._groupedColumns=[],this._subQuery=null,this._isChild=!1,this._params=[],this):new t.Query(e)},t.Query.prototype={key:function(e){return"string"==typeof e&&(this._key=e),this},using:function(e){return e instanceof t.DataManager?(this.dataManagar=e,this):u("Query - using() : 'using' function should be called with parameter of instance ej.DataManager")},execute:function(e,i,s,l){return(e=e||this.dataManagar)&&e instanceof t.DataManager?e.executeQuery(this,i,s,l):u("Query - execute() : dataManager needs to be is set using 'using' function or should be passed as argument")},executeLocal:function(e){return(e=e||this.dataManagar)&&e instanceof t.DataManager?e.executeLocal(this):u("Query - executeLocal() : dataManager needs to be is set using 'using' function or should be passed as argument")},clone:function(){var e=new t.Query;return e.queries=this.queries.slice(0),e._key=this._key,e._isChild=this._isChild,e.dataManagar=this.dataManager,e._fromTable=this._fromTable,e._params=this._params.slice(0),e._expands=this._expands.slice(0),e._sortedColumns=this._sortedColumns.slice(0),e._groupedColumns=this._groupedColumns.slice(0),e._subQuerySelector=this._subQuerySelector,e._subQuery=this._subQuery,e._fKey=this._fKey,e._requiresCount=this._requiresCount,e},from:function(e){return"string"==typeof e&&(this._fromTable=e),this},addParams:function(e,i){return"function"==typeof i||t.isPlainObject(i)?"function"==typeof i&&this._params.push({key:e,fn:i}):this._params.push({key:e,value:i}),this},expand:function(e){return this._expands="string"==typeof e?[].slice.call(arguments,0):e.slice(0),this},where:function(e,i,s,l){i=(i||t.FilterOperators.equal).toLowerCase();var n=null;return"string"==typeof e?n=new t.Predicate(e,i,s,l):e instanceof t.Predicate?n=e:u("Query - where : Invalid arguments"),this.queries.push({fn:"onWhere",e:n}),this},search:function(e,i,s,l){i&&"boolean"!=typeof i?"string"==typeof i&&(i=[i]):l=i=[],"boolean"==typeof s&&(l=s,s=null),(s=s||t.FilterOperators.contains).length<3&&(s=t.data.operatorSymbols[s]);var n=t.data.fnOperators[s]||t.data.fnOperators.processSymbols(s);return this.queries.push({fn:"onSearch",e:{fieldNames:i,operator:s,searchKey:e,ignoreCase:l,comparer:n}}),this},sortBy:function(e,i,s){var l,n,o,a,r=t.sortOrder.Ascending;if("string"==typeof e&&e.toLowerCase().endsWith(" desc")&&(e=e.replace(/ desc$/i,""),i=t.sortOrder.Descending),e instanceof Array){for(o=0;o<e.length;o++)this.sortBy(e[o],i,s);return this}if("boolean"==typeof i?i=i?t.sortOrder.Descending:t.sortOrder.Ascending:"function"==typeof i&&(r="custom"),i&&"string"!=typeof i||(r=i?i.toLowerCase():t.sortOrder.Ascending,i=t.pvt.fnSort(i)),s)for(l=w(this.queries,"onSortBy"),o=0;o<l.length;o++)if("string"==typeof(n=l[o].e.fieldName)){if(n===e)return this}else if(n instanceof Array)for(a=0;a<n.length;a++)if(n[a]===e||e.toLowerCase()===n[a]+" desc")return this;return this.queries.push({fn:"onSortBy",e:{fieldName:e,comparer:i,direction:r}}),this},sortByDesc:function(e){return this.sortBy(e,t.sortOrder.Descending)},group:function(e,t){return this.sortBy(e,null,!0),this.queries.push({fn:"onGroup",e:{fieldName:e,fn:t}}),this},page:function(e,t){return this.queries.push({fn:"onPage",e:{pageIndex:e,pageSize:t}}),this},range:function(e,t){return("number"!=typeof e||"number"!=typeof t)&&u("Query() - range : Arguments type should be a number"),this.queries.push({fn:"onRange",e:{start:e,end:t}}),this},take:function(e){return"number"!=typeof e&&u("Query() - Take : Argument type should be a number"),this.queries.push({fn:"onTake",e:{nos:e}}),this},skip:function(e){return"number"!=typeof e&&u("Query() - Skip : Argument type should be a number"),this.queries.push({fn:"onSkip",e:{nos:e}}),this},select:function(e){return"string"==typeof e&&(e=[].slice.call(arguments,0)),e instanceof Array||u("Query() - Select : Argument type should be String or Array"),this.queries.push({fn:"onSelect",e:{fieldNames:e}}),this},hierarchy:function(e,i){return e&&e instanceof t.Query||u("Query() - hierarchy : query must be instance of ej.Query"),"function"==typeof i&&(this._subQuerySelector=i),this._subQuery=e,this},foreignKey:function(e){return"string"==typeof e&&(this._fKey=e),this},requiresCount:function(){return this._requiresCount=!0,this},aggregate:function(e,t){this.queries.push({fn:"onAggregates",e:{field:t,type:e}})}},t.Adaptor=function(e){this.dataSource=e,this.pvt={},this.init.apply(this,[].slice.call(arguments,1))},t.Adaptor.prototype={options:{from:"table",requestType:"json",sortBy:"sorted",select:"select",skip:"skip",group:"group",take:"take",search:"search",count:"requiresCounts",where:"where",aggregates:"aggregates"},init:function(){},extend:function(t){var i,s,l=function(t){this.dataSource=t,this.options&&(this.options=e.extend({},this.options)),this.init.apply(this,[].slice.call(arguments,0)),this.pvt={}};for(s in(l.prototype=new this.type).type=l,i=l.prototype.base={},t)l.prototype[s]&&(i[s]=l.prototype[s]);return e.extend(!0,l.prototype,t),l},processQuery:function(){},processResponse:function(e){return e.d?e.d:e},convertToQueryString:function(t){return e.param(t)},type:t.Adaptor},t.UrlAdaptor=(new t.Adaptor).extend({processQuery:function(e,t,i){var s,n,o,a,r,d,h=w(t.queries,"onSortBy"),u=w(t.queries,"onGroup"),m=w(t.queries,"onWhere"),p=w(t.queries,"onSearch"),g=w(t.queries,"onAggregates"),f=y(t.queries,["onSelect","onPage","onSkip","onTake","onRange"]),_=t._params,v=e.dataSource.url,b=null,C=this.options,x={sorted:[],grouped:[],filters:[],searches:[],aggregates:[]};for(f.onPage?(s=f.onPage,n=((n=l(s.pageIndex,t))-1)*(b=l(s.pageSize,t))):f.onRange&&(n=(s=f.onRange).start,b=s.end-s.start),o=0;o<h.length;o++)s=l(h[o].e.fieldName,t),x.sorted.push(S(this,"onEachSort",{name:s,direction:h[o].e.direction},t));for(i&&((s=this.getFiltersFrom(i,t))&&x.filters.push(S(this,"onEachWhere",s.toJSON(),t))),o=0;o<m.length;o++)for(r in x.filters.push(S(this,"onEachWhere",m[o].e.toJSON(),t)),x.filters[o])c(x[r])&&delete x[r];for(o=0;o<p.length;o++)s=p[o].e,x.searches.push(S(this,"onEachSearch",{fields:s.fieldNames,operator:s.operator,key:s.searchKey,ignoreCase:s.ignoreCase},t));for(o=0;o<u.length;o++)x.grouped.push(l(u[o].e.fieldName,t));for(o=0;o<g.length;o++)s=g[o].e,x.aggregates.push({type:s.type,field:l(s.field,t)});for(r in(a={})[C.from]=t._fromTable,C.expand&&(a[C.expand]=t._expands),a[C.select]=f.onSelect?S(this,"onSelect",l(f.onSelect.fieldNames,t),t):"",a[C.count]=t._requiresCount?S(this,"onCount",t._requiresCount,t):"",a[C.search]=x.searches.length?S(this,"onSearch",x.searches,t):"",a[C.skip]=f.onSkip?S(this,"onSkip",l(f.onSkip.nos,t),t):"",a[C.take]=f.onTake?S(this,"onTake",l(f.onTake.nos,t),t):"",a[C.where]=x.filters.length||x.searches.length?S(this,"onWhere",x.filters,t):"",a[C.sortBy]=x.sorted.length?S(this,"onSortBy",x.sorted,t):"",a[C.group]=x.grouped.length?S(this,"onGroup",x.grouped,t):"",a[C.aggregates]=x.aggregates.length?S(this,"onAggregates",x.aggregates,t):"",a.param=[],S(this,"addParams",{dm:e,query:t,params:_,reqParams:a}),a)(c(a[r])||""===a[r]||0===a[r].length)&&delete a[r];return C.skip in a&&C.take in a||null===b||(a[C.skip]=S(this,"onSkip",n,t),a[C.take]=S(this,"onTake",b,t)),d=this.pvt,this.pvt={},"json"===this.options.requestType?{data:JSON.stringify(a),url:v,ejPvtData:d,type:"POST",contentType:"application/json; charset=utf-8"}:(s=this.convertToQueryString(a,t,e),{type:"GET",url:(s=(-1!==e.dataSource.url.indexOf("?")?"&":"/")+s).length?v.replace(/\/*$/,s):v,ejPvtData:d})},convertToQueryString:function(t,i,s){return s.dataSource.url&&-1!==s.dataSource.url.indexOf("?")?e.param(t):"?"+e.param(t)},processResponse:function(e,i,l,n,o,a){var r,d,h,c,u=o.ejPvtData||{},m=e.groupDs;if(n&&n.getResponseHeader("Content-Type")&&-1!=n.getResponseHeader("Content-Type").indexOf("xml")&&9==e.nodeType)return l._requiresCount?{result:[],count:0}:[];if((r=JSON.parse(o.data))&&"batch"===r.action&&e.added)return a.added=e.added,a;if(e.d&&(e=e.d),u&&u.aggregates&&u.aggregates.length){var p,g=u.aggregates,f={},_={};for(("count"in e&&(f.count=e.count),e.result&&(f.result=e.result),e.aggregate&&(e=e.aggregate),h=0);h<g.length;h++)(p=t.aggregates[g[h].type])&&(_[g[h].field+" - "+g[h].type]=p(e,g[h].field));f.aggregates=_,e=f}if(u&&u.groups&&u.groups.length){for((d=u.groups,f={},"count"in e&&(f.count=e.count),e.aggregates&&(f.aggregates=e.aggregates),e.result&&(e=e.result),h=0);h<d.length;h++)c=E(d[h],l.queries),t.isNullOrUndefined(m)||(m=t.group(m,d[h],null,c)),e=t.group(e,d[h],u.aggregates,c,null,m);return f.count!=s?f.result=e:f=e,f}return e},onGroup:function(e){this.pvt.groups=e},onAggregates:function(e){this.pvt.aggregates=e},batchRequest:function(e,t,i,s){var l={changed:t.changed,added:t.added,deleted:t.deleted,action:"batch",table:i.url,key:i.key};return s&&this.addParams({dm:e,query:s,params:s._params,reqParams:l}),{type:"POST",url:e.dataSource.batchUrl||e.dataSource.crudUrl||e.dataSource.removeUrl||e.dataSource.url,contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify(l)}},beforeSend:function(){},insert:function(e,t,i,s){var l={value:t,table:i,action:"insert"};return s&&this.addParams({dm:e,query:s,params:s._params,reqParams:l}),{url:e.dataSource.insertUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify(l)}},remove:function(e,t,i,s,l){var n={key:i,keyColumn:t,table:s,action:"remove"};return l&&this.addParams({dm:e,query:l,params:l._params,reqParams:n}),{type:"POST",url:e.dataSource.removeUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify(n)}},update:function(e,t,i,s,l){var n={value:i,action:"update",keyColumn:t,key:i[t],table:s};return l&&this.addParams({dm:e,query:l,params:l._params,reqParams:n}),{type:"POST",url:e.dataSource.updateUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify(n)}},getFiltersFrom:function(e,i){var s;e instanceof Array&&e.length||u("ej.SubQuery: Array of key values required");var l,n=i._fKey,o=n,a=i._key,r=[],d="object"!=typeof e[0];for("object"!=typeof e[0]&&(o=null),s=0;s<e.length;s++)l=d?e[s]:t.pvt.getObject(a||o,e[s]),r.push(new t.Predicate(n,"==",l));return t.Predicate.or(r)},addParams:function(e){var t,i,s=e.dm,l=e.query,n=e.params,o=e.reqParams;for(o.params={},t=0;i=n[t];t++)o[i.key]&&u("ej.Query: Custom Param is conflicting other request arguments"),o[i.key]=i.value,i.fn&&(o[i.key]=i.fn.call(l,i.key,l,s)),o.params[i.key]=o[i.key]}}),t.WebMethodAdaptor=(new t.UrlAdaptor).extend({processQuery:function(e,i,s){var l=t.UrlAdaptor.prototype.processQuery(e,i,s),n=t.parseJSON(l.data),o={};return o.value=n,S(this,"addParams",{dm:e,query:i,params:i._params,reqParams:o}),{data:JSON.stringify(o),url:l.url,ejPvtData:l.ejPvtData,type:"POST",contentType:"application/json; charset=utf-8"}},addParams:function(e){var t,i,s,l,n=e.dm,o=e.query,a=e.params,r=e.reqParams;for(r.params={},t=0;i=a[t];t++)r[i.key]&&u("ej.Query: Custom Param is conflicting other request arguments"),s=i.key,l=i.value,i.fn&&(l=i.fn.call(o,i.key,o,n)),r[s]=l,r.params[s]=r[s]}}),t.CacheAdaptor=(new t.UrlAdaptor).extend({init:function(e,i,s){var l,n;t.isNullOrUndefined(e)||(this.cacheAdaptor=e),this.pageSize=s,this.guidId=t.getGuid("cacheAdaptor"),l={keys:[],results:[]},window.localStorage&&window.localStorage.setItem(this.guidId,JSON.stringify(l)),n=this.guidId,t.isNullOrUndefined(i)||setInterval(function(){for(var e=t.parseJSON(window.localStorage.getItem(n)),s=[],l=0;l<e.results.length;l++)e.results[l].timeStamp=new Date-new Date(e.results[l].timeStamp),new Date-new Date(e.results[l].timeStamp)>i&&s.push(l);for(l=0;l<s.length;l++)e.results.splice(s[l],1),e.keys.splice(s[l],1);window.localStorage.removeItem(n),window.localStorage.setItem(n,JSON.stringify(e))},i)},generateKey:function(e,t){var i,s,l,n,o=w(t.queries,"onSortBy"),a=w(t.queries,"onGroup"),r=w(t.queries,"onWhere"),d=w(t.queries,"onSearch"),h=(w(t.queries,"onPage"),y(t.queries,["onSelect","onPage","onSkip","onTake","onRange"])),c=(t._params,e);for(h.onPage&&(c+=h.onPage.pageIndex),o.forEach(function(e){c+=e.e.direction+e.e.fieldName}),a.forEach(function(e){c+=e.e.fieldName}),d.forEach(function(e){c+=e.e.searchKey}),i=0;i<r.length;i++)if((s=r[i]).e.isComplex){for((l=t.clone()).queries=[],n=0;n<s.e.predicates.length;n++)l.queries.push({fn:"onWhere",e:s.e.predicates[n],filter:t.queries.filter});c+=s.e.condition+this.generateKey(e,l)}else c+=s.e.field+s.e.operator+s.e.value;return c},processQuery:function(e,i){var s,l,n=this.generateKey(e.dataSource.url,i);return window.localStorage&&(s=t.parseJSON(window.localStorage.getItem(this.guidId))),null==(l=s?s.results[s.keys.indexOf(n)]:null)||this._crudAction||this._insertAction?(this._crudAction=null,this._insertAction=null,this.cacheAdaptor.processQuery.apply(this.cacheAdaptor,[].slice.call(arguments,0))):l},processResponse:function(i,s,l,n,o,a){var r;if(this._insertAction||o&&this.cacheAdaptor.options.batch&&o.url.endsWith(this.cacheAdaptor.options.batch)&&"post"===o.type.toLowerCase())return this.cacheAdaptor.processResponse(i,s,l,n,o,a);i=this.cacheAdaptor.processResponse.apply(this,[].slice.call(arguments,0));var d=this.generateKey(s.dataSource.url,l),h={};for(window.localStorage&&(h=t.parseJSON(window.localStorage.getItem(this.guidId))),-1!=(r=e.inArray(d,h.keys))&&(h.results.splice(r,1),h.keys.splice(r,1)),h.results[h.keys.push(d)-1]={keys:d,result:i.result,timeStamp:new Date,count:i.count};h.results.length>this.pageSize;)h.results.splice(0,1),h.keys.splice(0,1);return window.localStorage.setItem(this.guidId,JSON.stringify(h)),i},update:function(e,t,i,s){return this._crudAction=!0,this.cacheAdaptor.update(e,t,i,s)},insert:function(e,t,i){return this._insertAction=!0,this.cacheAdaptor.insert(e,t,i)},remove:function(e,t,i,s){return this._crudAction=!0,this.cacheAdaptor.remove(e,t,i,s)},batchRequest:function(e,t,i){return this.cacheAdaptor.batchRequest(e,t,i)}});var w=function(e,t){return e.filter(function(e){return e.fn===t})||[]},y=function(e,t){for(var i=e.filter(function(e){return-1!==t.indexOf(e.fn)}),s={},l=0;l<i.length;l++)s[i[l].fn]||(s[i[l].fn]=i[l].e);return s},S=function(e,t,i,s){if(e[t]){var l=e[t](i,s);c(l)||(i=l)}return i};t.ODataAdaptor=(new t.UrlAdaptor).extend({options:{requestType:"get",accept:"application/json;odata=light;q=1,application/json;odata=verbose;q=0.5",multipartAccept:"multipart/mixed",sortBy:"$orderby",select:"$select",skip:"$skip",take:"$top",count:"$inlinecount",where:"$filter",expand:"$expand",batch:"$batch",changeSet:"--changeset_",batchPre:"batch_",contentId:"Content-Id: ",batchContent:"Content-Type: multipart/mixed; boundary=",changeSetContent:"Content-Type: application/http\nContent-Transfer-Encoding: binary ",batchChangeSetContentType:"Content-Type: application/json; charset=utf-8 "},onEachWhere:function(e,t){return e.isComplex?this.onComplexPredicate(e,t):this.onPredicate(e,t)},onPredicate:function(e,i,s){var l,n,o,a="",r=e.value,d=typeof r,h=this._p(e.field);return r instanceof Date&&(r="datetime'"+C.replacer(r).toJSON()+"'"),"string"===d&&(r="'"+r+"'",s&&(h="cast("+h+", 'Edm.String')"),t.isGUID(r)&&(n="guid"),e.ignoreCase&&(n||(h="tolower("+h+")"),r=r.toLowerCase())),(l=t.data.odBiOperator[e.operator])?(a+=h,a+=l,n&&(a+=n),a+r):(l=t.data.odUniOperator[e.operator])&&"string"===d?("substringof"===l&&(o=r,r=h,h=o),a+=l+"(",a+=h+",",n&&(a+=n),a+(r+")")):""},onComplexPredicate:function(e,t){for(var i=[],s=0;s<e.predicates.length;s++)i.push("("+this.onEachWhere(e.predicates[s],t)+")");return i.join(" "+e.condition+" ")},onWhere:function(e){return this.pvt.searches&&e.push(this.onEachWhere(this.pvt.searches,null,!0)),e.join(" and ")},onEachSearch:function(e){var i,s;for(0===e.fields.length&&u("Query() - Search : oData search requires list of field names to search"),i=this.pvt.searches||[],s=0;s<e.fields.length;s++)i.push(new t.Predicate(e.fields[s],e.operator,e.key,e.ignoreCase));this.pvt.searches=i},onSearch:function(){return this.pvt.searches=t.Predicate.or(this.pvt.searches),""},onEachSort:function(e){var t,i=[];if(e.name instanceof Array)for(t=0;t<e.name.length;t++)i.push(this._p(e.name[t]));else i.push(this._p(e.name)+("descending"===e.direction?" desc":""));return i.join(",")},onSortBy:function(e){return e.reverse().join(",")},onGroup:function(e){return this.pvt.groups=e,""},onSelect:function(e){for(var t=0;t<e.length;t++)e[t]=this._p(e[t]);return e.join(",")},onAggregates:function(e){return this.pvt.aggregates=e,""},onCount:function(e){return!0===e?"allpages":""},beforeSend:function(e,t,i){i.url.endsWith(this.options.batch)&&"post"===i.type.toLowerCase()&&(t.setRequestHeader("Accept",g),t.setRequestHeader("DataServiceVersion","2.0"),t.overrideMimeType("text/plain; charset=x-user-defined")),e.dataSource.crossDomain||(t.setRequestHeader("DataServiceVersion","2.0"),t.setRequestHeader("MaxDataServiceVersion","2.0"))},processResponse:function(i,s,l,n,o,a){var r,d,h,u,m,p,g,f,_,v;if(!t.isNullOrUndefined(i.d)&&(r=l&&l._requiresCount?i.d.results:i.d,!t.isNullOrUndefined(r)))for(_=0;_<r.length;_++)t.isNullOrUndefined(r[_].__metadata)||delete r[_].__metadata;if(d=o&&o.ejPvtData,n&&n.getResponseHeader("Content-Type")&&-1!=n.getResponseHeader("Content-Type").indexOf("xml")&&9==i.nodeType)return l._requiresCount?{result:[],count:0}:[];if(o&&this.options.batch&&o.url.endsWith(this.options.batch)&&"post"===o.type.toLowerCase()){if(h=(h=n.getResponseHeader("Content-Type")).substring(h.indexOf("=batchresponse")+1),(i=i.split(h)).length<2)return;for(i=i[1],p=/(?:\bContent-Type.+boundary=)(changesetresponse.+)/i.exec(i),i.replace(p[0],""),g=p[1],_=(i=i.split(g)).length;_>-1;_--)/\bContent-ID:/i.test(i[_])&&/\bHTTP.+201/.test(i[_])&&(u=parseInt(/\bContent-ID: (\d+)/i.exec(i[_])[1]),a.added[u]&&(m=C.parseJson(/^\{.+\}/m.exec(i[_])[0]),e.extend(a.added[u],this.processResponse(m))));return a}var b=n&&n.getResponseHeader("DataServiceVersion"),w=null,y={};if(b=b&&parseInt(b,10)||2,l&&l._requiresCount&&((i.__count||i["odata.count"])&&(w=i.__count||i["odata.count"]),i.d&&(i=i.d),(i.__count||i["odata.count"])&&(w=i.__count||i["odata.count"])),3===b&&i.value&&(i=i.value),i.d&&(i=i.d),b<3&&i.results&&(i=i.results),d&&d.aggregates&&d.aggregates.length){var S,x=d.aggregates,T={};for(_=0;_<x.length;_++)(S=t.aggregates[x[_].type])&&(T[x[_].field+" - "+x[_].type]=S(i,x[_].field));y=T}if(d&&d.groups&&d.groups.length)for(f=d.groups,_=0;_<f.length;_++)v=E(f[_],l.queries),i=t.group(i,f[_],d.aggregates,v);return c(w)?i:{result:i,count:w,aggregates:y}},convertToQueryString:function(e,t,i){var s,l=[],n=e.table||"";for(s in delete e.table,i.dataSource.requiresFormat&&(e.$format="json"),e)l.push(s+"="+e[s]);return l=l.join("&"),i.dataSource.url&&-1!==i.dataSource.url.indexOf("?")&&!n?l:l.length?n+"?"+l:n||""},insert:function(e,t,i){return{url:e.dataSource.url.replace(/\/*$/,i?"/"+i:""),data:JSON.stringify(t)}},remove:function(e,t,i,s){return{type:"DELETE",url:e.dataSource.url.replace(/\/*$/,s?"/"+s:"")+"("+i+")"}},update:function(e,t,i,s){return{type:"PUT",url:e.dataSource.url.replace(/\/*$/,s?"/"+s:"")+"("+i[t]+")",data:JSON.stringify(i),accept:this.options.accept}},batchRequest:function(e,i,s){var l=s.guid=t.getGuid(_),n=e.dataSource.url.replace(/\/*$/,"/"+this.options.batch),o={url:s.url,key:s.key,cid:1,cSet:t.getGuid(f)},a="--"+l+"\n";return a+="Content-Type: multipart/mixed; boundary="+o.cSet.replace("--","")+"\n",this.pvt.changeSet=0,a+=this.generateInsertRequest(i.added,o),a+=this.generateUpdateRequest(i.changed,o),a+=this.generateDeleteRequest(i.deleted,o),a+=o.cSet+"--\n",{type:"POST",url:n,contentType:"multipart/mixed; charset=UTF-8;boundary="+l,data:a+="--"+l+"--"}},generateDeleteRequest:function(e,t){var i,s;if(!e)return"";for(i="",s=0;s<e.length;s++)i+="\n"+t.cSet+"\n",i+=v+"\n\n",i+="DELETE ",i+=t.url+"("+e[s][t.key]+") HTTP/1.1\n",i+="If-Match : * \n",i+="Accept: "+p+"\n",i+="Content-Id: "+this.pvt.changeSet+++"\n",i+=b+"\n";return i+"\n"},generateInsertRequest:function(e,t){var i,s;if(!e)return"";for(i="",s=0;s<e.length;s++)i+="\n"+t.cSet+"\n",i+=v+"\n\n",i+="POST ",i+=t.url+" HTTP/1.1\n",i+="Accept: "+p+"\n",i+="Content-Id: "+this.pvt.changeSet+++"\n",i+=b+"\n\n",i+=JSON.stringify(e[s])+"\n";return i},generateUpdateRequest:function(e,t){var i,s;if(!e)return"";for(i="",s=0;s<e.length;s++)i+="\n"+t.cSet+"\n",i+=v+"\n\n",i+="PUT ",i+=t.url+"("+e[s][t.key]+") HTTP/1.1\n",i+="If-Match : * \n",i+="Accept: "+p+"\n",i+="Content-Id: "+this.pvt.changeSet+++"\n",i+=b+"\n\n",i+=JSON.stringify(e[s])+"\n\n";return i},_p:function(e){return e.replace(/\./g,"/")}}),t.ODataV4Adaptor=(new t.ODataAdaptor).extend({options:{requestType:"get",accept:"application/json;odata=light;q=1,application/json;odata=verbose;q=0.5",multipartAccept:"multipart/mixed",sortBy:"$orderby",select:"$select",skip:"$skip",take:"$top",count:"$count",search:"$search",where:"$filter",expand:"$expand",batch:"$batch",changeSet:"--changeset_",batchPre:"batch_",contentId:"Content-Id: ",batchContent:"Content-Type: multipart/mixed; boundary=",changeSetContent:"Content-Type: application/http\nContent-Transfer-Encoding: binary ",batchChangeSetContentType:"Content-Type: application/json; charset=utf-8 "},onCount:function(e){return!0===e?"true":""},onPredicate:function(e,i,s){var l="",n=e.value instanceof Date;return t.data.odUniOperator.contains="contains",l=t.ODataAdaptor.prototype.onPredicate.call(this,e,i,s),t.data.odUniOperator.contains="substringof",n&&(l=l.replace(/datetime'(.*)'$/,"$1")),l},onEachSearch:function(e){var t=this.pvt.search||[];t.push(e.key),this.pvt.search=t},onSearch:function(){return this.pvt.search.join(" OR ")},beforeSend:function(){},processQuery:function(e,i){for(var s,l,n=/\/[\d*\/]*/g,o="",a=i._expands.length-1;a>0;a--)if(o.indexOf(i._expands[a])>=0)i._expands.pop();else if(n.test(i._expands[a])){for(s=(o=i._expands.pop()).replace(n,"($expand="),l=0;l<o.split(n).length-1;l++)s+=")";i._expands.unshift(s),a++}return t.ODataAdaptor.prototype.processQuery.apply(this,[e,i])},processResponse:function(i,s,l,n,o,a){var r,d,h,u,m,p,g,f,_,v,b=o&&o.ejPvtData;if(n&&n.getResponseHeader("Content-Type")&&-1!=n.getResponseHeader("Content-Type").indexOf("xml")&&9==i.nodeType)return l._requiresCount?{result:[],count:0}:[];if(o&&this.options.batch&&o.url.endsWith(this.options.batch)&&"post"===o.type.toLowerCase()){if(r=(r=n.getResponseHeader("Content-Type")).substring(r.indexOf("=batchresponse")+1),(i=i.split(r)).length<2)return;for(i=i[1],u=/(?:\bContent-Type.+boundary=)(changesetresponse.+)/i.exec(i),i.replace(u[0],""),m=u[1],_=(i=i.split(m)).length;_>-1;_--)/\bContent-ID:/i.test(i[_])&&/\bHTTP.+201/.test(i[_])&&(d=parseInt(/\bContent-ID: (\d+)/i.exec(i[_])[1]),a.added[d]&&(h=C.parseJson(/^\{.+\}/m.exec(i[_])[0]),e.extend(a.added[d],this.processResponse(h))));return a}if(p=null,g={},l&&l._requiresCount&&"@odata.count"in i&&(p=i["@odata.count"]),i=t.isNullOrUndefined(i.value)?i:i.value,b&&b.aggregates&&b.aggregates.length){var w,y=b.aggregates,S={};for(_=0;_<y.length;_++)(w=t.aggregates[y[_].type])&&(S[y[_].field+" - "+y[_].type]=w(i,y[_].field));g=S}if(b&&b.groups&&b.groups.length)for(f=b.groups,_=0;_<f.length;_++)v=E(f[_],l.queries),i=t.group(i,f[_],b.aggregates,v);return c(p)?i:{result:i,count:p,aggregates:g}}}),t.JsonAdaptor=(new t.Adaptor).extend({processQuery:function(e,t){for(var i,l,n=e.dataSource.json.slice(0),o=n.length,a=!0,r={},d=0;d<t.queries.length;d++)i=this[(l=t.queries[d]).fn].call(this,n,l.e,t),"onAggregates"==l.fn?r[l.e.field+" - "+l.e.type]=i:n=i!==s?i:n,("onPage"===l.fn||"onSkip"===l.fn||"onTake"===l.fn||"onRange"===l.fn)&&(a=!1),a&&(o=n.length);return t._requiresCount&&(n={result:n,count:o,aggregates:r}),n},batchRequest:function(e,t,i){for(var s=0;s<t.added.length;s++)this.insert(e,t.added[s]);for(s=0;s<t.changed.length;s++)this.update(e,i.key,t.changed[s]);for(s=0;s<t.deleted.length;s++)this.remove(e,i.key,t.deleted[s]);return t},onWhere:function(e,t){return e?e.filter(function(e){return t.validate(e)}):e},onAggregates:function(e,i){var s=t.aggregates[i.type];return e&&s&&0!=e.length?s(e,i.field):null},onSearch:function(e,i){return e&&e.length?(0===i.fieldNames.length&&t.pvt.getFieldList(e[0],i.fieldNames),e.filter(function(e){for(var s=0;s<i.fieldNames.length;s++)if(i.comparer.call(e,t.pvt.getObject(i.fieldNames[s],e),i.searchKey,i.ignoreCase))return!0;return!1})):e},onSortBy:function(e,i,s){var n,o,a;if(!e)return e;if(!(o=l(i.fieldName,s)))return e.sort(i.comparer);if(o instanceof Array){for(a=(o=o.slice(0)).length-1;a>=0;a--)o[a]&&(n=i.comparer,o[a].endsWith(" desc")&&(n=t.pvt.fnSort(t.sortOrder.Descending),o[a]=o[a].replace(" desc","")),e=N(e,o[a],n,[]));return e}return N(e,o,i.comparer,s?s.queries:[])},onGroup:function(e,i,s){var n,o,a,r,d;if(!e)return e;if(o=[],(n=w(s.queries,"onAggregates")).length)for(r=0;r<n.length;r++)a=n[r].e,o.push({type:a.type,field:l(a.field,s)});return d=E(i.fieldName,s.queries),t.group(e,l(i.fieldName,s),o,d)},onPage:function(e,t,i){var s=l(t.pageSize,i),n=(l(t.pageIndex,i)-1)*s,o=n+s;return e?e.slice(n,o):e},onRange:function(e,t){return e?e.slice(l(t.start),l(t.end)):e},onTake:function(e,t){return e?e.slice(0,l(t.nos)):e},onSkip:function(e,t){return e?e.slice(l(t.nos)):e},onSelect:function(e,i){return e?t.select(e,l(i.fieldNames)):e},insert:function(e,t){return e.dataSource.json.push(t)},remove:function(e,i,s){var l,n=e.dataSource.json;for("object"==typeof s&&(s=t.getObject(i,s)),l=0;l<n.length&&t.getObject(i,n[l])!==s;l++);return l!==n.length?n.splice(l,1):null},update:function(i,s,l){for(var n=i.dataSource.json,o=t.getObject(s,l),a=0;a<n.length&&t.getObject(s,n[a])!==o;a++);return a<n.length?e.extend(n[a],l):null}}),t.ForeignKeyAdaptor=function(i,l){var n=(new t[l||"JsonAdaptor"]).extend({init:function(){var e,s;for(this.foreignData=[],this.key=[],this.adaptorType=l,this.value=[],this.fValue=[],this.keyField=[],e=i,s=0;s<e.length;s++)this.foreignData[s]=e[s].dataSource,this.key[s]=e[s].foreignKeyField,this.fValue[s]=t.isNullOrUndefined(e[s].field)?e[s].foreignKeyValue:e[s].field+"_"+e[s].foreignKeyValue,this.value[s]=e[s].foreignKeyValue,this.keyField[s]=e[s].field||e[s].foreignKeyField,this.initial=!0},processQuery:function(e,i){var s,l,n,o=e.dataSource.json;if(this.initial){for(s=0;s<o.length;s++)for(l=this,n=0;n<this.foreignData.length;n++)this.foreignData[n].filter(function(e){t.getObject(l.key[n],e)==t.getObject(l.keyField[n],o[s])&&(o[s][l.fValue[n]]=t.getObject(l.value[n],e))});this.initial=!1}return this.base.processQuery.apply(this,[e,i])},setValue:function(i){for(var l,n,o,a=0;a<this.foreignData.length;a++)l=this,"string"!=typeof(n=i[this.fValue[a]])||isNaN(n)||(n=t.parseFloat(n)),o=e.grep(l.foreignData[a],function(e){return e[l.value[a]]==n})[0],t.isNullOrUndefined(o)&&(o=e.grep(l.foreignData[a],function(e){return e[l.key[a]]==n})[0],t.getObject(this.value[a],o)!=s&&t.createObject(l.value[a],t.getObject(this.value[a],o),i)),t.getObject(this.value[a],o)!=s&&t.createObject(this.keyField[a],t.getObject(this.key[a],o),i)},insert:function(e,t,i){return this.setValue(t),{url:e.dataSource.insertUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify({value:t,table:i,action:"insert"})}},update:function(e,i,s,l){return this.setValue(s),t.JsonAdaptor.prototype.update(e,i,s,l),{type:"POST",url:e.dataSource.updateUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify({value:s,action:"update",keyColumn:i,key:s[i],table:l})}}});return e.extend(this,new n),this},t.remoteSaveAdaptor=(new t.JsonAdaptor).extend({beforeSend:t.UrlAdaptor.prototype.beforeSend,insert:t.UrlAdaptor.prototype.insert,update:t.UrlAdaptor.prototype.update,remove:t.UrlAdaptor.prototype.remove,addParams:t.UrlAdaptor.prototype.addParams,batchRequest:function(e,i,s){for(var l=0;l<i.added.length;l++)t.JsonAdaptor.prototype.insert(e,i.added[l]);for(l=0;l<i.changed.length;l++)t.JsonAdaptor.prototype.update(e,s.key,i.changed[l]);for(l=0;l<i.deleted.length;l++)t.JsonAdaptor.prototype.remove(e,s.key,i.deleted[l]);return{type:"POST",url:e.dataSource.batchUrl||e.dataSource.crudUrl||e.dataSource.url,contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify({changed:i.changed,added:i.added,deleted:i.deleted,action:"batch",table:s.url,key:s.key})}}}),t.WebApiAdaptor=(new t.ODataAdaptor).extend({insert:function(e,t){return{type:"POST",url:e.dataSource.url,data:JSON.stringify(t)}},remove:function(e,t,i){return{type:"DELETE",url:e.dataSource.url+"/"+i,data:JSON.stringify(i)}},update:function(e,t,i){return{type:"PUT",url:e.dataSource.url,data:JSON.stringify(i)}},processResponse:function(e,i,s,l,n){var o,a,r,d=n&&n.ejPvtData;if(n&&"post"!=n.type.toLowerCase()){var h=l&&l.getResponseHeader("DataServiceVersion"),u=null,m={};if(h=h&&parseInt(h,10)||2,s&&s._requiresCount&&(c(e.Count)||(u=e.Count)),h<3&&e.Items&&(e=e.Items),d&&d.aggregates&&d.aggregates.length){var p,g=d.aggregates,f={};for(a=0;a<g.length;a++)(p=t.aggregates[g[a].type])&&(f[g[a].field+" - "+g[a].type]=p(e,g[a].field));m=f}if(d&&d.groups&&d.groups.length)for(o=d.groups,a=0;a<o.length;a++)r=E(o[a],s.queries),e=t.group(e,o[a],d.aggregates,r);return c(u)?e:{result:e,count:u,aggregates:m}}}}),l=function(e,t){return"function"==typeof e?e.call(t||{}):e},t.TableModel=function(i,s,l,n){var o,a,r,d;if(!F(this,t.TableModel))return new t.TableModel(s);for(F(s,Array)||u("ej.TableModel - Json Array is required"),o=[],r=h(D,this),d=0;d<s.length;d++)(a=new t.Model(s[d],this)).state="unchanged",a.on("stateChange",r),n&&a.computes(n),o.push(a);return this.name=i||"table1",this.rows=t.NotifierArray(o),this._deleted=[],this._events=e({}),this.dataManager=l,this._isDirty=!1,this},t.TableModel.prototype={on:function(e,t){this._events.on(e,t)},off:function(e,t){this._events.off(e,t)},setDataManager:function(e){this.dataManagar=e},saveChanges:function(){if(this.dataManager&&F(this.dataManager,t.DataManager)||u("ej.TableModel - saveChanges : Set the dataManager using setDataManager function"),this.isDirty()){var e=this.dataManager.saveChanges(this.getChanges(),this.key,this.name);e.done(h(function(e){for(var t=this.toArray(),i=0;i<t.length;i++)"added"===t.state&&t.set(this.key,e.added.filter(function(e){return e[this.key]===t.get(this.key)})[0][this.key]),t[i].markCommit();this._events.triggerHandler({type:"save",table:this})},this)),e.fail(h(function(e){this.rejectChanges(),this._events.triggerHandler({type:"reject",table:this,error:e})},this)),this._isDirty=!1}},rejectChanges:function(){for(var e=this.toArray(),t=0;t<e.length;t++)e[t].revert(!0);this._isDirty=!1,this._events.triggerHandler({type:"reject",table:this})},insert:function(e){var i=new t.Model(e);i._isDirty=this._isDirty=!0,this.rows.push(i),this._events.triggerHandler({type:"insert",model:i,table:this})},update:function(e){var t;this.key||u("TableModel - update : Primary key should be assigned to TableModel.key");var i,s=e,l=this.key,n=s[l];for(t in i=this.rows.array.filter(function(e){return e.get(l)===n}),i=i[0],s)i.set(t,s[t]);this._isDirty=!0,this._events.triggerHandler({type:"update",model:i,table:this})},remove:function(e){var t,i,l,n;for(this.key||u("TableModel - update : Primary key should be assigned to TableModel.key"),t=this.key,i=-1,e&&"object"==typeof e&&(e=e[t]!==s?e[t]:e.get(t)),n=0;n<this.rows.length();n++)if(this.rows.array[n].get(t)===e){i=n;break}i>-1&&((l=this.rows.removeAt(i)).markDelete(),this._deleted.push({model:l,position:i}),this._isDirty=!0,this._events.triggerHandler({type:"remove",model:l,table:this}))},isDirty:function(){return this._isDirty},getChanges:function(){for(var e={added:[],changed:[]},i=this.toArray(),s=0;s<i.length;s++)e[i[s].state]&&e[i[s].state].push(i[s].json);return e.deleted=t.select(this._deleted,["model"]),e},toArray:function(){return this.rows.toArray()},setDirty:function(e,t){this._isDirty!==!!e&&(this._isDirty=!!e,this._events.triggerHandler({type:"dirty",table:this,model:t}))},get:function(e){return this.rows.array[e]},length:function(){return this.rows.array.length},bindTo:function(t){var i,s,l=n,a=e(t.html()),r=this.toArray();for(e.inArray(t.prop("tagName").toLowerCase(),["table","tbody"])&&(l=o),l.insertBefore(t),t.detach().empty(),s=0;s<r.length;s++)i=a.clone(),r[s].bindTo(i),t.append(i);t.insertAfter(l),l.remove()}},n=i?e(document.createElement("div")):{},o=i?e(document.createElement("tr")):{},t.Model=function(i,s,l){"string"==typeof s&&(l=s,s=null),this.$id=H("m"),this.json=i,this.table=s instanceof t.TableModel?s:null,this.name=l||this.table&&this.table.name,this.dataManager=s instanceof t.DataManager?s:s.dataManagar,this.actual={},this._events=e({}),this.isDirty=!1,this.state="added",this._props=[],this._computeEls={},this._fields={},this._attrEls={},this._updates={},this.computed={}},t.Model.prototype={computes:function(t){e.extend(this.computed,t)},on:function(e,t){this._events.on(e,t)},off:function(e,t){this._events.off(e,t)},set:function(e,t){var i,l,n=this.json,o=e;for(e=e.split("."),l=0;l<e.length-1;l++)n=n[(e=e[0])[0]];this.isDirty=!0,this.changeState("changed",{from:"set"}),i=n[e],this.actual[e]!==s||e in this.actual||(this.actual[e]=t),n[e]=t,this._updateValues(e,t),this._events.triggerHandler({type:o,current:t,previous:i,model:this})},get:function(e){return t.pvt.getObject(e,this.json)},revert:function(e){for(var t in this.actual)this.json[t]=this.actual[t];this.isDirty=!1,e?this.state="unchanged":this.changeState("unchanged",{from:"revert"})},save:function(i,s){return i=i||this.dataManagar,s=s||i.dataSource.key,i||u("ej.Model - DataManager is required to commit the changes"),"added"===this.state?i.insert(this.json,this.name).done(t.proxy(function(t){e.extend(this.json,t.record)},this)):"changed"===this.state?i.update(s,this.json,this.name):"deleted"===this.state?i.remove(s,this.json,this.name):void 0},markCommit:function(){this.isDirty=!1,this.changeState("unchanged",{from:"commit"})},markDelete:function(){this.changeState("deleted",{from:"delete"})},changeState:function(t,i){if(this.state!==t){if("added"===this.state){if("deleted"!==t)return;t="unchanged"}var s=t;i=i||{},this.state=t,this._events.triggerHandler(e.extend({type:"stateChange",current:t,previous:s,model:this},i))}},properties:function(){if(this._props.length)return this._props;for(var e in this.json)this._props.push(e),this._updates[e]={read:[],input:[]};return this._props},bindTo:function(t){var i,s,l,n,o=e(t),a=o.find("[ej-observe], [ej-computed], [ej-prop]"),r=a.length;for(o.data("ejModel",this),l={fields:[],props:[],computes:[]},n=0;n<r;n++)(s=(i=a.eq(n)).attr("ej-prop"))&&this._processAttrib(s,i,l),(s=i.attr("ej-observe"))&&-1!==this._props.indexOf(s)?this._processField(i,s,l):(s=i.attr("ej-computed"))&&this._processComputed(s,i,l);o.data("ejModelBinding"+this.$id,l)},unbind:function(t){var i,s,l,n,o,a,r,d={props:this._attrEls,computes:this._computeEls},h=!1;for(s in t&&(d=e(t).removeData("ejModel").data("ejModelBinding"+this.$id)||d,h=!0),this.computed)i=d.computes[s],s=this.computed[s],i&&s.deps&&(this.off(s.deps.join(" "),i.handle),h&&delete this._computeEls[s]);for(s in h||(this._computeEls={}),d.props)(i=d.props[s])&&(this.off(i.deps.join(" "),i.handle),delete d.props[s],h&&delete this._attrEls[s]);if(h||(this._attrEls={}),d.fields&&d.fields.length)for(l=d.fields.length,r=0;r<l;r++)n=d.fields[r],e(n).off("change",null,this._changeHandler),a=-1!==this.formElements.indexOf(n.tagName.toLowerCase())?"input":"read",-1!==(o=this._updates[a].indexOf(n))&&this._updates[a].splice(o,1)},_processComputed:function(e,t,i){if(e){var s,l,n=T(e),o=-1!==this.formElements.indexOf(t[0].tagName.toLowerCase())?"val":"html";this.computed[e]&&this.computed[n]||(this.computed[n]={value:new Function("var e = this; return "+e),deps:this._generateDeps(e)},e=n),(s=this.computed[e]).get||(s.get=function(){s.value.call(this.json)}),l=s.deps,s=s.value,this._updateDeps(l),this._updateElement(t,o,s),s={el:t,handle:h(this._computeHandle,this,{value:e,type:o})},this._computeEls[e]=s,i.computes[e]=s,this.on(l.join(" "),s.handle)}},_computeHandle:function(e){var t=this._computeEls[e.value];t&&this.computed[e.value]&&this._updateElement(t.el,e.type,this.computed[e.value].value)},_updateElement:function(t,i,s){t[i](s.call(e.extend({},this.json,this.computed)))},_updateDeps:function(e){for(var i=0;i<e.length;i++)!(e[i]in this.json)&&e[i]in this.computed&&t.merge(e,this.computed[e[i]].deps)},_generateDeps:function(e){for(var t,i=e.replace(/(^e\.)|( e\.)/g,"#%^*##ej.#").split("#%^*#"),s=[],l=0;l<i.length;l++)i[l].startsWith("#ej.#")&&((t=i[l].replace("#ej.#","").split(" ")[0])&&-1!==this._props.indexOf(t)&&s.push(t));return s},_processAttrib:function(e,t,i){var s,l,n,o,a={};for(e=e.replace(/^ +| +$/g,"").split(";"),n=0;n<e.length;n++)e[n]=e[n].split(":"),e[n].length<2||(a[s=e[n][0].replace(/^ +| +$/g,"").replace(/^'|^"|'$|"$/g,"")]=e[n][1].replace(/^ +| +$/g,"").replace(/^'|^"|'$|"$/g,""));for(s in o=[],e=a)o.push(e[s]);this._updateDeps(o),this._updateProps(t,e),a=H("emak"),l={el:t,handle:h(this._attrHandle,this,a),value:e,deps:o},t.prop("ejmodelattrkey",a),i.props[a]=l,this._attrEls[a]=l,this.on(o.join(" "),l.handle)},_attrHandle:function(e){var t=this._attrEls[e];t&&this._updateProps(t.el,t.value)},_updateProps:function(t,i){var s,l=this.json,n=this.computed;for(var o in i)(s=i[o])in l?s=l[s]:s in n&&((s=n[s])&&(s=s.value.call(e.extend({},this.json,n)))),c(s)||t.prop(o,s)},_updateValues:function(e,t){var i=this._updates[e];i&&(i.read||i.input)&&(this._ensureItems(i.read,"html",t),this._ensureItems(i.input,"val",t))},_ensureItems:function(t,i,s){if(t)for(var l=t.length-1;l>-1;l--)t[l].offsetParent?e(t[l])[i](s):t.splice(l,1)},_changeHandler:function(t){t.data.self.set(t.data.prop,e(this).val())},_processField:function(e,t,i){var s={self:this,prop:t},l=this.get(t);return i.fields.push(e[0]),-1===this.formElements.indexOf(e[0].tagName.toLowerCase())?(e.html(l),this._updates[t].read.push(e[0])):(e.val(l).off("change",null,this._changeHandler).on("change",null,s,this._changeHandler),this._updates[t].input.push(e[0]))},formElements:["input","select","textarea"]};var x=/[^\w]+/g,T=function(e){return e.replace(x,"_")},D=function(e){this.setDirty(!0,e.model)};if(t.Predicate=function(e,i,s,l){return this instanceof t.Predicate?("string"==typeof e?(this.field=e,this.operator=i,this.value=s,this.ignoreCase=l,this.isComplex=!1,this._comparer=t.data.fnOperators.processOperator(this.operator)):(e instanceof t.Predicate&&s instanceof t.Predicate||s instanceof Array)&&(this.isComplex=!0,this.condition=i.toLowerCase(),this.predicates=[e],s instanceof Array?[].push.apply(this.predicates,s):this.predicates.push(s)),this):new t.Predicate(e,i,s,l)},t.Predicate.and=function(){return a._combinePredicates([].slice.call(arguments,0),"and")},t.Predicate.or=function(){return a._combinePredicates([].slice.call(arguments,0),"or")},t.Predicate.fromJSON=function(e){var t,i,s;if(F(e,Array)){for(t=[],i=0,s=e.length;i<s;i++)t.push(a._fromJSON(e[i]));return t}return a._fromJSON(e)},a={_combinePredicates:function(e,i){if(!e.length)return s;if(1===e.length){if(!F(e[0],Array))return e[0];e=e[0]}return new t.Predicate(e[0],i,e.slice(1))},_combine:function(e,i,s,l,n,o){return i instanceof t.Predicate?t.Predicate[n](e,i):"string"==typeof i?t.Predicate[n](e,new t.Predicate(i,s,l,o)):u("Predicate - "+n+" : invalid arguments")},_fromJSON:function(e){var i;if(!e||F(e,t.Predicate))return e;var s=e.predicates||[],l=s.length,n=[];for(i=0;i<l;i++)n.push(a._fromJSON(s[i]));return e.isComplex?new t.Predicate(n[0],e.condition,n.slice(1)):new t.Predicate(e.field,e.operator,t.parseJSON({val:e.value}).val,e.ignoreCase)}},t.Predicate.prototype={and:function(e,t,i,s){return a._combine(this,e,t,i,"and",s)},or:function(e,t,i,s){return a._combine(this,e,t,i,"or",s)},validate:function(e){var i,s,l,n=this.predicates;if(!this.isComplex)return this._comparer.call(this,t.pvt.getObject(this.field,e),this.value,this.ignoreCase);for(i="and"===this.condition,l=0;l<n.length;l++)if(s=n[l].validate(e),i){if(!s)return!1}else if(s)return!0;return i},toJSON:function(){var e,t,i;if(this.isComplex)for(e=[],t=this.predicates,i=0;i<t.length;i++)e.push(t[i].toJSON());return{isComplex:this.isComplex,field:this.field,operator:this.operator,value:this.value,ignoreCase:this.ignoreCase,condition:this.condition,predicates:e}}},t.dataUtil={swap:function(e,t,i){if(t!=i){var s=e[t];e[t]=e[i],e[i]=s}},mergeSort:function(e,i,s){return s&&"string"!=typeof s||(s=t.pvt.fnSort(s,!0)),"function"==typeof i&&(s=i,i=null),t.pvt.mergeSort(e,i,s)},max:function(e,i,s){return"function"==typeof i&&(s=i,i=null),t.pvt.getItemFromComparer(e,i,s||t.pvt.fnDescending)},min:function(e,i,s){return"function"==typeof i&&(s=i,i=null),t.pvt.getItemFromComparer(e,i,s||t.pvt.fnAscending)},distinct:function(e,t,i){for(var s,l=[],n={},o=0;o<e.length;o++)(s=P(e,t,o))in n||(l.push(i?e[o]:s),n[s]=1);return l},sum:function(e,t){for(var i,s=0,l="number"!=typeof P(e,t,0),n=0;n<e.length;n++)i=P(e,t,n),isNaN(i)||null===i||(l&&(i=+i),s+=i);return s},avg:function(e,i){return t.sum(e,i)/e.length},select:function(e,i){for(var s=[],l=0;l<e.length;l++)s.push(t.pvt.extractFields(e[l],i));return s},group:function(i,s,l,n,o,a){var r,d,h,c,u,m,p,g,f,_;if(o=o||1,i.GROUPGUID==t.pvt.consts.GROUPGUID){for(f=0;f<i.length;f++)t.isNullOrUndefined(a)?(i[f].items=t.group(i[f].items,s,l,n,i.level+1),i[f].count=i[f].items.length):(-1,_=e.grep(a,function(e){return e.key==i[f].key}),r=a.indexOf(_[0]),i[f].items=t.group(i[f].items,s,l,n,i.level+1,a[r].items),i[f].count=a[r].count);return i.childLevels+=1,i}for(d={},(h=[]).GROUPGUID=t.pvt.consts.GROUPGUID,h.level=o,h.childLevels=0,h.records=i,m=0;m<i.length;m++)c=P(i,s,m),t.isNullOrUndefined(n)||(c=n(c,s)),d[c]||(d[c]={key:c,count:0,items:[],aggregates:{},field:s},h.push(d[c]),t.isNullOrUndefined(a)||(u=e.grep(a,function(e){return e.key==d[c].key}),d[c].count=u[0].count)),d[c].count=t.isNullOrUndefined(a)?d[c].count+=1:d[c].count,d[c].items.push(i[m]);if(l&&l.length)for(m=0;m<h.length;m++){for(p={},f=0;f<l.length;f++)g=t.aggregates[l[f].type],t.isNullOrUndefined(a)?g&&(p[l[f].field+" - "+l[f].type]=g(h[m].items,l[f].field)):(_=e.grep(a,function(e){return e.key==h[m].key}),g&&(p[l[f].field+" - "+l[f].type]=g(_[0].items,l[f].field)));h[m].aggregates=p}return h},parseTable:function(i,s,l){var n,o,a,r,d,h,c,u=i.rows,m=[],p=[];if(!u.length)return[];switch(l=l||0,(s||"").toLowerCase()){case t.headerOption.tHead:n=i.tHead.rows[l];break;case t.headerOption.row:default:n=i.rows[l]}for(a=n.cells,o=0;o<a.length;o++)m.push(e.trim(a[o].innerHTML));for(o=l+1;o<u.length;o++){for(r={},d=u[o].cells,h=0;h<d.length;h++)c=d[h].innerHTML,r[m[h]]="string"==typeof c&&e.isNumeric(c)?Number(c):c;p.push(r)}return p}},t.headerOption={tHead:"thead",row:"row"},t.aggregates={sum:function(e,i){return t.sum(e,i)},average:function(e,i){return t.avg(e,i)},minimum:function(e,i){return t.getObject(i,t.min(e,i))},maximum:function(e,i){return t.getObject(i,t.max(e,i))},truecount:function(e,i){var s=t.Predicate(i,"equal",!0);return t.DataManager(e).executeLocal(t.Query().where(s)).length},falsecount:function(e,i){var s=t.Predicate(i,"equal",!1);return t.DataManager(e).executeLocal(t.Query().where(s)).length},count:function(e){return e.length}},t.pvt={filterQueries:w,mergeSort:function(e,i,s){if(e.length<=1)return e;var l=parseInt(e.length/2,10),n=e.slice(0,l),o=e.slice(l);return n=t.pvt.mergeSort(n,i,s),o=t.pvt.mergeSort(o,i,s),t.pvt.merge(n,o,i,s)},getItemFromComparer:function(e,i,s){var l,n,o,a=0,r="string"==typeof P(e,i,0);if(e.length)for(;t.isNullOrUndefined(l)&&a<e.length;)l=P(e,i,a),o=e[a++];for(;a<e.length;a++)n=P(e,i,a),t.isNullOrUndefined(n)||(r&&(l=+l,n=+n),s(l,n)>0&&(l=n,o=e[a]));return o},quickSelect:function(e,i,s,l,n,o){if(s==l)return e[s];var a=t.pvt.partition(e,i,s,l,o),r=a-s+1;return r==n?e[a]:n<r?t.pvt.quickSelect(e,i,s,a-1,n,o):t.pvt.quickSelect(e,i,a+1,l,n-r,o)},extractFields:function(e,i){var s,l={};if(1==i.length)return t.pvt.getObject(i[0],e);for(s=0;s<i.length;s++)l[i[s].replace(".",t.pvt.consts.complexPropertyMerge)]=t.pvt.getObject(i[s],e);return l},partition:function(e,i,s,l,n){var o,a=parseInt((s+l)/2,10),r=P(e,i,a);for(t.swap(e,a,l),a=s,o=s;o<l;o++)n(P(e,i,o),r)&&(t.swap(e,o,a),a++);return t.swap(e,a,l),a},fnSort:function(e){return(e=e?e.toLowerCase():t.sortOrder.Ascending)==t.sortOrder.Ascending?t.pvt.fnAscending:t.pvt.fnDescending},fnGetComparer:function(e,i){return function(s,l){return i(t.pvt.getObject(e,s),t.pvt.getObject(e,l))}},fnAscending:function(e,t){return null===t||t===s?-1:"string"==typeof e?e.localeCompare(t):null===e||e===s?1:e-t},fnDescending:function(e,t){return null===t||t===s?1:"string"==typeof e?-1*e.localeCompare(t):null===e||e===s?-1:t-e},merge:function(e,t,i,s){for(var l,n=[];e.length>0||t.length>0;)l=e.length>0&&t.length>0?s?s(P(e,i,0),P(t,i,0))<=0?e:t:e[0][i]<e[0][i]?e:t:e.length>0?e:t,n.push(l.shift());return n},getObject:function(e,t){var i,l,n;if(!t)return s;if(!e)return t;if(-1===e.indexOf("."))return t[e];for(i=t,l=e.split("."),n=0;n<l.length&&null!=i;n++)i=i[l[n]];return i},createObject:function(e,t,i){for(var l=e.split("."),n=i||window,o=n,a=0;a<l.length;a++)a+1==l.length?o[l[a]]=t===s?{}:t:null==o[l[a]]&&(o[l[a]]={}),o=o[l[a]];return n},getFieldList:function(e,i,l){if(l===s&&(l=""),i===s||null===i)return t.pvt.getFieldList(e,[],l);for(var n in e)"object"!=typeof e[n]||e[n]instanceof Array?i.push(l+n):t.pvt.getFieldList(e[n],i,l+n+".");return i}},t.FilterOperators={lessThan:"lessthan",greaterThan:"greaterthan",lessThanOrEqual:"lessthanorequal",greaterThanOrEqual:"greaterthanorequal",equal:"equal",contains:"contains",startsWith:"startswith",endsWith:"endswith",notEqual:"notequal"},t.data={},t.data.operatorSymbols={"<":"lessthan",">":"greaterthan","<=":"lessthanorequal",">=":"greaterthanorequal","==":"equal","!=":"notequal","*=":"contains","$=":"endswith","^=":"startswith"},t.data.odBiOperator={"<":" lt ",">":" gt ","<=":" le ",">=":" ge ","==":" eq ","!=":" ne ",lessthan:" lt ",lessthanorequal:" le ",greaterthan:" gt ",greaterthanorequal:" ge ",equal:" eq ",notequal:" ne "},t.data.odUniOperator={"$=":"endswith","^=":"startswith","*=":"substringof",endswith:"endswith",startswith:"startswith",contains:"substringof"},t.data.fnOperators={equal:function(e,t,i){return i?M(e)==M(t):e==t},notequal:function(e,i,s){return!t.data.fnOperators.equal(e,i,s)},lessthan:function(e,t,i){return i?M(e)<M(t):e<t},greaterthan:function(e,t,i){return i?M(e)>M(t):e>t},lessthanorequal:function(e,t,i){return i?M(e)<=M(t):e<=t},greaterthanorequal:function(e,t,i){return i?M(e)>=M(t):e>=t},contains:function(e,t,i){return i?!c(e)&&!c(t)&&-1!=M(e).indexOf(M(t)):!c(e)&&!c(t)&&-1!=e.toString().indexOf(t)},notnull:function(e){return null!==e},isnull:function(e){return null===e},startswith:function(e,t,i){return i?e&&t&&M(e).startsWith(M(t)):e&&t&&e.startsWith(t)},endswith:function(e,t,i){return i?e&&t&&M(e).endsWith(M(t)):e&&t&&e.endsWith(t)},processSymbols:function(e){var i,s=t.data.operatorSymbols[e];return s&&(i=t.data.fnOperators[s])?i:u("Query - Process Operator : Invalid operator")},processOperator:function(e){var i=t.data.fnOperators[e];return i||t.data.fnOperators.processSymbols(e)}},t.NotifierArray=function(i){return F(this,t.NotifierArray)?(this.array=i,this._events=e({}),this._isDirty=!1,this):new t.NotifierArray(i)},t.NotifierArray.prototype={on:function(e,t){this._events.on(e,t)},off:function(e,t){this._events.off(e,t)},push:function(e){var t;return t=F(e,Array)?[].push.apply(this.array,e):this.array.push(e),this._raise("add",{item:e,index:this.length()-1}),t},pop:function(){var e=this.array.pop();return this._raise("remove",{item:e,index:this.length()-1}),e},addAt:function(e,t){return this.array.splice(e,0,t),this._raise("add",{item:t,index:e}),t},removeAt:function(e){var t=this.array.splice(e,1)[0];return this._raise("remove",{item:t,index:e}),t},remove:function(e){var t=this.array.indexOf(e);return t>-1&&(this.array.splice(t,1),this._raise("remove",{item:e,index:t})),t},length:function(){return this.array.length},_raise:function(t,i){this._events.triggerHandler(e.extend({type:t},i)),this._events.triggerHandler({type:"all",name:t,args:i})},toArray:function(){return this.array}},e.extend(t,t.dataUtil),Array.prototype.forEach=Array.prototype.forEach||function(e,t){for(var i=0,s=this.length;i<s;++i)e.call(t,this[i],i,this)},Array.prototype.indexOf=Array.prototype.indexOf||function(e){var t,i=this.length;if(0===i)return-1;for(t=0;t<i;t++)if(t in this&&this[t]===e)return t;return-1},Array.prototype.filter=Array.prototype.filter||function(e){var t,i,s,l;if("function"!=typeof e)throw new TypeError;for(t=[],i=arguments[1]||this,s=0;s<this.length;s++)l=this[s],e.call(i,l,s,this)&&t.push(l);return t},String.prototype.endsWith=String.prototype.endsWith||function(e){return this.slice(-e.length)===e},String.prototype.startsWith=String.prototype.startsWith||function(e){return this.slice(0,e.length)===e},t.support||(t.support={}),t.support.stableSort=function(){for(var e=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16].sort(function(){return 0}),t=0;t<17;t++)if(t!==e[t])return!1;return!0}(),t.support.cors=e.support.cors,!e.support.cors&&window.XDomainRequest){var k=/^https?:\/\//i,I=/^get|post$/i,O=new RegExp("^"+location.protocol,"i"),R=/\/xml/i;e.ajaxTransport("text html xml json",function(e,t){if(e.crossDomain&&e.async&&I.test(e.type)&&k.test(t.url)&&O.test(t.url)){var i=null,l=(t.dataType||"").toLowerCase();return{send:function(n,o){i=new XDomainRequest,/^\d+$/.test(t.timeout)&&(i.timeout=t.timeout),i.ontimeout=function(){o(500,"timeout")},i.onload=function(){var e,t="Content-Length: "+i.responseText.length+"\r\nContent-Type: "+i.contentType,n={code:200,message:"success"},a={text:i.responseText};try{if("json"===l)try{a.json=JSON.parse(i.responseText)}catch(e){n.code=500,n.message="parseerror"}else if("xml"===l||"text"!==l&&R.test(i.contentType)){(e=new ActiveXObject("Microsoft.XMLDOM")).async=!1;try{e.loadXML(i.responseText)}catch(t){e=s}if(!e||!e.documentElement||e.getElementsByTagName("parsererror").length)throw n.code=500,n.message="parseerror","Invalid XML: "+i.responseText;a.xml=e}}catch(e){throw e}finally{o(n.code,n.message,a,t)}},i.onerror=function(){o(500,"error",{text:i.responseText})},-1!=navigator.userAgent.indexOf("MSIE 9.0")&&(i.onprogress=function(){}),i.open(e.type,e.url),i.send(t.data)},abort:function(){i&&i.abort()}}}})}e.support.cors=!0,t.sortOrder={Ascending:"ascending",Descending:"descending"},t.pvt.consts={GROUPGUID:"{271bbba0-1ee7}",complexPropertyMerge:"_"},r=function(e,t){t&&(e=h(e,t)),(window.setImmediate||window.setTimeout)(e,0)},t.support.enableLocalizedSort=!1;var N=function(e,i,s,l){return t.support.stableSort?t.support.enableLocalizedSort||"string"!=typeof t.pvt.getObject(i,e[0]||{})||s!==t.pvt.fnAscending&&s!==t.pvt.fnDescending||1!==l.filter(function(e){return"onSortBy"===e.fn}).length?e.sort(t.pvt.fnGetComparer(i,s)):A(e,i,s===t.pvt.fnDescending):t.mergeSort(e,i,s)},E=function(i,s){for(var l=e.grep(s,function(e){return"onGroup"==e.fn}),n=0;n<l.length;n++)if(t.getObject("fieldName",l[n].e)==i)return t.getObject("fn",l[n].e)},A=function(e,i,s){var l=Object.prototype.toString;Object.prototype.toString=-1===i.indexOf(".")?function(){return this[i]}:function(){return t.pvt.getObject(i,this)},e=e.sort(),Object.prototype.toString=l,s&&e.reverse()},M=function(e){return e?e.toLowerCase?e.toLowerCase():e.toString().toLowerCase():0===e||!1===e?e.toString():""},P=function(e,i,s){return i?t.pvt.getObject(i,e[s]):e[s]},L=function(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&1===e.nodeType&&"object"==typeof e&&"string"==typeof e.nodeName},F=function(e,t){return e instanceof t},j=function(e,i,s,l){return function(n){return"object"==typeof n&&(l=n,n=null),new t.TableModel(n||e,i,s,l)}},V=function(t){return function(i,s){var l,n,o,a,r;for((s=s||window.ko)||u("Knockout is undefined"),n=[],r=0;r<t.length;r++){for(o in l={},t[r])o.startsWith("_")||(l[o]=s.observable(t[r][o]));for(o in i)a=i[o],e.isPlainObject(a)?(a.owner||(a.owner=l),a=s.computed(a)):a=s.computed(a,l),l[o]=a;n.push(l)}return s.observableArray(n)}},z=0,H=function(e){return e+(z+=1)};t.getGuid=function(e){var t;return(e||"")+"00000000-0000-4000-0000-000000000000".replace(/0/g,function(e,i){if("crypto"in window&&"getRandomValues"in crypto){var s=new Uint8Array(1);window.crypto.getRandomValues(s),t=s[0]%16|0}else t=16*Math.random()|0;return"0123456789abcdef"[19===i?3&t|8:t]})},d=function(e,t){return function(){var i=[].slice.call(arguments,0);return i.push(this),e.apply(t||this,i)}},h=function(e,t,i){return"bind"in e?i?e.bind(t,i):e.bind(t):function(){var s=i?[i]:[];return s.push.apply(s,arguments),e.apply(t||this,s)}},t.merge=function(e,t){e&&t&&Array.prototype.push.apply(e,t)},c=function(e){return e===s||null===e},u=function(e){try{throw new Error(e)}catch(e){throw e.message+"\n"+e.stack}}}(window.jQuery,window.Syncfusion,window.document)}),
/*!
*  filename: ej.draggable.min.js
*  version : 14.4.0.15
*  Copyright Syncfusion Inc. 2001 - 2016. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
function(e){"function"==typeof define&&define.amd?define(["./ej.core.min"],e):e()}(function(){var e,t;e=jQuery,(t=Syncfusion).widget("ejDraggable","ej.Draggable",{element:null,model:null,validTags:["div","span","a"],defaults:{scope:"default",handle:null,dragArea:null,clone:!1,distance:1,dragOnTaphold:!1,cursorAt:{top:-1,left:-2},dragStart:null,drag:null,dragStop:null,create:null,destroy:null,helper:function(){return e('<div class="e-drag-helper" />').html("draggable").appendTo(document.body)}},_init:function(){this.handler=function(){},this.resizables={},helpers={},this._wireEvents(),this._browser=t.browserInfo(),this._isIE8="msie"==this._browser.name&&"8.0"==this._browser.version,this._isIE9="msie"==this._browser.name&&"9.0"==this._browser.version,"msie"==this._browser.name&&this.element.addClass("e-pinch")},_setModel:function(e){for(var t in e)switch(t){case"dragArea":this.model.dragArea=e[t];break;case"dragOnTaphold":this.model.dragOnTaphold=e[t]}},_destroy:function(){e(document).off(t.eventType.mouseUp,this._destroyHandler).off(t.eventType.mouseUp,this._dragStopHandler).off(t.eventType.mouseMove,this._dragStartHandler).off(t.eventType.mouseMove,this._dragHandler).off("mouseleave",this._dragMouseOutHandler).off("selectstart",!1),t.widgetBase.droppables[this.scope]=null},_initialize:function(i){var s,l=i;i.preventDefault(),i=this._getCoordinate(i),this.target=e(l.currentTarget),this._initPosition={x:i.pageX,y:i.pageY},e(document).on(t.eventType.mouseMove,this._dragStartHandler).on(t.eventType.mouseUp,this._destroyHandler),this.model.clone||(s=this.element.offset(),this._relXposition=i.pageX-s.left,this._relYposition=i.pageY-s.top),e(document.documentElement).trigger(t.eventType.mouseDown,l)},_setDragArea:function(){var i,s,l,n,o,a,r,d=e(this.model.dragArea)[0];if(d){if(n=["left","right","bottom","top"],t.isNullOrUndefined(d.getBoundingClientRect)){for(i=e(this.model.dragArea).outerWidth(),s=e(this.model.dragArea).outerHeight(),r=0;r<n.length;r++)this["border-"+n[r]+"-width"]=0,this["padding-"+n[r]]=0;o=a=0}else{for(i=(l=d.getBoundingClientRect()).width?l.width:l.right-l.left,s=l.height?l.height:l.bottom-l.top,r=0;r<n.length;r++)this["border-"+n[r]+"-width"]=isNaN(parseFloat(e(e(this.model.dragArea)[0]).css("border-"+n[r]+"-width")))?0:parseFloat(e(e(this.model.dragArea)[0]).css("border-"+n[r]+"-width")),this["padding-"+n[r]]=isNaN(parseFloat(e(e(this.model.dragArea)[0]).css("padding-"+n[r])))?0:parseFloat(e(e(this.model.dragArea)[0]).css("padding-"+n[r]));o=e(this.model.dragArea).offset().top,a=e(this.model.dragArea).offset().left}this._left=t.isNullOrUndefined(e(this.model.dragArea).offset())?0+this["border-left-width"]+this["padding-left"]:a+this["border-left-width"]+this["padding-left"],this._top=t.isNullOrUndefined(e(this.model.dragArea).offset())?0+this["border-top-width"]+this["padding-top"]:o+this["border-top-width"]+this["padding-top"],this._right=a+i-[this["border-right-width"]+this["padding-right"]],this._bottom=o+s-[this["border-bottom-width"]+this["padding-bottom"]]}},_dragStart:function(i){var s,l,n,o,a,r=i;i=this._getCoordinate(i),this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0},this.offset=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},this.position=this._getMousePosition(r);var d=this._initPosition.x-i.pageX,h=this._initPosition.y-i.pageY;if(Math.sqrt(d*d+h*h)>=this.model.distance){if(!(s=this.model.helper({sender:r,element:this.target}))||t.isNullOrUndefined(s))return;if(l=this.model.handle=this.helper=s,this.model.dragStart&&(n=null,"touchmove"==r.type?(o=r.originalEvent.changedTouches[0],n=document.elementFromPoint(o.clientX,o.clientY)):n=r.originalEvent.target||r.target,this._trigger("dragStart",{event:r,element:this.element,target:n})))return this._destroy(),!1;this.model.dragArea?this._setDragArea():(this._left=this._top=this._right=this._bottom=0,this["border-top-width"]=this["border-left-width"]=0),a=l.offsetParent().offset(),e(document).off(t.eventType.mouseMove,this._dragStartHandler).off(t.eventType.mouseUp,this._destroyHandler).on(t.eventType.mouseMove,this._dragHandler).on(t.eventType.mouseUp,this._dragStopHandler).on("mouseleave",this._dragMouseOutHandler).on("selectstart",!1),t.widgetBase.droppables[this.model.scope]={draggable:this.element,helper:l.css({position:"absolute",left:this.position.left-a.left,top:this.position.top-a.top}),destroy:this._destroyHandler}}},_drag:function(i){var s,l,n,o,a,r,d,h,c;i.preventDefault(),this.position=this._getMousePosition(i),this.position.top<0&&(this.position.top=0),e(document).height()<this.position.top&&(this.position.top=e(document).height()),e(document).width()<this.position.left&&(this.position.left=e(document).width()),h=t.widgetBase.droppables[this.model.scope].helper,this.model.drag&&(a=null,"touchmove"==i.type?(r=i.originalEvent.changedTouches[0],a=document.elementFromPoint(r.clientX,r.clientY)):a=i.originalEvent.target||i.target,this._trigger("drag",{event:i,element:this.target,target:a})),d=this._checkTargetElement(i),t.isNullOrUndefined(d)?this._hoverTarget&&(i.target=i.toElement=this._hoverTarget,this._hoverTarget.object._out(i),this._hoverTarget=null):(i.target=i.toElement=d,d.object._over(i),this._hoverTarget=d),c=(h=t.widgetBase.droppables[this.model.scope].helper).offsetParent().offset(),n=t.isNullOrUndefined(i.pageX)?i.originalEvent.changedTouches[0].pageX:i.pageX,o=t.isNullOrUndefined(i.pageY)?i.originalEvent.changedTouches[0].pageY:i.pageY,this.model.dragArea?(this._pageX!=n&&(s=this._left>this.position.left?this._left:this._right<this.position.left+h.outerWidth(!0)?this._right-h.outerWidth(!0):this.position.left),this._pageY!=o&&(l=this._top>this.position.top?this._top:this._bottom<this.position.top+h.outerHeight(!0)?this._bottom-h.outerHeight(!0):this.position.top)):(s=this.position.left,l=this.position.top),(l<0||l-[c.top+this["border-top-width"]]<0)&&(l=[c.top+this["border-top-width"]]),(s<0||s-[c.left+this["border-left-width"]]<0)&&(s=[c.left+this["border-left-width"]]),h.css({left:s-[c.left+this["border-left-width"]],top:l-[c.top+this["border-top-width"]]}),this.position.left=s,this.position.top=l,this._pageX=n,this._pageY=o},_dragStop:function(e){var t,i;("mouseup"==e.type||"touchend"==e.type)&&this._destroy(e),this.model.dragStop&&(t=null,"touchend"==e.type?(i=e.originalEvent.changedTouches[0],t=document.elementFromPoint(i.clientX,i.clientY)):t=e.originalEvent.target||e.target,this._trigger("dragStop",{event:e,element:this.target,target:t})),this._dragEnd(e)},_dragEnd:function(e){var i=this._checkTargetElement(e);t.isNullOrUndefined(i)||(e.target=e.toElement=i,i.object._drop(e))},_dragMouseEnter:function(t){e(document).off("mouseenter",this._dragMouseEnterHandler),this._isIE9?this._dragManualStop(t):this._isIE8?0==t.button&&this._dragManualStop(t):0==t.buttons&&this._dragManualStop(t)},_dragManualStop:function(e){null!=this.model.dragStop&&this._trigger("dragStop",{event:e,element:this.target,target:e.originalEvent.target||e.target}),this._destroy(e)},_dragMouseOut:function(){e(document).on("mouseenter",this._dragMouseEnterHandler)},_checkTargetElement:function(e){var t=e.target;return this.helper&&this._contains(this.helper[0],t)?(this.helper.hide(),t=this._elementUnderCursor(e),this.helper.show(),this._withDropElement(t)):this._withDropElement(t)},_withDropElement:function(i){if(i&&(dropObj=e(i).data("ejDroppable"),t.isNullOrUndefined(dropObj)&&(dropObj=this._checkParentElement(e(i))),!t.isNullOrUndefined(dropObj)))return e.extend(i,{object:dropObj})},_checkParentElement:function(i){var s=e(i).closest(".e-droppable");if(s.length>0&&(dropObj=e(s).data("ejDroppable"),!t.isNullOrUndefined(dropObj)))return dropObj},_elementUnderCursor:function(e){return"touchmove"==e.type||"touchstart"==e.type||"touchend"==e.type||"taphold"==e.type?document.elementFromPoint(e.originalEvent.changedTouches[0].clientX,e.originalEvent.changedTouches[0].clientY):document.elementFromPoint(e.clientX,e.clientY)},_contains:function(t,i){try{return e.contains(t,i)||t==i}catch(e){return!1}},_wireEvents:function(){1==t.isDevice()&&1==this.model.dragOnTaphold?this._on(this.element,"taphold",this._initialize):this._on(this.element,t.eventType.mouseDown,this._initialize),this._dragStartHandler=e.proxy(this._dragStart,this),this._destroyHandler=e.proxy(this._destroy,this),this._dragStopHandler=e.proxy(this._dragStop,this),this._dragHandler=e.proxy(this._drag,this),this._dragMouseEnterHandler=e.proxy(this._dragMouseEnter,this),this._dragMouseOutHandler=e.proxy(this._dragMouseOut,this)},_getMousePosition:function(e){e=this._getCoordinate(e);var t=this.model.clone?e.pageX:e.pageX-this._relXposition,i=this.model.clone?e.pageY:e.pageY-this._relYposition;return{left:t-[this.margins.left+this.model.cursorAt.left],top:i-[this.margins.top+this.model.cursorAt.top]}},_getCoordinate:function(e){var i=e;return("touchmove"==e.type||"touchstart"==e.type||"touchend"==e.type||"taphold"==e.type&&"msie"!=t.browserInfo().name)&&(i=e.originalEvent.changedTouches[0]),i}}),function(e,t){t.widget("ejDroppable","ej.Droppable",{element:null,model:null,validTags:["div","span","a"],defaults:{accept:null,scope:"default",drop:null,over:null,out:null,create:null,destroy:null},_init:function(){this.model.accept?e(this.element).delegate(this.accept,"mouseup",e.proxy(this._drop,this)):e(this.element).on("mouseup",e.proxy(this._drop,this)),this._on(e(document),"touchend",this._drop),this._mouseOver=!1},_setModel:function(){},_destroy:function(){e(this.element).off("mouseup",e.proxy(this._drop,this))},_over:function(e){this._mouseOver||(this._trigger("over",e),this._mouseOver=!0)},_out:function(e){this._mouseOver&&(this._trigger("out",e),this._mouseOver=!1)},_drop:function(i){var s=t.widgetBase.droppables[this.model.scope],l=!t.isNullOrUndefined(s.helper)&&s.helper.is(":visible"),n=this._isDropArea(i);s&&!t.isNullOrUndefined(this.model.drop)&&l&&n.canDrop&&this.model.drop(e.extend(i,{dropTarget:n.target},!0),s)},_isDropArea:function(t){var i,s,l,n,o,a={canDrop:!0,target:e(t.target)};if("touchend"==t.type)for(i=t.originalEvent.changedTouches[0],s=document.elementFromPoint(i.clientX,i.clientY),a.canDrop=!1,l=e(s).parents(),n=0;n<this.element.length;n++){if(e(s).is(e(this.element[n])))a={canDrop:!0,target:e(s)};else for(o=0;o<l.length;o++)if(e(this.element[n]).is(e(l[o]))){a={canDrop:!0,target:e(s)};break}if(a.canDrop)break}return a}})}(jQuery,Syncfusion),function(e,t){t.widget("ejResizable","ej.resizable",{element:null,model:null,validTags:["div","span","a"],defaults:{scope:"default",handle:null,distance:1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,cursorAt:{top:1,left:1},resizeStart:null,resize:null,resizeStop:null,create:null,destroy:null,helper:function(){return e('<div class="e-resize-helper" />').html("resizable").appendTo(document.body)}},_init:function(){this.target=this.element,this._browser=t.browserInfo(),this._isIE8="msie"==this._browser.name&&"8.0"==this._browser.version,this._isIE9="msie"==this._browser.name&&"9.0"==this._browser.version,null!=this.handle?e(this.target).delegate(this.handle,t.eventType.mouseDown,e.proxy(this._mousedown,this)).delegate(this.handle,"resizestart",this._blockDefaultActions):e(this.target).on("mousedown",e.proxy(this._mousedown,this)),this._resizeStartHandler=e.proxy(this._resizeStart,this),this._destroyHandler=e.proxy(this._destroy,this),this._resizeStopHandler=e.proxy(this._resizeStop,this),this._resizeHandler=e.proxy(this._resize,this),this._resizeMouseEnterHandler=e.proxy(this._resizeMouseEnter,this)},_mouseover:function(i){e(i.target).hasClass("e-resizable")?(e(i.target).css({cursor:"se-resize"}),e(this.target).on(t.eventType.mouseDown,e.proxy(this._mousedown,this))):(e(this.target).off(t.eventType.mouseDown),e(this.target).css({cursor:""}))},_blockDefaultActions:function(e){e.cancelBubble=!0,e.returnValue=!1,e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation()},_setModel:function(){},_mousedown:function(i){var s=i;return i=this._getCoordinate(i),this.target=e(s.currentTarget),this._initPosition={x:i.pageX,y:i.pageY},this._pageX=i.pageX,this._pageY=i.pageY,e(document).on(t.eventType.mouseMove,this._resizeStartHandler).on(t.eventType.mouseUp,this._destroyHandler),e(document.documentElement).trigger(t.eventType.mouseDown,s),!1},_resizeStart:function(i){var s;if(e(i.target).hasClass("e-resizable")){i=this._getCoordinate(i);var l,n,o=this._initPosition.x-i.pageX,a=this._initPosition.y-i.pageY;if(Math.sqrt(o*o+a*a)>=this.model.distance){if(null!=this.model.resizeStart&&this._trigger("resizeStart",{event:i,element:this.target}))return;s=this.model.helper({element:this.target}),l=i.pageX-this._pageX+s.outerWidth(),n=i.pageY-this._pageY+s.outerHeight(),this._pageX=i.pageX,this._pageY=i.pageY,this.getElementPosition(s),e(document).off(t.eventType.mouseMove,this._resizeStartHandler).off(t.eventType.mouseUp,this._destroyHandler).on(t.eventType.mouseMove,this._resizeHandler).on(t.eventType.mouseUp,this._resizeStopHandler).on("mouseenter",this._resizeMouseEnterHandler).on("selectstart",!1),t.widgetBase.resizables[this.scope]={resizable:this.target,helper:s.css({width:l,height:n}),destroy:this._destroyHandler}}}},_resize:function(e){var i,s,l,n;e=this._getCoordinate(e),this.getElementPosition(t.widgetBase.resizables[this.scope].helper),n=this.model.helper({element:this.target}),i=e.pageX-this._pageX+n.outerWidth(),s=e.pageY-this._pageY+n.outerHeight(),this._pageX=e.pageX,this._pageY=e.pageY,i<this.model.minWidth&&(l=this.model.minWidth-i,i=this.model.minWidth,this._pageX=e.pageX+l),s<this.model.minHeight&&(l=this.model.minHeight-s,s=this.model.minHeight,this._pageY=e.pageY+l),null!=this.model.maxHeight&&s>this.model.maxHeight&&(l=s-this.model.maxHeight,s=this.model.maxHeight,this._pageY=e.pageY-l),null!=this.model.maxWidth&&i>this.model.maxWidth&&(l=i-this.model.maxWidth,i=this.model.maxWidth,this._pageX=e.pageX-l),t.widgetBase.resizables[this.scope].helper.css({width:i,height:s}),this._trigger("resize",{element:this.target})},_resizeStop:function(e){null!=this.model.resizeStop&&this._trigger("resizeStop",{element:this.target}),("mouseup"==e.type||"touchend"==e.type)&&this._destroy(e)},_resizeMouseEnter:function(e){this._isIE9?this._resizeManualStop(e):this._isIE8?0==e.button&&this._resizeManualStop(e):0==e.buttons&&this._resizeManualStop(e)},_resizeManualStop:function(e){null!=this.model.resizeStop&&this._trigger("resizeStop",{element:this.target}),this._destroy(e)},_destroy:function(){e(document).off(t.eventType.mouseUp,this._destroyHandler).off(t.eventType.mouseUp,this._resizeStopHandler).off(t.eventType.mouseMove,this._resizeStartHandler).off(t.eventType.mouseMove,this._resizeHandler).off("mouseenter",this._resizeMouseEnterHandler).off("selectstart",!1),t.widgetBase.resizables[this.scope]=null},getElementPosition:function(e){return null!=e&&e.length>0?{left:e[0].offsetLeft,top:e[0].offsetTop}:null},_getCoordinate:function(e){var t=e;return("touchmove"==e.type||"touchstart"==e.type||"touchend"==e.type)&&(t=e.originalEvent.changedTouches[0]),t}})}(jQuery,Syncfusion)}),
/*!
*  filename: ej.globalize.min.js
*  version : 14.4.0.15
*  Copyright Syncfusion Inc. 2001 - 2016. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
function(e){"function"==typeof define&&define.amd?define(["./ej.core.min"],e):e()}(function(){!function(e){function t(e,t){return 0===e.indexOf(t)}function i(e,t){return e.substr(e.length-t.length)===t}function s(e){return(e+"").replace(w,"")}function l(e,t,i){for(var s=e.length;s<t;s++)e=i?"0"+e:e+"0";return e}function n(e,s,l){var n,o=s["-"],a=s["+"];switch(l){case"n -":o=" "+o,a=" "+a;case"n-":i(e,o)?n=["-",e.substr(0,e.length-o.length)]:i(e,a)&&(n=["+",e.substr(0,e.length-a.length)]);break;case"- n":o+=" ",a+=" ";case"-n":t(e,o)?n=["-",e.substr(o.length)]:t(e,a)&&(n=["+",e.substr(a.length)]);break;case"(n)":t(e,"(")&&i(e,")")&&(n=["-",e.substr(1,e.length-2)])}return n||["",e]}function o(e,t,i){var s,n;if(!t||"i"===t)return i.name.length?e.toLocaleString():e.toString();t=t||"D";var o,a=i.numberFormat,r=Math.abs(e),d=-1;switch(t.length>1&&(d=parseInt(t.slice(1),10)),s=t.charAt(0).toUpperCase()){case"D":o="n",r=function(e){return isNaN(e)?NaN:Math[e<0?"ceil":"floor"](e)}(r),-1!==d&&(r=l(""+r,d,!0)),e<0&&(r=-r);break;case"N":(n=a).pattern=n.pattern||["-n"];case"C":(n=n||a.currency).pattern=n.pattern||["-$n","$n"];case"P":(n=n||a.percent).pattern=n.pattern||["-n %","n %"],o=e<0?n.pattern[0]||"-n":n.pattern[1]||"n",-1===d&&(d=n.decimals),r=function(e,t,i){var s,n=i.groupSizes||[3],o=n[0],a=1,r=Math.pow(10,t),d=Math.round(e*r)/r;isFinite(d)||(d=e);var h=(e=d)+"",c="",u=h.split(/e/i),m=u.length>1?parseInt(u[1],10):0;u=(h=u[0]).split("."),h=u[0],c=u.length>1?u[1]:"",m>0?(h+=(c=l(c,m,!1)).slice(0,m),c=c.substr(m)):m<0&&(c=(h=l(h,1+(m=-m))).slice(-m,h.length)+c,h=h.slice(0,-m)),s=i["."]||".",c=t>0?s+(c.length>t?c.slice(0,t):l(c,t)):"";for(var p=h.length-1,g=i[","]||",",f="";p>=0;){if(0===o||o>p)return h.slice(0,p+1)+(f.length?g+f+c:c);f=h.slice(p-o+1,p+1)+(f.length?g+f:""),p-=o,a<n.length&&(o=n[a],a++)}return h.slice(0,p+1)+g+f+c}(r*("P"===s?100:1),d,n);break;default:throw"Bad number format specifier: "+s}return function(e,t,i){for(var s,l,n=/n|\$|-|%/g,o="";s=n.lastIndex,l=n.exec(t),o+=t.slice(s,l?l.index:t.length),l;)switch(l[0]){case"n":o+=e;break;case"$":o+=i.currency.symbol||"$";break;case"-":/[1-9]/.test(e)&&(o+=i["-"]||"-");break;case"%":o+=i.percent.symbol||"%"}return o}(r,o,a)}function a(e,t,i){return e<t||e>i}function r(e,t){var i,s,l=new Date;return t<100&&(i="string"==typeof(i=e.twoDigitYearMax)?(new Date).getFullYear()%100+parseInt(i,10):i,(t+=(s=l.getFullYear())-s%100)>i&&(t-=100)),t}function d(e,t){if(e.indexOf)return e.indexOf(t);for(var i=0,s=e.length;i<s;i++)if(e[i]===t)return i;return-1}function h(e){return e.split("").join(" ").toUpperCase()}function c(e){for(var t=[],i=0,s=e.length;i<s;i++)t[i]=h(e[i]);return t}function u(e,t,i){var s,l=e.days,n=e._upperDays;return n||(e._upperDays=n=[c(l.names),c(l.namesAbbr),c(l.namesShort)]),t=h(t),i?-1===(s=d(n[1],t))&&(s=d(n[2],t)):s=d(n[0],t),s}function m(e,t,i){var s,l=e.months,n=e.monthsGenitive||e.months,o=e._upperMonths,a=e._upperMonthsGen;return o||(e._upperMonths=o=[c(l.names),c(l.namesAbbr)],e._upperMonthsGen=a=[c(n.names),c(n.namesAbbr)]),t=h(t),(s=d(i?o[1]:o[0],t))<0&&(s=d(i?a[1]:a[0],t)),s}function p(e,t){for(var i,s=0,l=!1,n=0,o=e.length;n<o;n++)"'"==(i=e.charAt(n))?(l?t.push("'"):s++,l=!1):"\\"==i?(l&&t.push("\\"),l=!l):(t.push(i),l=!1);return s}function g(e,t,i,s){if(!e)return null;var l=0,n=0,o=null;t=t.split(""),length=t.length;for(var a=function(e){for(var i=0;t[l]===e;)i++,l++;return i>0&&(l-=1),i},r=function(t){var i=new RegExp("^\\d{1,"+t+"}"),s=e.substr(n,t).match(i);return s?(s=s[0],n+=s.length,parseInt(s,10)):null},d=function(t,i){for(var s,l,o,a=0,r=t.length;a<r;a++)if(l=(s=t[a]).length,o=e.substr(n,l),i&&(o=o.toLowerCase()),o==s)return n+=l,a+1;return null},h=function(e){for(var t=0,i=e.length,s=[];t<i;t++)s[t]=(e[t]+"").toLowerCase();return s},c=function(e){var t={};for(var i in e)t[i]=h(e[i]);return t};l<length;l++)ch=t[l],"d"===ch&&(count=a("d"),s._lowerDays||(s._lowerDays=c(s.days)),o=count<3?r(2):d(s._lowerDays[3==count?"namesAbbr":"names"],!0));return o}function f(e,t){t=t||"F";var i,s=e.patterns,l=t.length;if(1===l){if(!(i=s[t]))throw"Invalid date format string '"+t+"'.";t=i}else 2===l&&"%"===t.charAt(0)&&(t=t.charAt(1));return t}function _(e,i,l){var n,o,d,h,c,p,f,_,v;e=s(e),i=s(i);var b=l.calendar,w=ej.globalize._getDateParseRegExp(b,i),y=new RegExp(w.regExp).exec(e);if(null===y)return null;var S,x=w.groups,T=null,D=null,k=null,I=null,O=0,R=0,N=0,E=0,A=null,M=!1;for(n=0,o=x.length;n<o;n++)if(d=y[n+1]){var P=x[n],L=P.length,F=parseInt(d,10);switch(P){case C.DAY_OF_MONTH_DOUBLE_DIGIT:case C.DAY_OF_MONTH_SINGLE_DIGIT:if(a(k=F,1,31))return null;break;case C.MONTH_THREE_LETTER:case C.MONTH_FULL_NAME:if(a(D=m(b,d,3===L),0,11))return null;break;case C.MONTH_SINGLE_DIGIT:case C.MONTH_DOUBLE_DIGIT:if(a(D=F-1,0,11))return null;break;case C.YEAR_SINGLE_DIGIT:case C.YEAR_DOUBLE_DIGIT:case C.YEAR_FULL:if(a(T=L<4?r(b,F):F,0,9999))return null;break;case C.HOURS_SINGLE_DIGIT_12_HOUR_CLOCK:case C.HOURS_DOUBLE_DIGIT_12_HOUR_CLOCK:if(12===(O=F)&&(O=0),a(O,0,11))return null;break;case C.HOURS_SINGLE_DIGIT_24_HOUR_CLOCK:case C.HOURS_DOUBLE_DIGIT_24_HOUR_CLOCK:if(a(O=F,0,23))return null;break;case C.MINUTES_SINGLE_DIGIT:case C.MINUTES_DOUBLE_DIGIT:if(a(R=F,0,59))return null;break;case C.SECONDS_SINGLE_DIGIT:case C.SECONDS_DOUBLE_DIGIT:if(a(N=F,0,59))return null;break;case C.MERIDIAN_INDICATOR_FULL:case C.MERIDIAN_INDICATOR_SINGLE:if(!(M=b.PM&&(d===b.PM[0]||d===b.PM[1]||d===b.PM[2]))&&(!b.AM||d!==b.AM[0]&&d!==b.AM[1]&&d!==b.AM[2]))return null;break;case C.DECISECONDS:case C.CENTISECONDS:case C.MILLISECONDS:if(a(E=F*Math.pow(10,3-L),0,999))return null;break;case C.DAY_OF_WEEK_THREE_LETTER:k=g(e,i,0,b);break;case C.DAY_OF_WEEK_FULL_NAME:if(u(b,d,3===L),a(I,0,6))return null;break;case C.TIME_ZONE_OFFSET_FULL:if(2!==(h=d.split(/:/)).length||a(S=parseInt(h[0],10),-12,13)||a(c=parseInt(h[1],10),0,59))return null;A=60*S+(t(d,"-")?-c:c);break;case C.TIME_ZONE_OFFSET_SINGLE_DIGIT:case C.TIME_ZONE_OFFSET_DOUBLE_DIGIT:if(a(S=F,-12,13))return null;A=60*S}}if(p=new Date,f=(_=b.convert)?_.fromGregorian(p)[0]:p.getFullYear(),null===T&&(T=f),null===D&&(D=0),null===k&&(k=1),_){if(null===(p=_.toGregorian(T,D,k)))return null}else if(p.setFullYear(T,D,k),p.getDate()!==k)return null;return M&&O<12&&(O+=12),p.setHours(O,R,N,E),null!==A&&(v=p.getMinutes()-(A+p.getTimezoneOffset()),p.setHours(p.getHours()+parseInt(v/60,10),v%60)),p}function v(e,t,i){function s(e,t){var i,s=e+"";return t>1&&s.length<t?(i=w[t-2]+s).substr(i.length-t,t):s}function l(){return g||_||(g=y.test(t),_=!0),g}var n,o,a,r,d,h,c=i.calendar,u=c.convert;if(!t||!t.length||"i"===t)return i&&i.name.length?u?v(e,c.patterns.F,i):e.toLocaleString():e.toString();o="s"===t,t=f(c,t),n=[];var m,g,_,b,w=["0","00","000"],y=/([^d]|^)(d|dd)([^d]|$)/g,S=0,x=/\/|dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|y|hh|h|HH|H|mm|m|ss|s|tt|t|fff|ff|f|zzz|zz|z|gg|g/g;for(!o&&u&&(b=u.fromGregorian(e));;){var T=x.lastIndex,D=x.exec(t);if(S+=p(t.slice(T,D?D.index:t.length),n),!D)break;if(S%2)n.push(D[0]);else switch(r=(a=D[0]).length,a){case C.DAY_OF_WEEK_THREE_LETTER:case C.DAY_OF_WEEK_FULL_NAME:d=3===r?c.days.namesAbbr:c.days.names,n.push(d[e.getDay()]);break;case C.DAY_OF_MONTH_SINGLE_DIGIT:case C.DAY_OF_MONTH_DOUBLE_DIGIT:g=!0,n.push(s(b?b[2]:e.getDate(),r));break;case C.MONTH_THREE_LETTER:case C.MONTH_FULL_NAME:h=b?b[1]:e.getMonth(),n.push(c.monthsGenitive&&l()?c.monthsGenitive[3===r?"namesAbbr":"names"][h]:c.months[3===r?"namesAbbr":"names"][h]);break;case C.MONTH_SINGLE_DIGIT:case C.MONTH_DOUBLE_DIGIT:n.push(s((b?b[1]:e.getMonth())+1,r));break;case C.YEAR_SINGLE_DIGIT:case C.YEAR_DOUBLE_DIGIT:case C.YEAR_FULL:h=b?b[0]:e.getFullYear(),r<4&&(h%=100),n.push(s(h,r));break;case C.HOURS_SINGLE_DIGIT_12_HOUR_CLOCK:case C.HOURS_DOUBLE_DIGIT_12_HOUR_CLOCK:0===(m=e.getHours()%12)&&(m=12),n.push(s(m,r));break;case C.HOURS_SINGLE_DIGIT_24_HOUR_CLOCK:case C.HOURS_DOUBLE_DIGIT_24_HOUR_CLOCK:n.push(s(e.getHours(),r));break;case C.MINUTES_SINGLE_DIGIT:case C.MINUTES_DOUBLE_DIGIT:n.push(s(e.getMinutes(),r));break;case C.SECONDS_SINGLE_DIGIT:case C.SECONDS_DOUBLE_DIGIT:n.push(s(e.getSeconds(),r));break;case C.MERIDIAN_INDICATOR_SINGLE:case C.MERIDIAN_INDICATOR_FULL:h=e.getHours()<12?c.AM?c.AM[0]:" ":c.PM?c.PM[0]:" ",n.push(1===r?h.charAt(0):h);break;case C.DECISECONDS:case C.CENTISECONDS:case C.MILLISECONDS:n.push(s(e.getMilliseconds(),3).substr(0,r));break;case C.TIME_ZONE_OFFSET_SINGLE_DIGIT:case C.TIME_ZONE_OFFSET_DOUBLE_DIGIT:m=e.getTimezoneOffset()/60,n.push((m<=0?"+":"-")+s(Math.floor(Math.abs(m)),r));break;case C.TIME_ZONE_OFFSET_FULL:m=e.getTimezoneOffset()/60,n.push((m<=0?"+":"-")+s(Math.floor(Math.abs(m)),2)+":"+s(Math.abs(e.getTimezoneOffset()%60),2));break;case C.DATE_SEPARATOR:n.push(c["/"]||"/");break;default:throw"Invalid date format pattern '"+a+"'."}}return n.join("")}function b(e,t){return t.length?b(e[t[0]],t.slice(1)):e}var C;ej.globalize={},ej.cultures={},ej.cultures.default=ej.cultures["en-US"]=e.extend(!0,{name:"en-US",englishName:"English",nativeName:"English",language:"en",isRTL:!1,numberFormat:{pattern:["-n"],decimals:2,",":",",".":".",groupSizes:[3],"+":"+","-":"-",percent:{pattern:["-n %","n %"],decimals:2,groupSizes:[3],",":",",".":".",symbol:"%"},currency:{pattern:["($n)","$n"],decimals:2,groupSizes:[3],",":",",".":".",symbol:"$"}},calendars:{standard:{"/":"/",":":":",firstDay:0,days:{names:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],namesAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],namesShort:["Su","Mo","Tu","We","Th","Fr","Sa"]},months:{names:["January","February","March","April","May","June","July","August","September","October","November","December",""],namesAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",""]},AM:["AM","am","AM"],PM:["PM","pm","PM"],twoDigitYearMax:2029,patterns:{d:"M/d/yyyy",D:"dddd, MMMM dd, yyyy",t:"h:mm tt",T:"h:mm:ss tt",f:"dddd, MMMM dd, yyyy h:mm tt",F:"dddd, MMMM dd, yyyy h:mm:ss tt",M:"MMMM dd",Y:"yyyy MMMM",S:"yyyy'-'MM'-'dd'T'HH':'mm':'ss"}}}},ej.cultures["en-US"]),ej.cultures["en-US"].calendar=ej.cultures["en-US"].calendar||ej.cultures["en-US"].calendars.standard;var w=/^\s+|\s+$/g,y=/^[+-]?infinity$/i,S=/^0x[a-f0-9]+$/i,x=/^[+-]?\d*\.?\d*(e[+-]?\d+)?$/;C={DAY_OF_WEEK_THREE_LETTER:"ddd",DAY_OF_WEEK_FULL_NAME:"dddd",DAY_OF_MONTH_SINGLE_DIGIT:"d",DAY_OF_MONTH_DOUBLE_DIGIT:"dd",MONTH_THREE_LETTER:"MMM",MONTH_FULL_NAME:"MMMM",MONTH_SINGLE_DIGIT:"M",MONTH_DOUBLE_DIGIT:"MM",YEAR_SINGLE_DIGIT:"y",YEAR_DOUBLE_DIGIT:"yy",YEAR_FULL:"yyyy",HOURS_SINGLE_DIGIT_12_HOUR_CLOCK:"h",HOURS_DOUBLE_DIGIT_12_HOUR_CLOCK:"hh",HOURS_SINGLE_DIGIT_24_HOUR_CLOCK:"H",HOURS_DOUBLE_DIGIT_24_HOUR_CLOCK:"HH",MINUTES_SINGLE_DIGIT:"m",MINUTES_DOUBLE_DIGIT:"mm",SECONDS_SINGLE_DIGIT:"s",SECONDS_DOUBLE_DIGIT:"ss",MERIDIAN_INDICATOR_SINGLE:"t",MERIDIAN_INDICATOR_FULL:"tt",DECISECONDS:"f",CENTISECONDS:"ff",MILLISECONDS:"fff",TIME_ZONE_OFFSET_SINGLE_DIGIT:"z",TIME_ZONE_OFFSET_DOUBLE_DIGIT:"zz",TIME_ZONE_OFFSET_FULL:"zzz",DATE_SEPARATOR:"/"},ej.globalize._getDateParseRegExp=function(e,t){var i,s,l,n,o,a,r=e._parseRegExp;if(r){if(i=r[t])return i}else e._parseRegExp=r={};for(var d,h=f(e,t).replace(/([\^\$\.\*\+\?\|\[\]\(\)\{\}])/g,"\\\\$1"),c=["^"],u=[],m=0,g=0,_=/\/|dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|y|hh|h|HH|H|mm|m|ss|s|tt|t|fff|ff|f|zzz|zz|z|gg|g/g;null!==(d=_.exec(h));)if(s=h.slice(m,d.index),m=_.lastIndex,(g+=p(s,c))%2)c.push(d[0]);else{switch(n=(l=d[0]).length,l){case C.DAY_OF_WEEK_THREE_LETTER:case C.DAY_OF_WEEK_FULL_NAME:case C.MONTH_FULL_NAME:case C.MONTH_THREE_LETTER:o="(\\D+)";break;case C.MERIDIAN_INDICATOR_FULL:case C.MERIDIAN_INDICATOR_SINGLE:o="(\\D*)";break;case C.YEAR_FULL:case C.MILLISECONDS:case C.CENTISECONDS:case C.DECISECONDS:o="(\\d{"+n+"})";break;case C.DAY_OF_MONTH_DOUBLE_DIGIT:case C.DAY_OF_MONTH_SINGLE_DIGIT:case C.MONTH_DOUBLE_DIGIT:case C.MONTH_SINGLE_DIGIT:case C.YEAR_DOUBLE_DIGIT:case C.YEAR_SINGLE_DIGIT:case C.HOURS_DOUBLE_DIGIT_24_HOUR_CLOCK:case C.HOURS_SINGLE_DIGIT_24_HOUR_CLOCK:case C.HOURS_DOUBLE_DIGIT_12_HOUR_CLOCK:case C.HOURS_SINGLE_DIGIT_12_HOUR_CLOCK:case C.MINUTES_DOUBLE_DIGIT:case C.MINUTES_SINGLE_DIGIT:case C.SECONDS_DOUBLE_DIGIT:case C.SECONDS_SINGLE_DIGIT:o="(\\d\\d?)";break;case C.TIME_ZONE_OFFSET_FULL:o="([+-]?\\d\\d?:\\d{2})";break;case C.TIME_ZONE_OFFSET_DOUBLE_DIGIT:case C.TIME_ZONE_OFFSET_SINGLE_DIGIT:o="([+-]?\\d\\d?)";break;case C.DATE_SEPARATOR:o="(\\"+e["/"]+")";break;default:throw"Invalid date format pattern '"+l+"'."}o&&c.push(o),u.push(d[0])}return p(h.slice(m),c),c.push("$"),a={regExp:c.join("").replace(/\s+/g,"\\s+"),groups:u},r[t]=a},ej.globalize.addCulture=function(t,i){ej.cultures[t]=e.extend(!0,e.extend(!0,{},ej.cultures.default,i),ej.cultures[t]),ej.cultures[t].calendar=ej.cultures[t].calendars.standard},ej.globalize.preferredCulture=function(e){return e=void 0!==e&&typeof e==typeof this.cultureObject?e.name:e,this.cultureObject=ej.globalize.findCulture(e),this.cultureObject},ej.globalize.setCulture=function(e){return ej.isNullOrUndefined(this.globalCultureObject)&&(this.globalCultureObject=ej.globalize.findCulture(e)),(e=void 0!==e&&typeof e==typeof this.globalCultureObject?e.name:e)&&(this.globalCultureObject=ej.globalize.findCulture(e)),ej.cultures.current=this.globalCultureObject,this.globalCultureObject},ej.globalize.culture=function(e){ej.cultures.current=ej.globalize.findCulture(e)},ej.globalize.findCulture=function(t){var i,s,l,n,o;if(t){if(e.isPlainObject(t)&&t.numberFormat&&(i=t),"string"==typeof t){if((s=ej.cultures)[t])return s[t];if(t.indexOf("-")>-1){if(s[l=t.split("-")[0]])return s[l]}else for(n=e.map(s,function(e){return e}),o=0;o<n.length;o++)if(n[o].name.split("-")[0]===t)return n[o];return ej.cultures.default}}else i=ej.cultures.current||ej.cultures.default;return i},ej.globalize.format=function(e,t,i){var s=ej.globalize.findCulture(i);return"number"==typeof e?e=o(e,t,s):e instanceof Date&&(e=v(e,t,s)),e},ej.globalize.parseInt=function(e,t,i){return Math.floor(this.parseFloat(e,t,i))},ej.globalize.parseFloat=function(e,t,i){var l,o,a,r,d,h,c,u,m,p,g;"string"==typeof t&&(i=t,t=10);var f=NaN,_=(i=ej.globalize.findCulture(i)).numberFormat,v=i.numberFormat.pattern[0];if((e=e.replace(/ /g,"")).indexOf(i.numberFormat.currency.symbol)>-1?(e=(e=e.replace(i.numberFormat.currency.symbol||"$","")).replace(i.numberFormat.currency["."]||".",i.numberFormat["."]||"."),v=s(i.numberFormat.currency.pattern[0].replace("$",""))):e.indexOf(i.numberFormat.percent.symbol)>-1&&(e=(e=e.replace(i.numberFormat.percent.symbol||"%","")).replace(i.numberFormat.percent["."]||".",i.numberFormat["."]||"."),v=s(i.numberFormat.percent.pattern[0].replace("%",""))),e=s(e),y.test(e))f=parseFloat(e,t);else if(!t&&S.test(e))f=parseInt(e,16);else{var b=n(e,_,v),C=b[0],w=b[1];""===C&&"-n"!==_.pattern[0]&&(C=(b=n(e,_,"-n"))[0],w=b[1]),C=C||"+",(a=w.indexOf("e"))<0&&(a=w.indexOf("E")),a<0?(o=w,l=null):(o=w.substr(0,a),l=w.substr(a+1)),h=_["."]||".",(c=o.indexOf(h))<0?(r=o,d=null):(r=o.substr(0,c),d=o.substr(c+h.length)),u=_[","]||",",r=r.split(u).join(""),m=u.replace(/\u00A0/g," "),u!==m&&(r=r.split(m).join("")),p=C+r,null!==d&&(p+="."+d),null!==l&&(p+="e"+((g=n(l,_,v))[0]||"+")+g[1]),x.test(p)&&(f=parseFloat(p))}return f},ej.globalize.parseDate=function(e,t,i){var s,l,n,o,a,r;if(i=ej.globalize.findCulture(i),t){if("string"==typeof t&&(t=[t]),t.length)for(o=0,a=t.length;o<a&&(!(r=t[o])||!(s=_(e,r,i)));o++);}else for(l in n=i.calendar.patterns)if(s=_(e,n[l],i))break;return s||null},ej.globalize.getLocalizedConstants=function(t,i){var s,l=t.replace("ej.","").split(".");return s=b(ej,l),e.extend(!0,{},s.Locale.default,s.Locale[i||this.cultureObject.name])},e.extend(ej,ej.globalize)}(jQuery)}),
/*!
*  filename: ej.scroller.min.js
*  version : 14.4.0.15
*  Copyright Syncfusion Inc. 2001 - 2016. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
function(e){"function"==typeof define&&define.amd?define(["./ej.core.min"],e):e()}(function(){(function(e,t,i,s){"use strict";t.widget("ejScrollBar","ej.ScrollBar",{defaults:{orientation:"horizontal",viewportSize:0,height:18,width:18,smallChange:57,largeChange:57,value:0,maximum:0,minimum:0,buttonSize:18,infiniteScrolling:!1},validTags:["div"],type:"transclude",dataTypes:{buttonSize:"number",smallChange:"number",largeChange:"number"},observables:["value"],value:t.util.valueFunction("value"),_enabled:!0,content:function(){return this._content&&this._content.length||(this._content="horizontal"===this.model.orientation?this.element.find(".e-hhandle"):this.element.find(".e-vhandle")),this._content},_init:function(){this.element.addClass("e-widget"),this._ensureScrollers(),this.content(),this._setInitialValues()},_setInitialValues:function(){this.model.orientation===t.ScrollBar.Orientation.Horizontal?this.element.addClass("e-hscrollbar"):this.element.addClass("e-vscrollbar"),(0!==this.value()||0!==this.model.minimum)&&(this.value()<this.model.minimum&&this.value(this.model.minimum),this.scroll(this.value(),"none"))},_ensureScrollers:function(){e.fn.jquery;this.model.height&&this.element.height(this.model.height),this.model.width&&this.element.width(this.model.width),this._scrollData||(this._scrollData="vertical"===this.model.orientation?this._createScroller("Height","Y","Top","e-v"):this._createScroller("Width","X","Left","e-h"))},_setModel:function(e){for(var t in e){if("value"!==t){this.refresh();break}this.value()&&this.scroll(this.value(),"none")}},_createScroller:function(t,i,s,l){var n,o={};e.fn.jquery;return o.dimension=t,o.xy=i,o.position=s,o.css=l,o.uDimension=t,this._calculateLayout(o),this._createLayout(o),n=this[o.main].find(".e-button"),this._off(n,"mousedown")._on(n,"mousedown",{d:o,step:1},this._spaceMouseDown),this._off(this[o.scroll],"mousedown")._on(this[o.scroll],"mousedown",{d:o},this._spaceMouseDown),this._off(this[o.handler],"mousedown touchstart")._on(this[o.handler],"mousedown touchstart",{d:o},this._mouseDown),o},_createLayout:function(i){var s,l="<div class='"+i.css+"{0}' style='"+i.dimension+":{1}px'>{2}</div>",n=e.fn.jquery,o={};o[i.dimension]=i.modelDim,s=t.buildTag("div."+i.css+"scroll e-box",String.format(l,"up e-chevron-up_01 e-icon e-box e-button",i.buttonSize)+String.format(l,"handlespace",i.handleSpace,String.format(l,"handle e-box e-pinch",i.handle))+String.format(l,"down e-chevron-down_01 e-icon e-box e-button",i.buttonSize),o),this.element.append(s),this.element.find(".e-vhandle").addClass("e-v-line e-icon"),this.element.find(".e-hhandle").addClass("e-h-line e-icon"),"1.7.1"===n||"1.7.2"===n?i.uDimension.toLowerCase():i.uDimension,this[i.handler]=this.element.find("."+i.handler),this[i.handler].css("transition","none"),this[i.scroll]=this[i.handler].parent(),this[i.main]=this[i.scroll].parent(),this[i.main].find(".e-button")["outer"+i.uDimension](i.buttonSize)},_calculateLayout:function(e){var i,l;e.scrollDim="scroll"+e.dimension,e.lPosition=e.position.toLowerCase(),e.clientXy="page"+e.xy,e.scrollVal="scroll"+e.position,e.scrollOneStepBy=this.model.smallChange,e.modelDim=this.model[e.dimension=e.dimension.toLowerCase()],e.handler=e.css+"handle",e.buttonSize=this.model.buttonSize,e.main=e.css+"scroll",e.scroll=e.css+"ScrollSpace",e.handleSpace=e.modelDim-2*e.buttonSize,e.scrollable=this.model.maximum-this.model.minimum,i=this.model.height,"horizontal"===this.model.orientation&&(i=this.model.width),e.handle=this.model.viewportSize/(this.model.maximum-this.model.minimum+this.model.viewportSize)*(i-2*this.model.buttonSize),l=!t.isNullOrUndefined(this.model.elementHeight)&&"string"==typeof this.model.elementHeight&&-1!=this.model.elementHeight.indexOf("%"),e.handle<20&&!l&&(e.handle=20),e.onePx=e.scrollable/(e.handleSpace-e.handle),e.fromScroller=!1,e.up=!0,e.vInterval=s},_updateLayout:function(e){this.element.height(this.model.height),this.element.width(this.model.width);var t=this.element.find("."+e.css+"handle"),i=this.element.find("."+e.css+"handlespace"),l="width"==e.dimension?t.css("left"):t.css("top"),n="width"==e.dimension?i.outerWidth():i.outerHeight();l!==s&&"auto"!==l&&(n>=e.handle+parseFloat(l)||(this.model.enableRTL?t.css("width"===e.dimension?"left":"top",parseFloat(n)-e.handle):t.css("width"===e.dimension?"left":"top",parseFloat(n)-e.handle>0?parseFloat(n)-e.handle:0))),this.element.find("."+e.css+"scroll").css(e.dimension,e.modelDim+"px").find(".e-button").css(e.dimension,this.model.buttonSize).end().find("."+e.css+"handlespace").css(e.dimension,e.handleSpace+"px").find("."+e.css+"handle").css(e.dimension,e.handle+"px")},refresh:function(){this._ensureScrollers(),this.value()&&this.scroll(this.value(),"none"),this._scrollData&&(this._calculateLayout(this._scrollData),this._updateLayout(this._scrollData))},scroll:function(e,i,s,l){var n,o,a=this._scrollData;if(!s)if(this.model.orientation===t.ScrollBar.Orientation.Horizontal){if(this._trigger("scroll",{source:i||"custom",scrollData:this._scrollData,scrollLeft:e,originalEvent:l}))return}else if(this._trigger("scroll",{source:i||"custom",scrollData:this._scrollData,scrollTop:e,originalEvent:l}))return;!this._scrollData.enableRTL||"mousemove"!=l&&"touchmove"!=l||"msie"==t.browserInfo().name?!this._scrollData.enableRTL||"mousemove"!=l&&"touchmove"!=l||"msie"!=t.browserInfo().name?this.value(e):this.value(-1*e):this.value(-a.scrollable+e),this.content().length>0&&(this.model.orientation===t.ScrollBar.Orientation.Horizontal?(e=(n=this.element.find(".e-hhandlespace").width()-this.element.find(".e-hhandle").outerWidth())<(e-this.model.minimum)/this._scrollData.onePx?n:(e-this.model.minimum)/this._scrollData.onePx,this._scrollData.enableRTL&&("mousemove"==l||"touchmove"==l)&&"msie"!=t.browserInfo().name&&((e=n-e)>0&&(e*=-1)),this._scrollData.enableRTL&&("mousemove"==l||"touchmove"==l)&&"msie"==t.browserInfo().name&&(e=-e),this._scrollData.enableRTL&&e>0&&!this._scrollData._scrollleftflag&&(e=0),this._scrollData._scrollleftflag&&(e>0&&(e*=-1),this.value(e)),this.content()[0].style.left=e+"px",this._scrollData._scrollleftflag=!1):(e=(o=this.element.find(".e-vhandlespace").height()-this.element.find(".e-vhandle").outerHeight())<(e-this.model.minimum)/this._scrollData.onePx?o:(e-this.model.minimum)/this._scrollData.onePx,this.content()[0].style.top=e+"px"))},_changeTop:function(e,t,i){var s,l;return e.dimension,l=(s=this.value())+t,e.step=t,e.enableRTL&&t<0||t>0&&!e.enableRTL?e.enableRTL?l<-1*this.model.maximum&&(l=-1*this.model.maximum):l>this.model.maximum&&(l=this.model.maximum):e.enableRTL?l>this.model.minimum&&(l=this.model.minimum):l<this.model.minimum&&(l=this.model.minimum),(l!==s||this.model.infiniteScrolling)&&this.scroll(l,i),l!==s},_mouseUp:function(i){if(i.data){var s=i.data.d;clearInterval(s.vInterval),"touchend"==i.type&&e(i.target).removeClass("e-touch"),"mouseup"!==i.type&&"touchend"!==i.type&&(i.toElement||i.relatedTarget||i.target)||(this._prevY=this._d=this._data=null,this._off(e(document),"mousemove touchmove",this._mouseMove),e(document).off("mouseup touchend",t.proxy(this._mouseUp,this)),s.fromScroller=!1,this[s.scroll].off("mousemove"),this[s.handler].off("mousemove").css("transition",""),"thumb"!==i.data.source||t.isNullOrUndefined(this.model)||e.when(this.content()).done(t.proxy(function(){this._trigger("thumbEnd",{originalEvent:i,scrollData:s})},this))),s.up=!0}},_mouseDown:function(i){this._enabled&&(this._d=i,this._data=this._d.data.d,this._data.target=this._d.target,this._data.fromScroller=!0,this[this._data.handler].css("transition","none"),this._on(e(document),"mousemove touchmove",{d:this._data,source:"thumb"},this._mouseMove),this._trigger("thumbStart",{originalEvent:this._d,scrollData:this._data}),e(document).one("mouseup touchend",{d:this._data,source:"thumb"},t.proxy(this._mouseUp,this)),"touchstart"==i.type&&e(i.target).addClass("e-touch"))},_mouseCall:function(e){e.type="mouseup",this._mouseUp(e)},_mouseMove:function(i){var s,l,n=0,o=parseInt(this[this._data.handler].css(this._data.lPosition))||0;if(i.preventDefault(),t.isNullOrUndefined(i.target.tagName)){if(e(i.target).is(document))return void this._mouseCall(i)}else if("iframe"===i.target.tagName.toLowerCase())return void this._mouseCall(i);l="mousemove"==i.type?i[this._data.clientXy]:i.originalEvent.changedTouches[0][this._data.clientXy],this._prevY&&l!==this._prevY&&(n=l-this._prevY,this.model.infiniteScrolling?(o+=n,this._data.step=n,(this._data.enableRTL?o>0:o<0)&&(o=0),o*(this._data.enableRTL?-1:1)+this._data.handle>=this._data.handleSpace&&(o=(this._data.handleSpace-this._data.handle)*(this._data.enableRTL?-1:1)),s=Math.ceil(o*this._data.onePx),this.scroll(s,"thumb")):(s=n*this._data.onePx,this._changeTop(this._data,s,"thumb",this._d)),this._trigger("thumbMove",{originalEvent:i,scrollData:this._data})),this._prevY=l},_spaceMouseDown:function(i){var s,l,n;i.data&&this._enabled&&(s=i.data.d,1===i.which&&i.target!==this[s.handler][0])&&(l=i.data.step?this.model.smallChange:this.model.largeChange,n=i.data.top||this[s.handler].offset()[s.lPosition],i[s.clientXy]=i[s.clientXy]||0,i[s.clientXy]<n&&(l*=-1),s.target=i.target,this._changeTop(s,l,3===l?"track":"button",i),1!==i.data.step&&this[s.scroll].mousemove(function(){s.up=!0}),s.up=!1,s.vInterval=setInterval(t.proxy(function(){(l<0?n+l/s.onePx<i[s.clientXy]:n+s.handle+l/s.onePx>i[s.clientXy])&&(s.up=!0),s.up?clearInterval(s.vInterval):(this._changeTop(s,l,3===l?"track":"button",i),n=i.data&&i.data.top||this[s.handler].offset()[s.lPosition])},this),150),e(document).one("mouseup",{d:s},t.proxy(this._mouseUp,this)),e(document).mouseout({d:s},t.proxy(this._mouseUp,this)))},_remove:function(){this.model.orientation===t.ScrollBar.Orientation.Horizontal&&this.element.find(".e-hscroll").remove(),this.model.orientation===t.ScrollBar.Orientation.Vertical&&this.element.find(".e-vscroll").remove(),this._scrollData=null,this._content=null},_destroy:function(){this.element.remove()}}),t.ScrollBar.Orientation={Horizontal:"horizontal",Vertical:"vertical"}})(jQuery,Syncfusion,window),function(e,t,i,s){"use strict";t.widget("ejScroller","ej.Scroller",{_addToPersist:["scrollLeft","scrollTop"],defaults:{height:250,autoHide:!1,animationSpeed:600,width:0,scrollOneStepBy:57,buttonSize:18,scrollLeft:0,scrollTop:0,targetPane:null,scrollerSize:18,enablePersistence:!1,enableRTL:s,enableTouchScroll:!0,enabled:!0,create:null,destroy:null,wheelStart:null,wheelMove:null,wheelStop:null},validTags:["div"],type:"transclude",dataTypes:{buttonSize:"number",scrollOneStepBy:"number"},observables:["scrollTop","scrollLeft"],scrollTop:t.util.valueFunction("scrollTop"),scrollLeft:t.util.valueFunction("scrollLeft"),keyConfigs:{up:"38",down:"40",left:"37",right:"39",pageUp:"33",pageDown:"34",pageLeft:"ctrl+37",pageRight:"ctrl+39"},content:function(){return this._content&&this._content.length&&this._content[0].offsetParent||(this._content=this.element.children().first().addClass("e-content")),this._content},_setFirst:!0,_updateScroll:!1,_init:function(){t.isNullOrUndefined(this.content()[0])||(this._prevScrollWidth=this.content()[0].scrollWidth,this._prevScrollHeight=this.content()[0].scrollHeight,this.element.addClass("e-widget"),this.content(),this._browser=t.browserInfo().name,this._wheelStart=!0,this._eleHeight=this.model.height,this._eleWidth=this.model.width,this.model.enableRTL===s&&(this.model.enableRTL="rtl"===this.element.css("direction")),this._ensureScrollers(),this.model.enableRTL&&(this.element.addClass("e-rtl"),this._rtlScrollLeftValue=this.content().scrollLeft()),this._on(this.content(),"scroll",this._scroll),null!=this.model.targetPane&&this._on(this.content().find(this.model.targetPane),"scroll",this._scroll),this.scrollLeft()&&this._setScrollLeftValue(this.scrollLeft()),this.scrollTop()&&this.content().scrollTop(this.scrollTop()),this.model.autoHide&&this._autohide(),this.model.enabled?this.enable():this.disable(),this._setDimension(),(this._prevScrollWidth!==this.content()[0].scrollWidth||this._prevScrollHeight!==this.content()[0].scrollHeight)&&this.refresh()),this._addActionClass()},_addActionClass:function(){"msie"==this._browser&&(this.content().removeClass("e-pinch e-pan-x e-pan-y"),this._vScrollbar&&this._hScrollbar?this.content().addClass("e-pinch"):this._vScrollbar&&!this._hScrollbar?this.content().addClass("e-pan-x"):this._hScrollbar&&!this._vScrollbar&&this.content().addClass("e-pan-y"))},_setDimension:function(){t.isNullOrUndefined(this.model.height)||"string"!=typeof this.model.height||-1==this.model.height.indexOf("%")||(this._vScroll?this.model.height=this._convertPercentageToPixel(parseInt(this._eleHeight),this.element.parent().height()):e(this.content()[0]).height("")),t.isNullOrUndefined(this.model.width)||"string"!=typeof this.model.width||-1==this.model.width.indexOf("%")||(this._hScroll?this.model.width=this._convertPercentageToPixel(parseInt(this._eleWidth),this.element.parent().width()):e(this.content()[0]).width(""))},_setScrollLeftValue:function(e){this.model.enableRTL&&(e="mozilla"==t.browserInfo().name?e<0?e:-1*e:!t.isNullOrUndefined(this._rtlScrollLeftValue)&&("chrome"==t.browserInfo().name||this._rtlScrollLeftValue>0)?e<0?this._rtlScrollLeftValue+e:this._rtlScrollLeftValue-e:Math.abs(e)),this.content().scrollLeft(e)},_ensureScrollers:function(){var s,l,n,o,a,r=e.fn.jquery;this.model.height="string"==typeof this.model.height&&-1!=this.model.height.indexOf("px")?parseInt(this.model.height):this.model.height,this.model.width="string"==typeof this.model.width&&-1!=this.model.width.indexOf("px")?parseInt(this.model.width):this.model.width,this.model.height&&this.element.height(this.model.height),this.model.width&&this.element.width(this.model.width),this._off(this.content(),"mousedown touchstart"),this.content().length>0&&(this.isVScroll()?(this._vScrollbar||(this._vScrollbar=this._createScrollbar(t.ScrollBar.Orientation.Vertical,this.isHScroll())),this.model.enableTouchScroll&&this._on(this.content(),"mousedown touchstart",{d:this._vScrollbar._scrollData},this._mouseDownOnContent)):(this._vScrollbar=null,this.element.children(".e-vscrollbar").remove()),this.isHScroll()?(this._hScrollbar||(this._hScrollbar=this._createScrollbar(t.ScrollBar.Orientation.Horizontal,this.isVScroll())),this.model.enableTouchScroll&&this._on(this.content(),"mousedown touchstart",{d:this._hScrollbar._scrollData},this._mouseDownOnContent)):(this._hScrollbar=null,this.element.children(".e-hscrollbar").remove()),this._vScrollbar||this._hScrollbar||this.content().css({width:"auto",height:"auto"}),this.element.find(".e-hscroll").length>0||this._vScrollbar&&this.content().outerHeight(this.content().outerHeight()-1),this._hScroll=this.isHScroll(),this._vScroll=this.isVScroll(),this._hScroll||this._vScroll?(this.content().addClass("e-content"),"1.7.1"===r||"1.7.2"===r?(s="height",l="width"):(s="outerHeight",l="outerWidth"),o=(n=this._exactElementDimension(this.element)).height-(this.border_bottom+this.border_top+this.padding_bottom+this.padding_top),this.content()[s](o-(this._hScroll&&!this.model.autoHide?this.model.scrollerSize:0)),a=n.width-(this.border_left+this.border_right+this.padding_left+this.padding_right),this.content()[l](a-(this._vScroll&&!this.model.autoHide?this.model.scrollerSize:0)),isNaN(this._eleWidth)&&this._eleWidth.indexOf("%")>0&&isNaN(this._eleHeight)&&this._eleHeight.indexOf("%")>0&&e(i).on("resize",e.proxy(this._resetScroller,this))):this.content().removeClass("e-content"),this._setDimension(),this._parentHeight=e(this.element).parent().height(),this._parentWidth=e(this.element).parent().width())},_convertPercentageToPixel:function(e,t){return Math.floor(e*t/100)},isHScroll:function(){if(t.isNullOrUndefined(this.model.width)||"string"!=typeof this.model.width||-1==this.model.width.indexOf("%")){if(this.model.width>0){var i=this.content().find(this.model.targetPane);return null!=this.model.targetPane&&i.length?i[0].scrollWidth+i.siblings().width()>this.model.width:this.content()[0].scrollWidth>this.model.width||this.content()[0].scrollWidth==this.model.width&&e(this.content()[0]).find("> *").length>0&&e(this.content()[0]).find("> *")[0].scrollWidth>this.model.width}return!1}return this.content()[0].scrollWidth>this.element.width()},isVScroll:function(){return t.isNullOrUndefined(this.model.height)||"string"!=typeof this.model.height||-1==this.model.height.indexOf("%")?!!(this.model.height>0&&(this.content()[0].scrollHeight>this.model.height||this.isHScroll()&&(this.content()[0].scrollHeight==this.model.height||this.content()[0].scrollHeight>this.model.height-(this.model.scrollerSize-2)))):this.content()[0].scrollHeight>this.element.outerHeight()},_setModel:function(e){for(var i in e)if("enableRTL"===i)e[i]?(this.element.addClass("e-rtl"),this._rtlScrollLeftValue=this.content().scrollLeft(),t.isNullOrUndefined(this._hScrollbar)||(this._hScrollbar._scrollData.enableRTL=!0)):(this.element.removeClass("e-rtl"),t.isNullOrUndefined(this._hScrollbar)||(this._hScrollbar._scrollData.enableRTL=!1)),this._hScrollbar&&(this.element.find(".e-hhandle").css("left",0),this._hScrollbar.value(0));else if("scrollLeft"===i)(parseFloat(e[i])<0||!this._hScroll)&&(e[i]=0),this._externalCall=!0,this._hScrollbar&&(e[i]=parseFloat(e[i])>this._hScrollbar._scrollData.scrollable?this._hScrollbar._scrollData.scrollable:parseFloat(e[i])),this._setScrollLeftValue(parseFloat(e[i])),this.scrollLeft(e[i]),!this._hScrollbar||this._hScrollbar._scrollData._scrollleftflag&&this.model.enableRTL||this.scrollX(e[i]);else if("scrollTop"===i)this._vScrollbar&&(e[i]=parseFloat(e[i])>this._vScrollbar._scrollData.scrollable?this._vScrollbar._scrollData.scrollable:parseFloat(e[i])),(parseFloat(e[i])<0||!this._vScroll)&&(e[i]=0),this._externalCall=!0,this.content().scrollTop(parseFloat(e[i])),this.scrollTop(e[i]),this.scrollY(e[i]);else if("touchScroll"===i)this.model.enableTouchScroll?(this._vScrollbar&&this._on(this.content(),"mousedown touchstart",{d:this._vScrollbar._scrollData},this._mouseDownOnContent),this._hScrollbar&&this._on(this.content(),"mousedown touchstart",{d:this._hScrollbar._scrollData},this._mouseDownOnContent)):this._off(this.content(),"mousedown touchstart");else if("scrollOneStepBy"===i)this._vScrollbar&&(this._vScrollbar._scrollData.scrollOneStepBy=e[i],this._vScrollbar.model.smallChange=e[i]),this._hScrollbar&&(this._hScrollbar._scrollData.scrollOneStepBy=e[i],this._hScrollbar.model.smallChange=e[i]);else{if("buttonSize"!==i){"height"===i&&(this._eleHeight=e[i]),"width"===i&&(this._eleWidth=e[i]),this.refresh();break}this._vScrollbar&&(this._vScrollbar.model.buttonSize=this.model.buttonSize),this._hScrollbar&&(this._hScrollbar.model.buttonSize=this.model.buttonSize),this.refresh()}},_createScrollbar:function(i,s){var l,n,o,a,r,d,h,c=this,u=document.createElement("div");return i===t.ScrollBar.Orientation.Vertical?(n=this.model.scrollerSize,o=l=t.isNullOrUndefined(this.model.height)||"string"!=typeof this.model.height||-1==this.model.height.indexOf("%")?this.model.height-(s?this.model.scrollerSize:0):this.element.height()-(s?this.model.scrollerSize:0),a=this.content()[0].scrollHeight,r=this.scrollTop()):(n=l=this.model.width-(s?this.model.scrollerSize:0),o=this.model.scrollerSize,t.isNullOrUndefined(this.model.width)||"string"!=typeof this.model.width||-1==this.model.width.indexOf("%")?(d=this.content().find(this.model.targetPane),a=null!=this.model.targetPane&&d.length?d[0].scrollWidth+d.parent().width()-d.width():this.content()[0].scrollWidth):(n=l=this.element.width()-(s?this.model.scrollerSize:0),a=this.content()[0].scrollWidth),r=this.scrollLeft()),this.element.children(".e-hscrollbar").length>0?e(this.element.children(".e-hscrollbar")).before(u):this.element.append(u),e(u).ejScrollBar({elementHeight:c._eleHeight,elementWidth:c._eleWidth,buttonSize:c.model.buttonSize,orientation:i,viewportSize:l,height:o,width:n,maximum:a-l,value:r,smallChange:this.model.scrollOneStepBy,largeChange:3*this.model.scrollOneStepBy,scroll:t.proxy(this._scrollChanged,this),thumbEnd:t.proxy(this._thumbEnd,this),thumbStart:t.proxy(this._thumbStart,this),thumbMove:t.proxy(this._thumbMove,this)}),h=e(u).ejScrollBar("instance"),i!==t.ScrollBar.Orientation.Vertical&&s||this._off(this.element,"msie"==this._browser?"wheel mousewheel":"mousewheel DOMMouseScroll",this._mouseWheel)._on(this.element,"msie"==this._browser?"wheel mousewheel":"mousewheel DOMMouseScroll",{d:h._scrollData},this._mouseWheel),i===t.ScrollBar.Orientation.Horizontal?this._scrollXdata=h._scrollData:this._scrollYdata=h._scrollData,i===t.ScrollBar.Orientation.Horizontal&&this.model.enableRTL&&(h._scrollData.enableRTL=!0),h._enabled=this.model.enabled,h},_updateScrollbar:function(i,s){var l=i===t.ScrollBar.Orientation.Vertical?this._vScrollbar:this._hScrollbar;l&&(i===t.ScrollBar.Orientation.Vertical?(l.model.width=this.model.scrollerSize,l.model.height=l.model.viewportSize=this.model.height-(s?this.model.scrollerSize:0),l.model.maximum=this.content()[0].scrollHeight-l.model.viewportSize,l.model.value=this.scrollTop()):(l.model.width=l.model.viewportSize=this.model.width-(s?this.model.scrollerSize:0),l.model.height=this.model.scrollerSize,l.model.maximum=(null!=this.model.targetPane&&this.content().find(this.model.targetPane).length>0?this.content().find(this.model.targetPane)[0].scrollWidth+(this.content().width()-e(this.model.targetPane).outerWidth()):this.content()[0].scrollWidth)-l.model.viewportSize,this.model.enableRTL||(l.model.value=this.scrollLeft())))},_autohide:function(){this.model.autoHide?(this.element.addClass("e-autohide"),this._on(this.element,"mouseenter mouseleave touchstart touchend",this._scrollerHover),this.content().siblings(".e-scrollbar.e-js").hide()):(this.element.removeClass("e-autohide"),this._off(this.element,"mouseenter mouseleave touchstart touchend",this._scrollerHover),this.content().siblings(".e-scrollbar.e-js").show())},_scrollChanged:function(i){this._updateScroll=!0,i.scrollTop!==s?this.scrollY(i.scrollTop,!0,"",i.source):i.scrollLeft!==s&&this.scrollX(i.scrollLeft,!0,"",i.source),this._updateScroll=!1;var l=this;e.when(this.content()).done(t.proxy(function(){l._trigger("scrollEnd",{scrollData:i})}))},_bindBlurEvent:function(s,l){this._scrollEle=e(s).data("ejScrollBar"),this._event=l;this._listener=function(){this._scrollEle._off(e(document),"mousemove touchmove",this._scrollEle._mouseMove),e(document).off("mouseup touchend",t.proxy(this._scrollEle._mouseUp,this._scrollEle)),this._scrollEle._prevY=null,this._off(e(document),"mousemove touchmove",this._mouseMove),this._off(e(document),"mouseup touchend",this._mouseUp),this._off(e(i),"blur"),this._evtData.handler,this._scrollEle._trigger("thumbEnd",{originalEvent:this._event,scrollData:this._evtData})},this._on(e(i),"blur",this._listener)},_thumbStart:function(e){this._evtData=e.scrollData;var t=(e.scrollData.handler,this.element.find("."+e.scrollData.handler).closest(".e-scrollbar"));e.scrollData.handler,t=this.element.find("."+e.scrollData.handler).closest(".e-scrollbar");this._bindBlurEvent(t,e),this._trigger("thumbStart",e)},_thumbMove:function(e){this._trigger("thumbMove",e)},_thumbEnd:function(t){this._trigger("thumbEnd",t),this._off(e(i),"blur")},refresh:function(i){var s,l;i||this.element.find(">.e-content").removeAttr("style"),t.isNullOrUndefined(this._eleHeight)||"string"!=typeof this._eleHeight||-1==this._eleHeight.indexOf("%")||this._parentHeight==e(this.element).parent().height()||(s=(s=this._exactElementDimension(this.element.parent())).height-(this.border_bottom+this.border_top+this.padding_bottom+this.padding_top),this.model.height=this._convertPercentageToPixel(parseInt(this._eleHeight),s)),t.isNullOrUndefined(this._eleWidth)||"string"!=typeof this._eleWidth||-1==this._eleWidth.indexOf("%")||this._parentWidth==e(this.element).parent().width()||(s=(s=this._exactElementDimension(this.element.parent())).width-(this.border_left+this.border_right+this.padding_left+this.padding_right),this.model.width=this._convertPercentageToPixel(parseInt(this._eleWidth),s)),this._ensureScrollers(),l=this.scrollLeft(),this.model.enableRTL?(this.element.hasClass("e-rtl")||this.element.addClass("e-rtl"),this._rtlScrollLeftValue=this.content().scrollLeft(),l>0?this.content().scrollLeft(l):this._setScrollLeftValue(l)):this.content().scrollLeft(l),(this.scrollTop()&&null==this._vScrollbar||null!==this._vScrollbar&&null!=this._vScrollbar._scrollData&&!this._vScrollbar._scrollData.skipChange)&&this.content().scrollTop(this.scrollTop()),this._vScrollbar&&(this._vScrollbar._scrollData.dimension="Height",this._updateScrollbar(t.ScrollBar.Orientation.Vertical,this._hScroll),this._vScroll&&!this._vScrollbar._calculateLayout(this._vScrollbar._scrollData)&&this._vScrollbar._updateLayout(this._vScrollbar._scrollData)),this._hScrollbar&&(this._hScrollbar._scrollData.dimension="Width",this._updateScrollbar(t.ScrollBar.Orientation.Horizontal,this._vScroll),this._hScroll&&!this._hScrollbar._calculateLayout(this._hScrollbar._scrollData)&&this._hScrollbar._updateLayout(this._hScrollbar._scrollData)),"msie"==t.browserInfo().name&&"8.0"==t.browserInfo().version?this.element.find(".e-hhandle").css("left","0px"):null!=this.model.targetPane&&this._on(this.content().find(this.model.targetPane),"scroll",this._scroll),this._addActionClass(),this._autohide()},_exactElementDimension:function(e){var t,i,s,l=e.get(0).getBoundingClientRect(),n=["left","right","top","bottom"];for(t=l.width?l.width:l.right-l.left,i=l.height?l.height:l.bottom-l.top,s=0;s<n.length;s++)this["border_"+n[s]]=isNaN(parseFloat(e.css("border-"+n[s]+"-width")))?0:parseFloat(e.css("border-"+n[s]+"-width")),this["padding_"+n[s]]=isNaN(parseFloat(e.css("padding-"+n[s])))?0:parseFloat(e.css("padding-"+n[s]));return{width:t,height:i}},_keyPressed:function(e,i){if(this.model.enabled){if(-1!==["input","select","textarea"].indexOf(i.tagName.toLowerCase()))return!0;var s,l;if(-1!==["up","down","pageUp","pageDown"].indexOf(e))this._vScrollbar&&("msie"==t.browserInfo().name&&this.model.allowVirtualScrolling&&this._content.focus(),s=this._vScrollbar._scrollData),l="o";else{if(-1===["left","right","pageLeft","pageRight"].indexOf(e))return!0;this._hScrollbar&&(s=this._hScrollbar._scrollData),l="i"}return!s||!this._changeTop(s,(e.indexOf(l)<0?-1:1)*("p"!==e[0]?1:3)*s.scrollOneStepBy,"key")}},scrollY:function(e,i,s,l,n){if(""!==e){if(i){n={source:l||"custom",scrollData:this._vScrollbar?this._vScrollbar._scrollData:null,scrollTop:e,originalEvent:n};if(this._trigger("scroll",n))return;return e=n.scrollTop,this.scrollTop(e),void this.content().scrollTop(e)}(t.isNullOrUndefined(s)||""===s)&&(s=100),this._vScrollbar&&(e=parseFloat(e)>this._vScrollbar._scrollData.scrollable?this._vScrollbar._scrollData.scrollable:parseFloat(e)),this.scrollTop(e),this.content().stop().animate({scrollTop:e},s,"linear"),this._trigger("scroll",{source:l||"custom",scrollData:this._vScrollbar?this._vScrollbar._scrollData:null,scrollTop:e,originalEvent:n})}},scrollX:function(e,i,s,l,n){var o;if(""!==e){if(this._hScrollbar&&(e=parseFloat(e)>this._hScrollbar._scrollData.scrollable?this._hScrollbar._scrollData.scrollable:parseFloat(e)),this._externalCall=!0,o=t.browserInfo().name,this.model.enableRTL&&"mozilla"!=o&&(e<0&&(e=Math.abs(e)),null!=this.model.targetPane?this.content().find(this.model.targetPane)[0]:this.content()[0],"mousemove"!=n&&"touchmove"!=n&&"msie"!=o&&"msie"!=o&&(e=this._hScrollbar._scrollData.scrollable-e)),this.scrollLeft(e),i){if(this._trigger("scroll",{source:l||"custom",scrollData:this._hScrollbar?this._hScrollbar._scrollData:null,scrollLeft:e,originalEvent:n}))return;return void(null!=this.model.targetPane&&this.content().find(this.model.targetPane).length?this.content().find(this.model.targetPane).scrollLeft(e):this.content().scrollLeft(e))}(t.isNullOrUndefined(s)||""===s)&&(s=100),null!=this.model.targetPane&&this.content().find(this.model.targetPane).length?this.content().find(this.model.targetPane).stop().animate({scrollLeft:e},s,"linear"):this.content().stop().animate({scrollLeft:e},s,"linear"),this._trigger("scroll",{source:l||"custom",scrollData:this._hScrollbar?this._hScrollbar._scrollData:null,scrollLeft:e,originalEvent:n})}},enable:function(){var e=this.element.find(".e-vscrollbar,.e-hscrollbar,.e-vscroll,.e-hscroll,.e-vhandle,.e-hhandle,.e-vscroll .e-icon,.e-hscroll .e-icon");e.hasClass("e-disable")&&(e.removeClass("e-disable").attr({"aria-disabled":!1}),this.model.enabled=!0),this._vScrollbar&&(this._vScrollbar._enabled=this.model.enabled),this._hScrollbar&&(this._hScrollbar._enabled=this.model.enabled)},disable:function(){this.element.find(".e-vscrollbar,.e-hscrollbar,.e-vscroll,.e-hscroll,.e-vhandle,.e-hhandle,.e-vscroll .e-icon,.e-hscroll .e-icon").addClass("e-disable").attr({"aria-disabled":!0}),this.model.enabled=!1,this._vScrollbar&&(this._vScrollbar._enabled=this.model.enabled),this._hScrollbar&&(this._hScrollbar._enabled=this.model.enabled)},_changeTop:function(e,i,s,l){var n,o=null!=this.model.targetPane&&"height"!=e.dimension?this.content().find(this.model.targetPane)[e.scrollVal]():this.content()[e.scrollVal]();return"height"==e.dimension&&0==o&&(o=0!=this.scrollTop()?this.scrollTop():0),n=o+i,(e.enableRTL?n<e.scrollable:n>e.scrollable)&&(n=e.scrollable),(e.enableRTL?n>0:n<0)&&(n=0),n!==o&&(this["scroll"+e.xy](n,!0,"",s,l),"X"!==e.xy||t.isNullOrUndefined(this._hScrollbar)?t.isNullOrUndefined(this._vScrollbar)||this._vScrollbar.scroll(n,s,!0,l):this._hScrollbar.scroll(n,s,!0,l)),n!==o},_mouseWheel:function(t){var s;if((this._vScrollbar||t.shiftKey)&&t.data&&this.model.enabled){var l,n=0,o=t.data.d,a=t;if(t=t.originalEvent,this._wheelStart&&this._trigger("wheelStart",{originalEvent:t,scrollData:a.data.d}),this._wheelStart=!1,clearTimeout(e.data(this,"timer")),1!=this._wheelx&&(0==t.wheelDeltaX||0==t.wheelDeltaY)&&(this._wheelx=1),0==navigator.platform.indexOf("Mac")&&0==this._wheelx&&("webkit"==this._browser||"chrome"==this._browser))return!0;"mozilla"==this._browser?t.axis==t.HORIZONTAL_AXIS?o=this._scrollXdata:this._scrollYdata:"msie"==this._browser?("wheel"==t.type&&(n=t.deltaX/120),"mousewheel"==t.type&&t.shiftKey&&(o=this._scrollXdata,t.preventDefault?t.preventDefault():t.returnValue=!1)):this._wheelx&&0!=t.wheelDeltaX&&0==t.wheelDeltaY&&this._scrollXdata&&(o=this._scrollXdata),0==t.wheelDeltaX&&(this._wheelx=t.wheelDeltaX),t.wheelDelta?(n=0==navigator.platform.indexOf("Mac")?-t.wheelDelta/3:-t.wheelDelta/120,i.opera&&parseFloat(i.opera.version,10)<10&&(n=-n)):t.detail&&(n=t.detail/3),n&&(a.originalEvent&&(l=a.originalEvent.wheelDelta&&a.originalEvent.wheelDelta>0||a.originalEvent.detail&&a.originalEvent.detail<0?-1:1),this._changeTop(o,n*o.scrollOneStepBy,"wheel",t)?(t.preventDefault?t.preventDefault():a.preventDefault(),a.stopImmediatePropagation(),a.stopPropagation(),this._trigger("wheelMove",{originalEvent:t,scrollData:a.data.d,direction:l})):(this._trigger("scrollEnd",{originalEvent:t,scrollData:a}),this._wheelx=0),s=this,e.data(this,"timer",setTimeout(function(){s._wheelStart=!0,s._trigger("wheelStop",{originalEvent:t,scrollData:a.data.d,direction:l})},250)))}},_scrollerHover:function(e){"mouseenter"!=e.type&&"touchstart"!=e.type||this.content().siblings().is(":visible")?("mouseleave"==e.type||"touchend"==e.type)&&this.content().siblings().hide():this.content().siblings().css("display","block")},_mouseUp:function(s){if(s.data){var l=s.data.d;"mouseup"!==s.type&&"touchend"!==s.type&&(s.toElement||s.relatedTarget)||(this.content().css("cursor","default"),this._off(e(document),"mousemove touchmove"),this._off(e(document),"mouseup touchend",this._mouseUp),l.fromScroller=!1,!0!==this._mouseMoved||"thumb"!==s.data.source||t.isNullOrUndefined(this.model)||(e.when(this.content()).done(t.proxy(function(){this._trigger("thumbEnd",{originalEvent:s,scrollData:l})},this)),this._off(e(i),"blur"))),l.up=!0}},_mouseDownOnContent:function(l){var n,o;if(this._velocity=0,this.model.enabled&&(n=l.data.d,this._evtData=l.data,this._startX=l.clientX!=s?l.clientX:l.originalEvent.changedTouches[0][n.clientXy],this._startY=l.clientY!=s?l.clientY:l.originalEvent.changedTouches[0][n.clientXy],this._timeStart=l.timeStamp||Date.now(),n.handler,o=this.element.find("."+n.handler).closest(".e-scrollbar"),this._bindBlurEvent(o,l),!this._trigger("thumbStart",{originalEvent:l,scrollData:n}))&&(3!=l.which||2!=l.button)){n.fromScroller=!0;var a,r=null,d=1;this._document=e(document),this._window=e(i),this._mouseMove=function(e){var i,l,o;if(this._relDisX=(this._startx=e.clientX!=s?e.clientX:e.originalEvent.changedTouches[0][n.clientXy])-this._startX,this._relDisY=(this._starty=e.clientY!=s?e.clientY:e.originalEvent.changedTouches[0][n.clientXy])-this._startY,this._duration=(e.timeStamp||Date.now())-this._timeStart,this._velocityY=Math.abs(this._relDisY)/this._duration,this._velocityX=Math.abs(this._relDisX)/this._duration,e.preventDefault(),"iframe"===e.target.tagName.toLowerCase())return e.type="mouseup",void this._mouseUp(e);if(i="mousemove"==e.type?e[n.clientXy]:e.originalEvent.changedTouches[0][n.clientXy],r&&i!==r&&(this._mouseMoved=!0,l=i-r,o=this.model[n.scrollVal]-l,1==d&&Math.abs(l)>5&&(a=n.position,d=0),0==d&&(r=i),o>=0&&o<=n.scrollable&&a===n.position)){var h=this._velocityY>.5&&this._duration<50&&"Top"==n.position,c=this._velocityX>.5&&this._duration<50&&"Left"==n.position;(this._velocityY>.5||this._velocityX>.5)&&this._duration<50?h?(o=Math.abs(this._relDisY)+this._duration*this._velocityY,this._startY>this._starty?(o+=this.scrollTop())>n.scrollable&&(o=n.scrollable):o<this.scrollTop()&&(o=Math.abs(o-this.scrollTop())),this.scrollTop()<=n.scrollable&&this.scrollY(o,!1,this.model.animationSpeed,"thumb")):c&&(o=Math.abs(this._relDisX),this._startX>this._startx?(o+=this.scrollLeft())>n.scrollable&&(o=n.scrollable):(o-=this.scrollLeft(),((o=Math.abs(o))>n.scrollable||o>=this.scrollLeft())&&(o=0)),this.scrollLeft()<=n.scrollable&&this.scrollX(o,!1,this.model.animationSpeed,"thumb")):(this["scroll"+n.xy](o,!0,"","thumb",e.type),"X"===n.xy?this._hScrollbar.scroll(o,"thumb",!0,e.type):t.isNullOrUndefined(this._vScrollbar)||this._vScrollbar.scroll(o,"thumb",!0,e.type),this.content().css("cursor","pointer"),this._trigger("thumbMove",{originalEvent:e,scrollData:n}))}null==r&&(r=i)},this._on(e(document),"mousemove touchmove",{d:n,source:"thumb"},this._mouseMove),this._mouseMoved=!1,this._on(e(document),"mouseup touchend",{d:n,source:"thumb"},this._mouseUp)}},_scroll:function(e){for(var i,s,l=[this._vScrollbar?this._vScrollbar._scrollData:null,this._hScrollbar?this._hScrollbar._scrollData:null],n=0;n<2;n++)if((i=l[n])&&!i.skipChange){if(this._externalCall||("height"===i.dimension?this.scrollTop(e.target[i.scrollVal]):this.scrollLeft(e.target[i.scrollVal])),i.sTop=this.model&&null!=this.model.targetPane&&1==n&&this.content().find(this.model.targetPane).length?this.content().find(this.model.targetPane)[0][i.scrollVal]:"scrollTop"==i.scrollVal?this.scrollTop():this.scrollLeft(),this[i.scrollVal](i.sTop),i.fromScroller)return;1===n?(s=this.content()[0],this._rtlScrollLeftValue&&s.scrollWidth-s.clientWidth!=this._rtlScrollLeftValue&&(this._rtlScrollLeftValue=s.scrollWidth-s.clientWidth),i.sTop=this.model&&"mozilla"!=t.browserInfo().name&&this.model.enableRTL&&!this._hScrollbar._scrollData._scrollleftflag?0==this._rtlScrollLeftValue?-1*i.sTop:i.sTop-this._rtlScrollLeftValue:i.sTop,this._hScrollbar.scroll(i.sTop,"",!0)):this._vScrollbar.scroll(i.sTop,"",!0),(2==l.length&&1==n||1==l.length&&0==n)&&(this._externalScroller=!1)}},_changevHandlerPosition:function(e){var t=this._vScrollbar;t&&(e=null!=t._scrollData&&e>=t._scrollData.scrollable?t._scrollData.scrollable:e,null!=t&&e>=0&&e<=t._scrollData.scrollable&&t[t._scrollData.handler].css(t._scrollData.lPosition,e/t._scrollData.onePx+"px"))},_changehHandlerPosition:function(e){var t=this._hScrollbar;t&&(e=null!=t._scrollData&&e>=t._scrollData.scrollable?t._scrollData.scrollable:e,null!=t&&top>=0&&e<=t._scrollData.scrollable&&t[t._scrollData.handler].css(t._scrollData.lPosition,e/t._scrollData.onePx+"px"))},_destroy:function(){this.element.css({width:"",height:""}).find(".e-vscrollbar,.e-hscrollbar").remove(),this.content().removeClass("e-content").css({width:"",height:""})}})}(jQuery,Syncfusion,window)}),
/*!
*  filename: ej.grid.min.js
*  version : 12.3
*  Copyright Syncfusion Inc. 2001 - 2014. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
function(e){"function"==typeof define&&define.amd?define(["./../common/ej.globalize.min","jsrender","./../common/ej.core.min","./../common/ej.data.min","./../common/ej.touch.min","./../common/ej.draggable.min","./../common/ej.scroller.min","./ej.button.min","./ej.checkbox.min","./ej.menu.min","./ej.waitingpopup.min","./ej.radiobutton.min","./ej.autocomplete.min","./ej.datepicker.min","./ej.datetimepicker.min","./ej.dropdownlist.min","./ej.dialog.min","./ej.editor.min","./ej.pager.min","./ej.toolbar.min","./ej.excelfilter.min"],e):e()}(function(){var n,t,r;n=jQuery,t=Syncfusion,t.gridFeatures=t.gridFeatures||{},t.gridFeatures.common={refreshContent:function(e){e&&(this.refreshTemplate(),this._refreshHeader()),this.model.allowFiltering&&"filterbar"==this.model.filterSettings.filterType&&this._renderFilterBarTemplate();var i={};this._initialRenderings(),i.requestType=t.Grid.Actions.Refresh,this._processBindings(i)},rowHeightRefresh:function(){var e,i;if(this.model.scrollSettings.frozenColumns>0&&!t.isNullOrUndefined(this.model.currentViewData)&&this.model.currentViewData.length){var s=this.getContentTable().get(0).rows,l=this.getContentTable().get(1).rows,o=0;if(this.getContent().find(".e-frozencontentdiv").is(":visible"))for(e=0;e<s.length;e++)"none"!=n(s[e]).css("display")&&(o=t.max([s[e].getClientRects()[0].height,l[e].getClientRects()[0].height]),n(s[e]).height(o),n(l[e]).height(o),e&&(e==this.model.scrollSettings.frozenRows-1||e==s.length-1)&&(o+=1),this.model.allowTextWrap||e&&e!=this.model.scrollSettings.frozenRows-1||(o-=1),this.model.isEdit&&n(s[e]).find("#"+this._id+"EditForm").length&&e&&n(s[e]).find("#"+this._id+"EditForm td").css("height",o),n(l[e]).find("#"+this._id+"EditForm td").css("height",o));this._getRowHeights(),!t.isNullOrUndefined(this.getContent().data("ejScroller"))&&(null!=this.getScrollObject()._vScrollbar||this.getScrollObject().isVScroll())&&(i=this.getScrollObject()._vScrollbar,(t.isNullOrUndefined(i)||i.value()!=i.model.maximum)&&this._scrollObject.refresh(this.model.scrollSettings.frozenColumns>0))}},dataSource:function(e,t){t&&(this._templateRefresh=!0),this._dataSource(e),this.model.scrollSettings.enableVirtualization||(e.length>0?this._currentPage(1):this._currentPage(0)),this._updateDataSource=!0,this._refreshDataSource(e,t);var i=this._refreshVirtualPagerInfo();(this.model.allowPaging||this.model.scrollSettings.allowVirtualScrolling)&&this._showPagerInformation(i),this.model.scrollSettings.allowVirtualScrolling&&(this.model.scrollSettings.enableVirtualization&&this._isLocalData?this._refreshVirtualView():this._refreshVirtualContent(),this.getContent().ejScroller("isHScroll")&&this.getContent().ejScroller("scrollX",0,!0),this.getContent().ejScroller("isVScroll")?(this.model.scrollSettings.enableVirtualization||this.getContent().ejScroller("scrollY",0,!0),this.element.find(".e-gridheader").addClass("e-scrollcss")):this.element.find(".e-gridheader").removeClass("e-scrollcss")),(!this.model.scrollSettings.enableVirtualization||this._gridRows.length<this._virtualRowCount)&&this._addLastRow(),this._trigger("dataBound",{})},_refreshDataSource:function(e,i){this._dataManager=e instanceof t.DataManager?e:t.DataManager(e),this._isRemoteSaveAdaptor=this._dataSource()instanceof t.DataManager&&this._dataSource().adaptor instanceof t.remoteSaveAdaptor,this._isLocalData=!(this._dataSource()instanceof t.DataManager)||this._dataManager.dataSource.offline||this._isRemoteSaveAdaptor||this._dataSource().adaptor instanceof t.ForeignKeyAdaptor,this.model.scrollSettings.allowVirtualScrolling&&this.model.scrollSettings.enableVirtualization&&(this._refreshVirtualViewData(),this._virtualDataRefresh=!0,this._isLocalData&&this._refreshVirtualViewDetails(!0)),this.refreshContent(!!t.isNullOrUndefined(i)||i),t.isNullOrUndefined(this.getPager())||(this.getPager().ejPager("model.currentPage",1),this._refreshGridPager())},hideColumns:function(e){var i,s,l,o,a,r,d,h=0,c={},u=[],m=0;"string"==typeof e?this.getColumnByHeaderText(e):this.getColumnByHeaderText(e[0]),s="string"==typeof e?this.getColumnByField(e):this.getColumnByField(e[0]),this._showHideColumns=!0;var p=this._isDuplicate(n.merge(n.merge([],this._visibleColumns),this._hiddenColumns)),g=p?"_hiddenColumnsField":"_hiddenColumns",f=p?"_visibleColumnsField":"_visibleColumns";if(!p&&null!=s)if(n.isArray(e))for(l=0;l<e.length;l++)o=this.getColumnByField(e[l]),e[l]=null!=o?o.headerText:e[l];else e=s.headerText;if(n.isArray(e))for(l=0;l<e.length;l++)-1!=(i=n.inArray(e[l],this[f]))?(this[g].push(e[l]),this[f].splice(i,1)):-1==i&&"_visibleColumnsField"==f&&-1==n.inArray(e[l],this[g])&&t.isNullOrUndefined(this.getColumnByField(e[l]))&&(this[g].push(this.getColumnByHeaderText(e[l]).field)&&this._hiddenColumns.push(this.getColumnByHeaderText(e[l]).field),this[f].splice(n.inArray(this.getColumnByHeaderText(e[l]).field,this[f]),1)&&this._visibleColumns.splice(n.inArray(e[l],this._visibleColumns),1));else-1!=(i=n.inArray(e,this[f]))?(this[g].push(e),this[f].splice(i,1)):-1==i&&"_visibleColumnsField"==f&&-1==n.inArray(e,this[g])&&t.isNullOrUndefined(this.getColumnByField(e))&&(this[g].push(this.getColumnByHeaderText(e).field)&&this._hiddenColumns.push(this.getColumnByHeaderText(e).field),this[f].splice(n.inArray(this.getColumnByHeaderText(e).field,this[f]),1)&&this._visibleColumns.splice(n.inArray(e,this._visibleColumns),1));for(l=0;l<this.model.columns.length&&(a=p?"field":"headerText",-1!=n.inArray(t.isNullOrUndefined(this.model.columns[l][a])||""==this.model.columns[l][a]?this.model.columns[l].headerText:this.model.columns[l][a],this[g])&&(this.model.columns[l].visible&&u.push(this.model.columns[l]),this.model.columns[l].visible=!1,this.model.allowScrolling&&this.model.scrollSettings.frozenColumns>0&&this.model.columns.indexOf(this.model.columns[l])<this.model.scrollSettings.frozenColumns&&m++,h++),this[g].length!=h);l++);c.requestType="refresh",this._hideHeaderColumn(this[g],p),this.model.allowScrolling&&this.model.scrollSettings.frozenColumns>0&&(r=this._renderGridHeader(),this.element.find(".e-gridheader").replaceWith(r[0]),this.model.allowFiltering&&"filterbar"==this.model.filterSettings.filterType&&this._renderFiltering(),this.model.allowReordering&&this._headerCellreorderDragDrop()),this.refreshTemplate(),this.model.scrollSettings.allowVirtualScrolling&&this._virtualShowHide(c),this._isAddNew&&this.model.isEdit&&(this.model.query=this.commonQuery.clone(),this._ensureDataSource(c),this._isAddNew=!1),this.sendDataRenderingRequest(c),this.rowHeightRefresh(),this.model.allowScrolling&&(0!=this.model.scrollSettings.frozenColumns||t.isIOSWebView()||"msie"!=this.getBrowserDetails().browser||(d=this._calculateWidth(),this.getHeaderTable().width(d),this.getContentTable().width(d)),t.isNullOrUndefined(this._scrollObject)||this.getScrollObject().refresh()),this.model.showColumnChooser&&this._refreshColumnChooserList(),this.model.allowScrolling&&this.model.scrollSettings.frozenColumns>0&&(m==this.model.scrollSettings.frozenColumns&&this._frozenPaneRefresh(),this.getScrollObject().refresh()),this._showHideColumns=!1},showColumns:function(e){var i,s,l,o,a,r,d,h=0,c={},u=[];"string"==typeof e?this.getColumnByHeaderText(e):this.getColumnByHeaderText(e[0]),i="string"==typeof e?this.getColumnByField(e):this.getColumnByField(e[0]),this._showHideColumns=!0;var m=this._isDuplicate(n.merge(n.merge([],this._visibleColumns),this._hiddenColumns)),p=m?"_hiddenColumnsField":"_hiddenColumns",g=m?"_visibleColumnsField":"_visibleColumns";if(!m&&null!=i)if(n.isArray(e))for(r=0;r<e.length;r++)s=this.getColumnByField(e[r]),e[r]=null!=s?s.headerText:e[r];else e=i.headerText;if(n.isArray(e))for(r=0;r<e.length;r++)-1!=(a=n.inArray(e[r],this[p]))?(this[p].splice(a,1),this[g].push(e[r])):-1==a&&"_hiddenColumnsField"==p&&-1==n.inArray(e[r],this[g])&&t.isNullOrUndefined(this.getColumnByField(e[r]))&&(this[g].push(this.getColumnByHeaderText(e[r]).field)&&this._visibleColumns.push(e[r]),this[p].splice(n.inArray(this.getColumnByHeaderText(e[r]).field,this[p]),1)&&this._hiddenColumns.splice(n.inArray(e[r],this._hiddenColumns),1));else-1!=(a=n.inArray(e,this[p]))?(this[p].splice(a,1),this[g].push(e)):-1==a&&"_hiddenColumnsField"==p&&-1==n.inArray(e,this[g])&&t.isNullOrUndefined(this.getColumnByField(e))&&(this[g].push(this.getColumnByHeaderText(e).field)&&this._visibleColumns.push(e),this[p].splice(n.inArray(this.getColumnByHeaderText(e).field,this[p]),1)&&this._hiddenColumns.splice(n.inArray(e,this._hiddenColumns),1));for(r=0;r<this.model.columns.length&&(l=m?"field":"headerText",-1!=n.inArray(t.isNullOrUndefined(this.model.columns[r][l])||""==this.model.columns[r][l]?this.model.columns[r].headerText:this.model.columns[r][l],this[g])&&(this.model.columns[r].visible||u.push(this.model.columns[r]),this.model.columns[r].visible=!0,h++),this[g].length!=h);r++);if(this.model.allowScrolling&&this.model.scrollSettings.frozenColumns>0){for(o=!1,r=0;r<u.length;r++)(a=this.model.columns.indexOf(u[r]))<this.model.scrollSettings.frozenColumns&&(o=!0);if(o){for(r=0;r<this.model.columns.length;r++)-1!=n.inArray(this.model.columns[r].headerText,this._hiddenColumns)?this.model.columns[r].visible=!1:-1!=n.inArray(this.model.columns[r].headerText,this._visibleColumns)&&(this.model.columns[r].visible=!0);d=this._renderGridHeader(),this.element.find(".e-gridheader").replaceWith(d[0]),this.model.allowFiltering&&"filterbar"==this.model.filterSettings.filterType&&this._renderFiltering(),this.model.allowReordering&&this._headerCellreorderDragDrop()}}c.requestType="refresh",this._showHeaderColumn(this[g],m),this.refreshTemplate(),this.model.scrollSettings.allowVirtualScrolling&&this._virtualShowHide(c),this._isAddNew&&this.model.isEdit&&(this.model.query=this.commonQuery.clone(),this._ensureDataSource(c),this._isAddNew=!1),this.sendDataRenderingRequest(c),this.rowHeightRefresh(),this.model.allowScrolling&&!t.isNullOrUndefined(this._scrollObject)&&this.getScrollObject().refresh(),this.model.showColumnChooser&&this._refreshColumnChooserList(),this._showHideColumns=!1},_virtualShowHide:function(e){this._currentPage(1),this.model.query=this.commonQuery.clone(),this._ensureDataSource(e),this._loadedJsonData=[],this._prevPage=this._currentPage()},resizeColumns:function(e,t){var i,s;if(e instanceof Array)for(i=0;i<e.length;i++)s=t instanceof Array?t[i]:t,this._setWidthColumnCollection(e[i],s);else this._setWidthColumnCollection(e,t);this.setWidthToColumns(),this.model.scrollSettings.frozenColumns&&(this._frozenAlign(),this.rowHeightRefresh())},_setWidthColumnCollection:function(e,t){var i=this.getColumnByHeaderText(e)||this.getColumnByField(e);i.width=t,-1==n.inArray(i.field,this._disabledResizingColumns)&&(this.columnsWidthCollection[n.inArray(i,this.model.columns)]=t)},refreshTemplate:function(){this.addInitTemplate(),(this.model.editSettings.allowEditing||this.model.editSettings.allowAdding)&&this._processEditing(),this.model.allowGrouping&&this.addGroupingTemplate()},_refreshHeader:function(){var e=this.element.find(".e-gridheader");this.element[0].replaceChild(this._renderGridHeader()[0],e[0]),this.model.allowFiltering&&"filterbar"==this.model.filterSettings.filterType&&this._renderFiltering(),this.model.allowGrouping&&this._headerCellgDragDrop(),this.model.allowReordering&&this._headerCellreorderDragDrop(),this.model.showColumnChooser&&this._renderColumnChooserData(!0),"both"!=this.model.gridLines&&this._showHeaderGridLines()},set_dropColumn:function(e,i){var s,l,o,a,d,h,c,u,m,p,g,f,_,v;if(this.model.allowReordering&&e!=i){this.model.columns.splice(i,0,this.model.columns.splice(e,1)[0]);var b=this.model.columns,C=this.getHeaderTable().find(".e-columnheader:last .e-headercell").not(".e-stackedHeaderCell"),w=C.find(".e-headercelldiv");this.model.scrollSettings.frozenColumns||this.getHeaderTable().find("colgroup").replaceWith(this._getMetaColGroup()),(null!=this.model.detailsTemplate||null!=this.model.childGrid)&&this.getHeaderTable().find("colgroup").prepend(this._getIndentCol()),s=function(e){var t,i,s,l=[];if(e!=r){-1==["",r].indexOf(e.value)&&(l.push({name:"value",value:e.value}),e.value="");for(var o=0,a=e.attributes,d=a.length;o<d;o++)t=/^jQuery[0-9]+$/,a[o].name.match(t)||l.push({name:a[o].name,value:a[o].value});for(i=0,s=l.length;i<s;i++)n(e).removeAttr(l[i].name);return l}},l=function(e,t){if(t!=r)for(var i=0,s=e.length;i<s;i++)"value"==e[i].name&&(t.value=e[i].value),n(t).attr(e[i].name,e[i].value)},this.getHeaderTable().find(".e-filterdiv").length>0&&(o=this.getHeaderTable().find(".e-filterdiv input"));var y=t.isNullOrUndefined(o),S={cellattributes:[],headerattributes:[],filtercellattributes:[],filterThattributes:[]},x=e<i?e:i,T=e<i?i:e;for(f=x,_=0;f<=T;f++)a=null!=this.model.detailsTemplate||null!=this.model.childGrid?f+1:f,S.headerattributes[_]=s(C[a]),S.cellattributes[_]=s(w[f]),S.filtercellattributes[_]=y?[]:s(o[f]),S.filterThattributes[_]=y?[]:s(n(o[f]).closest("th")[0]),_++;for(c in d=e<i?S.cellattributes.length-1:0,h=e<i?0:S.cellattributes.length-1,S)S[c].splice(d,0,S[c].splice(h,1)[0]);for(f=x,_=0;f<=T;f++)u=null!=this.model.detailsTemplate||null!=this.model.childGrid?f+1:f,l(S.headerattributes[_],C[u]),l(S.cellattributes[_],w[f]),y||l(S.filtercellattributes[_],o[f]),y||l(S.filterThattributes[_],n(o[f]).closest("th")[0]),_++;if(this.model.allowFiltering&&-1!=["menu","excel"].indexOf(this.model.filterSettings.filterType)){for(this._$fDlgIsOpen&&this._closeFDialog(),m=this.model.columns,C.find(".e-filtericon").remove(),f=0;f<m.length;f++)(m[f].allowFiltering||t.isNullOrUndefined(m[f].allowFiltering))&&C.find(".e-headercelldiv[ej-mappingname="+m[f].field+"]").closest(".e-headercell").append(t.buildTag("div.e-filtericon e-icon e-filterset"));this._refreshFilterIcon()}for(this.columnsWidthCollection.splice(i,0,this.columnsWidthCollection.splice(e,1)[0]),this._fieldColumnNames=this._headerColumnNames=[],g=0;g<b.length;g++)this._fieldColumnNames[b[g].headerText]=b[g].field,this._headerColumnNames[b[g].field]=b[g].headerText,p=n(w[g]),t.isNullOrUndefined(b[g].headerTemplateID)?"checkbox"==b[g].type?p.html("<input type = 'checkbox' class = 'e-checkselectall'></input>"):b[g].disableHtmlEncode?p.text(b[g].headerText):p.html(b[g].headerText):p.html(n(b[g].headerTemplateID).html()),this.model.groupSettings.showToggleButton&&(t.isNullOrUndefined(b[g].allowGrouping)||b[g].allowGrouping)&&(-1!=n.inArray(b[g].field,this.model.groupSettings.groupedColumns)?p.append(this._getToggleButton().addClass("e-toggleungroup")):p.append(this._getToggleButton().addClass("e-togglegroup")));if(this.model.allowGrouping&&1!=this.model.allowSorting)for(f=0;f<this.model.sortSettings.sortedColumns.length;f++)this._addSortElementToColumn(this.model.sortSettings.sortedColumns[f].field,this.model.sortSettings.sortedColumns[f].direction);if(this.model.allowSorting)for(f=0;f<this.model.sortSettings.sortedColumns.length;f++){var D=1,k=this.model.sortSettings.sortedColumns[f],I=this.getsortColumnByField(k.field),O=this.getColumnIndexByField(k.field),R=n.inArray(I,this.model.sortSettings.sortedColumns);if(imageDirection="descending"!=k.direction?"e-rarrowup-2x":"e-rarrowdown-2x",this.model.allowMultiSorting){for(_=1;_<=R;_++)D+=1;"right"==w.eq(O).css("text-align")?(this.model.sortSettings.sortedColumns.length>1&&w.eq(O).prepend(this._createSortNumber(D,w.eq(O)).addClass("e-sortnumber")),w.eq(O).append(this._createSortElement().addClass("e-"+(k.direction||"ascending")+" "+imageDirection))):(w.eq(O).append(this._createSortElement().addClass("e-"+(k.direction||"ascending")+" "+imageDirection)),this.model.sortSettings.sortedColumns.length>1&&w.eq(O).append(this._createSortNumber(D,w.eq(O)).addClass("e-sortnumber")))}else imageDirection="descending"!=k.direction?"e-rarrowup-2x":"e-rarrowdown-2x",w.eq(O).append(this._createSortElement().addClass("e-"+(k.direction||"ascending")+" "+imageDirection))}(v={}).requestType=t.Grid.Actions.Reorder,this._isReorder=!0,this.refreshTemplate(),this._isAddNew&&this.model.isEdit&&(this.model.query=this.commonQuery.clone(),this._ensureDataSource(v),this._isAddNew=!1),this.sendDataRenderingRequest(v),this._isReorder=!1}},getPager:function(){return this._gridPager},getFooterTable:function(){return this._gridFooterTable},setGridFooterTable:function(e){this._gridFooterTable=e},getFooterContent:function(){return this._gridFooterContent},setGridFooterContent:function(e){this._gridFooterContent=e},getScrollObject:function(){return(null==this._scrollObject||t.isNullOrUndefined(this._scrollObject.model))&&(this._scrollObject=this.getContent().ejScroller("instance")),this._scrollObject},setGridPager:function(e){this._gridPager=e},getRowHeight:function(){var e,t,i,s=-1;return null!=this.getContentTable()&&(t=(e=this.getContentTable().find("tr:not(.e-virtualrow)")).length>2?1:0,e.length&&(i=e[t].getBoundingClientRect()),e.length>1&&(s=i&&i.height?i.height:e[t].offsetHeight)),-1==s?32:s},getCurrentIndex:function(){return(this._currentPage()-1)*this.model.pageSettings.pageSize},getColumnByIndex:function(e){return e<this.model.columns.length?this.model.columns[e]:null},set_currentPageIndex:function(e){var i,s=this.model.pageSettings,l=0==this.model.filterSettings.filteredColumns.length?null==this._searchCount?this._gridRecordsCount:this._searchCount:this._filteredRecordsCount;return null==s.totalPages&&(s.totalPages=Math.ceil(l/s.pageSize)),!(e>s.totalPages||e<1||e==this._currentPage()||(t.isNullOrUndefined(this._prevPageNo)&&(this._prevPageNo=this._currentPage()),this._currentPage(e),this._currentPage()==this._prevPageNo||((i={}).requestType="paging",this.gotoPage(this._currentPage(),i),0)))},set_currentVirtualIndex:function(e){var t,i;return!(e<1||1!=e&&e!=this._totalVirtualViews&&e==this._currentVirtualIndex&&this._checkCurrentVirtualView(this._virtualLoadedRows,e)||(this._prevVirtualIndex=this._currentVirtualIndex,this._currentVirtualIndex=e,(t=this._calculateCurrentViewPage())<=this.model.pageSettings.totalPages&&!this._checkCurrentVirtualView(this._virtualLoadedRecords,this._currentVirtualIndex)?this._prevVirtualIndex<e&&1!=e?(i=this._isThumbScroll&&1!=t?t:t+1,!this._virtualPageRecords[i]&&i<=this.model.pageSettings.totalPages?this._setCurrentViewPage(i):this._renderVirtulViewContent(t)):this._prevVirtualIndex>e?(i=this._isThumbScroll?t:t-1,this._virtualPageRecords[i]&&!this._virtualLoadedRecords[e-1]&&(i=t-1),!this._virtualPageRecords[i]&&i>=1&&this._setCurrentViewPage(i)):this._renderVirtulViewContent(t):this._renderVirtulViewContent(t),0))},_setCurrentViewPage:function(e){this._needPaging=!0,this._prevPageNo=this._currentPage(),this.gotoPage(e)},_renderVirtulViewContent:function(){this._needPaging=!1,this._refreshVirtualView(this._currentVirtualIndex),this.element.ejWaitingPopup("hide")},_checkCurrentVirtualView:function(e,t){var i,s=this._virtualRowCount,l=t-1,o=t+1;if(e instanceof Array){if(e.length&&((0==l||o==this._totalVirtualViews+1)&&-1!=n.inArray(t,e)||-1!=n.inArray(l,e)&&-1!=n.inArray(t,e)&&-1!=n.inArray(o,e)))return!0}else if(i=o==this._totalVirtualViews?this._lastViewData:s,!this.initialRender&&1==t&&this._virtualLoadedRows[t]||t==this._totalVirtualViews&&e==this._virtualLoadedRows&&e[t]||0==l&&e[t]&&e[t].length==s||o==this._totalVirtualViews+1&&e[t]&&e[t].length==this._lastViewData||e[l]&&e[l].length==s&&e[t]&&e[t].length==s&&e[o]&&e[o].length==i)return!0;return!1},expandCollapse:function(e){var i,s,l,o,a,d,h;if("DIV"==e.prop("tagName")&&(e.parent().hasClass("e-recordplusexpand")||e.parent().hasClass("e-recordpluscollapse")||e.parent().hasClass("e-detailrowcollapse")||e.parent().hasClass("e-detailrowexpand"))&&(e=e.parent()),i=-1,this.model.allowGrouping&&(t.isOnWebForms||this.initialRender))for(s=e.attr("ej-mappingname"),fieldValue=e.attr("ej-mappingvalue"),e.parents(".e-tabletd").length&&(l=e.parents(".e-tabletd").parent("tr").prev("tr").find(".e-recordplusexpand").attr("ej-mappingvalue")),o=this.model._groupingCollapsed,h=0;h<o.length;h++)if(o[h].key==s&&o[h].value==fieldValue&&(o[h].parent==r||o[h].parent==l)){i=h;break}if(e.hasClass("e-recordplusexpand")||e.hasClass("e-recordpluscollapse")||e.hasClass("e-detailrowcollapse")||e.hasClass("e-detailrowexpand")){if(e.hasClass("e-recordplusexpand")&&this.model.groupSettings.groupedColumns.length)u=e.index(),(m=e.closest("tr").next()).hide(),e.removeClass("e-recordplusexpand").addClass("e-recordpluscollapse").find("div").removeClass("e-gdiagonalnext").addClass("e-gnextforward"),(t.isOnWebForms||this.initialRender)&&-1==i&&this.model._groupingCollapsed.push({key:s,value:fieldValue,parent:l});else if(e.hasClass("e-recordpluscollapse")&&this.model.groupSettings.groupedColumns.length){var c,u=e.index(),m=e.closest("tr").next(),p=[];for(n((c=m)[0].cells[u]).hasClass("e-indentcell")&&c.children(".e-indentcell").length==e.parent().children(".e-indentcell").length+1&&(c.show(),null!=(d=c.children(".e-recordplusexpand"))&&d.length>0&&p.push(d)),e.removeClass("e-recordpluscollapse").addClass("e-recordplusexpand").find("div").removeClass("e-gnextforward").addClass("e-gdiagonalnext"),h=0;h<p.length;h++)p[h].removeClass("e-recordplusexpand").addClass("e-recordpluscollapse").find("div").removeClass("e-gdiagonalnext").addClass("e-gnextforward"),this.expandCollapse(p[h]);(t.isOnWebForms||this.initialRender)&&-1!=i&&this.model._groupingCollapsed.splice(i,1)}else if(e.hasClass("e-detailrowexpand")){u=e.index();var g=this,f=this.getIndexByRow(e.closest("tr"));(m=e.closest("tr").next()).hide(0,function(){var i={masterRow:e.closest("tr"),detailsRow:m,masterData:g._currentJsonData[f]},s=g._getForeignKeyData(i.masterData);t.isNullOrUndefined(s)||(i.foreignKeyData=s),g._trigger("detailsCollapse",i),null!=g.model.childGrid&&g.model.allowScrolling&&g._refreshScroller({requestType:"refresh"})}),e.removeClass("e-detailrowexpand").addClass("e-detailrowcollapse").find("div").addClass("e-gnextforward").removeClass("e-gdiagonalnext")}else if(e.hasClass("e-detailrowcollapse")){u=e.index(),g=this,f=this.getIndexByRow(e.closest("tr"));var _=e.closest("tr").next();if(_.hasClass("e-detailrow"))m=_;else{var v=t.buildTag("tr.e-detailrow","",{display:"none"},{}),b=t.buildTag("td.e-detailindentcell"),C=this.model.groupSettings.showGroupedColumn?0:this.model.groupSettings.groupedColumns.length,w=t.buildTag("td.e-detailcell","",{},{colspan:this._visibleColumns.length-C}),y=t.buildTag("div"),S=n(e.closest("tr")).parents(".e-grid").length;y.attr("id","child"+S+"_grid"+f+Math.round(1e3*Math.random())),n(v).append(b),n(v).append(w),a=this._currentJsonData[f],this.model.detailsTemplate&&n(v).append(w.append(this._renderEjTemplate(this.model.detailsTemplate,a))),n(e.closest("tr")).after(v),this.model.childGrid&&(this.model.childGrid.parentDetails={parentID:this._id,parentPrimaryKeys:this.getPrimaryKeyFieldNames(),parentKeyField:this.model.childGrid.queryString,parentKeyFieldValue:a[this.model.childGrid.queryString],parentRowData:a},n(v).append(w.append(y))),m=v}for(this._showGridLines(),p=[],n((c=m)[0].cells[u]).hasClass("e-detailindentcell")&&(c.show(0,function(){var i={masterRow:e.closest("tr"),detailsRow:m,masterData:g._currentJsonData[f]},s=g._getForeignKeyData(i.masterData);t.isNullOrUndefined(s)||(i.foreignKeyData=s),g._trigger("detailsExpand",i),null!=g.model.childGrid&&g.model.allowScrolling&&g._refreshScroller({requestType:"refresh"})}),_.hasClass("e-detailrow")||(this._trigger("detailsDataBound",{detailsElement:v,data:a}),this._trigger("refresh")),this.model.childGrid&&!t.isNullOrUndefined(y)&&y.ejGrid(this.model.childGrid),null!=(d=c.children(".e-detailrowexpand"))&&d.length>0&&p.push(d)),e.removeClass("e-detailrowcollapse").addClass("e-detailrowexpand").find("div").addClass("e-gdiagonalnext").removeClass("e-gnextforward"),h=0;h<p.length;h++)p[h].removeClass("e-detailrowexpand").addClass("e-detailrowcollapse").find("div").removeClass("e-gdiagonalnext").addClass("e-gnextforward"),this.expandCollapse(p[h])}!this.model.allowScrolling||t.isNullOrUndefined(this._scrollObject&&this._scrollObject.model)||e.closest(".e-hscroll").length||this.getScrollObject().refresh(),this.model.isResponsive&&this.windowonresize()}},_refreshGridPager:function(){var e,i,s;null!=this.getPager()&&(e=this.getPager().ejPager("model"),(i={}).currentPage=this._currentPage(),0==this._filteredRecordsCount&&0==this.model.currentViewData.length&&(t.isNullOrUndefined(this._prevPageNo)||this._prevPageNo)?(i.currentPage=0,this._prevPageNo=e.currentPage,this.model.pageSettings.currentPage=0):0==e.currentPage&&(t.isNullOrUndefined(this._prevPageNo)||this._prevPageNo)&&(i.currentPage=this._prevPageNo),s=this.model.editSettings.showAddNewRow&&0==this.model.groupSettings.groupedColumns.length?1:0,i.totalRecordsCount=0==this.model.filterSettings.filteredColumns.length?null==this._searchCount?this._gridRecordsCount-s:this._searchCount:this._filteredRecordsCount,t.util.isNullOrUndefined(i.currentPage)&&(i.currentPage=this._currentPage()),this.getPager().ejPager("option",i).ejPager("refreshPager"),this.model.pageSettings.totalPages=e.totalPages||null,this.model.pageSettings.totalRecordsCount=e.totalRecordsCount||null)},_showHeaderColumn:function(e,i){for(var s,l,o,a,r,d=this.getHeaderTable().find("thead"),h=d.find("tr").not(".e-stackedHeaderRow").find(".e-headercell"),c=d.find(".e-filterbar").find(".e-filterbarcell"),u=this.getHeaderTable().find("colgroup").find("col"),m=0;m<e.length;m++)r=i?t.isNullOrUndefined(this.getColumnByField(e[m]))?this.getColumnByHeaderText(e[m],t.isNullOrUndefined(this.getColumnByField(e[m]))):this.getColumnByField(e[m]):this.getColumnByHeaderText(e[m]),s=n.inArray(r,this.model.columns),s=null!=this.model.detailsTemplate||this.model.childGrid?s+1:s,o=0!=(l=this.model.scrollSettings.frozenColumns)&&s>=l?h.eq(s).removeClass("e-hide").index()+l:h.eq(s).removeClass("e-hide").index(),c.eq(o).removeClass("e-hide"),u.length>this.model.columns.length&&this.model.groupSettings.groupedColumns.length&&(a=u.length-this.model.columns.length,u=u.slice(this.model.detailsTemplate||this.model.childGrid?a+1:a)),u.eq(s).css("display","");this.model.showStackedHeader&&this._refreshStackedHeader()},_hideHeaderColumn:function(e,i){for(var s,l,o=this.getHeaderTable().find("thead"),a=o.find("tr").not(".e-stackedHeaderRow").find(".e-headercell"),r=o.find(".e-filterbar").find(".e-filterbarcell"),d=this.getHeaderTable().find("colgroup").find("col"),h=0;h<e.length;h++){l=i?t.isNullOrUndefined(this.getColumnByField(e[h]))?this.getColumnByHeaderText(e[h],t.isNullOrUndefined(this.getColumnByField(e[h]))):this.getColumnByField(e[h]):this.getColumnByHeaderText(e[h]);var c=n.inArray(l,this.model.columns),u=null!=this.model.detailsTemplate||this.model.childGrid?c+1:c,m=this.model.scrollSettings.frozenColumns;s=0!=m&&c>=m?a.eq(u).addClass("e-hide").index()+m:a.eq(u).addClass("e-hide").index(),r.eq(s).addClass("e-hide"),d.length>this.model.columns.length&&(d=d.slice(d.length-this.model.columns.length)),d.eq(c).css("display","none")}this.model.showStackedHeader&&(this._refreshStackedHeader(),this._colgroupRefresh())},_refreshStackedHeader:function(){var e,t,i,s;if(this.model.showStackedHeader){for(e=this.model.stackedHeaderRows,s=0;s<e.length;s++)if(0!=this.model.scrollSettings.frozenColumns){var l=n(this.getHeaderContent().find(".e-frozenheaderdiv")),o=n(this.getHeaderContent().find(".e-movableheader")),a=this._createStackedRow(e[s],!0),r=this._createStackedRow(e[s],!1);n(l.find("tr.e-stackedHeaderRow")[s]).replaceWith(a),n(o.find("tr.e-stackedHeaderRow")[s]).replaceWith(r)}else t=this._createStackedRow(e[s],!1),this.getHeaderTable().find("tr.e-stackedHeaderRow")[s]?n(this.getHeaderTable().find("tr.e-stackedHeaderRow")[s]).replaceWith(t):t.insertBefore(this.getHeaderTable().find("tr.e-columnheader:last"));if((i={}).requestType="refresh",this.model.allowGrouping&&this.model.groupSettings.groupedColumns.length>0)for(s=0;s<this.model.groupSettings.groupedColumns.length;s++)this.getHeaderTable().find(".e-stackedHeaderRow").prepend(this._getGroupTopLeftCell());this.model.allowScrolling&&this._refreshScroller(i)}},_getStackedColumnByTarget:function(e){var i=(e.get(0)||{}).className,s=/e-row([0-9])-column([0-9])/.exec(i),l=[s[1],"stackedHeaderColumns",s[2]].join(".");return t.getObject(l,this.model.stackedHeaderRows)},_checkSkipAction:function(e){switch(e.requestType){case t.Grid.Actions.Save:case t.Grid.Actions.Delete:return!0}return!1},_unboundTemplateRendering:function(e){return n("#"+e).html()},_processBindings:function(e){var i,s,l;if(this._requestType=e.requestType,this.model.query=this.commonQuery.clone(),!this._checkSkipAction(e)&&this._trigger("actionBegin",e))return!0;if("batch"==this.model.editSettings.editMode&&"batchsave"!=e.requestType&&"cancel"!=e.requestType&&!this._confirmedValue&&this._bulkChangesAcquired()&&this.model.editSettings.showConfirmDialog)return this._confirmDialog.find(".e-content").html(this.localizedLabels.BatchSaveLostChanges),this._confirmDialog.ejDialog("open"),this._requestArgs=e,!1;if(!t.isNullOrUndefined(this.model.dataSource)&&"refresh"==e.requestType&&this.model.scrollSettings.allowVirtualScrolling&&(this._currentPage(1),this._scrollValue=0,this._loadedJsonData=[],this._prevPage=this._currentPage()),this._ensureDataSource(e),this.model.scrollSettings.allowVirtualScrolling&&("virtualscroll"==e.requestType?(this._loadedJsonData.push({pageIndex:this._prevPage,data:this._currentJsonData}),this._prevPage=this._currentPage()):this.model.scrollSettings.enableVirtualization||(this._virtualLoadedRecords[this._currentPage()]=t.isNullOrUndefined(this._currentPageData)?this.model.currentViewData:this._currentPageData,this._currentPageData=null),"filtering"==e.requestType&&(this._loadedJsonData=[],this._prevPage=this._currentPage(),n("#"+this._id+"_externalEdit").remove()),(e.requestType==t.Grid.Actions.Delete||e.requestType==t.Grid.Actions.Add)&&this._refreshVirtualViewDetails()),this.model.scrollSettings.allowVirtualScrolling&&"filtering"==e.requestType&&this.model.filterSettings.filteredColumns.length>0&&this.getScrollObject().scrollY(0),this.model.enableRTL?this.element.hasClass("e-rtl")||this.element.addClass("e-rtl"):this.element.hasClass("e-rtl")&&this.element.removeClass("e-rtl"),e.requestType==t.Grid.Actions.Delete&&0==this.model.groupSettings.groupedColumns.length&&(this.model.editSettings.showAddNewRow&&this.getContentTable().find(".e-addedrow").remove(),e.tr.remove()),this._editForm=this.model.scrollSettings.frozenColumns>0||this.model.editSettings.showAddNewRow?this.element.find(".gridform"):n("#"+this._id+"EditForm"),(!this.model.editSettings.showAddNewRow||"beginedit"!=e.requestType)&&0!=this._editForm.length)for(i=0;i<this._editForm.length;i++)n(this._editForm[i]).find("select.e-dropdownlist").ejDropDownList("destroy"),n(this._editForm[i]).find(".e-datepicker").ejDatePicker("destroy"),n(this._editForm[i]).find(".e-datetimepicker").ejDateTimePicker("destroy"),n(this._editForm[i]).find(".e-numerictextbox").ejNumericTextbox("destroy");if(!(this._dataSource()instanceof t.DataManager)||this._isRemoteSaveAdaptor||e.requestType==t.Grid.Actions.BeginEdit||e.requestType==t.Grid.Actions.Cancel||e.requestType==t.Grid.Actions.Add||this._dataSource().adaptor instanceof t.SqlDataSourceAdaptor&&(e.requestType==t.Grid.Actions.Save||e.requestType==t.Grid.Actions.Delete))this._isRelationalRendering(e)?this._setForeignKeyData(e):this.sendDataRenderingRequest(e);else{this.model.scrollSettings.allowVirtualScrolling&&!this.model.scrollSettings.enableVirtualization&&this.model.pageSettings.totalPages==this.model.pageSettings.currentPage&&-1==this.virtualLoadedPages.indexOf((this._prevPageNo-1)*this.model.pageSettings.pageSize)&&(s=t.pvt.filterQueries(this.model.query.queries,"onPage"),this.model.query.queries.splice(n.inArray(s[0],this.model.query.queries),1),this.model.query.page(this._currentPage()-1,this.model.pageSettings.pageSize),l=this._dataSource().executeQuery(this.model.query),this.model.query.queries.splice(n.inArray(s[0],this.model.query.queries),1),this.model.query.page(this._currentPage(),this.model.pageSettings.pageSize)),this._virtualSelectedRows&&this._virtualSelectedRows.length>0&&this.model.query.addParams("virtualSelectRecords",this._virtualSelectedRows);var o=this._queryPromise=this._dataSource().executeQuery(this.model.query),a=(this.element.ejWaitingPopup("instance"),this);this.element.ejWaitingPopup("show"),a._dataSource().ready?a._dataSource().ready.done(function(){a._processDataRequest(a,e,o,l)}):a._processDataRequest(a,e,o,l)}},_processDataRequest:function(e,i,s,l){s.done(t.proxy(function(s){var n,o;if(0==e._relationalColumns.length&&e.element.ejWaitingPopup("hide"),l&&!e._previousPageRendered)e._processLastPageData(e,i,s.result,l),e.model.previousViewData&&0!=e.model.previousViewData.length&&(e.model.previousViewData.splice(0,s.result.length),e._previousPageLength=s.result.length,e._currentPageData=s.result,t.merge(e.model.previousViewData,s.result),e.model.currentViewData=e.model.previousViewData,e._remoteLastPageRendered=!0);else if(e._remoteLastPageRendered&&e.model.pageSettings.currentPage==e.model.pageSettings.totalPages-1&&!e.model.scrollSettings.enableVirtualization){for(n=e.model.pageSettings.pageSize-e._previousPageLength,o=0;o<n;o++)e.getRows()[e.getRows().length-(e.model.pageSettings.pageSize-o)].remove();e._tempPageRendered=!0,e.model.currentViewData=s.result}else e._identityKeys.length&&"add"==i.action&&this.adaptor instanceof t.ODataAdaptor&&e._processIdentityField(s.result,i),e.model.pageSettings.currentPage!=e.model.pageSettings.totalPages-1||e._remoteLastPageRendered||(e._previousPageRendered=!0),e.model.currentViewData=null==s.result?[]:s.result,e._$fkColumn&&"excel"==e.model.filterSettings.filterType&&e.model.filterSettings.filteredColumns.length>0&&(e._fkParentTblData=s.result);e.model.currentViewData=null==s.result?[]:s.result,e.model.allowScrolling&&e.model.scrollSettings.allowVirtualScrolling&&e.model.scrollSettings.enableVirtualization&&("filtering"==i.requestType&&(e._gridRecordsCount=e._filteredRecordsCount=s.count,e._refreshVirtualViewDetails()),s.result.length?(e._isInitNextPage||e._isLastVirtualpage?(e._setInitialCurrentIndexRecords(s.result,e._currentPage()),e._isInitNextPage=e._isLastVirtualpage=!1):(e._gridRecordsCount=s.count,e._refreshVirtualViewDetails(),e._setVirtualLoadedRecords(s.result,e._currentPage())),e._isThumbScroll&&!e._checkCurrentVirtualView(e._virtualLoadedRecords,e._currentVirtualIndex)&&e._checkPrevNextViews(),e._remoteRefresh=!0):e.getContent().find(".e-virtualtop, .e-virtualbottom").remove()),t.isNullOrUndefined(s.aggregates)||(e._remoteSummaryData=s.aggregates),e._processData(s,i),t.isNullOrUndefined(e._unboundRow)||i.selectedRow==e._unboundRow||"save"!=i.requestType||(e._unboundRow.find(".e-editbutton").trigger("click"),e._unboundRow=null)})),s.fail(t.proxy(function(s){e.element.ejWaitingPopup("hide"),i.error=s.error,s=[],e.model.currentViewData=[],e._processData(s,i),t.isNullOrUndefined(e.getPager())||e.getPager().ejPager({currentPage:0,totalRecordsCount:0}),e._trigger("actionFailure",i)}))},_processIdentityField:function(e,i){var s=this._primaryKeys[0],l=t.distinct(e,s),o=t.distinct(this.model.currentViewData,s),a=n.grep(l,function(e){return-1==n.inArray(e,o)}),r=t.DataManager(e).executeLocal((new t.Query).where(s,"equal",a))[0];i.data=t.isNullOrUndefined(r)?i.data:r},_processLastPageData:function(e,i,s,l){l.done(t.proxy(function(t){e.model.previousViewData=t.result})),l.fail(t.proxy(function(t){e.element.ejWaitingPopup("hide"),i.error=t.error,t=[],e.model.previousViewData=[],e._processData(t,i),e._trigger("actionFailure",i)}))},_createUnboundElement:function(e,i){var s,l,o,a,r=document.createElement("div");for(e.headerText=t.isNullOrUndefined(e.headerText)?e.field:e.headerText,t.isNullOrUndefined(e.headerText)||(r.id=this._id+e.headerText.replace(/[^a-z0-9|s_]/gi,"")+i+"_UnboundTemplate"),s=t.buildTag("div.e-unboundcelldiv"),l=e.commands,o=0;o<l.length;o++)(a=t.buildTag("button.e-"+l[o].type.replace(/\s+/g,"")+"button","",{},{type:"button"})).val(l[o].type),s.append(a);return n("body").append(n(r).html(s).hide()),r},_refreshUnboundTemplate:function(e){var i,s,l,o,a,r;if(this._isUnboundColumn)for(i=0;i<this.model.columns.length;i++)if(this.model.columns[i].commands)for(s=e.find(".e-unboundcell.e-"+this.model.columns[i].headerText.replace(/[^a-z0-9|s_]/gi,"")+i).find(".e-unboundcelldiv"),l=n.extend(!0,[],this.model.columns[i].commands),o=0;o<l.length;o++){for(t.isNullOrUndefined(l[o].buttonOptions)&&(l[o].buttonOptions={}),l[o].buttonOptions.width=t.isNullOrUndefined(l[o].buttonOptions.width)?"52":l[o].buttonOptions.width,l[o].buttonOptions.height=t.isNullOrUndefined(l[o].buttonOptions.height)?"28":l[o].buttonOptions.height,l[o].buttonOptions.cssClass=t.isNullOrUndefined(l[o].buttonOptions.cssClass)?this.model.cssClass:l[o].buttonOptions.cssClass,l[o].buttonOptions.enableRTL=this.model.enableRTL,a=s.find(".e-"+l[o].type.replace(/\s+/g,"")+"button"),this.model.isEdit&&"cancel"!=this._requestType||(e.closest(".e-editcell").length?"save"==l[o].type||"cancel"==l[o].type?a.show():(a.hasClass("e-deletebutton")&&a.hide(),a.hasClass("e-editbutton")&&a.hide()):"save"==l[o].type||"cancel"==l[o].type?a.hide():(a.hasClass("e-deletebutton")&&a.show(),a.hasClass("e-editbutton")&&a.show())),r=0;r<a.length;r++)n(a[r]).data("ejButton")&&n(a[r]).ejButton("destroy");a.ejButton(l[o].buttonOptions)}},_gridTemplate:function(e,t,i){var s=e.model.columns[i];return e._isGrouping&&(this.index=e._currentJsonData.indexOf(this.data)),e._renderEjTemplate("#"+t,this.data,this.index,s)},_createTemplateElement:function(e,i,s){var l,o=e["templateID"in e?"templateID":"template"],a=/^#([\w-]*)/.exec(o),r=(i=i||n("body"),s?"Pager":e.headerText+n.inArray(e,this.model.columns)+"_Template"),d={name:"SCRIPT",type:"text/x-template",text:o,id:(this._id+r).replace(/[^0-9A-z-_]/g,"")};return(l=a&&a[1]?document.getElementById(a[1]):/^<script/i.test(o)?n(o).get(0):t.buildTag(d.name,d.text).get(0)).id=l.id||d.id,l.type=l.type||d.type,i.append(s?l.innerHTML:l),l},_renderGridPager:function(){var e=n(document.createElement("div")),t={};return this.model.pageSettings.click=this._gPagerClickHandler,this.model.pageSettings.totalRecordsCount=this._gridRecordsCount||null,this.model.pageSettings.enableRTL=this.model.enableRTL,this.model.pageSettings.locale=this.model.locale,this.model.pageSettings.enableQueryString=this.model.pageSettings.enableQueryString,this.model.allowFiltering&&"filterbar"==this.model.filterSettings.filterType&&(t.enableExternalMessage=this.model.filterSettings.showFilterBarStatus),n.extend(t,this.model.pageSettings),t.currentPage=this._currentPage(),t.masterObject=this,this.setGridPager(e),e.ejPager(t),e.ejPager("refreshPager"),t=e.ejPager("model"),this.model.pageSettings.totalPages=t.totalPages||null,this._currentPage()!==t.currentPage&&this._currentPage(t.currentPage),this._renderPagerTemplate(e),e},_renderPagerTemplate:function(e,i){var s,l=this.model.pageSettings,n=0==e.find(".e-pagercontainer").not(".e-template").length;e.find(".e-pagercontainer.e-template").remove(),(i||!l.enableTemplates)&&n&&e.ejPager("renderPager"),l.enableTemplates&&(l.showDefaults||e.children().remove(),s=t.buildTag("div",null,null,{class:"e-pagercontainer e-template"}),this._createTemplateElement(this.model.pageSettings,s,!0),e.append(s))},_renderContext:function(){var e,i,s,l,o,a,r,d,h,c=this.model.contextMenuSettings.contextMenuItems,u=0,m=t.buildTag("ul","",{},{id:this._id+"_Context"});if(!this.model.contextMenuSettings.disableDefaultItems)for(;u<c.length;u++)e=c[u],i=this._items(e,"contextMenuItem"),m.append(i);for(var p,g,f=this.model.contextMenuSettings.customContextMenuItems,_=this.model.contextMenuSettings.subContextMenu,v=0;v<f.length;v++){for(p=f[v],g=this._items(p,"customContextMenuItem"),s=0;s<_.length;s++)if("string"==typeof p&&p==_[s].contextMenuItem||"object"==typeof p&&p.id==_[s].contextMenuItem){for(l=t.buildTag("ul","",{},{id:this._id+"_subMenuContext"+s}),o=0;o<_[s].subMenu.length;o++)menuItem=_[s].subMenu[o],menuItem1=this._items(menuItem,"subMenuItems"),l.append(menuItem1);g.append(l)}m.append(g)}m.find("li").length>0&&(this.element.append(m),a=this.element.parents("div.e-grid"),r=t.Menu.prototype._showContextMenu,t.Menu.prototype._showContextMenu=function(e,t,i,s){n(this.model.contextMenuTarget).hasClass("e-grid")&&(++e,++t),r.apply(this,[e,t,i,s])},n(m).ejMenu({menuType:t.MenuType.ContextMenu,openOnClick:!1,contextMenuTarget:"#"+this._id,click:n.proxy(this._clickevent,this),width:"auto",beforeOpen:n.proxy(this._menu,this)}),a.length&&(h=(d=n("#"+a[0].id+"_Context")).ejMenu("model.excludeTarget"),d.ejMenu({excludeTarget:t.isNullOrUndefined(h)||0==h.length?"#"+this._id:h.concat(",#"+this._id)})),this._conmenu=m.data("ejMenu"))},_clickevent:function(e){var i,s,l=e.events.text,o=n(this._contexttarget.parentNode),a=n(this._contexttarget);if(a.hasClass("e-filterset")?a=a.siblings():(a.hasClass("e-icon")||a.hasClass("e-number"))&&(a=a.parent()),i=a.attr("ej-mappingname")||a.find(".e-headercelldiv").attr("ej-mappingname"),!this._trigger("contextClick",e))switch(l){case this.localizedLabels.AddRecord:this._startAdd();break;case this.localizedLabels.EditRecord:if("batch"==this.model.editSettings.editMode){var r=n(this._contexttarget.parentNode).find(".e-rowcell").index(a),d=this._excludeDetailRows().index(o),h=this.model.columns[r].field;this.editCell(d,h)}else this.startEdit(o);break;case this.localizedLabels.DeleteRecord:this.model.editSettings.showDeleteConfirmDialog?this._confirmDialog.find(".e-content").html(this.localizedLabels.ConfirmDelete).end().ejDialog("open"):this.multiDeleteMode&&this.selectedRowsIndexes.length>1?this._multiRowDelete():this.deleteRow(o);break;case this.localizedLabels.Save:this.endEdit();break;case this.localizedLabels.Cancel:this.cancelEdit();break;case this.localizedLabels.SortInDescendingOrder:s=t.sortOrder.Descending,this.sortColumn(i,s);break;case this.localizedLabels.SortInAscendingOrder:s=t.sortOrder.Ascending,this.sortColumn(i,s);break;case this.localizedLabels.Grouping:this.groupColumn(i);break;case this.localizedLabels.Ungrouping:this.ungroupColumn(i);break;case this.localizedLabels.NextPage:case this.localizedLabels.PreviousPage:case this.localizedLabels.LastPage:case this.localizedLabels.FirstPage:this._page(e)}},_menu:function(e){var i,s,l,o,a,r,d,h,c,u,m,p=this._conmenu.element;if(this._contexttarget=e.target,i=n(e.target),o=n(this._contexttarget),this.model.allowSelection&&(o.hasClass("e-rowcell")||o.closest(".e-rowcell").length&&!i.hasClass("e-selectionbackground"))&&(a=o.hasClass("e-rowcell")?o.parent():o.closest(".e-rowcell").parent(),this.model.isEdit||this.selectRows(this.getIndexByRow(a),null,o)),(i.hasClass("e-ascending")||i.hasClass("e-descending"))&&!i.parent().hasClass("e-headercelldiv"))return!1;s=i.hasClass("e-filtericon")||i.hasClass("e-headercelldiv")?e.target.parentNode.getAttribute("aria-sort"):i.hasClass("e-headercell")?e.target.getAttribute("aria-sort"):i.parent().parent().attr("aria-sort"),e.target.className,r=n(p),l=i.hasClass("e-filterset")?i.siblings().attr("ej-mappingname"):i.hasClass("e-icon")||i.hasClass("e-number")?i.parent().attr("ej-mappingname"):i.hasClass("e-headercell")?i.find(".e-headercelldiv").attr("ej-mappingname"):i.attr("ej-mappingname"),p.css("visibility","visible");var g=i.closest("tr").hasClass("e-insertedrow")?this.model.groupSettings.groupedColumns.length:0,f=i.closest(".e-rowcell"),_=i.closest(".e-headercell"),v=-1!=f.index()?f.index():_.index()-this.model.groupSettings.groupedColumns.length,b=i.hasClass("e-rowcell")?i.index()-g:v-g;for(c in b=null!=this.model.detailsTemplate||null!=this.model.childGrid?b-1:b,d=this.model.columns[b],h={allowGrouping:".e-contextgrouping",allowSorting:".e-contextascending, .e-contextdescending","editSettings.allowAdding":".e-contextadd","editSettings.allowEditing":".e-contextedit","editSettings.allowDeleting":".e-contextdelete"})u=p.find(h[c]).parent(),0==t.getObject(c,this.model)||!1===t.getObject(c,d)?u.css("display","none"):"none"==u.css("display")&&u.css("display","block");if(i.closest(".e-grid").attr("id")!==this._id||i.is("input"))p.css("visibility","hidden");else{if(this.getHeaderTable().find(i).length>0){if(0==_.length||!_.children().hasClass("e-headercelldiv"))return void p.css("visibility","hidden");m=n(p.find(".e-head")),p.find(".e-page").css("display","none"),p.find(".e-content").css("display","none"),p.find(".e-savcan").css("display","none"),m.css("display","block"),(t.isNullOrUndefined(d.field)||""==d.field)&&(m.css("display","none"),0==p.find(".e-customitem").length&&p.css("visibility","hidden"))}else if(this.getContentTable().find(i).length>0){if(0==f.length)return void p.css("visibility","hidden");m=n(p.find(".e-content")),p.find(".e-head").css("display","none"),p.find(".e-page").css("display","none"),p.find(".e-savcan").css("display","none"),m.css("display","block"),(t.isNullOrUndefined(d.field)||""==d.field)&&"batch"==this.model.editSettings.editMode&&(m.css("display","none"),0==p.find(".e-customitem").length&&p.css("visibility","hidden"))}else{if(!(this.getPager().find(i).length>0||i.hasClass("e-pager")))return m=n(p),p.css("visibility","hidden"),!1;m=n(p.find(".e-page")),p.find(".e-head").css("display","none"),p.find(".e-content").css("display","none"),p.find(".e-savcan").css("display","none"),m.css("display","block")}switch(s){case"ascending":r.find(".ascending").parent().css("display","none");break;case"descending":r.find(".descending").parent().css("display","none")}i.hasClass("e-rowcell")&&this.model.editSettings.showAddNewRow&&(m=n(p.find(".e-savcan")),p.find(".e-contextadd").parent().css("display","none"),m.css("display","block")),this.model.isEdit&&i.hasClass("e-rowcell")&&(!this.model.editSettings.showAddNewRow||n(".e-editedrow").length>0)&&(m=n(p.find(".e-savcan")),p.find(".e-head").css("display","none"),p.find(".e-content").css("display","none"),p.find(".e-page").css("display","none"),m.css("display","block")),1==this.model.pageSettings.totalPages&&m.hasClass("e-page")?0==p.find(".e-customitem").length?p.css("visibility","hidden"):p.find(".e-page").css("display","none"):1==this.model.pageSettings.currentPage?(r.find(".previous").parent().css("display","none"),r.find(".first").parent().css("display","none")):this.model.pageSettings.currentPage==this.model.pageSettings.totalPages&&(r.find(".last").parent().css("display","none"),r.find(".nextpage").parent().css("display","none")),-1!=this.model.groupSettings.groupedColumns.indexOf(l)?m.find(".group").parent().css("display","none"):-1==this.model.groupSettings.groupedColumns.indexOf(l)&&m.find(".ungroup").parent().css("display","none"),this.selectedRowsIndexes.length>1&&"multiple"==this.model.selectionType&&this.model.editSettings.allowDeleting&&(p.find(".e-contextadd").parent().css("display","none"),p.find(".e-contextedit").parent().css("display","none")),this.model.contextOpen&&this._trigger("contextOpen",e)}},_items:function(e,i){var s,l,o,a;return""!=e&&("contextMenuItem"==i&&(-1!=e.indexOf("Record")?(l=t.buildTag("li","",{},{class:"e-content"})).css("display","none"):-1!=e.indexOf("Page")?(l=t.buildTag("li","",{},{class:"e-page"}),-1!=e.indexOf("Next")?s=t.buildTag("div","",{},{class:"nextpage"}):-1!=e.indexOf("Previous")?s=t.buildTag("div","",{},{class:"previous"}):-1!=e.indexOf("Last")?s=t.buildTag("div","",{},{class:"last"}):-1!=e.indexOf("First")&&(s=t.buildTag("div","",{},{class:"first"})),l.css("display","none")):"Save"==e||"Cancel"==e?(l=t.buildTag("li","",{},{class:"e-savcan"})).css("display","none"):(-1!=e.indexOf("Order")||"Grouping"==e||"Ungrouping"==e)&&(l=t.buildTag("li","",{},{class:"e-head"}),-1!=e.indexOf("Ascending")?s=t.buildTag("div","",{},{class:"ascending"}):-1!=e.indexOf("Descending")?s=t.buildTag("div","",{},{class:"descending"}):"Grouping"==e?s=t.buildTag("div","",{},{class:"group"}):"Ungrouping"==e&&(s=t.buildTag("div","",{},{class:"ungroup"})),l.css("display","none"))),t.isNullOrUndefined(l)&&(l=t.buildTag("li","",{},{class:"e-customitem"})).css("display","block"),l.append(s),o=document.createElement("a"),a="","string"==typeof e&&(a=-1!=e.indexOf("Ascending")?"ascending":-1!=e.indexOf("Descending")?"descending":e.split(" ")[0].toLowerCase(),o.innerHTML=t.isNullOrUndefined(this.localizedLabels[e.replace(/\s+/g,"")])?e:this.localizedLabels[e.replace(/\s+/g,"")]),"object"==typeof e&&(a="Ascending"==e.id?"ascending":"Descending"==e.id?"descending":e.id.split(" ")[0].toLowerCase(),o.innerHTML=t.isNullOrUndefined(this.localizedLabels[e.text.replace(/\s+/g,"")])?e.text:this.localizedLabels[e.text.replace(/\s+/g,"")],l.attr("id",e.id)),n(o).append(t.buildTag("span","",{},{class:"e-gridcontext e-icon e-context"+a})),l.append(o),l)},_page:function(e){var t;e.events.text==this.localizedLabels.NextPage?(t=this.model.pageSettings.currentPage,++t,this.gotoPage(t)):e.events.text==this.localizedLabels.PreviousPage?(t=this.model.pageSettings.currentPage)>1?(--t,this.gotoPage(t)):this.gotoPage(t):e.events.text==this.localizedLabels.LastPage?(t=this.model.pageSettings.totalPages,this.gotoPage(t)):this.gotoPage(1)},gotoPage:function(e){var i,s;(this.model.allowPaging||this.model.allowScrolling||this.model.scrollSettings.allowVirtualScrolling)&&((i={}).previousPage=this._currentPage(),this._currentPage(e),i.endIndex=this._currentPage()*this.model.pageSettings.pageSize>this._gridRecordsCount?this._gridRecordsCount:this._currentPage()*this.model.pageSettings.pageSize,i.startIndex=this._currentPage()*this.model.pageSettings.pageSize-this.model.pageSettings.pageSize,i.currentPage=e,this.model.allowPaging&&(i.requestType=t.Grid.Actions.Paging),this.model.scrollSettings.allowVirtualScrolling&&this.model.allowScrolling&&(this._isVirtualRecordsLoaded=!1,s=this._refreshVirtualPagerInfo(),this._showPagerInformation(s),i.requestType=t.Grid.Actions.VirtualScroll),this._processBindings(i)&&this._currentPage(i.previousPage),this._primaryKeyValues=[])},_gPagerClickHandler:function(e){if(this._prevPageNo!=e.currentPage)return this.model.masterObject.gotoPage(e.currentPage),!1},_processData:function(e,i){this._gridRecordsCount=0==e.count&&this.model.currentViewData.length?e.result.length:e.count,null!=this.getPager()&&(this.model.pageSettings.totalRecordsCount=this._gridRecordsCount),(i.requestType==t.Grid.Actions.Filtering||t.Grid.Actions.Save||this.model.filterSettings.filteredColumns.length>0&&i.requestType==t.Grid.Actions.Refresh)&&(this._filteredRecordsCount=e.count),this._setForeignKeyData(i),0==this._relationalColumns.length&&this.sendDataRenderingRequest(i)},_frozenCell:function(e,t){var i=t,s=0,l=this.getRowByIndex(e);return t>=this.model.scrollSettings.frozenColumns&&(s=1,i-=this.model.scrollSettings.frozenColumns),n(l.eq(s).find(".e-rowcell:eq("+i+")"))},_frozenColumnSelection:function(e,t,i){var s,l,o=t,a=0;if(i)for(l=t;l<i;l++){for(o=l,l>=this.model.scrollSettings.frozenColumns&&(a=1,o=l-this.model.scrollSettings.frozenColumns),s=0;s<e[a].length;s++)n(e[a][s].cells[o]).addClass("e-columnselection");n(this.getHeaderTable().find("th.e-headercell")[l]).addClass("e-columnselection"),this.selectedColumnIndexes.push(l)}else for(t>=this.model.scrollSettings.frozenColumns&&(a=1,o=t-this.model.scrollSettings.frozenColumns),l=0;l<e[a].length;l++)n(e[a][l].cells[o]).addClass("e-columnselection")},_renderGridFooter:function(){var e,i;if(this.model.summaryRows.length>0){if(e=t.buildTag("div.e-gridfooter"),i=t.buildTag("table.e-gridsummary","",{},{cellspacing:"0.25px"}),this.setGridFooterContent(e),this.model.scrollSettings.frozenColumns>0){var s=t.buildTag("div.e-frozenfooterdiv"),l=t.buildTag("div.e-movablefooter"),n=i.clone(),o=t.buildTag("div.e-movablefooterdiv");l.append(o),i.append(this.getHeaderTable().first().find("colgroup").clone()),n.append(this.getHeaderTable().last().find("colgroup").clone()),s.append(i),o.append(n),this.setGridFooterTable(i.add(n)),this._createSummaryRows(this.getFooterTable()),e.append(s.add(l)),e.find(".e-frozenfooterdiv").outerWidth(this.getHeaderContent().find(".e-frozenheaderdiv").width()).end().find(".e-movablefooterdiv").outerWidth(this.getContent().find(".e-movablecontentdiv").width())}else i.append(this.getHeaderTable().find("colgroup").clone()),this.setGridFooterTable(i),this._createSummaryRows(this.getFooterTable()),e.append(i);return e}throw"summary row collection is missing"},_setSummaryAggregate:function(e){for(var t,i,s,l=this.model.summaryRows,n=0,o=l.length;n<o;n++)for(t=0,i=(s=l[n].summaryColumns).length;t<i;t++)e.aggregate(s[t].summaryType,s[t].dataMember)},_createSummaryRows:function(e,i,s,l,o){var a=e.find("col");e.find("tbody").length>0&&e.find("tbody").remove();var r=t.buildTag("tbody"),d=this,h=r.clone(),c=this.model.summaryRows;!t.isNullOrUndefined(i)&&this._isCaptionSummary&&(c=this._captionSummary(o)),n.each(c,function(c,u){var m,p,g,f,_;if(!1===u.showTotalSummary&&t.isNullOrUndefined(i)||!1===u.showGroupSummary&&o&&!t.isNullOrUndefined(i))return!0;if(m=t.buildTag("tr.e-gridSummaryRows"),t.isNullOrUndefined(l&&l.level))for(_=0;_<d.model.groupSettings.groupedColumns.length;_++)m.prepend(t.buildTag("td").addClass("e-indentcell"));p=o?" e-gcsummary":"",(null!=d.model.detailsTemplate||null!=d.model.childGrid)&&(0!=d.model.groupSettings.groupedColumns.length?m.children("td.e-indentcell").last().after("<td class='e-summaryrow"+p+"'></td>"):m.prepend("<td class='e-summaryrow'></td>"));var v=d.getHeaderTable().find("td").clone().addClass("e-summaryrow"+p),b=0;if(t.isNullOrUndefined(u.titleColumn)||-1==(b=d.getColumnIndexByField(u.titleColumn))&&(b=d.getColumnIndexByHeaderText(u.titleColumn)),-1!=b&&(v=d._assignTitleColumn(b,u.title,v,0)),d._hideSummaryColumn(v,a),d.model.scrollSettings.frozenColumns>0)g=m.clone(),r.append(m.append(v.slice(0,d.model.scrollSettings.frozenColumns))),h.append(g.append(v.slice(d.model.scrollSettings.frozenColumns)));else if(d._isCaptionSummary&&!o||t.isNullOrUndefined(l&&l.level))r.append(m.append(v));else{var C=d.model.groupSettings.groupedColumns.length-l.level+1,w=e.clone().addClass("e-groupsummary"),y={};for(y.data={items:l},m.prepend("<td class='e-summaryrow"+p+"' colspan="+d._colSpanAdjust(null,null,y)+" style = 'padding:0;' ></td>"),n(m[0].cells).filter(".e-summaryrow").html(w.append(t.buildTag("tr",v))),f=w.find("col").length-(d.model.columns.length+C),_=0;_<f;_++)w.find("col").first().remove();for(_=0;_<C;_++)n(w[0].rows).prepend("<td class='e-indentcell'></td>"),n(w.find("col")[_]).addClass("e-summary");r.append(m)}n.each(u.summaryColumns,function(e,l){var o,a,r,h;o="custom"!=l.summaryType?s?s[l.dataMember+" - "+l.summaryType]:d._remoteSummaryData[l.dataMember+" - "+l.summaryType]:d.getSummaryValues(l,i),prefix=l.prefix?l.prefix:"",a=d.getColumnIndexByField(l.displayColumn),r=l.suffix?l.suffix:"",d.model.allowScrolling&&n(v[a]).addClass("e-scroller"),""!=n(v[a]).html()&&""==prefix&&(prefix=n(v[a]).html()),t.isNullOrUndefined(l.template)?-1!=a&&n(v[a]).html(prefix+(l.format?d.formatting(l.format,o,d.model.locale):o)+r).css("text-align",d.model.columns[a].textAlign):(h={summaryValue:l.format?d.formatting(l.format,o,d.model.locale):o,summaryColumn:l},n(v[a]).html(n.render[d._id+"_summaryTemplate"+l.template](h)).css("text-align",d.model.columns[a].textAlign),n(v[a]).addClass("e-summarytemplate"))})}),this.model.scrollSettings.frozenColumns>0?(e.first().append(r),e.last().append(h)):e.append(r)},_assignTitleColumn:function(e,t,i,s){for(var l,n=e;n<this.model.columns.length;n++)if(l=this.model.columns[n],0==s&&0!=l.visible){i.eq(n).html(t);break}return i},getSummaryValues:function(e,i){var s,l,o,a,r,d;switch((l=t.isNullOrUndefined(i)?this.model.filterSettings.filteredColumns.length>0?this._filteredRecords:this._dataSource():i)instanceof t.DataManager?(o=l,l=l.dataSource.json):o=t.DataManager(l),e.summaryType){case t.Grid.SummaryType.Maximum:a=t.max(l,e.dataMember),s=t.getObject(e.dataMember,a);break;case t.Grid.SummaryType.Minimum:a=t.min(l,e.dataMember),s=t.getObject(e.dataMember,a);break;case t.Grid.SummaryType.Average:s=t.avg(l,e.dataMember);break;case t.Grid.SummaryType.Sum:s=t.sum(l,e.dataMember);break;case t.Grid.SummaryType.Count:s=l.length;break;case t.Grid.SummaryType.TrueCount:r=t.Predicate(e.dataMember,"equal",!0),s=o.executeLocal(t.Query().where(r)).length;break;case t.Grid.SummaryType.FalseCount:r=t.Predicate(e.dataMember,"equal",!1),s=o.executeLocal(t.Query().where(r)).length;break;case t.Grid.SummaryType.Custom:(d=e.customSummaryValue)&&("string"==typeof d&&(d=t.util.getObject(d,window)),n.isFunction(d)&&(s=d.call(this,e,l)))}return s},_hideCaptionSummaryColumn:function(){var e,t,s,l=this.getHeaderTable().find(".e-headercelldiv[ej-mappingname]").first(),n=this.getContentTable().find(".e-groupcaption").clone(),o=this.getContentTable().find(".e-groupcaption").parent(),a=this.model.columns.length-1;if(this._isCaptionSummary&&(this.getContentTable().find(".e-summaryrow:not(.e-gcsummary)").remove(),this.getFooterTable().find("tbody td").slice(-a).removeClass("e-groupcaptionsummary").addClass("e-summaryrow"),null!=this.getFooterTable()&&this.getContentTable().find(".e-recordplusexpand").parent().children(".e-indentcell").remove(),!this.model.groupSettings.showGroupedColumn&&this.getContentTable().find(".e-groupcaptionsummary").not(".e-hide").length&&(e=+this.getContentTable().find(".e-recordtable:first").parents("tbody:first").find(".e-groupcaption").attr("colspan"),this._hiddenColumnsField.length==this.model.columns.length-1&&l.parent().hasClass("e-hide")||!e)))for(i=0;i<n.length;i++)o.eq(i).children().not(".e-hide,.e-recordplusexpand").filter("td.e-groupcaptionsummary:first").addClass("e-hide"),t=o.eq(i).find(".e-groupcaption"),s=parseInt(t.attr("colspan")),t.attr("colspan",++s);this.getContentTable().find(".e-recordtable").find(".e-indentcell").remove()},_hideSummaryColumn:function(e,t){if(t.length>this.model.columns.length&&(t=t.slice(t.length-this.model.columns.length)),!this.model.groupSettings.showGroupedColumn&&this.model.showSummary)for(i=0;i<this.model.columns.length;i++)for(j=0;j<this.model.groupSettings.groupedColumns.length||j<this._hiddenColumnsField.length;j++){if(!this.getHeaderTable().find(".e-headercelldiv:not(.e-emptyCell)").eq(i).is(":visible")){t.eq(i).css("display","none"),n(e[i]).addClass("e-hide");break}"none"==t.eq(i).css("display")&&t.eq(i).css("display","")}else for(i=0;i<this.model.columns.length;i++)this.model.columns[i].visible?"none"==t.eq(i).css("display")&&t.eq(i).css("display",""):(t.eq(i).css("display","none"),n(e[i]).addClass("e-hide"))},_initScrolling:function(){var e,i,s=[],l=[];for(this.model.scrollSettings.enableVirtualization&&(this.model.scrollSettings.allowVirtualScrolling=!0),e=0;e<this.model.columns.length;e++)!1===this.model.columns[e].visible&&this.model.scrollSettings.frozenColumns,!0===this.model.columns[e].isFrozen?s.push(this.model.columns[e]):l.push(this.model.columns[e]);if(s.length>0&&(i=this.model.scrollSettings.frozenColumns,this.model.columns=n.merge(n.merge([],s),l),this.model.scrollSettings.frozenColumns=s.length,s.length!=i&&0!=i&&(this.model.scrollSettings.frozenColumns=i)),(this.model.scrollSettings.frozenColumns>0||this.model.scrollSettings.frozenRows>0)&&(this.model.allowGrouping||null!=this.model.rowTemplate||null!=this.model.detailsTemplate||null!=this.model.childGrid||this.model.scrollSettings.allowVirtualScrolling||"batch"==this.model.editSettings.editMode))return this._renderAlertDialog(),this._alertDialog.find(".e-content").text(this._getLocalizedLabels().FrozenNotSupportedException),void this._alertDialog.ejDialog("open");this.model.scrollSettings.allowVirtualScrolling&&this.model.allowScrolling&&(this.model.scrollSettings.enableVirtualization?(this._vRowHeight=Math.floor(this.getRowHeight()+1),this._virtualRowCount=Math.round(this.model.scrollSettings.height/this._vRowHeight)+1,this.model.pageSettings.pageSize<5*this._virtualRowCount&&(this.model.pageSettings.pageSize=5*this._virtualRowCount)):(this.model.pageSettings.pageSize=12==this.model.pageSettings.pageSize?Math.round(this.model.scrollSettings.height/32)+1:this.model.pageSettings.pageSize,this.model.pageSettings.totalPages=Math.ceil(this._gridRecordsCount/this.model.pageSettings.pageSize))),(this.model.width||this.model.height)&&(this.model.allowScrolling=!0,this.model.width&&(this.model.scrollSettings.width=this.model.width),this.model.height&&(this.model.scrollSettings.height=this.model.height)),this._originalScrollWidth=t.isNullOrUndefined(this.model.scrollSettings.previousStateWidth)?this.model.scrollSettings.width:this.model.scrollSettings.previousStateWidth},_checkScrollActions:function(e){return!(this.model.scrollSettings.allowVirtualScrolling||e!=t.Grid.Actions.Sorting&&e!=t.Grid.Actions.Reorder)||e==t.Grid.Actions.Grouping||e==t.Grid.Actions.Ungrouping||e==t.Grid.Actions.Add||e==t.Grid.Actions.Cancel||e==t.Grid.Actions.Save||e==t.Grid.Actions.BatchSave||e==t.Grid.Actions.Delete||e==t.Grid.Actions.Filtering||e==t.Grid.Actions.Paging||e==t.Grid.Actions.Refresh||e==t.Grid.Actions.Search},_frozenAlign:function(){var e,i=this.getContent().first(),s=!t.isIOSWebView()&&this.getBrowserDetails();e=this.model.enableRTL?"margin-right":"margin-left",i.find(".e-movablecontent").css(e,s&&"safari"===s.browser?"auto":i.find(".e-frozencontentdiv").width()+"px"),this.getHeaderContent().find(".e-movableheader").removeAttr("style").css(e,s&&"safari"===s.browser?"auto":this.getHeaderContent().find(".e-frozenheaderdiv").width()+"px")},_refreshScroller:function(e){var i,s,l,n,o,a,r,d=this.getContent().first();if(!t.isNullOrUndefined(d.data("ejScroller"))){if(this.model.scrollSettings.frozenColumns>0){if(this._isFrozenColumnVisible())if(this._visibleColumns.length<=this.model.scrollSettings.frozenColumns){for(i=!1,s=this.model.scrollSettings.frozenColumns;s<this.model.columns.length;s++)if(-1!=this._visibleColumns.indexOf(this.model.columns[s].headerText)){i=!0;break}i||(d.find(".e-frozencontentdiv").removeAttr("style"),this.getHeaderContent().find(".e-frozenheaderdiv").removeAttr("style"),d.find(".e-movablecontent").width(0),d.find(".e-movablecontentdiv").width(0),d.find(".e-movablecontent").height(0),d.find(".e-movablecontentdiv").height(0))}else this._frozenAlign(),d.find(".e-movablecontent").scrollLeft(this.getHeaderContent().find(".e-movableheader").scrollLeft()),!t.isNullOrUndefined(this.getScrollObject()._vScrollbar)&&this.getScrollObject()._vScrollbar.value()>this.getScrollObject()._vScrollbar.model.maximum&&(l=this.getScrollObject()._vScrollbar.model.maximum);else d.find(".e-movablecontentdiv").removeAttr("style"),this.getHeaderContent().find(".e-movableheaderdiv").removeAttr("style"),d.find(".e-frozencontent").width(0),d.find(".e-frozencontentdiv").width(0),d.find(".e-frozencontent").height(0),d.find("e-frozencontentdiv").height(0);this.refreshScrollerEvent()}this.model.scrollSettings.frozenRows>0&&(this._initFrozenRows(),!this.initialRender&&t.isNullOrUndefined(this.getScrollObject()._vScrollbar)&&this.element.height()>this.model.scrollSettings.height&&this.getContent().attr("tabindex","0").ejScroller(this.model.scrollSettings),l=this.getScrollObject().model.scrollTop,!t.isNullOrUndefined(this.getScrollObject()._vScrollbar)&&l>this.getScrollObject()._vScrollbar.model.maximum&&(l=this.getScrollObject()._vScrollbar.model.maximum),("cancel"==e.requestType||"save"==e.requestType)&&l>this._editFormHeight&&-1!=this.model.editSettings.editMode.indexOf("inlineform")&&(l-=this._editFormHeight),e.requestType==t.Grid.Actions.Add&&this.getScrollObject().scrollY(0,!0),t.isNullOrUndefined(this.getScrollObject()._vScrollbar)||t.isNullOrUndefined(this.getScrollObject()._vScrollbar._scrollData)||(this.getScrollObject()._vScrollbar._scrollData.skipChange=!0)),"beginedit"==e.requestType&&(l=this.getScrollObject().model.scrollTop,this.getScrollObject().scrollY(0,!0)),!t.isNullOrUndefined(this.model.dataSource)&&("refresh"==e.requestType||"searching"==e.requestType)&&this.model.scrollSettings.allowVirtualScrolling&&(this.model.scrollSettings.enableVirtualization&&this._isLocalData&&this._gridRecordsCount>0?this._refreshVirtualView(this._currentVirtualIndex):this._refreshVirtualContent(1),1==this._currentVirtualIndex&&this.getScrollObject().scrollY(0)),this.model.scrollSettings.frozenColumns>0&&this.rowHeightRefresh(),this.getScrollObject().refresh(),d.ejScroller("model.enableRTL",this.model.enableRTL),this.model.isResponsive&&("searching"==e.requestType||"filtering"==e.requestType)&&(o=(n=this.getScrollObject()).isHScroll()?this.getContentTable().height()+n.model.buttonSize:this.getContentTable().height(),o="string"==typeof this.model.scrollSettings.height||o>this.model.scrollSettings.height?this.model.scrollSettings.height:o,a="string"==typeof this.model.scrollSettings.width?this.element.width():this.model.scrollSettings.width,width=a,this.getContent().ejScroller({height:o,width:width})),this.getScrollObject().isVScroll()&&!this.getScrollObject().model.autoHide?(this.getHeaderContent().addClass("e-scrollcss"),this.getHeaderTable().first().width(this.getContentTable().width()),this.getHeaderContent().find(".e-headercontent").hasClass("e-hscrollcss")||this.getHeaderContent().find(".e-headercontent").addClass("e-hscrollcss")):this._showHideScroller(),!this.model.allowPaging||this.getScrollObject().isVScroll()||this.getScrollObject().isHScroll()||this.getContentTable().width()==this.getContent().width()||(this.getContentTable().width(this.getContent().width()),this.getHeaderTable().width(this.getContentTable().width())),this._getRowHeights(),l&&!t.isNullOrUndefined(this.getScrollObject()._vScrollbar)&&e.requestType!=t.Grid.Actions.Add&&(this._currentTopFrozenRow=0,l>this.getScrollObject()._vScrollbar.model.maximum&&(l=this.getScrollObject()._vScrollbar.model.maximum),this.getScrollObject()._vScrollbar.scroll(l)),"virtualscroll"==e.requestType&&(r=this.getScrollObject().model.scrollTop+this.getScrollObject().model.height-.3*this.getScrollObject().model.height,this.getScrollObject().scrollY(r,!0))}},_isFrozenColumnVisible:function(){for(var e=0;e<this.model.scrollSettings.frozenColumns;e++)if(this.model.columns[e].visible)return!0;return!1},_frozenPaneRefresh:function(){this.getContent().find(".e-frozencontentdiv").css("display","none"),this.getHeaderContent().find(".e-frozenheaderdiv").css("display","none"),this.getHeaderContent().find(".e-movableheader")[0].style["margin-left"]="",this.getContent().find(".e-movablecontent")[0].style["margin-left"]="";var e=t.isNullOrUndefined(this._scrollObject._vScrollbar)?0:this._scrollObject._vScrollbar["e-vscroll"].width(),i=this.model.scrollSettings.width-e-1;this.model.scrollSettings.width>this.getContent().find(".e-movablecontentdiv").width()&&(this.getContent().find(".e-movablecontentdiv").width(i),this.getHeaderContent().find(".e-movableheaderdiv").width(i)),this._scrollObject.option("scrollLeft",0)},_renderScroller:function(){var e,i,s,l,o,a,r,d;if(this.model.scrollSettings||(this.model.scrollSettings={}),this.model.enablePersistence&&(t.isNullOrUndefined(this.model.scrollSettings.previousStateWidth)||!this.model.scrollSettings.previousStateWidth)&&this.model.isResponsive&&(this.model.scrollSettings.previousStateWidth=this.model.scrollSettings.width),"string"!=typeof this._originalScrollWidth||this.model.isResponsive||(this.element.css("width","auto"),i=this.element.width(),("auto"==this.model.scrollSettings.width||"auto"==this._originalScrollWidth)&&(this._originalScrollWidth="100%"),this.model.scrollSettings.width=i*(parseFloat(this._originalScrollWidth)/100)),"string"!=typeof this.model.scrollSettings.height||this.model.isResponsive||(e=this.element.height(),"auto"==this.model.scrollSettings.height&&(this.model.scrollSettings.height="100%"),this.model.scrollSettings.height=e*(parseFloat(this.model.scrollSettings.height)/100)),(this.model.scrollSettings.width||this.model.width)&&!this._mediaQuery&&("string"==typeof(i=this.model.scrollSettings.width||this.model.width)?this.element.css("width",this.model.scrollSettings.width||this.model.width):this.element.width(this.model.scrollSettings.width||this.model.width)),s=this.getContent().attr("tabindex","0"),this.getRows(),this.model.scrollSettings.frozenColumns>0){if(scrollWidth=this.getContent().find(".e-frozencontentdiv").width()+20,scrollWidth>this.model.scrollSettings.width)return this.getContent().remove(),this.getHeaderTable().eq(1).remove(),this._alertDialog.find(".e-content").text(this.localizedLabels.FrozenColumnsViewAlert),void this._alertDialog.ejDialog("open");l=this.getContent().find(".e-frozencontentdiv").width(),o=this.model.enableRTL?"margin-right":"margin-left",this.getContent().find(".e-movablecontent").css(o,l+"px"),this.getHeaderContent().find(".e-movableheader").css(o,l+"px"),this.model.scrollSettings.targetPane=".e-movablecontent"}this._initFrozenRows(),this.model.scrollSettings.autoHide&&(this.model.scrollSettings.show=n.proxy(this._showHideScroller,this)),a=this,this.model.scrollSettings.frozenRows||(this.model.scrollSettings.scroll=function(e){t.isNullOrUndefined(e.scrollData)||"e-hhandle"!=e.scrollData.handler?(a._scrollValue=e.scrollTop,a.model.currentIndex=0==e.scrollTop?e.scrollTop:Math.floor(e.scrollTop/a._vRowHeight)):(a.model.allowFiltering&&("menu"==a.model.filterSettings.filterType||a._isExcelFilter)&&(a._isExcelFilter?a._excelFilter.closeXFDialog():a._closeFilterDlg()),a._checkScroller(e,this))}),!this.model.scrollSettings.allowVirtualScrolling&&this.model.currentIndex>0&&!this.model.scrollSettings.scrollTop&&(r=this.model.currentIndex*this.getRowHeight(),this.model.scrollSettings.scrollTop=r),s.ejScroller(this.model.scrollSettings),null==this.model.rowTemplate||t.isIOSWebView()||"msie"!=this.getBrowserDetails().browser&&"safari"!=this.getBrowserDetails().browser||this.getScrollObject().refresh(),this.model.scrollSettings.frozenColumns>0&&0==this.model.scrollSettings.frozenRows&&this.getScrollObject()._vScrollbar&&this.getScrollObject()._hScrollbar&&(this.getScrollObject()._vScrollbar._scrollData.skipChange=this.getScrollObject()._hScrollbar._scrollData.skipChange=!0),this.model.scrollSettings.autoHide||this._showHideScroller(),!t.isIOSWebView()&&"safari"==this.getBrowserDetails().browser&&this.model.scrollSettings.frozenColumns>0&&this.getHeaderContent().find(".e-movableheader").add(this.getContent().find(".e-movablecontent")).css(o,"auto"),this.refreshScrollerEvent(),this.model.scrollSettings.frozenColumns>0&&!this._isFrozenColumnVisible()&&this._frozenPaneRefresh(),a.model.scrollSettings.allowVirtualScrolling&&(d=this._refreshVirtualPagerInfo(),this._showPagerInformation(d),s.ejScroller({scroll:function(e){if(a.model.scrollSettings.enableVirtualization&&null!=e.scrollData&&"e-hhandle"!=e.scrollData.handler){if(e.reachedEnd=e.scrollData.scrollable-e.scrollTop==0,"thumb"==e.source){var i=Object.keys(a._virtualLoadedRows),s=(a._currentVirtualIndex+2).toString();"continuous"==a.model.scrollSettings.virtualScrollMode&&-1==n.inArray(s,i)&&s<a._totalVirtualViews?a._isContinuous=!0:(e.model.scrollTop=e.scrollTop,a._isContinuous=!1,e.cancel=!0)}("button"==e.source||"key"==e.source||"wheel"==e.source)&&(n("#"+a._id+"_WaitingPopup").is(":visible")?e.cancel=!0:(a._isThumbScroll=!1,a._virtualViewScroll(e)),"continuous"==a.model.scrollSettings.virtualScrollMode&&e.reachedEnd&&this.refresh()),a.model.currentIndex=0==e.scrollTop?e.scrollTop:Math.floor(e.scrollTop/a._vRowHeight)}else!t.isNullOrUndefined(e.scrollData)&&"e-hhandle"==e.scrollData.handler&&a.model.allowFiltering&&("menu"==a.model.filterSettings.filterType||a._isExcelFilter)&&(a._isExcelFilter?a._excelFilter.closeXFDialog():a._closeFilterDlg()),e.reachedEnd=this.content()[0].scrollHeight-e.scrollTop==this.content()[0].clientHeight,("button"==e.source||"key"==e.source||"wheel"==e.source)&&null!=a.model&&a._virtualScroll(e),"wheel"==e.source&&e.scrollTop!=a._scrollValue&&(e.scrollTop=a._scrollValue),a._checkScroller(e,this)},thumbEnd:function(e){a.model.scrollSettings.enableVirtualization&&"continuous"==a.model.scrollSettings.virtualScrollMode?e.reachedEnd=e.scrollData.scrollable-e.model.scrollTop==0:e.originalEvent&&!n(e.originalEvent.target).hasClass("e-rowcell")&&(e.reachedEnd=this.content()[0].scrollHeight-e.scrollData.sTop==this.content()[0].clientHeight),"e-hhandle"!=e.scrollData.handler&&null!=a.model&&e.originalEvent&&(a.model.scrollSettings.enableVirtualization?(a._isThumbScroll=!0,a._virtualViewScroll(e),"continuous"==a.model.scrollSettings.virtualScrollMode&&e.reachedEnd&&this.refresh(),a._isLocalData&&a.element.ejWaitingPopup("hide")):a._virtualScroll(e))},scrollEnd:function(e){if("mousewheel"!=e.scrollData.type&&(null==e.scrollData.model||"horizontal"!=e.scrollData.model.orientation)&&a.model.scrollSettings.enableVirtualization&&!a._isContinuous){var t=a._calculateCurrentViewPage(e.model),i=-1!=n.inArray(t,a._virtualLoadedPages);i?(a._isThumbScroll=!0,a._virtualViewScroll(e),a.element.ejWaitingPopup("hide"),a._totalVirtualViews<=3*a._maxViews&&(this._content[0].scrollTop=e.scrollData.scrollTop)):(i||a.element.ejWaitingPopup("show"),e.cancel=!0)}}}))},_checkScroller:function(e,t){var i,s=e.scrollLeft>0?e.scrollLeft:Math.abs(e.scrollLeft);"thumb"==e.source&&(t.content()[0].scrollWidth-s==t.content()[0].clientWidth||0==s)&&(this.model.enableRTL&&(i=0==s?e.scrollData.scrollable:0,e.scrollData.sTop=e.model.scrollLeft=i,t.content().scrollLeft(i)),t._hScrollbar.refresh())},_showHideScroller:function(){this.getScrollObject().isVScroll()?(this.getHeaderContent().find("div").first().addClass("e-headercontent"),this.model.scrollSettings.autoHide||this.getHeaderContent().addClass("e-scrollcss")):this.element.find(".e-gridheader").removeClass("e-scrollcss"),0!=this.model.scrollSettings.frozenColumns||this._mediaQuery||(!this.element.find(".e-gridheader").hasClass("e-scrollcss")&&(this.model.filterSettings.filteredColumns.length||this._hiddenColumns.length&&!this.model.minWidth)?(this.getHeaderTable().removeAttr("style"),this.getContentTable().removeAttr("style")):(this.getHeaderContent().find("div table").first().width(this.getContentTable().width()),this.getContent().find("div table").first().width(this.getContentTable().width()),this.getHeaderTable().width(this.getContentTable().width()))),this._isHscrollcss()},_isHscrollcss:function(){var e=this.getContent().data("ejScroller"),t=e&&(e.isHScroll()||e.isVScroll())?"addClass":"removeClass";this.getHeaderContent().find(".e-headercontent")[t]("e-hscrollcss")},_initFrozenRows:function(){var e,i=this.getRows();this.model.currentViewData&&0!=this.model.currentViewData.length&&(this.model.scrollSettings.frozenRows>0&&null!=i?(this.model.scrollSettings.scroll=n.proxy(this._scroll,this),this.getContent().find(".e-frozeny").removeClass("e-frozeny").end().find(".e-frozenrow").removeClass("e-frozenrow"),!t.isNullOrUndefined(i[0][this.model.scrollSettings.frozenRows-1])&&!t.isNullOrUndefined(i[1][this.model.scrollSettings.frozenRows-1])&&this.model.scrollSettings.frozenColumns>0?n(i[0][this.model.scrollSettings.frozenRows-1].cells).add(i[1][this.model.scrollSettings.frozenRows-1].cells).addClass("e-frozeny").parent().addClass("e-frozenrow"):t.isNullOrUndefined(this.getRowByIndex(this.model.scrollSettings.frozenRows-1)[0])||n(i[this.model.scrollSettings.frozenRows-1].cells).addClass("e-frozeny").parent().addClass("e-frozenrow"),this.getContent().height()>this.model.scrollSettings.height&&(e=t.isNullOrUndefined(this.getContent().data("ejScroller"))?null:this.getScrollObject(),this.initialRender||t.isNullOrUndefined(e)||!t.isNullOrUndefined(e._vScrollbar)||this._getRowHeights(),this.model.scrollSettings.height=this._rowHeightCollection[Math.floor(this.model.scrollSettings.height/this._rowHeightCollection[1])]+18)):delete this.model.scrollSettings.scroll)},refreshScrollerEvent:function(){this.getContent().find(".e-content:first,.e-movablecontent").scroll(t.proxy(function(e){if(this.model.scrollSettings.targetPane?($movablecontent=n(e.currentTarget).hasClass("e-movablecontent")||!this.model.currentViewData||0==this.model.currentViewData.length?n(e.currentTarget):n(e.currentTarget).find(".e-movablecontent"),this.getHeaderContent().find(".e-movableheader").scrollLeft($movablecontent.scrollLeft())):this.getHeaderContent().find("div").first().scrollLeft(n(e.currentTarget).scrollLeft()),this.model.scrollSettings.frozenRows>0&&-1!=this.model.editSettings.editMode.indexOf("inlineform")&&this.model.isEdit){var t=e.target.scrollTop;this.getContent().find(".e-content").scrollTop(0),this.getScrollObject().scrollY(this.getScrollObject().model.scrollTop+t,!0)}},this)),this.element.find(".e-gridheader").find(".e-headercontent,.e-movableheader").scroll(t.proxy(function(e){var t=n(e.currentTarget);this.model.scrollSettings.targetPane?(this.getContent().find(".e-movablecontent").scrollLeft(t.scrollLeft()),this.model.showSummary&&this.getFooterContent().find(".e-movablefooter").scrollLeft(t.scrollLeft())):(this.model.showSummary&&this.getFooterContent().scrollLeft(t.scrollLeft()),this.getContent().find(".e-content").first().scrollLeft(t.scrollLeft()))},this))},clearFiltering:function(e){if(e)this._clearFilter(e);else{for(var t=this.model.filterSettings.filteredColumns;0<t.length;)this._clearFilter(t[0].field);("menu"==this.model.filterSettings.filterType||"excel"==this.model.filterSettings.filterType)&&this.getHeaderTable().find(".e-filtericon").removeClass("e-filteredicon e-filternone")}},_clearFilter:function(e){var i,s=this.model.filterSettings.filterType;switch(t.isNullOrUndefined(this.getColumnByField(e).filterType)||(s=this.getColumnByField(e).filterType),s){case t.Grid.FilterType.FilterBar:-1!=n.inArray(this.getColumnByField(e),this.filterColumnCollection)&&(this.getHeaderTable().find("#"+e+"_filterBarcell").val(""),this._currentFilterbarValue="",n.inArray(e,this.filterColumnCollection),this._currentFilterColumn=this.getColumnByField(e),this._showFilterMsg());break;case t.Grid.FilterType.Menu:i="#"+this._id+"_"+this._$colType+"Dlg","boolean"==this._$colType?n(i).find(".e-value .e-js").ejCheckBox("model.checked",!1):"number"==this._$colType?n(i).find(".e-numerictextbox").ejNumericTextbox("model.value",""):n(i).find(".e-value input").val(""),(this._excelFilterRendered||this._isExcelFilter)&&delete this._excelFilter._predicates[0][e],this._$curFieldName=e;break;case t.Grid.FilterType.Excel:delete this._excelFilter._predicates[0][e],this._excelFilter.closeXFDialog(),this._$curFieldName=e}this.filterColumn(e,"","","or")},clearSearching:function(){this.element.find(".e-gridtoolbar #"+this._id+"_search").val(""),this.search(""),n.extend(this.model.searchSettings,this.defaults.searchSettings)},_renderByFrozenDesign:function(){var e=n(document.createElement("div")),i=this._getMetaColGroup().find("col"),s={};s.colgroup1=e.append(t.buildTag("colgroup").append(i.splice(0,this.model.scrollSettings.frozenColumns))).html(),s.colgroup2=e.html(t.buildTag("colgroup").append(i)).html(),this.getContent().find("div").first().get(0).innerHTML=n.render[this._id+"_FrozenTemplate"]({datas:this.model.currentViewData},s),this.setGridContentTable(this.getContent().find(".e-table").attr("role","grid"))},addFrozenTemplate:function(){var e="<div class='e-frozencontentdiv'><table cellspacing='0.25px' class='e-table'>{{:~colgroup1}}<tbody>{{for datas tmpl='"+this._id+"_JSONFrozenTemplate'/}}</tbody></table></div><div class='e-movablecontent'><div class='e-movablecontentdiv'><table cellspacing='0.25px' class='e-table'>{{:~colgroup2}}<tbody>{{for datas tmpl='"+this._id+"_JSONTemplate'/}}</tbody></table></div></div>",t={};t[this._id+"_FrozenTemplate"]=e,n.templates(t)},_getTopRow:function(e){var t=this.model.scrollSettings.frozenRows,i=0;if(e>10)for(i=0;i<this._rowHeightCollection.length;i++)if(this._rowHeightCollection[i]>e){t=this.model.scrollSettings.frozenRows+i-1;break}return{imaginaryIndex:t,actualIndex:i}},_showHideRow:function(e,t,i,s){var l=this.getRows();this.model.scrollSettings.frozenColumns>0?n(l[0]).slice(e,t).add(n(l[1]).slice(e,t).toArray())[i]():n(l).slice(e,t)[i](),this._currentTopFrozenRow="show"==i?e:t,this.getScrollObject()._changevHandlerPosition(s)},_scroll:function(e){var i,s,l,n,o;if(null!=e.scrollData&&"width"!=e.scrollData.dimension){e.cancel=!0,this.getRows();var a=this._getTopRow(e.scrollTop).imaginaryIndex;if(a>this._currentTopFrozenRow?this._showHideRow(this.model.scrollSettings.frozenRows,a,"hide",e.scrollTop):a<this._currentTopFrozenRow&&this._showHideRow(a,this._currentTopFrozenRow+1,"show",e.scrollTop),i=this.getContentTable().last().find("tr"),s=2*parseInt(i.last().find("td:first").css("border-top-width"))+1,e.scrollTop==this.getScrollObject()._vScrollbar.model.maximum&&i.last()[0].offsetTop+i.last().height()-s>this.element.find(".e-content").height()){for(l=i.last().prev()[0].offsetTop+i.last().prev().height(),n=1,o=i.length-2;l-s>this.element.find(".e-content").height();o++){l=i[o].offsetTop+i.eq(o).height(),n++;break}this._showHideRow(this.model.scrollSettings.frozenRows,a+n,"hide",e.scrollTop)}e.model.scrollTop=e.scrollTop}else t.isNullOrUndefined(this.getScrollObject()._vScrollbar)||t.isNullOrUndefined(this.getScrollObject()._vScrollbar._scrollData)||(this.getScrollObject()._vScrollbar._scrollData.skipChange=!0)},_renderAlertDialog:function(){var e=t.buildTag("div.e-content",this._getLocalizedLabels().frozenColumnsMessage),i=t.buildTag("span.e-buttons","<input type='button' id="+this._id+"ConfirmDialogOK value='"+this._getLocalizedLabels().OkButton+"'/>");this._alertDialog=t.buildTag("div#"+this._id+"AlertDialog"),this._alertDialog.append(e).append(i),this.element.append(this._alertDialog),i.find("input").ejButton({cssClass:this.model.cssClass,showRoundedCorner:!0,size:"mini",click:n.proxy(function(){this._alertDialog.ejDialog("close")},this)}),this._renderFDialog(this._id+"AlertDialog"),this._alertDialog.ejDialog({width:"auto",enableModal:!0})},_renderFDialog:function(e){n("#"+e).ejDialog({showOnInit:!1,enableRTL:this.model.enableRTL,cssClass:this.model.cssClass,showHeader:!1,width:260,enableResize:!1,allowKeyboardNavigation:!1,content:"#"+this._id})},_virtualScroll:function(e){var t,i;if(null!=e){var s=0,l=0==this.model.filterSettings.filteredColumns.length?null==this._searchCount?this._gridRecordsCount:this._searchCount:this._filteredRecordsCount,o=this.model.pageSettings,a=this.getContentTable()[0].tBodies[0],d=n(a).find("tr.e-virtualrow");if(o.totalPages=Math.ceil(l/o.pageSize),e.scrollTop!==r&&(e.model.scrollTop=e.scrollTop),e.reachedEnd!=r&&(e.model.reachedEnd=e.reachedEnd),(t=this._calculateCurrenPage(d,this.getContentTable(),e.model))>o.totalPages&&(t=o.totalPages),o.currentPage!=t&&-1==n.inArray((t-1)*o.pageSize,this.virtualLoadedPages)&&0==this.element.find(".gridform:visible").length&&(this._isVirtualRecordsLoaded=!1),this._isVirtualRecordsLoaded)o.currentPage=t;else{if(-1==n.inArray((t-1)*o.pageSize,this.virtualLoadedPages)){if("continuous"==this.model.scrollSettings.virtualScrollMode&&!e.reachedEnd)return;t==o.totalPages&&-1==n.inArray((t-2)*o.pageSize,this.virtualLoadedPages)&&(s++,this.set_currentPageIndex(t)),1==s&&(this._lastRow=!0),this.set_currentPageIndex(t)}o.currentPage=t}i=this._refreshVirtualPagerInfo(),this._showPagerInformation(i)}},_virtualViewScroll:function(e){if(null!=e){e.scrollTop!==r&&(e.model.scrollTop=e.scrollTop),e.reachedEnd!=r&&(e.model.reachedEnd=e.reachedEnd);var t=this._calculateCurrentVirtualIndex(e);this.model.isEdit&&this.cancelEdit(),-1==n.inArray(t,this._currentLoadedIndexes)&&(this._isVirtualRecordsLoaded=!1),this._isVirtualRecordsLoaded||this.set_currentVirtualIndex(t)}},_createPagerStatusBar:function(){var e,i,s=this.element.find(".e-pagerstatusbar");s.length&&s.remove(),e=t.buildTag("div.e-pagermsgdiv"),this.$pagerStatusBarDiv=t.buildTag("div.e-pagerstatusbar").append(e),this.model.scrollSettings.allowVirtualScrolling&&this.model.allowFiltering&&"filterbar"==this.model.filterSettings.filterType&&(i=t.buildTag("div.e-pagerfiltermsg").css("display","none"),this.$pagerStatusBarDiv.append(i)),this.$pagerStatusBarDiv.appendTo(this.element),this.$pagerStatusBarDiv.css("display","none")},_refreshVirtualContent:function(e){var t,i,s,l,o,a,r,d=this.getRowHeight(),h=0==this.model.filterSettings.filteredColumns.length?null==this._searchCount?this._gridRecordsCount:this._searchCount:this._filteredRecordsCount;null!=e&&(this._currentPage(e),t=this._refreshVirtualPagerInfo(),this._showPagerInformation(t)),i=this.getCurrentIndex(),s=this.getContentTable()[0].tBodies[0],i>0&&(l=document.createElement("tr"),n(l).addClass("e-virtualrow").css("height",d*i).prependTo(s)),i+this.model.pageSettings.pageSize<=h&&1!=this.getContentTable().find("tr").last().hasClass("e-virtualrow")&&0==this.model.scrollSettings.frozenColumns&&(o=document.createElement("tr"),a="normal"==this.model.scrollSettings.virtualScrollMode?d*(h-(i+this.model.pageSettings.pageSize)):1,n(o).addClass("e-virtualrow").css("height",a).appendTo(n(s))),this.virtualLoadedPages=[],this.orderedVirtualLoadedPage=[],this.virtualLoadedPages.push(i>=0?i:0),this.orderedVirtualLoadedPage.push(i>=0?i:0),(r=n(s).find("tr:not(.e-virtualrow)").attr("name",i>=0?i:0)[0])&&r.previousSibling&&(n(r.previousSibling).hasClass("e-virtualrow")||r.previousSibling.offsetTop>i*this.getContent().height())&&(this.getContent().children("div").first().scrollTop(this.getContent().find(".content").scrollTop()-(this.getContent().find(".content").scrollTop()-r.offsetTop)),this._isVirtualRecordsLoaded=!0)},isIntermediate:function(){return this.model.currentIndex<this.model.pageSettings.pageSize*(this.model.pageSettings.currentPage-1)},_refreshVirtualView:function(e){var t,i,s,l,o,a,r,d,h;if(this._singleView)this._singleView=!1,this._addLastRow(),this.getContent().find(".e-virtualtop, .e-virtualbottom").remove(),d=this._currentVirtualIndex.toString(32),n(this._gridRows).attr("name",d),this._virtualLoadedRows[this._currentVirtualIndex]=this._gridRows,this._eventBindings();else{if(t=this._virtualRowCount,e)e>this._totalVirtualViews&&(e=1,i=!0),this._currentVirtualIndex=e,this._virtualLoadedRecords[e]?(l=this.getScrollObject(),s=Math.ceil((l.scrollTop()+this.model.scrollSettings.height)/this._vRowHeight/this.model.pageSettings.pageSize)):(this._virtualDataRefresh||this._currentVirtualIndex==this._totalVirtualViews||(i=!0),s=Math.ceil(e*this._virtualRowCount/this.model.pageSettings.pageSize)),this._refreshVirtualViewScroller(i),s>this.model.pageSettings.totalPages&&(s=this.model.pageSettings.totalPages),s<=0&&(s=1),-1==n.inArray(s,this._virtualLoadedPages)?this.gotoPage(s):(this._currentPage(s),this._needPaging=!this._checkCurrentVirtualView(this._virtualLoadedRecords,e),this._getVirtualLoadedRecords(this.model.query),this._replacingVirtualContent());else{if(this._refreshVirtualViewDetails(),o=n(this.getContentTable()[0].rows),this._setVirtualTopBottom(),this.initialRender){for(h=0;h<this._currentLoadedIndexes.length;h++)a=this._currentLoadedIndexes[h],viewIndex=(h+1)*t,viewCount=h*t,n(o[viewIndex-1]).addClass("e-virtualview"+a),d=a.toString(32),r=o.slice(viewCount,viewCount+t).attr("name",d).detach(),this._virtualLoadedRows[a]=r,r.appendTo(this.getContentTable());this._currentVirtualIndex>1&&this._refreshVirtualViewScroller()}this._eventBindings()}-1==n.inArray(this._currentPage(),this._virtualLoadedPages)&&this._virtualLoadedPages.push(this._currentPage())}if(!e&&(this.model.queryCellInfo||this.model.rowDataBound))for(h=0;h<this._currentLoadedIndexes.length;h++)-1==n.inArray(this._currentLoadedIndexes[h],this._queryCellView)&&this._queryCellView.push(this._currentLoadedIndexes[h]);this._isThumbScroll=!1,this._virtualDataRefresh=!1},_refreshVirtualViewData:function(){this._virtualLoadedRecords={},this._virtualLoadedRows={},this._virtualLoadedPages=[],this._virtualPageRecords={},this._queryCellView=[],null!=this.model.pageSettings.totalPages&&this._currentPage()>this.model.pageSettings.totalPages&&(this._currentPage(1),this._currentVirtualIndex=1)},setCurrentPageData:function(e){this.model.scrollSettings.allowVirtualScrolling&&this.model.scrollSettings.enableVirtualization&&(this._refreshVirtualViewData(),this._refreshVirtualViewDetails(),this._setVirtualLoadedRecords(e,this._currentPage()),this._refreshVirtualView(this._currentVirtualIndex))},_refreshVirtualViewScroller:function(e){var t;this.initialRender&&!this.model.scrollSettings.scrollTop||e?(this._vRowHeight,t=this.model.currentIndex*this._vRowHeight):t=this._scrollObject.model.scrollTop,this.getContent().ejScroller("model.scrollTop",t),this._scrollValue=t},_calculateCurrentViewPage:function(e){e||(e=this._scrollObject.model);var t=this.model.pageSettings.pageSize,i=Math.ceil((e.scrollTop+this.model.scrollSettings.height)/this._vRowHeight/t);return null==this.model.pageSettings.totalPages&&(this.model.pageSettings.totalPages=Math.ceil(this._getVirtualTotalRecord()/t)),i>this.model.pageSettings.totalPages&&(i=this.model.pageSettings.totalPages),this.model.pageSettings.currentPage=i,i},_calculateCurrentVirtualIndex:function(e){var t,i,s,l,o,a,r,d,h,c=e.model,u=(this._getVirtualTotalRecord(),[]),m=c.scrollTop;if(t=(m+this.model.scrollSettings.height)/this._vRowHeight/this._virtualRowCount,t=this._prevVirtualIndex>this._currentVirtualIndex&&m<=this._scrollValue?Math.floor(t):Math.ceil(t),m>=this._scrollValue&&"continuous"==c.virtualScrollMode&&c.reachedEnd&&(t+=1),t>this._totalVirtualViews&&(t=this._totalVirtualViews),t<=0&&(t=1),-1!==n.inArray(t,this._currentLoadedIndexes)&&this._virtualLoadedRows[t]&&m!=e.scrollData.scrollable){for(a=(r=this.getContentTable()[0].rows).length,d=this.getContent().find(".e-virtualtop").height(),s=m>=this._scrollValue,h=0;h<a;h++){if((o=(l=r[h]).offsetHeight+l.offsetTop+d)>m+this.model.scrollSettings.height){0===u.length&&0!==h&&(u=[r[l.offsetTop<=m+this.model.scrollSettings.height?h:h-1]]);break}if(o>=m&&o<=m+this.model.scrollSettings.height&&(u.push(l),!1===s&&u.length>1))break}(i=n(m>=this._scrollValue?u[u.length-1]:u[0])).length&&(t=parseInt(i.attr("name"),32))}return this._scrollValue=m,t},_calculateCurrenPage:function(e,t,i){var s,l,o,a,r,d,h,c,u,m,p,g,f,_=this.model.pageSettings.pageSize,v=this,b=[],C=this.getRowHeight();if(s=(i.scrollTop+this.model.scrollSettings.height)/C/_,h=this.model.pageSettings.pageSize*(this.model.pageSettings.currentPage-1),s=(c=this.getContentTable().find("tr[name="+h+"]").eq(0)).length&&c.offset().top>0&&s>=1&&i.scrollTop<this._scrollValue&&-1!==this.virtualLoadedPages.indexOf(Math.ceil(s-1)*_)?Math.floor(s):Math.ceil(s),i.scrollTop>=this._scrollValue&&"continuous"==i.virtualScrollMode&&i.reachedEnd&&(s=this.virtualLoadedPages[this.virtualLoadedPages.length-1]/_+2),-1!==n.inArray((s-1)*_,this.virtualLoadedPages)){for(d=(u=this.getContentTable().children("tbody").children("tr")).length,o=i.scrollTop>=this._scrollValue,m=0;m<d;m++){if((r=(a=u[m]).offsetHeight+a.offsetTop)>i.scrollTop+v.model.scrollSettings.height){0===b.length&&0!==m&&(b=[u[a.offsetTop<=i.scrollTop+v.model.scrollSettings.height?m:m-1]]);break}if(r>=i.scrollTop&&r<=i.scrollTop+v.model.scrollSettings.height&&(b.push(a),!1===o&&b.length>1))break}(l=n(i.scrollTop>=this._scrollValue?b[b.length-1]:b[0])).hasClass("e-virtualrow")?1===b.length&&s++:s=parseInt(l.attr("name"),10)/_+1}for(this._scrollValue=i.scrollTop,p=0;p<e.length;p++)if((g=e[p]).offsetTop+g.offsetHeight>=i.scrollTop)return f=this._calculatePrevPage(e,t,i),this._prevPageNo=f,0==s&&(s=1),s>this.model.pageSettings.totalPages?this.model.pageSettings.totalPages:s;return s},_calculatePrevPage:function(e,t,i){for(var s,l,o=0;o<e.length;o++)if((s=e[o]).offsetTop+s.offsetHeight>=i.scrollTop&&null!=(l=n(s).prevAll("tr[name]")[0]))return Math.ceil(parseInt(n(l).attr("name"),10)/this.model.pageSettings.pageSize)+1;return-1},_refreshVirtualPagerInfo:function(){var e={};return e.pageSize=this.model.pageSettings.pageSize,e.totalRecordsCount=0==this.model.filterSettings.filteredColumns.length?null==this._searchCount?this._gridRecordsCount:this._searchCount:this._filteredRecordsCount,0==e.totalRecordsCount&&this._currentPage(0),e.currentPage=this._currentPage(),e.totalPages=Math.ceil(e.totalRecordsCount/e.pageSize),e},_showPagerInformation:function(e){var t=(e.currentPage-1)*e.pageSize;n(this.$pagerStatusBarDiv).find("div:first").html(String.format(this.localizedLabels.PagerInfo,e.currentPage,e.totalPages,e.totalRecordsCount),t,t+e.pageSize),n(this.$pagerStatusBarDiv).css("display","block")},_cellMerging:function(e){e.colMerge=function(e){if(-1==this.cell.className.indexOf("e-colmerge")){this.cell.className+=" e-colmerge",this.model.columns.length-this.cell.cellIndex<e&&(e=this.model.columns.length-this.cell.cellIndex),this.cell.colSpan=e;for(var i=1;i<e;i++)t.isNullOrUndefined(this.cell.parentElement.children[this.cell.cellIndex+i])||(this.cell.parentElement.children[this.cell.cellIndex+i].className+=" e-hide")}},e.rowMerge=function(e){var i,s;if(-1==this.cell.className.indexOf("e-rowmerge"))for(this.cell.className+=" e-rowmerge",(i=this.cell.parentNode.parentNode).rows.length-this.cell.parentElement.rowIndex<e&&(e=i.rows.length-this.cell.parentElement.rowIndex),this.cell.rowSpan=e,s=0;s<e-1&&!t.isNullOrUndefined(i.children[this.cell.parentElement.rowIndex+s].nextSibling);s++)(!n(".e-grid").children().is(".e-dialog")||-1!=n(".e-grid").find(".e-dialog").attr("style").indexOf("display: none")||this.model.allowFiltering)&&(i.children[this.cell.parentElement.rowIndex+s].nextSibling.children[this.cell.cellIndex].className+=" e-merged e-hide")},e.merge=function(i,s){var l,o,a,r;if(i>1&&s>1){if(-1==this.cell.className.indexOf("e-colmerge")){if(this.cell.className+=" e-colmerge",(l=this.cell.parentNode.parentNode).rows.length-this.cell.parentElement.rowIndex<s&&(s=l.rows.length-this.cell.parentElement.rowIndex),!n(".e-grid").children().is(".e-dialog")||-1!=n(".e-grid").find(".e-dialog").attr("style").indexOf("display: none")||this.model.allowFiltering)for(o=0;o<s&&!t.isNullOrUndefined(l.children[this.cell.parentElement.rowIndex+o]);o++)for(a=l.children[this.cell.parentElement.rowIndex+o].children[this.cell.cellIndex],this.model.columns.length-a.cellIndex<i&&(i=this.model.columns.length-a.cellIndex),a.colSpan=i,r=1;r<i;r++)t.isNullOrUndefined(a.parentElement.children[this.cell.cellIndex+r])||(a.parentElement.children[this.cell.cellIndex+r].className+=" e-hide");else for(this.cell.colSpan=i,r=1;r<i;r++)t.isNullOrUndefined(this.cell.nextSibling)||(this.cell.parentElement.children[this.cell.cellIndex+r].className+=" e-hide");e.rowMerge(s)}}else i>1&&e.colMerge(i),s>1&&e.rowMerge(s)}},_replacingContent:function(){var e,i,s,l,o,a,d,h,c,u,m,p,g,f,_,v,b,C,w,y=document.createElement("div"),S=this.getCurrentIndex(),x=this.getContentTable()[0],T=n(x).find("colgroup").first(),D=this.getRowHeight();T.replaceWith(this._getMetaColGroup()),(null!=this.model.detailsTemplate||null!=this.model.childGrid)&&T.prepend(this._getIndentCol()),e=x.tBodies[0],i=this.model.currentViewData,t.isNullOrUndefined(this._currentPageData)?this._virtualLoadedRecords[this._currentPage()]=i:(this._virtualLoadedRecords[this._currentPage()]=this._currentPageData,this._currentPageData=null);var k=this,I=n("<tbody></tbody>").append(n.render[this._id+"_JSONTemplate"](i)).children("tr");if(this._allowcolumnSelection&&this.selectedColumnIndexes.length>0)for(v=0;v<this.selectedColumnIndexes.length;v++)s=this.selectedColumnIndexes[v]+1,I.find("td:nth-of-type("+s+")").addClass("e-columnselection");for(this.virtualLoadedPages.push(S>=0?S:0),l=t.dataUtil.mergeSort(t.distinct(this.virtualLoadedPages)),n(I).attr("name",S),o=t.dataUtil.min(l),a=t.dataUtil.max(l),n(e).children(".e-virtualrow").remove(),_=0;_<l.length;_++)d=l[_],h=l[_-1],(d!=this.orderedVirtualLoadedPage[_]||this.orderedVirtualLoadedPage[_]==r)&&(h!=r?I.insertAfter(n(e).children("[name="+h+"]:last")):I.insertBefore(n(e).children("[name="+this.orderedVirtualLoadedPage[_]+"]:first")),this.orderedVirtualLoadedPage=l),0!=d&&(c=d-(d==o?o:h)-k.model.pageSettings.pageSize)>0&&(u=document.createElement("tr"),n(u).addClass("e-virtualrow").css("height",D*c).insertBefore(n(e).children("[name="+d+"]:first"))),d==a&&(m=k._gridRecordsCount-a-k.model.pageSettings.pageSize)>0&&(p=document.createElement("tr"),n(p).addClass("e-virtualrow").css("height",D*m).appendTo(e));o>0&&(g=document.createElement("tr"),n(g).addClass("e-virtualrow").css("height",D*o).prependTo(e));var O=this.getContent(),R=n(e).children("tr[name="+S+"]")[0],N=R.previousSibling,E=O.height(),A=R.offsetTop;if(this._virtaulUnSel)for(f=n.extend(!0,[],this._virtaulUnSel),_=0;_<f.length;_++){var M=f[_],P=this.model.pageSettings.currentPage;(M%this.model.pageSettings.pageSize==0?parseInt(M/this.model.pageSettings.pageSize):parseInt(M/this.model.pageSettings.pageSize)+1)==P&&(v=M%this.model.pageSettings.pageSize,n(e).find("tr[name="+S+"]").eq(v).attr("aria-selected","true").find(".e-rowcell, .e-detailrowcollapse, .e-detailrowexpand").addClass("e-selectionbackground e-active"),-1!=(b=this._virtaulUnSel.indexOf(M))&&this._virtaulUnSel.splice(b,1))}(R&&N&&(this._virIndex||n(N).hasClass("e-virtualrow")||N.offsetTop>S*E)&&(this._gridRecordsCount-S>=this.model.pageSettings.pageSize||R.offsetParent.offsetHeight-A<E)||this._lastRow)&&(this._lastRow&&(this._lastRow=!1),this._virIndex&&(this._virIndex=!1),this._isVirtualRecordsLoaded=!0,O.find(".e-content").scrollTop(A),this._scrollValue=this.getContent()[0].firstChild.scrollTop),n(x).get(0),y.firstChild,this._currentJsonData=i,this._gridRows=n(x).get(0).rows,C=n(x).find(".e-virtualrow").last(),w="normal"==this.model.scrollSettings.virtualScrollMode?C.height()-(n(x).height()-this._gridRecordsCount*D):1,C.css("height",w),this._eventBindings()},_replacingVirtualContent:function(){var e,t,i,s,l,o,a,r=this.getContentTable()[0],d=this._currentLoadedIndexes,h=n("<tbody></tbody>");if(this._checkCurrentVirtualView(this._virtualLoadedRows,this._currentVirtualIndex)){for(e=[],a=0;a<d.length;a++)n.merge(e,this._virtualLoadedRows[d[a]]);n(h).append(e)}else for(n("<tbody></tbody>"),a=0;a<d.length;a++)if(t=d[a],i=this._virtualLoadedRows[t])t<this._currentVirtualIndex?(o=h.find(".e-virtualview"+t)).length?n(i).insertBefore(o):h.prepend(i):n(i).insertAfter(h.find(".e-virtualview"+(t-1)));else{var c=n("<tbody></tbody>").append(n.render[this._id+"_JSONTemplate"](this._virtualLoadedRecords[t]))[0].rows,u=c.length-1;n(c[u]).addClass("e-virtualview"+t),s=t.toString(32),((l=n(c).attr("name",s)).length==this._virtualRowCount||t==this._totalVirtualViews)&&(this._virtualLoadedRows[t]=l,h.append(c))}if(r.replaceChild(h[0],r.lastChild),n(r.rows).removeClass("e-hover"),this._setVirtualTopBottom(),(this._isThumbScroll||this._remoteRefresh)&&(this._scrollObject._content[0].scrollTop=this._scrollObject.scrollTop(),this._isThumbScroll=this._remoteRefresh=!1),this.model.allowSelection&&this._checkVirtualSelection(),this._gridRows=r.rows,this._currentJsonData=this.model.currentViewData,this._checkCurrentVirtualView(this._queryCellView,this._currentVirtualIndex)||this._eventBindings(),this.model.queryCellInfo||this.model.rowDataBound)for(a=0;a<this._currentLoadedIndexes.length;a++)-1==n.inArray(this._currentLoadedIndexes[a],this._queryCellView)&&this._queryCellView.push(this._currentLoadedIndexes[a])},_setVirtualTopBottom:function(){var e,i,s,l,o,a,r,d,h,c=this.getContentTable()[0],u=this._vRowHeight,m=t.dataUtil.mergeSort(t.distinct(this._currentLoadedIndexes)),p=t.dataUtil.min(m),g=t.dataUtil.max(m),f=this._getVirtualTotalRecord();if("continuous"==this.model.scrollSettings.virtualScrollMode&&this._virtualLoadedRows[g+1]&&(s=Object.keys(this._virtualLoadedRows),g=(i=parseInt(t.dataUtil.max(s),10))-g),e=g*this._virtualRowCount*u,-1!=n.inArray(this._totalVirtualViews,this._currentLoadedIndexes)&&this._currentVirtualIndex!=this._totalVirtualViews&&(e=(f-(this._virtualRowCount-this._lastViewData))*u),l=f*u-e,"continuous"!=this.model.scrollSettings.virtualScrollMode||this._virtualLoadedRows[g+1]||(l=i&&i<=g+1?l:1),this.getContent().find(".e-virtualtop, .e-virtualbottom").remove(),o=1e6,l>0&&this._getVirtualTotalRecord()>2*this._virtualRowCount)if(Math.round(l).toString().length<7)t.buildTag("div.e-virtualbottom","",{height:l}).insertAfter(c);else for(t.buildTag("div.e-virtualbottom").insertAfter(c),r=Math.ceil(l/o),d=0;d<r;d++)h=o,d==r-1&&(h=l%o),n(c).next().append(t.buildTag("div","",{height:h}));if(p>1)if(a=(p-1)*this._virtualRowCount*u,Math.round(a).toString().length<7)t.buildTag("div.e-virtualtop","",{height:a}).insertBefore(c);else for(t.buildTag("div.e-virtualtop").insertBefore(c),r=Math.ceil(a/o),d=0;d<r;d++)h=o,d==r-1&&(h=a%o),n(c).prev().append(t.buildTag("div","",{height:h}));this._scrollObject.model.scrollTop!=this._scrollValue&&this.getContent().ejScroller("model.scrollTop",this._scrollValue)},_checkVirtualSelection:function(){for(var e,t,i,s,l,o,a,r,d,h=this.getContentTable()[0],c=0;c<this.selectedRowsIndexes.length;c++)t=this.selectedRowsIndexes[c],i=this._getSelectedViewData(t).viewIndex,-1!=n.inArray(i,this._currentLoadedIndexes)&&(e=t%this._virtualRowCount+this._currentLoadedIndexes.indexOf(i)*this._virtualRowCount,n(h.rows[e].cells).hasClass("e-selectionbackground")||(n(n(h.rows[e]).attr("aria-selected","true")[0].cells).addClass("e-selectionbackground e-active"),this.model.selectedRecords[c]=this._virtualLoadedRecords[i][e%this._virtualRowCount]));for(c=0;c<this._rowIndexesColl.length;c++)if(t=this._rowIndexesColl[c],i=this._getSelectedViewData(t).viewIndex,-1!=n.inArray(i,this._currentLoadedIndexes)&&-1==n.inArray(t,this._virtualRowCellSelIndex)||this._virtualDataRefresh)for(s=n.inArray(t,this._rowIndexesColl),l=this.selectedRowCellIndexes[s].cellIndex,o=0;o<l.length;o++)this._selectMultipleCells(t,l[o]);for(a=n(h.rows).find(".e-active, .e-cellselectionbackground").closest("tr"),c=0;c<a.length;c++){var u=parseInt(n(a[c]).attr("name"),32)*this._virtualRowCount-(this._virtualRowCount-n(a[c]).index()%this._virtualRowCount),m=n(a[c]).index();this.selectedRowsIndexes.length&&-1==n.inArray(u,this.selectedRowsIndexes)&&(this._clearVirtualSelection=!0,this.clearSelection(m)),this._rowIndexesColl.length&&-1==n.inArray(u,this._rowIndexesColl)&&n(this.getRowByIndex(m)[0].cells).removeClass("e-cellselectionbackground e-activecell")}for(n(h.rows).find(".e-columnselection").removeClass("e-columnselection"),r=0;r<this.selectedColumnIndexes.length;r++)d=this.selectedColumnIndexes[r]+1,n(h.rows).find("td:nth-of-type("+d+")").addClass("e-columnselection");this._clearVirtualSelection=!1},_refreshPagerTotalRecordsCount:function(){this.model.filterSettings.filteredColumns.length?this.getPager().ejPager({totalRecordsCount:null==this._searchCount?this._filteredRecordsCount:this._searchCount,currentPage:this._currentPage()}):this.getPager().ejPager({totalRecordsCount:null==this._searchCount?this._gridRecordsCount:this._searchCount,currentPage:this._currentPage()})},_maxZindex:function(){var e=1;return((e=Math.max.apply(null,n.map(n("body *"),function(e){if("absolute"==n(e).css("position"))return parseInt(n(e).css("z-index"))||1})))==r||null==e)&&(e=1),e},_keyPressed:function(e,i,s,l){var o,a,d,h,c,u,m,p,g,f,_,v,b=n(i);if(b.hasClass("e-tooltxt")&&13==s.code)return o={currentTarget:i,target:i.firstChild},n(i).closest(".e-gridtoolbar").ejToolbar("instance")._trigger("click",o),!1;if(!this._allowcellSelection||this._previousRowCellIndex&&0!=this._previousRowCellIndex.length||(this._previousRowCellIndex=[],this._previousRowCellIndex.push([0,[0]])),b.hasClass("e-ddl")&&13==s.code&&n(document.activeElement).parents("td").hasClass("e-templatecell")||!this.model.allowKeyboardNavigation||"INPUT"==i.tagName&&-1==this.model.keyConfigs[e].indexOf(",")&&40!=s.code&&38!=s.code&&13!=s.code&&27!=s.code&&9!=s.code||String.fromCharCode(s.code).toLowerCase()==this.element[0].accessKey.toLowerCase()||"checkbox"==n(i).prop("type")&&13!=s.code&&9!=s.code&&27!=s.code||"batch"==this.model.editSettings.editMode&&"INPUT"==i.tagName&&13!=s.code&&9!=s.code&&27!=s.code&&(0!=i.selectionStart&&"moveCellRight"!=e||i.selectionEnd!=i.value.length&&"moveCellLeft"!=e)||this.model.allowFiltering&&b.hasClass("e-filtertext")&&13==s.code||b.hasClass("e-fltrbtn")&&13==s.code||("dialog"==this.model.editSettings.editMode||"dialogtemplate"==this.model.editSettings.editMode)&&n(i).closest("#"+this._id+"EditForm").length||n(i).parent().siblings("#"+this._id+"EditForm").length||13==s.code&&b.parent().hasClass("e-unboundcelldiv"))return!0;if(13==s.code&&"INPUT"==i.tagName&&b.closest("#"+this._id+"_search").length&&(e="searchRequest"),13==s.code&&null!=this._excelFilter&&this._excelFilter._openedFltr.length&&this._excelFilter._openedFltr.is(":visible")&&(e="excelfilter"),13==s.code&&n(i).hasClass("e-gridtoolbar")&&(toolbarId=b.find(".e-hover").attr("Id"),e="toolbarOperationRequest"),!this.model.isEdit&&"cancelRequest"==e)return this.clearSelection(),this.clearCellSelection(),this.clearColumnSelection(),!0;if("true"==n(i).find("input.e-dropdownlist").attr("aria-expanded")&&this.model.isEdit&&"saveRequest"==e)return!0;if(null!=this.getPager()&&(d=(a=this.getPager().ejPager("model")).currentPage),h=!1,(b=n(i)).closest(".e-grid").attr("Id")===this._id){switch(e){case"insertRecord":!t.gridFeatures.edit||this.model.isEdit||this.model.editSettings.showAddNewRow||"normal"!=this.model.editSettings.editMode||this._toolbarOperation(this._id+"_add");break;case"toolbarOperationRequest":this._toolbarOperation(toolbarId),this.element.focus();break;case"searchRequest":this.search(b.val());break;case"excelfilter":u=this._id+this._excelFilter._$colType,this._excelFilter._openedFltr.hasClass("e-dlgcustom")&&(u+="Custom"),this._excelFilter._openedFltr.find("#"+u+"_OkBtn").trigger("click");break;case"saveRequest":t.gridFeatures.edit&&(b.blur(),"batch"==this.model.editSettings.editMode?(m=n(this.getRowByIndex(this._bulkEditCellDetails.rowIndex)),this.model.isEdit&&m.hasClass("e-insertedrow")&&this._batchCellValidation(this._bulkEditCellDetails.rowIndex),this._moveCurrentCell("down")):this._toolbarOperation(this._id+"_update"),l.stopPropagation());break;case"cancelRequest":t.gridFeatures.edit&&this._toolbarOperation(this._id+"_cancel");break;case"deleteRecord":t.gridFeatures.edit&&this._toolbarOperation(this._id+"_delete");break;case"editRecord":t.gridFeatures.edit&&(!this.model.isEdit||this.model.editSettings.showAddNewRow&&"normal"==this.model.editSettings.editMode)&&this._toolbarOperation(this._id+"_edit");break;case"totalGroupCollapse":t.gridFeatures.group&&(this.collapseAll(),this.element.focus());break;case"totalGroupExpand":t.gridFeatures.group&&(this.expandAll(),this.element.focus());break;case"selectedGroupExpand":t.gridFeatures.group&&(this._$currentTr=n(this.getRows()).eq(this._selectedRow()),c=this._$currentTr.parents("tr").first().prev().find(".e-recordpluscollapse"),this.expandCollapse(c));break;case"selectedGroupCollapse":t.gridFeatures.group&&(this._$currentTr=n(this.getRows()).eq(this._selectedRow()),c=this._$currentTr.parents("tr").first().prev().find(".e-recordplusexpand"),this.expandCollapse(c));break;case"firstRowSelection":t.gridFeatures.selection&&this.selectRows(0);break;case"lastRowSelection":t.gridFeatures.selection&&(f=this.model.scrollSettings.frozenColumns>0&&!t.isNullOrUndefined(this.getRows()[0])?n(this.getRows()[0]).length-1:n(this._excludeDetailRows()).length-1),this.selectRows(f);break;case"rowUpSelection":this.element.find(".e-row.e-hover,.e-alt_row.e-hover").removeClass("e-hover"),(p=null!=this._traverseRow?this._traverseRow:this._selectedRow())>0&&(this._nextRow=p,this._prevRow=p-1,n(this.getContent().find("tr.e-traverse")[0]).removeClass("e-traverse"),this.getRowByIndex(this._prevRow).addClass("e-traverse"),g=this.getContent().find("tr.e-traverse"),this._traverseRow=this.getIndexByRow(g));break;case"rowDownSelection":this.element.find(".e-row.e-hover,.e-alt_row.e-hover").removeClass("e-hover"),((p=null!=this._traverseRow?this._traverseRow:this._selectedRow())+1<this.model.currentViewData.length||this.model.scrollSettings.allowVirtualScrolling)&&(this._prevRow=p,this._nextRow=p+1,n(this.getContent().find("tr.e-traverse")[0]).removeClass("e-traverse"),this.getRowByIndex(this._nextRow).addClass("e-traverse"),g=this.getContent().find("tr.e-traverse"),this._traverseRow=this.getIndexByRow(g));break;case"randomSelection":this.element.find(".e-row.e-hover,.e-alt_row.e-hover").removeClass("e-hover"),"multiple"==this.model.selectionType&&(this.multiSelectCtrlRequest=!0),g=this.getContent().find("tr.e-traverse"),this._traverseRow=this.getIndexByRow(g),-1!=this._traverseRow&&(this.model.selectionSettings.enableToggle&&1==this.getSelectedRecords().length&&-1!=n.inArray(this._traverseRow,this.selectedRowsIndexes)?this.clearSelection(selectedIndex):this.selectRows(this._traverseRow)),this.getRowByIndex(p).removeClass("e-traverse"),this.multiSelectCtrlRequest=!1;break;case"upArrow":if(this.multiSelectCtrlRequest=!1,this._traverseRow=null,this.model.isEdit&&b.hasClass("e-ddl"))break;if(t.gridFeatures.selection&&(-1!=this._selectedRow()||this._previousRowCellIndex!=r)&&(this.element.is(document.activeElement)||this.element.find(document.activeElement).not(".e-gridtoolbar").length)){if(("text"==i.type||"checkbox"==i.type)&&this.model.isEdit&&"batch"!=this.model.editSettings.editMode)return!0;this._selectedRow()>0&&!this.model.scrollSettings.enableVirtualization&&(this._enableCheckSelect||this.selectRows(this._selectedRow()-1),"batch"==this.model.editSettings.editMode&&this._moveCurrentCell("up")),this._previousRowCellIndex&&0!=this._previousRowCellIndex.length&&0!=this._previousRowCellIndex[0][0]&&this._allowcellSelection&&(this.selectCells([[this._previousRowCellIndex[0][0]-1,this._previousRowCellIndex[0][1]]]),"batch"==this.model.editSettings.editMode&&this._moveCurrentCell("down"))}break;case"downArrow":if(this.multiSelectCtrlRequest=!1,this._traverseRow=null,this.model.isEdit&&b.hasClass("e-ddl"))break;if(t.gridFeatures.selection&&(this.element.is(document.activeElement)||this.element.find(document.activeElement).not(".e-gridtoolbar").length)){if(("text"==i.type||"checkbox"==i.type)&&this.model.isEdit&&"batch"!=this.model.editSettings.editMode)return!0;-1==this._selectedRow()&&(this.model.selectedRowIndex=0),f=this._excludeDetailRows().length-1,this.model.scrollSettings.frozenColumns>0&&!t.isNullOrUndefined(this.getRows()[0])&&(f=this.getRows()[0].length-1),this._selectedRow()==f||-1==this._selectedRow()||this.model.scrollSettings.enableVirtualization||(this._enableCheckSelect||this.selectRows(this._selectedRow()+1),"batch"==this.model.editSettings.editMode&&this._moveCurrentCell("down")),this._previousRowCellIndex&&0!=this._previousRowCellIndex.length&&this._previousRowCellIndex[0][0]!=f&&this._allowcellSelection&&(this.selectCells([[this._previousRowCellIndex[0][0]+1,this._previousRowCellIndex[0][1]]]),"batch"==this.model.editSettings.editMode&&this._moveCurrentCell("down"))}break;case"rightArrow":if(t.gridFeatures.selection&&this._allowcellSelection&&(this.element.is(document.activeElement)||this.element.find(document.activeElement).not(".e-gridtoolbar").length)){if(("text"==i.type||"checkbox"==i.type)&&this.model.isEdit&&"batch"!=this.model.editSettings.editMode)return!0;f=n(this.getRows()).length-1,this._previousRowCellIndex&&this._previousRowCellIndex[0][1]==this.model.columns.length-1&&this._previousRowCellIndex[0][0]!=f?this.selectCells([[this._previousRowCellIndex[0][0]+1,[0]]]):this._previousRowCellIndex&&this._previousRowCellIndex[0][1]!=this.model.columns.length-1&&this.selectCells([[this._previousRowCellIndex[0][0],[parseInt(this._previousRowCellIndex[0][1])+1]]])}break;case"leftArrow":if(t.gridFeatures.selection&&this._allowcellSelection&&(this.element.is(document.activeElement)||this.element.find(document.activeElement).not(".e-gridtoolbar").length)){if(("text"==i.type||"checkbox"==i.type)&&this.model.isEdit&&"batch"!=this.model.editSettings.editMode)return!0;this._previousRowCellIndex&&0==this._previousRowCellIndex[0][1]&&0!=this._previousRowCellIndex[0][0]?this.selectCells([[this._previousRowCellIndex[0][0]-1,[this.model.columns.length-1]]]):this._previousRowCellIndex&&0!=this._previousRowCellIndex[0][1]&&this.selectCells([[this._previousRowCellIndex[0][0],[parseInt(this._previousRowCellIndex[0][1])-1]]])}break;case"firstCellSelection":if(t.gridFeatures.selection&&this._allowcellSelection){if(("text"==i.type||"checkbox"==i.type)&&this.model.isEdit&&"batch"!=this.model.editSettings.editMode)return!0;(f=n(this.getRows()).length-1)>-1&&this.selectCells([[0,[0]]])}break;case"lastCellSelection":if(t.gridFeatures.selection&&this._allowcellSelection){if(("text"==i.type||"checkbox"==i.type)&&this.model.isEdit&&"batch"!=this.model.editSettings.editMode)return!0;(f=this.model.scrollSettings.frozenColumns>0&&!t.isNullOrUndefined(this.getRows()[0])?this.getRows()[0].length-1:n(this._excludeDetailRows()).length-1)>-1&&this.selectCells([[f,[this.model.columns.length-1]]])}break;case"nextPage":null!=this.getPager()&&(d+=1),t.isIOSWebView()||"msie"!=this.getBrowserDetails().browser||this.element.focus();break;case"previousPage":null!=this.getPager()&&(d-=1),t.isIOSWebView()||"msie"!=this.getBrowserDetails().browser||this.element.focus();break;case"lastPage":null!=this.getPager()&&(d=a.totalPages);break;case"firstPage":null!=this.getPager()&&(d=1);break;case"nextPager":null!=this.getPager()&&(d=Math.ceil(a.currentPage/a.pageCount)*a.pageCount+1);break;case"previousPager":null!=this.getPager()&&(d=(Math.floor(a.currentPage/a.pageCount)-1)*a.pageCount+1);break;case"moveCellLeft":"batch"==this.model.editSettings.editMode?(this._tabKey=!0,h=this._moveCurrentCell("left")):h=!0;break;case"moveCellRight":"batch"==this.model.editSettings.editMode&&b?(this._tabKey=!0,h=this._moveCurrentCell("right")):h=!0;break;case"multiSelectionByDownArrow":t.gridFeatures.selection&&(-1!=this._selectedRow()||this._previousRowCellIndex!=r)&&(f=this._excludeDetailRows().length-1,b=this.element.find(".e-gridcontent").find(".e-rowcell"),this.model.scrollSettings.frozenColumns>0&&!t.isNullOrUndefined(this.getRows()[0])&&(f=this.getRows()[0].length-1),this._selectedRow()<=f&&-1!=this._selectedRow()&&(_=this._selectedRow()+1,v=this._previousIndex,this.selectRows(v,_,b),_-1==f&&(this.selectRows(v,f),_=f)),this._selectedRow(_),this._previousIndex=v),"batch"==this.model.editSettings.editMode&&this.element.focus();break;case"multiSelectionByUpArrow":t.gridFeatures.selection&&(-1!=this._selectedRow()||this._previousRowCellIndex!=r)&&(f=this._excludeDetailRows().length-1,b=this.element.find(".e-gridcontent").find(".e-rowcell"),this._selectedRow()>=0&&this._selectedRow()>=-1&&(_=this._selectedRow()-1,v=this._previousIndex,this.selectRows(v,_,b),_<0&&(this.selectRows(v,0),_=0)),this._selectedRow(_),this._previousIndex=v),"batch"==this.model.editSettings.editMode&&this.element.focus();break;default:h=!0}return null!=this.getPager()&&d<=a.totalPages&&a.currentPage!==d&&"searchRequest"!=e&&"deleteRecord"!==e&&this.getPager().ejPager("goToPage",d),h}},_findColumnsWidth:function(){for(var e=this.getHeaderTable().find(".e-headercell").not(".e-stackedHeaderCell, .e-detailheadercell"),t=0;t<this.model.columns.length;t++)this.model.columns[t].visible&&(this.columnsWidthCollection[t]=e.eq(t+0).outerWidth())},_calculateWidth:function(){for(var e=this.getHeaderTable().find(".e-columnheader").last().find("th:visible"),t=0,i=0;i<e.length;i++)t+=e.eq(i).outerWidth();return t},_initIndicators:function(){var e=this._id+"_ColumnDropIndicator";n("#"+e).length&&n("#"+e).remove(),this._Indicator=document.createElement("DIV"),n(this._Indicator).attr("id",e).addClass("e-columndropindicator").addClass("e-dropAcceptor").appendTo(document.body),n(this._Indicator).css({display:"none"})},_refreshGroupSummary:function(){var e,t,i=this.getHeaderContent().find("colgroup col").clone();for(i.splice(0,this.model.groupSettings.groupedColumns.length),e=this.getContentTable().find(".e-groupsummary colgroup"),t=0;t<e.length;t++)n(e[t]).find(".e-summary").is("visible")||n(e[t]).find(".e-summary").show(),n(e[t]).find("col:not('.e-summary')").remove(),n(e[t]).append(i.clone())},reorderColumns:function(e,t){var i,s;"string"==typeof e&&"string"==typeof t?(i=this.getColumnIndexByField(e),s=this.getColumnIndexByField(t)):(i=e,s=t),-1!=i&&-1!=s&&"string"!=typeof i&&"string"!=typeof s&&(this.set_dropColumn(i,s),this.model.showStackedHeader&&this._refreshStackedHeader(),this.model.scrollSettings.allowVirtualScrolling&&(this.model.scrollSettings.enableVirtualization?(this._virtualDataRefresh=!0,this._queryCellView=[],this._virtualLoadedRows={},this._refreshVirtualView(this._currentVirtualIndex)):this._refreshVirtualContent()))},columns:function(e,s){var l,o,a,r,d;if(!t.isNullOrUndefined(e)){for(l=!1,"string"==typeof e?(e=[e],l=!0):e instanceof Array&&e.length&&"string"==typeof e[0]&&(l=!0),i=0;i<e.length;i++)o=l?e[i]:e[i].field,a=l?e[i]:e[i].headerText,r=!t.isNullOrUndefined(o)&&""!=o||!t.isNullOrUndefined(a)&&""!=a?t.isNullOrUndefined(o)||""==o?n.inArray(this.getColumnByHeaderText(a),this.model.columns):n.inArray(this.getColumnByField(o),this.model.columns):-1,"add"==s||t.isNullOrUndefined(s)?-1==r?this.model.columns.push(l?{field:e[i]}:e[i]):this.model.columns[r]=l?{field:e[i]}:e[i]:-1!=r&&this.model.columns.splice(r,1);for(this.columnsWidthCollection=[],tooltip=!1,d=0;d<this.model.columns.length;d++)this.columnsWidthCollection.push(this.model.columns[d].width),t.isNullOrUndefined(tooltip)||(tooltip=!0);this._enableRowHover(tooltip),this._refreshHeader(),(this.model.editSettings.allowEditing||this.model.editSettings.allowAdding)&&this._processEditing(),this.refreshContent(!0),this.model.allowScrolling&&(this.refreshScrollerEvent(),this.model.allowResizeToFit&&this.getContent().ejScroller("isVScroll")&&this._showHideScroller())}},_enableRowHover:function(e){var i,s=!0;if(t.isNullOrUndefined(e)){for(i=0;i<this.model.columns.length;i++)if(!t.isNullOrUndefined(this.model.columns[i].tooltip)){s=!0;break}}else s=e;this.model.enableRowHover||s?this._on(this.element,"mouseenter mouseleave",".e-gridcontent tr td",this._rowHover):this._off(this.element,"mouseenter mouseleave",".e-gridcontent tr td")},_rowHover:function(e){var i,s,l=n(e.target);if(i=this.model.scrollSettings.frozenColumns?n(this.getRows()):this.element.find(".e-row.e-hover,.e-alt_row.e-hover"),(!l.closest("#"+this._id+"EditForm").length||!l.hasClass("e-rowcell"))&&l.hasClass("e-rowcell"))return"mouseenter"==e.type&&l.hasClass("e-gridtooltip")&&this._showTooltip(l),this.model.enableRowHover&&(this.element.find(".e-traverse").removeClass("e-traverse"),this._traverseRow=null,"mouseenter"!=e.type||this._dragActive?(this.model.scrollSettings.frozenColumns>0&&!t.isNullOrUndefined(i[0])&&!t.isNullOrUndefined(i[1])&&(i=n(i[0]).add(i[1])),i.removeClass("e-hover")):this.model.scrollSettings.frozenColumns>0&&!t.isNullOrUndefined(i[0])&&!t.isNullOrUndefined(i[1])?((i=n(i[0]).add(i[1])).removeClass("e-hover"),-1!=(s=this.getIndexByRow(l.parent()))&&this.getRowByIndex(s).addClass("e-hover")):(i.removeClass("e-hover"),(l.parent().hasClass("e-row")||l.parent().hasClass("e-alt_row"))&&l.parent().addClass("e-hover"))),!1},_showTooltip:function(e,i){var s,l,o,a,r,d,h,c,u=e.index(),m=e.hasClass("e-stackedHeaderCell"),p={};if(e.hasClass("e-headercelldiv")&&(u=e.parent(".e-headercell").index()-this.model.groupSettings.groupedColumns.length),!m&&(this.model.childGrid||this.model.detailsTemplate)&&u--,this.model.scrollSettings.frozenColumns>0&&(e.closest(".e-movableheaderdiv").length||e.closest(".e-movablecontentdiv").length)&&(u+=this.model.scrollSettings.frozenColumns),(s=m?this._getStackedColumnByTarget(e):this.getColumnByIndex(u)).clipMode!=t.Grid.ClipMode.Ellipsis){if(s.clipMode==t.Grid.ClipMode.EllipsisWithTooltip&&(l=e,e.find("span").hasClass("e-tooltip")||($span=t.buildTag("span.e-tooltip",{},{}),$span.html(e.html()),l.append($span)),l.find("span.e-tooltip").css("display","inline-block"),o=l.find("span:first")[0].getBoundingClientRect().width,l.find("span.e-tooltip").remove(),e.width()>o))return void e.removeAttr("title");if(a=document.createElement("script"),t.isNullOrUndefined(s.tooltip)&&t.isNullOrUndefined(s.headerTooltip))return;a.id=(this._id+s.headerText+n.inArray(s,this.model.columns)+"_TemplateToolTip").split(" ").join(""),a.type="text/x-template",d=i?"headerTooltip":"tooltip",t.isNullOrUndefined(s[d])||"#"===s[d].slice(0,1)?r=n(s[d]):a.text=s[d],r&&(a.text=r.html(),a.type=r.attr("type")||a.type),n("body").append(a),h=e.closest("tr"),n(h).hasClass("e-columnheader")||(u=this.getIndexByRow(h),p=this.getCurrentViewData()[u]),p.value=e.text(),c=n(a).render(p),e.attr("title",c)}else e.removeAttr("title")},_rightClickHandler:function(e){var i,s,l;if(e.preventDefault(),i=t.browserInfo(),3==e.which||"msie"==i.name&&"8.0"==i.version){if(s={},$target=n(e.target),$gridRow=n(this.getRows()),this.getContentTable().has($target).length){var o=$gridRow.index($target.parent()),a=this.getRowByIndex(o),r=this._currentJsonData[o];if(this.model.scrollSettings.allowVirtualScrolling&&this.model.scrollSettings.enableVirtualization&&(r=(l=this._getSelectedViewData(o,$target)).data,o=l.rowIndex),-1==o)return;s={rowIndex:o,row:a,data:r,cellIndex:$target.index(),cellValue:$target.html(),cell:$target}}else if(this.getHeaderTable().has($target).length){if(o=0,$th=this.getHeaderTable().find("th").not(".e-detailheadercell,.e-grouptopleftcell,.e-filterbarcell"),-1==(o=$target.is(".e-headercelldiv")?$th.index($target.closest(".e-headercell")):$th.index($target)))return;s={headerIndex:o,headerText:this.getColumnFieldNames()[o],headerCell:$th.eq(o),column:this.getColumnByIndex(o)}}else($target.is(".e-pager")||null!=this.getPager()&&this.getPager().has($target).length)&&(s={pager:this.model.pageSettings});this._trigger("rightClick",s)}},_touchGrid:function(e){var t,i=this._currentPage(),s=!0;switch((this.model.allowScrolling||this.model.isResponsive&&0!=this.model.minWidth)&&(t=(this.getScrollObject()||{})._scrollXdata)&&(s="swipeleft"==e.type?t.scrollable-t.sTop==0:0==t.sTop),e.type){case"swipeleft":this.model.allowPaging&&i!=this.model.pageSettings.totalPages&&!this.model.isEdit&&s&&this.element.ejGrid("gotoPage",i+1);break;case"swiperight":this.model.allowPaging&&i>1&&!this.model.isEdit&&s&&this.element.ejGrid("gotoPage",i-1)}},_recorddblClickHandler:function(e){var t,i,s={},l=n(e.target).is(".e-rowcell")?n(e.target):n(e.target).closest("td");if(l.closest(".e-grid").attr("id")===this._id&&(l.is(".e-rowcell")||l.closest("td").is(".e-rowcell"))&&!(l.closest(".e-editcell,.e-editedbatchcell").length>0)){var o=this.getIndexByRow(l.closest("tr")),a=this.getRowByIndex(o),r=this._currentJsonData[o];this.model.scrollSettings.allowVirtualScrolling&&this.model.scrollSettings.enableVirtualization&&(r=(t=this._getSelectedViewData(o,l)).data,o=t.rowIndex),i=null!=this.model.detailsTemplate||null!=this.model.childGrid?l.index()-1:l.index(),s={rowIndex:o,row:a,data:r,cell:l,cellIndex:i,columnName:this.getColumnByIndex(i).headerText,cellValue:l.text()},this._trigger("recordDoubleClick",s)}},_invokeRecordClick:function(e,t){var i,s,l={},o=n(e.target).is(".e-rowcell")?n(e.target):n(e.target).closest("td");if(o.closest(".e-grid").attr("id")===t._id&&(o.is(".e-rowcell")||o.closest("td").is(".e-rowcell"))&&!(o.closest(".e-editcell,.e-editedbatchcell").length>0)){var a=t.getIndexByRow(o.closest("tr")),r=t.getRowByIndex(a),d=t._currentJsonData[a];t.model.scrollSettings.allowVirtualScrolling&&t.model.scrollSettings.enableVirtualization&&(d=(i=t._getSelectedViewData(a,o)).data,a=i.rowIndex),s=null!=t.model.detailsTemplate||null!=t.model.childGrid?o.index()-1:o.index(),l={rowIndex:a,row:r,data:d,cell:o,cellIndex:s,columnName:t.getColumnByIndex(s).headerText,cellValue:o.text()},t._trigger("recordClick",l)}},_recordClick:function(e){this._click++;var i=this,s=null;1==i._click?-1!==n.inArray("recordClick",this.model.serverEvents)&&-1!==n.inArray("recordDoubleClick",this.model.serverEvents)?s=setTimeout(function(){i._click=0,i._invokeRecordClick(e,i)},400):(i._click=0,t.isNullOrUndefined(s)||clearTimeout(s),i._invokeRecordClick(e,i)):2==i._click&&(t.isNullOrUndefined(s)||clearTimeout(s),i._click=0)},_headerMouseDown:function(e){if(n(e.target).hasClass("e-headercelldiv")&&!n(e.target).parent().hasClass("e-grouptopleftcell")||n(e.target).hasClass("e-headercell")){var t=n(e.target).hasClass("e-headercelldiv")?n(e.target).parent():n(e.target);this.model.enableHeaderHover&&t.removeClass("e-hover e-headercell-hover").addClass("e-headercellactive e-active")}if(this.model.allowResizing)return this._resizer._mouseDown(e)},_contentMouseDown:function(e){var i,s,l;n(e.target).closest("td").hasClass("e-selectionbackground")||n(e.target).closest("tr").length&&(i="touchstart"==e.type?e.originalEvent.touches[0].pageX:e.pageX,s="touchstart"==e.type?e.originalEvent.touches[0].pageY:e.pageY,this._dragDiv=t.buildTag("div.e-griddragarea","",{position:"absolute",width:"0px",height:"0px"}),this.getContent().append(this._dragDiv),(l=n(e.target).closest("tr.e-row")).length||(l=n(e.target).closest("tr.e-alt_row")),this._startIndex=l.length?this.getIndexByRow(l):null,this._on(n(document),"touchmove mousemove",this._mouseMoveDragHandler),t.isIOSWebView()||"safari"!=this.getBrowserDetails().browser||this.model.contextMenuSettings.enableContextMenu||this._on(this.element,"contextmenu",function(e){e.preventDefault()}),this._on(n(document),"touchend mouseup",this._mouseUpDragHandler),this._startDrag={_x:i,_y:s})},_mouseMoveDragHandler:function(e){var i,s,l,o;if(e.pageY!=this._startDrag._y){i="touchmove"==e.type?e.originalEvent.touches[0].pageX:e.pageX,s="touchmove"==e.type?e.originalEvent.touches[0].pageY:e.pageY,this._selectDrag=!0,this._dragDiv[0].offsetLeft,this._dragDiv[0].offsetTop;var a,r=this._startDrag._x,d=this._startDrag._y,h=i,c=s,u=s+2;r>h&&(a=h,h=r,r=a),d>c&&(a=c,c=d,d=a,u=s-2),this._dragDiv.height(),this._dragDiv.css({left:r,top:d,width:h-r,height:c-d}),(o=(l=n(document.elementFromPoint(i,u))).closest("tr.e-row")).length||(o=l.closest("tr.e-alt_row")),o.length&&(this._endIndex=this.getIndexByRow(o),t.isNullOrUndefined(this._startIndex)&&(this._startIndex=this._endIndex),this.selectRows(this._startIndex,this._endIndex))}},_mouseUpDragHandler:function(e){this._off(n(document),"touchend mouseup",this._mouseUpDragHandler),this._off(n(document),"touchmove mousemove",this._mouseMoveDragHandler),t.isIOSWebView()||"safari"!=this.getBrowserDetails().browser||this.model.contextMenuSettings.enableContextMenu||this._off(this.element,"contextmenu",function(e){e.preventDefault()}),e.stopPropagation(),this._selectDrag=!1,this._dragDiv.remove()},_headerHover:function(e){var t=n(e.target);"mouseover"==e.type||"mousemove"==e.type||"touchmove"==e.type||"MSPointerMove"==e.type?((this.model.allowResizing||this.model.allowResizeToFit)&&this._resizer._mouseHover(e),this.model.enableHeaderHover&&!this._dragActive&&(t.hasClass("e-headercelldiv")&&!t.parent().hasClass("e-grouptopleftcell")||t.hasClass("e-headercell"))&&(t.hasClass("e-headercelldiv")&&(t=t.parent()),this.getHeaderTable().find(".e-columnheader").find(".e-headercell-hover").removeClass("e-headercell-hover").removeClass("e-hover"),t.addClass("e-headercell-hover e-hover")),t.hasClass("e-gridtooltip")&&this._showTooltip(t),t.hasClass("e-headertooltip")&&this._showTooltip(t,!0),"mouseover"==e.type&&this._addCursor()):this.model.enableHeaderHover&&this.getHeaderTable().find(".e-columnheader").find(".e-headercell-hover").removeClass("e-headercell-hover").removeClass("e-hover")},_addCursor:function(){var e,i,s;if(this.model.allowResizing||this.model.allowResizeToFit||this.model.allowGrouping||this.model.allowFiltering||this.model.allowSorting||this.model.allowReordering||this.model.contextMenuSettings.enableContextMenu||this._allowcolumnSelection){if(this.getHeaderTable().find(".e-columnheader").removeClass("e-defaultcursor"),!this.model.contextMenuSettings.enableContextMenu&&"column"!=this.model.selectionSettings.selectionMode){for(e=[{val:this.model.allowSorting,str:"sort"},{val:this.model.allowGrouping,str:"group"},{val:this.model.allowReordering,str:"reorder"},{val:this.model.allowFiltering,str:"filter"}],i=0,s=0;s<e.length;s++)0==e[s].val&&(e.splice(s,1),s--);for(s=0;s<this.model.columns.length&&e.length>0;s++){for(j=0;j<e.length;j++)switch(e[j].str){case"sort":t.isNullOrUndefined(this.model.columns[s].allowSorting)||this.model.columns[s].allowSorting||i++;break;case"group":t.isNullOrUndefined(this.model.columns[s].allowGrouping)||this.model.columns[s].allowGrouping||i++;break;case"reorder":t.isNullOrUndefined(this.model.columns[s].allowReordering)||this.model.columns[s].allowReordering||i++;break;case"filter":t.isNullOrUndefined(this.model.columns[s].allowFiltering)||this.model.columns[s].allowFiltering||i++}isTempCol=!t.isNullOrUndefined(this.model.columns[s].template)||!t.isNullOrUndefined(this.model.columns[s].templateID),i!=e.length||isTempCol||this.getHeaderTable().find(".e-headercell").eq(s).addClass("e-defaultcursor"),i=0}}}else this.getHeaderTable().find(".e-columnheader").addClass("e-defaultcursor"),this.getHeaderTable().find(".e-headercell").removeClass("e-defaultcursor")},_colgroupRefresh:function(){var e,t,i,s;(this.model.allowResizing||this.model.allowResizeToFit)&&this.model.scrollSettings.frozenColumns>0?(e=n(this.getHeaderTable()).find("colgroup"),t=n(this.getContentTable()).find("colgroup")):(e=n(this.getHeaderTable()).find("colgroup")[0],t=n(this.getContentTable()).find("colgroup")[0]),i=n(e).clone(),s=n(t).clone(),n(t).remove(),n(e).remove(),(this.model.allowResizing||this.model.allowResizeToFit)&&this.model.scrollSettings.frozenColumns>0?(n(i[0]).prependTo(this.getHeaderTable()[0]),n(i[1]).prependTo(this.getHeaderTable()[1]),n(s[0]).prependTo(this.getContentTable()[0]),n(s[1]).prependTo(this.getContentTable()[1])):(n(i).prependTo(this.getHeaderTable()),n(s).prependTo(this.getContentTable()))},_detailColsRefresh:function(){this._$headerCols=this.getHeaderTable().children("colgroup").find("col"),this._$contentCols=this.getContentTable().children("colgroup").find("col");var e=this.model.columns.length;this._$headerCols.length>e&&this._$headerCols.splice(0,this._$headerCols.length-e),this._$contentCols.length>e&&this._$contentCols.splice(0,this._$contentCols.length-e)},_summaryColRrefresh:function(){for(var e=this.getFooterContent().find(".e-gridsummary"),t=0;t<this.columnsWidthCollection.length;t++)e.find("col").eq(t).width(this.columnsWidthCollection[t])},_headerdblClickHandler:function(e){this.model.allowResizeToFit&&this._resizer._columnResizeToFit(e),this.model.allowScrolling&&this.getScrollObject().refresh(this.model.scrollSettings.frozenColumns>0)},_mouseUp:function(e){this.model.allowResizing&&this._resizer._mouseUp(e)},_mouseMove:function(e){this.model.allowResizing&&this._resizer._mouseMove(e)},_setModel:function(e){var i,s,l,o,a,d,h,c,u,m,p,g,f,_,v,b,C,w,y;for(i in e)switch(i){case"enableResponsiveRow":e[i]?(this.element.addClass("e-responsive"),this.model.minWidth&&(this._removeMedia(),this._scrollerAddedOnMedia=!1),this.model.allowFiltering&&(this.element.find(".e-filterDialoge").remove(),this._renderFilterDialogs(),this._renderResponsiveFilter(),this.element.find(".e-gridtoolbar").remove())):(this.model.allowFiltering&&(n("body").find(".e-filterDialoge").remove(),this._renderFilterDialogs()),"none"==this.element.css("display")&&this.element.css("display","block"),this.element.removeClass("e-responsive"),this.model.minWidth&&this._addMedia(),this.model.allowScrolling&&(this.getScrollObject().refresh(),this.getScrollObject().isVScroll()?this.getScrollObject().isVScroll()&&(this.getHeaderContent().addClass("e-scrollcss"),this.getHeaderContent().find(".e-headercontent").addClass("e-hscrollcss")):(this.getHeaderContent().removeClass("e-scrollcss"),this.getHeaderContent().find(".e-headercontent").removeClass("e-hscrollcss")))),this._tdsOffsetWidth=[],(this.model.allowFiltering||this.model.allowSorting)&&(-1!=(s=this.model.toolbarSettings.toolbarItems.indexOf("responsiveFilter"))&&this.model.toolbarSettings.toolbarItems.splice(s,1),-1!=(l=this.model.toolbarSettings.toolbarItems.indexOf("responsiveSorting"))&&this.model.toolbarSettings.toolbarItems.splice(l,1),this.element.find(".e-gridtoolbar").remove(),this._renderToolBar().insertBefore(this.element.find(".e-gridheader").first()));break;case"showColumnChooser":e[i]?(this._visibleColumns=[],this._hiddenColumns=[],this._visibleColumnsField=[],this._hiddenColumnsField=[],this._renderGridHeaderInternalDesign(this.model.columns),this._renderColumnChooser()):(n("#"+this._id+"ccDiv").data("ejDialog").isOpened()&&n("#"+this._id+"_ccTail").remove(),o=this.element.find(".e-ccButton").outerHeight(),this.element.find(".e-ccButton").remove(),n("#"+this._id+"ccDiv_wrapper").remove(),this.element.css("margin-top",parseInt(this.element.css("margin-top"),10)-o));break;case"gridLines":this.getContent().removeClass("e-horizontallines e-verticallines e-hidelines"),this.getHeaderContent().removeClass("e-horizontallines e-verticallines e-hidelines"),this._showHeaderGridLines(),this._showGridLines();break;case"showDeleteConfirmDialog":this.model.editSettings.showDeleteConfirmDialog=e[i],e[i]?this._renderConfirmDialog():this.element.find("#"+this._id+"ConfirmDialog_wrapper").remove();break;case"showConfirmDialog":this.model.editSettings.showConfirmDialog=e[i],e[i]?this._renderConfirmDialog():this.element.find("#"+this._id+"ConfirmDialog_wrapper").remove();break;case"pageSettings":if(a=this.getPager().ejPager("model"),t.isNullOrUndefined(e[i].currentPage)||a.currentPage!=this._currentPage()){for(d in e[i])"currentPage"!=d&&e[i][d]===a[d]&&delete e[i][d];if(n.isEmptyObject(e[i]))break;e[i].currentPage=this._currentPage(),this.getPager().ejPager("option",e[i]),this._renderPagerTemplate(this.getPager(),e[i].showDefaults),this._currentPage(this._currentPage()>a.totalPages?a.totalPages:this._currentPage()),this.refreshContent()}break;case"columns":h=e.columns,this.model.columns=[],this.columns(h,"add");break;case"allowPaging":this.model.allowPaging=e[i],e[i]&&0==this.element.children(".e-pager").length?(this.element.append(this._renderGridPager()),this.refreshContent(),this.getPager().ejPager("refreshPager")):(this.getPager().remove(),this.setGridPager(null),this.refreshContent(),"filterbar"==this.model.filterSettings.filterType&&this.model.allowFiltering&&this._createPagerStatusBar());break;case"allowSearching":this.model.allowSearching=e[i];break;case"searchSettings":n.extend(this.model.searchSetings,e[i]),this.refreshContent();break;case"allowGrouping":e[i]&&0==this.element.children(".e-groupdroparea").length?(this.model.allowGrouping=e[i],this.addGroupingTemplate(),this.model.showColumnChooser&&this.element.find(".e-ccButton").length>0?this.element.find(".e-ccButton").after(this._renderGroupDropArea()):this.element.prepend(this._renderGroupDropArea()),this._enableGroupingEvents(),this._headerCellgDragDrop(),this._off(this.element,"mouseenter mouseleave",".e-groupdroparea,.e-groupheadercell",this._dropAreaHover),this._on(this.element,"mouseenter mouseleave",".e-groupdroparea,.e-groupheadercell",this._dropAreaHover)):this.element.children(".e-groupdroparea").remove(),this.model.allowGrouping&&(t.isNullOrUndefined(e.groupSettings)||n.extend(this.model.groupSettings,e.groupSettings),this._enableGrouping());break;case"groupSettings":n.extend(this.model.groupSettings,e[i]),this.model.allowGrouping&&t.isNullOrUndefined(e.allowGrouping)&&this._enableGrouping(),t.isNullOrUndefined(this.model.groupSettings.enableDropAreaAnimation)||(this.model.groupSettings.enableDropAreaAutoSizing=this.model.groupSettings.enableDropAreaAnimation);break;case"cssClass":this.element.removeClass(this.model.cssClass).addClass(e[i]);break;case"allowFiltering":case"filterSettings":if("filterSettings"==i?n.extend(this.model.filterSettings,e[i]):this.model.allowFiltering=e[i],this._$fDlgIsOpen&&this._closeFDialog(),this.model.allowFiltering){if(this.model.filterSettings.filterType==t.Grid.FilterType.FilterBar)for(this.getHeaderTable().find(".e-filterbar").remove(),this.getHeaderTable().find(".e-columnheader").find(".e-filtericon").remove().end().find(".e-headercellfilter").removeClass("e-headercellfilter"),this._renderFiltering(),this._renderFilterBarTemplate(),this.model.filterSettings.showFilterBarStatus&&!this.model.allowPaging?this._createPagerStatusBar():this.model.allowPaging&&this.getPager().ejPager({enableExternalMessage:this.model.filterSettings.showFilterBarStatus}),c=this.getHeaderTable().find(".e-filterbar"),v=0;v<this.model.groupSettings.groupedColumns.length;v++)c.prepend(this._getEmptyFilterBarCell());else if(!u&&(this.model.filterSettings.filterType==t.Grid.FilterType.Menu||this.model.filterSettings.filterType==t.Grid.FilterType.Excel)){for(u=1,this.getHeaderTable().find(".e-columnheader").find(".e-filtericon").remove().end().find(".e-headercellfilter").removeClass("e-headercellfilter"),this.getHeaderTable().find(".e-filterbar").remove(),m=this.getHeaderTable().find(".e-columnheader").find(".e-headercell").not(".e-detailheadercell"),v=0;v<m.length;v++)p=m.eq(v).find(".e-headercelldiv").attr("ej-mappingname"),t.isNullOrUndefined(p)||(g=this.getColumnByField(p),!t.isNullOrUndefined(g)&&(t.isNullOrUndefined(g.allowFiltering)||g.allowFiltering)&&m.eq(v).addClass("e-headercellfilter").append(t.buildTag("div.e-filtericon e-icon e-filterset")));this.model.filterSettings.filterType==t.Grid.FilterType.Excel?(this._isExcelFilter=!0,this._renderExcelFilter()):this._isExcelFilter&&(this._isExcelFilter=!1,this._excelFilter.resetExcelFilter(),this._excelFilter=null),this._renderFilterDialogs(),this.model.filterSettings.filteredColumns=[],this.refreshContent()}this._enableFilterEvents()}else this.model.filterSettings.filterType==t.Grid.FilterType.FilterBar?this.getHeaderTable().find(".e-filterbar").remove():(this.model.filterSettings.filterType==t.Grid.FilterType.Menu||this.model.filterSettings.filterType==t.Grid.FilterType.Excel)&&this.getHeaderTable().find(".e-columnheader").find(".e-filtericon").remove().end().find(".e-headercellfilter").removeClass("e-headercellfilter"),(this._isExcelFilter||this._excelFilterRendered)&&(this._isExcelFilter=this._excelFilterRendered=!1,this._excelFilter.resetExcelFilter(),this._excelFilter=null),this.model.filterSettings.filteredColumns=[],this.refreshContent();this.model.isResponsive&&this.model.allowScrolling&&((f={}).requestType="filtering",this._refreshScroller(f));break;case"enableRowHover":this.model.enableRowHover=e[i],this._enableRowHover();break;case"allowScrolling":case"scrollSettings":if(S=this.getContent(),"allowScrolling"!=i){if(!t.util.isNullOrUndefined(e.scrollSettings)){if(n.isEmptyObject(e.scrollSettings))break;t.util.isNullOrUndefined(e.scrollSettings.enableVirtualization)||t.util.isNullOrUndefined(e.scrollSettings.allowVirtualScrolling)||(e.scrollSettings.allowVirtualScrolling=e.scrollSettings.enableVirtualization),n.extend(this.model.scrollSettings,e.scrollSettings)}this._initHeight=this.model.scrollSettings.height,this._isHeightResponsive="100%"==this.model.scrollSettings.height,this.model.scrollSettings.allowVirtualScrolling&&(this._currentPage(1),this.model.currentIndex=1,this.model.scrollSettings.enableVirtualization?(this._virtualRowCount=Math.round(this.model.scrollSettings.height/this.getRowHeight())+1,this._refreshVirtualViewDetails(),this._refreshVirtualViewData()):(this._createPagerStatusBar(),this._showPagerInformation(this.model.pageSettings))),e.scrollSettings.frozenColumns!==r||e.scrollSettings.frozenRows!==r||e.scrollSettings.allowVirtualScrolling!==r||e.scrollSettings.virtualScrollMode!==r||e.scrollSettings.enableVirtualization!=r?((w=this.model).query=this.commonQuery.clone(),-1!=this._selectedRow()&&this.clearSelection(this._selectedRow()),e.scrollSettings.virtualScrollMode!=r&&(w.pageSettings.currentPage=1),this.element.ejGrid("destroy").ejGrid(w)):(t.util.isNullOrUndefined(e.allowScrolling)||(this.model.allowScrolling=e.allowScrolling),t.util.isNullOrUndefined(S.data("ejScroller"))||S.ejScroller("destroy"),this.model.allowScrolling?(this.getHeaderContent().find("div").first().addClass("e-headercontent"),this._originalScrollWidth=this.model.scrollSettings.width,this._renderScroller(),this.setWidthToColumns(),t.util.isNullOrUndefined(S.data("ejScroller"))||this.getScrollObject().refresh(),this.refreshScrollerEvent()):(this.element.children(".e-gridheader").removeClass("e-scrollcss"),0==this.element.get(0).style.width.length&&this.element.css("width","auto"),this.setWidthToColumns()),this._addLastRow())}break;case"currentIndex":this.model.allowScrolling&&this.model.scrollSettings.allowVirtualScrolling&&this.model.scrollSettings.enableVirtualization?(_=Math.ceil(e.currentIndex/this._virtualRowCount),this._isThumbScroll=!0,this._refreshVirtualView(_),this._refreshVirtualViewScroller(!0)):this._scrollObject.option("scrollTop",e.currentIndex*this.getRowHeight());break;case"locale":this.model.locale=e[i],this.model.query=this.commonQuery.clone(),this._destroy(),this.element.css("margin-top","0px").addClass("e-grid"+this.model.cssClass),this._init();break;case"dataSource":for(S=this.element.find(".e-gridcontent").first(),n.isFunction(e.dataSource)||this.resetModelCollections(),1==this._gridRecordsCount&&!t.isNullOrUndefined(this._cDeleteData)&&-1==n.inArray(this._cDeleteData[0],this._dataSource())&&this.model.editSettings.allowDeleting&&(this._gridRecordsCount=this._dataSource().length),v=0;v<this.model.columns.length;v++)this.model.columns[v].template!==r&&(this._columntemplaterefresh=!0);this._refreshDataSource(this._dataSource()),this.element.children(".e-gridfooter").remove(),this.model.showSummary&&this.model.currentViewData.length>0&&this._renderGridFooter().insertAfter(S),this._gridRecordsCount&&this.model.allowFiltering&&(this._initColumns(this.model.currentViewData[0]!=r?this.model.currentViewData[0]:this.model.currentViewData.value),this._renderFilterDialogs()),(!this.model.scrollSettings.enableVirtualization||this._gridRows.length<this._virtualRowCount)&&this._addLastRow();break;case"selectedRowIndex":-1!=this._selectedRow()&&-1==n.inArray(this._selectedRow(),this.selectedRowsIndexes)?(this.model.currentIndex=this._selectedRow(),this.selectRows(this._selectedRow())):-1==this._selectedRow()&&(this.clearSelection(),this.selectedRowsIndexes=[]);break;case"selectedRowIndices":1==this.model.allowSelection&&"multiple"==this.model.selectionType&&this._selectedMultipleRows().length>0?(this.model.selectedRowIndices=e[i],this._selectingMultipleRows(this.model.selectedRowIndices)):0==this._selectedMultipleRows().length&&(this.clearSelection(),this.selectedRowsIndexes=[]);break;case"editType":-1!=this._selectedRow()&&-1==n.inArray(this._selectedRow(),this.selectedRowsIndexes)&&this.selectRows(this._selectedRow());break;case"editSettings":n.extend(this.model.editSettings,e[i]),this.refreshToolbar(),this.refreshContent(!0),this.refreshBatchEditMode(),this._tdsOffsetWidth=[],n("#"+this._id+"_dialogEdit").data("ejDialog")&&n("#"+this._id+"_dialogEdit").ejDialog("destroy"),n("#"+this._id+"_dialogEdit_wrapper,#"+this._id+"_dialogEdit").remove(),n("#"+this._id+"_externalEdit").remove(),this.getContentTable().find(".e-insertedrow").remove(),this.model.isEdit=!1,"normal"!=this.model.editSettings.editMode&&(this.model.editSettings.showAddNewRow=!1),this.model.editSettings.showAddNewRow||this.getContentTable().find(".e-addedrow").length&&this.cancelEdit(),(this.model.editSettings.allowEditing||this.model.editSettings.allowAdding)&&("dialog"==this.model.editSettings.editMode||"dialogtemplate"==this.model.editSettings.editMode?this.element.append(this._renderDialog()):("externalform"==this.model.editSettings.editMode||"externalformtemplate"==this.model.editSettings.editMode)&&this.element.append(this._renderExternalForm())),(this.model.editSettings.allowDeleting&&this.model.editSettings.showDeleteConfirmDialog||"batch"==this.model.editSettings.editMode&&this.model.editSettings.showConfirmDialog)&&t.isNullOrUndefined(this._confirmDialog)&&this._renderConfirmDialog(),this._enableEditingEvents(),this.refreshToolbar();break;case"allowResizing":this.model.allowResizing=e[i],this.model.allowResizing?(this._on(this.element,t.eventType.mouseMove,this._mouseMove),this._on(this.element,"mouseup",this._mouseUp),this._resizer=this._resizer||new t.gridFeatures.gridResize(this)):(this._off(this.element,t.eventType.mouseMove,this._mouseMove),this._off(this.element,"mouseup",this._mouseUp),this.model.allowResizeToFit||(this._resizer=null));break;case"allowResizeToFit":this.model.allowResizeToFit?(this._on(this.element,"dblclick",".e-gridheader",this._headerdblClickHandler),this._resizer=this._resizer||new t.gridFeatures.gridResize(this),this.setWidthToColumns()):(this._off(this.element,"dblclick",".e-gridheader",this._headerdblClickHandler),this.model.allowResizing||(this._resizer=null));break;case"allowReordering":this.model.allowReordering=e[i],this.model.allowReordering&&this._headerCellreorderDragDrop();break;case"allowRowDragAndDrop":this.model.allowRowDragAndDrop?(this._rowsDragAndDrop(),"multiple"==this.model.selectionType&&this._on(this.element,"touchstart mousedown",".e-gridcontent",this._contentMouseDown)):(this._off(this.element,"touchstart mousedown",".e-gridcontent",this._contentMouseDown),this.getContentTable().ejDroppable("destroy"),n(this.getRows()).ejDraggable("destroy"));break;case"showSummary":case"summaryRows":if("showSummary"==i&&e[i]&&this.addSummaryTemplate(),"showSummary"!=i||e[i]){if("summaryRows"==i&&this.model.showSummary||"showSummary"==i){this.element.children(".e-gridfooter").remove(),this.element.children(".e-gridfooter").remove();var S=this.element.find(".e-gridcontent").first(),x=this.model.query.queries,T=[];for(v=0;v<x.length;v++)"onPage"===x[v].fn&&(T=x.splice(v,1));b=this.model.query,this._setSummaryAggregate(b),T.length&&b.queries.push(T[0]),this.model.currentViewData.length&&(this._isLocalData?(this._remoteSummaryData=this._dataManager.executeLocal(b).aggregates,this._renderGridFooter().insertAfter(S)):(C=this,this._dataManager.executeQuery(b).done(function(e){C.element.children(".e-gridfooter").remove(),C._remoteSummaryData=e.aggregates,C._renderGridFooter().insertAfter(S)}))),this.model.allowGrouping&&(this._rowCol=this._captionSummary(),this._isCaptionSummary=(null!=this._rowCol&&this._rowCol.length)>0,this.refreshContent(!0))}}else this.element.children(".e-gridfooter").remove();break;case"enableAltRow":this.model.enableAltRow=e[i],this.addInitTemplate(),this.refreshContent();break;case"toolbarSettings":n.extend(this.model.toolbarSettings,e[i]),this.element.children(".e-gridtoolbar").remove(),this.model.toolbarSettings.showToolbar&&this._renderToolBar().insertBefore(this.element.find(".e-gridheader").first());break;case"allowSorting":this.model.allowSorting=e[i],this.model.allowSorting||this.clearSorting();break;case"selectionSettings":n.extend(this.model.selectionSettings,e[i]),this.clearSelection(),this.clearCellSelection(),this.clearColumnSelection(),this._allowrowSelection=this._allowcellSelection=this._allowcolumnSelection=!1,this.model.selectionSettings.selectionMode.length>0&&this.model.allowSelection&&this._initSelection();break;case"sortSettings":n.extend(this.model.sortSettings,e[i]),this.refreshContent();break;case"contextMenuSettings":n.extend(this.model.contextMenuSettings,e[i]),!t.isNullOrUndefined(n("#"+this._id+"_Context").data("ejMenu"))&&n("#"+this._id+"_Context").ejMenu("destroy")&&n("#"+this._id+"_Context").remove(),this.model.contextMenuSettings.enableContextMenu&&this._renderContext();break;case"enableRTL":this.model.enableRTL=e[i],(w=this.model).query=this.commonQuery.clone(),this.element.ejGrid("destroy"),w.enableRTL?n("#"+this._id).addClass("e-rtl"):n("#"+this._id).removeClass("e-rtl"),n("#"+this._id).ejGrid(w);break;case"enableTouch":this.model.enableTouch=e[i],this.model.enableTouch?(this._on(this.element,"swipeleft swiperight",".e-gridcontent .e-table",n.proxy(this._touchGrid,this)),this.element.removeClass("e-touch")):(this.element.addClass("e-touch"),this._off(this.element,"swipeleft swiperight",".e-gridcontent .e-table"));break;case"allowSelection":e[i]?(this._off(this.element,n.isFunction(n.fn.tap)&&this.model.enableTouch?"tap":"click",this._clickHandler),this._on(this.element,"click",this._clickHandler),this._initSelection()):(this.clearSelection(),this.clearCellSelection(),this.clearColumnSelection(),this._allowrowSelection=this._allowcellSelection=this._allowcolumnSelection=!1);break;case"query":this.commonQuery=n.extend(!0,{},e[i]);break;case"showStackedHeader":case"stackedHeaderRows":this.model.showStackedHeader&&e.stackedHeaderRows&&e.stackedHeaderRows.length>0?(t.getObject("stackedHeaderRows.length",e)&&(this.model.stackedHeaderRows=e.stackedHeaderRows),this._refreshStackedHeader()):this.getHeaderTable().find(".e-stackedHeaderRow").remove();break;case"allowTextWrap":case"textWrapSettings":n.extend(this.model.textWrapSettings,e[i]),this._setTextWrap();break;case"rowTemplate":this.refreshContent(!0);break;case"detailsTemplate":this.model.scrollSettings.frozenColumns>0||this.model.scrollSettings.frozenRows>0?(this._renderAlertDialog(),this._alertDialog.find(".e-content").text(this._getLocalizedLabels("FrozenNotSupportedException")),this._alertDialog.ejDialog("open")):((y=this.element.children(".e-gridheader")).find("div").first().empty().append(this._renderGridHeader().find("table")),this.model.allowFiltering&&"filterbar"==this.model.filterSettings.filterType&&this._renderFiltering(),this.setGridHeaderContent(y),this.refreshContent(!0),this.model.allowReordering&&this._headerCellreorderDragDrop(),this.model.allowGrouping&&this._headerCellgDragDrop())}},resetModelCollections:function(){this.model.groupSettings.groupedColumns=[],this.model.filterSettings.filteredColumns=[],this.model.sortSettings.sortedColumns=[],this.model.pageSettings.currentPage=this.defaults.pageSettings.currentPage},_enableGrouping:function(){var e,i,s,l,o;if(this.refreshTemplate(),this.model.groupSettings.showToggleButton)for(e=0;e<this.model.columns.length;e++)i=this.getHeaderTable().find(".e-columnheader").find(".e-headercelldiv").eq(e),s=this.model.columns[e].field,-1!=n.inArray(s,this._disabledGroupableColumns)||t.isNullOrUndefined(s)||""==s||i.find(".e-gridgroupbutton").length||(-1!=n.inArray(s,this.model.groupSettings.groupedColumns)?i.append(this._getToggleButton().addClass("e-toggleungroup")):i.append(this._getToggleButton().addClass("e-togglegroup")));if(this.model.groupSettings.showToggleButton||this.getHeaderTable().find(".e-gridgroupbutton").remove(),this.element.find(".e-groupdroparea").remove(),this.model.groupSettings.showDropArea&&(this.model.showColumnChooser&&this.element.find(".e-ccButton").length>0?this.element.find(".e-ccButton").after(this._renderGroupDropArea()):this.element.prepend(this._renderGroupDropArea()),t.gridFeatures.dragAndDrop&&(this._groupHeaderCelldrag(),this._headerCellgDragDrop())),!t.isNullOrUndefined(this.model.groupSettings.groupedColumns.length)&&this.model.groupSettings.groupedColumns.length){for((l={}).columnName=this.model.groupSettings.groupedColumns[this.model.groupSettings.groupedColumns.length-1],l.requestType=t.Grid.Actions.Grouping,n(".e-grid").find(".e-groupdroparea").empty(),o=0;o<this.model.groupSettings.groupedColumns.length-1;o++)this._addColumnToGroupDrop(this.model.groupSettings.groupedColumns[o]);for(o=0;o<this.model.groupSettings.groupedColumns.length;o++)t.isNullOrUndefined(this.getsortColumnByField(this.model.groupSettings.groupedColumns[o]))&&this.model.sortSettings.sortedColumns.push({field:this.model.groupSettings.groupedColumns[o],direction:t.sortOrder.Ascending});this._processBindings(l)}},addIgnoreOnExport:function(e){"string"==typeof e?this.ignoreOnExport.push(e):this.ignoreOnExport=this.ignoreOnExport.concat(e)},_decode:function(e){return n("<div/>").html(e).text()},_htmlEscape:function(e){var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"};return e.replace(/[&<>"']/g,function(e){return t[e]})},_mappingSelection:function(){var e,i;if(t.gridFeatures.selection&&this._enableCheckSelect){for(this.multiSelectCtrlRequest=!0,e=[],i=0;i<this._currentJsonData.length;i++)1==t.pvt.getObject(this._selectionMapColumn,this._currentJsonData[i])&&e.push(i);this.selectedRowsIndexes=[],this._selectedRow(-1),this._selectionByGrid=!0,e.length&&this.selectRows(e),this._selectionByGrid=!1}},_headerCheckUpdateAll:function(e){for(var i=[],s=(i=this._isLocalData?this._dataSource()instanceof t.DataManager?this._dataSource().dataSource.json:this._dataSource():this._currentJsonData,0);s<i.length;s++)i[s][this._selectionMapColumn]=e,this.batchChanges.changed.push(i[s]);this.batchSave()},_getForeignKeyData:function(e){var s,l=this,n={};for(i=0;i<this.model.columns.length;i++)this.model.columns[i].foreignKeyValue&&this.model.columns[i].dataSource&&(s=t.isNullOrUndefined(l.model.columns[i].foreignKeyField)?l.model.columns[i].field:l.model.columns[i].foreignKeyField,(this.model.columns[i].dataSource instanceof t.DataManager?this.model.columns[i].foreignKeyData:this.model.columns[i].dataSource).filter(function(t){var o=e[l.model.columns[i].field],a=!isNaN(parseFloat(o))&&isFinite(o)?parseFloat(o):o;t[s]==a&&(n[s]=t)}));return n},_foreignKeyBinding:function(e,i,s){var l,o,a=n("#"+s).ejGrid("instance");return((e=a.model.columns[e]).dataSource instanceof t.DataManager?e.foreignKeyData:e.dataSource).filter(function(s){if(t.getObject(e.foreignKeyField,s)==i)return o=t.getObject(e.foreignKeyValue,s),l="date"==e.type?new Date(o):o}),e.format&&(l=a.formatting(e.format,l,a.model.locale)),l},_checkForeignKeyBinding:function(){if(this.model.columns.length){var e,i,s,l;for(e=0,s=(i=this.model.columns).length;e<s;e++)(l=i[e]).hasOwnProperty("foreignKeyField")&&l.dataSource instanceof t.DataManager&&this._relationalColumns.push({field:l.field,key:l.foreignKeyField,value:l.foreignKeyValue,dataSource:l.dataSource});this._$fkColumn=!0}},_setForeignKeyData:function(e){var i,s,l,o;if(this._relationalColumns.length){var a,d,h,c,u=this._relationalColumns,m=this._relationalColumns.length,p=[],g=this.model.currentViewData,f={},_=this;if(0==g.length)for(i=0,s=this.model.columns.length;i<s;i++)column=this.model.columns[i],!t.isNullOrUndefined(column.foreignKeyField)&&column.dataSource instanceof t.DataManager&&(column.foreignKeyData=[]);for(l=t.proxy(function(e){this._trigger("actionFailure",{requestType:"fetchingforeigndata",error:e.error})},this),this.element.ejWaitingPopup("model.showOnInit")||this.element.ejWaitingPopup("show"),o=0;o<m;o++)if(0 in g){if(a=u[o],f.field=a.field,f.keyField=a.key,f.valueField=a.value,f.dataSource=a.dataSource,f.query=(new t.Query).select([f.valueField,f.keyField]).foreignKey(f.keyField),h=t.distinct(g.level?g.records:g,f.keyField,!0),d=t.UrlAdaptor.prototype.getFiltersFrom(h,f.query),f.query.where(d),this._trigger("actionBegin",n.extend(f,{requestType:"fetchingforeigndata",column:this.getColumnByField(f.field)})))return;c=f.dataSource.ready===r?f.dataSource.executeQuery(f.query,null,l):f.dataSource.ready.fail(l),p.push(c)}n.when.apply(this,p).then(function(){var t,i,s,l,n,o;for(_.element.ejWaitingPopup("hide"),t=[].slice.call(arguments,0,arguments.length),s=0,l=p.length;s<l;s++)for(a=u[s],n=0,o=_.model.columns.length;n<o;n++)(i=_.model.columns[n]).foreignKeyField==a.key&&i.foreignKeyValue==a.value&&(i.foreignKeyData=t[s].result);_.initialRender?_._initGridRender():_.sendDataRenderingRequest(e)})}},_isRelationalRendering:function(e){return 0 in this._relationalColumns&&-1==["add","beginedit","cancel"].indexOf(e.requestType)}},function(e,t,s){t.gridFeatures=t.gridFeatures||{},Date.prototype.toISOString||function(){function e(e){return e<10?"0"+e:e}Date.prototype.toISOString=function(){return this.getUTCFullYear()+"-"+e(this.getUTCMonth()+1)+"-"+e(this.getUTCDate())+"T"+e(this.getUTCHours())+":"+e(this.getUTCMinutes())+":"+e(this.getUTCSeconds())+"."+(this.getUTCMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"}}(),t.gridFeatures.edit={_processEditing:function(){var i,l,n,o,a,r,d,h,c,u=this._columnToSelect(),m=u.query,p=[],g=u.fields,f=[],_=this._relationalColumns,v=_.length;if(""!=this.model.query._fromTable&&m.from(this.model.query._fromTable),(l=g.length)&&f.push(this._dataManager.executeQuery(m)),0!=v)for(n=0;n<v;n++)obj=_[n],qry=(new t.Query).select([obj.key,obj.value]),i=obj.dataSource.ready===s?obj.dataSource.executeQuery(qry):obj.dataSource.ready,f.push(i);if(u.fieldsDrop.length)for(o=u.fieldsDrop.length,a=u.fieldsDrop,r=0;r<o;r++)d=[],h=this.getColumnByField(a[r]),t.isNullOrUndefined(t.getObject("editParams.fields.text",h))?p.push(a[r]):(c=h.editParams,p.push(c.fields)),p[r]instanceof Object?(d.push(p[r].text),d.push(p[r].value)):d.push(p[r]),m=(new t.Query).select(d),f.push(h.dataSource.executeQuery(m));0!=f.length?e.when.apply(this,f).then(t.proxy(function(){for(var e,i=[].slice.call(arguments,0,arguments.length),s=0,n=0,o=0,a=l,r=f.length;s<r;s++){for(;a>0;)t.createObject(g[--a],i[s].result,this._dropDownManager),e=!0;if(!e||0!=s){if(_.length!=n){obj=_[n],key=obj.key+"."+obj.value,t.createObject(key,i[s].result,this._dropDownManager),n++;continue}_.length==n&&p.length&&(p[o]instanceof Object?(t.createObject(p[o].text,i[s].result,this._dropDownManager),t.createObject(p[o].value,i[s].result,this._dropDownManager)):t.createObject(p[o],i[s].result,this._dropDownManager),o++)}}this._initiateTemplateRendering()},this)):this._initiateTemplateRendering()},_initiateTemplateRendering:function(){"normal"==this.model.editSettings.editMode?this.addEditingTemplate():"batch"==this.model.editSettings.editMode?this.addBatchEditTemplate():"dialog"==this.model.editSettings.editMode||"externalform"==this.model.editSettings.editMode||"inlineform"==this.model.editSettings.editMode?this.addDialogEditingTemplate():this.addExternalDialogEditingTemplate(),this.model.editSettings.showAddNewRow&&"normal"==this.model.editSettings.editMode&&this._startAdd()},addEditingTemplate:function(){var i,l,n,o,a,r,d,h;if(0!=this.model.columns.length){var c=t.buildTag("tbody"),u=t.buildTag("tr"),m=t.buildTag("td","",{},{colSpan:this.model.scrollSettings.frozenColumns>0?this.model.scrollSettings.frozenColumns:this.model.columns.length}),p=t.buildTag("form","",{},{id:this._id+"EditForm",class:"gridform"}),g=t.buildTag("table.e-table","",{},{cellspacing:.25}),f=t.buildTag("tbody"),_=t.buildTag("tr");for(c.append(u),u.append(m),m.append(p),i=e(document.createElement("colgroup")),p.append(g),g.append(i),f.append(_).appendTo(g),this.model.scrollSettings.frozenColumns>0&&(l=c.clone()).find("td").first().prop("colSpan",this.model.columns.length-this.model.scrollSettings.frozenColumns),n=0;n<this.model.columns.length;n++)o=t.buildTag("td.e-rowcell"),_.append(o.get(0)),("checkbox"!=this.model.columns[n].type||this._isMapSelection)&&(t.isNullOrUndefined(this.model.columns[n].commands)&&(!this.model.columns[n].template||this.model.columns[n].template&&0!=this.model.columns[n].allowEditing&&this.model.columns[n].field)?this._initCellEditType(n,o):this.model.columns[n].template?(d={},a=this.model.columns[n].headerText,d["_"+this._id+"ColumnTemplating"]=t.proxy(this._gridTemplate,null,this),e.views.helpers(d),t.isNullOrUndefined(a)||t.isNullOrUndefined(a.match(/[^0-9\s\w]/g))||(a=a.replace(/[^0-9\s\w]/g,"_")),e("#"+this._id+a+n+"_Template").remove(),r=this._createTemplateElement(this.model.columns[n]),o.addClass("e-templatecell").html("{{:~_"+this._id+"ColumnTemplating('"+r.id+"')}}")):this.model.columns[n].commands&&((d={})["_"+this._id+"UnboundTemplate"]=this._unboundTemplateRendering,e.views.helpers(d),e("#"+this._id+this.model.columns[n].headerText.replace(/[^a-z0-9|s_]/gi,"")+n+"_UnboundTemplate").remove(),divElement=this._createUnboundElement(this.model.columns[n],n),o.addClass("e-unboundcell").addClass("e-"+this.model.columns[n].headerText.replace(/[^a-z0-9|s_]/gi,"")+n).html("{{:~_"+this._id+"UnboundTemplate('"+divElement.id+"')}}"),this.model.scrollSettings.frozenColumns>0&&o.addClass("e-frozenunbound"),this._isUnboundColumn=!0),this.model.columns[n].textAlign!=s&&o.css("text-align",this.model.columns[n].textAlign),0==this.model.columns[n].allowEditing&&o.find(".e-field").attr("disabled",!0).addClass("e-disable"),!0===this.model.columns[n].isPrimaryKey&&o.find(".e-field").attr("disabled",!0).addClass("e-disable"),!0===this.model.columns[n].isIdentity&&(o.find(".e-field").addClass("e-identity"),this._identityKeys.push(e.trim(this.model.columns[n].field)),this._identityKeys=t.isNullOrUndefined(e.uniqueSort)?e.unique(this._identityKeys.sort()):e.uniqueSort(this._identityKeys.sort())),h=e(document.createElement("col")),this.model.columns[n].priority&&(o.addClass("e-table-priority-"+this.model.columns[n].priority),h.addClass("e-table-priority-"+this.model.columns[n].priority)),!1===this.model.columns[n].visible&&(h.css("display","none"),o.addClass("e-hide")),t.isNullOrUndefined(this.model.columns[n].cssClass)||o.addClass(this.model.columns[n].cssClass),!this.model.groupSettings.showGroupedColumn&&o.addClass("{{for ~groupedColumns}} {{if #data == '"+this.model.columns[n].field+"'}}e-hide{{/if}}{{/for}}")&&h.css("display","none"),i.append(h),n==this.model.scrollSettings.frozenColumns-1&&(_=l.find("tr").last(),i=l.find("colgroup"),e.templates(this._id+"_JSONFrozenEditingTemplate",c.html()),c=l));e.templates(this._id+"_JSONEditingTemplate",c.html())}},addDialogEditingTemplate:function(){var i,l,n,o;if(0!=this.model.columns.length){var a,r,d,h,c,u=t.buildTag("div"),m=t.buildTag("form.gridform","",{},{id:this._id+"EditForm"}),p=t.buildTag("table","",{},{cellspacing:"14px"});for(i=0;i<this.model.columns.length;i++)("checkbox"!=this.model.columns[i].type||this._isMapSelection)&&("dialog"==this.model.editSettings.editMode?(h="tr",c="td"):h=c="div",a=t.buildTag(h),r=t.buildTag(c,"",{"text-align":"right"}).addClass("e-label"),d=t.buildTag(c,"",{"text-align":"left"}).addClass("e-rowcell"),this.model.columns[i].priority&&"inlineform"==this.model.editSettings.editMode&&a.addClass("e-table-priority-"+this.model.columns[i].priority),a.append(r.get(0)).append(d.get(0)),this.model.columns[i].headerText==s&&(this.model.columns[i].headerText=this.model.columns[i].field),r.append("<label for='"+this.model.columns[i].field+"'>"+this.model.columns[i].headerText+"</label>"),t.isNullOrUndefined(this.model.columns[i].commands)&&(!this.model.columns[i].template||this.model.columns[i].template&&0!=this.model.columns[i].allowEditing&&this.model.columns[i].field)?this._initCellEditType(i,d):this.model.columns[i].template?(o={},l=this.model.columns[i].headerText,o["_"+this._id+"ColumnTemplating"]=t.proxy(this._gridTemplate,null,this),e.views.helpers(o),t.isNullOrUndefined(l)||t.isNullOrUndefined(l.match(/[^0-9\s\w]/g))||(l=l.replace(/[^0-9\s\w]/g,"_")),e("#"+this._id+l+i+"_Template").remove(),n=this._createTemplateElement(this.model.columns[i]),d.addClass("e-templatecell").html("{{:~_"+this._id+"ColumnTemplating('"+n.id+"')}}")):this.model.columns[i].commands&&((o={})["_"+this._id+"UnboundTemplate"]=this._unboundTemplateRendering,e.views.helpers(o),e("#"+this._id+this.model.columns[i].headerText.replace(/[^a-z0-9|s_]/gi,"")+i+"_UnboundTemplate").remove(),divElement=this._createUnboundElement(this.model.columns[i],i),d.addClass("e-unboundcell").addClass("e-"+this.model.columns[i].headerText.replace(/[^a-z0-9|s_]/gi,"")+i).html("{{:~_"+this._id+"UnboundTemplate('"+divElement.id+"')}}"),this.model.scrollSettings.frozenColumns>0&&d.addClass("e-frozenunbound"),this._isUnboundColumn=!0,a.addClass("e-hide")),0==this.model.columns[i].allowEditing&&d.find(".e-field").attr("disabled",!0).addClass("e-disable"),!0===this.model.columns[i].isIdentity&&(d.find(".e-field").addClass("e-identity"),this._identityKeys.push(e.trim(this.model.columns[i].field)),this._identityKeys=t.isNullOrUndefined(e.uniqueSort)?e.unique(this._identityKeys.sort()):e.uniqueSort(this._identityKeys.sort())),!1===this.model.columns[i].visible&&a.addClass("e-hide"),t.isNullOrUndefined(this.model.columns[i].cssClass)||d.addClass(this.model.columns[i].cssClass),"dialog"==this.model.editSettings.editMode?(m.append(p),p.append(a)):m.append(a),m.appendTo(u),!0===this.model.columns[i].isPrimaryKey&&(d.find(".e-field").attr("disabled",!0).addClass("e-disable"),this._primaryKeys.push(e.trim(this.model.columns[i].field)),this._primaryKeys=t.isNullOrUndefined(e.uniqueSort)?e.unique(this._primaryKeys.sort()):e.uniqueSort(this._primaryKeys.sort())));"dialog"==this.model.editSettings.editMode&&m.append(p),u=this.renderDiaglogButton(m,u),e.templates(this._id+"_JSONDialogEditingTemplate",u.html())}},_editEventTrigger:function(e){if("save"==e.requestType||"delete"==e.requestType){var i={data:e.data,previousData:e.previousData,action:e.action!==s?e.action:e.requestType};t.isNullOrUndefined(e.foreignKeyData)||(i.foreignKeyData=e.foreignKeyData),this._trigger("end"+i.action.charAt(0).toUpperCase()+i.action.slice(1),i)}},_compiledDropDownTemplate:function(i,s,l,n){var o,a,r={_gridFormatting:this.formatting};return e.views.helpers(r),o=t.buildTag("select"),a=t.buildTag("option",null!=n?"{{:~_gridFormatting('"+n+"',"+s+",'"+this.model.locale+"')}}":"{{:"+s+"}}",{},{value:"{{:"+i+"}}"}),o.append(a),e.templates(o.html())},_initCellEditType:function(i,l){var n,o,a,r,d,h,c,u,m,p,g,f,_,v,b,C=this.model.columns[i].field;this.model.columns[i].foreignKeyValue&&(this.model.columns[i].editType="dropdownedit"),this._dataSource()instanceof t.DataManager&&this._dataSource().adaptor instanceof t.ForeignKeyAdaptor&&(-1!=(g=e.inArray(this.model.columns[i].field,this._dataSource().adaptor.value))&&(n=this._dataSource().adaptor.value[g],o=this._dataSource().adaptor.key[g])),this.model.columns[i].editTemplate&&(this.model.columns[i].editType="edittemplate"),t.isNullOrUndefined(this.model.columns[i].editType)&&(this.model.columns[i].editType="date"==this.model.columns[i].type||"datetime"==this.model.columns[i].type?this.model.columns[i].type+"picker":"stringedit"),this.model.isResponsive&&l.attr("data-cell",this._decode(this.model.columns[i].headerText));var w=(C||"").split("."),y=w.length-1,S="";for(t.isNullOrUndefined(C)||(C=C.replace(/[^a-z0-9\s_]/gi,""));y;)S+="(",y--;switch(this.model.columns[i].editType){case"edittemplate":"string"==typeof(a=this.model.columns[i].editTemplate.create)?(r=t.util.getObject(a,window),d=e.isFunction(r)?e(r()).attr({id:this._id+C,name:this.model.columns[i].field}):1==e(a).length&&"SCRIPT"==e(a).get(0).tagName?e(e(a).html()).attr({id:this._id+C,name:this.model.columns[i].field}):e(a).attr({id:this._id+C,name:this.model.columns[i].field})):d=e(a()).attr({id:this._id+C,name:this.model.columns[i].field}),l.append(d);break;case"stringedit":l.html(t.buildTag("input.e-field e-ejinputtext","",{},{value:"{{html:"+S+"#data['"+w.join("'] || {})['")+"']}}",id:this._id+C,name:this.model.columns[i].field}));break;case"booleanedit":l.html('{{if #data["'+w.join('"]["')+'"]}} <input class="e-field e-checkbox" type ="checkbox" id='+this._id+C+" name="+this.model.columns[i].field+' checked="checkbox"></input>{{else}} <input class="e-field e-checkbox" type ="checkbox" id='+this._id+C+" name="+this.model.columns[i].field+" > {{/if}}"),"normal"==this.model.editSettings.editMode&&l.addClass("e-boolcell");break;case"numericedit":h=t.buildTag("input.e-numerictextbox e-field","",{},{type:"text",value:"{{:"+S+"#data['"+w.join("'] || {})['")+"']}}",id:this._id+C,name:this.model.columns[i].field}),l.append(h);break;case"datepicker":case"datetimepicker":c=t.buildTag("input.e-"+this.model.columns[i].editType+" e-field","",{},{type:"text",value:"{{:"+S+"#data['"+w.join("'] || {})['")+"']}}",id:this._id+C,name:this.model.columns[i].field}),l.append(c);break;case"dropdownedit":if(u=this.model.columns[i],m=[],t.isNullOrUndefined(u.dataSource)){if(t.isNullOrUndefined(u.dataSource)&&this._dataSource()instanceof t.DataManager&&this._dataSource().adaptor instanceof t.ForeignKeyAdaptor&&u.field==n&&(data=this.model.dataSource.adaptor.foreignData[g],$foreignkeyfield=this.model.dataSource.adaptor.key[g],$foreignkeyvalue=this.model.dataSource.adaptor.value[g],m=data),x=u.field,t.isNullOrUndefined(t.getObject(x,this._dropDownManager)))return;if(D=0 in(p=t.getObject(x,this._dropDownManager))&&"object"==typeof p[0],k=k=t.dataUtil.mergeSort(t.distinct(p,D?x:s,!D&&s)),0==m.length)if(t.isNullOrUndefined(u.dataSource)&&this._dataSource()instanceof t.DataManager&&this._dataSource().adaptor instanceof t.ForeignKeyAdaptor&&u.field==n)for(g=0;g<k.length;g++)m.push({text:k[g][0],value:k[g][1]});else for(g=0;g<k.length;g++)m.push({text:k[g],value:k[g]})}else if(t.isNullOrUndefined(u.foreignKeyField)&&u.dataSource instanceof t.DataManager){var x=u.field,T=t.getObject(x,this._dropDownManager),D=0 in T&&"object"==typeof T[0],k=k=t.dataUtil.mergeSort(t.distinct(T,D?x:s,!D&&s));if(t.isNullOrUndefined(t.getObject("editParams.fields.text",u))||(m=T),0==m.length)for(g=0;g<k.length;g++)m.push({text:k[g],value:k[g]})}else m=!t.isNullOrUndefined(u.foreignKeyField)&&u.field in this._dropDownManager?t.getObject(u.foreignKeyField+"."+u.foreignKeyValue,this._dropDownManager):u.dataSource;_=t.isNullOrUndefined(u.foreignKeyField)?u.field:u.foreignKeyField,u.foreignKeyValue?f=this._compiledDropDownTemplate(_,u.foreignKeyValue,u.type,u.format):this._dataSource()instanceof t.DataManager&&this._dataSource().adaptor instanceof t.ForeignKeyAdaptor&&u.field==n?f=this._compiledDropDownTemplate($foreignkeyfield||"value",$foreignkeyvalue||"text",u.type,u.format):(v=t.getObject("editParams.fields.value",u)||"value",b=t.getObject("editParams.fields.text",u)||"text",f=this._compiledDropDownTemplate(v,b,u.type,u.format)),l.get(0).innerHTML=!t.isNullOrUndefined(u.editParams)&&this._dataSource()instanceof t.DataManager&&this._dataSource()instanceof t.DataManager&&this._dataSource().adaptor instanceof t.ForeignKeyAdaptor&&u.field==n?"<input data-value='{{:"+o+"}}'/>":["<select>",f.render(m),"</select>"].join(""),l.find("select,input").prop({id:this._id+C,name:u.field}).addClass("e-field e-dropdownlist")}},addBatchEditTemplate:function(){if(0!=this.model.columns.length){for(var i,s=t.buildTag("div","",{display:"none"},{id:this._id+"_BulkEditTemplate"}),l=0,n=this.model.columns.length;l<n;l++)(t.isNullOrUndefined(this.model.columns[l].commands)&&t.isNullOrUndefined(this.model.columns[l].template)||this.model.columns[l].template&&0!=this.model.columns[l].allowEditing&&this.model.columns[l].field)&&(i=t.buildTag("div","",{},{id:this.model.columns[l].field.replace(/\./g,t.pvt.consts.complexPropertyMerge)+"_BulkEdit"}),this._initCellEditType(l,i),s.append(i)),!0===this.model.columns[l].isPrimaryKey&&(this._primaryKeys.push(e.trim(this.model.columns[l].field)),this._primaryKeys=t.isNullOrUndefined(e.uniqueSort)?e.unique(this._primaryKeys.sort()):e.uniqueSort(this._primaryKeys.sort())),!0===this.model.columns[l].isIdentity&&(i.find(".e-field").addClass("e-identity"),this._identityKeys.push(e.trim(this.model.columns[l].field)),this._identityKeys=t.isNullOrUndefined(e.uniqueSort)?e.unique(this._identityKeys.sort()):e.uniqueSort(this._identityKeys.sort()));s.children().length&&(this._bulkEditTemplate=s)}},addExternalDialogEditingTemplate:function(){var i,s,l,n,o;if(0!=this.model.columns.length){for(i=t.buildTag("td","",{"text-align":"left"}).addClass("e-rowcell"),s=0;s<this.model.columns.length;s++)("checkbox"!=this.model.columns[s].type||this._isMapSelection)&&(t.isNullOrUndefined(this.model.columns[s].commands)&&!t.isNullOrUndefined(this.model.columns[s].template)&&0!=this.model.columns[s].allowEditing&&this.model.columns[s].field&&!t.isNullOrUndefined(this.model.columns[s].editTemplate)&&this._initCellEditType(s,i),!0===this.model.columns[s].isPrimaryKey&&(this._primaryKeys.push(e.trim(this.model.columns[s].field)),this._primaryKeys=t.isNullOrUndefined(e.uniqueSort)?e.unique(this._primaryKeys.sort()):e.uniqueSort(this._primaryKeys.sort())));l=t.buildTag("div","",{display:"none"}),n=t.buildTag("form.gridform","",{},{id:this._id+"EditForm"}),"dialogtemplate"==this.model.editSettings.editMode&&null!=this.model.editSettings.dialogEditorTemplateID?o=this.model.editSettings.dialogEditorTemplateID:"externalformtemplate"==this.model.editSettings.editMode&&null!=this.model.editSettings.externalFormTemplateID?(o=this.model.editSettings.externalFormTemplateID,n.addClass("e-display")):(o=this.model.editSettings.inlineFormTemplateID,n.addClass("e-display")),n.html(e(o).html()),l=this.renderDiaglogButton(n,l),e.templates(this._id+"_JSONdialogTemplateMode",l.html())}},_editdblClickHandler:function(t){var i=e(t.target);i.closest(".e-grid").attr("id")===this._id&&(i.hasClass("e-rowcell")||i.closest("td").hasClass("e-rowcell"))&&(!this.model.isEdit||this.model.editSettings.showAddNewRow&&"normal"==this.model.editSettings.editMode)&&(this._$currentTr=this.model.scrollSettings.frozenColumns>0||this.model.scrollSettings.frozenRows>0?this.getRowByIndex(i.closest("tr").index()):i.closest("tr"),this.startEdit(this._$currentTr))},_columnToSelect:function(){for(var i=[],s=[],l=this.model.columns,n=0;n<this.model.columns.length;n++)this._dataSource()instanceof t.DataManager&&this._dataSource().adaptor instanceof t.ForeignKeyAdaptor&&-1!=e.inArray(this.model.columns[n].field,this._dataSource().adaptor.value)&&t.isNullOrUndefined(this.model.columns[n].editType)&&(this.model.columns[n].editType="dropdownedit"),this.model.columns[n].editType===t.Grid.EditingType.Dropdown&&t.isNullOrUndefined(this.model.columns[n].dataSource)&&i.push(this.model.columns[n].field),l[n].editType===t.Grid.EditingType.Dropdown&&t.isNullOrUndefined(l[n].foreignKeyField)&&l[n].dataSource instanceof t.DataManager&&s.push(this.model.columns[n].field);return i.length?{query:t.Query().select(i),fields:i,fieldsDrop:s}:{query:t.Query(),fields:[],fieldsDrop:s}},_renderExternalForm:function(){var e=t.buildTag("div","",{display:"none"},{id:this._id+"_externalEdit",class:"e-form-container"}),i=t.buildTag("div","","",{id:this._id+"_eFormHeader",class:"e-form-titlebar"}),s=t.buildTag("span","","",{class:"e-form-title"}),l=t.buildTag("div","","",{id:this._id+"_eFormToggleBtn",class:"e-form-togglebtn"}),n=t.buildTag("span","","",{class:"e-form-toggle-icon e-icon"});l.append(n),i.append(s).append(l);var o=t.buildTag("div","","",{id:this._id+"_eFormContent",class:"e-form-content"}),a=t.buildTag("div","","",{id:this._id+"_externalForm",class:"e-externalform"}),r=t.buildTag("div","","",{class:"e-externalformedit"});return a.append(r),o.append(a),e.append(i).append(o)},_buttonClick:function(t){if("close"==t.type){if(!this.model.isEdit)return;return this.model.isEdit=!1,this.element.ejGrid("cancelEdit"),void this.refreshToolbar()}if(t.keyCode!==s&&13!=t.keyCode||null==this.model)return!0;"dialog"==this.model.editSettings.editMode||"dialogtemplate"==this.model.editSettings.editMode?t.target.id=="EditDialog_"+this._id+"_Save"?this.element.ejGrid("endEdit"):t.target.id=="EditDialog_"+this._id+"_Cancel"&&(this.element.ejGrid("cancelEdit"),e("#"+this._id+"_dialogEdit").ejDialog("close")):"externalform"==this.model.editSettings.editMode||"externalformtemplate"==this.model.editSettings.editMode?e(t.target).hasClass("e-form-toggle-icon")?(this.element.ejGrid("cancelEdit"),e("#"+this._id+"_externalEdit").css("display","none")):t.target.id=="EditExternalForm_"+this._id+"_Save"?this.element.ejGrid("endEdit").length!==s&&e("#"+this._id+"_externalEdit").css("display","none"):t.target.id=="EditExternalForm_"+this._id+"_Cancel"&&(this.element.ejGrid("cancelEdit"),e("#"+this._id+"_externalEdit").css("display","none")):"inlineform"==this.model.editSettings.editMode||"inlineformtemplate"==this.model.editSettings.editMode?t.target.id=="InlineEditForm_"+this._id+"_Save"?this.element.ejGrid("endEdit"):t.target.id=="InlineEditForm_"+this._id+"_Cancel"&&this.element.ejGrid("cancelEdit"):this.element.ejGrid("cancelEdit")},_enableEditingEvents:function(){this.model.editSettings.allowEditing||this.model.editSettings.allowAdding?(this.model.editSettings.allowEditing&&"batch"!=this.model.editSettings.editMode&&this.model.editSettings.allowEditOnDblClick?this._on(this.element,e.isFunction(e.fn.doubletap)&&this.model.enableTouch?"doubletap":"dblclick",".e-gridcontent",this._editdblClickHandler):(this._off(this.element,"dblclick",".e-gridcontent"),this._off(this.element,"doubletap",".e-gridcontent")),this._off(e("#"+this._id+"_dialogEdit"),"click ","#EditDialog_"+this._id+"_Save ,#EditDialog_"+this._id+"_Cancel"),"dialog"==this.model.editSettings.editMode||"dialogtemplate"==this.model.editSettings.editMode?this._on(e("#"+this._id+"_dialogEdit"),"click ","#EditDialog_"+this._id+"_Save ,#EditDialog_"+this._id+"_Cancel",this._buttonClick):"externalform"==this.model.editSettings.editMode||"externalformtemplate"==this.model.editSettings.editMode?(this._on(e("#"+this._id+"_externalEdit"),"click ","#EditExternalForm_"+this._id+"_Save ,#EditExternalForm_"+this._id+"_Cancel",this._buttonClick),e(this.element).on("click",".e-form-toggle-icon",e.proxy(this._buttonClick,this))):"batch"==this.model.editSettings.editMode?(this._on(e(document),"mousedown",this._saveCellHandler),this._batchEnabled=!0):"inlineform"!=this.model.editSettings.editMode&&"inlineformtemplate"!=this.model.editSettings.editMode||e(this.element).on("click ","#InlineEditForm_"+this._id+"_Save ,#InlineEditForm_"+this._id+"_Cancel",e.proxy(this._buttonClick,this)),"batch"!=this.model.editSettings.editMode&&this._batchEnabled&&(this._off(e(document),"mousedown",this._saveCellHandler),this._batchEnabled=!1)):(this._off(e("#"+this._id+"_dialogEdit"),"click","#EditDialog_"+this._id+"_Save ,#EditDialog_"+this._id+"_Cancel"),e(this.element).off("click",".e-icon"),this._off(e("#"+this._id+"_externalEdit"),"click","#EditExternalForm_"+this._id+"_Save ,#EditExternalForm_"+this._id+"_Cancel"),e(this.element).off("click",".e-form-toggle-icon"),e(this.element).off("click","#InlineEditForm_"+this._id+"_Save ,#InlineEditForm_"+this._id+"_Cancel"))},_multiRowDelete:function(){var e,i,s={};if(s.added=[],s.deleted=[],s.changed=[],s.deleted=this.getSelectedRecords(),(e={}).data=this.getSelectedRecords(),e.tr=this.getSelectedRows(),i=this._getForeignKeyData(e.data),t.isNullOrUndefined(i)||(e.foreignKeyData=i),e.requestType="delete",this._trigger("actionBegin",e))return!0;this._sendBulkReuqest(s,e)},deleteRow:function(i){var l,n,o,a,r,d,h;if(this.model.editSettings.allowDeleting&&(!this.model.isEdit||"batch"==this.model.editSettings.editMode||this.model.editSettings.showAddNewRow)){if(this.model.editSettings.showDeleteConfirmDialog&&!this._confirmDialog.is(":visible"))return this._cDeleteData=i,void this._confirmDialog.find(".e-content").html(this.localizedLabels.ConfirmDelete).end().ejDialog("open");if(e.isArray(i))this.selectRows(i),this._multiRowDelete();else if("batch"==this.model.editSettings.editMode)this._bulkDelete(this.getIndexByRow(i));else{if(0==this._primaryKeys.length&&!this.model.editSettings.allowEditing&&!this.model.editSettings.allowAdding)for(o=0;o<this.model.columns.length;o++)!0===this.model.columns[o].isPrimaryKey&&(this._primaryKeys.push(e.trim(this.model.columns[o].field)),this._primaryKeys=t.isNullOrUndefined(e.uniqueSort)?e.unique(this._primaryKeys.sort()):e.uniqueSort(this._primaryKeys.sort()));if(-1==this._selectedRow()&&t.isNullOrUndefined(i))return void alert(this.localizedLabels.DeleteOperationAlert);for(t.isNullOrUndefined(i)&&(i=this.model.scrollSettings.enableVirtualization?this.getContentTable().find("tr[aria-selected='true']"):this.getRowByIndex(this._selectedRow())),this._primaryKeyValues=[],this._getPrimaryKeyValues(i),l=t.DataManager(this._currentJsonData),n=new t.Query,o=0;o<this._primaryKeys.length;o++)n=n.where(this._primaryKeys[o],t.FilterOperators.equal,this._primaryKeyValues[o]);if(currentData=l.executeLocal(n),(a={}).tr=i,a.data=currentData[0],r=this._getForeignKeyData(a.data),t.isNullOrUndefined(r)||(a.foreignKeyData=r),a.requestType=t.Grid.Actions.Delete,this._trigger("actionBegin",a))return!0;this._cDeleteData=currentData,(!t.isOnWebForms||!this.model.serverEvents||-1==this.model.serverEvents.indexOf("endDelete"))&&this._dataSource()instanceof t.DataManager&&!this._dataManager.dataSource.offline&&this._dataManager.dataSource.json!==s||this._dataSource().adaptor instanceof t.remoteSaveAdaptor?(d=this._dataManager.remove(this._primaryKeys[0],currentData[0][this._primaryKeys[0]],this.model.query),h=this,e.isFunction(d.promise)?(d.done(function(){h._processBindings(a),h._primaryKeyValues=[],h._cDeleteData=null}),d.fail(function(e){a.error=e,h._trigger("actionFailure",a)})):this._processBindings(a)):this._processBindings(a),d!=s&&e.isFunction(d.promise)||(this._primaryKeyValues=[],this._cDeleteData=null)}}},_htmlEncode:function(e){return str=e,t.isNullOrUndefined(str)||(str=isNaN(str)?str.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&apos;/g,"'"):str),str},startEdit:function(i){if(this.model.editSettings.allowEditing&&(!this.model.editSettings.showAddNewRow||"normal"!=this.model.editSettings.editMode||!this._excludeDetailRows().hasClass("e-editedrow"))&&!this.element.ejWaitingPopup("model.showOnInit")){if(-1==this._selectedRow()&&t.isNullOrUndefined(i))return void alert(this.localizedLabels.EditOperationAlert);if(this.model.scrollSettings.enableVirtualization&&t.isNullOrUndefined(i)&&(i=this.getContentTable().find("tr[aria-selected='true']")),t.isNullOrUndefined(i)?(this._currentTrIndex=this._selectedRow(),this._$currentTr=this.getRowByIndex(this._currentTrIndex)):(this._currentTrIndex=this.getIndexByRow(i),this._$currentTr=i),!e(this._$currentTr).is(":visible"))return!1;this._primaryKeyValues=[],this._getPrimaryKeyValues(this._$currentTr);var s=this._currentJsonData[this._currentTrIndex],l={row:this._$currentTr,rowIndex:this._currentTrIndex,primaryKey:this._primaryKeys,primaryKeyValue:this._primaryKeyValues,rowData:s};if(this._trigger("beginEdit",l))return void(this._primaryKeyValues=[]);l.requestType=t.Grid.Actions.BeginEdit,this._processBindings(l)}},_getPrimaryKeyValues:function(i){var s,l,n,o,a,r,d=i.attr("name"),h=!1;for(this._lastVirtualPage=null,r=0;r<this._primaryKeys.length;r++)n=this.getColumnByField(this._primaryKeys[r]),s=this.getIndexByRow(i),l=this._currentJsonData,this.model.allowScrolling&&this.model.scrollSettings.allowVirtualScrolling&&(this.model.scrollSettings.enableVirtualization?(s%=this._virtualRowCount,o=parseInt(d,32)):(s%=this.model.pageSettings.pageSize,o=parseFloat(d)/this.model.pageSettings.pageSize+1,this._currentJsonData=this._virtualLoadedRecords[o],o!=this.model.pageSettings.totalPages||this._prevPageRendered||this._virtualLoadedRecords[o].length==this.model.pageSettings.pageSize||(l=e.extend(!0,[],this._previousPageRecords),a=e.extend(!0,[],this._virtualLoadedRecords[o]),t.merge(l,a),this._lastVirtualPage=this._currentJsonData=e.extend(!0,[],l),h=!0)),l=h?l:this._virtualLoadedRecords[o],this._vCurrentTrIndex=s,this._currentVIndex=o),this._primaryKeyValues.push(this._htmlEncode(l[s][n.field]))},_startAdd:function(){var i,s,l,n,o,a,r,d,h;if(this.model.editSettings.allowAdding)if(this._isAddNew=!0,"batch"==this.model.editSettings.editMode)this._bulkAddRow();else{for(i={},s=this.model.columns,o=0;o<s.length;o++)t.isNullOrUndefined(this.model.parentDetails)||s[o].field!=this.model.parentDetails.parentKeyField||(s[o].defaultValue=this.model.parentDetails.parentKeyFieldValue),!t.isNullOrUndefined(s[o].field)&&s[o].field.indexOf(".")>0?t.createObject(s[o].field,s[o].defaultValue||"",i):i[s[o].field]=t.isNullOrUndefined(s[o].defaultValue)?"date"==s[o].type||"datetime"==s[o].type?null:"":s[o].defaultValue;if(n={},(l={}).data=i,-1!=this.model.editSettings.editMode.indexOf("template"))for(o=0;o<this.model.columns.length;o++)t.isNullOrUndefined(this.model.columns[o].field)||-1==this.model.columns[o].field.indexOf(".")||(a=this.model.columns[o].field.split("."),t.createObject(this.model.columns[o].field,l.data[this.model.columns[o].field],n),l.data[a[0]]=n,delete l.data[this.model.columns[o].field]);r=this._getForeignKeyData(l.data),t.isNullOrUndefined(r)||(l.foreignKeyData=r),l.requestType="add",this.clearSelection(),this.model.scrollSettings.allowVirtualScrolling&&(this._currentVIndex=null,this._lastVirtualPage=null,this.model.scrollSettings.enableVirtualization?this._refreshVirtualView(1):this._virtualLoadedRecords[1]?this._currentPage(1):this.gotoPage(1),this.getScrollObject().scrollY(0)),this._processBindings(l)||(this.model.editSettings.showAddNewRow?this._selectedRow(-1):this._selectedRow(0)),(d=this.model.groupSettings.groupedColumns.length)>1&&(h=this.getContentTable().find(".e-addedrow").find("table").find("colgroup").children(),e(h.slice(0,d-1)).css("width",this.getHeaderTable().find("colgroup").children()[0].style.width))}},endEdit:function(){var i,l,n,o,a,r,d,h,c,u,m,p,g;if(this.model.isEdit){if(o=0,!this.editFormValidate())return!0;if(a={},"batch"==this.model.editSettings.editMode)this.saveCell();else{for(this.model.editSettings.showAddNewRow&&(n=this.getContentTable().find(".e-editedrow")),i=this.model.scrollSettings.frozenColumns>0?this.element.find(".gridform"):t.isNullOrUndefined(n)||1!=n.length?document.getElementById(this._id+"EditForm"):n[0].lastChild.lastChild,l=e(i),(r="normal"==this.model.editSettings.editMode||"inlineform"==this.model.editSettings.editMode||"inlineformtemplate"==this.model.editSettings.editMode?l.closest("tr"):l.closest("div")).find("td.e-rowcell").removeClass("e-validError"),i=this.model.scrollSettings.frozenColumns>0?i[0]:i,d=0;d<i.length;d++)if(!r.hasClass("e-addedrow")||!e(i[d]).hasClass("e-identity")){var f=i[d].name,_=e(i[d]),v=this.getColumnByField(f);if(!_.hasClass("e-dropdownlist e-input")||-1==_.attr("id").indexOf("_input")||!t.isNullOrUndefined(l[1])){if(f!=s&&((""==f||t.isNullOrUndefined(v))&&(f=-1!=i[d].id.indexOf("Save")||-1!=i[d].id.indexOf("Cancel")?"":i[d].id.replace(this._id,"")),""!=f&&null==a[f])){v=this.getColumnByField(f);var b=i[d].value,C=i[d].type,w=e(i[d]).is(":checked"),y=v?v.originalType:null;if(t.isNullOrUndefined(v)||"edittemplate"!=v.editType)e(i[d]).hasClass("e-datepicker")?b=_.ejDatePicker("model.value"):e(i[d]).hasClass("e-datetimepicker")?b=_.ejDateTimePicker("model.value"):_.is(".e-numerictextbox")?(b=_.ejNumericTextbox("getValue"),"string"!=v.type||t.isNullOrUndefined(b)||(b=b.toString())):_.data("ejDropDownList")&&(b=_.ejDropDownList("getSelectedValue"),t.isNullOrUndefined(v)||t.isNullOrUndefined(v.format)||"date"!=v.type&&"datetime"!=v.type||(b=b.length>0?new Date(b):b));else{if(!e(i[d]).is("#"+this._id+f))continue;h=v.editTemplate.read,_=e(i[d]),"string"==typeof h&&(h=t.util.getObject(h,window)),b=h(_)}y&&(b="number"==y?+b:"boolean"==y?b===this.localizedLabels.True:"date"===y?new Date(b):b),null==v?b=!isNaN(parseFloat(b))&&isFinite(b)?parseFloat(b):b:"number"==v.type&&!t.isNullOrUndefined(b)&&b.length&&(b=t.parseFloat(b,this.model.locale)),"string"!=typeof b||b.length||(b=null),("checkbox"!=C&&!t.isNullOrUndefined(b)&&""!==b||w)&&o++,c="checkbox"!=C?b:w,-1!=f.indexOf(".")?t.createObject(f,c,a):a[f]=c}d==i.length-1&&l.length>1&&0==l.index(i)&&(i=l[1],d=-1)}}if(u={data:a},m=this._getForeignKeyData(u.data),t.isNullOrUndefined(m)||(u.foreignKeyData=m),u.requestType=t.Grid.Actions.Save,u.selectedRow=this._selectedRow(),u.previousData=jQuery.extend({},this.model.currentViewData[u.selectedRow]),this._trigger("actionBegin",u))return!0;if(r.hasClass("e-editedrow")?(this._cModifiedData=a,u.action="edit"):r.hasClass("e-addedrow")&&(o&&(this._cAddedRecord=a),u.action="add"),"add"==u.action&&this.editFormValidate()&&!o)return elements=this.model.scrollSettings.frozenColumns>0?this.element.find(".gridform"):e("#"+this._id+"EditForm"),p=t.buildTag("div"),g=elements.find("input:visible").not(".e-identity").first(),this._renderValidator(p,g),$errorMessage=t.buildTag("div.e-field-validation-error",this.localizedLabels.EmptyRowValidationMessage),$tail=e(p).find(".e-errortail"),$errorMessage.insertAfter($tail),$errorMessage.css("display","block"),!1;("externalform"==this.model.editSettings.editMode||"externalformtemplate"==this.model.editSettings.editMode)&&e("#"+this._id+"_externalEdit").css("display","none"),this._updateAction(u)}}},_updateAction:function(i){var l,n;this._dataSource()instanceof t.DataManager&&!this._dataManager.dataSource.offline&&this._dataManager.dataSource.json!==s||this._dataSource().adaptor instanceof t.remoteSaveAdaptor||this._dataSource().adaptor instanceof t.ForeignKeyAdaptor?"batch"==this.model.editSettings.editMode?(this.batchChanges.added.push(i.data),this.batchSave()):(t.isNullOrUndefined(this._cModifiedData)||t.isOnWebForms&&this.model.serverEvents&&-1!=this.model.serverEvents.indexOf("endEdit")?t.isOnWebForms&&this.model.serverEvents&&-1!=this.model.serverEvents.indexOf("endAdd")||(l=this._dataManager.insert(i.data,this.model.query)):l=this._dataManager.update(this._primaryKeys[0],i.data,this.model.query),n=this,this.element.ejWaitingPopup("show"),l&&e.isFunction(l.promise)?(l.done(function(s){n.model.isEdit=!1,!t.isNullOrUndefined(s)&&e.isPlainObject(s.record)&&(e.extend(i.data,s.record),"add"==i.action&&(n._cAddedRecord=i.data),"edit"==i.action&&(n._cModifiedData=i.data)),n._processBindings(i),n._isRemoteSaveAdaptor&&(n.element.ejWaitingPopup("hide"),t.isNullOrUndefined(n._unboundRow)||i.selectedRow==n._unboundRow||"save"!=i.requestType||(n._unboundRow.find(".e-editbutton").trigger("click"),n._unboundRow=null)),n._cModifiedData=null,n._cAddedRecord=null,n._primaryKeyValues=[]}),l.fail(function(e){i.error=e&&e.error?e.error:e,n._cModifiedData=null,n._cAddedRecord=null,n.element.ejWaitingPopup("hide"),n._trigger("actionFailure",i)})):(n.model.isEdit=!1,n._processBindings(i))):this._processBindings(i),l!=s&&e.isFunction(l.promise)||(this._cModifiedData=null,this._cAddedRecord=null,this._primaryKeyValues=[])},cancelEdit:function(){var i={};i.requestType=t.Grid.Actions.Cancel,this._cModifiedData=null,this._processBindings(i),this._primaryKeyValues=[],this._currentData=null,("externalform"==this.model.editSettings.editMode||"externalformtemplate"==this.model.editSettings.editMode)&&e("#"+this._id+"_externalEdit").css("display","none")},refreshToolbar:function(){var t,i,s=e("#"+this._id+"_toolbarItems"),l=s.find("li");if(s.ejToolbar("enableItem",l),t=this.getContentTable().find(".e-editedrow"),this.model.editSettings.showAddNewRow&&"normal"==this.model.editSettings.editMode&&0==t.length)this._disabledToolItems.push(l.filter("[id="+this._id+"_add]"));else for(i=0;i<l.length;i++)switch(l[i].id){case this._id+"_add":case this._id+"_edit":case this._id+"_delete":case this._id+"_responsiveFilter":case this._id+"_responsiveSorting":case this._id+"_search":this.model.isEdit?this.model.editSettings.showAddNewRow&&"normal"==this.model.editSettings.editMode&&0==t.length||(e(l[i]).hasClass("e-hover")&&e(l[i]).removeClass("e-hover"),this._disabledToolItems.push(l[i])):(this.model.enableToolbarItems||this.model.editSettings.allowAdding||l[i].id!=this._id+"_add")&&(this.model.enableToolbarItems||this.model.editSettings.allowEditing||l[i].id!=this._id+"_edit")&&(this.model.enableToolbarItems||this.model.editSettings.allowDeleting||l[i].id!=this._id+"_delete")||this._disabledToolItems.push(l[i]);break;case this._id+"_update":case this._id+"_cancel":this.model.isEdit||(e(l[i]).hasClass("e-hover")&&e(l[i]).removeClass("e-hover"),this._disabledToolItems.push(l[i]))}s.ejToolbar("disableItem",this._disabledToolItems),s.ejToolbar("model.enableRTL",this.model.enableRTL),this._disabledToolItems=e()},_getHiddenCount:function(e){for(var t=0,i=0;i<e.length;i++)e.eq(i).hasClass("e-hide")&&t++;return t},_refreshTemplateCell:function(t,i){for(var s,l=t.find(".e-templatecell"),n=0;n<l.length;n++)s={cell:l[n],data:i,column:this.model.columns[e(l[n]).index()],rowIndex:t.index()},this._trigger("templateRefresh",s)},_edit:function(i){var s,l,n,o,a,r,d,h,c=this.model.scrollSettings.enableVirtualization?t.DataManager(this._virtualLoadedRecords[this._currentVIndex]):t.DataManager(this._currentJsonData),u=new t.Query;for(this.model.allowFiltering&&(this._previousFilterCount=this._filteredRecordsCount),l=0;l<this._primaryKeys.length;l++)u=u.where(this._primaryKeys[l],t.FilterOperators.equal,this._primaryKeyValues[l]);this._currentData=c.executeLocal(u);var m=document.createElement("div"),p=t.isNullOrUndefined(this.model.editSettings.titleColumn)?this._primaryKeys[0]:this.model.editSettings.titleColumn,g=e(m);if("normal"==this.model.editSettings.editMode){m.innerHTML=["<table>",e.render[this._id+"_JSONEditingTemplate"](this._currentData,{groupedColumns:this.model.groupSettings.groupedColumns}),"</table>"].join("");var f=g.find("tr").first(),_=0,v=this.model.columns.length,b=i.row.first();this.model.scrollSettings.frozenColumns>0&&(g.prepend(["<table>",e.render[this._id+"_JSONFrozenEditingTemplate"](this._currentData,{groupedColumns:this.model.groupSettings.groupedColumns}),"</table>"].join("")),f.splice(0,0,g.find("table").first().find("tr").first().get(0)),$currentTrLa=i.row.last(),$tempLastTR=f.last()),s=g.find("tr").first(),g.find("td").not(".e-rowcell").addClass("e-editcell e-normaledit"),this._setEditDropdownValue(g),this.model.groupSettings.groupedColumns.length>=2&&(n=i.row.find("td.e-indentcell"),g.find("tr").first().prepend(n)),(null!=this.model.detailsTemplate||null!=this.model.childGrid)&&(_++,g.find(".e-editcell").find("tr").prepend(i.row.find("[class*=e-detailrow]").eq(0).removeClass("e-selectionbackground e-active")),"both"!=this.model.gridLines&&g.find(".e-editcell .e-rowcell:first").addClass("e-detailrowvisible")),this.model.scrollSettings.frozenColumns>0&&(g.find(".e-editcell").get(1).colSpan=this.model.columns.length-this.model.scrollSettings.frozenColumns-i.row.last().find(".e-hide").length+_,v=this.model.scrollSettings.frozenColumns,$currentTrLa.hasClass("e-alt_row")&&$tempLastTR.addClass("e-alt_row")),g.find(".e-editcell").get(0).colSpan=v-b.find("td").not(":visible").length+_,b.hasClass("e-alt_row")&&s.addClass("e-alt_row"),b.empty().replaceWith(s.addClass("e-editedrow")),i.row=s,s.is(":last-child")||s.find("td.e-rowcell").addClass("e-validError"),this.model.scrollSettings.frozenColumns>0&&($currentTrLa.empty().replaceWith($tempLastTR.addClass("e-editedrow")),i.row=$tempLastTR),this._refreshUnboundTemplate(f.find(".gridform")),this._gridRows=0==this.model.scrollSettings.frozenColumns?this.getContentTable().first().find(".e-rowcell").closest("tr.e-row, tr.e-alt_row, tr.e-editedrow").toArray():e(this.getContentTable().get(0).rows).toArray(),this.model.scrollSettings.frozenColumns>0&&(this.getScrollObject().scrollY(this.getScrollObject().model.scrollTop,!0),this._gridRows=[this._gridRows,e(this.getContentTable().get(1).rows).toArray()])}else"inlineform"==this.model.editSettings.editMode||"inlineformtemplate"==this.model.editSettings.editMode?(o=this.model.groupSettings.showGroupedColumn?0:this.model.groupSettings.groupedColumns.length,_=0,m.innerHTML="inlineform"==this.model.editSettings.editMode?e.render[this._id+"_JSONDialogEditingTemplate"](this._currentData):e.render[this._id+"_JSONdialogTemplateMode"](this._currentData),this._setEditDropdownValue(g),a=t.buildTag("tr"),r=t.buildTag("td"),a.addClass("e-editedrow"),r.addClass("e-inlineformedit"),m=e(m).clone(!0).children(),r.html(m),a.append(r),a.is(":last-child")||a.find(".e-rowcell").addClass("e-validError"),this.model.scrollSettings.frozenColumns>0?((d=a.clone()).find("td").empty().prop("colspan",this.model.scrollSettings.frozenColumns),i.row.eq(1).after(a).end().eq(0).after(d),this._gridRows=[this._gridRows,this.getContentTable().last().find("tr").toArray()]):i.row.after(a),this._gridRows=this.getContentTable().first().find(".e-rowcell,.e-inlineformedit").closest("tr").toArray(),(null!=this.model.detailsTemplate||null!=this.model.childGrid)&&_++,this.model.scrollSettings.frozenColumns>0?r.prop("colspan",this.model.columns.length-this.model.scrollSettings.frozenColumns-a.find("form").children().not(":visible").length-o+_):r.prop("colspan",this.model.columns.length-this._hiddenColumns.length-o+_),this.model.scrollSettings.frozenColumns>0&&(this._gridRows=[this._gridRows,this.getContentTable().last().find("tr").toArray()]),e("#"+this._id+"_inlineFormTitle").text(this.localizedLabels.EditFormTitle+this._currentData[0][p]),i.row.find("input").attr("disabled","disabled").addClass("e-disable")):(g.addClass("e-editedrow"),m.innerHTML="dialog"==this.model.editSettings.editMode||"externalform"==this.model.editSettings.editMode?e.render[this._id+"_JSONDialogEditingTemplate"](this._currentData):e.render[this._id+"_JSONdialogTemplateMode"](this._currentData),this._setEditDropdownValue(g),"dialog"==this.model.editSettings.editMode||"dialogtemplate"==this.model.editSettings.editMode?(e("#"+this._id+"_dialogEdit").html(e(m)),(h={}).cssClass=this.model.cssClass,h.enableRTL=this.model.enableRTL,h.width="auto",h.enableResize=this.phoneMode,h.close=e.proxy(this._buttonClick,this),h.content="#"+this._id,h.enableModal=!0,h.allowKeyboardNavigation=!1,h.title=this.localizedLabels.EditFormTitle+this._currentData[0][p],e("#"+this._id+"_dialogEdit").ejDialog(h),e("#"+this._id+"_dialogEdit").ejDialog("open")):(e("#"+this._id+"_externalEdit").css("display","block").css("z-index",this._maxZindex()+1),e("#"+this._id+"_externalForm").find(".e-externalformedit").html(e(m)),e("#"+this._id+"_eFormHeader").find(".e-form-title").text(this.localizedLabels.EditFormTitle+this._currentData[0][p]),this._externalFormPosition(),i.row.find("input").attr("disabled","disabled").addClass("e-disable")));"normal"!=this.model.editSettings.editMode&&(s=e(m)),t.isNullOrUndefined(this.model.templateRefresh)||0==s.find(".e-templatecell").length||this._refreshTemplateCell(s,this.model.currentViewData[s.index()])},_setEditDropdownValue:function(i){for(var s,l,n,o,a,r,d=i.find("select.e-field"),h=i.find("input.e-field.e-dropdownlist"),c=0;c<d.length;c++){if(s={},l="",-1!=d[c].name.indexOf(".")){for(a=1;a<d[c].name.split(".").length;a++)l=l.concat("(");s[this._id+"ddlTemp"]="{{:"+l+"#data['"+d[c].name.split(".").join("'] || {})['")+"']}}"}else s[this._id+"ddlTemp"]="{{:"+d[c].name.replace(/[^a-z0-9\s_]/gi,"")+"}}";e.templates(s),r=e.render[this._id+"ddlTemp"](this._currentData),n=i.find("select:eq("+c+') option[value="'+r+'"]'),d.eq(c).data("ej-value",r),o=this.getColumnByField(d[c].name),this._dataSource().adaptor instanceof t.ForeignKeyAdaptor&&-1!=this._dataSource().adaptor.value.indexOf(o.field)&&(n=i.find("select:eq("+c+') option:contains("'+r+'")'),d.eq(c).val(n[0].value),d.eq(c).data("ej-value",n[0].value)),n.attr("selected","selected")}for(a=0;a<h.length;a++)h.eq(a).data("ej-value",t.getObject(h.eq(a).attr("name"),this._currentData[0]))},_add:function(i){var s,l,n,o,a,r,d,h,c,u,m=document.createElement("div");if(this._isLocalData&&0==this.model.groupSettings.groupedColumns.length&&0==this.model.scrollSettings.frozenColumns&&0==this.model.scrollSettings.frozenRows&&(this._dataSource()instanceof t.DataManager?this._dataSource().dataSource.json.splice(0,1):this._dataSource().splice(0,1)),this._previousFilterCount=this._filteredRecordsCount,"normal"==this.model.editSettings.editMode){for(n=e(m),o=this.model.columns.length,m.innerHTML=["<table>",e.render[this._id+"_JSONEditingTemplate"](i.data,{groupedColumns:this.model.groupSettings.groupedColumns}),"</table>"].join(""),h=e(m).find("select.e-field"),c=0;c<h.length;c++)h.eq(c).val(i.data[h[c].name]),h.eq(c).data("ej-value",i.data[h[c].name]);if(this.model.scrollSettings.frozenColumns>0&&($tempLastTR=n.find("table").first().find("tr").first(),n.prepend(["<table>",e.render[this._id+"_JSONFrozenEditingTemplate"](i.data,{groupedColumns:this.model.groupSettings.groupedColumns}),"</table>"].join("")),e($tempLastTR).find("td").first().addClass("e-editcell")),l=n.find("tr").first(),_=e(m).find(".e-editcell").get(0),e(m).find("td").first().addClass("e-editcell"),this.model.allowPaging&&this.model.pageSettings.pageSize<=this._currentJsonData.length&&0==this.model.groupSettings.groupedColumns.length&&!this.model.editSettings.showAddNewRow&&this.getContentTable().get(0).lastChild.removeChild(this.getContentTable().get(0).lastChild.lastChild),(null!=this.model.detailsTemplate||null!=this.model.childGrid)&&e(this.getContentTable().get(0).lastChild.lastChild).children(".e-detailrowexpand").length&&this.getContentTable().get(0).lastChild.removeChild(this.getContentTable().get(0).lastChild.lastChild),0!=this.model.currentViewData.length&&0!=this.getContentTable().find("td.e-rowcell").length||0!=this.model.scrollSettings.frozenColumns?(this.model.scrollSettings.frozenColumns>0&&this._renderByFrozenDesign(),a=this.getContentTable().first().find("tbody").first(),"top"==this.model.editSettings.rowPosition?a.prepend(l.addClass("e-addedrow e-normaledit")):"bottom"==this.model.editSettings.rowPosition&&a.append(l.addClass("e-addedrow e-normaledit")),this.model.scrollSettings.frozenColumns>0&&this.getContentTable().last().find("tbody").first().prepend($tempLastTR.addClass("e-addedrow e-normaledit"))):(this.getContentTable().find("tr").first().replaceWith(e(m).find("tr").first().addClass("e-addedrow e-normaledit")),0==this.getContentTable().find("tr").length&&this.getContentTable().append(e(m).find("tr").first().addClass("e-addedrow e-normaledit"))),s=this.getContentTable().find("tr.e-addedrow"),this.model.allowScrolling&&this.model.scrollSettings.allowVirtualScrolling&&s.attr("name",0),(null!=this.model.detailsTemplate||null!=this.model.childGrid)&&s.find("tr").first().prepend(t.buildTag("td.e-detailrowcollapse")),p=this.model.groupSettings.showGroupedColumn?0:this.model.groupSettings.groupedColumns.length,this.model.groupSettings.groupedColumns.length){for(c=0;c<this.model.groupSettings.groupedColumns.length;c++)0==c?s.prepend(t.buildTag("td.e-indentcell")):s.find("tr").prepend(t.buildTag("td.e-indentcell"));this.model.groupSettings.groupedColumns.length>0&&(null!=this.model.detailsTemplate||null!=this.model.childGrid)?s.find("td.e-editcell").prop("colspan",this.model.columns.length+this.model.groupSettings.groupedColumns.length-this._hiddenColumns.length-p):this.model.groupSettings.groupedColumns.length>=2?s.find("td.e-editcell").prop("colspan",this.model.columns.length+(this.model.groupSettings.groupedColumns.length-1)-this._hiddenColumns.length-p):s.find("td.e-editcell").prop("colspan",this.model.columns.length-this._hiddenColumns.length-p)}else null!=this.model.detailsTemplate||null!=this.model.childGrid?s.find(".e-editcell").prop("colspan",this.model.columns.length-this._hiddenColumns.length-p+1):(this.model.scrollSettings.frozenColumns>0&&(s.find(".e-editcell").last().prop("colspan",this.model.columns.length-this.model.scrollSettings.frozenColumns-$tempLastTR.find("td").not(":visible").length-p),o=this.model.scrollSettings.frozenColumns),s.find(".e-editcell").first().prop("colspan",o-l.find("td").not(":visible").length-p));s.is(":last-child")||s.find("td.e-rowcell").addClass("e-validError"),t.isIOSWebView()||"msie"!=this.getBrowserDetails().browser||"bottom"!=this.model.editSettings.rowPosition||this._colgroupRefresh(),this._refreshUnboundTemplate(s.find(".gridform")),this._gridRows=this.getContentTable().first().find(".e-rowcell").closest("tr.e-row, tr.e-alt_row").toArray(),this.model.scrollSettings.frozenColumns>0&&(this._gridRows=[this._gridRows,this.getContentTable().last().find(".e-rowcell").closest("tr.e-row, tr.e-alt_row").toArray()])}else if("inlineform"==this.model.editSettings.editMode||"inlineformtemplate"==this.model.editSettings.editMode){m.innerHTML="inlineform"==this.model.editSettings.editMode?e.render[this._id+"_JSONDialogEditingTemplate"](i.data):e.render[this._id+"_JSONdialogTemplateMode"](i.data);var p=this.model.groupSettings.showGroupedColumn?0:this.model.groupSettings.groupedColumns.length,g=0,f=t.buildTag("tr"),_=t.buildTag("td");for(f.addClass("e-addedrow"),_.addClass("e-inlineformedit e-editcell"),m=e(m).clone(!0).children(),h=e(m).find("select.e-field"),c=0;c<h.length;c++)h.eq(c).val(i.data[h[c].name]),h.eq(c).data("ej-value",i.data[h[c].name]);if(_.html(m),f.append(_),f.is(":last-child")||f.find(".e-rowcell").addClass("e-validError"),p=this.model.groupSettings.showGroupedColumn?0:this.model.groupSettings.groupedColumns.length,this.model.groupSettings.groupedColumns.length)for(c=0;c<this.model.groupSettings.groupedColumns.length;c++)f.prepend(t.buildTag("td.e-indentcell"));else f.find("td.e-editcell").prop("colspan",this.model.columns.length-this._hiddenColumns.length-p);this.model.scrollSettings.frozenColumns>0?(r=f.clone(),d=_.find(".gridform").children(),r.find("td").empty().prop("colSpan",this.model.scrollSettings.frozenColumns-this._getHiddenCount(d.slice(0,this.model.scrollSettings.frozenColumns))),_.prop("colSpan",this.model.columns.length-this.model.scrollSettings.frozenColumns-this._getHiddenCount(d.slice(this.model.scrollSettings.frozenColumns))),(0==this.model.currentViewData.length||0==this.getContentTable().find("td.e-rowcell").length)&&this._renderByFrozenDesign(),this.getContentTable().first().find("tbody").first().prepend(r),this.getContentTable().last().find("tbody").first().prepend(f)):((null!=this.model.detailsTemplate||null!=this.model.childGrid)&&g++,_.prop("colspan",this.model.columns.length-this._hiddenColumns.length-p+g),0==this.model.currentViewData.length||0==this.getContentTable().find("td.e-rowcell").length?this.getContentTable().find("tr").first().replaceWith(e(f)):this.model.allowPaging&&this.model.pageSettings.pageSize<=this.model.currentViewData.length&&0==this.model.groupSettings.groupedColumns.length&&this.getContentTable().get(0).lastChild.removeChild(this.getContentTable().get(0).lastChild.lastChild),"top"==this.model.editSettings.rowPosition?this.getContentTable().first().find("tbody").first().prepend(f):"bottom"==this.model.editSettings.rowPosition&&this.getContentTable().first().find("tbody").first().append(f)),(null!=this.model.detailsTemplate||null!=this.model.childGrid)&&e(this.getContentTable().get(0).lastChild.lastChild).children(".e-detailrowexpand").length&&this.getContentTable().get(0).lastChild.removeChild(this.getContentTable().get(0).lastChild.lastChild),e("#"+this._id+"_inlineFormTitle").text(this.localizedLabels.AddFormTitle),this._refreshUnboundTemplate(e("#"+this._id+"EditForm")),this._gridRows=this.getContentTable().first().find(".e-rowcell,.e-inlineformedit").closest("tr.e-row, tr.e-alt_row").toArray(),this.model.scrollSettings.frozenColumns>0&&(this._gridRows=[this._gridRows,this.getContentTable().last().find(".e-rowcell").closest("tr.e-row, tr.e-alt_row").toArray()])}else{for(e(m).addClass("e-addedrow"),m.innerHTML="dialog"==this.model.editSettings.editMode||"externalform"==this.model.editSettings.editMode?e.render[this._id+"_JSONDialogEditingTemplate"](i.data):e.render[this._id+"_JSONdialogTemplateMode"](i.data),h=e(m).find("select.e-field"),c=0;c<h.length;c++)h.eq(c).val(i.data[h[c].name]),h.eq(c).data("ej-value",i.data[h[c].name]);"dialog"==this.model.editSettings.editMode||"dialogtemplate"==this.model.editSettings.editMode?(e("#"+this._id+"_dialogEdit").html(e(m)),(u={}).cssClass=this.model.cssClass,u.width="auto",u.enableResize=this.phoneMode,u.content="#"+this._id,u.enableModal=!0,u.close=e.proxy(this._buttonClick,this),u.enableRTL=this.model.enableRTL,u.allowKeyboardNavigation=!1,u.title=this.localizedLabels.AddFormTitle,e("#"+this._id+"_dialogEdit").ejDialog(u),e("#"+this._id+"_dialogEdit").ejDialog("open")):(e("#"+this._id+"_externalEdit").css("display","block").css("z-index",this._maxZindex()+1),e("#"+this._id+"_externalForm").find(".e-externalformedit").html(e(m)),e("#"+this._id+"_eFormHeader").find(".e-form-title").text(this.localizedLabels.AddFormTitle),this._externalFormPosition())}"normal"!=this.model.editSettings.editMode&&(s=e(m)),t.isNullOrUndefined(this.model.templateRefresh)||0==s.find(".e-templatecell").length||this._refreshTemplateCell(s,i.data),this.model.allowPaging&&(this.model.filterSettings.filteredColumns.length?this.getPager().ejPager({totalRecordsCount:null==this._searchCount?this._filteredRecordsCount:this._searchCount,currentPage:this._currentPage()}):this.getPager().ejPager({totalRecordsCount:null==this._searchCount?this._gridRecordsCount:this._searchCount,currentPage:this._currentPage()}),this._refreshGridPager())},editFormValidate:function(){var t,i,s;return!e.isFunction(e.validator)||(this.model.scrollSettings.frozenColumns>0?(t=this.element.find(".gridform")).length>1?(i=t.eq(0).validate().form(),s=t.eq(1).validate().form(),!(!i||!s)):t.validate().form():this.model.editSettings.showAddNewRow?e(this.getRows()).hasClass("e-editedrow")?this.element.find(".e-editedrow .gridform").validate().form():this.element.find(".e-addedrow .gridform").validate().form():e("#"+this._id+"EditForm").validate().form())},_refreshAltRow:function(){for(var t,i=this._excludeDetailRows(),s=0;s<i.length;s++)(t=e(i[s])).hasClass("e-alt_row")&&t.removeClass("e-alt_row"),s%2!=0?t.addClass("e-alt_row"):t.addClass("e-row")},_editCompleteAction:function(i){var s,l,n,o,a=this.element.find(".gridform");if(this.model.isEdit=!0,this.getContentTable().children("colgroup").find("col"),this.element.width(),this.setWidthToColumns(),t.Grid.Actions.Add==i.requestType){for(s=a.find(".e-field:disabled"),l=0;l<s.length;l++)n=e(s[l]).attr("name"),e(s[l]).hasClass("e-identity")||(-1==e.inArray(n,this._disabledEditableColumns)||-1!==e.inArray(n,this._primaryKeys))&&e(s[l]).prop("disabled",!1).removeClass("e-disable");for(o=0;o<this.model.groupSettings.groupedColumns.length-1;o++)a.find("colgroup").prepend(this._getIndentCol())}(0==this._tdsOffsetWidth.length||this.model.groupSettings.groupedColumns.length||-1!=e.inArray(0,this._tdsOffsetWidth)||this._hiddenColumns.length>0)&&this._setoffsetWidth(),this._refreshEditForm(i),this.model.scrollSettings.frozenColumns>0&&("inlineform"==this.model.editSettings.editMode||"inlineformtemplate"==this.model.editSettings.editMode)&&("beginedit"==i.requestType?i.row.eq(0).next().find("td").height(i.row.eq(1).next().find("td").height()):this.getContentTable().first().find("tr").first().find("td").height(this.getContentTable().last().find("tr").first().find("td").height())),this.model.scrollSettings.frozenRows>0&&"beginedit"==i.requestType&&(this._initFrozenRows(),t.getObject("_vScrollbar._scrollData",this.getScrollObject())&&(this.getScrollObject()._vScrollbar._scrollData.skipChange=!0)),this.model.scrollSettings.frozenColumns>0&&this.rowHeightRefresh(),this.model.allowScrolling&&this.model.scrollSettings.frozenColumns<=0&&this.getScrollObject()&&this.getScrollObject().isHScroll()&&this.getScrollObject().refresh(),e.isFunction(e.validator)&&this.initValidator()},_refreshEditForm:function(i){var l,n,o,a,r,d,h,c,u,m,p,g,f,_,v,b,C,w,y,S;for(this.model.editSettings.showAddNewRow&&(l=this.getContentTable().find(".e-editedrow")),n=this.model.scrollSettings.frozenColumns>0?this.element.find(".gridform"):t.isNullOrUndefined(l)||1!=l.length?document.getElementById(this._id+"EditForm"):l[0].lastChild.lastChild,o=!1,this.model.enableResponsiveRow&&e.isFunction(window.matchMedia)&&(r=window.matchMedia("(max-width: 320px)")),d=e(n).find("input,select,div.e-field,textarea"),h=86,(this._isUnboundColumn||null!=this.getContentTable().find(".e-templatecell"))&&"batch"!=this.model.editSettings.editMode&&(d=d.filter(function(){return!e(this).closest(".e-rowcell").hasClass("e-unboundcell")&&!e(this).closest(".e-rowcell").hasClass("e-templatecell")})),c=null,v=0;v<d.length;v++){if(u=d.eq(v),null!=(p=this.getColumnByField(t.isNullOrUndefined(u.prop("name"))?u.attr("name"):u.prop("name")))&&(a=e.inArray(p,this.model.columns)),"batch"==this.model.editSettings.editMode?h=95:"normal"==this.model.editSettings.editMode&&(h=96),"externalform"==this.model.editSettings.editMode||"externalformtemplate"==this.model.editSettings.editMode||"inlineform"==this.model.editSettings.editMode||"inlineformtemplate"==this.model.editSettings.editMode?(u.parent().css("width",t.dataUtil.max(this._tdsOffsetWidth)+"px"),m=t.max(this._tdsOffsetWidth)*(h/100)):m=this._tdsOffsetWidth[v]*(h/100),("normal"==this.model.editSettings.editMode||"batch"==this.model.editSettings.editMode||this.model.allowResizing||this.model.allowResizeToFit)&&!u.hasClass("e-checkbox")&&(m="100%"),null!=p&&a!==s&&a<this.model.columns.length&&this.model.columns[a].editTemplate)g={rowdata:"batch"==this.model.editSettings.editMode?this._batchEditRowData:this._currentJsonData[this._selectedRow()],column:this.model.columns,element:u,requestType:i.requestType,type:i.type},f=this.model.columns[a].editTemplate.write,t.isNullOrUndefined(i)||"add"!=i.requestType||(g.rowdata={}),"string"==typeof f&&(f=t.util.getObject(f,window)),f(g),this.model.columns[a].isPrimaryKey&&"beginedit"==i.requestType&&u.addClass("e-disable").attr("disabled","disabled");else if(u.hasClass("e-numerictextbox")){var x={width:m},T=u.val(),D=this.getColumnByField(u.prop("name"));(!t.isNullOrUndefined(r)&&r.matches||D.width&&"string"==typeof D.width&&-1!=D.width.indexOf("%")&&("normal"==this.model.editSettings.editMode||"batch"==this.model.editSettings.editMode))&&(x.width="100%"),x.enableRTL=this.model.enableRTL,x.showSpinButton=!0,x.cssClass=this.model.cssClass,x.watermarkText=this.localizedLabels.NumericTextBoxWaterMark,x.locale=this.model.locale,T.length&&(x.value=parseFloat(T)),u.hasClass("e-disable")&&(x.enabled=!1),t.isNullOrUndefined(D.editParams)||e.extend(x,D.editParams),u.ejNumericTextbox(x),u.prop("name",u.prop("name").replace(this._id,""))}else if(u.hasClass("e-datepicker")||u.hasClass("e-datetimepicker")||u.hasClass("e-dropdownlist"))D=this.getColumnByField(u.prop("name")),T=u.val(),(!t.isNullOrUndefined(r)&&r.matches||D.width&&"string"==typeof D.width&&-1!=D.width.indexOf("%")&&("normal"==this.model.editSettings.editMode||"batch"==this.model.editSettings.editMode))&&(m="100%"),u.width(m),u.hasClass("e-disable")&&u.attr("disabled","disabled");else if(u.hasClass("e-save e-button")||u.hasClass("e-cancel e-button"))u.ejButton({cssClass:this.model.cssClass,enableRTL:this.model.enableRTL,width:"100","text-align":"centre",height:"35px"});else switch(u.prop("tagName")){case"INPUT":if(!t.isNullOrUndefined(p)&&p.format&&""!=u.val())switch(p.type){case"date":T=u.val();var k=new Date(T),I=p.format.replace("{0:","").replace("}",""),O=t.format(k,I);u.val(O);break;case"number":T=u.val(),"c"==(I=new RegExp("\\{0(:([^\\}]+))?\\}","gm").exec(p.format))[2].toLowerCase().split("")[0]?I[2]=I[2].toLowerCase().replace("c","n"):I[2],u.val(t.format(parseFloat(T),I[2]))}"checkbox"!=u.attr("type")?(u.css("text-align",null!=u.attr("name")&&null!=this.getColumnByField(u.attr("name"))?this.getColumnByField(u.attr("name")).textAlign:"center"),"batch"==this.model.editSettings.editMode?(u.css("width","100%").css("height","28px"),"msie"==t.browserInfo().name&&8==parseInt(t.browserInfo().version,10)&&u.css("line-height","22px")):"normal"==this.model.editSettings.editMode?(u.css("width","100%").css("height","30px"),"msie"==t.browserInfo().name&&8==parseInt(t.browserInfo().version,10)&&u.css("line-height","24px")):(u.outerWidth(m).height(28),"msie"==t.browserInfo().name&&8==parseInt(t.browserInfo().version,10)&&u.css("line-height","26px"))):u.width(m>0?u.width()>m?m:u.width():-1!=this.model.editSettings.editMode.indexOf("template")?u.width():1),"batch"!=this.model.editSettings.editMode||this._tabKey||(u.is(":checked")?u.prop("checked",!1):u.prop("checked",!0));break;case"SELECT":u.width(m).height(28)}null==p||p.visible||!p.validationRules||"dialogtemplate"==this.model.editSettings.editMode||"externalformtemplate"==this.model.editSettings.editMode||"inlineformtemplate"==this.model.editSettings.editMode||u.addClass("e-hide"),u.is(":disabled")||o||u.is(":hidden")&&"object"!=typeof(u.data("ejDropDownList")||u.data("ejNumericTextbox"))||(c=u,o=!0)}for((_={}).width="100%",_.enableRTL=this.model.enableRTL,_.cssClass=this.model.cssClass,_.locale=this.model.locale,_.watermarkText=this.localizedLabels.DatePickerWaterMark,d.filter(".e-datepicker").ejDatePicker(e.extend({displayDefaultDate:!0,showPopupButton:!1},_)),delete _.watermarkText,d.filter(".e-datetimepicker").ejDateTimePicker(e.extend({showPopupButton:!1},_)),d.filter(".e-dropdownlist").ejDropDownList(e.extend({enableIncrementalSearch:!0},_)),v=0;v<this.model.columns.length;v++){if(b=this.model.columns[v],!t.isNullOrUndefined(b.editParams))switch(b.editType){case t.Grid.EditingType.DateTimePicker:d.filter("#"+this._id+b.field+".e-datetimepicker").ejDateTimePicker(b.editParams);break;case t.Grid.EditingType.DatePicker:d.filter("#"+this._id+b.field+".e-datepicker").ejDatePicker(b.editParams);break;case t.Grid.EditingType.Dropdown:d.filter("#"+this._id+b.field+".e-dropdownlist").ejDropDownList(b.editParams)}if(b.editType==t.Grid.EditingType.Dropdown&&(C=-1,this._dataSource().adaptor instanceof t.ForeignKeyAdaptor&&(C=this._dataSource().adaptor.value.indexOf(b.field)),w=d.filter("#"+this._id+b.field.replace(".","")+".e-dropdownlist"),y=null,!t.isNullOrUndefined(b.dataSource)&&!t.isNullOrUndefined(b.editParams)&&t.isNullOrUndefined(b.foreignKeyField)&&this._dataSource().adaptor instanceof t.ForeignKeyAdaptor&&-1!=C?y=b.dataSource:t.isNullOrUndefined(b.dataSource)&&-1!=C&&!t.isNullOrUndefined(b.editParams)?y=this._dataSource().adaptor.foreignData[C]:!t.isNullOrUndefined(b.editParams)&&"fields"in b.editParams&&t.isNullOrUndefined(b.foreignKeyField)&&(y=b.dataSource),null!=y&&w.ejDropDownList({dataSource:y}),S=w.data("ej-value"),this._dataSource()instanceof t.DataManager&&this._dataSource().adaptor instanceof t.ForeignKeyAdaptor&&-1!=C&&!t.isNullOrUndefined(b.editParams)?w.ejDropDownList("setSelectedText","add"==i.requestType&&t.isNullOrUndefined(b.defaultValue)?w.val(""):S):w.ejDropDownList("setSelectedValue","add"==i.requestType&&t.isNullOrUndefined(b.defaultValue)?w.val(""):S),null==b||b.visible||!b.validationRules||"dialogtemplate"==this.model.editSettings.editMode||"externalformtemplate"==this.model.editSettings.editMode||"inlineformtemplate"==this.model.editSettings.editMode||b.editType==t.Grid.EditingType.Dropdown&&w.closest(".e-rowcell").find("input").addClass("e-hide")),I=null,b.format!==s&&b.format.length>0&&(I=new RegExp("\\{0(:([^\\}]+))?\\}","gm").exec(b.format)[2]),-1!=[t.Grid.EditingType.DatePicker,t.Grid.EditingType.DateTimePicker].indexOf(b.editType)){var R=b.editType==t.Grid.EditingType.DatePicker?"datePicker":"dateTimePicker",N="ej"+R.replace(/\b\w/g,function(e){return e.toUpperCase()}),E=this._id+b.field,A=d.filter(function(t,i){return i.id==E&&(e(i).hasClass("e-datepicker")||e(i).hasClass("e-datetimepicker"))}),M={};null!=I&&(M[R.replace("Picker","")+"Format"]=I),A.hasClass("e-disable")&&(M.enabled=!1),A[N](M),"batch"==this.model.editSettings.editMode&&A[N]("show")}}null!=c&&this._focusElements(c)},_focusElements:function(e){if(e.length){var t=e;"select"==t[0].tagName.toLowerCase()&&!t.hasClass("e-field e-dropdownlist")||"input"==t[0].tagName.toLowerCase()&&!t.hasClass("e-numerictextbox")?(t.focus().select(),t[0].focus()):t.hasClass("e-field e-dropdownlist")?t.closest(".e-ddl").focus():t.hasClass("e-numerictextbox")?t.siblings("input:visible").first().select().focus():t.find("input:visible,select").first().select().focus()}},_renderToolBar:function(){var i,s,l=t.buildTag("div.e-gridtoolbar","",{},{id:this._id+"_toolbarItems"}),n=t.buildTag("ul");return(!t.isNullOrUndefined(this.model.toolbarSettings.toolbarItems)&&this.model.toolbarSettings.toolbarItems.length||(this.model.allowSorting||this.model.allowFiltering)&&this.model.enableResponsiveRow)&&this._renderLi(n),l.append(n),i=t.buildTag("ul"),l.append(i),!t.isNullOrUndefined(this.model.toolbarSettings.customToolbarItems)&&this.model.toolbarSettings.customToolbarItems.length&&this._renderCustomLi(i),(s={}).click=this._toolBarClick,s.cssClass=this.model.cssClass,s.enableRTL=this.model.enableRTL,s.enableSeprator=!1,l.ejToolbar(s),l.ejToolbar("disableItem",this._disabledToolItems),this._disabledToolItems=e(),l},_renderCustomLi:function(i){for(var s,l,n,o=0;o<this.model.toolbarSettings.customToolbarItems.length;o++){switch(n=this.model.toolbarSettings.customToolbarItems[o].templateID?this.model.toolbarSettings.customToolbarItems[o].templateID.replace("#",""):this.model.toolbarSettings.customToolbarItems[o],l=t.buildTag("li","",{},{id:this._id+"_"+n,title:n}),typeof this.model.toolbarSettings.customToolbarItems[o]){case"string":s=t.buildTag("a.e-toolbaricons e-icon","",{}).addClass(this.model.toolbarSettings.customToolbarItems[o]);break;case"object":l.attr("title",this.model.toolbarSettings.customToolbarItems[o].templateID.replace("#","")),s=e(this.model.toolbarSettings.customToolbarItems[o].templateID).hide().html()}l.html(s),i.append(l)}},_renderLi:function(i){var s,l,n,o;for(e.isFunction(window.matchMedia)&&this.model.enableResponsiveRow&&(-1!=(s=this.model.toolbarSettings.toolbarItems.indexOf("search"))&&this.model.toolbarSettings.toolbarItems.splice(s,1),this.model.allowFiltering&&this.model.toolbarSettings.toolbarItems.push("responsiveFilter"),this.model.allowSorting&&this.model.toolbarSettings.toolbarItems.push("responsiveSorting"),-1!=s&&this.model.toolbarSettings.toolbarItems.push("search")),l=0;l<this.model.toolbarSettings.toolbarItems.length;l++)n=t.buildTag("li","",{},{id:this._id+"_"+this.model.toolbarSettings.toolbarItems[l],title:this.localizedLabels[this.model.toolbarSettings.toolbarItems[l].slice(0,1).toUpperCase()+this.model.toolbarSettings.toolbarItems[l].slice(1)]}),this._renderLiContent(n,this.model.toolbarSettings.toolbarItems[l]),o=this.model.toolbarSettings.toolbarItems[l],this.model.enableResponsiveRow&&("responsiveFilter"===o||"responsiveSorting"===o)&&(n.addClass("e-gridresponsiveicons"),n.css("display","none")),i.append(n)},_renderLiContent:function(e,i){var s,l,n,o;switch(i){case"add":s=t.buildTag("a.e-addnewitem e-toolbaricons e-icon e-addnew","",{});break;case"edit":s=t.buildTag("a.e-edititem e-toolbaricons e-icon e-edit","",{});break;case"delete":s=t.buildTag("a.e-deleteitem e-toolbaricons e-icon e-delete","",{});break;case"update":s=t.buildTag("a.e-saveitem e-toolbaricons e-disabletool e-icon e-save","",{}),this._disabledToolItems.push(e.get(0));break;case"cancel":s=t.buildTag("a.e-cancel e-toolbaricons e-disabletool e-icon e-gcancel","",{}),this._disabledToolItems.push(e.get(0));break;case"search":s=t.buildTag("a.e-searchitem e-toolbaricons e-disabletool e-icon e-searchfind","",{}),this.model.enableResponsiveRow||(l=t.buildTag("input.e-ejinputtext e-gridsearchbar","",{},{type:"text",id:this._id+"_searchbar"}),o=t.buildTag("span.e-cancel e-icon e-hide","",{right:"1%"}),(n=t.buildTag("div.e-filterdiv e-searchinputdiv","",{display:"inline-table",width:"83%"})).append(l).append(o),e.append(n),t.isNullOrUndefined(this.model.searchSettings.key)||l.val(this.model.searchSettings.key)),this.model.allowSearching=!0;break;case"printGrid":s=t.buildTag("a.e-print e-toolbaricons e-icon","",{});break;case"excelExport":s=t.buildTag("a.e-toolbaricons e-excelIcon e-icon","",{});break;case"wordExport":s=t.buildTag("a.e-toolbaricons e-wordIcon e-icon","",{});break;case"pdfExport":s=t.buildTag("a.e-toolbaricons e-pdfIcon e-icon","",{});break;case"responsiveFilter":s=t.buildTag("a.e-toolbaricons e-filterset e-icon","",{});break;case"responsiveSorting":s=t.buildTag("a.e-toolbaricons e-respponsiveSorting e-icon","",{})}e.append(s),"search"==i&&(this._searchBar=e,e.css("display","flex"))},_toolBarClick:function(i){var l,n=e(this.itemsContainer).closest(".e-grid"),o=n.ejGrid("instance"),a=n.attr("id");if(i.event!=s||"INPUT"!=i.target.tagName||i.currentTarget.id!=a+"_search"){e.isFunction(e.fn.ejDatePicker)&&e("#"+a+"EditForm").find(".e-datepicker").ejDatePicker("hide");var r=i.currentTarget,d=i.target,h={itemName:e(r).attr("data-content"),itemId:r.id,currentTarget:r,target:d,itemIndex:e(r).index(),itemCurrentTarget:r.outerHTML,gridModel:o.model,itemTarget:d.outerHTML,toolbarData:i};if(!n.ejGrid("instance")._trigger("toolbarClick",h)){switch(h.itemId){case a+"_add":o._toolbarOperation(a+"_add");break;case a+"_edit":o._toolbarOperation(a+"_edit");break;case a+"_delete":o._toolbarOperation(a+"_delete");break;case a+"_update":o._toolbarOperation(a+"_update");break;case a+"_cancel":"batch"==o.model.editSettings.editMode?o._confirmDialog.find(".e-content").html(o.localizedLabels.CancelEdit).end().ejDialog("open"):o._toolbarOperation(a+"_cancel");break;case a+"_search":if(o.model.enableResponsiveRow)if(t.isNullOrUndefined(o.element.find(".e-responsesearch")[0])){var c=t.buildTag("div.e-gridtoolbar","",{},{id:this._id+"_toolbarItems"}),u=t.buildTag("div.e-responsesearch","",{width:"95%",height:"38px","margin-top":"7px","margin-left":"6px"}),m=t.buildTag("span.e-ttoltxt","",{width:"98%","margin-left":"2%"},{id:o._id+"_search"});$a=t.buildTag("span.e-searchitem e-toolbaricons e-disabletool e-icon e-searchfind","",{position:"absolute",right:"2%","margin-top":"1%"}),"webkit"===t.browserInfo().name&&$a.css("margin-top","-2px"),l=t.buildTag("input.e-ejinputtext","",{width:"97%",height:"30px"},{type:"search",id:o._id+"_searchInput"}),t.isNullOrUndefined(o.model.searchSettings.key)||l.val(o.model.searchSettings.key),m.append(l),m.append($a),u.append(m),c.append(u),c.ejToolbar({click:function(t){o._toolbarOperation(a+"_search",e(t.currentTarget).find("input").val())}}),l.on("keyup",function(){""!=l.val()?($a.removeClass("e-searchfind"),$a.addClass("e-cancel")):($a.removeClass("e-cancel"),$a.addClass("e-searchfind"))}),$a.click(function(){$a.hasClass("e-cancel")&&(l.val(""),$a.removeClass("e-cancel"),$a.addClass("e-searchfind"),o._toolbarOperation(a+"_search",e("#"+a+"_searchInput").val()))}),c.insertBefore(o.getHeaderContent())}else"block"==o.element.find(".e-responsesearch").css("display")?o.element.find(".e-responsesearch").css("display","none"):o.element.find(".e-responsesearch").css("display","block");else o._toolbarOperation(a+"_search",e(i.currentTarget).find("input").val());break;case a+"_printGrid":o._toolbarOperation(a+"_printGrid");break;case a+"_excelExport":o._toolbarOperation(a+"_excelExport");break;case a+"_wordExport":o._toolbarOperation(a+"_wordExport");break;case a+"_pdfExport":o._toolbarOperation(a+"_pdfExport");break;case a+"_responsiveFilter":o._toolbarOperation(a+"_responsiveFilter");break;case a+"_responsiveSorting":o._toolbarOperation(a+"_responsiveSorting")}return!1}}},_toolbarOperation:function(i,s){var l,n,o,a,r,d=this.element,h=d.ejGrid("instance"),c="batch"==h.model.editSettings.editMode,u=d.attr("id");switch(h._exportTo=h.export,i){case u+"_add":c?h._bulkAddRow():h._startAdd();break;case u+"_edit":if(c&&h.model.editSettings.allowEditing){if(-1==h._bulkEditCellDetails.columnIndex)return void alert(this.localizedLabels.EditOperationAlert);(l=h.model.columns[h._bulkEditCellDetails.columnIndex].field)&&h.editCell(h._bulkEditCellDetails.rowIndex,l)}else h.startEdit();break;case u+"_delete":if(-1==this._selectedRow())return void alert(this.localizedLabels.DeleteOperationAlert);this.model.editSettings.showDeleteConfirmDialog?this._confirmDialog.find(".e-content").html(this.localizedLabels.ConfirmDelete).end().ejDialog("open"):c?this._bulkDelete():this.multiDeleteMode?this._multiRowDelete():this.deleteRow();break;case u+"_update":c&&0==e("#"+this._id+"EditForm").children().find(".e-field-validation-error").length?this.model.editSettings.showConfirmDialog?this._confirmDialog.find(".e-content").html(this.localizedLabels.BatchSaveConfirm).end().ejDialog("open"):this.batchSave():h.endEdit();break;case u+"_cancel":c?!0===e("#"+u+"ConfirmDialog").ejDialog("isOpened")?this._triggerConfirm():h.cancelEditCell():h.cancelEdit();break;case u+"_search":"click"==args.type&&"A"==args.target.nodeName&&d.ejGrid("search",s);break;case u+"_printGrid":this.print();break;case u+"_excelExport":h._exportTo(h.model.exportToExcelAction,"excelExporting",h.model.allowMultipleExporting);break;case u+"_wordExport":h._exportTo(h.model.exportToWordAction,"wordExporting",h.model.allowMultipleExporting);break;case u+"_pdfExport":h._exportTo(h.model.exportToPdfAction,"pdfExporting",h.model.allowMultipleExporting);break;case u+"_responsiveFilter":e("#responsiveFilter").css("display","block"),setTimeout(function(){h.element.css("display","none")});break;case u+"_responsiveSorting":for(this._sortColumns=[],this._removeSortCol=[],n=0;n<this.model.sortSettings.sortedColumns.length;n++)this._sortColumns.push({field:this.model.sortSettings.sortedColumns[n].field,direction:this.model.sortSettings.sortedColumns[n].direction});if(t.isNullOrUndefined(e("#responsiveSort")[0])){(o=e("#responsiveFilter").clone().css("display","block")).insertAfter(this.element),o.attr("id","responsiveSort"),h._setSortingButton();var m=t.buildTag("div.btnContainer","",{width:"100%",bottom:"0px",position:"absolute"}),p=t.buildTag("input.e-resposnsiveFilterBtnLeft","OK",{width:"45.6%"}),g=t.buildTag("input.e-resposnsiveFilterBtnRight","Cancel",{width:"46%"}),f=t.buildTag("div.e-resFIlterRigthIcon"),_=t.buildTag("span.e-icon e-responsiveClose e-resIcon");o.find(".e-resFilterleftIcon").remove(),o.find(".labelRes").text("Sorting"),o.find(".e-resFilterDialogHeaderDiv").append(f.append(_)),o.find(".e-resFilterDialogHeaderDiv").find(".e-resFIlterRigthIcon").click(function(){e("#responsiveSort").css("display","none"),h.element.css("display","block")}),a=t.buildTag("div.e-resFilterleftIcon","",{"margin-top":"3%"}),r=t.buildTag("span.e-icon e-resIcon e-responsiveSortClear"),a.click(function(){o.find(".e-responsivefilterColDiv").find(".e-button").remove(),h._setSortingButton(!0);for(var e=0;e<h._sortColumns.length;e++)-1==h._removeSortCol.indexOf(h._sortColumns[e].field)&&h._removeSortCol.push(h._sortColumns[e].field);h._sortColumns=[],h._removeSortCol=[]}),o.find(".e-resFilterDialogHeaderDiv").prepend(a.append(r)),o.append(m),m.append(p).append(g),p.ejButton({text:"OK",type:"button",click:e.proxy(this._resSortOperation,this)}),g.ejButton({text:"Cancel",type:"button",click:function(){e("#responsiveSort").css("display","none"),h.element.css("display","block"),h._sortColumns=[],o.find(".e-responsivefilterColDiv").find(".e-button").remove(),h._setSortingButton()}})}else e("#responsiveSort").find(".e-responsivefilterColDiv").find(".e-button").remove(),this._setSortingButton();e("#responsiveSort").find(".e-responsivefilterColDiv").find(".e-filternone").remove(),e("#responsiveSort").css("display","block"),setTimeout(function(){h.element.css("display","none")})}return!1},_resSortOperation:function(){for(var t=[],i=0;i<this.model.sortSettings.sortedColumns.length;i++)t.push(this.model.sortSettings.sortedColumns[i].field);for(i=0;i<t.length;i++)this.removeSortedColumns(t[i]);for(i=0;i<this._sortColumns.length;i++)this.model.allowMultiSorting&&(this.multiSortRequest=!0),this.sortColumn(this._sortColumns[i].field,this._sortColumns[i].direction);e("#responsiveSort").css("display","none"),this.element.css("display","block")},_setSortingButton:function(i){var s=e("#responsiveSort"),l=this;this._sortCols=[],t.isNullOrUndefined(s.find(".e-responsivefilterColDiv").find(".e-button")[0])&&s.find(".e-responsivefilterColDiv").each(function(s,n){var o,a,r,d=t.buildTag("div","",{float:"right","margin-right":"2%","margin-top":"-1%"}),h=e(n).attr("ej-MappingName"),c=t.buildTag("button#"+h+".e-sortingBtn","");if(e(n).append(d.append(c)),o="None",a="",i)c.ejButton({text:o,type:"button",height:28,width:120,id:h,showRoundedCorner:!0,click:e.proxy(l._resSortButClick,l)});else{for(r=0;r<l.model.sortSettings.sortedColumns.length;r++)l.model.sortSettings.sortedColumns[r].field==h&&(a="Ascending"==(o="ascending"==l.model.sortSettings.sortedColumns[r].direction?"Ascending":"Descending")?"e-resIcon e-respponsiveSortingAsc":"e-resIcon e-respponsiveSortingDesc");""!=a?c.ejButton({text:o,type:"button",height:28,width:120,cssClass:"e-resSortIconBtn",id:h,prefixIcon:a,imagePosition:"imageright",contentType:"textandimage",showRoundedCorner:!0,click:e.proxy(l._resSortButClick,l)}):c.ejButton({text:o,type:"button",height:28,cssClass:"e-resSortIconBtn",width:120,id:h,showRoundedCorner:!0,click:e.proxy(l._resSortButClick,l)})}})},_sortOperation:function(t,i){var s;for(-1!=this._removeSortCol.indexOf(t)&&(this._sortColumns.splice(this._removeSortCol.indexOf(t),0),this._removeSortCol.splice(this._removeSortCol.indexOf(t),0)),s=0;s<this._sortColumns.length&&this._sortColumns[s].field!=t;s++);this.model.allowMultiSorting?(this.multiSortRequest=!0,-1!=s&&(this._sortColumns.splice(s,1),-1==this._removeSortCol.indexOf(t)&&this._removeSortCol.push(t))):(e("#responsiveFilter").find(".e-responsivefilterColDiv").find(".e-button").removeClass("e-disable"),e("#responsiveFilter").find(".e-responsivefilterColDiv").not(".e-responsivefilterColDiv[ej-mappingname='"+t+"']").find(".e-button").addClass("e-disable").text("None"),this._sortColumns.length>0&&(this._removeSortCol.push(this._sortColumns[0].field),this._sortColumns=[])),this._sortColumns.push({field:t,direction:i})},_resSortButClick:function(t){var i,s="",l="",n=t.model.id,o=e("#"+t.model.id).ejButton("instance");if("None"==t.model.text)s="Ascending",l="e-resIcon e-respponsiveSortingAsc",this._sortOperation(n,"ascending");else{if("Ascending"!=t.model.text){for(o.model.text="None",o.model.prefixIcon="",o.type="button",o.model.contentType="text",o._render(),i=0;i<this._sortColumns.length&&this._sortColumns[i].field!=n;i++);return this._removeSortCol.push(n),this._sortColumns.splice(i,1),void e("#responsiveFilter").find(".e-responsivefilterColDiv").find(".e-button").removeClass("e-disable")}s="Descending",l="e-resIcon e-respponsiveSortingDesc",this._sortOperation(n,"descending")}o.model.text=s,o.model.prefixIcon="e-resIcon "+l,o.model.imagePosition="imageright",o.model.contentType="textandimage",o._render()},renderDiaglogButton:function(e,i){var s,l,n,o;return"externalform"==this.model.editSettings.editMode||"externalformtemplate"==this.model.editSettings.editMode?s="EditExternalForm_":"inlineform"==this.model.editSettings.editMode||"inlineformtemplate"==this.model.editSettings.editMode?(s="InlineEditForm_",t.buildTag("div","","",{id:this._id+"_inlineFormTitle",class:"e-inlineform-titlebar"}).appendTo(i)):s="EditDialog_",(l=t.buildTag("input.e-save","",{"margin-left":"30px"},{type:"button",id:s+this._id+"_Save"})).ejButton({cssClass:this.model.cssClass,enableRTL:this.model.enableRTL,text:this.localizedLabels.SaveButton,width:"100"}),(n=t.buildTag("input.e-cancel","",{"margin-left":"19px","margin-right":"13px"},{type:"button",id:s+this._id+"_Cancel"})).ejButton({cssClass:this.model.cssClass,enableRTL:this.model.enableRTL,text:this.localizedLabels.CancelButton,width:"100"}),(o="dialog"!=this.model.editSettings.editMode&&"dialogtemplate"!=this.model.editSettings.editMode?t.buildTag("div","","",{class:"e-editform-btn"}):t.buildTag("div")).append(l),o.append(n),e.appendTo(i),"dialog"!=this.model.editSettings.editMode&&"dialogtemplate"!=this.model.editSettings.editMode?o.appendTo(i):e.append(o),i},_externalFormPosition:function(){var t=e(this.element).offset(),i=e(this.element).width(),s=e(this.element).height(),l=e("#"+this._id+"_externalEdit");switch(this.model.editSettings.formPosition){case"topright":e(l).find(".e-form-toggle-icon").removeClass("e-bottomleft").addClass("e-topright"),e(l).css({left:t.left+i+1+"px",top:t.top+"px",position:"absolute",width:"290px"}),e("#"+this._id+"_eFormContent").height("auto");break;case"bottomleft":e(l).find(".e-form-toggle-icon").removeClass("e-topright").addClass("e-bottomleft"),e(l).css({left:t.left+"px",top:t.top+s+1+"px"}),e("#"+this._id+"_eFormContent").width("100%")}},_setoffsetWidth:function(){var t,i,s=this.model.scrollSettings.frozenColumns>0?this.element.find(".gridform"):e("#"+this._id+"EditForm");if(0!=this._gridRecordsCount||"batch"==this.model.editSettings.editMode||0!=this.model.scrollSettings.frozenColumns)for(t="batch"==this.model.editSettings.editMode?s.closest("td"):"inlineform"==this.model.editSettings.editMode||"inlineformtemplate"==this.model.editSettings.editMode||"externalform"==this.model.editSettings.editMode||"externalformtemplate"==this.model.editSettings.editMode?s.find(".e-rowcell").not(".e-unboundcell,.e-templatecell"):s.find("tr").find(".e-rowcell").not(".e-unboundcell,.e-templatecell"),i=0;i<t.length;i++)this._tdsOffsetWidth[i]=t.get(i).offsetWidth},_bulkChangesAcquired:function(){return!!(this.batchChanges.added.length>0||this.batchChanges.changed.length||this.batchChanges.deleted.length)},_renderDialog:function(){return t.buildTag("div.e-dialog e-dialog-content e-shadow e-widget-content","",{display:"none"},{id:this._id+"_dialogEdit"})},getCurrentEditCellData:function(){var i,s,l,n,o,a;if(this.model.isEdit&&e("#"+this._id+"EditForm").length){switch(i=e("#"+this._id+this._bulkEditCellDetails.fieldName.replace(/[^a-z0-9\s_]/gi,"")),l=this.model.columns[this._bulkEditCellDetails.columnIndex],this._bulkEditCellDetails.cellEditType){case t.Grid.EditingType.String:case t.Grid.EditingType.Numeric:s=i.val();break;case t.Grid.EditingType.Dropdown:s=this._bulkEditCellDetails.isForeignKey?{value:i.ejDropDownList("getSelectedValue"),text:i.ejDropDownList("getValue")}:i.ejDropDownList("getSelectedValue");break;case t.Grid.EditingType.Boolean:s=i.is(":checked");break;case t.Grid.EditingType.DatePicker:o=e.trim(i.val()),(a=i.ejDatePicker("instance"))._setDateValue(o),s=""==o?o:a.model.value;break;case t.Grid.EditingType.DateTimePicker:s=""==e.trim(i.val())?e.trim(i.val()):i.ejDateTimePicker("model.value");break;case"edittemplate":"string"==typeof(n=l.editTemplate.read)&&(n=t.util.getObject(n,window)),s=n(i)}return"string"==typeof s&&s.length&&"number"==l.type&&(s=t.globalize.parseFloat(s,this.model.locale)),s}return null},cancelEditCell:function(){if(this.model.isEdit){var t,i=this.getRows()[this._bulkEditCellDetails.rowIndex],s={};s[this._bulkEditCellDetails.fieldName]=this._bulkEditCellDetails.cellValue,t=e(i).hasClass("e-insertedrow")?e(i).find(".e-rowcell").get(this._bulkEditCellDetails.columnIndex+this.model.groupSettings.groupedColumns.length):e(i).find(".e-rowcell").get(this._bulkEditCellDetails.columnIndex),e(t).removeClass("e-editedbatchcell").empty().html(e(e.templates[this._id+"_JSONTemplate"].render(s)).find(".e-rowcell").get(this._bulkEditCellDetails.columnIndex).innerHTML),this.model.isEdit=!1,this.element.focus()}},saveCell:function(i){var s,l,n,o;if(this.model.isEdit){if(!this.editFormValidate())return!0;var a,r,d,h,c=e("#"+this._id+"EditForm"),u=c.closest("tr"),m=c.closest("td"),p={},g=this.model.columns[this._bulkEditCellDetails.columnIndex],f=e("#"+this._id+this._bulkEditCellDetails.fieldName.replace(/[^a-z0-9\s_]/gi,""));if(p={columnName:g.field,value:this.getCurrentEditCellData(),rowData:this._bulkEditCellDetails.rowData,previousValue:this._bulkEditCellDetails.cellValue,columnObject:g,cell:m,isForeignKey:this._bulkEditCellDetails.isForeignKey},!i&&this._trigger("cellSave",p))return this._focusElements(p.cell),void(this._bulkEditCellDetails.cancelSave=!0);("datetimepicker"==this._bulkEditCellDetails.cellEditType||"dropdownedit"==this._bulkEditCellDetails.cellEditType||"datepicker"==this._bulkEditCellDetails.cellEditType)&&f[f.data("ejWidgets")[0]]("destroy"),t.isNullOrUndefined(g.format)||("date"!=g.type&&"datetime"!=g.type||t.isNullOrUndefined(p.value)||(p.isForeignKey?p.value.text=p.value.text.length>0?new Date(p.value.text):p.value.text:p.value=p.value.length>0?new Date(p.value):p.value),r=this.formatting(g.format,p.isForeignKey?!isNaN(parseFloat(p.value.text))&&isFinite(p.value.text)?parseFloat(p.value.text):p.value.text:p.value,this.model.locale),p.cell.empty().html(r)),t.createObject(this._bulkEditCellDetails.fieldName,p.isForeignKey?p.value.value:p.value,p.rowData),t.isNullOrUndefined(g.format)&&(r=p.isForeignKey?p.value.text:p.value),t.isNullOrUndefined(g.template)||(s=t.copyObject({},p.rowData),t.createObject(this._bulkEditCellDetails.fieldName,p.isForeignKey?p.value.value:p.value,s),r=e.templates(g.template).render(s)),"edittemplate"==this._bulkEditCellDetails.cellEditType?(p.value instanceof Array&&(r=p.value.join()),p.cell.empty().html(r)):"boolean"==p.columnObject.type||"booleanedit"==p.columnObject.editType?(l={},t.createObject(p.columnObject.field,p.value,l),p.cell.empty().html(e(e.templates[this._id+"_JSONTemplate"].render(l))[0].cells[this._bulkEditCellDetails.columnIndex].innerHTML)):("datepicker"!=p.columnObject.editType&&"datetimepicker"!=p.columnObject.editType||t.isNullOrUndefined(g.format))&&p.columnObject.disableHtmlEncode?p.cell.text(r).html():p.cell.empty().html(r),p.cell.removeClass("e-validError"),p.cell.hasClass("e-updatedtd")&&p.cell.addClass("e-gupdatenotify"),p.previousValue=t.isNullOrUndefined(p.previousValue)?"":"date"==g.type||"datetime"==g.type?new Date(p.previousValue):p.previousValue,a=p.isForeignKey?p.value.value:p.value,!1,n="date"!=this._bulkEditCellDetails.type&&"datetime"!=this._bulkEditCellDetails.type||t.isNullOrUndefined(this._bulkEditCellDetails.format)?("datepicker"==this._bulkEditCellDetails.cellEditType||"datetimepicker"==this._bulkEditCellDetails.cellEditType||"dropdownedit"==this._bulkEditCellDetails.cellEditType)&&a instanceof Date&&p.previousValue instanceof Date?a.getTime()!==p.previousValue.getTime():"number"==typeof a?a!==parseFloat(p.previousValue):a!==p.previousValue.toString():!(this._bulkEditCellDetails.cellValue instanceof Date)||this.formatting(this._bulkEditCellDetails.format,this._bulkEditCellDetails.cellValue)!=this.formatting(this._bulkEditCellDetails.format,a),this.model.isEdit=!1,n&&(this._enableSaveCancel(),p.cell.addClass("e-updatedtd e-icon e-gupdatenotify"),h="string"==typeof(d=t.getObject(this._bulkEditCellDetails.fieldName,p.rowData))&&d.length?p.isForeignKey?p.value.value.toString():p.value.toString():p.isForeignKey?isNaN(parseInt(p.value.value))?p.value.value:parseInt(p.value.value):p.value,"string"!=typeof p.value||h.length||(h=null),t.createObject(this._bulkEditCellDetails.fieldName,h,p.rowData),-1==e.inArray(p.rowData,this.batchChanges.changed)&&-1==e.inArray(p.rowData,this.batchChanges.added)&&this.batchChanges.changed.push(p.rowData),this.isejObservableArray&&(o=p.cell.closest("tr").hasClass("e-insertedrow")?"insert":"update",this._refreshViewModel(p,o))),u.removeClass("e-editedrow").removeClass("e-batchrow"),p.cell.removeClass("e-editedbatchcell")}},_refreshViewModel:function(i,l){var n,o,a;for(n=this._dataSource()instanceof t.DataManager?this._dataSource():t.DataManager(this._dataSource()),o=new t.Query,a=0;a<this._primaryKeys.length;a++)o=o.where(this._primaryKeys[a],t.FilterOperators.equal,i.rowData[this._primaryKeys[a]]);var r=n.executeLocal(o),d=this._dataSource(s,!0),h=e.inArray(r[0],this._dataSource());switch(this.model.editSettings.showConfirmDialog=!1,l){case"update":case"remove":d(i.rowData,h,l);break;case"insert":d(i.rowData,0,l)}},_enableSaveCancel:function(){this.model.toolbarSettings.showToolbar&&($toolBar=this.element.find("#"+this._id+"_toolbarItems"),$toolBar.ejToolbar("enableItemByID",this._id+"_update"),$toolBar.ejToolbar("enableItemByID",this._id+"_cancel"))},setCellText:function(i,l,n){var o,a,r,d,h="string"==typeof l,c=this._excludeDetailRows(),u=0!=this.model.groupSettings.groupedColumns.length,m=this.model.scrollSettings.allowVirtualScrolling,p=this[h?"getColumnByField":"getColumnByIndex"](l),g=t.getObject(["currentViewData",u?".records":""].join(""),this.model),f={},_=m?this._dataManager:new t.DataManager(g),v=this._primaryKeys[0],b=h||t.getObject(i+"."+v,m?this._dataManager.dataSource.json:g);t.createObject(p.field,n,f),h&&(b=i,i=_.executeLocal((new t.Query).select(v)).indexOf(i),l=this.getColumnIndexByField(p.field)),m&&(r=((i+(a=this.model.pageSettings.pageSize)-(d=i%a))/a-1)*a,isCached=-1!=e.inArray(r,this.virtualLoadedPages),isCached&&(o=this.getContentTable().find("tr[name="+r+"]")[d].cells[l])),canSkip=-1==i||-1==l||m&&!isCached||i>(m?this._dataSource():g).length||l>this.model.columns.length,canSkip||(o=o||this._excludeDetailCells(c[i])[l],n=p.format===s?n:this.formatting(p.format,n,this.model.locale),t.isNullOrUndefined(p.foreignKeyField)||t.isNullOrUndefined(p.foreignKeyValue)||(n=this._getForeignKeyData(f)[p.foreignKeyField][p.foreignKeyValue]),p.disableHtmlEncode?e(o).text(n):o.innerHTML=n,this._trigger("queryCellInfo",{cell:o,text:o.innerHTML,column:p,data:f})),v&&(t.createObject(v,b,f),this._dataManager.update(v,f))},_excludeDetailCells:function(i){return t.isNullOrUndefined(this.model.detailsTemplate||this.model.childGrid||this.model.showSummary)?e(i.cells):e(i.cells).not(".e-detailrowexpand, .e-detailrowcollapse")},setCellValue:function(i,l,n){if(e("#"+this._id+"EditForm").length>0&&e("#"+this._id+"EditForm").attr("id","EditForm1"),"batch"==this.model.editSettings.editMode&&!this.model.scrollSettings.allowVirtualScrolling&&!this.model.scrollSettings.frozenColumns){var o,a=this.getDataByIndex(i),r=this._excludeDetailRows()[i],d=this.getColumnIndexByField(l),h=this,c=n,u=!1,m=this.getColumnByField(l);if(o=e(r).hasClass("e-insertedrow")?e(r.cells).not(".e-detailrowcollapse, .e-detailrowexpand")[d+this.model.groupSettings.groupedColumns.length]:e(r.cells).not(".e-detailrowcollapse, .e-detailrowexpand")[d],!t.isNullOrUndefined(m)&&!m.isPrimaryKey&&0!=m.allowEditing){if(t.isNullOrUndefined(m.validationRules)||($form=t.buildTag("form","",{},{id:this._id+"EditForm"}),$valElem=t.buildTag("input","",{},{id:this._id+m.field,value:n}),$form.append($valElem),this.element.append($form),$form.validate({errorPlacement:function(t){return h._alertDialog||h._renderAlertDialog(),e("#"+h._id+"AlertDialog_wrapper").css("min-height",""),h._alertDialog.find(".e-content").text(t.text()),h._alertDialog.ejDialog("open"),h.element.find($form).remove(),u=!0,!0}}),this.setValidationToField(m.field,m.validationRules)),m.foreignKeyValue&&(c=this._foreignKeyBinding(d,n,this._id))==s)return this._alertDialog||this._renderAlertDialog(),e("#"+this._id+"AlertDialog_wrapper").css("min-height",""),this._alertDialog.find(".e-content").text(this.localizedLabels.ForeignKeyAlert),this._alertDialog.ejDialog("open"),void(t.isNullOrUndefined(m.validationRules)||this.element.find($form).remove());t.isNullOrUndefined(m.format)||(c=this.formatting(m.format,m.foreignKeyValue&&!isNaN(parseFloat(n))&&isFinite(n)?parseFloat(n):n,this.model.locale)),t.isNullOrUndefined(m.validationRules)||(e($form).validate().form(),this.element.find($form).remove()),e("#EditForm1").attr("id",this._id+"EditForm"),u||o.innerHTML==c||(e(o).has("form").length>0&&(this.model.isEdit=!1),e(o).hasClass("e-boolrowcell")?e(o).find("input").attr("checked",c):o.innerHTML=c,e(o).addClass("e-updatedtd e-icon e-gupdatenotify"),e(o).removeClass("e-validError e-editedbatchcell"),t.createObject(l,n,a),-1==e.inArray(a,this.batchChanges.changed)&&this.batchChanges.changed.push(a),this._enableSaveCancel())}}},setDefaultData:function(i){var s,l,n,o,a;if(t.isNullOrUndefined(i)){for(s=[],l=this.model.columns,n=0;n<this.model.columns.length;n++)s.push(this.model.columns[n].field);for(t.isNullOrUndefined(this._bulkEditCellDetails._data)&&(this._bulkEditCellDetails._data=[]),i={},o=function(e,s){t.createObject(e,s,i)},a=0;a<s.length;a++){var r=a,d=s[a],h=l[a].type,c=t.getObject(d,this._bulkEditCellDetails._data[0]);if(d===(t.isNullOrUndefined(this.model.parentDetails)?null:this.model.parentDetails.parentKeyField)&&(this.model.columns[r].defaultValue=this.model.parentDetails.parentKeyFieldValue),t.isNullOrUndefined(this.model.columns[r].defaultValue))switch(h){case"number":o(d,0);break;case"string":o(d,null);break;case"boolean":o(d,!1);break;case"object":e.isArray(c)?o(d,[]):o(d,null);case"datetime":case"date":o(d,null)}else o(d,this.model.columns[r].defaultValue)}}this._bulkEditCellDetails.defaultData=i},_bulkDelete:function(i){if(this.model.editSettings.allowDeleting){if(t.isNullOrUndefined(i)&&(i=this._selectedRow()),-1==i)return void alert(this.localizedLabels.DeleteOperationAlert);var s,l,n,o={};if(this.multiDeleteMode&&this.selectedRowsIndexes.length>1?(n=[],l=this.getSelectedRows(),Array.prototype.push.apply(n,this.getSelectedRecords()),Array.prototype.push.apply(this.batchChanges.deleted,this.getSelectedRecords())):(s=this.getRows()[i],l=e(s),n=this.getDataByIndex(i)),o={primaryKey:this._primaryKeys,rowIndex:i,rowData:n,row:l},this._trigger("beforeBatchDelete",o))return;this.isejObservableArray&&this._refreshViewModel(o,"remove"),this.model.isEdit&&this.cancelEditCell(),l.hasClass("e-insertedrow")?(l.remove(),-1!=(i=e.inArray(s,this._bulkEditCellDetails.insertedTrCollection))&&(this._bulkEditCellDetails.insertedTrCollection.splice(i,1),this.batchChanges.added.splice(i,1))):(l.hide(),(0==o.rowIndex||l.hasClass("e-firstrow"))&&(l.hasClass("e-firstrow")&&this.getContentTable().find("tr").removeClass("e-firstrow"),this.getContentTable().find("tr:visible").first().addClass("e-firstrow")),e.isArray(n)||this.batchChanges.deleted.push(n)),this._gridRows=this.getContentTable().find("td.e-rowcell").closest("tr").toArray(),this.model.allowScrolling&&this._refreshScroller(o),this._enableSaveCancel(),this._selectedRow(-1),o={primaryKey:this._primaryKeys,rowIndex:i,rowData:n},this._trigger("batchDelete",o)}},_bulkAddRow:function(i){var s,l,n,o,a,r;if(e("#"+this._id+"EditForm").length&&!this.editFormValidate())return!0;if(this.model.editSettings.allowAdding){if(s={},o=this.getRows(),t.isNullOrUndefined(i)||(this._bulkEditCellDetails.defaultData=i),t.isNullOrUndefined(this._bulkEditCellDetails.defaultData)&&this.setDefaultData(),s={defaultData:e.extend(!0,{},this._bulkEditCellDetails.defaultData),primaryKey:this._primaryKeys},this._trigger("beforeBatchAdd",s))return;for(l=e(e.render[this._id+"_JSONTemplate"](s.defaultData)).addClass("e-insertedrow"),null!=o&&e(o[0]).hasClass("e-alt_row")&&l.removeClass("e-alt_row"),"top"==this.model.editSettings.rowPosition?this.getContentTable().first().find("tbody").first().prepend(l):"bottom"==this.model.editSettings.rowPosition&&this.getContentTable().first().find("tbody").first().append(l),this.model.allowScrolling&&this._refreshScroller(s),0===this._gridRecordsCount&&this.getContentTable().find("tbody .emptyrecord").first().remove(),this._gridRows=this.getContentTable().find("td.e-rowcell").closest("tr").toArray(),a=0;a<this.model.groupSettings.groupedColumns.length;a++)l.prepend(t.buildTag("td.e-indentcell"));this._bulkEditCellDetails.insertedTrCollection.push(l.get(0)),this.batchChanges.added.push(s.defaultData),this._enableSaveCancel(),r=this._gridRows.length-1,"bottom"==this.model.editSettings.rowPosition?(n=this._findNextEditableCell(0),this.selectRows(r),this.editCell(r,this.model.columns[n].field)):(n=this._findNextEditableCell(0),this.selectRows(0),this.editCell(0,this.model.columns[n].field)),l.find(".e-rowcell").addClass("e-updatedtd e-icon e-gupdatenotify"),s={defaultData:s.defaultData},e.extend(s,{columnObject:this.model.columns[n],columnIndex:n,row:l,primaryKey:this._primaryKeys,cell:e(l[0].cells[n])}),this._trigger("batchAdd",s)}},getDataByIndex:function(t){var i,s=e(this.getRows()[t]);return s.hasClass("e-insertedrow")?(i=e.inArray(s[0],this._bulkEditCellDetails.insertedTrCollection),this.batchChanges.added[i]):this._bulkEditCellDetails._data["top"==this.model.editSettings.rowPosition?t-this._bulkEditCellDetails.insertedTrCollection.length:t]},refreshBatchEditChanges:function(){this._bulkEditCellDetails={cellValue:null,rowIndex:-1,_data:null,columnIndex:-1,fieldName:null,cellEditType:"",cancelSave:!1,defaultData:null,insertedTrCollection:[],rowData:null,isForeignKey:!1},this.batchChanges={added:[],deleted:[],changed:[]}},refreshBatchEditMode:function(){"batch"==this.model.editSettings.editMode&&(this.refreshBatchEditChanges(),this._bulkEditCellDetails._data=e.extend(!0,[],this.getCurrentViewData()))},batchCancel:function(){this.cancelEdit()},batchSave:function(){var e={};this.saveCell(),e.batchChanges=this.getBatchChanges(),this._trigger("beforeBatchSave",e)||((e={}).requestType="batchsave",this._sendBulkReuqest(this.getBatchChanges(),e))},_sendBulkReuqest:function(e,i){var s=this._dataManager.saveChanges(e,this._primaryKeys[0],this.model.query._fromTable,this.model.query),l=this;this._dataManager instanceof t.DataManager&&!this._dataManager.dataSource.offline?(s.done(function(){l._processBindings(i)}),s.fail(function(e){var t={error:e.error};l._trigger("actionFailure",t)})):this._processBindings(i)},getBatchChanges:function(){return this.batchChanges},editCell:function(i,l){var n;if(!this.element.ejWaitingPopup("model.showOnInit")&&this.model.editSettings.allowEditing&&-1==e.inArray(l,this._disabledEditableColumns)){if(n=e("#"+this._id+"EditForm"),this.model.isEdit&&this.saveCell(),e.isFunction(e.validator)&&n.length&&n.validate().errorList.length)return;var o=e(this.getRows()[i]),a=this.getColumnIndexByField(l),r=o.find(".e-rowcell").eq(a),d=this.model.columns[a],h=this.getDataByIndex(i),c={validationRules:t.isNullOrUndefined(d.validationRules)?{}:e.extend(!0,{},d.validationRules),columnName:d.field,value:t.getObject(t.isNullOrUndefined(l)?"":l,h),rowData:h,row:o,primaryKey:this._primaryKeys,columnObject:d,cell:r,isForeignKey:!t.isNullOrUndefined(d.foreignKeyValue)&&"batch"==this.model.editSettings.editMode},u=!0;if(this.model.allowScrolling&&this._refreshScroller(c),this._batchEditRowData=h,this._trigger("cellEdit",c))return;o.hasClass("e-insertedrow")&&(c.requestType="add"),(-1!=e.inArray(l,this._primaryKeys)||!1===c.columnObject.allowEditing||c.columnObject.template&&(0==c.columnObject.allowEditing||!c.columnObject.field)||c.columnObject.commands)&&(e.extend(this._bulkEditCellDetails,{cellValue:c.value,rowIndex:i,fieldName:l,rowData:c.rowData,columnIndex:a,isForeignKey:!t.isNullOrUndefined(c.columnObject.foreignKeyValue)}),u=!1),o.hasClass("e-insertedrow")&&c.columnObject.isPrimaryKey&&(u=!0),u&&(e.extend(this._bulkEditCellDetails,{rowIndex:i,cellValue:c.value,columnIndex:a,format:d.format==s?null:d.format,type:d.type,fieldName:l,cellEditType:c.columnObject.editType,rowData:h,isForeignKey:!t.isNullOrUndefined(c.columnObject.foreignKeyValue)}),this._renderBulkEditObject(c,r),o.addClass("e-editedrow").addClass("e-batchrow"),c.cell.addClass("e-editedbatchcell"),"booleanedit"==c.columnObject.editType&&c.cell.addClass("e-boolrowcell"))}},_findNextEditableCell:function(e){for(var t=this.model.columns.length,i=e;i<t;i++)if(!this.model.columns[i].template&&!this.model.columns[i].commands&&this.model.columns[i].visible)return i;return-1},_findNextCell:function(i,s){var l,n,o=[],a=this.getRows();return this.model.columns[i].template&&(this.model.columns[i].__isTemplate=!0),this.model.columns[i].commands&&(this.model.columns[i].__isCommand=!0),n=t.Predicate("visible","equal",!0).and("__isTemplate","notequal",!0).and("__isCommand","notequal",!0),e(a[this._bulkEditCellDetails.rowIndex]).hasClass("e-insertedrow")||(n=n.and("allowEditing","notequal",!1)),l="right"==s?this.model.columns.slice(i):this.model.columns.slice(0,i+1).reverse(),0!=(o=t.DataManager(l).executeLocal(t.Query().where(n))).length||"left"==s&&0==this._bulkEditCellDetails.rowIndex||"right"==s&&this._bulkEditCellDetails.rowIndex+1==this.getRows().length||(l="right"==s?this.model.columns.slice(0,i):this.model.columns.slice(i).reverse(),o=t.DataManager(l).executeLocal(t.Query().where(n)),this._bulkEditCellDetails.rowIndex=o.length&&"right"==s?this._bulkEditCellDetails.rowIndex+1:this._bulkEditCellDetails.rowIndex-1),o.length?e.inArray(o[0],this.model.columns):-1},_moveCurrentCell:function(i){var s,l=this._bulkEditCellDetails.rowIndex,n=e("#"+this._id+"EditForm");if(-1==this._bulkEditCellDetails.rowIndex&&-1==this._bulkEditCellDetails.columnIndex)return!0;switch(i){case"right":if(this._bulkEditCellDetails.rowIndex==this.getRows().length-1&&this._bulkEditCellDetails.columnIndex==this.model.columns.length-1||!this.element.is(document.activeElement)&&0==n.length)return!0;this._bulkEditCellDetails.columnIndex==this.model.columns.length-1?(s=0,this._bulkEditCellDetails.rowIndex=this._bulkEditCellDetails.rowIndex+1):s=this._bulkEditCellDetails.columnIndex+1,t.isNullOrUndefined(this.model.columns[s].template)&&t.isNullOrUndefined(this.model.columns[s].commands)&&!1!==this.model.columns[s].visible&&!1!==this.model.columns[s].allowEditing||(s=this._findNextCell(s,i)),this._bulkEditCellDetails.rowIndex!=l&&this.selectRows(this._bulkEditCellDetails.rowIndex),-1!=s&&this.editCell(this._bulkEditCellDetails.rowIndex,this.model.columns[s].field);break;case"left":if(0==this._bulkEditCellDetails.rowIndex&&0==this._bulkEditCellDetails.columnIndex||!this.element.is(document.activeElement)&&0==n.length)return!0;0==this._bulkEditCellDetails.columnIndex?(s=this.model.columns.length-1,this._bulkEditCellDetails.rowIndex=this._bulkEditCellDetails.rowIndex-1,this.selectRows(this._bulkEditCellDetails.rowIndex)):s=this._bulkEditCellDetails.columnIndex-1,t.isNullOrUndefined(this.model.columns[s].template)&&t.isNullOrUndefined(this.model.columns[s].commands)&&!1!==this.model.columns[s].visible&&!1!==this.model.columns[s].allowEditing||(s=this._findNextCell(s,i)),this._bulkEditCellDetails.rowIndex!=l&&this.selectRows(this._bulkEditCellDetails.rowIndex),-1!=s&&this.editCell(this._bulkEditCellDetails.rowIndex,this.model.columns[s].field);break;case"up":if(0==this._bulkEditCellDetails.rowIndex)return;s=this._bulkEditCellDetails.columnIndex,this._enableCheckSelect||this.selectRows(this._bulkEditCellDetails.rowIndex-1),this.editCell(this._bulkEditCellDetails.rowIndex-1,this.model.columns[this._bulkEditCellDetails.columnIndex].field);break;case"down":if(this._bulkEditCellDetails.rowIndex==this.getRows().length-1)return void this.endEdit();s=this._bulkEditCellDetails.columnIndex,this._enableCheckSelect||this.selectRows(this._bulkEditCellDetails.rowIndex+1),-1!=this._bulkEditCellDetails.columnIndex&&this.editCell(this._bulkEditCellDetails.rowIndex+1,this.model.columns[this._bulkEditCellDetails.columnIndex].field)}return addedRow=!e(this.getRows()[this._bulkEditCellDetails.rowIndex]).hasClass("e-insertedrow"),-1!=s&&(this.model.columns[s].commands||this.model.columns[s].isPrimaryKey&&addedRow||this.model.columns[s].template)&&this.element.focus(),!1},_renderBulkEditObject:function(i,s){var l,n,o,a,r=t.buildTag("form","",{},{id:this._id+"EditForm"}),d=this._bulkEditTemplate,h=(this._id,i.columnObject.field,{});t.createObject(i.columnObject.field,i.value,h),o={requestType:i.requestType},s.empty(),s.parent().is(":last-child")||(s.addClass("e-validError"),s.removeClass("e-gupdatenotify")),n=d.find("#"+i.columnObject.field.replace(/\./g,t.pvt.consts.complexPropertyMerge)+"_BulkEdit").html(),"SELECT"==(l=e(e.templates(n).render(h))).get(0).tagName&&(a=t.getObject(i.columnObject.field,h),l.val(t.isNullOrUndefined(a)?"":a.toString()),null==l.val()&&l.val(l.find("option").first().val()),l.data("ej-value",a)),r.append(l),s.append(r),this._setoffsetWidth(),this._refreshEditForm(o),e.isFunction(e.validator)&&!e.isEmptyObject(i.validationRules)&&(this.initValidator(),this.setValidationToField(i.columnObject.field,i.validationRules)),this.model.isEdit=!0},_triggerConfirm:function(e){if(e!==s&&e.model.text==this.localizedLabels.OkButton)this._confirmDialog.find(".e-content").text()==this.localizedLabels.BatchSaveConfirm?this.batchSave():this._confirmDialog.find(".e-content").text()==this.localizedLabels.ConfirmDelete?"batch"==this.model.editSettings.editMode?this._bulkDelete():this.multiDeleteMode?this._multiRowDelete():t.isNullOrUndefined(this._cDeleteData)?this.deleteRow():(this.deleteRow(this._cDeleteData),this._cDeleteData=null):this._confirmDialog.find(".e-content").text()==this.localizedLabels.CancelEdit?this.cancelEdit():(this._confirmedValue=!0,this._processBindings(this._requestArgs));else{if(this._confirmDialog.find(".e-content").text()!=this.localizedLabels.BatchSaveConfirm&&this._confirmDialog.find(".e-content").text()!=this.localizedLabels.ConfirmDelete&&this._confirmDialog.find(".e-content").text()!=this.localizedLabels.CancelEdit)switch(this._requestArgs.requestType){case"grouping":this.model.groupSettings.groupedColumns.pop();break;case"ungrouping":this.model.groupSettings.groupedColumns.push(this._requestArgs.columnName);break;case"sorting":this._cSortedDirection=this._cSortedColumn=null;break;case"filtering":this.model.filterSettings.filteredColumns.reverse().splice(0,this._requestArgs.currentFilterObject),this.model.filterSettings.filteredColumns.reverse();break;case"paging":this._currentPage(this._requestArgs.previousPage),this.getPager().ejPager("model.currentPage",this._requestArgs.previousPage)}this._confirmedValue=!1}this._requestArgs=null,this._confirmDialog.ejDialog("close")},_batchCellValidation:function(e){var t,s=this.getRowByIndex(e);if("batch"==this.model.editSettings.editMode&&this.model.isEdit&&s.hasClass("e-insertedrow"))for(i=0;i<this._validatedColumns.length;i++){if(t=this.getColumnIndexByField(this._validatedColumns[i]),!this.editFormValidate())return!0;this.editCell(e,this.model.columns[t].field)}},_saveCellHandler:function(t){var i,s=e(t.target);t.stopPropagation(),i="top"==this.model.editSettings.rowPosition||null==this._gridRows?0:this._gridRows.length-1,0==s.closest(".e-popup").length&&0==s.closest(".e-rowcell").find("#"+this._id+"EditForm").length&&(e(this.getRows()).hasClass("e-insertedrow")&&this._batchCellValidation(i),this.saveCell())},initValidator:function(){for(var t=this,i=this.model.scrollSettings.frozenColumns>0||this.model.editSettings.showAddNewRow?this.element.find(".gridform"):e("#"+this._id+"EditForm"),s=0;s<i.length;s++)i.eq(s).validate({ignore:".e-hide",errorClass:"e-field-validation-error",errorElement:"div",wrapper:"div",errorPlacement:function(e,i){t._renderValidator(e,i)}})},_renderValidator:function(i,s){var l,n,o,a,r;if(s.is(":hidden")&&(s=s.siblings("input:visible")),s.length){var d=s.closest(".e-rowcell"),h=e(i).addClass("e-error"),c=t.buildTag("div.e-errortail e-toparrow"),u=t.isNullOrUndefined(this.getContent().data("ejScroller"))?null:this.getScrollObject(),m=0;(d=d.length?d:d=s.closest("td")).find(".e-error").remove(),s.parent().hasClass("e-in-wrap")?h.insertAfter(s.closest(".e-widget")):h.insertAfter(s),h[(l=this.model.scrollSettings.frozenRows>0&&this._currentTrIndex>=this.model.scrollSettings.frozenRows)?"append":"prepend"](c),this.model.allowScrolling&&(u&&u._hScrollbar||u._vScrollbar)&&(d.addClass("e-validError"),m=u._hScrollbar?u._hScrollbar.element[0].offsetTop:0);var p=d.offset().top+d[0].offsetHeight+i[0].offsetHeight,g=!1,f=u&&u._hScrollbar?u._hScrollbar.model.height:0;if((u&&u.isHScroll()&&p>m||p>this.getContent()[0].offsetTop+this.getContent().find(".e-content").height())&&(g=!0),this.model.enableRTL?"dialog"!=this.model.editSettings.editMode&&h.offset({top:s.offset().top+s.height()}):"dialog"!=this.model.editSettings.editMode&&h.offset({left:s.offset().left,top:s.offset().top+s.height()}),this.model.scrollSettings.frozenRows<=0&&-1==e.inArray(this.model.editSettings.editMode,["externalform","externalformtemplate","dialog","dialogtemplate"])){var _=this.getContent(),v=_.find(".e-content"),b=v.height(),C=_[0].offsetTop;if(g&&null!=u&&u._vScrollbar&&this.model.scrollSettings.frozenColumns){u._vScrollbar.model.value,v[0].scrollHeight;var w=C+v[0].scrollHeight,y=C+b;(!this.model.scrollSettings.frozenColumns&&p>w||this.model.scrollSettings.frozenColumns&&p>y)&&(u._vScrollbar.model.maximum+=p-(C+b),u._vScrollbar.refresh(!0)),this.model.scrollSettings.frozenColumns&&(n=this.getContent().find(".e-movablecontent")).height(n[0].scrollHeight),u.scrollY(s.offset().top-C+v[0].scrollTop)}else g&&this.model.allowScrolling&&null!=u&&(u.isVScroll()?u.isVScroll()&&(u.refresh(),this._showHideScroller(),u._vScroll&&(a=u._vScrollbar.model.value+(p-(C+b+f-f)),u.scrollY(a))):(o=p-(C+b),v.height(b+o)))}else l&&(g?(r=h.css("top"),c.addClass("e-bottomarrow"),h.css({bottom:r,top:"auto"})):c.prependTo(c.parent()));h.show("slow")}},setValidation:function(){for(var e=0;e<this.model.columns.length;e++)t.isNullOrUndefined(this.model.columns[e].validationRules)||this.setValidationToField(this.model.columns[e].field,this.model.columns[e].validationRules)},setValidationToField:function(i,s){var l,n,o,a,r=i;t.isNullOrUndefined(i)||(r=r.replace(/[^a-z0-9\s_]/gi,"")),l=(n="batch"==this.model.editSettings.editMode?this.element.find("#"+this._id+"EditForm"):this.model.editSettings.showAddNewRow?e(this.getRows()).hasClass("e-editedrow")?this.element.find(".e-editedrow .gridform"):this.element.find(".e-addedrow .gridform"):this.element.find(".gridform")).find("#"+this._id+r).length>0?n.find("#"+this._id+r):n.find("#"+r),s.regex&&(s[i+"regex"]=s.regex,delete s.regex,e.validator.addMethod(r+"regex",function(e,t,i){return(i instanceof RegExp?i:new RegExp(i)).test(e)},t.getObject("messages.regex",s)||this.getColumnByField(i).headerText+" should match the given pattern")),l.attr("name")||l.attr("name",i),l.rules("add",s),(o=e("#"+this._id+"EditForm").validate()).settings.messages[i]=o.settings.messages[i]||{},t.isNullOrUndefined(s.required)||(0==(a=t.isNullOrUndefined(s.messages&&s.messages.required)?e.validator.messages.required:s.messages.required).indexOf("This field")&&(a=a.replace("This field",this.getColumnByField(i).headerText)),o.settings.messages[i].required=a,l.hasClass("e-datepicker")&&l.ejDatePicker({watermarkText:""}))},_renderConfirmDialog:function(){var i=t.buildTag("div.e-content",this.localizedLabels.BatchSaveConfirm),s=t.buildTag("span.e-buttons",'<input type="button" id='+this._id+'ConfirmDialogOK value="'+this.localizedLabels.OkButton+"\" /> <input type='button' id="+this._id+"ConfirmDialogCancel value='"+this.localizedLabels.CancelButton+"' />");this._confirmDialog=t.buildTag("div#"+this._id+"ConfirmDialog"),this._confirmDialog.append(i).append(s),this.element.append(this._confirmDialog),s.find("input").ejButton({cssClass:this.model.cssClass,showRoundedCorner:!0,size:"mini",click:e.proxy(this._triggerConfirm,this)}),this._renderFDialog(this._id+"ConfirmDialog"),this._confirmDialog.ejDialog({width:"auto",minWidth:0,minHeight:0,enableModal:!0})},_unboundClickHandler:function(i){var s,l,n,o,a,r,d,h,c=e(i.target).closest("button");if(!(c.hasClass("e-button")&&(c.hasClass("e-disable")||c.prop("disabled"))||(s=0,l={},e(i.target).hasClass("e-unboundcelldiv")))){if(n=c.hasClass("e-savebutton")?this.getIndexByRow(e(".e-editedrow")):this.getIndexByRow(c.closest("tr")),this.model.isEdit&&(!this._isLocalData||this._isRemoteSaveAdaptor)&&c.hasClass("e-editbutton"))return void(this._unboundRow=c.closest("tr"));if(o=this._currentJsonData[n],a=e(c).ejButton("instance"),("inlineform"==this.model.editSettings.editMode||"inlinetemplate"==this.model.editSettings.editMode)&&(s=e("#"+this._id).find(".e-editedrow").length),this.model.allowSelection&&!this.model.isEdit&&this.selectRows(this.getIndexByRow(c.closest("tr"))-s),c.hasClass("e-cancelbutton")&&(this.model.isEdit=!1),e.isFunction(e.fn.ejDatePicker)&&e("#"+this._id+"EditForm").find(".e-datepicker").ejDatePicker("hide"),c.hasClass("e-editbutton"))this.model.isEdit&&this.cancelEdit(),r=this.getRowByIndex(n),this.startEdit(r);else if(c.hasClass("e-deletebutton")){if(r=this.getRowByIndex(n),this.model.editSettings.showDeleteConfirmDialog)return void this._toolbarOperation(this._id+"_delete");this.deleteRow(r)}else c.hasClass("e-savebutton")?(this.endEdit(),o=this._currentJsonData[n]):c.hasClass("e-cancelbutton")&&this.cancelEdit();l={rowIndex:n,data:o,buttonModel:a.model,commandType:c.val()},t.raiseWebFormsServerEvents&&(d={model:this.model,originalEventType:"commandButtonClick"},h=l,t.isNullOrUndefined(this.model.serverEvents)||-1==e.inArray("commandButtonClick",this.model.serverEvents)||t.raiseWebFormsServerEvents("commandButtonClick",d,h))}},addRecord:function(i,s){var l,n;this.model.editSettings.allowAdding&&0==e(".e-gridcontent").find(".gridform").length&&(i?(("normal"==this.model.editSettings.editMode||"inlineform"==this.model.editSettings.editMode||"inlineformtemplate"==this.model.editSettings.editMode)&&(l=t.buildTag("tr.e-addedrow"),this.getContentTable().find("tbody").first().prepend(l)),(n={data:i}).action="add",n.selectedRow=this._selectedRow(),this._cAddedRecord=i,n.requestType=t.Grid.Actions.Save,this._updateAction(n),-1!=n.selectedRow&&this.selectRows(n.selectedRow+1),this._isUnboundColumn&&this._refreshUnboundTemplate(this.getContentTable()),s||("normal"==this.model.editSettings.editMode||"inlineform"==this.model.editSettings.editMode||"inlineformtemplate"==this.model.editSettings.editMode)&&this.model.allowPaging&&this.model.pageSettings.pageSize<this.model.currentViewData.length&&0==this.model.groupSettings.groupedColumns.length&&!this.model.editSettings.showAddNewRow&&this.getContentTable().get(0).lastChild.removeChild(this.getContentTable().get(0).lastChild.lastChild)):this._startAdd())},updateRecord:function(e,i){this._updateDeleteRecord(e,i,"update"),"batch"!=this.model.editSettings.editMode&&(this.model.sortSettings.sortedColumns.length||this.model.summaryRows.length>0||this.model.groupSettings.groupedColumns.length||!t.isNullOrUndefined(this._searchCount)||this.filterColumnCollection.length)&&this.refreshContent()},_updateDeleteRecord:function(i,s,l){var n,o,a,r;(n=t.DataManager(this._currentJsonData).executeLocal(t.Query().where(i,t.FilterOperators.equal,s[i]))).length&&(-1!=(o=e.inArray(n[0],this._currentJsonData))&&(a=this.getRowByIndex(o),"update"==l?(t.copyObject(n[0],s),r=e(e.render[this._id+"_JSONTemplate"](n)),a.hasClass("e-alt_row")?r.addClass("e-alt_row"):r.removeClass("e-alt_row"),a.replaceWith(r),this._isUnboundColumn&&this._refreshUnboundTemplate(this.getContentTable()),"batch"==this.model.editSettings.editMode?this.batchChanges.changed.push(n[0]):this._dataManager[l](i,s),this._isMapSelection&&(this._selectionByGrid=!0,this.multiSelectCtrlRequest=!0,s[this._selectionMapColumn]?this.selectRows(o):this.clearSelection(o),this._selectionByGrid=!1)):(-1==e.inArray(o,this.selectedRowsIndexes)&&this.selectedRowsIndexes.push(o),this.deleteRow(a)),"batch"==this.model.editSettings.editMode&&(this.batchSave(),this._confirmedValue=!0)))},deleteRecord:function(e,t){this._updateDeleteRecord(e,t,"remove")}}}(jQuery,Syncfusion),function(e,t){t.gridFeatures=t.gridFeatures||{},t.gridFeatures.sort={_addSortElementToColumn:function(i,s){var l,n,o,a;if(n=t.DataManager(this.model.columns).executeLocal(t.Query().where("field","equal",i)).length>1?this.getColumnByHeaderText(this._$curSElementTarget.text()):this.getColumnByField(i),!t.isNullOrUndefined(n)){var r=e.inArray(n,this.model.columns),d=this.getsortColumnByField(i),h=e.inArray(d,this.model.sortSettings.sortedColumns),c=this.getHeaderTable().find("thead tr:not('.e-stackedHeaderRow')").find(".e-headercell").not(".e-detailheadercell").eq(r).find(".e-headercelldiv");if(s=t.isNullOrUndefined(s)?"ascending":s.toLowerCase(),c.find(".e-ascending,.e-descending").remove(),this.model.allowGrouping&&0!=this.model.groupSettings.groupedColumns.length&&this.element.find(".e-groupdroparea").find("div[ej-mappingname='"+i+"']").find(".e-ascending,.e-descending").not(".e-ungroupbutton").remove(),l="descending"!=s?"e-rarrowup-2x":"e-rarrowdown-2x",o=1,this.model.allowSorting&&this.model.allowMultiSorting&&this.model.sortSettings.sortedColumns.length>1){for(a=1;a<=h;a++)o+=1;c.css("text-align"),c.prepend(this._createSortNumber(o,c).addClass("e-sortnumber")),c.append(this._createSortElement().addClass("e-"+(s||"ascending")+" "+l))}else c.append(this._createSortElement().addClass("e-"+(s||"ascending")+" "+l));this.model.allowGrouping&&0!=this.model.groupSettings.groupedColumns.length&&this.element.find(".e-groupdroparea").find("div[ej-mappingname='"+i+"']").append(this._createSortElement().addClass("e-"+(s||"ascending")+" "+l)),c.parent().attr("aria-sort",s)}},_removeSortElementFromColumn:function(t){var i=this.getColumnByField(t),s=e.inArray(i,this.model.columns),l=this.getHeaderTable().find("thead").find(".e-headercell").not(".e-detailheadercell").eq(s).find(".e-headercelldiv");l.find(".e-ascending,.e-descending").remove(),l.parent().prop("aria-sort",!1)},_sortCompleteAction:function(i){var s,l,n;for(this.getHeaderTable().find(".e-columnheader").find(".e-headercelldiv").find(".e-ascending,.e-descending,.e-number").remove(),this.model.allowGrouping&&0!=this.model.groupSettings.groupedColumns.length&&this.element.find(".e-groupdroparea").find("div[ej-mappingname='"+i.columnName+"']").find(".e-ascending,.e-descending,.e-number").not(".e-ungroupbutton").remove(),this.getHeaderTable().find("[aria-sort]").prop("aria-sort",!1),l=0;l<this.model.sortSettings.sortedColumns.length;l++)this._addSortElementToColumn(this.model.sortSettings.sortedColumns[l].field,this.model.sortSettings.sortedColumns[l].direction);this.model.groupSettings.groupedColumns.length&&null!=this._$curSElementTarget&&(n=this._checkEinGroupDrop(e.trim(this._$curSElementTarget.attr("ej-mappingname"))),t.isNullOrUndefined(n)||(s="ascending"==(t.isNullOrUndefined(i.columnSortDirection)||""==i.columnSortDirection?this.getsortColumnByField(this._$curSElementTarget.attr("ej-mappingname")).direction.toLowerCase():i.columnSortDirection)?"e-rarrowup-2x":"e-rarrowdown-2x",n.find(".e-ascending,.e-descending").removeClass().addClass("e-icon e-"+(t.isNullOrUndefined(i.columnSortDirection)||""==i.columnSortDirection?this.getsortColumnByField(this._$curSElementTarget.attr("ej-mappingname")).direction.toLowerCase():i.columnSortDirection)+" "+s))),this.multiSortRequest=!1,(!this.model.allowScrolling||!this.initialRender||this.model.scrollSettings.frozenRows>0||this.model.scrollSettings.frozenColumns>0)&&this.setWidthToColumns()},removeSortedColumns:function(t){if(e.isArray(t))for(var i=0;i<t.length;i++)this._removeSortedColumnFromCollection(t[i]);else this._removeSortedColumnFromCollection(t);this.multiSortRequest=!0,this.sortColumn(null,null)},_removeSortedColumnFromCollection:function(e){for(var t=0;t<this.model.sortSettings.sortedColumns.length;t++)if(this.model.sortSettings.sortedColumns[t].field==e){this.model.sortSettings.sortedColumns.splice(t,1);break}},clearSorting:function(){var t=this;this.model.sortSettings.sortedColumns=e.grep(this.model.sortSettings.sortedColumns,function(i){return-1!=e.inArray(i.field,t.model.groupSettings.groupedColumns)}),this._$prevSElementTarget=null,this._$curSElementTarget=null,this.refreshContent()},sortColumn:function(i,s){var l,n;this.model.allowSorting&&-1==e.inArray(i,this._disabledSortableColumns)&&(null==i||0!=i.length)&&(l={},this.multiSortRequest||(n=this,this.model.sortSettings.sortedColumns=e.grep(this.model.sortSettings.sortedColumns,function(t){return-1!=e.inArray(t.field,n.model.groupSettings.groupedColumns)})),l.requestType=t.Grid.Actions.Sorting,this._cSortedColumn=l.columnName=i,this._cSortedDirection=l.columnSortDirection=t.isNullOrUndefined(s)?t.sortOrder.Ascending:s.toLowerCase(),null!==this._cSortedColumn&&(this._removeSortedColumnFromCollection(i),this.model.sortSettings.sortedColumns.push({field:this._cSortedColumn,direction:this._cSortedDirection})),this._processBindings(l)&&(this._cSortedDirection=this._cSortedColumn=null),this._primaryKeyValues=[])},_createSortElement:function(){return t.buildTag("span.e-icon","&nbsp;")},_renderMultiTouchDialog:function(){var e,i,s;this._customPop=t.buildTag("div.e-gridpopup","",{display:"none"}),e=t.buildTag("div.e-content"),i=t.buildTag("div.e-downtail e-tail"),this.model.allowMultiSorting&&(s=t.buildTag("span.e-sortdirect e-icon"),e.append(s)),"multiple"==this.model.selectionType&&(s=t.buildTag("span.e-rowselect e-icon"),e.append(s)),this._customPop.append(e),this._customPop.append(i),this.element.append(this._customPop)}}}(jQuery,Syncfusion),function($,ej,undefined){ej.gridFeatures=ej.gridFeatures||{},ej.gridFeatures.filter={getFilterBar:function(){return this._gridFilterBar},setGridFilterBar:function(e){this._gridFilterBar=e},filterColumn:function(e,t,i,s,l,n){var o,a,r,d,h,c,u,m,p;if(this.model.allowFiltering)for(o=this.getColumnByField(e),(ej.isNullOrUndefined(o)||ej.isNullOrUndefined(o.filterBarTemplate)||"boolean"!=o.type||"true"!=i)&&"false"!=i||(i=JSON.parse(i)),!ej.isNullOrUndefined(o)&&!ej.isNullOrUndefined(o.filterBarTemplate)&&("date"==o.type||"datetime"==o.type)&&i.length>0&&(a=ej.isNullOrUndefined(o.format)?"date"==this._currentFilterColumn.type?ej.preferredCulture().calendar.patterns.d:ej.preferredCulture().calendar.patterns.f:o.format.replace("{0:","").replace("}",""),i=ej.parseDate(i,a,this.model.locale)),r=[],"object"==typeof e?r=e:r.push({field:e,operator:t,value:i,predicate:s,matchcase:l,actualFilterValue:n}),d=0;d<r.length;d++){e=r[d].field,t=r[d].operator,i=r[d].value,s=r[d].predicate,l=!ej.isNullOrUndefined(r[d].matchcase)&&r[d].matchcase,n=r[d].actualFilterValue;var g={};for(g.requestType=ej.Grid.Actions.Filtering,g.currentFilterObject=[],this._$curFieldName=e,$.isArray(t)||(t=$.makeArray(t)),$.isArray(i)||(i=$.makeArray(i)),$.isArray(s)||(s=$.makeArray(s)),h=!1,this._filterCollection,ej.util.isNullOrUndefined(this._currentFilterColumn)&&(this._currentFilterColumn=this.getColumnByField(e)),c=0;c<t.length;c++){if(u={field:e,operator:t[c],value:i[c],matchcase:l,predicate:s[c],actualFilterValue:ej.getObject("value",n),actualOperator:ej.getObject("operator",n)},predicated=ej.getObject("ejpredicate",n),predicated&&(u=predicated),"filterbar"==this.model.filterSettings.filterType&&(this._$colType=this._currentFilterColumn.type),0==this.model.filterSettings.filteredColumns.length&&""!==u.value)"date"!=this._$colType&&"datetime"!=this._$colType||"equal"!=t&&"notequal"!=t||"string"==typeof u.value?this.model.filterSettings.filteredColumns.push(u):this._setDateFilters(u);else{if(!h){var f=ej.DataManager(this.model.filterSettings.filteredColumns),_=(new ej.Query).where("field",ej.FilterOperators.equal,u.field),v=f.executeLocal(_);for(m=0;m<v.length;m++)-1!=(p=$.inArray(v[m],this.model.filterSettings.filteredColumns))&&this.model.filterSettings.filteredColumns.splice(p,1)}""!==u.value&&("date"!=this._$colType&&"datetime"!=this._$colType||"equal"!=t&&"notequal"!=t||"string"==typeof u.value?this.model.filterSettings.filteredColumns.push(u):this._setDateFilters(u))}h=!0,g.currentFilterObject.push(u)}g.filterCollection=this.model.filterSettings.filteredColumns,g.currentFilteringColumn=e,this._processBindings(g)&&(this.model.filterSettings.filteredColumns.reverse().splice(0,t.length),this.model.filterSettings.filteredColumns.reverse()),ej.isNullOrUndefined(o)||ej.isNullOrUndefined(o.filterBarTemplate)||(this.filterStatusMsg="",this._currentFilterbarValue=g.currentFilterObject[0].value,this._oldFilterColumn!=o&&this.filterColumnCollection.length>0&&-1==$.inArray(o,this.filterColumnCollection)&&this.filterColumnCollection.push(o),this._oldFilterColumn=this._currentFilterColumn=o,this._showFilterMsg())}},search:function(e){var t={};$("#"+this._id+"_search").find("input").val(),$("#"+this._id+"_search").find("input").val(e),t.requestType=ej.Grid.Actions.Search,t.keyValue=e,this.model.searchSettings.fields=0!=this.model.searchSettings.fields.length?this.model.searchSettings.fields:this.getColumnFieldNames(),(""!=e||""!=this.model.searchSettings.key)&&(this.model.searchSettings.key=e.toLowerCase()==this.localizedLabels.True.toLowerCase()?"true":e.toLowerCase()==this.localizedLabels.False.toLowerCase()?"false":e,this._processBindings(t)),this._primaryKeyValues=[]},_filterBarHandler:function(e){var t,i,s,l=e.keyCode,n=$(e.target);if(n.closest(".e-grid").attr("id")===this._id&&("immediate"==this.model.filterSettings.filterBarMode||13==l)&&9!=l){for(n=$(e.target),this.filterStatusMsg="",t=n.prop("id").replace("_filterBarcell",""),s=0;s<this.model.columns.length;s++){if(!ej.isNullOrUndefined(this.model.columns[s].foreignKeyValue)&&-1!=t.indexOf("_"+this.model.columns[s].foreignKeyValue)){i=this.model.columns[s];break}if(this.model.columns[s].field==t){i=this.model.columns[s];break}}if(null==i)return;if(this._currentFilterColumn=i,this._$curFieldName=i.field,this._currentFilterColumn!=this._oldFilterColumn&&(this.filterValueOldLength=0),this._currentFilterbarValue=n.val().toLowerCase()==this.localizedLabels.True.toLowerCase()?"true":n.val().toLowerCase()==this.localizedLabels.False.toLowerCase()?"false":n.val(),this.filterValueCurrentLength=this._currentFilterbarValue.length,(0==this.filterValueCurrentLength&&0==this.filterValueOldLength||this._currentFilterbarValue==this.OldfilterValue)&&this._currentFilterColumn==this._oldFilterColumn&&!this.model.scrollSettings.enableVirtualization)return void this._showFilterMsg();if(this._skipFilterProcess=this._checkForSkipInput(),this._skipFilterProcess){if("string"!=this._currentFilterColumn.type)return this._skipFilterProcess=!1,void(this.model.scrollSettings.enableVirtualization||this._showFilterMsg());this.filterStatusMsg="Invalid Filter Data",this._showFilterMsg()}else this._processFilter(e)}},_renderResponsiveFilter:function(){for(var e,t=ej.buildTag("div#responsiveFilter.resFilterDiv","",{width:"100%",padding:"0px"}),i=$(window).height()+1,s=.08*i,l=(this.element.height()>i?$(window).width():$(window).width(),ej.buildTag("div.columnDiv","",{width:"100%"})),n=0;n<this.model.columns.length;n++)e=ej.buildTag("div.e-responsivefilterColDiv","",{width:"100%"},{"ej-MappingName":this.model.columns[n].field}),r=ej.buildTag("span",this.model.columns[n].headerText,{"margin-left":"4%"}),e.append(r),l.append(e);t.append(l),this.element.append(t);var o=this,a=(this.element.outerWidth(),ej.buildTag("div.e-resFilterDialogHeaderDiv","",{height:s})),r=ej.buildTag("div.labelRes","<span>Filter</span>"),d=ej.buildTag("div.e-resFilterleftIcon","",{"margin-top":"3%"}),h=ej.buildTag("span.e-icon e-responsiveFilterClear e-resIcon","",{"font-size":"23px"}),c=ej.buildTag("div.e-resFIlterRigthIcon","",{float:"right","margin-top":"3%"},{closeDialogue:"responsiveFilter",gridEle:!0}),u=ej.buildTag("span.e-icon e-responisveClose e-resIcon","",{"font-size":"23px"},{closeDialogue:"responsiveFilter",gridEle:!0});c.click(function(){$("#responsiveFilter").css("display","none"),o.element.css("display","block")}),d.click(function(){$("#responsiveFilter").find(".e-responsivefilterColDiv").find(".e-filternone").click()}),a.append(d.append(h)),a.append(r).append(c.append(u)),t.prepend(a),t.insertAfter(this.element),$(".resFilterDiv").on("keydown",$.proxy(this._responsiveDialogueKeyUp,this)),t.css("display","none"),$(".e-responsivefilterColDiv").on("click",$.proxy(this._mouseClickHandler,this))},_closeDivIcon:function(e){var t,i=$(e.target);ej.isNullOrUndefined(i.attr("closeDialogue"))||(t=$("#"+i.attr("closeDialogue")),ej.isNullOrUndefined(t.data("ejDialog"))?t.css("display","none"):t.ejDialog("close")),ej.isNullOrUndefined(i.attr("gridEle"))||this.element.css("display","block"),ej.isNullOrUndefined(i.attr("openDialogue"))||(this.model.enableResponsiveRow||-1!=i.attr("closeDialogue").indexOf("Custom")?(t=$("#"+i.attr("openDialogue")),ej.isNullOrUndefined(t.data("ejDialog"))?t.css("display","block"):t.ejDialog("open")):this.element.css("display","block"))},_setResponsiveFilterIcon:function(){var e,t=$("#responsiveFilter").find(".columnDiv"),i=this;for(t.find(".e-filtericon").remove(),e=0;e<this.model.filterSettings.filteredColumns.length;e++){var s=this.model.filterSettings.filteredColumns[e],l=t.find(".e-responsivefilterColDiv[ej-MappingName="+s.field+"]"),n=ej.buildTag("div.e-filtericon e-icon e-resIcon e-filterset e-filternone e-filterreset","",{float:"right",height:"22px",width:"21px","font-size":"20px","margin-right":"3%","margin-top":"2%"}),o=ej.buildTag("span.e-filtericon e-icon e-resIcon e-filterset e-filternone","",{},{colType:s.type});l.find(".e-filternone").remove(),l.append(n),o.click(function(e){var t=e.target;i._$colType=t.attr("colType"),i._fltrClrHandler(),t.remove()})}},_renderExcelFilter:function(){var e=0!=this.model.filterSettings.filteredColumns.length?this.model.filterSettings.filteredColumns[0].field:null,t={instance:this,showSortOptions:this.model.allowSorting,allowFormatFiltering:this.model.filterSettings.allowFormatFiltering,allowCaseSensitive:this.model.filterSettings.enableCaseSensitivity,maxFilterLimit:this.model.filterSettings.maxFilterChoices,interDeterminateState:this.model.filterSettings.enableInterDeterminateState,enableComplexBlankFilter:this.model.filterSettings.enableComplexBlankFilter,blankValue:this.model.filterSettings.blankValue,filterHandler:ej.proxy(this._filterHandler,this),initFilterCol:e,actionBegin:"actionBegin",actionComplete:"actionComplete"};this._excelFilter=new ej.excelFilter(t),$.extend(this._excelFilter,this.model.filterSettings)},_filterHandler:function(e){var t,i,s,l,n,o,a,r,d={};if(d.requestType="sorting"==e.action?e.action:"filtering",i=this.model.filterSettings.filteredColumns,"filtering"==e.action){for(t=ej.DataManager(this.model.filterSettings.filteredColumns),s=(new ej.Query).where("field",ej.FilterOperators.equal,e.fieldName),l=t.executeLocal(s),n=0;n<l.length;n++)-1!=(o=$.inArray(l[n],this.model.filterSettings.filteredColumns))&&this.model.filterSettings.filteredColumns.splice(o,1);ej.merge(this.model.filterSettings.filteredColumns,e.filterCollection),e.currentFilterCollection=e.filterCollection}else{if("clearfiltering"==e.action)return a=e.filterDetails,delete this._excelFilter._predicates[0][e.fieldName],void this.filterColumn(a.field,a.operator,a.value,a.predicate);if("sorting"==e.action)return r=e.sortDetails,ej.gridFeatures.sort&&this.sortColumn(r.field,r.direction),void this._excelFilter.closeXFDialog()}d.currentFilteringColumn=e.fieldName,d.predicated=e.ejpredicate,this._processBindings(d)&&(this.model.filterSettings.filteredColumns=i)},_renderFiltering:function(){var e,t,i,s,l,n,o,a,r=this.getHeaderTable(),d=ej.buildTag("tr.e-filterbar"),h=[];for((this.model.detailsTemplate||this.model.childGrid)&&d.append(ej.buildTag("th.e-filterbarcell e-mastercell")),l=0;l<this.model.columns.length;l++){var c=ej.buildTag("th.e-filterbarcell"),u=ej.buildTag("div.e-filterdiv"),m=ej.buildTag("span.e-cancel e-icon e-hide"),p=ej.isNullOrUndefined(this.model.columns[l].field)?this.model.columns[l].field:this.model.columns[l].field.replace(/[^a-z0-9|s_]/gi,""),g=ej.isNullOrUndefined(this.model.columns[l].foreignKeyValue)?p+"_filterBarcell":p+"_"+this.model.columns[l].foreignKeyValue+"_filterBarcell";if(0==this.model.columns[l].allowFiltering||ej.isNullOrUndefined(this.model.columns[l].filterBarTemplate)||ej.isNullOrUndefined(this.model.columns[l].field)?(u.addClass("e-fltrinputdiv"),p=this.model.columns[l].field,g=ej.isNullOrUndefined(this.model.columns[l].foreignKeyValue)?p+"_filterBarcell":p+"_"+this.model.columns[l].foreignKeyValue+"_filterBarcell",s=ej.buildTag("input.e-ejinputtext e-filtertext","",{},{title:this.model.columns[l].headerText+this.localizedLabels.FilterbarTitle,type:"search",id:g})):(c.addClass("e-fltrtemp"),u.addClass("e-fltrtempdiv"),ej.isNullOrUndefined(this.model.columns[l].filterBarTemplate.create)?s=ej.buildTag("input e-filtertext","",{},{title:this.model.columns[l].headerText+this.localizedLabels.FilterbarTitle,id:g,class:"e-filterUi_input e-filtertext e-fltrTemp"}):(e={columnIndex:l,column:this.model.columns[l]},"string"==typeof(t=this.model.columns[l].filterBarTemplate.create)&&(t=ej.util.getObject(t,window)),s=t(e),s=$(s).attr({title:this.model.columns[l].headerText+this.localizedLabels.FilterbarTitle,id:g,class:"e-filterUi_input e-filtertext e-fltrTemp"}))),this.model.filterSettings.filteredColumns.length>0&&"filterbar"==this.model.filterSettings.filterType&&-1==$.inArray(this.model.columns[l].field,h))for(n=0;n<this.model.filterSettings.filteredColumns.length;n++)this.getColumnIndexByField(this.model.filterSettings.filteredColumns[n].field)==l&&("greaterthan"==this.model.filterSettings.filteredColumns[n].operator?s.val(">"+this.model.filterSettings.filteredColumns[n].value):"lessthan"==this.model.filterSettings.filteredColumns[n].operator?s.val("<"+this.model.filterSettings.filteredColumns[n].value):"notequal"==this.model.filterSettings.filteredColumns[n].operator?s.val("!="+this.model.filterSettings.filteredColumns[n].value):s.val(this.model.filterSettings.filteredColumns[n].value),-1==$.inArray(this.model.filterSettings.filteredColumns[n].field,h)&&h.push(this.model.filterSettings.filteredColumns[n].field));(!1===this.model.columns[l].allowFiltering||""==this.model.columns[l].field||ej.isNullOrUndefined(this.model.columns[l].field))&&(s.attr("disabled",!0).addClass("e-disable"),this._disabledFilterableColumns.push(this.model.columns[l].headerText)),!1===this.model.columns[l].visible&&c.addClass("e-hide"),ej.isNullOrUndefined(this.model.columns[l].cssClass)||c.addClass(this.model.columns[l].cssClass),0==this.model.columns[l].allowFiltering||ej.isNullOrUndefined(this.model.columns[l].filterBarTemplate)?u.append(s).append(m):u.append(s),d.append(c.append(u)),l==this.model.scrollSettings.frozenColumns-1&&(i=d.clone(),r.find("thead").first().append(i),d.empty())}if(r.find("thead").last().append(d),"msie"==ej.browserInfo().name&&ej.browserInfo().version<10)for(o=r.find("thead").find(".e-ejinputtext.e-filtertext"),a=0;a<o.length;a++)ej.ieClearRemover(o[a]);this.setGridFilterBar(d)},_renderFilterBarTemplate:function(){for(var e,t,i,s=!1,l=0;l<this.model.columns.length;l++)0==this.model.columns[l].allowFiltering||ej.isNullOrUndefined(this.model.columns[l].filterBarTemplate)||ej.isNullOrUndefined(this.model.columns[l].field)||("string"==typeof(t=this.model.columns[l].filterBarTemplate.read)&&(t=ej.util.getObject(t,window)),"string"==typeof(e={element:this.getHeaderTable().find(".e-filterbar").find(".e-fltrtemp").find("#"+this.model.columns[l].field.replace(/[^a-z0-9|s_]/gi,"")+"_filterBarcell"),columIndex:l,column:this.model.columns[l]}).column.filterBarTemplate.read&&(e.column.filterBarTemplate.read=t),"string"==typeof(i=this.model.columns[l].filterBarTemplate.write)&&(i=ej.util.getObject(i,window)),i.call(this,e),s=!0);s&&(this.model.filterSettings.filterBarMode=ej.Grid.FilterBarMode.OnEnter)},_closeFilterDlg:function(){ej.isNullOrUndefined($("#"+this._id+"_"+this._$colType+"Dlg").data("ejDialog"))?$("#"+this._id+"_"+this._$colType+"Dlg").css("display","none"):$("#"+this._id+"_"+this._$colType+"Dlg").ejDialog("close"),this._$fDlgIsOpen=!1,this._$menuDlgIsOpen=!1},_filterBarClose:function(e){var t,i=$(e.target);i.closest(".e-grid").attr("id")===this._id&&("click"==e.type&&i.hasClass("e-cancel")&&((t=i.prev()).focus().val(""),t.trigger("keyup"),e.stopPropagation()),"focusin"==e.type&&i.hasClass("e-filtertext")&&(i=$(e.target).next(),this.getFilterBar().find(".e-cancel").addClass("e-hide"),i.removeClass("e-hide")))},_processFilter:function(e){this._alreadyFilterProcessed?(this._stopTimer(),this._startTimer(e)):(this._alreadyFilterProcessed=!0,this._startTimer(e))},_startTimer:function(e){var t=this,i=13==e.keyCode?0:t.model.filterSettings.immediateModeDelay;this._timer=window.setTimeout(function(){t._onTimerTick()},i)},_stopTimer:function(){null!=this._timer&&window.clearTimeout(this._timer)},_onTimerTick:function(){var e,t,i;this.OldfilterValue=this._currentFilterbarValue,this._oldFilterColumn=this._currentFilterColumn,this.filterValueOldLength=this.filterValueCurrentLength,this._findPredicate();var s="string"!=this._currentFilterColumn.type,l=$.extend([],this.model.filterSettings.filteredColumns);for(e=0;e<l.length;e++)""==this.getHeaderContent().find(".e-filterbar #"+l[e].field+"_filterBarcell").val()&&(-1!=$.inArray(this.model.filterSettings.filteredColumns[e],this.filterColumnCollection)&&this.filterColumnCollection.splice(e,1),this.model.filterSettings.filteredColumns.splice(e,1));if("date"==this._currentFilterColumn.type||"datetime"==this._currentFilterColumn.type)for(t=0;t<this.model.filterSettings.filteredColumns.length;t++)this.model.filterSettings.filteredColumns[t].isComplex&&(i=this.model.filterSettings.filteredColumns[t].predicates,1==this.model.filterSettings.filteredColumns.length?this.model.filterSettings.filteredColumns=i:(this.model.filterSettings.filteredColumns[t]=i[0],this.model.filterSettings.filteredColumns.push(i[1])));this._skipFilterProcess?this.filterStatusMsg="Invalid Filter Data":this._currentFilterColumn.foreignKeyValue&&this._currentFilterColumn.dataSource&&""!=this._currentFilterbarValue?this._fltrForeignKeyValue(this._operator,this._currentFilterbarValue,s,this._currentFilterColumn.dataSource,this._currentFilterColumn.foreignKeyField,this._currentFilterColumn.foreignKeyValue,this._currentFilterColumn.type):ej.isNullOrUndefined(this._currentFilterColumn.filterBarTemplate)&&this.filterColumn(this._currentFilterColumn.field,this._operator,this._currentFilterbarValue,this._predicate,s),!this.model.scrollSettings.enableVirtualization&&ej.isNullOrUndefined(this._currentFilterColumn.filterBarTemplate)&&this._showFilterMsg(),this._stopTimer()},_findPredicate:function(){var e,t=this._currentFilterbarValue.replace(/ && /i," and ").replace(" || "," or "),i=t.split(" ");if(this._predicate="and",0!=i.length)if($.isFunction(ej.Predicate[i[1]])){this._skipFilterProcess=!1,this._predicate=i[1];var s=t.split(" "+i[1]+" "),l=[],n=[];for(e=0;e<s.length;e++)this._validateFilterValue(s[e]),l.push(this._operator),"number"==this._currentFilterColumn.type?n.push(this._currentFilterbarValue):"string"==this._currentFilterColumn.type&&n.push(s[e]);this._currentFilterbarValue=n,this._operator=l}else this._validateFilterValue($.trim(this._currentFilterbarValue));else this._validateFilterValue($.trim(this._currentFilterbarValue))},_validateFilterValue:function(e){var t,i,s,l;switch(this._currentFilterColumn.type){case"number":for(this._operator=ej.FilterOperators.equal,t=[">","<","=","!"],i=0;i<e.length&&-1==jQuery.inArray(e[i],t);i++);i!=e.length&&(this._getOperator(e.substring(i)),0!=i&&(this._currentFilterbarValue=e.substring(0,i))),this._currentFilterbarValue=""!=this._currentFilterbarValue&&e.length>=1?ej.parseFloat(this._currentFilterbarValue,this.model.locale):e.length>1?ej.parseFloat(e,this.model.locale):e;break;case"date":case"datetime":this._operator=ej.FilterOperators.equal,this._getOperator(e),s=ej.isNullOrUndefined(this._currentFilterColumn.format)?"date"==this._currentFilterColumn.type?ej.preferredCulture().calendar.patterns.d:ej.preferredCulture().calendar.patterns.f:this._currentFilterColumn.format.replace("{0:","").replace("}",""),""!=this._currentFilterbarValue&&(l=ej.parseDate(this._currentFilterbarValue,s,this.model.locale),ej.isNullOrUndefined(l)?this.filterStatusMsg="Invalid Filter Data":this._currentFilterbarValue=ej.parseDate(this._currentFilterbarValue,s,this.model.locale));break;case"string":"*"==e.charAt(0)?(this._currentFilterbarValue=this._currentFilterbarValue.slice(1),this._operator=ej.FilterOperators.startsWith):"%"==e.charAt(e.length-1)?(this._currentFilterbarValue=this._currentFilterbarValue.slice(0,-1),this._operator=ej.FilterOperators.startsWith):"%"==e.charAt(0)?(this._currentFilterbarValue=this._currentFilterbarValue.slice(1),this._operator=ej.FilterOperators.endsWith):this._operator=ej.FilterOperators.startsWith;break;case"boolean":case"checkbox":"true"==this._currentFilterbarValue.toLowerCase()||"1"==this._currentFilterbarValue?this._currentFilterbarValue=!0:("false"==this._currentFilterbarValue.toLowerCase()||"0"==this._currentFilterbarValue)&&(this._currentFilterbarValue=!1),this._operator=ej.FilterOperators.equal;break;default:this._operator=ej.FilterOperators.equal}},_getOperator:function(e){"="==e.charAt(0)&&(this._operator=ej.FilterOperators.equal,this._currentFilterbarValue=e.substring(1)),(ej.data.operatorSymbols[e.charAt(0)]!==undefined||ej.data.operatorSymbols[e.slice(0,2)]!==undefined)&&(this._operator=ej.data.operatorSymbols[e.charAt(0)],this._currentFilterbarValue=e.substring(1),this._operator===undefined&&(this._operator=ej.data.operatorSymbols[e.slice(0,2)],this._currentFilterbarValue=e.substring(2))),(this._operator==ej.FilterOperators.lessThan||this._operator==ej.FilterOperators.greaterThan)&&"="==this._currentFilterbarValue.charAt(0)&&(this._operator=this._operator+"orequal",this._currentFilterbarValue=this._currentFilterbarValue.substring(1))},_checkForSkipInput:function(){var e,t,i=!1;if("number"==this._currentFilterColumn.type&&(ej.data.operatorSymbols[this._currentFilterbarValue]!==undefined||-1!=$.inArray(this._currentFilterbarValue,["="," ","!"]))&&(i=!0),"string"==this._currentFilterColumn.type)for(e=[">","<","=","!"],t=0;t<this._currentFilterbarValue.length;t++)-1!=$.inArray(this._currentFilterbarValue[t],e)&&(i=!0);return i},_showFilterMsg:function(){var e,t,i,s,l=$.inArray(this._currentFilterColumn,this.filterColumnCollection);if(""!==this._currentFilterbarValue&&-1==l&&this.filterColumnCollection.push(this._currentFilterColumn),""===this._currentFilterbarValue&&-1!=l&&this.filterColumnCollection.splice(l,1),(!this._skipFilterProcess||this.filterColumnCollection.length>0)&&"Invalid Filter Data"!=this.filterStatusMsg)for(l=0;l<this.filterColumnCollection.length;l++)i=this.filterColumnCollection[l].headerText,this.filterColumnCollection[l].disableHtmlEncode&&(i=this._htmlEscape(i)),-1!=this.filterColumnCollection[l].field.indexOf(".")?(t=this.filterColumnCollection[l].field.split(".").join("\\."),e=$("#"+t+"_filterBarcell").val()):(s=ej.isNullOrUndefined(this.filterColumnCollection[l].foreignKeyValue)?this.filterColumnCollection[l].field+"_filterBarcell":this.filterColumnCollection[l].field+"_"+this.filterColumnCollection[l].foreignKeyValue+"_filterBarcell",e="boolean"==this._currentFilterColumn.type&&!ej.isNullOrUndefined(this._currentFilterColumn.filterBarTemplate)&&this.element.find("#"+s).hasClass("e-checkbox e-js")?this.element.find("#"+s).parent().attr("aria-checked"):this.element.find("#"+s).val()),""!=e&&(l>0&&""!=this.filterStatusMsg&&(this.filterStatusMsg+=" && "),this.filterStatusMsg+=i+": "+e);this.model.allowPaging?this.getPager().ejPager("model.externalMessage",this.filterStatusMsg):(this.model.scrollSettings.allowVirtualScrolling?this.$pagerStatusBarDiv.find(".e-pagerfiltermsg").html(this.filterStatusMsg).css("display","block"):this.$pagerStatusBarDiv.find("div").html(this.filterStatusMsg),this.filterStatusMsg.length?this.$pagerStatusBarDiv.css("display","block"):this.model.scrollSettings.allowVirtualScrolling?this.$pagerStatusBarDiv.find(".e-pagerfiltermsg").hide():this.$pagerStatusBarDiv.hide()),"Invalid Filter Data"==this.filterStatusMsg&&(l=$.inArray(this._currentFilterColumn,this.filterColumnCollection),this.filterColumnCollection.splice(l,1)),this.filterStatusMsg=""},_renderFilterDialogs:function(){var e,t,i,s,l,n;$.each(this.model.columns,ej.proxy(function(o,a){"string"!=a.type||e&&ej.isNullOrUndefined(a.filterType)?"guid"!=a.type||n&&ej.isNullOrUndefined(a.filterType)?"number"!=a.type||t&&ej.isNullOrUndefined(a.filterType)?"date"!=a.type||s&&ej.isNullOrUndefined(a.filterType)?"datetime"!=a.type||l&&ej.isNullOrUndefined(a.filterType)?"boolean"!=a.type||i&&ej.isNullOrUndefined(a.filterType)||(ej.isNullOrUndefined(a.filterType)&&(i=!0),this._renderFilters(a)):(ej.isNullOrUndefined(a.filterType)&&(l=!0),this._renderFilters(a)):(ej.isNullOrUndefined(a.filterType)&&(s=!0),this._renderFilters(a)):(ej.isNullOrUndefined(a.filterType)&&(t=!0),this._renderFilters(a)):(ej.isNullOrUndefined(a.filterType)&&(n=!0),this._renderFilters(a)):(ej.isNullOrUndefined(a.filterType)&&(e=!0),this._renderFilters(a))},this))},_renderFilters:function(col){this._isExcelFilter&&"menu"!=col.filterType||"excel"==col.filterType?(ej.isNullOrUndefined(this._excelFilter)&&(this._renderExcelFilter(),this._excelFilterRendered=!0),this._excelFilter.renderDialog(col.type)):eval(this["_render"+col.type.substring(0,1).toUpperCase()+col.type.substring(1)+"Dialog"](col))},_renderStringDialog:function(){var e,t=this._id+"_stringDlg";$("#"+t).length>0||((e=ej.buildTag("div#"+t+".e-dlgcontainer e-filterDialoge")).appendTo("body"),this._renderDlgContent(e,"string"),this.model.isResponsive&&this._mediaStatus||this._renderFDialog(t))},_renderBooleanDialog:function(){var e,t=this._id+"_booleanDlg";$("#"+t).length>0||((e=ej.buildTag("div#"+t+".e-dlgcontainer e-filterDialoge")).appendTo("body"),this._renderDlgContent(e,"boolean"),this.model.isResponsive&&this._mediaStatus||(this._renderFDialog(t),this.model.filterSettings.showPredicate?$("#"+t).ejDialog({minHeight:136,width:"100%"}):$("#"+t).ejDialog({minHeight:90,width:"100%"})))},_renderGuidDialog:function(){var e,t=this._id+"_guidDlg";$("#"+t).length>0||((e=ej.buildTag("div#"+t+".e-dlgcontainer e-filterDialoge")).appendTo("body"),this._renderDlgContent(e,"guid"),this.model.isResponsive&&this._mediaStatus||this._renderFDialog(t))},_renderNumberDialog:function(){var e,t=this._id+"_numberDlg";$("#"+t).length>0||((e=ej.buildTag("div#"+t+".e-dlgcontainer e-filterDialoge")).appendTo("body"),this._renderDlgContent(e,"number"),this.model.isResponsive&&this._mediaStatus||this._renderFDialog(t))},_renderDateDialog:function(e){var t,i=this._id+"_dateDlg";$("#"+i).length>0||((t=ej.buildTag("div#"+i+".e-dlgcontainer e-filterDialoge")).appendTo("body"),this._renderDlgContent(t,"date",e),this.model.isResponsive&&this._mediaStatus||this._renderFDialog(i))},_renderDatetimeDialog:function(e){var t,i=this._id+"_datetimeDlg";$("#"+i).length>0||((t=ej.buildTag("div#"+i+".e-dlgcontainer e-filterDialoge")).appendTo("body"),this._renderDlgContent(t,"datetime",e),this.model.isResponsive&&this._mediaStatus||this._renderFDialog(i))},_renderFDialog:function(e){$("#"+e).ejDialog({showOnInit:!1,enableRTL:this.model.enableRTL,cssClass:this.model.cssClass,showHeader:!1,width:260,enableResize:!1,allowKeyboardNavigation:!1,content:"#"+this._id})},_closeFDialog:function(){(this._isExcelFilter||this._excelFilterRendered)&&this._excelFilter.closeXFDialog(),this._$menuDlgIsOpen&&this._closeFilterDlg()},_renderDlgContent:function(e,t,i){e.addClass("e-grid");var s,l=ej.buildTag("div.e-predicate"),n=ej.buildTag("div.e-operator"),o=ej.buildTag("div.e-value"),a=this.localizedLabels.StringMenuOptions,r=this.localizedLabels.NumberMenuOptions,d=ej.buildTag("input#"+this._id+t+"_ddinput",{},{},{type:"text"}),h=ej.buildTag("div#"+this._id+t+"_dropdown"),c=ej.buildTag("ul"),u=ej.buildTag("input",{},{},{type:"radio",name:this._id+"_predicate"+t,value:"or"}),m=ej.buildTag("input",{},{},{type:"radio",name:this._id+"_predicate"+t,value:"and",checked:"checked"});l.append(m).append(ej.buildTag("span.e-caption").html(this.localizedLabels.PredicateAnd)).append(u).append(ej.buildTag("span.e-caption").html(this.localizedLabels.PredicateOr)),this.model.filterSettings.showPredicate||l.hide(),"string"==t&&(s=ej.buildTag("input",{},{},{type:"checkbox"}),l.append(s).append(ej.buildTag("span.e-caption").html(this.localizedLabels.MatchCase)),$.each(a,function(e,t){c.append(ej.buildTag("li",{},{},{value:t.value}).html(t.text))})),("number"==t||"date"==t||"datetime"==t||"guid"==t)&&("guid"==t&&(r=r.slice(4,6)),$.each(r,function(e,t){c.append(ej.buildTag("li",{},{},{value:t.value}).html(t.text))})),"boolean"!=t&&(h.append(c),n.append(d),n.append(h));var p=ej.buildTag("input",{},{},{type:"text"}),g=ej.buildTag("input",{},{},{type:"checkbox"}),f=this.model.enableResponsiveRow?"OkButton":"Filter",_=this.model.enableResponsiveRow?"CancelButton":"Clear",v=ej.buildTag("input.e-filter",{},{},{type:"button",value:this.localizedLabels[f]}),b=ej.buildTag("input.e-clear",{},{},{type:"button",value:this.localizedLabels[_]});o.append(ej.buildTag("span.e-caption").html(this.localizedLabels.FilterMenuCaption+" : ")),e.append(l),"boolean"==t?(o.find("span.e-caption").css("top","1px"),o.append(g)):(o.append(ej.buildTag("br")).append(p),e.append(n)),e.append(o),e.append(ej.buildTag("div.e-dlgBtns").append(v).append(b)),"boolean"!=t&&d.ejDropDownList({cssClass:this.model.cssClass,enableRTL:this.model.enableRTL,targetID:this._id+t+"_dropdown",width:"100%",height:"26px",selectedItemIndex:0}),u.ejRadioButton({cssClass:this.model.cssClass,enableRTL:this.model.enableRTL}),m.ejRadioButton({cssClass:this.model.cssClass,enableRTL:this.model.enableRTL,checked:!0}),s&&s.ejCheckBox({cssClass:this.model.cssClass,enableRTL:this.model.enableRTL}),e.css("display","none"),this._createButton("filter",v),this._createButton("clear",b),"number"==t?p.ejNumericTextbox({cssClass:this.model.cssClass,locale:this.model.locale,enableRTL:this.model.enableRTL,value:0,showSpinButton:!1,height:"26px",decimalPlaces:2,width:"100%"}):"guid"==t?p.css({height:"26px",width:"100%"}):"date"==t?(p.attr("id",this._id+"_dpDate"),p.ejDatePicker({cssClass:this.model.cssClass,enableRTL:this.model.enableRTL,enableStrictMode:!0,width:"100%",watermarkText:this.localizedLabels.DatePickerWaterMark,locale:this.model.locale}),ej.isNullOrUndefined(i.format)||p.ejDatePicker({dateFormat:i.format.replace(/{0:|}/g,function(){return""})})):"datetime"==t?(p.attr("id",this._id+"_dpDateTime"),p.ejDateTimePicker({cssClass:this.model.cssClass,enableRTL:this.model.enableRTL,enableStrictMode:!0,width:"100%",locale:this.model.locale}),ej.isNullOrUndefined(i.format)||p.ejDateTimePicker({dateTimeFormat:i.format.replace(/{0:|}/g,function(){return""})})):"boolean"==t?g.ejCheckBox({cssClass:this.model.cssClass,enableRTL:this.model.enableRTL}):"string"==t&&(p.attr("id",this._id+"_acString"),p.ejAutocomplete({cssClass:this.model.cssClass,enableRTL:this.model.enableRTL,dataSource:this._dataSource(),width:"100%",height:26,enableDistinct:!0,focusIn:function(){var e=this.element.closest(".e-dialog").find(".e-dropdownlist"),t=this.element.closest(".e-dialog").find(".e-checkbox").prop("checked");this.model.filterType=e.ejDropDownList("model.value"),this.model.caseSensitiveSearch=t},open:function(){var e=!this.element.closest(".e-dialog").ejDialog("isOpened");this.suggestionList.css({visibility:e?"hidden":"visible"})}}))},_createButton:function(e,t){var i="filter"==e?ej.proxy(this._fltrBtnHandler,this):ej.proxy(this._fltrClrHandler,this);t.ejButton({cssClass:this.model.cssClass,enableRTL:this.model.enableRTL,click:i})},_getIdField:function(){var e;return $.each(this.model.columns,function(t,i){if(i.key)return e=i.field,!1}),e},_filterCompleteAction:function(){var e;if(this.model.allowPaging&&this._refreshGridPager(),"menu"==this.model.filterSettings.filterType||this._isExcelFilter){this._closeFDialog();var t=this.getColumnByField(this._$curFieldName),i=$.inArray(t,this.model.columns),s=this,l=!1;$.each(this.model.filterSettings.filteredColumns,function(e,t){return t.field==s._$curFieldName||1==t.isComplex&&t.predicates[0].field==s._$curFieldName?(l=!0,!1):void 0}),e=this.getHeaderTable().find("thead").find(".e-headercell").not(".e-detailheadercell,.e-stackedHeaderCell").eq(i).find(".e-filtericon"),l?e.addClass("e-filteredicon e-filternone"):e.removeClass("e-filteredicon e-filternone")}},_refreshFilterIcon:function(){var e,t,i,s,l,n;if(this.model.filterSettings.filteredColumns.length)for(e=ej.distinct(this.model.filterSettings.filteredColumns,"field",!0),t=this.getHeaderTable().find("thead").find(".e-headercell").not(".e-detailheadercell"),this.model.showStackedHeader&&(t=t.not(".e-stackedHeaderCell")),this.model.allowReordering&&t.find(".e-filtericon").removeClass("e-filteredicon e-filternone"),l=0,n=e.length;l<n;l++)s=e[l],i=this.getColumnIndexByField(!0===s.isComplex?s.predicates[0].field:s.field),t.eq(i).find(".e-filtericon").addClass("e-filteredicon e-filternone")},_setFilterFieldValues:function(e){var t,i="",s=this,l=-1;$.each(this.model.filterSettings.filteredColumns,function(e,t){t.field==s._$curFieldName&&(l=e)}),-1==l&&"boolean"!=this._$colType&&("string"==this._$colType&&$(".e-predicate input.e-js[type='checkbox']").ejCheckBox({checked:!1}),$(".e-predicate input[name ="+this._id+"_predicate"+this._$colType+"]:first").ejRadioButton({checked:!0}),$("#"+this._id+this._$colType+"_ddinput").ejDropDownList({selectedItemIndex:0,change:function(){this.element.closest(".e-dialog").find(".e-autocomplete").val(i)}})),t=$(this.model.filterSettings.filteredColumns).map(function(){return this.field}).get(),(this._$curFieldName!=this._$prevFieldName||-1!=$.inArray(this._$curFieldName,t))&&($.each(this.model.filterSettings.filteredColumns,function(e,t){if(t.field==s._$curFieldName){for(var l="number"==s._$colType||"date"==s._$colType||"datetime"==s._$colType?"Number":"String",n=s.localizedLabels[l+"MenuOptions"],o=ej.isNullOrUndefined(t.actualOperator)?t.operator:t.actualOperator,a=0;a<n.length&&n[a].value.toLowerCase()!=o;a++);return"string"==s._$colType&&$(".e-predicate input.e-js[type='checkbox']").ejCheckBox({checked:t.matchcase}),$("input[value="+t.predicate+"]").ejRadioButton({checked:!0}),$("#"+s._id+s._$colType+"_ddinput").ejDropDownList({selectedItemIndex:a}),i=null!=t.actualFilterValue?t.actualFilterValue:t.value,!1}}),"boolean"==this._$colType?i&&""!=i?$(e).find(".e-value input:checkbox.e-js").ejCheckBox({checked:!0}):$(e).find(".e-value input:checkbox.e-js").ejCheckBox({checked:!1}):"date"==this._$colType||"datetime"==this._$colType?$(e).find(".e-value .e-datepicker")["date"==this._$colType?"ejDatePicker":"ejDateTimePicker"]("model.value",i):"number"==this._$colType?$(e).find(".e-value .e-numerictextbox").ejNumericTextbox("model.value",i):$(e).find(".e-value input").val(i))},_fltrBtnHandler:function(){var e;this.model.isResponsive&&this._mediaStatus&&this._responsiveFilterClose();var t,i,s=this._id+"_"+this._$colType+"Dlg",l=$("#"+s),n=l.find(".e-value input"),o=n.val(),a=undefined;"number"==this._$colType&&(n=n.filter(".e-numerictextbox"),o=parseFloat(n.ejNumericTextbox("getValue")),a=!0),"string"==this._$colType&&(a=l.find(".e-predicate input[type='checkbox']").is(":checked")),("date"==this._$colType||"datetime"==this._$colType)&&(o=ej.parseDate(o,this._$colFormat,this.model.locale),a=!0),"boolean"==this._$colType?(o=null!=n.ejCheckBox("model.checked")&&n.ejCheckBox("model.checked"),t="equal"):t=$("#"+this._id+this._$colType+"_ddinput").ejDropDownList("getSelectedValue").toLowerCase(),i=l.find(".e-predicate input[type='radio']:checked"),this._$colForeignKeyValue&&this._$colDropdownData?this._fltrForeignKeyValue(t,o,a,this._$colDropdownData,this._$colForeignKeyField,this._$colForeignKeyValue,this._$colType,i):this.filterColumn(this._$curFieldName,t,o,l.find(".e-predicate input[type='radio']:checked").attr("value"),a),this.model.isResponsive&&(l.css("display","none"),this._setResponsiveFilterIcon(),this.element.css("display","block"),!this.model.allowScrolling||this.model.enableResponsiveRow&&this.model.minWidth||((e={}).requestType="refresh",this._refreshScroller(e)))},_fltrClrHandler:function(){this.clearFiltering(this._$curFieldName)},_fltrForeignKeyValue:function(e,t,s,l,n,o,a,r){var d,h;ej.isNullOrUndefined(s)&&(s=!0);var c,u,m,p,g=[],f=(!r||r.css("display"),r?r.attr("value"):"and"),_=l,v={mapFieldName:o,fieldName:n,operator:e,value:t,predicate:r,matchcase:s},b={requestType:ej.Grid.Actions.Filtering,action:"fetchingForeignKeyField",currentFilteringColumn:n,currentFilterObject:v};this._trigger("actionBegin",b),l instanceof ej.DataManager||(_=new ej.DataManager(l)),"date"==a?(d=new Date(t.setDate(t.getDate()-1)),h=new Date(t.setDate(t.getDate()+2)),c="equal"==e||"notequal"==e?"equal"==e?(new ej.Query).where(ej.Predicate(v.mapFieldName,">",d,!v.matchcase).and(v.mapFieldName,"<",h,!v.matchcase)).select(v.fieldName):(new ej.Query).where(ej.Predicate(v.mapFieldName,"<=",d,!v.matchcase).or(v.mapFieldName,">=",h,!v.matchcase)).select(v.fieldName):(new ej.Query).where(v.mapFieldName,v.operator,v.value,!v.matchcase).select(v.fieldName)):c=(new ej.Query).where(v.mapFieldName,v.operator,v.value,!v.matchcase).select(v.fieldName),u={actualFilterValue:v.value,actualOperator:v.operator,ejpredicate:undefined,predicate:f},_.executeQuery(c).done(ej.proxy(function(e){for(p=e.result,requireProc=$.isPlainObject(p[0]),preds=[],merge=!1,p=requireProc?ej.distinct(p,n,!1):p,field=this._$curFieldName,m=new ej.Predicate(field,"equal",p[0],s),i=1,vlen=p.length;i<vlen;i++)preds.push(new ej.Predicate(field,"equal",p[i],s)),merge=!0;merge&&(preds.unshift(m),m=ej.Predicate.or(preds)),$.extend(u,{ejpredicate:$.extend(m,{field:field},u)}),this.filterColumn(v.fieldName,v.operator,v.value,g,v.matchcase,u)},this))},_setDateFilters:function(e,t){var i,s,l,n,o;if(t||ej.isNullOrUndefined(this.getColumnByField(e.field).format)?(i=new Date(e.value.setSeconds(e.value.getSeconds()-1)),s=new Date(e.value.setSeconds(e.value.getSeconds()+2))):-1!=(l=this.getColumnByField(e.field).format).indexOf("s")?(i=new Date(e.value.setSeconds(e.value.getSeconds()-1)),s=new Date(e.value.setSeconds(e.value.getSeconds()+2))):-1!=l.indexOf("m")?(i=new Date(e.value.setMinutes(e.value.getMinutes()-1)),s=new Date(e.value.setMinutes(e.value.getMinutes()+2))):-1!=l.indexOf("h")?(i=new Date(e.value.setHours(e.value.getHours()-1)),s=new Date(e.value.setHours(e.value.getHours()+2))):(i=new Date(e.value.setDate(e.value.getDate()-1)),s=new Date(e.value.setDate(e.value.getDate()+2))),n=$.extend({},e),o=$.extend({},e),n.value=i,o.value=s,"equal"==e.operator?(n.operator="greaterthan",n.predicate="and",o.operator="lessthan",o.predicate="and"):(n.operator="lessthanorequal",n.predicate="or",o.operator="greaterthanorequal",o.predicate="or"),pred=ej.Predicate(n.field,n.operator,n.value,!1),predicate=pred[o.predicate](ej.Predicate(o.field,o.operator,o.value,!1)),e.value=new Date(e.value.setSeconds(o.value.getSeconds()-1)),t)return predicate;this.model.filterSettings.filteredColumns.push($.extend(predicate,{field:e.field,operator:e.operator}))}}}(jQuery,Syncfusion),function(e,t,i){t.gridFeatures=t.gridFeatures||{},t.gridFeatures.group={_renderGroupDropArea:function(){var e,i;return t.isNullOrUndefined(this.model.groupSettings.enableDropAreaAnimation)||(this.model.groupSettings.enableDropAreaAutoSizing=this.model.groupSettings.enableDropAreaAnimation),e=this.model.groupSettings.enableDropAreaAutoSizing?"":this.localizedLabels.GroupDropArea,this.model.groupSettings.showDropArea?(i=t.buildTag("div.e-groupdroparea",e),this.model.groupSettings.enableDropAreaAutoSizing&&i.append(t.buildTag("div.e-animatebutton e-icon").addClass(this.model.groupSettings.enableDropAreaAutoSizing?"e-animatebuttondown e-gdownarrow":"e-animatebuttonup e-guparrow")),i):void 0},_getColGroup:function(t){var s,l,n,o=this.getRsc("helpers",t);return s=1==o.model.groupSettings.groupedColumns.length?this.data.items.level===i?0:this.data.items.level-1:this.data.items.level===i?o.model.groupSettings.groupedColumns.length:this.data.items.level-1,l=e(document.createElement("div")),o._isCaptionSummary?n=o._getCaptionColGroup(s):(n=o._getMetaColGroup(),s!=o.model.groupSettings.groupedColumns.length&&o.model.groupSettings.groupedColumns.length>1&&n.prepend(o._getIndentCol())),l.html(n),l.html()},_colSpanAdjust:function(s,l,n){var o,a,r,d,h,c,u,m;if(t.isNullOrUndefined(s)?(o=this,a=n):(o=this.getRsc("helpers",s),a=this),1==o.model.groupSettings.groupedColumns.length?(r=a.data.items.level===i?1:a.data.items.level-1,"groupcaption"==l&&(o._currentJsonData=o._currentJsonData.concat(a.data.items))):(r=a.data.items.level===i?o.model.groupSettings.groupedColumns.length:a.data.items.level-1,"groupcaption"==l&&a.data.items.level===i&&(o._currentJsonData=o._currentJsonData.concat(a.data.items))),o._isGrouping=!0,d=o.model.groupSettings.showGroupedColumn?0:o.model.groupSettings.groupedColumns.length,h=0,e.each(o._hiddenColumnsField,function(t,i){-1!=e.inArray(i,o.model.groupSettings.groupedColumns)&&(h+=1,o.model.groupSettings.showGroupedColumn&&(d+=1))}),c=o.model.columns.length+o.model.groupSettings.groupedColumns.length-r-o._hiddenColumnsField.length-d+h,c=null!=o.model.detailsTemplate||null!=o.model.childGrid?c+1:c,o._isCaptionSummary&&"groupcaption"==l){var p=[],g=o._captionSummary(),f=0,_=[];for(e.each(g[0].summaryColumns,function(t,i){-1!=e.inArray(i.displayColumn,o._hiddenColumnsField)&&0,_.push(o.getColumnIndexByField(i.displayColumn)),p.push(o.getColumnIndexByField(i.displayColumn)+o.model.groupSettings.groupedColumns.length-r)}),u=t.min(_),m=0;m<o._hiddenColumnsField.length;m++)u>(t.isNullOrUndefined(o.getColumnByField(o._hiddenColumnsField[m]))?o.getColumnIndexByHeaderText(o._hiddenColumnsField[m],t.isNullOrUndefined(o.getColumnByField(o._hiddenColumnsField[m]))):o.getColumnIndexByField(o._hiddenColumnsField[m]))&&f++;p.length>0&&(c=t.min(p)),c-=f,c=null!=o.model.detailsTemplate||null!=o.model.childGrid?c+1:c}return c},_captionEncode:function(e){return this.getRsc("helpers",e).getColumnByField(this.data.field).disableHtmlEncode},_captionFormat:function(i){var s,l=this.getRsc("helpers",i),n=e.extend({},this.data),o=l.getColumnByField(n.field);return s=o.foreignKeyValue&&o.dataSource?l._foreignKeyBinding(l.getColumnIndexByField(n.field),n.key,l._id):n.key,t.isNullOrUndefined(o.format)||-1!=o.format.indexOf("{0:")||(n[n.field]=n.key,l.data=n),n.key=o.format?l.formatting(o.format,s,l.model.locale):s,n.headerText=o.headerText,e.render[l._id+"_CaptionTemplate"](n)},_getCaptionColGroup:function(e){var t,i=this.getHeaderTable().find("colgroup").clone(),s=i.find("col").length-this.model.columns.length;if((null!=this.model.detailsTemplate||null!=this.model.childGrid)&&(s-=1),i.find("col:lt("+s+")").remove(),e>0&&e!=this.model.groupSettings.groupedColumns.length)if(this.model.groupSettings.groupedColumns.length>2&&e!=this.model.groupSettings.groupedColumns.length-1)for(t=0;t<this.model.groupSettings.groupedColumns.length-e;t++)i.prepend(this._getIndentCol());else i.prepend(this._getIndentCol());return i},_groupSummaryRow:function(i,s,l,n){var o,a,r,d,h,c,u=this.getRsc("helpers",l);n=!t.isNullOrUndefined(n);if(u.model.showSummary){if(null==u.getFooterTable()&&u._renderGridFooter(),u._createSummaryRows(u.getFooterTable(),null==i.records?i:i.records,s,i,n),u._isCaptionSummary&&!n&&(o=[],a=u._captionSummary(),e.each(a[0].summaryColumns,function(e,t){o.push(u.getColumnIndexByField(t.displayColumn))}),o.length>0&&(colIndex=t.min(o)),r=u.model.columns.length,u.getFooterTable().find("tbody td").slice(-(r-colIndex)).removeClass("e-summaryrow").addClass("e-groupcaptionsummary")),!u.model.groupSettings.showGroupedColumn){var m=u.model.groupSettings.groupedColumns,p=0,g=u.getFooterTable().children("tbody").find("tr");for(d=0;d<u.model.summaryRows.length;d++){for(h=0;h<u.model.summaryRows[d].summaryColumns.length;h++)for(c=0;c<m.length;c++)m[c]==u.model.summaryRows[d].summaryColumns[h].displayColumn&&(p++,u.model.summaryRows[d].summaryColumns.length==p&&e(g[d]).addClass("e-hide"));p=0}}return n?u.getFooterTable().find("tbody").html():u.getFooterTable().find("tbody").find("tr").html()}},addGroupingTemplate:function(){document.createElement("tbody");var i,s,l,n,o=this,a={};a["_"+o._id+"ColSpanAdjust"]=this._colSpanAdjust,a["_"+o._id+"Colgroup"]=this._getColGroup,t.isNullOrUndefined(this.model.groupSettings.captionFormat)?e.templates(o._id+"_CaptionTemplate",this.localizedLabels.GroupCaptionFormat):e.templates(o._id+"_CaptionTemplate",this.model.groupSettings.captionFormat),a["_"+o._id+"CaptionFormat"]=this._captionFormat,a["_"+o._id+"GroupSummaryRow"]=this._groupSummaryRow,a["_"+o._id+"CaptionEncode"]=this._captionEncode,a[o._id+"Object"]=this,e.views.helpers(a),i=" ~_"+o._id+"CaptionFormat('"+o._id+"Object')",s="<td class='e-recordplusexpand' ej-mappingname='{{:field}}' ej-mappingvalue='{{:key}}'><div class='e-icon e-gdiagonalnext'></div></td><td class='e-groupcaption' colspan='{{:~_"+o._id+"ColSpanAdjust('"+o._id+"Object','groupcaption') }}'>{{if ~_"+o._id+"CaptionEncode('"+o._id+"Object')}}{{html:"+i+"}}{{else}}{{:"+i+"}}{{/if}}</td>",this._isCaptionSummary&&this.model.showSummary&&(s=s+"{{:~_"+o._id+"GroupSummaryRow(items, aggregates,'"+o._id+"Object')}}"),l="<tr>"+s+"</tr>",(n=t.buildTag("tbody")).html("{{if items.GROUPGUID}}{{for items tmpl='"+o._id+"_GroupingTemplate'/}}{{else}}{{for items tmpl='"+o._id+"_JSONTemplate'/}}{{/if}}");var r="<table class='e-table {{if items.GROUPGUID}}{{else}}e-recordtable{{/if}}' cellspacing='0.25px' >{{:~_"+o._id+"Colgroup('"+o._id+"Object')}}"+n.html()+"{{:~_"+o._id+"GroupSummaryRow(items, aggregates,'"+o._id+"Object', '"+o._id+"showGroupCaption')}}</table>",d="<tr><td class='e-indentcell'></td>"+("<td class='e-tabletd' colspan='{{:~_"+o._id+"ColSpanAdjust('"+o._id+"Object','table')}}'>"+r+"</td>")+"</tr>";e.templates(o._id+"_GroupingTemplate",l+d)},addSummaryTemplate:function(){var i=this;e.each(i.model.summaryRows,function(s,l){e.each(l.summaryColumns,function(s,l){t.isNullOrUndefined(l.template)||e.templates(i._id+"_summaryTemplate"+l.template,l.template)})})},_getGroupTopLeftCell:function(){var e=t.buildTag("th.e-grouptopleftcell");return e.append(t.buildTag("div.e-headercelldiv e-emptyCell","&nbsp;")),e},_getEmptyFilterBarCell:function(){return t.buildTag("th.e-filterbarcell e-grouptopleftcell")},_groupingAction:function(e){var t,i=this.getHeaderTable().find("thead").find(".e-columnheader:not(.e-stackedHeaderRow)").find(".e-grouptopleftcell"),s=(this.getHeaderTable().find("colgroup").find("col"),i.length);for(s&&(this.getHeaderTable().find("colgroup").replaceWith(this._getMetaColGroup()),(null!=this.model.detailsTemplate||null!=this.model.childGrid)&&this.getHeaderTable().find("colgroup").prepend(this._getIndentCol()),i.remove(),this.getHeaderTable().find("thead").find(".e-filterbar").find(".e-filterbarcell:lt("+s+")").remove()),(!this.model.allowResizeToFit||e)&&this.setWidthToColumns(),t=0;t<this.model.groupSettings.groupedColumns.length;t++)this.getHeaderTable().find("colgroup").prepend(this._getIndentCol()),this.getHeaderTable().find("thead").find(".e-columnheader").prepend(this._getGroupTopLeftCell()),this.getHeaderTable().find("thead").find(".e-filterbar").prepend(this._getEmptyFilterBarCell());this.getHeaderTable().find(".e-columnheader").find("th.e-grouptopleftcell").last().addClass("e-lastgrouptopleftcell")},groupColumn:function(i){var s,l;if(this._$fDlgIsOpen&&this.model.allowFiltering&&("menu"==this.model.filterSettings.filterType||"excel"==this.model.filterSettings.filterType)&&this._closeFDialog(),this.model.allowGrouping&&-1==e.inArray(i,this._disabledGroupableColumns)&&!t.isNullOrUndefined(this.getColumnByField(i))&&-1==e.inArray(i,this.model.groupSettings.groupedColumns)){for(this.model.groupSettings.groupedColumns.push(i),s=0;s<this.model.sortSettings.sortedColumns.length&&this.model.sortSettings.sortedColumns[s].field!=i;s++);this.model.sortSettings.sortedColumns.length==s&&this.model.sortSettings.sortedColumns.push({field:i,direction:t.sortOrder.Ascending}),(l={}).columnName=i,l.requestType=t.Grid.Actions.Grouping,this._processBindings(l)&&(-1!=e.inArray(i,this._scolumns)||this._gridSort==i||this.model.sortSettings.sortedColumns.pop(),this.model.groupSettings.groupedColumns.pop()),this._primaryKeyValues=[]}},ungroupColumn:function(i){var s,l,n,o,a;if(this._$fDlgIsOpen&&this.model.allowFiltering&&("menu"==this.model.filterSettings.filterType||"excel"==this.model.filterSettings.filterType)&&this._closeFDialog(),this.model.allowGrouping){if(-1==e.inArray(i,this.model.groupSettings.groupedColumns))return null;for(this.model.groupSettings.groupedColumns.splice(e.inArray(i,this.model.groupSettings.groupedColumns),1),0==this.model.groupSettings.groupedColumns.length&&(this._LastColumnUnGroup=!0),s=this.getColumnByField(i),this.model.groupSettings.showGroupedColumn||s.visible||(l=this._hiddenColumnsField.indexOf(i),this._hiddenColumnsField.splice(l,1),s.visible=!0),n={},o=0;o<this.model.sortSettings.sortedColumns.length;o++)if(this.model.sortSettings.sortedColumns[o].field==i){if(-1!=this._scolumns.indexOf(i)&&this.model.allowSorting&&this.model.allowMultiSorting||this._gridSort==i){if(this.model.allowSorting&&this.model.allowMultiSorting){a=e.inArray(i,this._scolumns),this._scolumns.splice(a,1);break}this._gridSort=null;break}this.model.sortSettings.sortedColumns.splice(o,1);break}n.columnName=i,n.requestType=t.Grid.Actions.Ungrouping,this._isUngrouping=!0,this._processBindings(n)&&this.model.groupSettings.groupedColumns.push(i),this._primaryKeyValues=[]}},collapseGroupDropArea:function(){var i=this.element.find(".e-groupdroparea").first(),s=this;0==this.model.groupSettings.groupedColumns.length&&this.model.groupSettings.enableDropAreaAutoSizing&&i.animate({height:"10px"},200,function(){null!=s.model&&0==s.model.groupSettings.groupedColumns.length&&(e(this).html("").append(t.buildTag("div.e-animatebutton e-animatebuttondown e-icon e-gdownarrow")),e(this).dequeue().css("height","auto"))})},expandGroupDropArea:function(){var e=this.element.find(".e-groupdroparea").first(),i=this;0==this.model.groupSettings.groupedColumns.length&&i.model.groupSettings.enableDropAreaAutoSizing&&e.animate({height:"30px"},150,function(){0==i.model.groupSettings.groupedColumns.length&&e.html(i.localizedLabels.GroupDropArea).append(t.buildTag("div.e-animatebutton e-animatebuttonup e-icon e-guparrow")),e.dequeue().css("height","30px")})},_enableGroupingEvents:function(){this.model.allowGrouping&&(this._on(this.element,"click",".e-groupdroparea,.e-groupheadercell",this._groupHeaderCellClick),this._on(this.element,"mousedown",".e-groupheadercell",function(){return!1}))},_recalculateIndentWidth:function(){var i,s,l,n=this,o=!t.isIOSWebView()&&this.getBrowserDetails(),a=this.getHeaderTable().find(".e-lastgrouptopleftcell").width(),r=a,d=a/30;d>=1&&(r=30/d),this.getHeaderTable().find("colgroup").find("col").slice(0,this.model.groupSettings.groupedColumns.length).css("width",r+"px"),s=this.getContentTable().find("table").filter(":not(.e-recordtable)"),(a=this.getHeaderTable().find(".e-lastgrouptopleftcell").width())>30||this._isCaptionSummary&&(a>=30||a>r)?(this._isCaptionSummary?(l=this.model.isEdit?s.parent(":not(.gridform)").children("colgroup"):s.children("colgroup"),e.each(l,function(t,i){var s=e(i).find("col").length-n.model.columns.length;(null!=n.model.detailsTemplate||null!=n.model.childGrid)&&s>0&&(s-=1),e(i).find("col").slice(0,s).css("width",r+"px")})):this.model.isEdit?s.parent(":not(.gridform)").children("colgroup").find("col:first-child").css("width",a+"px"):s.children("colgroup").find("col:first-child").css("width",a+"px"),i=this.getContentTable().find("colgroup").first().find("col").slice(0,this.model.groupSettings.groupedColumns.length),o&&"msie"!=o.browser||this._isCaptionSummary?i.css("width",r+"px"):i.first().css("width",a/this.element.width()*100+"%")):(this.getContentTable().find("colgroup").first().find("col").slice(0,this.model.groupSettings.groupedColumns.length).css("width",r+"px"),this.getContentTable().find("table").filter(":not(.e-recordtable)").children("colgroup").find("col:first-child").css("width",a+"px")),this.model.showSummary&&this.getContentTable().find("table").filter(".e-groupsummary").find(".e-summary").css("width",r+"px")},getFieldNameByHeaderText:function(e){return t.isNullOrUndefined(this._fieldColumnNames[e])?null:this._fieldColumnNames[e]},getHeaderTextByFieldName:function(e){return t.isNullOrUndefined(this._headerColumnNames[e])?null:this._headerColumnNames[e]},expandAll:function(){var t,i=this.element.find(".e-recordpluscollapse"),s=this._excludeDetailRows().find(".e-detailrowcollapse");if(0!=i.length)for(t=0;t<i.length;t++)this.expandCollapse(e(i[t]));if(0!=s.length)for(t=0;t<s.length;t++)this.expandCollapse(e(s[t]))},collapseAll:function(){var t,i=this.element.find(".e-recordplusexpand"),s=this.element.find(".e-detailrowexpand");if(0!=i.length)for(t=0;t<i.length;t++)this.expandCollapse(e(i[t]));if(0!=s.length)for(t=0;t<s.length;t++)this.expandCollapse(e(s[t]))},_group:function(i){var s,l,n,o,a,r;if(this.model.groupSettings.groupedColumns.length&&this.model.currentViewData){if(this._currentJsonData=[],s=document.createElement("div"),!this.model.groupSettings.showGroupedColumn){if(this.initialRender||t.isNullOrUndefined(i.columnName)||"grouping"!=i.requestType)for(r=0;r<this.model.groupSettings.groupedColumns.length;r++)-1==e.inArray(this.model.groupSettings.groupedColumns[r],this._hiddenColumnsField)&&(this._hiddenColumnsField.push(this.model.groupSettings.groupedColumns[r]),this.getColumnByField(this.model.groupSettings.groupedColumns[r]).visible=!1);else l=this.getColumnByField(i.columnName),-1==e.inArray(i.columnName,this._hiddenColumnsField)&&(this._hiddenColumnsField.push(i.columnName),l.visible=!1);this._hideHeaderColumn(this.model.groupSettings.groupedColumns,!0),this.getContentTable().children("colgroup").replaceWith(this.getHeaderTable().find("colgroup").clone())}for(this._isReorder="reorder"==i.requestType,o=(n=this.getContentTable().children("colgroup").find("col")).length-this.model.columns.length,(null!=this.model.detailsTemplate||null!=this.model.childGrid)&&o--,n.length>this.model.columns.length&&this.getContentTable().children("colgroup").find("col:lt("+o+")").remove(),this.getContentTable().find("colgroup").first().replaceWith(this._getMetaColGroup()),a=null!=this.model.detailsTemplate||null!=this.model.childGrid?this.model.groupSettings.groupedColumns.length+1:this.model.groupSettings.groupedColumns.length,r=0;r<a;r++)this.getContentTable().children("colgroup").prepend(this._getIndentCol());this.model.currentViewData.length?(this.getContentTable().children("tbody").empty(),s.innerHTML=["<table>",e.render[this._id+"_GroupingTemplate"](this.model.currentViewData,{groupedColumns:this.model.groupSettings.groupedColumns}),"</table>"].join(""),this.getContentTable().get(0).replaceChild(s.firstChild.firstChild,this.getContentTable().get(0).lastChild),this._hideCaptionSummaryColumn()):this.model.isEdit&&this.cancelEdit(),this._groupingAction(),this._gridRows=this.getContentTable().find(".e-recordtable").find("tbody").find("tr").not(".e-gridSummaryRows"),this._eventBindings()}},_ungroup:function(){var e,i,s,l;if(this._isGrouping=!1,t.isNullOrUndefined(this.model.detailsTemplate)||(this._detailsOuterWidth=null),i=(e=this.element.children(".e-gridheader")).find(".e-filterbar").find("th").find("input"),e.find("div").first().empty().append(this._renderGridHeader().find("table")),this.setGridHeaderContent(e),this.model.allowFiltering&&"filterbar"==this.model.filterSettings.filterType)for(this._renderFiltering(),this._renderFilterBarTemplate(),s=this.element.children(".e-gridheader").find(".e-filterbar").find("th").find("input"),l=0;l<i.length;l++)s.eq(l).val(i.eq(l).val());this.model.groupSettings.showGroupedColumn||this._hideHeaderColumn(this.model.groupSettings.groupedColumns,!0),this.refreshTemplate(),this.element.find(".e-gridcontent").children("div").first().empty().append(this._renderGridContent().find("table").first()),this.setGridContent(this.element.find(".e-gridcontent")),this._gridRows=0!=this.model.groupSettings.groupedColumns.length?this.getContentTable().find(".e-recordtable").find("tbody").find("tr").toArray():this.getContentTable().get(0).rows},_groupHeaderCellClick:function(t){var i,s=e(t.target);if(!s.hasClass("e-groupdroparea"))return s.hasClass("e-ungroupbutton")?(i=s.parent().attr("ej-mappingname"),this.ungroupColumn(i)):s.hasClass("e-togglegroupbutton")?(i=s.parent().attr("ej-mappingname"),s.hasClass("e-toggleungroup")&&this.ungroupColumn(i)):s.hasClass("e-animatebutton")?e(t.target).hasClass("e-animatebuttondown")?this.expandGroupDropArea():this.collapseGroupDropArea():(s.addClass("e-headercelldiv"),this._mouseClickHandler(t),s.removeClass("e-headercelldiv")),!1},_captionSummary:function(i){for(var s=null,l=this.model.summaryRows,n=l.length,o=0;o<n;o++)if(1==l[o].showCaptionSummary){s=e(l[o]);break}return i&&(left=l.slice(0,o),right=l.slice(o+1,n),t.merge(s=left,right)),s},_dropAreaHover:function(t){var i=e(t.target);return"mouseenter"==t.type?(this._dragActive?i.hasClass("e-groupdroparea")&&i.addClass("e-hover"):i.removeClass("e-hover"),i.hasClass("e-groupheadercell")&&this.model.groupSettings.showUngroupButton&&i.find(".e-ungroupbutton").show(150)):"mouseleave"==t.type&&(i.hasClass("e-groupdroparea")&&(i.find(".e-ungroupbutton").hide(150),i.removeClass("e-hover")),i.hasClass("e-groupheadercell")&&this.model.groupSettings.showUngroupButton&&i.find(".e-ungroupbutton").hide(150)),!1},_groupingCompleteAction:function(e){var i,s=this.element.children(".e-groupdroparea");if((this.model.groupSettings.groupedColumns.length&&0==s.find(".e-grid-icon").length||t.Grid.Actions.Refresh==e.requestType)&&s.empty(),this.initialRender||t.Grid.Actions.Refresh==e.requestType){for(i=0;i<this.model.groupSettings.groupedColumns.length;i++)this._addColumnToGroupDrop(this.model.groupSettings.groupedColumns[i]);this._refreshGridPager()}else this._addColumnToGroupDrop(e.columnName);for(this.getHeaderTable().find(".e-columnheader").find(".e-headercelldiv").find(".e-ascending,.e-descending,.e-number").remove(),i=0;i<this.model.sortSettings.sortedColumns.length;i++)this._addSortElementToColumn(this.model.sortSettings.sortedColumns[i].field,this.model.sortSettings.sortedColumns[i].direction);!this.initialRender&&t.gridFeatures.dragAndDrop&&this._groupHeaderCelldrag(),this.model.allowScrolling&&this.getContentTable().parent().scrollLeft(this.getHeaderTable().parent().scrollLeft()-1),this.element.children(".e-cloneproperties").remove(),t.gridFeatures.filter&&["menu","excel"].indexOf(this.model.filterSettings.filterType)&&this._refreshFilterIcon()},_ungroupingCompleteAction:function(e){var i,s=this.element.children(".e-groupdroparea");for(e.requestType!=t.Grid.Actions.Refresh&&this._removeColumnFromDrop(e.columnName),this.getHeaderTable().find(".e-columnheader").find(".e-headercelldiv").find(".e-ascending,.e-descending,.e-number").remove(),i=0;i<this.model.sortSettings.sortedColumns.length;i++)this._addSortElementToColumn(this.model.sortSettings.sortedColumns[i].field,this.model.sortSettings.sortedColumns[i].direction);0==this.model.groupSettings.groupedColumns.length&&(s.html(this.model.groupSettings.enableDropAreaAutoSizing?"":this.localizedLabels.GroupDropArea),this.model.groupSettings.enableDropAreaAutoSizing&&s.append(t.buildTag("div.e-animatebutton e-icon").addClass(this.model.groupSettings.enableDropAreaAutoSizing?"e-animatebuttondown e-gdownarrow":"e-animatebuttonup e-guparrow")),s.css("height","auto")),t.gridFeatures.dragAndDrop&&this._headerCellgDragDrop(),this.model.allowReordering&&t.gridFeatures.dragAndDrop&&this._headerCellreorderDragDrop(),this.model.allowScrolling&&this.getContentTable().parent().scrollLeft(this.getHeaderTable().parent().scrollLeft()-1),this.element.children(".e-cloneproperties").remove(),t.gridFeatures.filter&&["menu","excel"].indexOf(this.model.filterSettings.filterType)&&this._refreshFilterIcon()},_getToggleButton:function(){return t.buildTag("span.e-togglegroupbutton e-icon e-gridgroupbutton","&nbsp;")},_checkEinHeader:function(t){for(var i,s=this.element.children(".e-gridheader").find("thead").find(".e-columnheader").find(".e-headercell"),l=0;l<s.length;l++){if(e.trim(s.eq(l).find("div").attr("ej-mappingname"))==t)return s.eq(l);if(this.model.allowSorting&&this.model.allowMultiSorting&&((i=e(s.eq(l)).clone()).find(".e-number").remove(),e.trim(i.find("div").attr("ej-mappingname"))==t))return i}return null},_checkEinGroupDrop:function(t){for(var i=this.element.children(".e-groupdroparea").find(".e-grid-icon"),s=0;s<i.length;s++)if(e.trim(i.eq(s).find("div").attr("ej-mappingname"))==t)return i.eq(s);return null},_addColumnToGroupDrop:function(i){var s,l,n=t.buildTag("div.e-grid-icon e-groupheadercell"),o=this.element.find(".e-groupdroparea").first(),a=t.buildTag("div",{},{},{"ej-mappingname":i}),r="e-rarrowup-2x",d=this.getColumnByField(i);d.disableHtmlEncode?n.append(a.text(d.headerText)):d.headerTemplateID?n.append(a.html(e(d.headerTemplateID).html())):n.append(a.html(d.headerText)),s=this._checkEinHeader(i),this.model.groupSettings.showToggleButton&&(a.append(this._getToggleButton().addClass("e-toggleungroup")),s.find(".e-headercelldiv").find(".e-togglegroupbutton").remove().end().append(this._getToggleButton().addClass("e-toggleungroup"))),l="ascending",s.find(".e-ascending,.e-descending").length&&(r="ascending"==(l=s.find(".e-ascending,.e-descending").hasClass("e-ascending")?"ascending":"descending")?"e-rarrowup-2x":"e-rarrowdown-2x"),a.append(this._createSortElement().addClass("e-"+l+" "+r)),this.model.groupSettings.showUngroupButton&&a.append(t.buildTag("span.e-ungroupbutton e-icon e-cancel"," ",{},{title:this.localizedLabels.UnGroup})),o.append(n).css("height","auto");var h=n.offset().left,c=n.clone().css("position","absolute");n.css("visibility","hidden"),o.append(c).dequeue(),c.css({left:h+150}).animate({left:h},150,function(){n.css("visibility","visible"),c.remove()})},_removeColumnFromDrop:function(t){this.getHeaderTextByFieldName(t);for(var i=this.element.children(".e-groupdroparea").css("height","30px").find(".e-grid-icon"),s=0;s<i.length;s++)e.trim(i.eq(s).find("div").attr("ej-mappingname"))==t&&(0==this.model.groupSettings.groupedColumns.length?this.collapseGroupDropArea():i.eq(s).remove())},_setAggreatedCollection:function(e){var s;this._dataSource()instanceof t.DataManager&&this._dataManager.dataSource.url!=i&&!this._isRemoteSaveAdaptor||this.model.enableLoadOnDemand||(s=this._dataManager.executeLocal(e).result,this._aggregatedCollection=s)},_setAggregates:function(e,i){var s,l,n,o,a,r,d,h,c,u,m,p,g,f,_,v=new t.Query;for(e=e||this.model.currentViewData,i=i||this._aggregatedCollection,0!=(n=e.length)&&(a=t.Predicate("field","equal",e[0].field),r=t.Predicate("key","equal",e[0].key),e[0].key instanceof Date&&(d={value:e[0].key,operator:"equal",field:"key"},r=this._setDateFilters(d,!0)),l=a.and(r)),s=1;s<n;s++)a=t.Predicate("field","equal",e[s].field),r=t.Predicate("key","equal",e[s].key),e[s].key instanceof Date&&(d={value:e[s].key,operator:"equal",field:"key"},r=this._setDateFilters(d,!0)),l=l.or(a.and(r));if(o=(i=l?new t.DataManager(i).executeLocal(v.where(l)):i).length,e.length>0)for(s=0;s<o;s++)if((!(s>0)||!(s<o-1))&&(e[s].count=i[s].count,e[s].items.GROUPGUID&&this._setAggregates(e[s].items,i[s].items),this.model.showSummary))for(h=e[s].aggregates=[],p=0,g=(c=this.model.summaryRows).length;p<g;p++)for(f=0,_=(u=c[p].summaryColumns).length;f<_;f++)m=i[s].items.level?i[s].items.records:i[s].items,h[u[f].dataMember+" - "+u[f].summaryType]=this.getSummaryValues(u[f],m)}}}(jQuery,Syncfusion),function(e,t){t.gridFeatures=t.gridFeatures||{},t.gridFeatures.dragAndDrop={_headerCellgDragDrop:function(){var i,s=this;this.dragHeaderElement(),(i=this.element.children("div.e-groupdroparea")).ejDroppable({accept:i,drop:function(i,l){if(!t.isNullOrUndefined(l.helper)&&l.helper.is(":visible")){var n=s.getColumnByField(e.trim(e(l.draggable[0]).find("div").attr("ej-mappingname")));l.helper.remove(),s._disabledGroupableColumns.length&&-1!=e.inArray(n.field,s._disabledGroupableColumns)||t.isNullOrUndefined(n)||t.isNullOrUndefined(n.field)||""==n.field||s.groupColumn(n.field)}}})},_headerCellreorderDragDrop:function(){var i,s=this;this.dragHeaderElement(),(i=this.element.find(".e-headercell").not(".e-detailheadercell,.e-stackedHeaderCell")).ejDroppable({accept:i,drop:function(i,l){var n,o,a,r,d,h,c,u,m,p,g,f;!t.isNullOrUndefined(l.helper)&&l.helper.is(":visible")&&e(l.draggable[0]).closest(".e-grid").attr("id")==s._id&&(("ascending"==l.draggable.attr("aria-sort")||"descending"==l.draggable.attr("aria-sort"))&&(n=s.getColumnByField(e.trim(e(l.draggable[0]).find("div").attr("ej-mappingname"))),s.model.allowSorting&&s.model.allowMultiSorting?s._scolumns.push(n.field):s._gridSort=n.field),h=l.draggable.index(),c=i.dropTarget.parent().index(),(e(i.dropTarget).hasClass("e-number")||e(i.dropTarget).hasClass("e-icon"))&&(c=i.dropTarget.closest(".e-headercell").index()),s.model.scrollSettings.frozenColumns>0?(r=l.draggable.closest(".e-frozenheaderdiv").length>0?h:h+s.model.scrollSettings.frozenColumns,d=i.dropTarget.closest(".e-frozenheaderdiv").length>0?c:c+s.model.scrollSettings.frozenColumns):(r=h,d=c),s.model.allowGrouping&&s.model.groupSettings.groupedColumns.length>0?(r-=s.model.groupSettings.groupedColumns.length,d-=s.model.groupSettings.groupedColumns.length):(null!=s.model.detailsTemplate||null!=s.model.childGrid)&&(r-=1,d-=1),o=s.getColumnByIndex(r),a=s.getColumnByIndex(d),u=t.isNullOrUndefined(o)||t.isNullOrUndefined(o.field)||""==o.field?null:o.field,m=t.isNullOrUndefined(a.field)||""==a.field?null:a.field,l.helper.remove(),(p=e(i.dropTarget).clone()).find(".e-number").remove(),t.isNullOrUndefined(u)||t.isNullOrUndefined(m)?s.reorderColumns(r,d):(e(i.dropTarget).hasClass("e-droppable")?(p=p.children(".e-headercelldiv"),g=e(i.dropTarget).children(".e-headercelldiv")):(p=e(i.dropTarget).parent(),g=e(i.dropTarget),e(g).hasClass("e-filtericon")&&(g=p=e(g).siblings(".e-headercelldiv"))),f=s.model.allowSorting&&s.model.allowMultiSorting?i.dropTarget.hasClass("e-number")||i.dropTarget.hasClass("e-icon")?s.getColumnByField(e.trim(p.attr("ej-mappingname"))):s.getColumnByField(e.trim(g.attr("ej-mappingname"))):i.dropTarget.hasClass("e-icon")&&!i.dropTarget.hasClass("e-filtericon")?s.getColumnByField(e.trim(p.attr("ej-mappingname"))):s.getColumnByField(e.trim(g.attr("ej-mappingname"))),s.reorderColumns(o.field,f.field)))}})},dragHeaderElement:function(){var i,s=this,l=this.element.children("div.e-gridheader").find("th.e-headercell").not(".e-detailheadercell,.e-stackedHeaderCell"),n=t.buildTag("div.e-cloneproperties e-grid","",{height:"20px","z-index":2});l.ejDraggable({cursorAt:{top:-50,left:-2},helper:function(t){var l,o,a,r;return s.element.find(".e-dragclone").length>0&&s.element.find(".e-dragclone").remove(),o=(l=e(t.element).hasClass("e-headercell")?e(t.element):e(t.element).closest("th")).find(".e-headercelldiv"),a=e(t.element).index(),s.model.allowGrouping&&s.model.groupSettings.groupedColumns.length>0?a-=s.model.groupSettings.groupedColumns.length:(null!=s.model.detailsTemplate||null!=s.model.childGrid)&&(a-=1),i=s.getColumnByIndex(a),s._$curSElementTarget=o,s.model.allowSorting&&s.model.allowMultiSorting?((r=e(l).clone()).find(".e-number").remove(),n.text(r.text()).clone().width(l.outerWidth()+2).height(l.height()+2).css({"font-size":parseInt((l.height()+3)/2)}).addClass("e-dragclone").appendTo(s.element)):n.text(l.text()).clone().width(l.outerWidth()+2).height(l.height()+2).css({"font-size":parseInt((l.height()+3)/2)}).addClass("e-dragclone").appendTo(s.element)},dragStart:function(t){var l,n,o=t.target,a=e(o),r={target:o,draggableType:"headercell",column:i},d=!1;return s.model.groupSettings.showToggleButton&&i&&i.allowGrouping&&(l=e.inArray(i.field,s.model.groupSettings.groupedColumns),n=e(t.element).find(".e-togglegroupbutton").hasClass("e-togglegroup"),(-1!=l&&n||-1==l&&!n)&&(d=!0)),null!=s._resizer&&s._resizer._expand||d||a.eq(0).hasClass("e-filtericon")||i&&0==i.allowGrouping&&0==i.allowReordering?(e(".e-dragclone").remove(),!1):(s._dragActive=!0,s.model.allowGrouping&&s.expandGroupDropArea(),!s._trigger("columnDragStart",r)&&void 0)},drag:function(t){var l=e(t.target),n={target:l,draggableType:"headercell",column:i};if(s._trigger("columnDrag",n))return!1;l.closest(".e-grid").attr("id")===s._id&&(s.getHeaderTable().find(".e-headercell").removeClass("e-reorderindicate"),!s.model.allowReordering||!(l.hasClass("e-headercelldiv")||l.hasClass("e-headercell"))||l.hasClass("e-detailheadercell")||l.hasClass("e-stackedHeaderCell")||l.parent().hasClass("e-grouptopleftcell")||(document.body.style.cursor="",l.addClass("e-allowDrop"),s.getHeaderTable().find(".e-reorderindicate").removeClass("e-reorderindicate"),l.hasClass("e-headercell")?l.addClass("e-reorderindicate"):l.parent().addClass("e-reorderindicate")),l.hasClass("e-groupdroparea")||l.closest(".e-groupdroparea").length?(document.body.style.cursor="",l.addClass("e-allowDrop")):document.body.style.cursor="not-allowed")},dragStop:function(t){if(!t.element.dropped){var l={target:e(t.target),draggableType:"headercell",column:i};s._trigger("columnDrop",l),s.element.find(".e-groupdroparea").removeClass("e-hover"),s.getHeaderTable().find(".e-columnheader").find(".e-headercellactive").removeClass("e-headercellactive").removeClass("e-active"),e(".e-dragclone").remove(),s._dragActive=!1,s.getHeaderTable().find(".e-reorderindicate").removeClass("e-reorderindicate"),s.model.allowGrouping&&s.collapseGroupDropArea(),document.body.style.cursor="",e(s._Indicator).css("display","none")}}})},_groupHeaderCelldrag:function(){var i=t.buildTag("div.e-cloneproperties e-grid","",{height:"20px","z-index":2}),s=this;this.element.children(".e-groupdroparea").find(".e-groupheadercell").ejDraggable({cursorAt:{top:-35,left:-2},helper:function(t){var l=e(t.sender.target).closest(".e-grid-icon");return i.text(e(t.sender.target).closest(".e-groupheadercell").text()).clone().width(l.width()+2).height(l.height()+2).addClass("e-dragclone").appendTo(s.element)},dragStart:function(e){var t,i=e.target;return e.model.cursorAt={top:-35,left:-2},t={target:i,draggableType:"groupheadercell"},!s._trigger("columnDragStart",t)&&void 0},drag:function(t){e(".Sibling").remove();var i=e(t.target),l={target:i,draggableType:"groupheadercell"};if(s._trigger("columnDrag",l))return!1;i.closest("div.e-gridcontent").length?(document.body.style.cursor="",i.addClass("e-allowDrop")):document.body.style.cursor="not-allowed"},dragStop:function(t){if(!t.element.dropped){var i={target:e(t.target),draggableType:"groupheadercell"};s._trigger("columnDrop",i),e(".e-dragclone").remove(),document.body.style.cursor=""}}}),this.element.children(".e-gridcontent, .e-gridheader").ejDroppable({accept:s.element.children("div.e-groupdroparea").find(".e-groupheadercell"),drop:function(i,l){if(!t.isNullOrUndefined(l.helper)&&l.helper.is(":visible")&&l.draggable.hasClass("e-groupheadercell")){var n=e(l.draggable[0]).find("div").attr("ej-mappingname");l.helper.remove(),t.isNullOrUndefined(n)||s.ungroupColumn(n)}}})},_rowsDragAndDrop:function(){this.dragRowElement();var i=this.getContentTable(),s=this;i.ejDroppable({accept:i,drop:function(i,l){var n,o,a,r,d,h,c=e(i.dropTarget).closest("tr");if(!l.helper.find("tr.e-srcgridinfo").length||(s._draggedGridID=l.helper.find("tr.e-srcgridinfo").children("td").text(),(n=s._draggedGridID!=s._id?e("#"+s._draggedGridID).ejGrid("instance"):s)._id!=s._id&&n.model.rowDropSettings.dropTargetID!="#"+s._id))return!1;var u=n.getSelectedRecords(),m=o=s.getIndexByRow(c);if(-1==m&&(m=o=0),d={target:c,targetIndex:m=m+s.model.pageSettings.currentPage*s.model.pageSettings.pageSize-s.model.pageSettings.pageSize,draggedRecords:u,dropDetails:a={sourceID:n._id,destinationID:s._id,destinationRowIndex:m}},!s._trigger("beforeRowDrop",d))if(r=s._dataSource()instanceof t.DataManager?s._dataSource().dataSource:s._dataSource(),t.isNullOrUndefined(s.model.rowDropSettings.dropMapper)||(t.isNullOrUndefined(r.headers)&&(r.headers=[]),r.headers.push({rowDropDetails:JSON.stringify(a)})),s._id!=n._id){s._dataManager,s._dataSource().adaptor;var p=n.getBatchChanges();p.deleted=u,d={dropDetails:a,records:u,requestType:t.Grid.Actions.Refresh,targetIndex:m,action:"rowDragged"},s._processDropRequest(n,p,"drag",d),(h=s.getBatchChanges()).added=u,d.action="rowDropped",s._processDropRequest(s,h,"drop",d)}else s._draggedGridID==s._id&&s.reorderRows(n.selectedRowsIndexes,o)}})},dragRowElement:function(){var i=this;e(this.getRows()).ejDraggable({cursorAt:{top:-8,left:-8},helper:function(s){var l,n,o,a,r;return this.clone=!0,l=e(s.sender.target).closest("tr"),!(i._selectDrag||!l.length||-1==e.inArray(i.model.editSettings.showAddNewRow?l[0].rowIndex-1:l[0].rowIndex,i.selectedRowsIndexes))&&((n=t.buildTag("div.e-cloneproperties e-draganddrop e-grid","",{height:"auto","z-index":2,position:"absolute",width:i.element.width()})).append(t.buildTag("table","",{width:i.element.width()})),a=e(i.getRows()).clone().removeClass(),o=e.map(a,function(t,s){if(-1!=e.inArray(s,i.selectedRowsIndexes))return t}),r=t.buildTag("tr.e-srcgridinfo e-grid","",{display:"none",height:"auto"}).append("<td>"+i._id+"</td>"),o.push(r[0]),e(o).find("td").removeClass("e-selectionbackground e-active"),n.find("table").append(o),e(s.sender.target).closest("td").hasClass("e-selectionbackground")||n.css("display","none"),n.addClass("e-dragclone").appendTo(i.element))},dragStart:function(t){if(i._selectDrag||-1==e.inArray(i.model.editSettings.showAddNewRow?e(t.target).closest("tr")[0].rowIndex-1:e(t.target).closest("tr")[0].rowIndex,i.selectedRowsIndexes))return!1;var s=t.target,l={target:i.getRowByIndex(i.selectedRowsIndexes[0],i.selectedRowsIndexes[i.selectedRowsIndexes.length]),currentTarget:s,draggableType:"rows",data:i.getSelectedRecords()};return!i._trigger("rowDragStart",l)&&void 0},drag:function(t){var s,l=e(t.target),n={target:i.getRowByIndex(i.selectedRowsIndexes[0],i.selectedRowsIndexes[i.selectedRowsIndexes.length]),currentTarget:l,draggableType:"rows",data:i.getSelectedRecords()};if(i._trigger("rowDrag",n))return!1;document.body.style.cursor="not-allowed",s=e(i.model.rowDropSettings.dropTargetID),(l.closest(i.model.rowDropSettings.dropTargetID).length||l.closest("#"+i._id).length)&&(l.closest(".e-grid").length&&(l.closest(".e-rowcell").length||l.closest(".emptyrecord").length)?l.closest("table").addClass("e-allowRowDrop"):s.hasClass("e-grid")||s.addClass("e-allowRowDrop"))},dragStop:function(t){var s,l;if(!t.element.dropped){var n=e(t.target),o=i.getRowByIndex(i.selectedRowsIndexes[0],i.selectedRowsIndexes[i.selectedRowsIndexes.length]),a=i.getSelectedRecords();if(e(".e-dragclone").remove(),document.body.style.cursor="",(s=e(i.model.rowDropSettings.dropTargetID)).hasClass("e-grid")?s.find(".e-gridcontent").find("table").removeClass("e-allowRowDrop"):s.removeClass("e-allowRowDrop"),i.getContent().find("table").removeClass("e-allowRowDrop"),l={rows:o,target:n,draggableType:"rows",data:a},i._trigger("rowDrop",l))return!1}}})},_processDropRequest:function(i,s,l,n){var o,a=i._dataManager.dataSource.batchUrl;i._dataManager.dataSource.batchUrl=i.model.rowDropSettings[l+"Mapper"],o=i._dataManager.saveChanges(s,i._primaryKeys[0],i.model.query._fromTable),e.isFunction(o.promise)&&null!=i._dataManager.dataSource.batchUrl?(e("#"+i._id).data("ejWaitingPopup").show(),o.done(function(){i._isLocalData&&"drop"==l&&(n.dropDetails.sourceID==n.dropDetails.destinationID?i._moveDroppedRowIndex(n.targetIndex,n.records,n.draggedRowIndexes):i._moveDroppedRowIndex(n.targetIndex,n.records)),"drop"==l&&(i._dataSource()instanceof t.DataManager?i._dataSource().dataSource.headers.pop():i._dataSource().headers.pop()),i._dataManager.dataSource.batchUrl=a,i.refreshBatchEditChanges(),e("#"+i._id).data("ejWaitingPopup").hide(),i._processBindings(n)}),o.fail(function(t){i._dataManager.dataSource.batchUrl=a,e("#"+i._id).data("ejWaitingPopup").hide(),n.error=t&&t.error?t.error:t,i._trigger("actionFailure",n)})):(i.refreshBatchEditChanges(),i._dataManager.dataSource.batchUrl=a,"drop"==l&&i._moveDroppedRowIndex(n.targetIndex,n.records),n.dropDetails.sourceID==n.dropDetails.destinationID&&"drag"==l||i._processBindings(n))},reorderRows:function(e,i){var s,l,n;if(!this.model.sortSettings.sortedColumns.length)if(s=this.getSelectedRecords(),this.selectedRowsIndexes=[],l={requestType:t.Grid.Actions.Refresh,action:"rowReordering",draggedRowIndexes:e,targetIndex:i,dropDetails:{sourceID:this._id,destinationID:this._id,DestinationRowIndex:i},records:s},t.isNullOrUndefined(this.model.rowDropSettings.dropMapper)){if(this._trigger("actionBegin",l))return!1;this._moveDroppedRowIndex(i,s,e),this._trigger("actionComplete",l)}else(n=this.getBatchChanges()).changed=s,this._processDropRequest(this,n,"drop",l)},_moveDroppedRowIndex:function(i,s,l){var n,o,a,r;if(t.isNullOrUndefined(l)){if(i>-1)for(a=this._dataSource()instanceof t.DataManager?this._dataSource().dataSource.json:this._dataSource(),i+this.model.pageSettings.currentPage*this.model.pageSettings.pageSize-this.model.pageSettings.pageSize,r=0;r<s.length;r++)a.splice(i++,0,a.splice(a.length-s.length+r,1)[0])}else{l=l.sort(function(e,t){return e-t});var d,h,c=i,u=0,m=this.model.currentViewData.slice(),p=this.getRowByIndex(i);for(i+=this.model.pageSettings.currentPage*this.model.pageSettings.pageSize-this.model.pageSettings.pageSize,r=0;r<l.length;r++)a=m[l[r]],h=l[r]-u,d=0,n=this._excludeDetailRows(),o=e(n[h]),c>h&&u++,this.model.allowPaging&&(d=this.model.pageSettings.currentPage*this.model.pageSettings.pageSize-this.model.pageSettings.pageSize),h=d+h,this.selectedRowsIndexes.push(c-u),r==l.length-1&&(this.model.selectedRowIndex=this.selectedRowsIndexes[0]),(null!=this.model.detailsTemplate||null!=this.model.childGrid)&&o.next().hasClass("e-detailrow")&&(o=o.add(o.next()[0])),p.before(o),c<l[r]-u?c++:i--,this._dataSource()instanceof t.DataManager?this._dataSource().dataSource.json.splice(i+r,0,this._dataSource().dataSource.json.splice(h,1)[0]):this._dataSource().splice(i+r,0,this._dataSource().splice(h,1)[0]),this.model.currentViewData.splice(i+r-d,0,this.model.currentViewData.splice(h-d,1)[0])}}}}(jQuery,Syncfusion),function(e,t,i){t.gridFeatures=t.gridFeatures||{},t.gridFeatures.selection={selectRows:function(s,l,n){var o,a,r,d,h,c,u,m,p,g,f,_,v,b,C,w,y,S,x,T,D,k,I;if(!this._allowrowSelection)return!1;if(this._traverseRow!=s&&e(".e-traverse").removeClass("e-traverse"),this._traverseRow=null,o=[],this.initialRender&&(this.model.currentIndex=s),this.model.scrollSettings.enableVirtualization&&(e.isArray(s)?this.model.currentIndex=s[0]:l&&(this.model.currentIndex=s>l?l:s)),!this.multiSelectCtrlRequest&&this.model.scrollSettings.allowVirtualScrolling&&(this._virtuaOtherPage?this._virtualScrollingSelection=!0:(this.clearSelection(),this._virtualScrollingSelection=!1)),e.isArray(s)&&(s=(o=s)[0],this._virtaulSel=[],this.model.scrollSettings.allowVirtualScrolling&&!this.model.scrollSettings.enableVirtualization))for(this._virtualScrollingSelection=!0,this._virtualSelectedRows=o,a=parseInt(s/this.model.pageSettings.pageSize)*this.model.pageSettings.pageSize,y=(parseInt(s/this.model.pageSettings.pageSize)+1)*this.model.pageSettings.pageSize,this._virtaulSel.push(s),this._virtuaOtherPage||(this._virtaulUnSel=[]),w=1;w<o.length;w++)a<o[w]&&o[w]<y?this._virtaulSel.push(o[w]):this._virtaulUnSel.push(o[w]);g=e(this.getRows()),!this.model.allowScrolling||this.model.scrollSettings.allowVirtualScrolling||this.model.scrollSettings.enableVirtualization||0!=this.model.scrollSettings.frozenColumns||0!=this.model.scrollSettings.frozenRows||(r=g.eq(s)[0],this.getScrollObject().scrollTop()+this.getScrollObject().content()[0].clientHeight<r.offsetTop+r.offsetHeight&&(d=t.isNullOrUndefined(r)?" ":r.offsetTop,this.getScrollObject().scrollY(d))),I={},u=this._currentPage()-1,t.isNullOrUndefined(s)||("batch"==this.model.editSettings.editMode&&e(g[s]).hasClass("e-insertedrow")?(m=this.batchChanges.added.reverse()[s],this.batchChanges.added.reverse()):m="batch"==this.model.editSettings.editMode?this._currentJsonData[s-this.batchChanges.added.length]:this._currentJsonData[t.isNullOrUndefined(s)?l:s]);var O=s,R=this._previousIndex,N=this.getRowByIndex(this._previousIndex);if(this.model.scrollSettings.allowVirtualScrolling)if(this.model.scrollSettings.enableVirtualization){var E=this._virtualRowCount,A=Math.ceil((s+1)/E),M=A>1?this._virtualRowCount:0;if(this.initialRender||A!=this._currentVirtualIndex&&!n?(this._isThumbScroll=!0,this._refreshVirtualView(A),s=0!=s?s%this._virtualRowCount+M:s):(s>3*this._virtualRowCount||n?(S=this._getSelectedViewData(s,n).viewIndex,b=s%this._virtualRowCount,O=S*this._virtualRowCount-(this._virtualRowCount-b)):s=s%this._virtualRowCount+M,s!=O||n||(s=0!=s?s%this._virtualRowCount+M:s)),o.length)for(w=0;w<o.length;w++)S=this._getSelectedViewData(o[w]).viewIndex,-1!=e.inArray(S,this._currentLoadedIndexes)&&this._virtaulSel.push(o[w]),this._virtualSelectedRecords[o[w]]||(this._virtualSelectedRecords[o[w]]=this._getSelectedViewData(o[w]).data);m=this._getSelectedViewData(s,n,A).data,R=this._prevSelIndex,N=this._prevSelRow}else{var P=this.model.pageSettings.pageSize,L=this.getRowByIndex(s).attr("name"),F=t.isNullOrUndefined(L)?s:parseInt(L)/P+1,j=s%P,V=parseInt(s/P),z=V*P;if(!t.isNullOrUndefined(V)&&V>0&&-1==e.inArray(z,this.virtualLoadedPages)&&t.isNullOrUndefined(n))if(j--,this._virIndex=!0,this._virtualTrIndex=j,this.gotoPage(V+1),p=this,this._dataSource()instanceof t.DataManager){if(this._queryPromise.done(function(e){var t;p._virtuaOtherPage=!0,p._virtualdata=p._currentJsonData,p._pageTo=V,p._virtualScrollingSelection&&(p._virtualSelRecords=e.virtualSelectRecords);var i=parseInt(s/p.model.pageSettings.pageSize)*p.model.pageSettings.pageSize,l=(parseInt(s/p.model.pageSettings.pageSize)+1)*p.model.pageSettings.pageSize,n=[];for(n.push(s),t=1;t<o.length;t++)i<o[t]&&o[t]<l&&n.push(o[t]);return p.selectRows(n),!1}),p._virtualScrollingSelection)return}else{if(p._virtualdata=p._currentJsonData,o.length>0)for(p._virtualSelRecords=[],w=0;w<o.length;w++)p._virtualSelRecords.push(this.model.dataSource[o[w]]);p._pageTo=V}for(this._virtuaOtherPage&&(this._virtuaOtherPage=!1),w=0;w<this._loadedJsonData.length;w++)this._loadedJsonData[w].pageIndex==F&&(c=this._loadedJsonData[w].data);m=t.isNullOrUndefined(c)?this._currentJsonData[j]:c[j],m=this._virtualScrollingSelection?this._virtualSelRecords:m,z=this._pageTo*P,!t.isNullOrUndefined(this._virtualdata)&&this._virtualdata.length>0?(s=e(document.getElementsByName(z)[j]).index(),m=this._virtualdata[j],this._virtualdata=[]):e(document.getElementsByName(V*P)).length>0&&!t.isNullOrUndefined(this._pageTo)&&(s=e(document.getElementsByName(V*P)[s%P]).index())}if(I={rowIndex:O,row:g.eq(s),data:m,target:n,prevRow:N,prevRowIndex:R},!this._trigger("rowSelecting",I)){if(n&&n.hasClass("e-checkselectall")&&this._isLocalData&&this._isMapSelection)return this._headerCheckUpdateAll(!n[0].checked);if(g=e(this.getRows()),this._isMapSelection&&!this._selectionByGrid&&t.isNullOrUndefined(l)&&!o.length)return m[this._selectionMapColumn]=!I.row.find(".e-checkcelldiv input").prop("checked"),void this.updateRecord(this._primaryKeys[0],m,"update");if((this.model.editSettings.allowEditing||this.model.editSettings.allowAdding)&&this.model.isEdit&&this.model.enableAutoSaveOnSelectionChange&&(!this.model.editSettings.showAddNewRow||"normal"!=this.model.editSettings.editMode||0!=this.getContentTable().find(".e-editedrow").length)){if(this.endEdit())return;("externalform"==this.model.editSettings.editMode||"externalformtemplate"==this.model.editSettings.editMode)&&e("#"+this._id+"_externalEdit").css("display","none")}if(this._checkSelectedRowsIndexes[u]!=i||this._isMapSelection||(this._checkSelectedRowsIndexes[u]=[]),o.length>0){for(w=0;w<o.length;w++)-1==this.selectedRowsIndexes.indexOf(o[w])&&this.selectedRowsIndexes.push(o[w]),this._isMapSelection&&!this._selectionByGrid&&((D=this._currentJsonData[o[w]])[this._selectionMapColumn]=!0,this.batchChanges.changed.push(D));if(!this.model.scrollSettings.enableVirtualization)for(f=this._virtaulSel[0]-s,w=0;w<this._virtaulSel.length;w++)this._virtaulSel[w]-=f;if(rows=this.getRowByIndex(this.model.scrollSettings.allowVirtualScrolling?this._virtaulSel:o),this.model.scrollSettings.frozenColumns&&(rows=e(rows[0]).add(rows[1])),e(rows).attr("aria-selected","true").find(".e-rowcell, .e-detailrowcollapse, .e-detailrowexpand").addClass("e-selectionbackground e-active"),this._enableCheckSelect&&!this._isMapSelection&&e(rows).find(".e-checkcelldiv input").prop("checked","checked"),Array.prototype.push.apply(this.model.selectedRecords,this.getSelectedRecords()),this._isMapSelection&&!this._selectionByGrid)return void this.batchSave()}else if(t.isNullOrUndefined(l)||t.isNullOrUndefined(s))switch(O=s=t.isNullOrUndefined(s)?l:s,this.model.selectionType){case t.Grid.SelectionType.Multiple:if(this.multiSelectCtrlRequest){this.model.selectedRecords=[],-1!=(_=e.inArray(O,this.selectedRowsIndexes))&&!this._isMapSelection&&this.clearSelection(O,n)&&this.selectedRowsIndexes.splice(_,0),-1==_&&(this.selectedRowsIndexes.push(O),(v=this.getRowByIndex(s)).attr("aria-selected","true").find(".e-rowcell, .e-detailrowcollapse, .e-detailrowexpand").addClass("e-selectionbackground e-active"),this.model.scrollSettings.enableVirtualization?this._virtualSelectedRecords[O]=this._getSelectedViewData(s,n).data:this._virtualSelectAction(F,s,P),this._enableCheckSelect&&n&&!n.parent().hasClass("e-checkcelldiv")&&v.find(".e-checkcelldiv input").prop("checked","checked")),Array.prototype.push.apply(this.model.selectedRecords,this.getSelectedRecords());break}case t.Grid.SelectionType.Single:this.clearSelection(),this.clearColumnSelection(),this.selectedRowsIndexes=[],this.model.selectedRecords=[],this._virtualSelectedRecords={},this.selectedRowsIndexes.push(O),this.getRowByIndex(s).attr("aria-selected","true").find(".e-rowcell, .e-detailrowcollapse, .e-detailrowexpand").addClass("e-selectionbackground e-active"),this.model.scrollSettings.enableVirtualization?this._virtualSelectedRecords[O]=m:this._virtualSelectAction(F,s,P),Array.prototype.push.apply(this.model.selectedRecords,this.getSelectedRecords()),this._enableCheckSelect&&this.getRowByIndex(s).find(".e-checkcelldiv [type=checkbox]").prop("checked",!0)}else if(this.model.selectionType==t.Grid.SelectionType.Multiple&&(this._isMapSelection||this.clearSelection(),this.clearColumnSelection(),this.selectedRowsIndexes=[],this.model.selectedRecords=[],this._virtualSelectedRecords={},$toIndex=l,this._virtualUnSel=[],this._virtualUnSelIndexes=[],this._isMapSelection||!(n&&n.hasClass("e-checkselectall")&&n[0].checked))){for(this.model.scrollSettings.enableVirtualization&&n&&(S=this._getSelectedViewData(l,n).viewIndex,b=l%this._virtualRowCount,$toIndex=S*this._virtualRowCount-(this._virtualRowCount-b),O!=this._prevSelIndex&&(O=this._prevSelIndex)),h=O-$toIndex<0,this.model.scrollSettings.enableVirtualization||(rows=h?this.getRowByIndex(s,l+1):this.getRowByIndex(l,s+1)),this.model.scrollSettings.frozenColumns&&(rows=e(rows[0]).add(rows[1])),C=[],w=h?O:$toIndex,y=h?$toIndex:O;w<=y;w++)this.model.scrollSettings.allowVirtualScrolling&&(this.model.scrollSettings.enableVirtualization?(this._virtualSelectedRecords[w]=this._getSelectedViewData(w).data,S=this._getSelectedViewData(w).viewIndex,-1!=e.inArray(S,this._currentLoadedIndexes)?(x=this._currentLoadedIndexes.indexOf(S),0==(T=w%this._virtualRowCount+x*this._virtualRowCount)&&this._virtualRowCount,C.push(T)):(this._virtualUnSel.push(w),-1==e.inArray(S,this._virtualUnSelIndexes)&&this._virtualUnSelIndexes.push(S))):(L=this.getRowByIndex(w).attr("name"),F=t.isNullOrUndefined(L)?s:parseInt(L)/P+1,this._virtualSelectAction(F,w,P))),this.selectedRowsIndexes.push(w),this._isMapSelection&&!this._selectionByGrid&&((D=this._currentJsonData[w])[this._selectionMapColumn]=!0,this.batchChanges.changed.push(D));if(this._isMapSelection)return void this.batchSave();this.model.scrollSettings.enableVirtualization&&(rows=this.getRowByIndex(C[0],C[C.length-1]+1)),e(rows).attr("aria-selected","true").find(".e-rowcell, .e-detailrowcollapse, .e-detailrowexpand").addClass("e-selectionbackground e-active"),Array.prototype.push.apply(this.model.selectedRecords,this.getSelectedRecords()),this._enableCheckSelect&&e(rows).find(".e-checkcelldiv input").prop("checked","checked")}this._enableCheckSelect&&(this._checkSelectedRowsIndexes[u]=this.selectedRowsIndexes,this._selectAllCheck||(this.selectedRowsIndexes.length==this._currentJsonData.length?this.getHeaderTable().find(".e-headercelldiv .e-checkselectall").prop("checked","checked"):this._selectionByGrid&&this.getHeaderTable().find(".e-headercelldiv .e-checkselectall").prop("checked",!1))),this._selectedRow()!==O&&this._selectedRow(O),n&&n.hasClass("e-checkselectall")&&!this._isMapSelection&&(k=this,this._checkSelectedRowsIndexes=n.is(":checked")?[]:e.map(Array(this.model.pageSettings.totalPages),function(){return Array(e.map(Array(k.model.pageSettings.pageSize),function(e,t){return t}))})),m=this._virtualScrollingSelection?this._virtualSelRecords:m,I={rowIndex:this.model.scrollSettings.enableVirtualization?O:this._selectedRow(),row:this.getRowByIndex(this._selectedRow()),data:m,target:n,prevRow:N,prevRowIndex:R},this._previousIndex=this.selectedRowsIndexes.length?s:this._previousIndex,this.model.scrollSettings.enableVirtualization&&(this._prevSelIndex=O,this._prevSelRow=this.getRowByIndex(s)),e(this.getRowByIndex(s)).is('[role="row"]')&&this._trigger("rowSelected",I)}},_selectingMultipleRows:function(e){this._modelMultiSelectedIndexes=e,this.clearSelection(),this.multiSelectCtrlRequest=!0;for(var t=0;t<e.length;t++)this.selectRows(e[t]);this.multiSelectCtrlRequest=!1,this.model.selectedRowIndices=this._modelMultiSelectedIndexes,this._modelMultiSelectedIndexes=[]},_virtualSelectAction:function(e,i,s){this.model.scrollSettings.allowVirtualScrolling&&!t.isNullOrUndefined(i)&&(this._virtualSelectedRecords[i]=t.isNullOrUndefined(this._virtualLoadedRecords[e])?this._currentJsonData[i%s]:this._virtualLoadedRecords[e][i%s])},_getSelectedViewData:function(t,i,s){var l,n,o=t%this._virtualRowCount,a={};return l=i?parseInt(e(i).closest("tr").attr("name"),32):s||(t>1?Math.ceil((t+1)/this._virtualRowCount):1),a.viewIndex=l,this._virtualLoadedRecords[l]&&(a.data=this._virtualLoadedRecords[l][o]),n=t%this._virtualRowCount,a.rowIndex=l*this._virtualRowCount-(this._virtualRowCount-n),a},selectCells:function(s){var l,n,o,a,r,d,h,c,u,m,p,g,f,_,v;if(!this._allowcellSelection)return!1;if(l=null,a=this._excludeDetailRows(),l=this.model.scrollSettings.frozenColumns?this._frozenCell(s[0][0],s[0][1][0]):a.eq(s[0][0]).find(".e-rowcell:eq("+s[0][1]+")"),t.isNullOrUndefined(this._previousRowCellIndex)||0==this._previousRowCellIndex.length||(this.model.scrollSettings.enableVirtualization?(n=this._prevRowCell,o=this._preVirRowCellIndex):(n=e(this.getRowByIndex(this._previousRowCellIndex[0][0]).find(".e-rowcell:eq("+this._previousRowCellIndex[0][1]+")")),o=this._previousRowCellIndex)),r=this._currentJsonData[s[0][0]],d=s[0][0],this.model.scrollSettings.allowVirtualScrolling&&this.model.scrollSettings.enableVirtualization&&(r=(h=this._getSelectedViewData(s[0][0],l)).data,d=h.rowIndex),v={currentCell:l,cellIndex:s[0][1],data:r,previousRowCellIndex:o,previousRowCell:n},"multiple"==this.model.selectionType&&(v.isCtrlPressed=this.multiSelectCtrlRequest,v.isShiftPressed=this.multiSelectShiftRequest),!this._trigger("cellSelecting",v)){switch(this.model.selectionType){case t.Grid.SelectionType.Multiple:if(this.multiSelectCtrlRequest){-1!=(_=e.inArray(d,this._rowIndexesColl))?this.selectedRowCellIndexes[_].cellIndex.push(parseInt(s[0][1].toString())):(-1==e.inArray(d,this._rowIndexesColl)&&this._rowIndexesColl.push(d),this.selectedRowCellIndexes.push({rowIndex:d,cellIndex:s[0][1]})),l.addClass("e-cellselectionbackground e-activecell");break}if(this.multiSelectShiftRequest&&this._previousRowCellIndex!=i){this.clearCellSelection(),this.clearColumnSelection(),this.selectedRowCellIndexes=[];var b=this._previousRowCellIndex[0][0],C=parseInt(this._previousRowCellIndex[0][1]),w=s[0][0],y=parseInt(s[0][1]);if(this.model.scrollSettings.allowVirtualScrolling&&this.model.scrollSettings.enableVirtualization&&(b=this._preVirRowCellIndex[0][0],w=this._getSelectedViewData(w,this.getRowByIndex(w).find(".e-rowcell")).rowIndex),D=[],"box"==this.model.selectionSettings.cellSelectionMode){this.model.scrollSettings.frozenColumns?this.getRows()[0].length:this.getRows().length;var S=C<y?C:y,x=S==y?C:y,T=[],D=[];for(m=S;m<=x;m++){if((c=b)<(u=w))for(g=c;g<=u;g++)-1==e.inArray(g,T)&&T.push(g),this._selectMultipleCells(g,m,y,C);else for(g=u;g<=c;g++)-1==e.inArray(g,T)&&T.push(g),this._selectMultipleCells(g,m,y,C);D.push(m)}for(m=0;m<T.length;m++)this.selectedRowCellIndexes.push({rowIndex:T[m],cellIndex:D});this._rowIndexesColl=t.distinct(T)}else if(w>b)for(m=b;m<=w;m++){for(D=[],c=m==b?C:0,u=m==w?y:this.model.columns.length-1,g=c;g<=u;g++)D.push(g),this._selectMultipleCells(m,g,y,C);this.selectedRowCellIndexes.push({rowIndex:m,cellIndex:D}),this._rowIndexesColl.push(m)}else for(m=b;m>=w;m--){if(D=[],(c=m==b?C:this.model.columns.length-1)>(u=m==w?y:0))for(g=c;g>=u;g--)D.push(g),this._selectMultipleCells(m,g,y,C);else for(g=u;g>=c;g--)D.push(g),this._selectMultipleCells(m,g,y,C);this.selectedRowCellIndexes.push({rowIndex:m,cellIndex:D}),this._rowIndexesColl.push(m)}break}for(this.clearCellSelection(),this._virtualRowCellSelIndex=[],m=0;m<s.length;m++)if(s[m][1].length>1)for(p=a.eq(s[m][0]).find(".e-rowcell"),this.model.scrollSettings.frozenColumns&&(p=e(a[0]).eq(s[m][0]).find(".e-rowcell").add(e(a[1]).eq(s[m][0]).find(".e-rowcell"))),g=0;g<p.length;g++)f=null!=this.model.detailsTemplate||null!=this.model.childGrid?p[g].cellIndex-1:g,-1!=e.inArray(f,s[m][1])&&(e(p[g]).addClass("e-cellselectionbackground e-activecell"),-1!=(_=e.inArray(s[m][0],this._rowIndexesColl))?this.selectedRowCellIndexes[_].cellIndex.push(p[g].cellIndex):(d=s[m][0],this.model.scrollSettings.allowVirtualScrolling&&this.model.scrollSettings.enableVirtualization&&(r=(h=this._getSelectedViewData(d,p)).data,d=h.rowIndex),this.selectedRowCellIndexes.push({rowIndex:d,cellIndex:[p[g].cellIndex]}),this._rowIndexesColl.push(s[m][0])));else this.model.scrollSettings.frozenColumns?this._frozenCell(s[m][0],s[m][1][0]).addClass("e-cellselectionbackground e-activecell"):e(this.getRowByIndex(s[m][0]).find(".e-rowcell:eq("+s[m][1]+")")).addClass("e-cellselectionbackground e-activecell"),this.selectedRowCellIndexes.push({rowIndex:d,cellIndex:s[m][1]}),this._rowIndexesColl.push(d);break;case t.Grid.SelectionType.Single:this.clearCellSelection(),this.clearColumnSelection(),this.selectedRowCellIndexes=[],this._virtualRowCellSelIndex=[],-1==e.inArray(d,this._rowIndexesColl)&&this._rowIndexesColl.push(d),this.selectedRowCellIndexes.push({rowIndex:d,cellIndex:s[0][1]}),this.model.scrollSettings.frozenColumns?this._frozenCell(s[0][0],s[0][1][0]).addClass("e-cellselectionbackground e-activecell"):e(this.getRowByIndex(s[0][0]).find(".e-rowcell:eq("+s[0][1]+")")).addClass("e-cellselectionbackground e-activecell")}v={currentCell:l,cellIndex:s[0][1],data:r,selectedRowCellIndex:this.selectedRowCellIndexes,previousRowCellIndex:o,previousRowCell:n},(!this.multiSelectShiftRequest||t.isNullOrUndefined(this._previousRowCellIndex))&&(this._previousRowCellIndex=s,this.model.scrollSettings.allowVirtualScrolling&&this.model.scrollSettings.enableVirtualization&&(this._preVirRowCellIndex=e.extend(!0,[],s),this._preVirRowCellIndex[0][0]=d),this._prevRowCell=l),this._trigger("cellSelected",v)}},_selectMultipleCells:function(t,i){var s,l,n;this.model.scrollSettings.frozenColumns?this._frozenCell(t,i).addClass("e-cellselectionbackground e-activecell"):this.model.scrollSettings.allowVirtualScrolling&&this.model.scrollSettings.enableVirtualization?(s=this._getSelectedViewData(t).viewIndex,-1!=e.inArray(s,this._currentLoadedIndexes)&&(l=this._currentLoadedIndexes.indexOf(s),n=t%this._virtualRowCount+l*this._virtualRowCount,e(this.getRowByIndex(n).find(".e-rowcell:eq("+i+")")).addClass("e-cellselectionbackground e-activecell"),-1==e.inArray(t,this._virtualRowCellSelIndex)&&-1!=e.inArray(t,this._rowIndexesColl)&&t!=this._preVirRowCellIndex[0][0]&&this._virtualRowCellSelIndex.push(t))):e(this.getRowByIndex(t).find(".e-rowcell:eq("+i+")")).addClass("e-cellselectionbackground e-activecell")},selectColumns:function(s,l){var n,o,a,r,d,h;if(!this._allowcolumnSelection)return!1;this._allowcolumnSelection=!0;var c=this.getRows(),u=this.getHeaderTable().find(".e-columnheader").last().find("th.e-headercell").not(".e-detailheadercell")[this._previousColumnIndex],m={columnIndex:s==i?l:s,headerCell:e(this.getHeaderTable().find(".e-columnheader").last().find("th.e-headercell").not(".e-detailheadercell")[s]),column:this.model.columns[s],previousColumnIndex:this._previousColumnIndex,prevColumnHeaderCell:u},p=this._previousColumnIndex;if(this._previousColumnIndex=1==(m.isShiftPressed=this.multiSelectShiftRequest)?s==i?l:s:l,"multiple"==this.model.selectionType&&(m.isCtrlPressed=this.multiSelectCtrlRequest,m.isShiftPressed=this.multiSelectShiftRequest),!this._trigger("columnSelecting",m)){if(t.isNullOrUndefined(l)||t.isNullOrUndefined(s))switch(s=t.isNullOrUndefined(s)?l:s,this.model.selectionType){case t.Grid.SelectionType.Multiple:if(this.multiSelectCtrlRequest){if(-1!=(n=e.inArray(s,this.selectedColumnIndexes))&&this.clearColumnSelection(s)&&this.selectedColumnIndexes.splice(n,0),-1==n){if(this.selectedColumnIndexes.push(s),this._previousColumnIndex=this.selectedColumnIndexes.length?s:i,(null!=this.model.detailsTemplate||null!=this.model.childGrid)&&++s,this.model.scrollSettings.frozenColumns)this._frozenColumnSelection(c,s);else for(d=0;d<c.length;d++)e(c[d].cells[s]).addClass("e-columnselection");e(this.getHeaderTable().find("th.e-headercell:not(.e-stackedHeaderCell)")[s]).addClass("e-columnselection")}break}case t.Grid.SelectionType.Single:if(this.clearSelection(),this.clearCellSelection(),this.clearColumnSelection(),this.selectedColumnIndexes=[],this.selectedColumnIndexes.push(s),this._previousColumnIndex=this.selectedColumnIndexes.length?s:i,(null!=this.model.detailsTemplate||null!=this.model.childGrid)&&++s,this.model.scrollSettings.frozenColumns)this._frozenColumnSelection(c,s);else for(d=0;d<c.length;d++)e(c[d].cells[s]).addClass("e-columnselection");e(this.getHeaderTable().find("th.e-headercell:not(.e-stackedHeaderCell)")[s]).addClass("e-columnselection")}else if(this.model.selectionType==t.Grid.SelectionType.Multiple)if(this.clearColumnSelection(),this.selectedColumnIndexes=[],o=0,(null!=this.model.detailsTemplate||null!=this.model.childGrid)&&(++s,++l,o=1),a=s>l?l:s,r=s>l?s+1:l+1,this.model.scrollSettings.frozenColumns)this._frozenColumnSelection(c,a,r);else for(d=a;d<r;d++){for(h=0;h<c.length;h++)e(c[h].cells[d]).addClass("e-columnselection");e(this.getHeaderTable().find("th.e-headercell:not(.e-stackedHeaderCell)")[d]).addClass("e-columnselection"),this.selectedColumnIndexes.push(d-o)}m={columnIndex:s==i?l:s,headerCell:e(this.getHeaderTable().find(".e-columnheader").last().find("th").not(".e-detailheadercell")[s]),column:this.model.columns[s],selectedColumnIndex:this.selectedColumnIndexes,previousColumnIndex:p,prevColumnHeaderCell:u},this._trigger("columnSelected",m)}},clearSelection:function(i,s){var l,n,o,a,r=i;return this._selectedRow()>=-1&&(l=this.model.scrollSettings.frozenColumns||!t.isNullOrUndefined(this.model.detailsTemplate||this.model.childGrid)?this._excludeDetailRows():e(this.element.find("tr[aria-selected='true']")),t.isNullOrUndefined(i)?(l.removeAttr("aria-selected").find(".e-rowcell, .e-detailrowcollapse, .e-detailrowexpand").removeClass("e-selectionbackground").removeClass("e-active"),this._clearVirtualSelection||(this.selectedRowsIndexes=[],this.model.selectedRecords=[],this.model.selectedRowIndices=[]),this._selectionByGrid||(l.find(".e-checkcelldiv [type=checkbox]").prop("checked",!1),this._isMapSelection&&this._headerCheckUpdateAll(!1),Array.prototype.push.apply(this.model.selectedRecords,this.getSelectedRecords()))):(this.getRowByIndex(i).removeAttr("aria-selected").find(".e-selectionbackground").removeClass("e-selectionbackground").removeClass("e-active"),n=this.getRowByIndex(i),this.model.scrollSettings.enableVirtualization&&this.multiSelectCtrlRequest&&-1==e.inArray(i,this.selectedRowsIndexes)&&(i=parseInt(n.attr("name"),32)*this._virtualRowCount-(this._virtualRowCount-n.index()%this._virtualRowCount)),-1!=(i=e.inArray(i,this.selectedRowsIndexes))&&this.selectedRowsIndexes.splice(i,1),this._enableCheckSelect&&!s&&n.find(".e-checkcelldiv [type=checkbox]").prop("checked",!1),this._isMapSelection&&(this._selectionByGrid||t.isNullOrUndefined(i)||-1==i||((o=this._currentJsonData[r])[this._selectionMapColumn]=!1,this.updateRecord(this._primaryKeys[0],o,"update")),Array.prototype.push.apply(this.model.selectedRecords,this.getSelectedRecords()))),this._enableCheckSelect&&(this.selectedRowsIndexes.length==this._currentJsonData.length||this._selectAllCheck||this.getHeaderTable().find(".e-headercheckcelldiv .e-checkselectall").prop("checked",!1),a=this._currentPage()-1,checkBoxIndex=e.inArray(r,this._checkSelectedRowsIndexes[a]),-1!=checkBoxIndex&&this._checkSelectedRowsIndexes[a].splice(i,1),this.selectedRowsIndexes.length||this._isMapSelection||s||(this._checkSelectedRowsIndexes[a]=[],l.find(".e-checkcelldiv [type=checkbox]").prop("checked",!1))),this.selectedRowsIndexes.length||this._selectedRow(-1)),!0},_excludeDetailRows:function(){return t.isNullOrUndefined(this.model.detailsTemplate||this.model.childGrid||this.model.showSummary)||this.model.scrollSettings.frozenColumns?this.model.scrollSettings.frozenColumns>0&&null!=this.getRows()&&this.getRows().length>1?e(this.getRows()[0]).not(".e-detailrow,.e-gridSummaryRows").add(e(this.getRows()[1]).not(".e-detailrow,.e-gridSummaryRows")):e(this.getRows()):e(this.getRows()).not(".e-detailrow,.e-gridSummaryRows")},clearCellSelection:function(i,s){var l,n,o;if(this._allowcellSelection)if(l=t.isNullOrUndefined(i)&&t.isNullOrUndefined(this.model.detailsTemplate||this.model.childGrid)?e(this.element.find(".e-cellselectionbackground")).parent():this._excludeDetailRows(),t.isNullOrUndefined(i))this.model.scrollSettings.frozenColumns&&(l=e(l[0]).add(l[1])),l.find(".e-rowcell, .e-detailrowcollapse, .e-detailrowexpand").removeClass("e-cellselectionbackground").removeClass("e-activecell"),this.selectedRowCellIndexes=[],this._rowIndexesColl=[];else{for(o=0;o<this.selectedRowCellIndexes.length;o++)if(this.selectedRowCellIndexes[o].rowIndex==i){n=e.inArray(s,this.selectedRowCellIndexes[o].cellIndex),this.model.scrollSettings.frozenColumns?this._frozenCell(i,s).removeClass("e-cellselectionbackground").removeClass("e-activecell"):l.eq(i).find(".e-rowcell").eq(s).removeClass("e-cellselectionbackground").removeClass("e-activecell");break}o!=this.selectedRowCellIndexes.length&&(this.selectedRowCellIndexes[o].cellIndex.splice(n,1),0==this.selectedRowCellIndexes[o].cellIndex.length&&(this.selectedRowCellIndexes.splice(o,1),this._rowIndexesColl.splice(e.inArray(i,this._rowIndexesColl),1)))}return!0},clearColumnSelection:function(i){var s,l,n,o,a;if(this._allowcolumnSelection)if(s=e(this._excludeDetailRows()),t.isNullOrUndefined(i))this.model.scrollSettings.frozenColumns&&(s=e(s[0]).add(s[1])),s.find(".e-rowcell").removeClass("e-columnselection"),e(this.getHeaderTable().find("th.e-headercell:not(.e-stackedHeaderCell)")).removeClass("e-columnselection"),this.selectedColumnIndexes=[];else{if(l=0,(null!=this.model.detailsTemplate||null!=this.model.childGrid)&&(++i,l=1),this.model.scrollSettings.frozenColumns)for(n=0,currentIndex=i,i>=this.model.scrollSettings.frozenColumns&&(n=1,currentIndex=i-this.model.scrollSettings.frozenColumns),o=0;o<s[n].length;o++)e(s[n][o].cells[currentIndex]).removeClass("e-columnselection");else for(a=0;a<s.length;a++)e(s[a].cells[i]).removeClass("e-columnselection");e(this.getHeaderTable().find("th.e-headercell:not(.e-stackedHeaderCell)")[i]).removeClass("e-columnselection"),this.selectedColumnIndexes.splice(0,i-l)}return!0},getSelectedRows:function(){for(var t=e(),i=0;i<this.selectedRowsIndexes.length;i++)this.model.scrollSettings.frozenColumns>0?(t.push(this.getRowByIndex(this.selectedRowsIndexes[i])[0]),t.push(this.getRowByIndex(this.selectedRowsIndexes[i])[1])):t.push(this.getRowByIndex(this.selectedRowsIndexes[i])[0]);return t},getSelectedRecords:function(){var t,i,s=[];if($gridRows=this.getRows(),this._virtualScrollingSelection)return this._virtualSelRecords;for(t=0;t<this.selectedRowsIndexes.length;t++)-1!=this.selectedRowsIndexes[t]&&("batch"==this.model.editSettings.editMode&&e($gridRows[this.selectedRowsIndexes[t]]).hasClass("e-insertedrow")?(i=this.batchChanges.added.reverse(),s.push(i[this.selectedRowsIndexes[t]]),this.batchChanges.added.reverse()):this.model.scrollSettings.allowVirtualScrolling?s.push(this._virtualSelectedRecords[this.selectedRowsIndexes[t]]):"batch"==this.model.editSettings.editMode?s.push(this._currentJsonData[this.selectedRowsIndexes[t]-this.batchChanges.added.length]):s.push(this._currentJsonData[this.selectedRowsIndexes[t]]));return s},_setCurrentRow:function(e){(e==t.Grid.Actions.Refresh||e==t.Grid.Actions.Ungrouping||e==t.Grid.Actions.Grouping||e==t.Grid.Actions.Filtering||e==t.Grid.Actions.Sorting||e==t.Grid.Actions.Delete||e==t.Grid.Actions.Save||e==t.Grid.Actions.Cancel||e==t.Grid.Actions.Paging)&&(this._selectedRow(-1),this._virtualDataRefresh||(this.selectedRowsIndexes=[]))},_renderMultiTouchDialog:function(){var e,i,s;this._customPop=t.buildTag("div.e-gridpopup","",{display:"none"}),e=t.buildTag("div.e-content"),i=t.buildTag("div.e-downtail e-tail"),this.model.allowMultiSorting&&(s=t.buildTag("span.e-sortdirect e-icon"),e.append(s)),this.model.selectionType==t.Grid.SelectionType.Multiple&&(s=t.buildTag("span.e-rowselect e-icon"),e.append(s)),this._customPop.append(e),this._customPop.append(i),this.element.append(this._customPop)}}}(jQuery,Syncfusion),function(e,t,s){t.gridFeatures=t.gridFeatures||{},t.widget("ejGrid","ej.Grid",{_rootCSS:"e-grid",element:null,validTags:["div"],model:null,_requiresID:!0,keyConfigs:{focus:"e",insertRecord:"45",deleteRecord:"46",editRecord:"113",saveRequest:"13",cancelRequest:"27",nextPage:"34",previousPage:"33",lastPage:"ctrl+alt+34",firstPage:"ctrl+alt+33",nextPager:"alt+34",previousPager:"alt+33",firstCellSelection:"36",lastCellSelection:"35",firstRowSelection:"ctrl+36",lastRowSelection:"ctrl+35",rowUpSelection:"ctrl+shift+38",rowDownSelection:"ctrl+shift+40",randomSelection:"ctrl+shift+83",upArrow:"38",downArrow:"40",rightArrow:"39",leftArrow:"37",moveCellRight:"9",moveCellLeft:"shift+9",selectedGroupExpand:"alt+40",totalGroupExpand:"ctrl+40",selectedGroupCollapse:"alt+38",totalGroupCollapse:"ctrl+38",multiSelectionByUpArrow:"shift+38",multiSelectionByDownArrow:"shift+40"},_ignoreOnPersist:["query","isEdit","toolbarClick","queryCellInfo","mergeCellInfo","currentViewData","enableAltRow","enableRTL","contextClick","contextOpen","rowDataBound","rowTemplate","detailsDataBound","detailsTemplate","childGrid","summaryRows","toolbarSettings","editSettings","allowMultiSorting","enableAutoSaveOnSelectionChange","locale","allowCellMerging","allowTextWrap","textWrapSettings","cssClass","dataSource","groupSettings.enableDropAreaAutoSizing","enableRowHover","showSummary","allowGrouping","enableHeaderHover","allowKeyboardNavigation","scrollSettings.frozenRows","scrollSettings.frozenColumns","enableTouch","contextMenuSettings.enableContextMenu","exportToExcelAction","exportToWordAction","exportToPdfAction"],ignoreOnExport:["isEdit","toolbarClick","query","queryCellInfo","selectionType","currentViewData","rowDataBound","rowTemplate","detailsDataBound","detailsTemplate","editSettings","pageSettings","enableAutoSaveOnSelectionChange","localization","allowScrolling","cssClass","dataSource","groupSettings.enableDropAreaAnimation","enableRowHover","allowSummary","enableHeaderHover","allowKeyboardNavigation"],observables:["dataSource","selectedRowIndex","pageSettings.currentPage","selectedRowIndices"],_tags:[{tag:"columns",attr:["allowEditing","allowFiltering","filterType","allowGrouping","allowResizing","allowSorting","cssClass","customAttributes","dataSource","defaultValue","disableHtmlEncode","editTemplate","editType","foreignKeyField","foreignKeyValue","headerTemplateID","headerText","isFrozen","isIdentity","isPrimaryKey","filterBarTemplate","textAlign","templateID","textAlign","headerTextAlign","tooltip","clipMode","validationRules.minlength","validationRules.maxlength","validationRules.range","validationRules.number","validationRules.required","editParams.decimalPlaces",[{tag:"commands",attr:["type","buttonOptions"]}]],content:"template"},{tag:"summaryRows",attr:["showCaptionSummary","showTotalSummary",[{tag:"summaryColumns",attr:["customSummaryValue","dataMember","displayColumn","summaryType","template"]}]]},{tag:"stackedHeaderRows",attr:[[{tag:"stackedHeaderColumns",attr:["headerText","column"]}]]},{tag:"filterSettings.filteredColumns",attr:[]},{tag:"sortSettings.sortedColumns",attr:[]}],_dataSource:t.util.valueFunction("dataSource"),_selectedRow:t.util.valueFunction("selectedRowIndex"),_selectedMultipleRows:t.util.valueFunction("selectedRowIndices"),_currentPage:t.util.valueFunction("pageSettings.currentPage"),defaults:{allowPaging:!1,showColumnChooser:!1,gridLines:"both",allowSorting:!1,showStackedHeader:!1,selectedRecords:[],stackedHeaderRows:[],allowFiltering:!1,allowMultipleExporting:!1,allowSelection:!0,allowGrouping:!1,showSummary:!1,allowResizing:!1,allowResizeToFit:!1,allowTextWrap:!1,allowCellMerging:!1,enableRowHover:!0,enablePersistence:!1,enableFocusout:!1,selectedRowIndex:-1,selectedRowIndices:[],allowSearching:!1,enableToolbarItems:!1,enableHeaderHover:!1,allowReordering:!1,allowKeyboardNavigation:!0,allowRowDragAndDrop:!1,enableTouch:!0,enableLoadOnDemand:!1,columnLayout:"auto",selectionType:"single",dataSource:null,cssClass:"",allowScrolling:!1,locale:"en-US",enableAutoSaveOnSelectionChange:!0,allowMultiSorting:!1,exportToExcelAction:"ExportToExcel",exportToWordAction:"ExportToWord",exportToPdfAction:"ExportToPdf",_groupingCollapsed:[],editSettings:{allowEditing:!1,showAddNewRow:!1,allowAdding:!1,showAddNewRow:!1,allowDeleting:!1,editMode:"normal",rowPosition:"top",dialogEditorTemplateID:null,allowEditOnDblClick:!0,externalFormTemplateID:null,inlineFormTemplateID:null,formPosition:"bottomleft",titleColumn:null,showConfirmDialog:!0,showDeleteConfirmDialog:!1},selectionSettings:{selectionMode:["row"],enableToggle:!1,cellSelectionMode:"flow"},resizeSettings:{resizeMode:"normal"},pageSettings:{pageSize:12,pageCount:8,currentPage:1,totalPages:null,enableTemplates:!1,showDefaults:!1,template:null,totalRecordsCount:null,enableQueryString:!1,printMode:"allpages"},groupSettings:{showDropArea:!0,showToggleButton:!1,showGroupedColumn:!0,showUngroupButton:!0,enableDropAreaAutoSizing:!0,captionFormat:null,groupedColumns:[]},contextMenuSettings:{enableContextMenu:!1,contextMenuItems:["Add Record","Edit Record","Delete Record","Sort In Ascending Order","Sort In Descending Order","Next Page","Last Page","Previous Page","First Page","Save","Cancel","Grouping","Ungrouping"],customContextMenuItems:[],subContextMenu:[],disableDefaultItems:!1},filterSettings:{filterType:"filterbar",filterBarMode:"immediate",showFilterBarStatus:!0,statusBarWidth:450,showPredicate:!1,filteredColumns:[],enableInterDeterminateState:!0,maxFilterChoices:1e3,enableCaseSensitivity:!1,immediateModeDelay:1500,enableComplexBlankFilter:!0,blankValue:""},searchSettings:{fields:[],key:"",operator:"contains",ignoreCase:!0},sortSettings:{sortedColumns:[]},toolbarSettings:{showToolbar:!1,toolbarItems:[],customToolbarItems:[]},minWidth:0,currentIndex:0,rowDropSettings:{dropMapper:null,dragMapper:null,dropTargetID:null},scrollSettings:{width:"auto",height:0,enableTouchScroll:!0,allowVirtualScrolling:!1,virtualScrollMode:"normal",frozenRows:0,frozenColumns:0,buttonSize:18,autoHide:!1,scrollerSize:18,scrollOneStepBy:57,enableVirtualization:!1},textWrapSettings:{wrapMode:"both"},summaryRows:[],enableRTL:!1,enableAltRow:!0,currentViewData:null,detailsTemplate:null,childGrid:null,keySettings:null,rowTemplate:null,detailsDataBound:null,rowDataBound:null,queryCellInfo:null,mergeCellInfo:null,create:null,actionBegin:null,actionComplete:null,actionFailure:null,beginEdit:null,endEdit:null,endAdd:null,endDelete:null,beforeBatchAdd:null,beforeBatchSave:null,beforeBatchDelete:null,beforePrint:null,batchAdd:null,batchDelete:null,cellSave:null,cellEdit:null,resizeStart:null,resizeEnd:null,resized:null,load:null,destroy:null,rowSelecting:null,rowSelected:null,cellSelecting:null,cellSelected:null,columnSelecting:null,columnSelected:null,columnDragStart:null,columnDrag:null,columnDrop:null,rowDrag:null,rowDragStart:null,rowDrop:null,beforeRowDrop:null,dataBound:null,recordClick:null,recordDoubleClick:null,templateRefresh:null,rightClick:null,detailsCollapse:null,detailsExpand:null,toolbarClick:null,contextOpen:null,contextClick:null,columns:[],query:null,isEdit:!1,isResponsive:!1,enableResponsiveRow:!1,virtualLoading:null},dataTypes:{dataSource:"data",query:"data",columns:"array",childGrid:"parent",gridLines:"enum",summaryRows:"array",stackedHeaderRows:"array",toolbarSettings:{toolbarItems:"array",customToolbarItems:"array"},contextMenuSettings:{contextMenuItems:"array",customContextMenuItems:"array",subContextMenu:"array"},selectionSettings:{selectionMode:"array",selectedRecords:"array"},sortSettings:{sortedColumns:"array"},filterSettings:{filteredColumns:"array",filterType:"enum",filterBarMode:"enum"},groupSettings:{groupedColumns:"array"},editSettings:{editMode:"enum",formPosition:"enum",rowPosition:"enum"},searchSettings:{fields:"array"},textWrapSettings:{wrapMode:"enum"}},_columns:function(){this.element.find(".e-gridheader").find("div").first().empty().append(this._renderGridHeader().find("table")),this._headerCellgDragDrop(),this.refreshContent(!0),this._trigger("refresh")},_summaryRows:function(e,i,s){if("showTotalSummary"==i||"showCaptionSummary"==i){var l=e.summaryRows,n=("true"==s.toLowerCase()||"false"==s.toLowerCase())&&t.parseJSON(s);this.option("summaryRows")[l][i]=n}this.element.find(".e-gridfooter").remove(),this._renderGridFooter().insertAfter(this.getContent()),("showCaptionSummary"==i||"title"==i)&&(this._isCaptionSummary=this.option("summaryRows")[l].showCaptionSummary,this.model.showSummary=this._isCaptionSummary,0!=this.model.groupSettings.groupedColumns.length&&this._refreshCaptionSummary())},_summaryRows_summaryColumns:function(e,i,s){("displayColumn"==i||"dataMember"==i)&&t.isNullOrUndefined(this.getColumnByField(s))||(this._createSummaryRows(this.getFooterTable()),0!=this.element.find(".e-groupcaptionsummary").length&&this._refreshCaptionSummary())},_stackedHeaderRows_stackedHeaderColumns:function(){this._refreshStackedHeader()},_sortSettings_sortedColumns:function(e,t,i){var s,l,n=this.model.sortSettings.sortedColumns[e["sortSettings.sortedColumns"]];"field"==t?(s=null!=this.getColumnByField(i)?i:null,l="ascending"==n.direction||"descending"==n.direction?n.direction:null):"direction"==t&&(s=null!=this.getColumnByField(n.field)?n.field:null,l="ascending"==i||"descending"==i?i:null),null!=s&&null!=l&&this.sortColumn(s,l)},_filterSettings_filteredColumns:function(e,i,s){var l,n,o,a,r,d=this.model.filterSettings.filteredColumns[e["filterSettings.filteredColumns"]];switch(i){case"field":l=null!=this.getColumnByField(s)?s:null,n=this._map(t.FilterOperators,d.operator),r=d.value,a="and"==d.predicate||"or"==d.predicate?d.predicate:null,o=d.matchcase;break;case"matchcase":l=null!=this.getColumnByField(d.field)?d.field:null,n=this._map(t.FilterOperators,d.operator),r=d.value,a="and"==d.predicate||"or"==d.predicate?d.predicate:null,o=("true"==s.toLowerCase()||"false"==s.toLowerCase())&&t.parseJSON(s);break;case"operator":l=null!=this.getColumnByField(d.field)?d.field:null,n=this._map(t.FilterOperators,s),r=d.value,a="and"==d.predicate||"or"==d.predicate?d.predicate:null,o=d.matchcase;break;case"predicate":l=null!=this.getColumnByField(d.field)?d.field:null,n=this._map(t.FilterOperators,d.operator),r=d.value,a="and"==s||"or"==s?s:null,o=d.matchcase;break;case"value":l=null!=this.getColumnByField(d.field)?d.field:null,n=this._map(t.FilterOperators,d.operator),r=s,a="and"==d.predicate||"or"==d.predicate?d.predicate:null,o=d.matchcase}null!=l&&null!=n&&null!=r&&null!=a&&null!=o&&this.filterColumn(l,n,r,a,o)},_map:function(t,i){var s=e.map(t,function(e){if(e===i)return e});return 0!=s.length?s[0]:null},_refreshCaptionSummary:function(){var t=document.createElement("div");t.innerHTML=["<table>",e.render[this._id+"_GroupingTemplate"](this.model.currentViewData,{groupedColumns:this.model.groupSettings.groupedColumns}),"</table>"].join(""),this.getContentTable().get(0).replaceChild(t.firstChild.firstChild,this.getContentTable().get(0).lastChild),this.refreshContent()},getContentTable:function(){return this._gridContentTable},setGridContentTable:function(e){this._gridContentTable=e},getContent:function(){return this._gridContent},setGridContent:function(e){this._gridContent=e},getHeaderContent:function(){return this._gridHeaderContent},setGridHeaderContent:function(e){this._gridHeaderContent=e},getHeaderTable:function(){return this._gridHeaderTable},setGridHeaderTable:function(e){this._gridHeaderTable=e},getRows:function(){return this._gridRows},getFilteredRecords:function(){return this._filteredRecords},getRowByIndex:function(i,s){var l;try{var n=this.getRows(),o=this._excludeDetailRows(),a=e();if(e.isArray(i)){for(l=0;l<i.length;l++)this.model.scrollSettings.frozenColumns>0?(a.push(n[0][i[l]]),a.push(n[1][i[l]])):a.push(n[i[l]]);return a}return t.isNullOrUndefined(s)?this.model.scrollSettings.frozenColumns>0?(a.push(n[0][i]),a.push(n[1][i]),a):e(o.not(".e-virtualrow")[i]):this.model.scrollSettings.frozenColumns>0?(a.push(e(n[0]).slice(i,s)),a.push(e(n[1]).slice(i,s)),a):e(o.not(".e-virtualrow").slice(i,s))}catch(t){return e()}},getColumnIndexByField:function(e){for(var t=0,i=this.model.columns,s=i.length;t<s;t++)if(i[t].field===e)return t;return-1},getColumnIndexByHeaderText:function(e,i){for(var s=0;s<this.model.columns.length;s++)if(this.model.columns[s].headerText==e){if(!i)break;if(t.isNullOrUndefined(this.model.columns[s].field)||""==this.model.columns[s].field)break}return s},getIndexByRow:function(t){var i,s=this.getRows(),l=this._excludeDetailRows();return this.model.scrollSettings.frozenColumns>0?(-1==(i=e(s[0]).index(t))&&(i=e(s[1]).index(t)),i):l.not(".e-virtualrow").index(t)},getPrimaryKeyFieldNames:function(){if(0!=this._primaryKeys.length)return this._primaryKeys;for(var e=0,t=this.model.columns,i=t.length;e<i;e++)t[e].isPrimaryKey&&this._primaryKeys.push(t[e].field);return this._primaryKeys},getVisibleColumnNames:function(){return this._visibleColumns},getHiddenColumnNames:function(){return this._hiddenColumns},getColumnByField:function(e){for(var t=0;t<this.model.columns.length&&this.model.columns[t].field!=e;t++);return t==this.model.columns.length?null:this.model.columns[t]},getsortColumnByField:function(e){for(var t=0;t<this.model.sortSettings.sortedColumns.length&&this.model.sortSettings.sortedColumns[t].field!=e;t++);return t==this.model.sortSettings.sortedColumns.length?null:this.model.sortSettings.sortedColumns[t]},getColumnByHeaderText:function(e,i){for(var s=0;s<this.model.columns.length;s++)if(this.model.columns[s].headerText==e){if(!i)break;if(t.isNullOrUndefined(this.model.columns[s].field)||""==this.model.columns[s].field)break}return s==this.model.columns.length?null:this.model.columns[s]},getCurrentViewData:function(){return this._currentJsonData},getColumnFieldNames:function(){for(var e=[],t=0;t<this.model.columns.length;t++)this.model.columns[t].field&&e.push(this.model.columns[t].field);return e},getBrowserDetails:function(){var t=navigator.userAgent.match(/(firefox|chrome|opera|msie|safari)\s?\/?(\d+(.\d+)*)/i);return navigator.userAgent.match(/Trident\/7\./)||navigator.userAgent.match(/Edge/)?{browser:"msie",version:e.uaMatch(navigator.userAgent).version}:{browser:t[1].toLowerCase(),version:t[2]}},_initPrivateProperties:function(){this._click=0,this._gridPhoneMode=320,this._columntemplaterefresh=!1,this._tabKey=!1,this._gridHeaderTable=null,this._gridWidth=this.element.width(),this._id=this.element.attr("id"),this._gridRows=[],this._unboundRow=null,this._gridContentTable=null,this._gridContent=null,this._remoteSummaryData=null,this._gridSort=null,this._gridHeaderContent=null,this._gridFooterContent=null,this._gridFooterTable=null,this._gridRecordsCount=null!==this._dataSource()?null==this.model.pageSettings.totalRecordsCount?this._dataSource().length:this.model.pageSettings.totalRecordsCount:0,this._links=null,this._gridPager=null,this._cSortedColumn=null,this._cSortedDirection=null,this._$curSElementTarget=null,this._gridFilterBar=null,this._$curFieldName=null,this._$prevFieldName=null,this._mediaStatus=!1,this._$fDlgIsOpen=!1,this._$menuDlgIsOpen=!1,this._$colType=null,this._$colFormat=null,this._$prevColType=null,this._$prevSElementTarget=null,this._currentFilterColumn=null,this._filteredRecordsCount=null,this._filteredRecords=[],this._validatedColumns=[],this.filterColumnCollection=[],this._previousFilterCount=null,this._excelFilter=null,this._isExcelFilter="excel"==this.model.filterSettings.filterType,this._$fkColumn=!1,this._fkParentTblData=[],this._primaryKeys=[],this._identityKeys=[],this._primaryKeyValues=[],this._modifiedRecords=[],this._addedRecords=[],this._tdsOffsetWidth=[],this._deletedRecords=[],this._disabledToolItems=e(),this._validationRules={},this._groupedColumns=[],this._LastColumnUnGroup=!1,this._scolumns=[],this._currentJsonData=[],this._groupingColumnIndex=0,this._dataManager=this._dataSource()instanceof t.DataManager?this._dataSource():null!=this._dataSource()?t.DataManager(this._dataSource()):null,null!=this._dataManager&&this.model.allowScrolling&&this.model.scrollSettings.allowVirtualScrolling&&null!=this.model.pageSettings.totalRecordsCount&&null!=this._dataManager.dataSource.json&&this._dataManager.dataSource.json.splice(this.model.pageSettings.totalRecordsCount),this._isRemoteSaveAdaptor=this._dataSource()instanceof t.DataManager&&this._dataSource().adaptor instanceof t.remoteSaveAdaptor,this._isLocalData=!0,this._disabledResizingColumns=[],this._disabledSortableColumns=[],this._disabledGroupableColumns=[],this._disabledFilterableColumns=[],this._disabledEditableColumns=[],this._hiddenColumns=[],this._visibleColumns=[],this._visibleColumnsField=[],this._hiddenColumnsField=[],this._ccVisibleColumns=[],this._ccHiddenColumns=[],this._sortedColumns=[],this.multiSortRequest=!1,this.multiSelectCtrlRequest=!1,this.multiSelectShiftRequest=!1,this._enableSelectMultiTouch=!1,this._enableSortMultiTouch=!1,this._templateRefresh=!1,this.initialRender=!1,this._selectDrag=!1,this._isAddNew=!1,this._fieldColumnNames={},this._headerColumnNames={},this._virtualLoadedRecords={},this._virtualLoadedRows={},this._virtualPageRecords={},this._queryCellView=[],this._currentPageViews=[],this._virtualLoadedPages=[],this._currentLoadedIndexes=[],this._prevVirtualSort=[],this._prevVirtualFilter=[],this._prevVirtualIndex=0,this._currentVirtualIndex=1,this._virtualRowCount=0,this._virtualSelectedRecords={},this._selectionByGrid=!1,this._enableCheckSelect=!1,this._checkSelectedRowsIndexes=[],this._isMapSelection=!1,this._selectionMapColumn=null,this._selectAllCheck=!1,this.selectedRowsIndexes=[],this._isReorder=!1,this._searchString="",this._searchCount=null,this.columnsWidthCollection=[],this._Indicator=null,this._resizer=null,this._bulkEditCellDetails={cellValue:null,rowIndex:-1,columnIndex:-1,fieldName:null,_data:null,cellEditType:"",cancelSave:!1,defaultData:null,insertedTrCollection:[],rowData:null},this.batchChanges={added:[],deleted:[],changed:[]},this._bulkEditTemplate=e(),this._confirmDialog=null,this._confirmedValue=!1,this._lastRow=!1,this._isVirtualRecordsLoaded=!1,this._scrollValue=0,this._currentTopFrozenRow=this.model.scrollSettings.frozenRows,this._rowHeightCollection=[],this._scrollObject=null,this._customPop=null,this.selectedRowCellIndexes=[],this._rowIndexesColl=[],this.selectedColumnIndexes=[],this._allowrowSelection=this._allowcellSelection=this._allowcolumnSelection=!1,this.commonQuery=e.extend(!0,{},this.model.query),t.gridFeatures.group&&(this._rowCol=this._captionSummary(),this._isCaptionSummary=(null!=this._rowCol&&this._rowCol.length)>0),this.phoneMode=!!(this.model.isResponsive&&document.documentElement.clientWidth<360),this.model.selectionSettings.selectionMode.length>0&&this.model.allowSelection&&this._initSelection(),this._mediaQuery=!1,this._columnChooserList=null,this._$headerCols=null,this._$contentCols=null,this._detailsOuterWidth=null,this._editForm=null,this._cloneQuery=null,this.localizedLabels=this._getLocalizedLabels(),this._searchBar=null,this._relationalColumns=[],this._dropDownManager={},this._isUngrouping=!1,this._columnChooser=!1,this._showHideColumns=!1,this._vCurrentTrIndex=null,this._lastVirtualPage=null,this._currentVIndex=null,(!this.model.enablePersistence||t.isNullOrUndefined(this._isHeightResponsive))&&(this._isHeightResponsive=!1),this._resize=!1,this._initHeight=0},_init:function(){var e,i,l;this._trigger("load"),!t.isNullOrUndefined(this.model.query)&&this.model.query instanceof t.Query||(this.model.query=t.Query()),t.isNullOrUndefined(this.model.parentDetails)||(e=this.model.queryString,i=this.model.foreignKeyField,this.model.query=this.model.query.clone(),l=this.model.parentDetails.parentKeyFieldValue===s?"undefined":this.model.parentDetails.parentKeyFieldValue,this.model.query.where(t.isNullOrUndefined(i)?e:i,"equal",l,!0)),this._initPrivateProperties(),t.gridFeatures.common&&this._initScrolling(),this.model.enableResponsiveRow&&this.element.addClass("e-responsive"),this._checkForeignKeyBinding(),this._checkDataBinding()},_initComplexColumn:function(e,i,s){var l,n,o,a=s||i;for(l in e)"object"!=typeof e[l]||t.isNullOrUndefined(e[l])?(n=a.concat(".").concat(l),o=e[l],this.model.columns.push({field:n,type:null!=o?o.getDay?o.getHours()>0||o.getMinutes()>0||o.getSeconds()>0||o.getMilliseconds()>0?"datetime":"date":typeof o:null})):(a=a.concat(".").concat(l),this._initComplexColumn(e[l],l,a))},_initColumns:function(i){for(var l,n,o,a,r;i.items!=s;)i=i.items[0];if(0==this.model.columns.length&&i){for(l in i)i.hasOwnProperty(l)&&("object"!=typeof i[l]||i[l]instanceof Date||null==i[l])?(n=i[l],this.model.columns.push({field:l,type:null!=n?n.getDay?n.getHours()>0||n.getMinutes()>0||n.getSeconds()>0||n.getMilliseconds()>0?"datetime":"date":typeof n:null})):"object"==typeof i[l]&&this._initComplexColumn(i[l],l);this.model.columns.length&&this._renderAfterColumnInitialize()}else for(o=0;o<this.model.columns.length;o++)this.model.columns[o].field=t.isNullOrUndefined(this.model.columns[o].field)?"":this.model.columns[o].field,t.isNullOrUndefined(this.model.columns[o].validationRules)||this._validatedColumns.push(this.model.columns[o].field),t.isNullOrUndefined(this.model.columns[o].type)?(a=t.isNullOrUndefined(this.model.columns[o].field)?null:t.getObject(this.model.columns[o].field,i),!!(r=this.model.columns[o].dataSource)&&this.model.columns[o].foreignKeyValue&&(this.model.columns[o].originalType=null!=a?a.getDay?a.getHours()>0||a.getMinutes()>0||a.getSeconds()>0||a.getMilliseconds()>0?"datetime":"date":typeof a:null,a=r instanceof t.DataManager?t.getObject("0."+this.model.columns[o].foreignKeyValue,this.model.columns[o].foreignKeyData):t.getObject("0."+this.model.columns[o].foreignKeyValue,r)),this.model.columns[o].type=null!=a?a.getDay?a.getHours()>0||a.getMinutes()>0||a.getSeconds()>0||a.getMilliseconds()>0?"datetime":"date":typeof a:null):"date"==this.model.columns[o].type&&this.model.columns[o].format==s&&1!=this._isReorder&&this.initialRender&&!this._showHideColumns?e.extend(this.model.columns[o],{format:"{0:"+t.preferredCulture(this.model.locale).calendars.standard.patterns.d+"}"}):"datetime"==this.model.columns[o].type&&this.model.columns[o].format==s&&1!=this._isReorder&&this.initialRender&&!this._showHideColumns&&e.extend(this.model.columns[o],{format:"{0:"+t.preferredCulture(this.model.locale).calendars.standard.patterns.d+" "+t.preferredCulture().calendars.standard.patterns.t+"}"})},_initSelection:function(){var e=this.model.selectionSettings.selectionMode;for(i=0;i<e.length;i++)this["_allow"+e[i]+"Selection"]=!0},_checkDataBinding:function(){var i,l,n,o,a;if(!this.model.columns.length&&((null==this._dataSource()||!this._dataSource().length)&&!(this._dataSource()instanceof t.DataManager)||this._dataSource()instanceof t.DataManager&&this._dataManager.dataSource.url==s&&!this._dataSource().dataSource.json.length))return this._renderAlertDialog(),this._alertDialog.find(".e-content").text(this.localizedLabels.EmptyDataSource),void this._alertDialog.ejDialog("open");if(this._initialRenderings(),this.model.editSettings.allowDeleting&&"multiple"==this.model.selectionType&&(this.multiDeleteMode=!0),this.initialRender=!0,this.model.enableRTL&&this.element.addClass("e-rtl"),this.model.allowFiltering&&this._isExcelFilter&&this._renderExcelFilter(),null!=this.model.cssClass&&this.element.addClass(this.model.cssClass),this.model.allowGrouping&&this.element.append(this._renderGroupDropArea()),(this.model.toolbarSettings.showToolbar||(this.model.allowSorting||this.model.allowFiltering)&&this.model.enableResponsiveRow)&&(this.element.append(this._renderToolBar()),"msie"==t.browserInfo().name&&t.browserInfo().version<10&&-1!=e.inArray("search",this.model.toolbarSettings.toolbarItems)&&(i=this.element.find(".e-toolbar.e-toolbarspan .e-gridsearchbar"),t.ieClearRemover(i[0]))),(l=this.model.columns)&&l.length){if(n=this.model.query._expands,"string"==typeof l[0])for(o=0;o<l.length;o++)l[o]={field:l[o]};for(o=0;o<l.length;o++)l[o].field&&-1!==l[o].field.indexOf(".")&&this._getExpands(l[o].field,n);this.model.query.expand(n),this.commonQuery.expand(n),this._renderAfterColumnInitialize()}this.model.allowPaging&&this.element.append(this._renderGridPager()),this.model.contextMenuSettings.enableContextMenu&&this.element.append(this._renderContext()),e.isFunction(e.fn.ejWaitingPopup)&&(this.element.ejWaitingPopup({showOnInit:!1}),e("#"+this._id+"_WaitingPopup").addClass("e-gridwaitingpopup")),this.model.scrollSettings.allowVirtualScrolling&&(this._loadedJsonData=[],this._prevPage=1),this._dataSource()instanceof t.DataManager?(this.element.ejWaitingPopup("show"),this._dataSource().ready!=s?(a=this,this._dataSource().ready.done(function(e){a._initDataSource(),a.model.dataSource=t.DataManager(e.result)})):(this.element.ejWaitingPopup("show"),this._initDataSource())):(this._ensureDataSource(),this._trigger("actionBegin"),this._setForeignKeyData(),0==this._relationalColumns.length&&this._initGridRender(),this._vRowHeight=Math.floor(this.getRowHeight()))},_renderColumnChooser:function(){var i,l,n,o,a,r,d,h,c,u,m=t.buildTag("button .e-ccButton",this.localizedLabels.Columns,{float:this.model.enableRTL?"left":"right"}).attr("type","button");this.element.prepend(m),m.ejButton({prefixIcon:"e-icon e-down-arrow",imagePosition:"imageright",contentType:"textandimage",type:"button",click:e.proxy(this._ccClickHandler,this),width:90}),i=m.outerHeight(),m.css("margin-top",0-i),l=parseInt(this.element.css("margin-top"),10),this.element.css("margin-top",l+i),t.buildTag("div"),n=t.buildTag("div .e-grid e-columnChooser","",{},{id:this._id+"ccDiv"}),e("#"+this._id+"ccDiv").data("ejDialog")!=s&&(e("#"+this._id+"ccDiv").ejDialog("destroy"),e("#"+this._id+"ccDiv").remove()),o=t.buildTag("div.e-searchbox e-fields").append(t.buildTag("input#"+this._id+"_ccSearchBox.e-ejinputtext e-filtertext",{},{},{type:"text"})),a=t.buildTag("span .e-searchfind e-icon"),o.append(a),r=t.buildTag("div","",{height:"228px"},{id:this._id+"liScrollerDiv"}),this._renderColumnChooserData(!1),r.append(this._columnChooserList),n.append(o),n.append(r),d=t.buildTag("div .e-columnChooserSplitter","",{"border-bottom":"0px"}),n.append(d),this.model.enableRTL?($buttonDiv=t.buildTag("div","",{float:"left","margin-top":"7px","margin-right":"-13px"}),h=t.buildTag("button",this.localizedLabels.Cancel,{"margin-right":"7px","margin-left":"9px"}),e(a).addClass("e-rtl")):($buttonDiv=t.buildTag("div","",{float:"right","margin-top":"7px","margin-right":"-13px"}),h=t.buildTag("button",this.localizedLabels.Cancel,{"margin-right":"20px","margin-left":"6px"})),c=t.buildTag("button",this.localizedLabels.Done),$buttonDiv.append(c),$buttonDiv.append(h),n.append($buttonDiv),c.ejButton({click:e.proxy(this._addButtonCC,this),showRoundedCorner:!0,width:66}),h.ejButton({click:e.proxy(this._cancelButtonHandler,this),showRoundedCorner:!0,width:66}),n.insertBefore(this.element),n.ejDialog({width:"auto",beforeClose:e.proxy(this._columnChooserBeforeClose,this),showOnInit:!1,allowKeyboardNavigation:!1,enableResize:!1,enableRTL:this.model.enableRTL,cssClass:this.model.cssClass,showHeader:!1,width:260}),"msie"==t.browserInfo().name&&t.browserInfo().version<10&&(u=e(".e-columnChooser").find("input#"+this._id+"_ccSearchBox")[0],t.ieClearRemover(u))},_renderColumnChooserData:function(i){var s,l,n,o,a,r,d,h=this.model.columns.length==this.getVisibleColumnNames().length;for(this._ccCheckBoxList=[],s=t.buildTag("div","",{"margin-left":"0px",width:"250px"}),l=0,n=-1;n<this.model.columns.length;n++)if((o=-1==n)||this.model.columns[n].showInColumnChooser){var c=this.model.columns[n],u=o?this.localizedLabels.SelectAll:t.isNullOrUndefined(c.headerText)||""==c.headerText?""==c.field?null:c.field:c.headerText,m=c&&c.disableHtmlEncode?this._htmlEscape(u):u;if(!t.isNullOrUndefined(u)||o){var p=t.buildTag("div","",{},{class:"e-columnChooserListDiv"}),g=o?this._id+"selectAll":this._id+u.replace(/\s|\.|[^a-zA-Z0-9]|&nbsp/g,"_"),f=s.find("#"+g).length;f&&l++,a=t.buildTag("input","",{},{id:f?g+l+"":g,value:u,type:"checkbox","ej-field":o?"":c.field,"ej-headertext":o?"":c.headerText,class:o?"e-selectall":""}),r=t.buildTag("label",m,{"font-size":"13px"},{for:f?g+l+"":g}),p.append(a),p.append(r),s.append(p),d=!(!o&&!t.isNullOrUndefined(c.visible))||c.visible,a.ejCheckBox({checked:o?h:d,change:e.proxy(this._columnChooserCheckChange,this)}),o||t.isNullOrUndefined(c.visible)||a[c.visible?"attr":"removeAttr"]("checked",!0)}}i?(this._columnChooserList.empty().append(s.children()),e("#"+this._id+"liScrollerDiv").is(":visible")&&e("#"+this._id+"liScrollerDiv").ejScroller("refresh")):this._columnChooserList=s,this._ccCheckBoxList=this._columnChooserList.find("input:checkbox.e-js").not(".e-selectall")},_checkFinder:function(){var t=e(this),i=t.closest(".e-columnChooserListDiv");if(t.hasClass("e-checkbox")&&!i.hasClass("e-hide")&&t.prop("checked"))return!0},_displayFinder:function(){return!e(this).closest(".e-columnChooserListDiv").hasClass("e-hide")},_columnChooserCheckChange:function(t){var i;if(t.isInteraction){var s=t.isChecked,l=this._ccCheckBoxList.filter(this._displayFinder),n=this._ccCheckBoxList.filter(this._checkFinder),o=l.length,a=n.length;t.model.id==this._id+"selectAll"?s?l.not(":checked").ejCheckBox({checked:s}):n.ejCheckBox({checked:s}):(this._columnChooserList.find("input.e-selectall").ejCheckBox("model.checked",o==a),s=0!=a,this.element[s?"attr":"removeAttr"]("checked",!0)),i=s?"removeClass":"addClass",e("#"+this._id+"ccDiv").find("button[aria-describedby = '"+this.localizedLabels.Done+"']")[i]("e-disable")}else t.isChecked&&e("#"+this._id+"ccDiv").find("button[aria-describedby = '"+this.localizedLabels.Done+"']").removeClass("e-disable")},_columnChooserBeforeClose:function(){e(".e-columnChoosertail").remove(),e(".e-columnChoosertailAlt").remove(),e("#"+this._id+"ccDiv").find("button[aria-describedby = '"+this.localizedLabels.Done+"']").removeClass("e-disable"),e("#"+this._id+"_ccSearchBox").val("");var t={target:{}};t.target.value="",this._columnChooserSearch(t)},_columnChooserSearch:function(s){var l,n,o,a,r,d,h,c,u;"click"==s.type&&(s.target.value="",e("#"+this._id+"_ccSearchBox").val("")),l=s.target.value,n=e("#"+this._id+"_ccSearchBox").next("span"),""!=l?(n.removeClass("e-searchfind"),n.addClass("e-cancel")):(n.removeClass("e-cancel"),n.addClass("e-searchfind")),e(".e-cancel").on("click",e.proxy(this._columnChooserSearch,this));var m=this.model.columns,p=[],g=[],f=this,_=function(t){var i=f.model.groupSettings;return!i.showGroupedColumn&&e.inArray(t,i.groupedColumns)>-1};for(""!=l&&(m=t.DataManager(this.model.columns).executeLocal(t.Query().where("headerText",t.FilterOperators.startsWith,l,!0)),t.DataManager(this.model.columns).executeLocal(t.Query().where("field",t.FilterOperators.startsWith,l,!0)).forEach(function(t){""==t.headerText&&-1==e.inArray(t,m)&&m.push(t)})),m.forEach(function(e){if(e.showInColumnChooser&&!_(e.field)){var i=t.isNullOrUndefined(e.headerText)||""==e.headerText?""==e.field?null:e.field:e.headerText;p.push(i)}}),t.isNullOrUndefined(e("#nomatches")[0])||e("#nomatches").remove(),o=e("#"+this._id+"ccDiv").find("#"+this._id+"liScrollerDiv"),a=this._columnChooserList.find(".e-columnChooserListDiv"),i=0;i<this.model.columns.length;i++)this.model.columns[i].showInColumnChooser&&!t.isNullOrUndefined(this.model.columns[i].headerText)&&(""!=this.model.columns[i].headerText?g.push(this.model.columns[i].headerText):""!=this.model.columns[i].field&&g.push(this.model.columns[i].field));for(r=0;r<g.length;r++)d=g[r],h=p.indexOf(d),t.isNullOrUndefined(d)||a.eq(r+1)[-1==h?"addClass":"removeClass"]("e-hide");0==p.length&&(c=t.buildTag("div#nomatches","",{"padding-left":"13px"}),u=t.buildTag("span",this.localizedLabels.NoResult),c.append(u),e(o).append(c));var v=this._ccCheckBoxList.filter(this._displayFinder).length,b=this._ccCheckBoxList.filter(this._checkFinder).length,C=b==v;p.length&&a.eq(0).find("input.e-js").ejCheckBox({checked:C}),a.eq(0)[0==p.length?"addClass":"removeClass"]("e-hide"),e("#"+this._id+"ccDiv").find("button[aria-describedby = '"+this.localizedLabels.Done+"']")[b?"removeClass":"addClass"]("e-disable"),e("#"+this._id+"liScrollerDiv").ejScroller("refresh")},_addButtonCC:function(){var t,i,s,l;for(this._visibleColumns=[],this._hiddenColumns=[],this._visibleColumnsField=[],this._hiddenColumnsField=[],this._columnChooserClick=!0,(t={}).requestType="columnchooser",this._columnChooser=!0,s=0,l=(i=this._columnChooserList.find("input:checkbox.e-js").not(".e-selectall")).length;s<l;s++){var n=e(i[s]),o=n.attr("ej-headertext"),a=n.attr("ej-field");this._id+"selectAll"!=n.attr("id")&&(this[i[s].checked?"_visibleColumns":"_hiddenColumns"].push(o),this[i[s].checked?"_visibleColumnsField":"_hiddenColumnsField"].push(""!=a?a:o))}var r,d,h=this._visibleColumns,c=this._hiddenColumns;r=e.merge(e.merge([],h),c),d=this._isDuplicate(r),this._trigger("actionBegin",t),d?(this.showColumns(this._visibleColumnsField),this.hideColumns(this._hiddenColumnsField)):(this.showColumns(this._visibleColumns),this.hideColumns(this._hiddenColumns)),e("#"+this._id+"ccDiv").ejDialog("close"),e(".e-columnChoosertail").remove(),this.refreshScrollerEvent(),t={requestType:"columnchooser",removedcolumns:[],addedcolumns:[],visiblecolumns:this.getVisibleColumnNames(),hiddencolumns:this.getHiddenColumnNames()},this._ccColumnUpdate(t.addedcolumns,this.getVisibleColumnNames(),this._ccVisibleColumns),this._ccColumnUpdate(t.removedcolumns,this.getHiddenColumnNames(),this._ccHiddenColumns),this._trigger("actionComplete",t)},_ccColumnUpdate:function(t,s,l){for(i=0;i<s.length;i++)-1==e.inArray(s[i],l)&&t.push(s[i])},_isDuplicate:function(e){for(var t,i=[],s=0;s<e.length;s++)i[t=e[s]]=i[t]>=1?i[t]+1:1;for(t in i)if(i[t]>1)return!0;return!1},_cancelButtonHandler:function(){e("#"+this._id+"ccDiv").ejDialog("close"),e(".e-columnChoosertailAlt").remove(),e(".e-columnChoosertail").remove()},_ccClickHandler:function(){var i,s,l=this.element.find(".e-ccButton");if(i=l.offset().left+l.width(),(s=e("#"+this._id+"ccDiv").data("ejDialog"))&&s.isOpened())s.close(),e(".e-columnChoosertail").remove(),e(".e-columnChoosertailAlt").remove();else{e("#"+this._id+"ccDiv").ejDialog({width:"230px",height:"309px",position:{X:this.model.enableRTL?i-230+143:i-230,Y:l.offset().top+35}}).ejDialog("open");var n=parseInt(e("#"+this._id+"ccDiv_wrapper").css("z-index")),o=t.buildTag("div #"+this._id+"_ccTail .e-columnChoosertail","",{display:"block",position:"absolute",left:this.model.enableRTL?i-78:i-29,top:l.offset().top+15}),a=t.buildTag("div #"+this._id+"_ccTailAlt .e-columnChoosertailAlt","",{display:"block","z-index":n+2,position:"absolute",left:this.model.enableRTL?i-78:i-29,top:l.offset().top+16});o.insertBefore(e("#"+this._id+"ccDiv_wrapper")),a.insertBefore(e("#"+this._id+"ccDiv_wrapper"))}this._refreshColumnChooserList(),this._ccVisibleColumns=this.getVisibleColumnNames(),this._ccHiddenColumns=this.getHiddenColumnNames(),e("#"+this._id+"liScrollerDiv").ejScroller({height:"228",width:"228",buttonSize:0}),e("#"+this._id+"liScrollerDiv").ejScroller("refresh"),t.isIOSWebView()||"chrome"!=this.getBrowserDetails().browser||e(".e-columnChooser .e-hscrollbar").attr("style","height: 10px !important;"),e(".e-ejinputtext").on("keyup",e.proxy(this._columnChooserSearch,this))},_refreshColumnChooserList:function(){for(var t,i,s,l=this._columnChooserList.find("input:checkbox.e-js").not(".e-selectall"),n=this._isDuplicate(e.merge(e.merge([],this._visibleColumns),this._hiddenColumns)),o=0,a=l.length;o<a;o++){var r,d=e(l[o]),h=d.attr("ej-headertext"),c=d.attr("ej-field");l.filter("[ej-headertext='"+h+"']").length;this.model.allowGrouping&&!this.model.groupSettings.showGroupedColumn&&-1!=e.inArray(e(l[o]).attr("ej-field"),this.model.groupSettings.groupedColumns)?(e(l[o]).parents(".e-columnChooserListDiv").addClass("e-hide"),l[o].checked=!1):(e(l[o]).parents(".e-columnChooserListDiv").removeClass("e-hide"),l[o].checked=!0),t=n?""==c?h:c:h,r=-1!=this[n?"_hiddenColumnsField":"_hiddenColumns"].indexOf(t),d.prop("checked",!r),d.ejCheckBox("model.checked",!r)}i=!(l.filter(this._displayFinder).length!=l.filter(this._checkFinder).length||!l.filter(this._displayFinder).length),this._columnChooserList.find("input:checkbox.e-selectall").ejCheckBox({checked:i}),this.model.groupSettings.showGroupedColumn||(s=l.filter(this._displayFinder).length>0,e("#"+this._id+"ccDiv").find("button[aria-describedby='Done']").ejButton({enabled:s}))},_initDataSource:function(){var i,s;this._isLocalData=!(this._dataSource()instanceof t.DataManager)||this._dataSource().dataSource.offline||this._isRemoteSaveAdaptor||this._dataSource().adaptor instanceof t.ForeignKeyAdaptor,this._dataSource().adaptor instanceof t.SqlDataSourceAdaptor&&(this._isLocalData=!1),this._ensureDataSource(),this._trigger("actionBegin"),i=this._dataSource().executeQuery(this.model.query),s=this,null!=this._dataManager.dataSource.table&&this._dataManager.dataSource.table.css("display","none"),this.element.is(":visible")||this.element.ejWaitingPopup("hide"),i.done(t.proxy(function(i){var l,n,o;if(0==this._relationalColumns.length&&this.element.ejWaitingPopup("hide"),!this.model.columns.length&&!i.count)return l=i.count%this.model.pageSettings.pageSize==0?i.count/this.model.pageSettings.pageSize:parseInt(i.count/this.model.pageSettings.pageSize,10)+1,this._currentPage()>l&&this._currentPage(l),s._renderAlertDialog(),s._alertDialog.find(".e-content").text(s.localizedLabels.EmptyDataSource),s._alertDialog.ejDialog("open"),void s.element.ejWaitingPopup("hide");if(t.isNullOrUndefined(i.aggregates)||(this._remoteSummaryData=i.aggregates),this.model.scrollSettings.enableVirtualization||(this.model.currentViewData=i.result),this._$fkColumn&&this.model.filterSettings.filteredColumns.length>0&&"excel"==this.model.filterSettings.filterType&&(this._fkParentTblData=i.result),this._gridRecordsCount=this.model.enablePersistence||null==this.model.pageSettings.totalRecordsCount||0!=this.model.filterSettings.filteredColumns.length?0==i.count&&i.result.length?i.result.length:i.count:this.model.pageSettings.totalRecordsCount,this.model.filterSettings.filteredColumns.length>0&&(this._filteredRecordsCount=i.count),null!=this.getPager()&&(this.model.pageSettings.totalRecordsCount=this._gridRecordsCount),this.model.allowScrolling&&this.model.scrollSettings.allowVirtualScrolling&&this.model.scrollSettings.enableVirtualization)if(this._refreshVirtualViewDetails(),this._isInitNextPage||this._remoteRefresh?(this._setInitialCurrentIndexRecords(i.result,this._currentPage()),this._isInitNextPage=this._remoteRefresh=!1):this._setVirtualLoadedRecords(i.result,this._currentPage()),this._isThumbScroll&&!this._checkCurrentVirtualView(this._virtualLoadedRecords,this._currentVirtualIndex)&&this._checkPrevNextViews(this._currentPage()),this.initialRender)for(this.model.currentViewData=[],n=0;n<this._currentLoadedIndexes.length;n++)o=this._currentLoadedIndexes[n],e.merge(this.model.currentViewData,this._virtualLoadedRecords[o]||[]);else this.model.currentViewData=i.result;this._setForeignKeyData(),0==this._relationalColumns.length&&this._initGridRender()},this)),s=this,i.fail(function(e){s.element.ejWaitingPopup("hide"),s.model.currentViewData=[],s._gridRecordsCount=0,s._renderGridContent().insertAfter(s.element.children(".e-gridheader"));var t={error:e.error};s._trigger("actionFailure",t)})},_initialRenderings:function(){var i,s;if(this.model.groupSettings.groupedColumns.length){for(i=[],s=0;s<this.model.sortSettings.sortedColumns.length;s++)t.isNullOrUndefined(this.model.sortSettings.sortedColumns[s].direction)&&(this.model.sortSettings.sortedColumns[s].direction=t.sortOrder.Ascending),i.push(this.model.sortSettings.sortedColumns[s].field);if(this.model.allowGrouping)for(s=0;s<this.model.groupSettings.groupedColumns.length;s++)-1==e.inArray(this.model.groupSettings.groupedColumns[s],i)&&this.model.sortSettings.sortedColumns.push({field:this.model.groupSettings.groupedColumns[s],direction:t.sortOrder.Ascending})}},_getExpands:function(e,t){var i,s,l=e.split("."),n="";for(l.splice(l.length-1,1),i=0;i<l.length;i++,n=""){for(s=0;s<i;s++)n+=l[s]+"/";n+=l[i],-1===t.indexOf(n)&&t.push(n)}},_renderAfterColumnInitialize:function(){this.element.append(this._renderGridHeader()),this.model.allowFiltering&&"filterbar"==this.model.filterSettings.filterType&&(this._renderFiltering(),this._renderFilterBarTemplate()),"both"!=this.model.gridLines&&this._showHeaderGridLines(),this.model.allowPaging&&this.element.append(this.element.find(".e-pager").first())},_ensureDataSource:function(i){var l,n,o,a,r,d,h,c,u,m,p,g,f,_,v,b,C,w,y,S,x,T,D,k,I,O,R,N,E,A,M,P;if(null==this._dataSource()&&!(this._dataSource()instanceof t.DataManager)){if(t.isNullOrUndefined(i)||"add"!=i.requestType)return;this.dataSource([])}if(this.model.query.requiresCount(),n=(l=this.model.query).clone(),this._dataSource()instanceof t.DataManager||(this.model.currentViewData=this._dataSource()),this._isLocalData&&(this.model.editSettings.allowEditing||this.model.editSettings.allowAdding)&&(!t.isNullOrUndefined(this._cModifiedData)||!t.isNullOrUndefined(this._cAddedRecord))){if(t.isNullOrUndefined(this._cAddedRecord)){for(r=0;r<this._primaryKeys.length;r++)l=l.where(this._primaryKeys[r],t.FilterOperators.equal,this._primaryKeyValues[r]);o=this._dataManager.executeLocal(l),this._dataSource()instanceof t.DataManager?t.copyObject(this._dataSource().dataSource.json[e.inArray(o.result[0],this._dataSource().dataSource.json)],this._cModifiedData):t.copyObject(this._dataSource()[e.inArray(o.result[0],this._dataSource())],this._cModifiedData),this._cModifiedData=null}else a=this._cAddedRecord,this._cAddedRecord=null,this._dataSource()instanceof t.DataManager?this._dataSource().dataSource.json.unshift(a):this._dataSource(s,!0).splice(0,0,a);l.queries=n.queries,this.model.editSettings.showAddNewRow&&"normal"==this.model.editSettings.editMode||(this.model.isEdit=!1)}if(i&&this.model.editSettings.allowDeleting&&"delete"==i.requestType&&(1==this._excludeDetailRows().length||"multiple"==this.multiDeleteMode&&this.selectedRowsIndexes.length==this._excludeDetailRows().length)&&1!=this.model.pageSettings.currentPage&&this._currentPage(this.model.pageSettings.totalPages-1),i&&this.model.editSettings.allowDeleting&&"delete"==i.requestType&&!t.isNullOrUndefined(this._cDeleteData)&&this._isLocalData&&(this._dataSource()instanceof t.DataManager?(r=e.inArray(this._cDeleteData[0],this._dataSource().dataSource.json),this._dataSource().dataSource.json.splice(r,1)):(r=e.inArray(this._cDeleteData[0],this._dataSource()),this._dataSource(s,!0).splice(r,1))),this.model.scrollSettings.allowVirtualScrolling&&i&&("save"==i.requestType||"cancel"==i.requestType||"delete"==i.requestType)&&(this._virtualDataRefresh=!0,this._refreshVirtualViewData()),this.model.sortSettings.sortedColumns.length){for(d=[],x=(h=this.model.sortSettings.sortedColumns).length-1;x>=0;x--)if(-1==this.model.groupSettings.groupedColumns.indexOf(h[x].field)){if(l.sortBy(h[x].field,h[x].direction),this.model.scrollSettings.allowVirtualScrolling&&this.model.scrollSettings.enableVirtualization&&-1==e.inArray(h[x],this._prevVirtualSort)){for(C=0;C<this._prevVirtualSort.length;C++)h[x].field==this._prevVirtualSort[C].field&&this._prevVirtualSort.splice(C,1);this._needVPaging=this._currentVirtualIndex*this._virtualRowCount%this.model.pageSettings.pageSize<=this._virtualRowCount,this._prevVirtualSort.push(h[x]),this._virtualDataRefresh=!0,this._refreshVirtualViewData()}}else d.push({field:h[x].field,direction:h[x].direction});for(C=0;C<d.length;C++)l.sortBy(d[C].field,d[C].direction)}if(this.model.allowSearching&&this.model.searchSettings.key.length&&((c=this.model.searchSettings).fields=0!=c.fields.length?c.fields:this.getColumnFieldNames(),l.search(c.key,c.fields,c.operator||"contains",c.ignoreCase||!0),this.initialRender||"searching"!=i.requestType||this._currentPage(1)),this._isLocalData&&this.model.allowSearching&&(this._filteredRecords=0!=this.model.searchSettings.key.length?this._dataManager.executeLocal(l).result:[]),this.model.allowFiltering&&this.model.filterSettings.filteredColumns.length){if(m=this.model.filterSettings.filteredColumns[0],p=this.model.filterSettings.filteredColumns,!this._isExcelFilter&&!this._excelFilterRendered||m instanceof t.Predicate)for(m instanceof t.Predicate?(u=m,this._excelFilterRendered&&(b=t.distinct(p,"field",!1),this._excelFilter._predicates[0]=this._excelFilter._predicates[0]||{},this._excelFilter._predicates[0][b[0]]=u)):u=t.Predicate(m.field,m.operator,m.value,!m.matchcase),x=1;x<p.length;x++)p[x]instanceof t.Predicate?u=u[p[x].predicate||"and"](p[x]):!this._isLocalData&&p.length>2&&x>1&&"or"==p[x].predicate?u.predicates.push(t.Predicate(p[x].field,p[x].operator,p[x].value,p[x].ignoreCase||!p[x].matchcase)):u=u[p[x].predicate||"and"](p[x].field,p[x].operator,p[x].value,!p[x].matchcase);else for(f in this._excelFilter.getPredicate(p,null,!0),g=this._excelFilter._predicates[0])(v=(_=g[f]).from!=s)?l.skip("top"==_.from?0:this._gridRecordsCount-_.take).take(_.take):u=u!=s?u.and(_):_;if(u&&l.where(u),this._isLocalData?(w=this._dataManager.executeLocal(l),this._filteredRecordsCount=v?w.result.length:w.count,y=this._filteredRecordsCount%this.model.pageSettings.pageSize==0?this._filteredRecordsCount/this.model.pageSettings.pageSize:parseInt(this._filteredRecordsCount/this.model.pageSettings.pageSize,10)+1,this._currentPage()>y&&this._currentPage(y),this._filteredRecords=this._dataManager.executeLocal(l).result,this._$fkColumn&&this.model.filterSettings.filteredColumns.length>0&&"excel"==this.model.filterSettings.filterType&&(this._fkParentTblData=this._filteredRecords)):t.isNullOrUndefined(i)||i.requestType!=t.Grid.Actions.Filtering||this._currentPage(1),this.model.scrollSettings.allowVirtualScrolling&&this.model.scrollSettings.enableVirtualization)for(x=0;x<p.length;x++){for(C=0;C<this._prevVirtualFilter.length;C++)p[x]==this._prevVirtualFilter[C]&&i.requestType==t.Grid.Actions.Filtering&&this._prevVirtualFilter.splice(C,1);-1==e.inArray(p[x],this._prevVirtualFilter)&&(this._prevVirtualFilter.push(p[x]),this._gridRecordsCount=this._filteredRecordsCount,this._refreshViewPageDetails(),this._refreshVirtualViewData(),this._refreshVirtualViewDetails())}}if(this._isLocalData&&this.model.allowFiltering&&0==this.model.filterSettings.filteredColumns.length&&(!t.isNullOrUndefined(this._filteredRecordsCount)||this._filteredRecordsCount>0)&&(this.model.scrollSettings.allowVirtualScrolling&&this.model.scrollSettings.enableVirtualization&&(this._refreshViewPageDetails(),this._refreshVirtualViewDetails(!0)),this._filteredRecordsCount=null,this._filteredRecords=[]),this.model.summaryRows.length&&this._setSummaryAggregate(l),(this.model.allowPaging||this.model.scrollSettings.allowVirtualScrolling&&this.model.allowScrolling&&!this.model.scrollSettings.enableVirtualization)&&(this._isLocalData&&(w=this._dataManager.executeLocal(l),this._recordsCount=w.count,y=this._recordsCount%this.model.pageSettings.pageSize==0?this._recordsCount/this.model.pageSettings.pageSize:parseInt(this._recordsCount/this.model.pageSettings.pageSize,10)+1,this._currentPage()>y&&this._currentPage(y)),0==this._currentPage()&&(0==this._prevPageNo||null==this._prevPageNo?this._currentPage(1):this._currentPage(this._prevPageNo)),l.page(this._currentPage(),this.model.pageSettings.pageSize)),this.model.allowScrolling&&this.model.scrollSettings.allowVirtualScrolling&&this.model.scrollSettings.enableVirtualization&&(this._needPaging=!0,this.initialRender&&this.model.currentIndex>1&&(this.model.currentIndex<=this._getVirtualTotalRecord()||!this._isLocalData)&&("continuous"==this.model.scrollSettings.virtualScrollMode&&(this.model.currentIndex=1),this._currentVirtualIndex=Math.ceil(this.model.currentIndex/this._virtualRowCount),this._isThumbScroll=!0,this._currentPage(Math.ceil(this.model.currentIndex/this.model.pageSettings.pageSize)),this._virtualLoadedPages.push(this._currentPage())),this._virtualDataRefresh&&(this._isThumbScroll=!0,this._refreshVirtualViewData(!0),this._gridRecordsCount=null!==this._dataSource()?null==this.model.pageSettings.totalRecordsCount?this._dataSource().length:this.model.pageSettings.totalRecordsCount:0,this._currentPage(Math.ceil(this._currentVirtualIndex*this._virtualRowCount/this.model.pageSettings.pageSize)),this._virtualLoadedPages.push(this._currentPage())),null!=this.model.virtualLoading&&(this._gridRecordsCount=this.model.pageSettings.totalRecordsCount),0==this.model.filterSettings.filteredColumns&&this._prevVirtualFilter.length&&(this._refreshVirtualViewData(),this._prevVirtualFilter=[]),this._isLocalData&&this.initialRender&&this._refreshVirtualViewDetails(),this._getVirtualLoadedRecords(l)),this.model.allowGrouping){for(S=l.clone(),this.model.allowPaging&&this.model.groupSettings.groupedColumns.length&&(S.queries=S.queries.slice(0,S.queries.length-1)),x=0;x<this.model.groupSettings.groupedColumns.length;x++)T=this.model.groupSettings.groupedColumns[x],D=this.getColumnByField(T),!t.isNullOrUndefined(D.enableGroupByFormat)&&D.enableGroupByFormat?(l.group(T,t.proxy(this._formatGroupColumn,this)),S.group(T,t.proxy(this._formatGroupColumn,this))):(l.group(T),S.group(T));this.model.groupSettings.groupedColumns.length&&this._setAggreatedCollection(S)}if(i!=s&&"add"==i.requestType&&this._isLocalData&&0==this.model.groupSettings.groupedColumns.length&&0==this.model.scrollSettings.frozenColumns&&0==this.model.scrollSettings.frozenRows&&(this._dataSource()instanceof t.DataManager?this._dataSource().dataSource.json.unshift(i.data):this._dataSource().unshift(i.data)),t.isNullOrUndefined(i)||"add"!=i.action||t.isNullOrUndefined(this.model.parentDetails)||(k=this.getColumnByField(this.model.parentDetails.parentKeyField),-1==e.inArray(k,this.model.columns)&&((I={})[this.model.parentDetails.parentKeyField]=this.model.parentDetails.parentKeyFieldValue,e.extend(!0,this.model.currentViewData[0],I))),this._cloneQuery=l.clone(),this._isLocalData&&(!this.model.scrollSettings.enableVirtualization||this._virtualDataRefresh)){if(O=this._dataManager.dataSource.json,R=this._dataSource().dataSource,!t.isNullOrUndefined(R)&&this._dataSource()instanceof t.DataManager&&(this._dataManager.dataSource.json=O!=R.json?R.json:O),N=this._dataManager.executeLocal(l),t.isNullOrUndefined(i)||"beginedit"!=i.requestType)if(this.model.scrollSettings.allowVirtualScrolling&&this.model.pageSettings.currentPage==this.model.pageSettings.totalPages-1&&(this._prevPageRendered=!0),this.model.scrollSettings.allowVirtualScrolling&&!this._prevPageRendered&&N.result.length!=this.model.pageSettings.pageSize&&this.model.pageSettings.totalPages==this.model.pageSettings.currentPage)E=t.pvt.filterQueries(l.queries,"onPage"),l.queries.splice(e.inArray(E[0],l.queries),1),l.page(this._currentPage()-1,this.model.pageSettings.pageSize),(A=this._dataManager.executeLocal(l)).result.splice(0,N.result.length),this._previousPageRecords=e.extend(!0,[],A.result),this._previousPageLength=N.result.length,this._currentPageData=N.result,t.merge(A.result,N.result),this.model.currentViewData=this._lastVirtualPage=A.result,this._lastPageRendered=!0;else if(this._lastPageRendered&&this.model.pageSettings.currentPage==this.model.pageSettings.totalPages-1&&!this.model.scrollSettings.enableVirtualization){for(M=this.model.pageSettings.pageSize-this._previousPageLength,P=0;P<M;P++)this.getRows()[this.getRows().length-(this.model.pageSettings.pageSize-P)].remove();this._tempPageRendered=!0,this.model.currentViewData=N.result}else this.model.currentViewData=N.result;else this.model.currentViewData=N.result;this._gridRecordsCount=N.count,this._remoteSummaryData=N.aggregates,this._searchCount=this._searchString.length?N.count:null,this.model.groupSettings.groupedColumns.length&&this._setAggregates()}},_formatGroupColumn:function(e,i){var s;return s=this.getColumnByField(i).format,s=new RegExp("\\{0(:([^\\}]+))?\\}","gm").exec(s)[2],t.format(e,s,this.model.locale)},_refreshViewPageDetails:function(){this._currentPage(1),this.model.currentIndex=0,this._currentVirtualIndex=1,this.getContent().ejScroller("model.scrollTop",0)},_refreshVirtualViewDetails:function(e){var i=this._dataSource();e&&(this._gridRecordsCount=null!==i?i instanceof t.DataManager?i.dataSource.json.length:i.length:this.model.pageSettings.totalRecordsCount),this._totalVirtualViews=Math.ceil(this._getVirtualTotalRecord()/this._virtualRowCount),this._maxViews=Math.ceil(this.model.pageSettings.pageSize/this._virtualRowCount),this.model.pageSettings.totalPages=Math.ceil(this._gridRecordsCount/this.model.pageSettings.pageSize),this.model.pageSettings.totalRecordsCount=this._gridRecordsCount,this._lastViewData=this._virtualRowCount-(this._totalVirtualViews*this._virtualRowCount-this._getVirtualTotalRecord())},_getVirtualLoadedRecords:function(t){var i,s,l=this._currentPage();if(this._needPaging&&(this._isLastVirtualpage=needTwoPage=this._isThumbScroll&&l==this.model.pageSettings.totalPages&&!this._virtualPageRecords[l],(this.initialRender||this._virtualDataRefresh)&&(needTwoPage=!0),this.model.virtualLoading&&this._isLocalData&&(0!=this.model.currentIndex||1!=l)&&this.model.currentIndex<this.model.pageSettings.totalRecordsCount?this._getVirtualOnLoadingData(l,!needTwoPage):this._setVirtualPaging(t,l,!needTwoPage),!this.initialRender&&this._isThumbScroll&&this._virtualPageRecords[l]&&!this._virtualDataRefresh&&this._checkPrevNextViews(l,t)),this._needPaging=!1,this._setVirtualLoadedIndexes(this._currentVirtualIndex),this.initialRender&&this._isLocalData)for(this.model.currentViewData=[],i=0;i<this._currentLoadedIndexes.length;i++)s=this._currentLoadedIndexes[i],this._virtualLoadedRecords[s]&&e.merge(this.model.currentViewData,this._virtualLoadedRecords[s])},_setVirtualPaging:function(i,s,l){var n,o=t.pvt.filterQueries(i.queries,"onPage");o.length&&i.queries.splice(e.inArray(o[0],i.queries),1),(!l||this._needVPaging)&&this.model.currentIndex>this._virtualRowCount?(this._initCurrentIndex(i,s),this._needVPaging=!1):i.page(s,this.model.pageSettings.pageSize),this._isLocalData&&!this._virtualPageRecords[s]&&(n=this._dataManager.executeLocal(i),this.initialRender||(this.model.currentViewData=n.result),n.result.length?(this._setVirtualLoadedRecords(n.result,s),-1==e.inArray(s,this._virtualLoadedPages)&&this._virtualLoadedPages.push(s)):this.initialRender||this.getContent().find(".e-virtualtop, .e-virtualbottom").remove())},_checkPrevNextViews:function(){var e,t,i=this._currentVirtualIndex,s=this._virtualLoadedRecords[i-1],l=this._virtualLoadedRecords[i+1],n=3==this._maxViews?1:2;1!=i&&i!=this._totalVirtualViews&&(s&&s.length==this._virtualRowCount?l&&l.length==this._virtualRowCount||this._totalVirtualViews==i-1||(t=i-n,this._currentVirtualIndex=this._virtualLoadedRecords[i]?t:t-1,e=this._scrollValue-n*this._virtualRowCount*this._vRowHeight):(t=i+n,this._currentVirtualIndex=this._virtualLoadedRecords[i]?t:t+1,e=this._scrollValue+n*this._virtualRowCount*this._vRowHeight),e&&(this._scrollValue=e,this._setVirtualLoadedIndexes(this._currentVirtualIndex),this.model.currentIndex=0==e?e:Math.floor(e/this._vRowHeight)))},_initCurrentIndex:function(i,s){var l,n,o,a,r,d,h=s*this.model.pageSettings.pageSize,c=this._currentVirtualIndex*this._virtualRowCount+this._virtualRowCount,u=this._currentVirtualIndex*this._virtualRowCount-2*this._virtualRowCount;c>h||u<h-this.model.pageSettings.pageSize||this._isLastVirtualpage?(c>h?(l=(s-1)*this.model.pageSettings.pageSize,n=2*this.model.pageSettings.pageSize,this._isInitNextPage=!0):(u<h-this.model.pageSettings.pageSize||this._isLastVirtualpage)&&(l=(s-2)*this.model.pageSettings.pageSize,n=2*this.model.pageSettings.pageSize,this._isInitNextPage=!1,this._remoteRefresh=!0),this.model.virtualLoading&&this._isLocalData?((o={}).endIndex=l+n,o.endIndex=o.endIndex>this._getVirtualTotalRecord()?this._getVirtualTotalRecord():o.endIndex,o.startIndex=l,o.currentPage=this._currentPage(),o.result=null,this._trigger("virtualLoading",o),d=o.result,this._setInitialCurrentIndexRecords(d,s)):((a=t.pvt.filterQueries(i.queries,"onSkip")).length&&i.queries.splice(e.inArray(a[0],i.queries),1),i.skip(l).take(n),this._isLocalData&&(r=this._dataManager.executeLocal(i),d=this.model.currentViewData=r.result,this._isLastVirtualpage=!1,this._setInitialCurrentIndexRecords(d,s)))):(this._needVPaging=!1,this.model.virtualLoading&&this._isLocalData&&(0!=this.model.currentIndex||1!=s)?this._getVirtualOnLoadingData(s,!0):this._setVirtualPaging(i,s,!0))},_setInitialCurrentIndexRecords:function(e,t){for(i=0;i<2;i++){var s,l=i*this.model.pageSettings.pageSize,n=l+this.model.pageSettings.pageSize,o=e.slice(l,n);s=this._isInitNextPage||1==t&&1==this.model.pageSettings.totalPages?0==i?t:t+1:0==i?t-1:t,this._setVirtualLoadedRecords(o,s)}},_getVirtualOnLoadingData:function(e,t){var i,l;e>0&&(this.model.currentIndex>this._virtualRowCount&&(!t||this._needVPaging)&&this.model.currentIndex<this.model.pageSettings.totalRecordsCount?this._initCurrentIndex(s,e):((i={}).endIndex=e*this.model.pageSettings.pageSize>this._gridRecordsCount?this._gridRecordsCount:e*this.model.pageSettings.pageSize,i.startIndex=e*this.model.pageSettings.pageSize-this.model.pageSettings.pageSize,i.currentPage=this._currentPage(),i.result=null,this._trigger("virtualLoading",i),l=i.result,this._setVirtualLoadedRecords(l,e)))},_setVirtualLoadedRecords:function(t,i){var s,l,n,o,a,r,d,h,c,u=this._virtualRowCount,m=this.model.pageSettings.pageSize,p=m/u,g=Math.ceil(i*m/u),f=i==this.model.pageSettings.totalPages;for(this._virtualPageRecords[i]||(this._virtualPageRecords[i]=t),f&&(l=this._getVirtualTotalRecord()%m,g=(!this._virtualLoadedRecords[this._totalVirtualViews]||this._virtualLoadedRecords[this._totalVirtualViews].length!=this._lastViewData)&&l<this._lastViewData&&0!=l?this._totalVirtualViews+1:this._totalVirtualViews,this._getVirtualTotalRecord()<u&&(this._singleView=!0)),n=0;n<p;n++)((r=Math.ceil((i-1)*p+(n+1)))<=this._totalVirtualViews||f)&&r<=g&&(this._virtualLoadedRecords[r-1]&&this._virtualLoadedRecords[r-1].length!=u?(o=u-(this._virtualLoadedRecords[r-1].length+n*u)+n*u,e.merge(this._virtualLoadedRecords[r-1],t.slice(0,o)),s=a=o+u,r<=this._totalVirtualViews&&(this._virtualLoadedRecords[r]=t.slice(o,s))):1==r||this._virtualLoadedRecords[r-1]?s=a=(o=s||n*u%m)+u:(0!=(d=a=(r-1)*u%m)&&(this._virtualLoadedRecords[r-1]=t.slice(0,d)),o=d,a=s=d+u),this._virtualLoadedRecords[r]&&this._virtualLoadedRecords[r].length!=u?(h=t.slice(o,a)).length+this._virtualLoadedRecords[r].length<=u&&(c=e.merge(h,this._virtualLoadedRecords[r]),this._virtualLoadedRecords[r]=c):!this._virtualLoadedRecords[r]&&r<=this._totalVirtualViews&&(this._virtualLoadedRecords[r]=t.slice(o,a)));-1==e.inArray(i,this._virtualLoadedPages)&&this._virtualLoadedPages.push(i)},_setVirtualLoadedIndexes:function(e){var t,i;for(this._currentLoadedIndexes=[],t=e==this._totalVirtualViews?e:e+1,1!=e&&(e-=1),i=e;i<=t;i++)this._currentLoadedIndexes.push(i)},_getVirtualTotalRecord:function(){return 0==this.model.filterSettings.filteredColumns.length?null==this._searchCount?this._gridRecordsCount:this._searchCount:this._filteredRecordsCount},_initGridRender:function(){var i,s,l,n,o;if(this.addInitTemplate(),this.model.scrollSettings.frozenColumns>0&&this.addFrozenTemplate(),this.model.allowGrouping&&this.addGroupingTemplate(),this.model.showSummary&&this.addSummaryTemplate(),(this.model.allowResizing||this.model.allowResizeToFit)&&(this._resizer=new t.gridFeatures.gridResize(this)),this.model.keySettings&&e.extend(this.model.keyConfigs,this.model.keySettings),this._initHeight=this.model.scrollSettings.height,"100%"==this.model.scrollSettings.height&&(this._isHeightResponsive=!0),this.render(),this._setTextWrap(),"fixed"==this.model.columnLayout){var a=this.model.scrollSettings.frozenColumns>0?this.getHeaderTable().eq(0).width()+this.getHeaderTable().eq(1).width():this.getHeaderTable().width(),r=this.getHeaderContent().width()>a?"addClass":"removeClass",d=this.getHeaderTable(),h=this.getContentTable();this.model.scrollSettings.frozenColumns>0&&(d=this.getVisibleColumnNames().length<=this.model.scrollSettings.frozenColumns?this.getHeaderTable().eq(1):this.getHeaderTable().eq(0),h=this.getVisibleColumnNames().length<=this.model.scrollSettings.frozenColumns?this.getContentTable().eq(1):this.getContentTable().eq(0)),d[r]("e-tableLastCell"),h[r]("e-tableLastCell")}if(this.model.allowGrouping&&t.gridFeatures.dragAndDrop&&this._headerCellgDragDrop(),this.model.allowReordering&&t.gridFeatures.dragAndDrop&&(this._headerCellreorderDragDrop(),this._initIndicators()),this._wireEvents(),this.model.allowGrouping&&!t.isNullOrUndefined(this.model.serverProperties))for(this.model._groupingCollapsed=this.model.serverProperties._groupingCollapsed,i=0;i<this.model._groupingCollapsed.length;i++)(s=this.getContent().find(".e-recordplusexpand").filter("td[ej-mappingname='"+this.model._groupingCollapsed[i].key+"'    ][ej-mappingvalue='"+this.model._groupingCollapsed[i].value+"']")).length>1&&!t.isNullOrUndefined(this.model._groupingCollapsed[i].parent)&&(l=this.model._groupingCollapsed[i].parent,s=s.filter(function(){return e(this).parents(".e-tabletd").parent("tr").prev("tr").find(".e-recordplusexpand[ej-mappingvalue="+l+"]").length})),this.expandCollapse(s);this.initialRender=!1,this.model.width&&!this.model.allowScrolling&&this.element.width(this.model.width),(this.model.editSettings.allowEditing||this.model.editSettings.allowAdding)&&this._processEditing(),this._trigger("dataBound",{}),this._trigger("refresh"),this.model.parentDetails&&(n=this.model.parentDetails.parentID,(o=e("#"+n).data("ejGrid")).model.allowScrolling&&o._refreshScroller({requestType:"refresh"})),this.element.closest("tr").hasClass("e-detailrow")&&!this.model.parentDetails&&((o=this.element.closest("tr.e-detailrow").closest(".e-grid").data("ejGrid")).model.allowScrolling&&o.getScrollObject().refresh()),this.model.allowFiltering&&("menu"==this.model.filterSettings.filterType||"excel"==this.model.filterSettings.filterType)&&this._renderFilterDialogs(),this.model.enableResponsiveRow&&(this.model.allowSorting||this.model.allowFiltering)&&this._renderResponsiveFilter(),this.model.allowGrouping&&this.model.showSummary&&this._refreshGroupSummary(),this._isMapSelection&&this._mappingSelection(),this.model.showColumnChooser&&this._renderColumnChooser()},_setTextWrap:function(){if(1==this.model.allowTextWrap){switch(this.model.textWrapSettings.wrapMode){case"content":this.element.find(".e-columnheader").removeClass("e-wrap"),this.element.removeClass("e-wrap"),this.getContent().addClass("e-wrap");break;case"header":this.element.removeClass("e-wrap"),this.getContent().removeClass("e-wrap"),this.element.find(".e-columnheader").addClass("e-wrap");break;default:this.getContent().removeClass("e-wrap"),this.element.find(".e-columnheader").removeClass("e-wrap"),this.element.addClass("e-wrap")}if(this.model.scrollSettings.frozenColumns>0&&"content"!=this.model.textWrapSettings.wrapMode){var e=this.getHeaderContent().find(".e-frozenheaderdiv").find(".e-columnheader").last().find("th"),t=this.getHeaderContent().find(".e-movableheader").find(".e-columnheader").last().find("th");e.height()>t.height()?t.height(e.height()):e.height(t.height())}}else this.getContent().removeClass("e-wrap"),this.element.find(".e-columnheader").removeClass("e-wrap"),this.element.removeClass("e-wrap")},_getMetaColGroup:function(){for(var i,s=t.buildTag("colgroup"),l=0;l<this.model.columns.length;l++)i=e(document.createElement("col")),!1===this.model.columns[l].visible&&i.css("display","none"),null==this.model.rowTemplate||t.isNullOrUndefined(this.model.columns[l].cssClass)||i.addClass(this.model.columns[l].cssClass),this.model.allowGrouping&&!this.model.groupSettings.showGroupedColumn&&-1!=e.inArray(this.model.columns[l].field,this.model.groupSettings.groupedColumns)&&i.css("display","none"),s.append(i);return s},_alternateRow:function(){return this.getIndex()%2==0?"e-row":"e-alt_row"},addInitTemplate:function(){var i,l,n,o,a,r,d,h,c=this.element.find(".e-headercelldiv:not(.e-emptyCell)"),u={},m=!0,p=document.createElement("tbody"),g=e(p);if(null==this.model.rowTemplate){var f,_=document.createElement("tr"),v=e(_),b=this.model.columns;for(this._gridRecordsCount&&!this._virtualDataRefresh?this._initColumns(this.model.currentViewData[0]!=s?this.model.currentViewData[0]:this.model.currentViewData.value):this._isLocalData&&(null!=this._dataSource()&&this._dataSource().length||this._dataManager&&this._dataManager.dataSource.json.length)&&this._initColumns(this._dataSource()[0]!=s?this._dataSource()[0]:this._dataManager.dataSource.json[0]),i={_gridFormatting:this.formatting},e.views.helpers(i),(h={})._foreignKey=this._foreignKeyBinding,e.views.helpers(h),(this.model.childGrid||this.model.detailsTemplate)&&(l=t.buildTag("td.e-detailrowcollapse","<div class='e-icon e-gnextforward'></div>"),v.append(l)),f=0;f<this.model.columns.length;f++){if(n=t.buildTag("td.e-rowcell"),t.isNullOrUndefined(b[f].tooltip)&&b[f].clipMode!=t.Grid.ClipMode.EllipsisWithTooltip||n.addClass("e-gridtooltip"),(b[f].clipMode==t.Grid.ClipMode.Ellipsis||b[f].clipMode==t.Grid.ClipMode.EllipsisWithTooltip)&&n.addClass("e-gridellipsis"),this.model.isResponsive&&n.attr("data-cell",this._decode(this.model.columns[f].headerText)),0==b[f].visible?n.addClass("e-hide"):(m&&(null!=this.model.detailsTemplate||null!=this.model.childGrid)&&n.addClass("e-detailrowvisible"),m=!1),this.model.groupSettings.showGroupedColumn||n.addClass("{{for ~groupedColumns}} {{if #data == '"+this.model.columns[f].field+"'}}e-hide{{/if}}{{/for}}"),t.isNullOrUndefined(b[f].templateID||b[f].template)){for(var C=(b[f].field||"").split("."),w=C.length-1,y="";w;)y+="(",w--;switch(b[f].type||b[f].editType){case"boolean":case"booleanedit":t.isNullOrUndefined(b[f].displayAsCheckbox)&&(b[f].displayAsCheckbox=!0),b[f].displayAsCheckbox?(r="",r="batch"==this.model.editSettings.editMode&&(t.isNullOrUndefined(b[f].allowEditing)||b[f].allowEditing)?r:"disabled='disabled'",d="{{if #data['"+C.join("']['")+"']=='true'||#data['"+C.join("']['")+"']==true}} <input type ='checkbox' "+r+" checked='checked'></input>{{else}} <input type ='checkbox' "+r+"></input> {{/if}}",n.addClass("e-boolrowcell").html(d)):n.html("{{if "+b[f].field+"}}"+this.localizedLabels.True+"{{else}}"+this.localizedLabels.False+"{{/if}}");break;case"checkbox":this._enableCheckSelect=!0,this.model.selectionType="multiple",this.model.selectionSettings.enableToggle=!0,this._isMapSelection=""!=b[f].field,this._selectionMapColumn=b[f].field,b[f].textAlign="center",this._isMapSelection||(this.model.columns[f].allowGrouping=this.model.columns[f].allowFiltering=this.model.columns[f].allowSorting=!1),n.addClass("e-checkcell").html("<div class = 'e-checkcelldiv'>{{if #data['"+C.join("']['")+"']}} <input type ='checkbox' checked='checked'></input>{{else}} <input type ='checkbox'></input> {{/if}}</div>"),this.model.columns[f].editType=t.Grid.EditingType.Boolean,this.model.scrollSettings.frozenColumns>0&&n.addClass("e-frozenunbound"),this.model.enableAutoSaveOnSelectionChange=!1;break;default:b[f].disableHtmlEncode?n.html("{{html:"+y+"#data['"+C.join("'] || {})['")+"']}}"):n.html("{{:"+y+"#data['"+C.join("'] || {})['")+"']}}")}b[f].format==s||b[f].foreignKeyValue||n.html("{{:~_gridFormatting('"+b[f].format+"',"+y+"#data['"+C.join("'] || {})['")+"'],'"+this.model.locale+"')}}"),b[f].foreignKeyValue&&b[f].dataSource&&n.html("{{:~_foreignKey("+f+","+y+"#data['"+C.join("'] || {})['")+"'],'"+this._id+"')}}"),b[f].commands&&((h={})["_"+this._id+"UnboundTemplate"]=this._unboundTemplateRendering,e.views.helpers(h),(t.isNullOrUndefined(b[f].field)||""==b[f].field)&&(this.model.columns[f].allowGrouping=this.model.columns[f].allowFiltering=this.model.columns[f].allowSorting=!1),t.isNullOrUndefined(b[f].headerText)||e("#"+this._id+b[f].headerText.replace(/[^a-z0-9|s_]/gi,"")+f+"_UnboundTemplate").remove(),divElement=this._createUnboundElement(b[f],f),t.isNullOrUndefined(b[f].headerText)||n.addClass("e-unboundcell").addClass("e-"+b[f].headerText.replace(/[^a-z0-9|s_]/gi,"")+f).html("{{:~_"+this._id+"UnboundTemplate('"+divElement.id+"')}}"),this.model.scrollSettings.frozenColumns>0&&n.addClass("e-frozenunbound"),this._isUnboundColumn=!0)}else h={},o=b[f].headerText,h["_"+this._id+"ColumnTemplating"]=t.proxy(this._gridTemplate,null,this,undefined),e.views.helpers(h),t.isNullOrUndefined(o)||t.isNullOrUndefined(o.match(/[^0-9\s\w]/g))||(o=o.replace(/[^0-9\s\w]/g,"_")),e("#"+this._id+o+f+"_Template").remove(),a=this._createTemplateElement(b[f]),(""==b[f].field||t.isNullOrUndefined(b[f].field))&&(this.model.columns[f].allowGrouping=this.model.columns[f].allowFiltering=this.model.columns[f].allowSorting=!1),0!=b[f].template&&n.addClass("e-templatecell").html("{{:~_"+this._id+"ColumnTemplating('"+a.id+"','"+f+"')}}");b[f].textAlign==s&&(b[f].textAlign="left"),!0===b[f].isPrimaryKey&&(this._primaryKeys.push(e.trim(b[f].field)),this._primaryKeys=t.isNullOrUndefined(e.uniqueSort)?e.unique(this._primaryKeys.sort()):e.uniqueSort(this._primaryKeys.sort())),this.phoneMode&&this.model.enableResponsiveRow||b[f].textAlign==s||(n.css("text-align",b[f].textAlign),e(c[f]).css("text-align",b[f].textAlign)),this.phoneMode||t.isNullOrUndefined(b[f].headerTextAlign)||e(c[f]).css("text-align",b[f].headerTextAlign),t.isNullOrUndefined(b[f].cssClass)||n.addClass(b[f].cssClass),t.isNullOrUndefined(b[f].priority)||n.addClass("e-table-priority-"+b[f].priority),t.isNullOrUndefined(b[f].customAttributes)||n.attr(b[f].customAttributes),n.attr("role","gridcell"),v.append(n),this.model.enableAltRow?(i["_"+this._id+"AlternateRow"]=this._alternateRow,e.views.helpers(i),v.addClass("{{:~_"+this._id+"AlternateRow()}}")):v.addClass("e-row"),v.attr("role","row"),this.model.scrollSettings.frozenColumns>0&&this.model.scrollSettings.frozenColumns==f+1&&(p.appendChild(_),u[this._id+"_JSONFrozenTemplate"]=g.html(),v.empty(),g.empty())}p.appendChild(_)}u[this._id+"_JSONTemplate"]=null!=this.model.rowTemplate?e(this.model.rowTemplate).html():g.html(),e.templates(u)},render:function(){this.model.showSummary=this.model.summaryRows.length>0||this.model.showSummary,this._renderGridContent().insertAfter(this.element.children(".e-gridheader")),this.model.allowResizeToFit&&this.setWidthToColumns(),this.model.allowGrouping&&t.gridFeatures.dragAndDrop&&this._groupHeaderCelldrag(),this.model.showSummary&&this._currentJsonData.length&&(this._renderGridFooter().insertAfter(this.getContent()),this._hideCaptionSummaryColumn()),this._initialEndRendering()},_createStackedRow:function(i,l){var n,o,a,r,d,h,c,u,m,p,g,f,_=t.buildTag("tr.e-columnheader e-stackedHeaderRow"),v=[],b=[];for(tAl=[],tp=[],g=0;g<this.model.columns.length;g++)if(0!=(n=this.model.columns[g]).visible){if(this.model.allowGrouping&&!this.model.groupSettings.showGroupedColumn&&this.model.groupSettings.groupedColumns.length>0&&-1!=e.inArray(n.field,this.model.groupSettings.groupedColumns))continue;var C="",w="",y="",S="",x=i.stackedHeaderColumns;for(m=0;m<x.length;m++)o=e.isArray(x[m].column)?x[m].column:e.map(x[m].column.split(","),e.trim),a="e-row"+e.inArray(i,this.model.stackedHeaderRows)+"-column"+m,-1!=e.inArray(n.field,o)&&(C=x[m].headerText,w=x[m].cssClass,y=x[m].textAlign,S=x[m].tooltip?" e-gridtooltip "+a:"");v.push(C),b.push(w),tAl.push(y),tp.push(S)}for(r=[],u=0;u<v.length;u++){for(d=1,h=u+1;h<v.length&&v[u]==v[h];h++)d++;r.push({sapnCount:d,headerText:v[u],cssClass:b[u],txtAlign:tAl[u],tooltip:tp[u]}),u+=d-1}if(_=t.buildTag("tr.e-columnheader e-stackedHeaderRow"),c=this.model.scrollSettings.frozenColumns,this.model.allowScrolling&&c>0){var T=[],D=0,k=0,I=0;for(u=0;u<this.model.columns.length;u++)m=this.model.columns[u],u<c&&0==m.visible&&I++;for(D=c-I;D>0;)p=r[k].sapnCount,r[k].sapnCount<D?(T.push(r[k]),l?k++:r.splice(k,1)):r[k].sapnCount>D?(r[k].sapnCount=r[k].sapnCount-D,l&&T.push({sapnCount:D,headerText:r[k].headerText})):(T.push(r[k]),l||r.splice(k,1)),D-=p;l&&(r=T)}for((this.model.detailsTemplate||this.model.childGrid)&&_.append(t.buildTag("th.e-headercell e-detailheadercell","<div></div>")),g=0;g<r.length;g++)(f=t.buildTag("th.e-headercell e-stackedHeaderCell e-default"+r[g].tooltip,r[g].headerText,{},{colspan:r[g].sapnCount})).css("textAlign",r[g].txtAlign),_.append(f),r[g].cssClass!=s&&f.addClass(r[g].cssClass);return _},_renderGridHeaderInternalDesign:function(i,l){var n,o,a,r,d,h,c=t.buildTag("table.e-table","",{},{cellspacing:"0.25px",role:"grid"}),u=t.buildTag("thead"),m=t.buildTag("tbody.e-hide"),p=t.buildTag("tr.e-columnheader"),g=e(document.createElement("colgroup")),f=e(document.createElement("tr"));if((this.model.childGrid||this.model.detailsTemplate)&&(p.append(t.buildTag("th.e-headercell e-detailheadercell","<div></div>")),g.append(this._getIndentCol())),this.model.showStackedHeader)for(h=0;h<this.model.stackedHeaderRows.length;h++)n=this._createStackedRow(this.model.stackedHeaderRows[h],l),u.append(n);for(o=0;o<i.length;o++){var _=t.buildTag("th.e-headercell e-default","",{},{role:"columnheader"}),v=document.createElement("td"),b=t.buildTag("div.e-headercelldiv",i[o].headerText===s&&"checkbox"!=i[o].type?i[o].headerText=i[o].field:i[o].headerText,{},{"ej-mappingname":i[o].field});if(i[o].disableHtmlEncode&&b.text(i[o].headerText),t.isNullOrUndefined(i[o].headerTooltip)||b.addClass("e-headertooltip"),t.isNullOrUndefined(i[o].tooltip)||b.addClass("e-gridtooltip"),(i[o].clipMode==t.Grid.ClipMode.Ellipsis||i[o].clipMode==t.Grid.ClipMode.EllipsisWithTooltip)&&b.addClass("e-gridellipsis"),_.append(b),this.model.allowFiltering&&("menu"==this.model.filterSettings.filterType||"excel"==this.model.filterSettings.filterType)&&(i[o].allowFiltering==s||!0===i[o].allowFiltering)&&(!t.isNullOrUndefined(i[o].field)||""==i[o].field)&&"checkbox"!=i[o].type){if(a="e-filterset",!this.initialRender&&this.model.filterSettings.filteredColumns)for(r=0;r<this.model.filterSettings.filteredColumns.length;r++)this.model.filterSettings.filteredColumns[r].field==i[o].field&&(a="e-filterset e-filteredicon e-filternone");_.append(t.buildTag("div.e-filtericon e-icon "+a)),_.addClass("e-headercellfilter"),"msie"==t.browserInfo().name&&"8.0"==t.browserInfo().version&&this.model.enableRTL&&e(b).css("padding","0 0 0 2em")}d=document.createElement("col"),i[o].priority&&e(v).addClass("e-table-priority-"+i[o].priority),f.append(v),p.append(_),g.append(d),!1===i[o].visible?(_.addClass("e-hide")&&e(d).css("display","none"),-1==e.inArray(i[o].headerText,this._hiddenColumns)&&-1==e.inArray(i[o].field,this._hiddenColumnsField)&&(this._hiddenColumns.push(i[o].headerText)&&i[o].field!=s?this._hiddenColumnsField.push(i[o].field):this._hiddenColumnsField.push(i[o].headerText)),-1!=e.inArray(i[o].field,this._visibleColumnsField)&&this._visibleColumnsField.splice(e.inArray(i[o].field,this._visibleColumnsField),1)&&this._visibleColumns.splice(e.inArray(i[o].headerText,this._visibleColumns),1)):(this._visibleColumns.push(i[o].headerText)&&i[o].field!=s?this._visibleColumnsField.push(i[o].field):this._visibleColumnsField.push(i[o].headerText),i[o].visible=!0,-1!=e.inArray(""==i[o].field?i[o].headerText:i[o].field,this._hiddenColumnsField)&&this._hiddenColumnsField.splice(e.inArray(""==i[o].field?i[o].headerText:i[o].field,this._hiddenColumnsField),1)&&this._hiddenColumns.splice(e.inArray(i[o].headerText,this._hiddenColumns),1)),this.model.showColumnChooser&&!1!==i[o].showInColumnChooser&&(i[o].showInColumnChooser=!0),this.model.allowResizing&&!1!==i[o].allowResizing&&(i[o].allowResizing=!0),t.isNullOrUndefined(i[o].headerTextAlign)?i[o].textAlign!=s?b.css("text-align",i[o].textAlign):this.model.enableRTL&&b.css("text-align",i[o].textAlign="right"):b.css("text-align",i[o].headerTextAlign),!1===i[o].allowResizing&&this._disabledResizingColumns.push(i[o].field),!1===i[o].allowSorting&&this._disabledSortableColumns.push(i[o].field),!1===i[o].allowGrouping&&this._disabledGroupableColumns.push(i[o].field),!1===i[o].allowEditing&&this._disabledEditableColumns.push(i[o].field),t.isNullOrUndefined(i[o].cssClass)||(_.addClass(i[o].cssClass),e(d).addClass(i[o].cssClass)),t.isNullOrUndefined(i[o].headerTemplateID)||(b.html(e(i[o].headerTemplateID).hide().html()).parent().addClass("e-headertemplate"),-1==(h=e.inArray(i[o].field,this._disabledGroupableColumns))&&t.isNullOrUndefined(i[o].field)&&this._disabledGroupableColumns.push(i[o].field)),"checkbox"==t.getObject("type",i[o])&&t.isNullOrUndefined(i[o].headerText)&&(b.addClass("e-headercheckcelldiv"),b.html("<input type = 'checkbox' class = 'e-checkselectall'></input>"),t.isNullOrUndefined(i[o].field)||b.attr("ej-mappingname",i[o].field)),this.model.allowGrouping&&this.model.groupSettings.showToggleButton&&-1==e.inArray(i[o].field,this._disabledGroupableColumns)&&!t.isNullOrUndefined(i[o].field)&&""!=i[o].field&&(-1!=e.inArray(i[o].field,this.model.groupSettings.groupedColumns)?b.append(this._getToggleButton().addClass("e-toggleungroup")):b.append(this._getToggleButton().addClass("e-togglegroup"))),this.model.isResponsive&&_.attr("title",this._decode(i[o].headerText)),i[o].priority&&(_.attr("data-priority",i[o].priority).addClass("e-table-priority-"+i[o].priority),e(d).addClass("e-table-priority-"+i[o].priority)),this.initialRender&&("string"==typeof i[o].width&&-1!=i[o].width.indexOf("%")?this.columnsWidthCollection.push(parseInt(i[o].width)/100*this.element.width()):this.columnsWidthCollection.push(i[o].width)),i[o].width==s&&this.model.commonWidth!==s&&(this.columnsWidthCollection[o]=this.model.commonWidth),this._fieldColumnNames[i[o].headerText]=i[o].field,this._headerColumnNames[i[o].field]=i[o].headerText}return u.append(p),m.append(f),c.append(g).append(u).append(m),c},_renderGridHeader:function(){var e,i,s=t.buildTag("div.e-gridheader"),l=t.buildTag("div");return this.model.allowScrolling&&l.addClass("e-headercontent"),this.setGridHeaderContent(s),this.initialRender&&(this.columnsWidthCollection=[],this._hiddenColumns=[],this._hiddenColumnsField=[]),this._visibleColumns=[],this._visibleColumnsField=[],this._disabledGroupableColumns=[],this._fieldColumnNames={},this._headerColumnNames={},this.model.scrollSettings.frozenColumns>0?(e=t.buildTag("div.e-frozenheaderdiv",this._renderGridHeaderInternalDesign(this.model.columns.slice(0,this.model.scrollSettings.frozenColumns),!0)),i=t.buildTag("div.e-movableheader",t.buildTag("div.e-movableheaderdiv",this._renderGridHeaderInternalDesign(this.model.columns.slice(this.model.scrollSettings.frozenColumns),!1))),l.append(e).append(i)):l.append(this._renderGridHeaderInternalDesign(this.model.columns)),s.html(l),this.model.isResponsive&&s.addClass("e-textover"),this.setGridHeaderTable(this.getHeaderContent().find(".e-table")),s},_renderGridContent:function(){var i,s,l,n,o,a,r,d=t.buildTag("div.e-gridcontent"),h=t.buildTag("div"),c=t.buildTag("table.e-table","",{},{cellspacing:"0.25px"}),u=e(document.createElement("tbody"));if(c.append(this.getHeaderTable().find("colgroup").clone()).append(u),h.html(c),d.html(h),this.setGridContentTable(c),this.setGridContent(d),c.attr("role","grid"),i={},this.model.allowGrouping&&this.model.groupSettings.groupedColumns.length){if(this.initialRender&&(i.columnName=this.model.groupSettings.groupedColumns[this.model.groupSettings.groupedColumns.length-1],!this.model.groupSettings.showGroupedColumn))for(s=0;s<this.model.groupSettings.groupedColumns.length;s++)l=this.model.groupSettings.groupedColumns[s],-1==e.inArray(l,this._hiddenColumnsField)&&(this._hiddenColumnsField.push(l),this.getColumnByField(l).visible=!1);i.requestType=t.Grid.Actions.Grouping}else i.requestType=t.Grid.Actions.Refresh;if(null==this._dataSource()||0==this._dataSource().length||0==this.model.currentViewData.length?(n=t.buildTag("td.emptyrecord",this.localizedLabels.EmptyRecord,{},{colSpan:this.model.columns.length}),u.append(e(document.createElement("tr")).append(n)),this.setWidthToColumns(),(this.initialRender||this.model.groupSettings.groupedColumns.length)&&this.sendDataRenderingRequest(i)):this.sendDataRenderingRequest(i),this._isCaptionSummary&&"grouping"==i.requestType&&this.model.groupSettings.groupedColumns.length>1)for(o=this.getContentTable().find(".e-table").not(".e-recordtable").children("colgroup"),a=e(this.getContentTable().find(".e-recordtable")[0]).children("colgroup").find("col"),s=0;s<o.length;s++)r=e(o[s]).find("col").length,e(o[s]).find("col:gt("+(r-a.length-1)+")").remove(),e(o[s]).append(a.clone());return d},print:function(){var e,i,s,l,n={};n.requestType="print",this._printselectrows=this.getContentTable().find('tr[aria-selected="true"]'),this._trigger("actionBegin",n),e=this.model.allowPaging,this._$fDlgIsOpen&&(this.element.find(".e-excelfilter:visible").css("display","none"),this.element.find(".e-filterdialoglarge:visible").css("display","none")),i=this.element.clone(),s=window.open("","print","height=452,width=1024,tabbar=no"),this.model.allowPaging&&"currentpage"==this.model.pageSettings.printMode?(this.getPager().css("display","none"),i=this.element.clone(),this.model.allowScrolling||(this.refreshContent(),this.getPager().css("display","block"))):e&&(this.model.allowPaging=!1,this.refreshContent(),this.getPager().css("display","none"),i=this.element.clone(),this.model.allowPaging=!0,this.model.allowScrolling||(this.refreshContent(),this.getPager().css("display","block"))),this.model.allowScrolling&&(this.model.scrollSettings.width,this.model.scrollSettings.height,(this.getScrollObject().isVScroll()||this.getScrollObject().isHScroll())&&(l=this.getContent().find(".e-content")[0],i.find(".e-gridcontent").height(l.scrollHeight),i.find(".e-gridcontent").ejScroller({width:"auto",height:"auto"}),i.width(l.scrollWidth),i.find(".e-gridheader").removeClass("e-scrollcss")),this.model.allowPaging&&(this.refreshContent(),this.getPager().css("display","block"))),this.model.toolbarSettings.showToolbar&&i.find(".e-gridtoolbar").remove(),this.model.allowFiltering&&"filterbar"==this.model.filterSettings.filterType&&i.find(".e-filterbar").remove(),n={requestType:"print",element:i,selectedRows:this._printselectrows},this._trigger("beforePrint",n),t.isNullOrUndefined(n.element)||(i=n.element),t.print(i,s),n.requestType="print",this._trigger("actionComplete",n)},export:function(i,s,l,n){var o,a,r,d,h,c,u=e.extend(!0,{},this.model),m=this,p={action:i,method:"post","data-ajax":"false"},g=t.buildTag("form","",null,p);if(l&&!t.isOnWebForms)o=e("div.e-grid"),n&&n.length>0&&(o=e.map(n,function(e){return document.getElementById(e)})),e.each(o,function(i,s){var l,n,o,a,r=e(s).data("ejGrid");if(!t.isNullOrUndefined(r)&&(l=e.extend(!0,{},r.model),l=m._getModifyExportModel(l),r.ignoreOnExport)){for(n=0;n<r.ignoreOnExport.length;n++)delete l[r.ignoreOnExport[n]];o={name:"GridModel",type:"hidden",value:r.stringify(l)},a=t.buildTag("input","",null,o),g.append(a)}}),e("body").append(g),g.submit();else{if(this._locale=this.model.locale,u=this._getModifyExportModel(u),this.ignoreOnExport)for(a=0;a<this.ignoreOnExport.length;a++)delete u[this.ignoreOnExport[a]];t.raiseWebFormsServerEvents?(r={model:u,originalEventType:s},d={model:this.stringify(u)},t.raiseWebFormsServerEvents(s,r,d),setTimeout(function(){t.isOnWebForms=!0},1e3)):(h={name:"GridModel",type:"hidden",value:this.stringify(u)},c=t.buildTag("input","",null,h),g.append(c),g.append(this),e("body").append(g),g.submit()),setTimeout(function(){m.model.locale=m._locale},0)}return!0},_getModifyExportModel:function(i){var l,n,o,a={};e.extend(a,t.Grid.Locale["en-US"],t.Grid.Locale[i.locale]);var r=a.GroupCaptionFormat,d=r.indexOf("{{if"),h=r.indexOf(" {{else}}"),c=r.slice(d,h).replace("{{if count == 1 }}",""),u={EmptyRecord:a.EmptyRecord,GroupCaptionFormat:r.slice(0,d),GroupText:c,True:a.True,False:a.False};for(t.isNullOrUndefined(this.model)||(this.model.locale=i.locale.concat(JSON.stringify(u))),i.locale=i.locale.concat(JSON.stringify(u)),l=0;l<i.columns.length;l++)if(i.columns[l].editType!=s)switch(i.columns[l].editType){case"stringedit":case"edittemplate":i.columns[l].editType="string";break;case"numericedit":i.columns[l].editType="numeric";break;case"dropdownedit":i.columns[l].editType="dropdown";break;case"booleanedit":i.columns[l].editType="boolean"}for(l=0;l<i.filterSettings.filteredColumns.length;l++)"equal"==i.filterSettings.filteredColumns[l].operator?i.filterSettings.filteredColumns[l].operator="equals":"notequal"==i.filterSettings.filteredColumns[l].operator&&(i.filterSettings.filteredColumns[l].operator="notequals");if(i.showStackedHeader)for(i.stackedHeaderRow=i.stackedHeaderRows,l=0;l<i.stackedHeaderRow.length;l++)for(i.stackedHeaderRow[l].stackedHeaderColumn=i.stackedHeaderRow[l].stackedHeaderColumns,n=i.stackedHeaderRow[l].stackedHeaderColumn,o=0;o<n.length;o++)i.stackedHeaderRow[l].stackedHeaderColumn[o].column=e.isArray(n[o].column)?n[o].column:n[o].column.split(",");return i},sendDataRenderingRequest:function(i){var s,l,n,o,a,r,d,h,c,u,m,p,g,f;if(this._templateRefresh&&(this.refreshTemplate(),this._templateRefresh=!1),this.setFormat(),this.model.scrollSettings.enableVirtualization||(this._previousColumnIndex=null,this._previousRowCellIndex=null,this._previousIndex=null),"add"==i.requestType||"grouping"==i.requestType||null!=this.model.currentViewData&&this.model.currentViewData.length)switch(i.requestType){case t.Grid.Actions.Refresh:case t.Grid.Actions.Paging:case t.Grid.Actions.Sorting:case t.Grid.Actions.Filtering:case t.Grid.Actions.Save:case t.Grid.Actions.Cancel:case t.Grid.Actions.Delete:case t.Grid.Actions.Search:case t.Grid.Actions.Reorder:case t.Grid.Actions.BatchSave:if(s=this.model.groupSettings.groupedColumns,this.model.allowGrouping&&i.requestType==t.Grid.Actions.Refresh&&0==s.length&&this.element.find(".e-grouptopleftcell").length>0&&this.element.children(".e-gridheader").find("div").first().empty().append(this._renderGridHeader().find("table")),("externalform"==this.model.editSettings.editMode||"externalformtemplate"==this.model.editSettings.editMode)&&e("#"+this._id+"_externalEdit").css("display","none"),this.model.allowGrouping||(s=[]),0==s.length){var _,v=document.createElement("div"),b=-1,C=!1;if(this.phoneMode||this.getContentTable().find("colgroup").first().replaceWith(this._getMetaColGroup()),(null!=this.model.childGrid||null!=this.model.detailsTemplate)&&this.getContentTable().find("colgroup").first().prepend(this._getIndentCol()),l=this._currentPage(),("inlineform"==this.model.editSettings.editMode||"inlineformtemplate"==this.model.editSettings.editMode||"normal"==this.model.editSettings.editMode)&&("cancel"==i.requestType||"save"==i.requestType)&&(this._editFormHeight=this.element.find(".gridform").closest("tr").height()),this.model.scrollSettings.frozenColumns>0)v.innerHTML=this._renderByFrozenDesign();else{i.data&&((_=document.createElement("div")).innerHTML=["<table>",e.render[this._id+"_JSONTemplate"](i.data),"</table>"].join(""),this._dataSource()instanceof t.DataManager&&i.requestType==t.Grid.Actions.Save&&(b=this._getDataIndex(this.model.currentViewData,i.data),C=this._dataSource().adaptor instanceof t.remoteSaveAdaptor)),null,n=!this.model.scrollSettings.allowVirtualScrolling||this.model.scrollSettings.enableVirtualization||t.isNullOrUndefined(this._currentVIndex)||"save"!=i.requestType&&"cancel"!=i.requestType&&"delete"!=i.requestType?this.model.currentViewData:t.isNullOrUndefined(this._lastVirtualPage)?this._virtualLoadedRecords[this._currentVIndex]:this._lastVirtualPage,v.innerHTML=["<table>",e.render[this._id+"_JSONTemplate"](n),"</table>"].join("");var w=this.getContentTable().get(0),y=w.lastChild,S=this.getContentTable().first().find("tbody").first();if("save"!=i.requestType&&"cancel"!=i.requestType||"batch"==this.model.editSettings.editMode||this.model.scrollSettings.allowVirtualScrolling)"delete"!=i.requestType||this.model.scrollSettings.allowVirtualScrolling?this.getContentTable().get(0).replaceChild(null!=this.model.rowTemplate?v.firstChild.lastChild:v.firstChild.firstChild,this.getContentTable().get(0).lastChild):(this._isUnboundColumn&&($editedrow=this.element.find(".e-editedrow"),$oldChild=this.getContentTable().find(".e-editedrow").get(0),$newChild=$editedrow.length?v.firstChild.firstChild.firstChild:_.firstChild.firstChild.lastChild,0==$editedrow.length||"normal"!=this.model.editSettings.editMode&&"externalform"!=this.model.editSettings.editMode&&"externalformtemplate"!=this.model.editSettings.editMode?"inlineform"==this.model.editSettings.editMode||"inlineformtemplate"==this.model.editSettings.editMode?($oldChild=$editedrow.prev("tr").get(0),$editedrow.remove()):$oldChild=$editedrow.get(0):e($oldChild).replaceWith(e($newChild))),this.model.allowPaging&&this.model.pageSettings.pageSize<=this.model.currentViewData.length&&this.getContentTable()[0].rows.length!=this.model.currentViewData.length&&(this.getContentTable().find("tr").length&&this._excludeDetailRows().length?this.multiDeleteMode?(p=v.firstChild.firstChild.rows.length,g=e(v.firstChild.firstChild.rows).slice(p-this.selectedRowsIndexes.length,p),e(y).append(g)):y.appendChild(v.firstChild.firstChild.lastChild):e(y).prepend(v.firstChild.firstChild.rows)),(null!=this.model.detailsTemplate||null!=this.model.childGrid)&&(f=this.getContentTable().find(".e-detailrow:visible"),e.each(f,function(e){0==f.eq(e).closest("tr").prev().children(".e-detailrowexpand").length&&f.eq(e).remove()})),this._gridRows=w.rows,this.model.enableAltRow&&this._refreshAltRow());else{if(rowIndex=-1!=this.model.editSettings.editMode.indexOf("inlineform")?t.isNullOrUndefined(i.selectedRow)?this._selectedRow():i.selectedRow:this.getContentTable().find(".e-"+i.action+"edrow").index(),o=this._currentTrIndex,-1==rowIndex&&(rowIndex=o),null!=this.model.detailsTemplate||null!=this.model.childGrid)for(a="inlineform"==this.model.editSettings.editMode?e(e(y.childNodes).not(".e-detailrow")[rowIndex]):e(y.childNodes[rowIndex]),r=e(y.childNodes).not(".e-detailrow"),u=0;u<r.length;u++)a.is(r[u])&&(rowIndex=u);if("normal"==this.model.editSettings.editMode||"inlineform"==this.model.editSettings.editMode||"inlineformtemplate"==this.model.editSettings.editMode){if("add"==i.action&&!this.getContentTable().find(".e-addedrow").length)break;$oldChild=this.getContentTable().find(".e-addedrow").get(0),$editedTr=this.getContentTable().find(".e-editedrow"),$newChild=$editedTr.length||"cancel"==i.requestType?v.firstChild.firstChild.firstChild:_.firstChild.firstChild.lastChild,$editedTr.length?(this.model.editSettings.showAddNewRow&&"top"==this.model.editSettings.rowPosition&&(rowIndex-=1),$newChild=v.firstChild.firstChild.childNodes[rowIndex],"inlineform"==this.model.editSettings.editMode||"inlineformtemplate"==this.model.editSettings.editMode?($oldChild=$editedTr.prev("tr").get(0),$editedTr.remove()):$oldChild=$editedTr.get(0),d=e($newChild),m=e($oldChild),(null!=this.model.detailsTemplate||null!=this.model.childGrid)&&m.next("tr.e-detailrow:visible").length&&d.find(".e-detailrowcollapse").removeClass("e-detailrowcollapse").addClass("e-detailrowexpand").find("div").removeClass("e-gnextforward").addClass("e-gdiagonalnext"),"cancel"==i.requestType?(this.model.editSettings.showAddNewRow&&this.getContentTable().find(".e-addedrow").addClass("e-showaddrow"),m.replaceWith(d)):!t.isNullOrUndefined(this._filteredRecordsCount)&&this._filteredRecordsCount<this._previousFilterCount?(null!=this.model.detailsTemplate&&m.next("tr.e-detailrow").length&&y.removeChild(m.next("tr.e-detailrow").get(0)),m.remove(),this.model.allowPaging&&this.model.pageSettings.pageSize<=this.model.currentViewData.length&&0==s.length&&y.appendChild(v.firstChild.firstChild.lastChild)):this.model.sortSettings.sortedColumns.length&&"save"==i.requestType&&this._currentJsonData.length>0||!t.isNullOrUndefined(this._searchCount)?this.getContentTable().get(0).replaceChild(null!=this.model.rowTemplate?v.firstChild.lastChild:v.firstChild.firstChild,this.getContentTable().get(0).lastChild):t.isNullOrUndefined(this.model.currentViewData[rowIndex])||this.model.currentViewData[rowIndex][this._primaryKeys[0]]!=i.data[this._primaryKeys[0]]?e(y).replaceWith(e(v).find("tbody")):y.replaceChild($newChild,$oldChild),this.model.editSettings.showAddNewRow&&("top"==this.model.editSettings.rowPosition?y.firstChild.remove():y.lastChild.remove())):(d=e($newChild),m=e($oldChild),"add"==i.action&&"save"==i.requestType&&this.model.editSettings.showAddNewRow&&this.model.allowPaging&&this.model.pageSettings.pageSize<=this._currentJsonData.length&&("bottom"==this.model.editSettings.rowPosition?y.lastChild.previousSibling.remove():y.lastChild.remove()),"cancel"==i.requestType||this._dataSource()instanceof t.DataManager||1!=this._currentPage()||"save"==i.requestType&&!t.isNullOrUndefined(this._filteredRecordsCount)&&this._filteredRecordsCount==this._previousFilterCount?(t.isNullOrUndefined($oldChild)||(m.remove(),this._dataSource()instanceof t.DataManager&&-1!=b?0==b?y.insertBefore($newChild,y.children[b]):d.insertAfter(y.children[b-1]):this._dataSource()instanceof t.DataManager&&!C||1==this._currentPage()||"save"!=i.requestType||e(y).prepend(e(v.firstChild.firstChild.firstChild)),this.model.allowPaging&&this.model.pageSettings.pageSize<=this.model.currentViewData.length&&0==s.length&&(this._dataSource()instanceof t.DataManager&&-1==b&&!C&&"save"!=i.requestType||"save"!=i.requestType&&!(this._dataSource()instanceof t.DataManager))&&"cancel"==i.requestType&&!this.model.editSettings.showAddNewRow&&w.lastChild.appendChild(v.firstChild.firstChild.lastChild)),"cancel"!=i.requestType||-1==this._selectedRow()||this._enableCheckSelect||this.clearSelection()):1==this.model.currentViewData.length?(e(y).empty(),y.appendChild($newChild)):this.model.sortSettings.sortedColumns.length&&"save"==i.requestType&&this._currentJsonData.length>0||!t.isNullOrUndefined(this._searchCount)?this.getContentTable().get(0).replaceChild(null!=this.model.rowTemplate?v.firstChild.lastChild:v.firstChild.firstChild,this.getContentTable().get(0).lastChild):"bottom"==this.model.editSettings.rowPosition?(S.prepend($oldChild),y.replaceChild($newChild,$oldChild)):y.replaceChild($newChild,$oldChild))}else if("dialog"==this.model.editSettings.editMode||"dialogtemplate"==this.model.editSettings.editMode||"externalform"==this.model.editSettings.editMode||"externalformtemplate"==this.model.editSettings.editMode)if($editedTr=this.element.find(".e-editedrow"),"cancel"!=i.requestType&&($editedTr.length||t.isNullOrUndefined(this._filteredRecordsCount)||this._filteredRecordsCount!=this._previousFilterCount))if($editedTr.length){if($newChild=v.firstChild.firstChild.childNodes[rowIndex],$oldChild=this._excludeDetailRows(y.childNodes)[rowIndex],null!=this.model.allowCellMerging&&(m=e($oldChild),e($oldChild.childNodes).hasClass("e-merged")))for(h=m.children(".e-merged").index(),c=$oldChild.children[h].colSpan,u=0;u<c;u++)$newChild.childNodes[h+u].className+=" e-merged e-hide",$newChild.childNodes[h].colSpan=u+1;null!=this.model.detailsTemplate&&($oldChild=e(y.childNodes).not(".e-detailrow").eq(rowIndex).get(0)),(null!=this.model.detailsTemplate||null!=this.model.childGrid)&&m.next("tr.e-detailrow:visible").length&&e($newChild).find(".e-detailrowcollapse").removeClass("e-detailrowcollapse").addClass("e-detailrowexpand").find("div").removeClass("e-gnextforward").addClass("e-gdiagonalnext"),!t.isNullOrUndefined(this._filteredRecordsCount)&&this._filteredRecordsCount<this._previousFilterCount?(m=e($oldChild),null!=this.model.detailsTemplate&&m.next("tr.e-detailrow").length&&y.removeChild(m.next("tr.e-detailrow").get(0)),m.remove(),this.model.allowPaging&&this.model.pageSettings.pageSize<=this.model.currentViewData.length&&y.appendChild(v.firstChild.firstChild.lastChild)):this.model.sortSettings.sortedColumns.length&&"save"==i.requestType&&this._currentJsonData.length>0||!t.isNullOrUndefined(this._searchCount)?this.getContentTable().get(0).replaceChild(null!=this.model.rowTemplate?v.firstChild.lastChild:v.firstChild.firstChild,this.getContentTable().get(0).lastChild):t.isNullOrUndefined(this.model.currentViewData[rowIndex])||this.model.currentViewData[rowIndex][this._primaryKeys[0]]!=i.data[this._primaryKeys[0]]?e(y).replaceWith(e(v).find("tbody")):y.replaceChild($newChild,$oldChild)}else 1==this.model.currentViewData.length&&0==this.getContentTable().find("td.e-rowcell").length?($newChild=v.firstChild.firstChild.firstChild,e(y).empty(),y.appendChild($newChild)):(newChild=$editedTr.length||"cancel"==i.requestType?v.firstChild.firstChild.firstChild:_.firstChild.firstChild.lastChild,this._dataSource()instanceof t.DataManager?-1!=b&&(0==b?y.insertBefore(newChild,y.children[b]):e(newChild).insertAfter(y.children[b-1]),this.model.allowPaging&&(this.model.pageSettings.pageSize<=this.model.currentViewData.length||b==this.model.pageSettings.pageSize-1)&&y.removeChild(y.lastChild)):(this.model.sortSettings.sortedColumns.length&&"save"==i.requestType&&this._currentJsonData.length>0||!t.isNullOrUndefined(this._searchCount)?this.getContentTable().get(0).replaceChild(null!=this.model.rowTemplate?v.firstChild.lastChild:v.firstChild.firstChild,this.getContentTable().get(0).lastChild):1==this._currentPage()?this.getContentTable().find("tbody").first().prepend(e(newChild)):this.getContentTable().find("tbody").first().prepend(e(v.firstChild.firstChild.firstChild)),this.model.allowPaging&&this.model.pageSettings.pageSize<=this.model.currentViewData.length&&y.removeChild(y.lastChild)),null!=this.model.detailsTemplate&&e(w.lastChild.lastChild).children(".e-detailrowexpand").length&&y.removeChild(y.lastChild));else $newChild=v.firstChild.firstChild.childNodes[rowIndex],$oldChild=y.childNodes[rowIndex],d=e($newChild),m=e($oldChild),(null!=this.model.detailsTemplate||null!=this.model.childGrid)&&m.next(".e-detailrow:visible").length&&d.find(".e-detailrowcollapse").removeClass("e-detailrowcollapse").addClass("e-detailrowexpand").find("div").removeClass("e-gnextforward").addClass("e-gdiagonalnext"),m.replaceWith(d),this._enableCheckSelect||this.clearSelection(),this.model.allowPaging&&this._refreshGridPager();this._gridRows=this.model.editSettings.showAddNewRow?this.getContentTable().first().find(".e-rowcell").closest("tr.e-row, tr.e-alt_row").toArray():w.rows,this.model.enableAltRow&&this._refreshAltRow()}}this._currentJsonData=this.model.currentViewData,this._gridRows=this.model.editSettings.showAddNewRow?this.getContentTable().first().find(".e-rowcell").closest("tr.e-row, tr.e-alt_row").toArray():this.getContentTable().get(0).rows,this.model.scrollSettings.frozenColumns>0&&(this._gridRows=[this._gridRows,this.getContentTable().get(1).rows]),("sorting"==i.requestType||"filtering"==i.requestType||"save"==i.requestType||"cancel"==i.requestType||"delete"==i.requestType)&&this.model.scrollSettings.allowVirtualScrolling&&("filtering"==i.requestType&&(this.getContent().first().ejScroller("refresh").ejScroller("isVScroll")?this.element.find(".gridheader").addClass("e-scrollcss"):this.element.find(".gridheader").removeClass("e-scrollcss"),this._refreshVirtualPagerInfo()),this.model.scrollSettings.enableVirtualization?this._refreshVirtualView(this._currentVirtualIndex):this._refreshVirtualContent(l),"filtering"==i.requestType&&this.getContent().first().ejScroller("refresh")),this.model.allowPaging&&(this.model.filterSettings.filteredColumns.length?this.getPager().ejPager({totalRecordsCount:null==this._searchCount?this._filteredRecordsCount:this._searchCount,currentPage:this._currentPage()}):this.getPager().ejPager({totalRecordsCount:null==this._searchCount?this._gridRecordsCount:this._searchCount,currentPage:this._currentPage()}),this._refreshGridPager()),this.model.scrollSettings.enableVirtualization||this._eventBindings();break}case t.Grid.Actions.Grouping:this._group(i),this._refreshStackedHeader();break;case t.Grid.Actions.BeginEdit:this._edit(i);break;case t.Grid.Actions.Add:this._add(i);break;case t.Grid.Actions.Ungrouping:this._ungroup(i);break;case t.Grid.Actions.VirtualScroll:this._isVirtualRecordsLoaded||(this.model.scrollSettings.enableVirtualization?this._replacingVirtualContent():this._replacingContent())}else"reorder"==i.requestType&&this.model.groupSettings.groupedColumns.length>0?this._group(i):((t.isNullOrUndefined(this.model.currentViewData)||0==this.model.currentViewData.length)&&!this.phoneMode&&("refresh"==i.requestType&&0==this.model.scrollSettings.frozenColumns&&this.getContentTable().find("colgroup").first().replaceWith(this._getMetaColGroup()),("cancel"==i.requestType||"refresh"==i.requestType)&&this.model.scrollSettings.frozenColumns>0&&this._removeFrozenTemplate()),this._newungroup(i));this._showGridLines(),this._completeAction(i)},_removeFrozenTemplate:function(){this.getContent().find(".e-content").empty();var i=t.buildTag("table.e-table","",{},{cellspacing:"0.25px"}),s=e(document.createElement("tbody"));i.append(this.getHeaderTable().find("colgroup").clone()).append(s),this.getContent().find(".e-content").html(i),this.setGridContentTable(i)},_showGridLines:function(){var e=this.model.gridLines;"both"!=e&&this.getContent().addClass("none"!=e?"e-"+e+"lines":"e-hidelines")},_showHeaderGridLines:function(){var e=this.model.gridLines;"both"!=e&&this.getHeaderContent().addClass("none"!=e?"e-"+e+"lines":"e-hidelines")},_newungroup:function(e){"ungrouping"==e.requestType?this._ungroup(e):this.getContentTable().find("tbody").empty().first().append(this._getEmptyTbody())},setFormat:function(){for(var e,i,s,l=[],n=0;n<this.model.columns.length;n++)"date"==this.model.columns[n].type&&l.push(this.model.columns[n]);if(l.length>0&&!t.isNullOrUndefined(this.model.currentViewData))for(n=0,e=this.model.currentViewData.length;n<e;n++)for(i=0;i<l.length;i++)s=t.getObject(l[i].field,this.model.currentViewData[n]),/^(\d{4}\-\d\d\-\d\d([tT][\d:\.]*)?)([zZ]|([+\-])(\d\d):?(\d\d))?$/.test(s)&&t.createObject(l[i].field,new Date(s),this.model.currentViewData[n])},_completeAction:function(i){var l,n,o,a,r,d;-1!=this.model.editSettings.editMode.indexOf("dialog")&&("save"==i.requestType||"cancel"==i.requestType)&&e("#"+this._id+"_dialogEdit").data("ejDialog")&&e("#"+this._id+"_dialogEdit").ejDialog("close"),this.model.editSettings.showAddNewRow&&"normal"==this.model.editSettings.editMode||(this.model.isEdit=!1),this._confirmedValue=!1,t.Grid.Actions.Grouping==i.requestType&&t.isNullOrUndefined(i.columnName)||"refresh"==i.requestType&&this._LastColumnUnGroup?this._LastColumnUnGroup=!1:("ascending"!=i.columnSortDirection&&"descending"!=i.columnSortDirection||t.isNullOrUndefined(i.columnName)||(l=this.getColumnByField(i.columnName),this.model.allowSorting&&this.model.allowMultiSorting?this._scolumns.push(l.field):this._gridSort=l.field),"beginedit"!=i.requestType&&"add"!=i.requestType&&(!this.model.allowScrolling||!this.initialRender||this.model.scrollSettings.frozenRows>0||this.model.scrollSettings.frozenColumns>0)&&this.setWidthToColumns(),("save"==i.requestType||"cancel"==i.requestType||"delete"==i.requestType)&&(this._isAddNew=!1,this.model.isResponsive&&this.model.minWidth&&this.windowonresize()),this.initialRender||!(t.Grid.Actions.UnGrouping==i.requestType||this.model.groupSettings.groupedColumns.length>0)||e("#"+this._id+"EditForm").length||this._recalculateIndentWidth(),t.Grid.Actions.Paging==i.requestType||t.Grid.Actions.BatchSave==i.requestType?this._refreshGridPager():t.Grid.Actions.Sorting==i.requestType&&this.model.allowSorting||t.Grid.Actions.Refresh==i.requestType||t.Grid.Actions.Cancel==i.requestType?(t.gridFeatures.sort&&null!==this.getHeaderTable()&&this._sortCompleteAction(i),this.model.allowPaging&&(n=this.getPager().ejPager("option"),this._currentPage(n.currentPage),delete n.currentPage,e.extend(this.model.pageSettings,n),delete this.model.pageSettings.masterObject,this._refreshGridPager()),!this.initialRender&&(this.model.scrollSettings.frozenRows>0||this.model.scrollSettings.frozenColumns>0)&&this._refreshScroller(i)):t.Grid.Actions.Delete==i.requestType||t.Grid.Actions.Save==i.requestType||t.Grid.Actions.Search==i.requestType?(this._editEventTrigger(i),!this.initialRender&&(this.model.scrollSettings.frozenRows>0||this.model.scrollSettings.frozenColumns>0)&&this._refreshScroller(i),this.model.allowPaging&&this._refreshPagerTotalRecordsCount()):t.Grid.Actions.Filtering==i.requestType?this._filterCompleteAction():t.Grid.Actions.BeginEdit==i.requestType||t.Grid.Actions.Add==i.requestType?this._editCompleteAction(i):(t.Grid.Actions.Grouping==i.requestType||t.Grid.Actions.Ungrouping==i.requestType)&&this["_"+i.requestType+"CompleteAction"](i),(this.model.toolbarSettings.showToolbar||(this.model.allowSorting||this.model.allowFiltering)&&this.model.enableResponsiveRow)&&this.refreshToolbar(),!this.initialRender&&this.model.showSummary&&this.model.summaryRows.length>0&&(this.model.currentViewData.length?(this.element.children(".e-gridfooter").length||this._renderGridFooter().insertAfter(this.getContent()),this.getFooterTable().find("colgroup").remove(),this.model.scrollSettings.frozenColumns>0?(this.getFooterTable().eq(0).append(this.getHeaderTable().eq(0).find("colgroup").clone()),this.getFooterTable().eq(1).append(this.getHeaderTable().eq(1).find("colgroup").clone())):this.getFooterTable().append(this.getHeaderTable().find("colgroup").clone()),this._createSummaryRows(this.getFooterTable())):this.element.children(".e-gridfooter").remove()),!this.initialRender&&t.gridFeatures.selection&&(this.getContent().find("td.e-selectionbackground").length||this._setCurrentRow(i.requestType),"virtualscroll"!=i.requestType&&this.clearColumnSelection()&&e(this.getHeaderTable().find("th.e-headercell")).removeClass("e-columnselection")),"batch"==this.model.editSettings.editMode&&this.refreshBatchEditMode(),(!this.initialRender&&(this.model.allowScrolling||this.model.isResponsive)&&(this._checkScrollActions(i.requestType)||-1!=this.model.editSettings.editMode.indexOf("inline")&&"beginedit"==i.requestType)||"continuous"==this.model.scrollSettings.virtualScrollMode&&"virtualscroll"==i.requestType)&&(this.model.isResponsive&&this.model.minWidth?this.windowonresize():this._refreshScroller(i)),"normal"==this.model.scrollSettings.virtualScrollMode&&"virtualscroll"==i.requestType&&this.getContent().find("div:first").scrollLeft(this.getScrollObject().scrollLeft()),null!=this._customPop&&"sorting"!=i.requestType&&this._customPop.hide(),!this.model.allowScrolling||this.initialRender||this.model.scrollSettings.enableVirtualization||this.model.isResponsive||this.getContentTable().find("tr:last").find("td").addClass("e-lastrowcell"),this.model.allowGrouping&&this.model.showSummary&&this._refreshGroupSummary(),t.Grid.Actions.Refresh==i.requestType&&!this.initialRender&&this.model.allowGrouping&&this.model.groupSettings.groupedColumns.length>0&&this._groupingCompleteAction(i),t.Grid.Actions.Refresh==i.requestType&&!this.initialRender&&this.model.allowGrouping&&this.model.groupSettings.groupedColumns.length<1&&this._ungroupingCompleteAction(i),this.model.textWrapSettings&&this._setTextWrap(),i.requestType==t.Grid.Actions.Reorder&&this.model.showColumnChooser&&(e("#"+this._id+"ccDiv").data("ejDialog").isOpened()&&e("#"+this._id+"_ccTail").first().remove(),o=this.element.find(".e-ccButton").outerHeight(),this.element.find(".e-ccButton").first().remove(),e("#"+this._id+"ccDiv_wrapper").remove(),this.element.css("margin-top",parseInt(this.element.css("margin-top"),10)-o),this._renderColumnChooser()),(this._isUngrouping||this._columnChooser)&&"refresh"==i.requestType||(this._trigger("actionComplete",i),this._isUngrouping=!1,this._columnChooser=!1),(!this._isUngrouping&&!this.initialRender||this._showHideColumns||this._columntemplaterefresh)&&this._trigger("refresh"),this.model.editSettings.showAddNewRow&&"normal"==this.model.editSettings.editMode&&(this.initialRender||0!=this.getContentTable().find("tr.e-addedrow").length||0==this.element.find(".e-gridcontent").find("tr").length||this._startAdd(),"searching"==i.requestType&&this.element.find(".e-gridtoolbar").find("li#"+this._id+"_search input").focus()),(t.Grid.Actions.BeginEdit==i.requestType||t.Grid.Actions.Add==i.requestType)&&e.isFunction(e.validator)&&this.setValidation(),this.initialRender||(this.model._groupingCollapsed=[]),this._updateDataSource&&this._gridRecordsCount&&this.model.allowFiltering&&(this._initColumns(this.model.currentViewData[0]!=s?this.model.currentViewData[0]:this.model.currentViewData.value),this._renderFilterDialogs(),this._updateDataSource=!1),"fixed"!=this.model.columnLayout||this.model.isEdit||this.setWidthToColumns(),this.model.allowRowDragAndDrop&&this._rowsDragAndDrop(),!this._isLocalData&&this.model.allowScrolling&&0!=this.element.width()&&this.refreshScrollerEvent(),!this.initialRender&&this._enableCheckSelect&&(a=this._checkSelectedRowsIndexes[this._currentPage()-1],r=this.getHeaderTable().find(".e-headercheckcelldiv .e-checkselectall"),this._selectAllCheck||r.prop("checked",!1),!this._isMapSelection&&a&&a.length>this._gridRows.length&&a.splice(this._gridRows.length,a.length-this._gridRows.length),this._isMapSelection?this._mappingSelection():"paging"!=i.requestType&&"save"!=i.requestType&&"beginedit"!=i.requestType&&"cancel"!=i.requestType?this._checkSelectedRowsIndexes=[]:a&&a.length&&this.selectRows(a),this._selectAllCheck&&(d=r.prop("checked")^this.selectedRowsIndexes.length==this.model.currentViewData.length,this.model.groupSettings.groupedColumns.length&&(d=!d),r[0].checked=d?r[0].checked:!r[0].checked)))},_getDataIndex:function(e,t){for(var i,s,l=0,n=0,o=e.length;n<o;n++){for(i=0,s=this._primaryKeys.length;i<s&&!this._checkPrimaryValue(e[n][this._primaryKeys[i]],t[this._primaryKeys[i]],this._primaryKeys[i]);i++)i==s-1&&(l=1);if(l)return n}return-1},_checkPrimaryValue:function(e,t,i){return"string"==this.getColumnByField(i).type&&(e=e.trim()),e!=t},_eventBindings:function(){var i,s,l,n,o,a,r,d,h=this.model.scrollSettings.frozenColumns>0?this._gridRows[0].length:this._gridRows.length,c=0,u=this.model.pageSettings.pageSize;if(t.gridFeatures.common&&this._refreshUnboundTemplate(this.getContentTable()),0!=this._gridRecordsCount&&(null!=this.model.queryCellInfo||null!=this.model.rowDataBound||null!=this.model.mergeCellInfo||null!=this.model.templateRefresh))for(s=0;s<h;s++){if(l=null,c=s,this.model.scrollSettings.allowVirtualScrolling&&s<u)if(this.model.scrollSettings.enableVirtualization){if(l=e(this._gridRows).eq(s),n=parseInt(e(l).attr("name"),32),-1!=e.inArray(n,this._queryCellView))continue;this._virtualLoadedRecords[n]&&(o=this._virtualLoadedRecords[n][s%this._virtualRowCount]),c=n*this._virtualRowCount+s%this._virtualRowCount}else{for(a=0;a<this._cloneQuery.queries.length;a++)i="onPage"==this._cloneQuery.queries[a].fn&&this._cloneQuery.queries[a].e.pageIndex-1;0!=(r=u*i)&&(c=(l=this.getContentTable().find("tr[name="+r+"]").eq(s)).index())}else this.model.scrollSettings.enableVirtualization&&(l=e(this._gridRows).eq(s));if((l=l||this.getRowByIndex(c)).hasClass("e-virtualrow")||t.isNullOrUndefined(this._currentJsonData[s]||o))break;d=this.model.scrollSettings.enableVirtualization?o:this._currentJsonData[s],this._rowEventTrigger(l,d)}},_rowEventTrigger:function(i,s){var l,n,o,a={row:i,data:s};for(this._trigger("rowDataBound",a),i.cells,l=e(i).find(".e-rowcell"),n=0;n<l.length;n++)a={cell:l[n],data:s,text:l[n].innerHTML},o=this._getForeignKeyData(a.data),e(l[n]).hasClass("e-rowcell")&&(a.column=this.model.columns[n]),t.isNullOrUndefined(o)||(a.foreignKeyData=o),1==this.model.allowCellMerging&&(this._cellMerging(a),this._trigger("mergeCellInfo",a)),this._trigger("queryCellInfo",a),e(l[n]).hasClass("e-templatecell")&&(a={cell:l[n],column:this.model.columns[n],data:s,rowIndex:e(i).index()},this._trigger("templateRefresh",a))},setWidthToColumns:function(){var i,l,n,o,a,r,d,h,c,u,m,p=this.getContentTable().children("colgroup").find("col"),g=this.getHeaderTable().children("colgroup").find("col"),f=[],_=this.element.width(),v=0,b=0,C=0,w=!t.isIOSWebView()&&this.getBrowserDetails();for(this.model.groupSettings.groupedColumns.length&&!this.model.allowScrolling&&this.model.groupSettings.showGroupedColumn&&w&&"msie"==w.browser&&parseInt(w.version,10)>8&&p.first().css("width",3e3/_+"%"),t.isNullOrUndefined(this.model.detailsTemplate)||(i=this.model.groupSettings.groupedColumns.length,l=0!=this.model.groupSettings.groupedColumns.length?1:0,p.eq(l).css("width",this._detailsOuterWidth),g.eq(i).css("width",this._detailsOuterWidth)),this._detailColsRefresh(),p=this._$headerCols,g=this._$contentCols,u=0;u<g.length;u++){if(this.model.allowResizeToFit&&this.model.columns[u].width===s){hCellIndex=this.model.groupSettings.groupedColumns.length?u+this.model.groupSettings.groupedColumns.length:u;var y=this._resizer._getContentWidth(u),S=this.getHeaderTable().find(".e-headercelldiv").eq(hCellIndex),x=this._resizer._getHeaderContentWidth(S);C="normal"==this.model.editSettings.editMode&&(this.model.isEdit||this._isAddNew)?"firefox"==w.browser?parseInt(p[u].style.width,10):p.eq(u).width():(y>x?y:x)+parseInt(S.css("padding-left"),10),this.columnsWidthCollection[u]=C,b+=this.model.columns[u].visible?C:0}else b+=this.model.columns[u].visible?parseInt(this.model.columns[u].width,10):0;this.model.columns[u].priority&&g.eq(u).addClass("e-table-priority-"+this.model.columns[u].priority),t.isNullOrUndefined(this.columnsWidthCollection[u])?this.model.allowScrolling&&f.push(this.model.columns[u]):(p.eq(u).width(this.columnsWidthCollection[u]),g.eq(u).width(this.columnsWidthCollection[u]))}for(n=f.filter(function(e){return!e.visible}).length,o=this.getHeaderTable().find("thead").find(".e-headercell").not(".e-detailheadercell,.e-stackedHeaderCell"),u=0;u<f.length;u++)if(f[u].visible){var T=t.isNullOrUndefined(f[u].field)?this.getColumnIndexByField(f[u].field):this.getColumnIndexByHeaderText(f[u].headerText),D=o.eq(T)[0],k=D.getBoundingClientRect().width;t.isNullOrUndefined(k)&&(k=D.offsetWidth),parseInt(k)<15&&(k=(_/this.model.columns.length).toFixed(2),bSize=(_/(this.model.scrollSettings.buttonSize||18)/100).toFixed(2),k-=bSize),p.eq(T).css("width",k+"px"),g.eq(T).css("width",k+"px"),this.model.columns[T].width=k,this.columnsWidthCollection[T]=parseFloat(k)}if(n||(this._undefinedColsCollection=null),"fixed"==this.model.columnLayout){this.model.scrollSettings&&0==this.model.scrollSettings.frozenColumns&&(this.getHeaderTable().width(b),this.getContentTable().width(b));var I=this.model.scrollSettings.frozenColumns>0?this.getHeaderTable().eq(0).width()+this.getHeaderTable().eq(1).width():this.getHeaderTable().width(),O=this.getHeaderContent().width()>I?"addClass":"removeClass",R=this.getHeaderTable(),N=this.getContentTable();this.model.scrollSettings.frozenColumns>0&&(R=this.getVisibleColumnNames().length<=this.model.scrollSettings.frozenColumns?this.getHeaderTable().eq(1):this.getHeaderTable().eq(0),N=this.getVisibleColumnNames().length<=this.model.scrollSettings.frozenColumns?this.getContentTable().eq(1):this.getContentTable().eq(0)),R[O]("e-tableLastCell"),N[O]("e-tableLastCell")}if(!this.model.allowScrolling&&this.model.allowResizeToFit&&!this.model.isResponsive&&b>_&&(this.model.allowScrolling=!0,this.model.scrollSettings.width=_,this.getHeaderTable().parent().addClass("e-headercontent"),this._renderScroller(),!this.model.scrollSettings.frozenColumns>0&&this.getHeaderTable().width(_)),this.model.isEdit&&(d=p.clone(),this.model.editSettings.showAddNewRow&&(a=this.getContentTable().find(".e-editedrow")),$colGroup=this.model.scrollSettings.frozenColumns>0?this.getContent().find(".gridform").find("colgroup"):t.isNullOrUndefined(a)||1!=a.length?e("#"+this._id+"EditForm").find("colgroup"):a.find("colgroup"),this.model.scrollSettings.frozenColumns>0&&$colGroup.first().empty().append(d.splice(0,this.model.scrollSettings.frozenColumns)),$colGroup.last().empty().append(d),(null!=this.model.detailsTemplate||null!=this.model.childGrid)&&$colGroup.prepend(this._getIndentCol())),this.model.groupSettings.groupedColumns.length)for(r=this.getContentTable().find(".e-recordtable").children("colgroup"),u=0;u<r.length;u++)d=p.clone(),h=null!=this._detailsOuterWidth?this._detailsOuterWidth:"30px",(null!=this.model.detailsTemplate||null!=this.model.childGrid)&&d.splice(0,0,e(this._getIndentCol()).width(h)[0]),r.eq(u).empty().append(d);if(this.model.scrollSettings.frozenColumns>0){for(c=0,u=0;u<this.model.columns.length;u++)c+=this.model.columns[u].visible?parseInt(this.columnsWidthCollection[u],10):0,this.model.scrollSettings.frozenColumns-1==u&&(v=Math.ceil(c));this.element.width(this.model.scrollSettings.width||this.model.width),(m=this.element.find(".e-gridcontent").children().first().width())>c?c=m+(this.getContentTable().height()<this.model.scrollSettings.height&&this.getScrollObject()._vScroll?this.model.scrollSettings.buttonSize:0):c+=this.getHeaderContent().height()<this.model.scrollSettings.height?this.model.scrollSettings.buttonSize:0,this.getContent().find(".e-frozencontentdiv").outerWidth(v).end().find(".e-movablecontentdiv").outerWidth(c-v),this.getHeaderContent().find(".e-frozenheaderdiv").outerWidth(v).end().find(".e-movableheaderdiv").outerWidth(c-v)}!this.initialRender&&this.model.allowResizeToFit&&this.model.allowScrolling&&this.model.scrollSettings.enableVirtualization&&(_=this.getHeaderTable().width()>this.getContentTable().width()?this.getHeaderTable().width():this.getContentTable().width(),this.getContentTable().width(_),this.getHeaderTable().width(_))},_initialEndRendering:function(){var i,s,l;if(this.model.allowRowDragAndDrop&&this._rowsDragAndDrop(),(this.model.editSettings.allowEditing||this.model.editSettings.allowAdding)&&("dialog"==this.model.editSettings.editMode||"dialogtemplate"==this.model.editSettings.editMode?this.element.append(this._renderDialog()):("externalform"==this.model.editSettings.editMode||"externalformtemplate"==this.model.editSettings.editMode)&&this.element.append(this._renderExternalForm())),("batch"==this.model.editSettings.editMode||this.model.editSettings.showDeleteConfirmDialog)&&this._renderConfirmDialog(),(this.model.scrollSettings.frozenColumns>0||this.model.scrollSettings.frozenRows>0)&&0==e("#"+this._id+"AlertDialog").length&&this._renderAlertDialog(),(this.model.allowMultiSorting||"multiple"==this.model.selectionType)&&this._renderMultiTouchDialog(),this.model.scrollSettings.frozenColumns>0&&!this.model.allowScrolling)return this.getContent().remove(),this.getHeaderTable().eq(1).remove(),this._alertDialog.find(".e-content").text(this.localizedLabels.FrozenColumnsScrollAlert),void this._alertDialog.ejDialog("open");if(this.model.scrollSettings.allowVirtualScrolling&&!this.model.scrollSettings.enableVirtualization&&this._createPagerStatusBar(),this._getRowHeights(),0!=this.element.width()&&this.model.allowScrolling)this._renderScroller(),this.model.scrollSettings.frozenRows>0||this.model.scrollSettings.frozenColumns>0||(this.setWidthToColumns(),null!=(i=t.isNullOrUndefined(this.getContent().data("ejScroller"))?null:this.getScrollObject())&&i.refresh(),this._isLocalData&&this.refreshScrollerEvent());else if(this.model.allowScrolling&&this.element.width()<=0)return s=this,void(l=setInterval(function(){if(!t.isNullOrUndefined(s.element)&&s.element.width()>0&&!t.isNullOrUndefined(s.element.width())){if(s._renderScroller(),!(s.model.scrollSettings.frozenRows>0||s.model.scrollSettings.frozenColumns>0)){s.setWidthToColumns();var e=t.isNullOrUndefined(s.getContent().data("ejScroller"))?null:s.getScrollObject();null!=e&&e.refresh(),s.refreshScrollerEvent()}s._endRendering(),clearInterval(l)}},100));this._endRendering()},_endRendering:function(){var e,i;!t.isNullOrUndefined(this.getContent().data("ejScroller"))&&this.model.allowScrolling&&(e=this.getScrollObject()),i=this.model.enableRTL?"e-summaryscroll e-rtl":"e-summaryscroll",this.model.allowScrolling&&this.model.showSummary&&(e._vScroll&&this.element.find(".e-summaryrow.e-scroller").addClass(i),this.getFooterTable()&&this.getFooterTable().find("colgroup").first().replaceWith(this.getHeaderTable().find("colgroup").clone())),this._addMedia(),this.model.allowScrolling&&this.model.allowTextWrap&&!this.model.scrollSettings.allowVirtualScrolling&&this.getContent().first().ejScroller("refresh"),this.model.scrollSettings.allowVirtualScrolling&&(this._currentPage(1),1!=this._currentPage()||this.model.scrollSettings.enableVirtualization||(this._virtualLoadedRecords[this._currentPage()]=this._currentJsonData),this.model.scrollSettings.enableVirtualization?this._refreshVirtualView():this._refreshVirtualContent(this._currentPage()),this.getContent().first().ejScroller("refresh"),this.getContent().ejScroller("isVScroll")?(this.element.find(".e-gridheader").addClass("e-scrollcss"),this.getHeaderTable().first().width(this.getContentTable().width())):this.element.find(".e-gridheader").removeClass("e-scrollcss")),1==this.model.allowSelection&&"multiple"==this.model.selectionType&&this._selectedMultipleRows().length>0&&this._selectingMultipleRows(this._selectedMultipleRows()),-1!=this._selectedRow()&&0==this._selectedMultipleRows().length&&(this.model.currentIndex=this._selectedRow(),this.selectRows(this._selectedRow())),!this.model.allowFiltering||"filterbar"!=this.model.filterSettings.filterType||this.model.allowPaging||this.model.scrollSettings.allowVirtualScrolling||this._createPagerStatusBar(),t.gridFeatures.common&&this.rowHeightRefresh(),t.gridFeatures.filter&&-1!=["menu","excel"].indexOf(this.model.filterSettings.filterType)&&this._refreshFilterIcon(),this.model.allowGrouping&&0!=this.model.groupSettings.groupedColumns.length&&this._recalculateIndentWidth(),this.initialRender&&(!this.model.scrollSettings.enableVirtualization||this._gridRows.length<this._virtualRowCount)&&this._addLastRow()},_addLastRow:function(){var i,s=this.getContentTable().find("tr:last").find("td"),l=0;if(this.model.allowScrolling&&!this.model.scrollSettings.allowVirtualScrolling&&!t.isNullOrUndefined(this.model.dataSource)&&!t.isNullOrUndefined(this.getRows())){for(i=0;i<this.getRows().length;i++)l+=e(this.getRows()[i]).height();l<this.getContent().height()-1&&s.addClass("e-lastrowcell")}this.model.scrollSettings.allowVirtualScrolling&&this.getContentTable().height()<this.getContent().height()&&s.addClass("e-lastrowcell")},_addMedia:function(){if("string"!=typeof this.model.scrollSettings.width&&this.model.scrollSettings.width>0?this._responsiveScrollWidth=this._originalScrollWidth=this.model.scrollSettings.width:this._originalScrollWidth=this.element.width(),"string"!=typeof this.model.scrollSettings.height&&this.model.scrollSettings.height>0&&(this._responsiveScrollHiehgt=this.model.scrollSettings.height),this.model.minWidth&&this.model.isResponsive){if(this._$onresize=e.proxy(this.windowonresize,this),e(window).on("resize",this._$onresize),e.isFunction(window.matchMedia)){var t=window.matchMedia("(max-width: 768px)");this._mediaStatus=t.matches}this.windowonresize()}},_getNoncontentHeight:function(){var e=this.getHeaderContent().outerHeight();return this.model.toolbarSettings.showToolbar&&(e+=this.element.find(".e-gridtoolbar").outerHeight()),this.model.allowPaging&&(e+=this.element.find(".e-pager").outerHeight()),this.model.showColumnChooser&&(e+=this.element.find(".e-ccButton").outerHeight()),this.model.allowGrouping&&this.model.groupSettings.showDropArea&&(e+=this.element.find(".e-groupdroparea").outerHeight()),this.model.showSummary&&(e+=this.element.find(".e-gridsummary").outerHeight()),e},setDimension:function(e,t){var i=e-this._getNoncontentHeight();this.model.scrollSettings.height=i,this.model.scrollSettings.width=t,this._renderScroller()},_getVisibleColumnsWidth:function(){for(var e=0,t=0;t<this.columnsWidthCollection.length;t++)this.model.columns[t].visible&&(e+=this.columnsWidthCollection[t]);return e},setPhoneModeMaxWidth:function(e){this._gridPhoneMode=e},_mediaQueryUpdate:function(i,s,l,n){var o,a;if(window.innerWidth<=this._gridPhoneMode&&this.model.enableResponsiveRow)return(o=this.getContentTable()[0].style).removeAttribute?o.removeAttribute("min-width"):o.removeProperty("min-width"),void(this.getContent().data("ejScroller")&&this.getContent().ejScroller("destroy"));i?(this.model.scrollSettings.width=t.isNullOrUndefined(this._responsiveScrollWidth)?l:Math.min(this._responsiveScrollWidth,l),a=Math.min(n,s)-this._getNoncontentHeight(),a=t.isNullOrUndefined(this._responsiveScrollHiehgt)?a:Math.min(this._responsiveScrollHiehgt,a),(this.element.parent().is("body")&&e(document).height()>a||a>this.element.parent().height())&&"auto"!=this.model.scrollSettings.height&&(a-=parseInt(this.element.parent().css("margin-bottom")+1)),a="auto"!=this.model.scrollSettings.height?a:this.model.scrollSettings.height,(this.model.minWidth>l||this.getContentTable().width()>l)&&s>n&&(a="auto"!=a?a+this.model.scrollSettings.buttonSize:a),t.isNullOrUndefined(this.getRows())&&(a="100%"),this.model.scrollSettings.height=this._isHeightResponsive?a:this._initHeight?this._initHeight:this.getContentTable()[0].scrollHeight,this.element.find(".e-gridheader").first().find("div").first().addClass("e-headercontent"),this._renderScroller()):(this.model.scrollSettings.width="100%",t.isNullOrUndefined(this._responsiveScrollWidth)||(this.model.scrollSettings.width=Math.min(this._responsiveScrollWidth,l)),a=Math.min(n,s)-this._getNoncontentHeight(),t.isNullOrUndefined(this._responsiveScrollHiehgt)||(a=Math.min(this._responsiveScrollHiehgt,a)),(this.element.parent().is("body")&&e(document).height()>a||a>this.element.parent().height())&&"auto"!=this.model.scrollSettings.height&&(a-=parseInt(this.element.parent().css("margin-bottom"))),a="auto"!=this.model.scrollSettings.height?a:this.model.scrollSettings.height,(!t.isNullOrUndefined(this._responsiveScrollWidth)&&this.model.scrollSettings.width==this._responsiveScrollWidth&&(this.model.minWidth>this._responsiveScrollWidth||this._getVisibleColumnsWidth()>this._responsiveScrollWidth)||t.isNullOrUndefined(this._responsiveScrollWidth)&&(this.getRowHeight()==a||this._isHeightResponsive)&&this.getContentTable().width()>l)&&(a="auto"!=a?a+this.model.scrollSettings.buttonSize:a),t.isNullOrUndefined(this.getRows())&&(a="100%"),this.getContent().height()>=a&&!this._resize&&!this.initialRender&&"string"==typeof this.model.scrollSettings.width&&(this.model.scrollSettings.width=l),this.model.scrollSettings.height=this._isHeightResponsive?a:this._initHeight?this._initHeight:this.getContentTable()[0].scrollHeight,this.element.find(".e-gridheader").first().find("div").first().addClass("e-headercontent"),this._renderScroller()),this._resize=!1},windowonresize:function(i){var s,l;i&&"resize"==i.type&&(this._resize=!0),this.model.scrollSettings.width=this._responsiveScrollWidth,this.element.css("width","100%"),this.getContentTable().width("100%"),this.getHeaderTable().width("100%"),this.getContentTable().css("minWidth",this.model.minWidth),s=this.element.width();var n=e(window).height()-this.element.offset().top,o=(t.isNullOrUndefined(this.getRows())||this.getRows().length,this.element.parent().is(e("body"))||this.element.parent().height()==e("body").height()||""==this.element.parent()[0].style.height),a=this.getContentTable()[0].scrollHeight+this._getNoncontentHeight(),r=o?n:this.element.parent().height();a+=parseInt(this.element.parent().css("margin-top")),l=this.model.minWidth>s||r<=a,this._mediaQueryUpdate(l,r,s,a)},_removeMedia:function(){e(window).off("resize",this._$onresize),this.getContentTable().css("min-width",""),this.getHeaderTable().css("min-width",""),this.getContentTable().css("width",""),this.model.scrollSettings.width="auto",this.getContent().data("ejScroller")&&this.getContent().ejScroller("destroy")},_getRowHeights:function(){var e,t=this.getRows();if(null!==t)if(this._rowHeightCollection=[],t[1]!==s&&t[1].length&&(this.model.scrollSettings.frozenColumns>0&&t[0]!==s||t[0]!==s&&void 0!==t[0].item&&"number"==typeof t[0].length&&void 0!==t[1].item&&"number"==typeof t[1].length))for(frotrs=t[0],movtrs=t[1],e=0;e<frotrs.length;e++)this._rowHeightCollection[e]=frotrs[e].offsetTop>=movtrs[e].offsetTop?frotrs[e].offsetTop:movtrs[e].offsetTop;else for(e=0;e<t.length;e++)this._rowHeightCollection[e]=t[e].offsetTop;return this._rowHeightCollection},_getEmptyTbody:function(){var i=t.buildTag("td.emptyrecord",this.localizedLabels.EmptyRecord,{},{colSpan:this.model.columns.length});return e(document.createElement("tr")).append(i)},_getIndentCol:function(){return t.buildTag("col","",{width:"30px"})},_createSortElement:function(){return t.buildTag("span.e-icon","&nbsp;")},_createSortNumber:function(e,i){return"right"==i.css("text-align")?t.buildTag("span.e-number",e,{color:"white","font-size":"9px","text-align":"center",float:"left"}):t.buildTag("span.e-number",e,{color:"white","font-size":"9px","text-align":"center",float:"right"})},_onFocusIn:function(){var e=this;setTimeout(function(){e.element.removeClass("e-activefocusout")},0)},_onFocusOut:function(){var e=this;setTimeout(function(){e.element.addClass("e-activefocusout")},0)},_wireEvents:function(){this._on(this.element,e.isFunction(e.fn.tap)&&this.model.enableTouch?"tap":"click",this._clickHandler),this._on(this.element,e.isFunction(e.fn.tap)&&this.model.enableTouch?"tap":"click",".e-gridheader",this._mouseClickHandler),this.model.enableFocusout&&(this._on(this.element,"focusout",this._onFocusOut),this._on(this.element,"focusin",this._onFocusIn)),t.gridFeatures.common&&(this._on(this.element,e.isFunction(e.fn.doubletap)&&this.model.enableTouch?"doubletap":"dblclick",".e-gridcontent > div:first",this._recorddblClickHandler),this.model.rightClick&&this._on(this.element,"contextmenu",this._rightClickHandler),this._on(this.element,"click",".e-gridcontent",this._recordClick),this._enableRowHover(),this.model.enableTouch?this._on(this.element,"swipeleft swiperight",".e-gridcontent div > .e-table",e.proxy(this._touchGrid,this)):this.element.addClass("e-touch"),this._on(this.element,"mousedown",".e-gridheader",this._headerMouseDown),this.model.allowRowDragAndDrop&&"multiple"==this.model.selectionType&&this._on(this.element,"touchstart mousedown",".e-gridcontent",this._contentMouseDown),this._on(this.element,"mouseover mouseleave",".e-gridheader:first",this._headerHover),this._on(this.element,t.eventType.mouseMove,".e-gridheader:first",this._headerHover),this.model.allowResizeToFit&&this._on(this.element,"dblclick",".e-gridheader",this._headerdblClickHandler),this.model.allowResizing&&(this._on(this.element,t.eventType.mouseMove,".e-gridheader:first",this._mouseMove),this._on(this.element,"mouseup",this._mouseUp)),this.model.allowKeyboardNavigation&&(this.element[0].tabIndex=-1==this.element[0].tabIndex?0:this.element[0].tabIndex,this.element[0].accessKey=t.isNullOrUndefined(this.element[0].accessKey)||""==this.element[0].accessKey?"e":this.element[0].accessKey,this._on(this.element,"keyup",this._keyDownHandler))),t.gridFeatures.edit&&(this._enableEditingEvents(),this._on(this.element,"click",".e-gridcontent .e-unboundcelldiv",this._unboundClickHandler)),this.model.allowGrouping&&(this._enableGroupingEvents(),this._on(this.element,"mouseenter mouseleave",".e-groupdroparea,.e-groupheadercell",this._dropAreaHover)),this._enableFilterEvents()},_enableFilterEvents:function(){if((this.model.allowMultiSorting||"multiple"==this.model.selectionType||this.model.allowFiltering)&&this._on(e(document),"mousedown",this._docClickHandler),this.model.allowFiltering){this._off(this.element,"keyup",".e-filterbar input")._on(this.element,"keyup",".e-filterbar input",this._filterBarHandler),this._on(this.element,"focus click",".e-filterbar",this._filterBarClose)}},_docClickHandler:function(i){var s=!t.isIOSWebView()&&this.getBrowserDetails(),l=e(i.target);null!=this._customPop&&0==this.element.find(i.target).length&&this._customPop.hide(),this.model.allowFiltering&&("menu"==this.model.filterSettings.filterType||"excel"==this.model.filterSettings.filterType?this._$colType&&(e(i.target).find(".e-grid.e-dlgcontainer").length>1||e(i.target).find(".e-excelfilter").length>1)&&(s&&"msie"==s.browser?"BODY"!=i.target.tagName&&(this.isExcelFilter?this._excelFilter.closeXFDialog(i):this._closeFilterDlg()):this._isExcelFilter?this._excelFilter.closeXFDialog(i):this._closeFilterDlg()):l.hasClass("e-filtertext")||l.hasClass("e-cancel")||this.getFilterBar().find(".e-cancel").addClass("e-hide"))},_mouseClickHandler:function(i){var l,n,o,a,r,d,h,c,u,m,p,g,f,_,v,b,C,w,y,S=e(i.target);if((0==S.closest(".e-grid").length||S.closest(".e-grid").attr("id")===this._id)&&"col-resize"!=this.getHeaderTable().find(".e-columnheader").not(".e-stackedHeaderRow").css("cursor"))if(l=e(i.target).is(".e-ascending, .e-descending")?e(i.target.parentNode):S.hasClass("e-groupheadercell")?S.children("div"):e(i.target),this._$fDlgIsOpen&&this.model.allowFiltering&&("menu"==this.model.filterSettings.filterType||this._isExcelFilter)&&(e.fx.off=!0,this._closeFDialog(),e.fx.off=!1),this.getHeaderTable().find(".e-columnheader").find(".e-headercellactive").removeClass("e-headercellactive").removeClass("e-active"),l.hasClass("e-headercelldiv")||l.hasClass("e-headercell")&&-1==e.inArray("column",this.model.selectionSettings.selectionMode)||!l.hasClass("e-togglegroupbutton")&&l.closest(".e-headercelldiv").length&&-1==e.inArray(l[0].tagName,["SELECT","INPUT","TEXTAREA"])||l.closest(".e-groupheadercell").length&&e(i.target).is(".e-ascending, .e-descending")){if(!this.model.allowSorting||t.gridFeatures.sort===s)return;l=l.hasClass("e-headercelldiv")||l.closest(".e-groupheadercell").length?l:l.hasClass("e-headercell")?l.find(".e-headercelldiv"):l.closest(".e-headercelldiv"),r=l.attr("ej-mappingname"),t.sortOrder.Ascending,this._$prevSElementTarget=this._$curSElementTarget,this._$curSElementTarget=l,n=l.find("span").hasClass("e-ascending")?t.sortOrder.Descending:t.sortOrder.Ascending,"touch"==i.pointerType&&null!=this._customPop&&!this._customPop.is(":visible")&&this._customPop.find(".e-sortdirect").hasClass("e-spanclicked")&&this._customPop.show(),"touch"==i.pointerType&&null!=this._customPop&&(this._customPop.find(".e-rowselect").is(":visible")||!this._customPop.find(".e-sortdirect").hasClass("e-spanclicked"))&&this.model.allowMultiSorting&&(o=l.offset(),this._customPop.removeAttr("style"),this._customPop.offset({left:o.left,top:o.top-this.getHeaderTable().find(".e-columnheader").height()-l.height()}).find(".e-sortdirect").show().end().find(".e-rowselect").hide().end().show()),this.model.allowMultiSorting&&(i.ctrlKey||this._enableSortMultiTouch)&&(this.multiSortRequest=!0),i.shiftKey&&-1==e.inArray(r,this.model.groupSettings.groupedColumns)&&(this._removeSortedColumnFromCollection(r),this.multiSortRequest=!0,r=null,this.sortColumn(r,n)),t.isNullOrUndefined(r)||this.sortColumn(r,n)}else if(l.hasClass("e-togglegroupbutton")&&this.model.allowGrouping)a=l.parent().attr("ej-mappingname"),l.hasClass("e-togglegroup")&&this.groupColumn(a),l.hasClass("e-toggleungroup")&&this.ungroupColumn(a);else if((l.hasClass("e-filtericon")||l.hasClass("e-filteredicon")||l.hasClass("e-responsivefilterColDiv")||l.parent().hasClass("e-responsivefilterColDiv"))&&(r=l.parent().find(".e-headercelldiv").attr("ej-mappingname")||l.attr("ej-mappingname")||e(l.parent()).attr("ej-mappingname"),this._$prevFieldName=this._$curFieldName,currentColumn=this.getColumnByField(r),d={True:this.localizedLabels.True,False:this.localizedLabels.False},this.model.allowFiltering)){if(h=this,e.each(this.model.columns,function(e,t){t.field==r&&(h._$colType=t.type,h._$curFieldName=t.field,h._$colFormat=t.format,h._$filterType=t.filterType,h._$colForeignKeyField=t.foreignKeyField?t.foreignKeyField:t.field,h._$colForeignKeyValue=t.foreignKeyValue,h._$colDropdownData=t.dataSource)}),("menu"==this.model.filterSettings.filterType&&"excel"!=this._$filterType||"excel"==this.model.filterSettings.filterType&&"menu"==this._$filterType)&&(c="#"+this._id+"_"+this._$colType+"Dlg",this._$menuDlgIsOpen=!0,"string"==this._$colType?this._$colForeignKeyValue&&this._$colDropdownData?e("#"+this._id+"_acString").ejAutocomplete({fields:{text:h._$colForeignKeyValue,key:h._$colForeignKeyField},dataSource:h._$colDropdownData}):e("#"+this._id+"_acString").ejAutocomplete({fields:{text:h._$curFieldName,key:this._getIdField()},dataSource:this._dataSource()}):"date"==this._$colType?this._$colFormat!=s?(this._$colFormat=this._$colFormat.replace("{0:","").replace("}",""),e(c).find(".e-datewidget .e-datepicker").ejDatePicker({dateFormat:this._$colFormat.replace("{0:","").replace("}","")})):e(c).find(".e-datewidget .e-datepicker").ejDatePicker({dateFormat:"MM/dd/yyyy"}):"datetime"==this._$colType&&(this._$colFormat!=s&&(this._$colFormat=this._$colFormat.replace("{0:","").replace("}",""),e(c).find(".e-datetimewidget input").ejDateTimePicker({dateFormat:this._$colFormat.replace("{0:","").replace("}","")})),this._setFilterFieldValues(c))),this._mediaStatus=document.documentElement.clientWidth<768,this.model.isResponsive&&this._mediaStatus){var x=this,T=t.buildTag("div.e-resFilterDialogHeaderDiv"),D=t.buildTag("div.labelRes","<span>Filter</span>");e(".e-filterMenuBtn").length>0&&e(".e-filterMenuBtn").remove();var k=t.buildTag("div.e-filterMenuBtn"),I=t.buildTag("input.e-resposnsiveFilterBtnLeft"),O=t.buildTag("input.e-resposnsiveFilterBtnRight");if(T.append(D),T.css("width","100%"),u=e(c).css("padding-left","0px"),l.parent().hasClass("e-responsivefilterColDiv")&&l.hasClass("e-filternone"))h._fltrClrHandler(),l.remove(),e("#responsiveFilter").css("display","block");else if(this.element.css("display","none"),setTimeout(function(){e("#responsiveFilter").css("display","none")}),this._isExcelFilter||"excel"==this._$filterType){if(this._excelDlg=c="#"+this._id+this._$colType+"_excelDlg",t.isNullOrUndefined(u.find(".e-resFilterDialogHeaderDiv")[0])){I.ejButton({text:"OK",type:"button",click:function(){x._responsiveFilterClose(),x._excelFilter._openedFltr=e(x._excelDlg),x._excelFilter._fltrBtnHandler(),x._setResponsiveFilterIcon()}}),O.ejButton({text:"Cancel",type:"button",click:function(){e(c).css("display","none"),h.element.css("display","block")}}),e(c).children().not(".e-searchcontainer").remove();var R=this._excelFilter,N=t.buildTag("div.e-resFilterleftIcon","",{},{closeDialogue:c.slice(1),openDialogue:"responsiveFilter"}),E=t.buildTag("span.e-icon e-resIcon e-responisveBack","",{},{closeDialogue:c.slice(1),openDialogue:"responsiveFilter"});N.click(function(t){e.proxy(x._closeDivIcon(t),this)}),T.append(N.append(E)),_=t.buildTag("div.e-resFIlterRigthIcon","",{},{closeDialogue:c.slice(1),gridEle:!0}),v=t.buildTag("span.e-icon e-resIcon e-responisveCustomFilter","",{},{closeDialogue:c.slice(1),gridEle:!0}),_.click(function(t){e.proxy(x._closeDivIcon(t),this)}),"boolean"!=h._$colType&&T.append(_.append(v)),e(c).css("padding","0px"),(b=e(c).css("height",e(window).height()-2)).css("width",e(window).width()-2),b.find(".e-searchcontainer .e-searchbox").css("margin-top","10px").children().css("margin-top","10px");var A=b.find(".e-checkboxlist"),M=.97*e(window).width(),P=.65*e(window).height();e(b.find(".e-searchcontainer")).addClass("e-resSearch"),(C=b.find(".e-resSearch .e-btncontainer").remove()).find("input:first").css("width","45.6%"),C.find("input:first").addClass("e-resposnsiveFilterBtnLeft"),C.find("input:last").addClass("e-resposnsiveFilterBtnRight"),b.find(".e-excelLabel").remove(),w=t.buildTag("div.e-excelLabel","Order Id",{"font-weight":"bold","margin-top":"10px"}),b.find(".e-searchcontainer"),w.insertAfter(b.find(".e-searchcontainer .e-searchbox")),b.prepend(T),e(c).append(k.append(I).append(O)),A.ejScroller({height:P,width:M}).ejScroller("refresh")}this._excelFilter.openXFDialog({field:r,enableResponsiveRow:!0,displayName:currentColumn.headerText,dataSource:this._dataSource(),position:{X:j,Y:V},dimension:{height:e(window).height(),width:e(window).width()},cssClass:"resFilter",type:this._$colType,format:this._$colFormat,localizedStrings:d}),e(c).insertAfter(this.element),t.isNullOrUndefined(e(c).parents(".e-grid")[0])||e(c).remove(),_.click(function(){var i,s,l,n,o,a,r,d,u,m,p,g,f,_,v;e(x._excelDlg).css("display","none"),i=e(window).height()-5,s=e(window).width(),R._openCustomFilter("equal"),l=c=e("#"+x._id+x._$colType+"_CustomFDlg").addClass("e-responsviesExcelFilter"),t.isNullOrUndefined(l.find(".e-resFilterDialogHeaderDiv")[0])&&(n=t.buildTag("div.e-resFilterDialogHeaderDiv"),o=t.buildTag("div.labelRes","<span>Custom Filter</span>"),n.append(o),a=t.buildTag("div.e-resFilterleftIcon","",{},{closeDialogue:x._id+x._$colType+"_CustomFDlg",openDialogue:x._excelDlg.slice(1)}),r=t.buildTag("span.e-icon e-resIcon e-responisveBack","",{},{closeDialogue:x._id+x._$colType+"_CustomFDlg",openDialogue:x._excelDlg.slice(1)}),a.click(function(){l.css("display","none"),x.model.enableResponsiveRow?e("#responsiveFilter").css("display","block"):x.element.css("display","block")}),n.append(a.append(r)),d=t.buildTag("div.e-resFIlterRigthIcon","",{},{closeDialogue:x._id+x._$colType+"_CustomFDlg",gridEle:!0}),u=t.buildTag("span.e-icon e-resIcon e-responisveClose","",{},{closeDialogue:x._id+x._$colType+"_CustomFDlg",gridEle:!0}),n.append(d.append(u)),d.click(function(){l.css("display","none"),x.element.css("display","block")}),l.prepend(n),l.insertAfter(x.element),l.find(".e-dlgfields").css("width","100%"),(m=l.find(".e-dlgfields:first").css("width","92%").css("margin-left","6%")).css("margin-top","4%"),p=l.find(".e-dlgfields").find(".e-fieldset legend").text(),t.buildTag("div.e-responsiveLabelDiv",p,{"margin-left":"6%"}).insertAfter(m),g=l.find(".e-dlgfields").find(".e-fieldset").find("table").css("width","61%"),l.find(".e-dlgfields").find(".e-fieldset").replaceWith(g),g.parent("div").addClass("e-responsiveExcelFilterFieldDiv"),g.find(".e-dropdownlist"),g.find(".e-dropdownlist").each(function(t,i){var s=e(i).ejDropDownList("model.dataSource"),l=.4*e(window).width();e(i).ejDropDownList("destroy").ejDropDownList({width:l,popupWidth:l+"px",dataSource:s})}),g.find(".e-autocomplete").each(function(t,i){var s=e(i).ejAutocomplete("model.dataSource"),l=.4*e(window).width();e(i).ejAutocomplete("destroy").ejAutocomplete({width:l,dataSource:s.dataSource,fields:s.fields})}),g.find(".e-datepicker").each(function(t,i){e(i).ejDatePicker("model.dataSource");var s=.4*e(window).width();e(i).ejDatePicker("destroy").ejDatePicker({width:s})}),f=I.clone(),_=O.clone(),f.ejButton({text:"OK",type:"button",click:function(){x._excelFilter._openedFltr=l,x._excelFilter._fltrBtnHandler(),l.hasClass("e-dlgcustom")&&l.ejDialog("close"),x._setResponsiveFilterIcon(),x.element.css("display","block")}}),_.ejButton({text:"Cancel",type:"button",click:function(){l.ejDialog("close"),h.element.css("display","block")}}),l.append(k.clone().append(f).append(_)),(v=l.find(".e-dlgfields .e-btncontainer").remove()).find("input:first").addClass("e-resposnsiveFilterBtnLeft"),v.find("input:first").css("width","45.6%"),v.find("input:last").addClass("e-resposnsiveFilterBtnRight")),x.element.css("display","none"),l.ejDialog({enableModal:!1,height:i,width:s,position:{X:0,Y:0},enableResize:!1,showHeader:!1}).ejDialog("open")}),t.buildTag("div")}else m=this.model.enableResponsiveRow?"OK":"Filter",p=this.model.enableResponsiveRow?"Cancel":"Clear",I.ejButton({text:m,type:"button",click:e.proxy(this._fltrBtnHandler,this)}),O.ejButton({text:p,type:"button",click:function(){"Clear"==p&&(h.element.css("display","block"),h._fltrClrHandler()),e(c).css("display","none"),O.hasClass("e-resposnsiveFilterBtnRight")&&h.element.css("display","block")}}),l.parent().hasClass("e-responsivefilterColDiv")&&l.hasClass("e-filternone")?(h._fltrClrHandler(),l.remove()):(u.addClass("e-resMenuFltr"),u.css("height",e(window).height()-1).css("width",e(window).width()-2),u.find(".e-operator").addClass("e-resFilterOperator"),u.find(".e-value").addClass("e-resFilterOperator"),u.find(".e-dlgBtns").remove().addClass("e-filterMenuBtn"),u.append(k.append(I).append(O)),t.isNullOrUndefined(u.find(".e-resFilterDialogHeaderDiv")[0])&&(u.insertAfter(this.element),N=t.buildTag("div.e-resFilterleftIcon","",{},{closeDialogue:c.slice(1),openDialogue:"responsiveFilter"}),E=t.buildTag("span.e-icon e-resIcon e-responisveBack","",{},{closeDialogue:c.slice(1),openDialogue:"responsiveFilter"}),N.click(function(){u.css("display","none"),x.model.enableResponsiveRow?e("#responsiveFilter").css("display","block"):x.element.css("display","block")}),T.append(N.append(E)),_=t.buildTag("div.e-resFIlterRigthIcon","",{},{closeDialogue:c.slice(1),gridEle:!0}),v=t.buildTag("span.e-icon e-resIcon e-responisveClose","",{},{closeDialogue:c.slice(1),gridEle:!0}),_.click(function(){u.css("display","none"),x.element.css("display","block")}),g=e(u.find(".e-value").find("input:last")),"string"==h._$colType&&(f=e(u.find(".e-value").find("input:last")).ejAutocomplete("model"),g.ejAutocomplete("destroy").ejAutocomplete({enableDistinct:!0,dataSource:f.dataSource,fields:f.fields,width:f.width,focusIn:function(){var e=this.element.closest(".e-filterDialoge").find(".e-dropdownlist");this.model.filterType=e.val()}})),T.append(_.append(v)),u.prepend(T)),u.find(".e-responsiveLabelDiv").remove(),t.buildTag("div.e-responsiveLabelDiv","",{"margin-left":"5%","font-size":"17px","margin-top":"5%"}).append(t.buildTag("span",this.getHeaderTextByFieldName(r),{"font-weight":"bold"})).insertAfter(u.find(".e-resFilterDialogHeaderDiv")),u.fadeIn(100,function(){}))}else{e(c).hasClass("e-resMenuFltr")&&(e(c).remove(),this._renderFilterDialogs(),c="#"+this._id+"_"+this._$colType+"Dlg"),e(c).ejDialog({position:{X:"",Y:""}});var L=e(document).width(),F=document.documentElement.clientWidth<800?200:250,j=l.position().left+18,V=l.position().top+2;"relative"==l.closest(".e-headercell").css("position")&&(j=l.offset().left+15,V=l.offset().top+20),y="e-filterdialoglarge",F=this._isExcelFilter?this._excelFilter._dialogContainer.width():F,l.offset().left+18+F>L&&(j-=F),200==F&&(y=""),t.isNullOrUndefined(this._$colType)||("menu"==this.model.filterSettings.filterType&&"excel"!=this._$filterType||"excel"==this.model.filterSettings.filterType&&"menu"==this._$filterType?e(c).ejDialog({position:{X:j,Y:V},width:F,cssClass:y}).ejDialog("open"):this._excelFilter.openXFDialog({field:r,displayName:currentColumn.headerText,dataSource:this._dataSource(),position:{X:j,Y:V},type:this._$colType,format:currentColumn.format,foreignKey:currentColumn.foreignKeyField,foreignKeyType:currentColumn.originalType,foreignKeyValue:currentColumn.foreignKeyValue,foreignDataSource:currentColumn.dataSource,localizedStrings:d}))}this._setFilterFieldValues(c),"number"==this._$colType&&currentColumn.serverType!=s?e(c).find(".e-numerictextbox").ejNumericTextbox({width:"100%",decimalPlaces:0}):"number"==this._$colType&&e(c).find(".e-numerictextbox").ejNumericTextbox({width:"100%",decimalPlaces:2}),this._$prevColType=this._$colType,this._$fDlgIsOpen=!0}},_responsiveFilterClose:function(){this.element.css("display","block")},_clickHandler:function(i){var s,l,n,o,a,r,d,h,c,u,m,p,g,f,_=e(i.target),v=e("[id$='ccDiv'].e-grid.e-columnChooser"),b=e("#"+this._id+"EditForm");if(v.length)for(a=!0,r=0;r<v.length;r++)(_.parents(".e-ccButton").length||_.hasClass("e-ccButton"))&&(a=e(i.target).closest(".e-grid").attr("id")+"ccDiv"!=v[r].id),(d=e("#"+v[r].id).ejDialog("instance")).isOpened()&&a&&(d.close(),e(".e-columnChoosertail").remove(),e(".e-columnChoosertailAlt").remove());if(!(_.hasClass("e-button")&&(_.hasClass("e-disable")||_.prop("disabled"))||_.closest(".e-grid").attr("id")!==this._id||_.closest("#"+this._id+"EditForm").length)){if(_.hasClass("e-rowcell")||_.closest("td").is(".e-rowcell")||_.hasClass("e-headercell")&&i.clientY-_.offset().top<_.height()/4||_.parents(".e-headercheckcelldiv").length){if(this._bulkEditCellDetails.cancelSave)return void(this._bulkEditCellDetails.cancelSave=!1);if("batch"==this.model.editSettings.editMode&&e.isFunction(e.validator)&&b.length&&b.validate().errorList.length>0)return;"batch"==this.model.editSettings.editMode&&this.element.focus(),l=_.closest("tr").hasClass("e-insertedrow")?this.model.groupSettings.groupedColumns.length:0,h=-1!=_.closest(".e-rowcell").index()?_.closest(".e-rowcell").index():_.closest(".e-headercell").index()-this.model.groupSettings.groupedColumns.length,n=_.hasClass("e-rowcell")?_.index()-l:h-l,n=null!=this.model.detailsTemplate||null!=this.model.childGrid?n-1:n,this.model.scrollSettings.frozenColumns&&(_.closest(".e-movableheaderdiv").length||_.closest(".e-movablecontentdiv").length)&&(n+=this.model.scrollSettings.frozenColumns),o=this.getIndexByRow(_.closest("tr")),this._bulkEditCellDetails.columnIndex=n,this._bulkEditCellDetails.rowIndex=o,this.model.allowSelection&&t.gridFeatures.selection&&(c=!(!this._enableCheckSelect||!_.parent(".e-checkcelldiv").length),_.hasClass("e-checkselectall")&&(this._selectAllCheck=!0,u=this.model.allowPaging?this.model.pageSettings.pageSize:this._gridRows.length,this.selectRows(0,u-1,_)),"multiple"==this.model.selectionType&&((i.ctrlKey||this._enableSelectMultiTouch)&&(this.multiSelectCtrlRequest=!0),i.shiftKey&&(this.multiSelectShiftRequest=!0,this._allowcellSelection&&o>-1&&this.selectCells([[o,[n]]]),this._allowrowSelection&&o>-1&&(!this._enableCheckSelect||c)&&this.selectRows(this._previousIndex,this.getIndexByRow(_.closest("tr")),_),this._selectedRow(this.getIndexByRow(_.closest("tr"))),this._allowcolumnSelection&&_.hasClass("e-headercell")&&!_.hasClass("e-stackedHeaderCell")&&i.clientY-_.offset().top<_.height()/4&&this.selectColumns(this._previousColumnIndex,n)),"touch"==i.pointerType&&null!=this._customPop&&!this._customPop.is(":visible")&&this._customPop.find(".e-rowselect").hasClass("e-spanclicked")&&"row"==this.model.selectionSettings.selectionMode&&this._customPop.show(),"touch"==i.pointerType&&null!=this._customPop&&(this._customPop.find(".e-sortdirect").is(":visible")||!this._customPop.find(".e-rowselect").hasClass("e-spanclicked"))&&"multiple"==this.model.selectionType&&(this._customPop.removeAttr("style"),m=_.offset(),this._customPop.offset({top:0,left:0}).offset({left:m.left,top:m.top-this.getRowHeight()-_.height()}).find(".e-sortdirect").hide().end().find(".e-rowselect").show().end().show())),this.multiSelectShiftRequest||(this._allowcellSelection&&o>-1&&(p=this._checkCellSelectionByRow(o,n),(this.model.selectionSettings.enableToggle&&1==this.selectedRowCellIndexes.length&&1==this.selectedRowCellIndexes[0].cellIndex.length||i.ctrlKey&&"multiple"==this.model.selectionType)&&-1!=p&&this.selectedRowCellIndexes.length>0&&this.selectedRowCellIndexes[0].cellIndex.length>0?this.clearCellSelection(p.rowIndex,n):this.selectCells([[o,[n]]])),this._allowrowSelection&&o>-1&&(g=this.getIndexByRow(_.closest("tr")),this._enableCheckSelect&&(this.multiSelectCtrlRequest=!0),this.model.scrollSettings.enableVirtualization&&(f=o%this._virtualRowCount,g=parseInt(e(_).closest("tr").attr("name"),32)*this._virtualRowCount-(this._virtualRowCount-f)),(!this._enableCheckSelect||c)&&(this.model.selectionSettings.enableToggle&&!this._enableCheckSelect&&1==this.getSelectedRecords().length&&-1!=e.inArray(this.getIndexByRow(_.closest("tr")),this.selectedRowsIndexes)?this.clearSelection(g):this.selectRows(this.getIndexByRow(_.closest("tr")),null,_)),!this._enableCheckSelect||i.ctrlKey||this._enableSelectMultiTouch||(this.multiSelectCtrlRequest=!1)),this._allowcolumnSelection&&_.hasClass("e-headercell")&&!_.hasClass("e-stackedHeaderCell")&&i.clientY-_.offset().top<_.height()/4&&(this.model.selectionSettings.enableToggle&&1==this.selectedColumnIndexes.length&&-1!=e.inArray(n,this.selectedColumnIndexes)?this.clearColumnSelection(n):this.selectColumns(n)),this.multiSelectCtrlRequest=!1),this.multiSelectShiftRequest=!1),s=this._bulkEditCellDetails.columnIndex>=0?this.model.columns[this._bulkEditCellDetails.columnIndex].field:null,_.closest(".e-rowcell").length&&!t.isNullOrUndefined(s)&&(this._tabKey=!1,this.model.editSettings.allowEditing&&this.model.editSettings.editMode==t.Grid.EditMode.Batch&&this.editCell(e.inArray(_.closest("tr").get(0),this.getRows()),s))}(_.hasClass("e-rowselect")||_.hasClass("e-sortdirect"))&&(_.hasClass("e-spanclicked")?(_.removeClass("e-spanclicked"),_.hasClass("e-rowselect")&&(this._enableSelectMultiTouch=!1),_.hasClass("e-sortdirect")&&(this._enableSortMultiTouch=!1),this._customPop.hide()):(_.addClass("e-spanclicked"),_.hasClass("e-rowselect")&&(this._enableSelectMultiTouch=!0),_.hasClass("e-sortdirect")&&(this._enableSortMultiTouch=!0))),this._selectAllCheck=!1,t.gridFeatures.common&&this.expandCollapse(_),_.is(".e-filtericon")&&0!=_.closest(".e-detailrow").length&&i.preventDefault(),this._$fDlgIsOpen&&this.model.allowFiltering&&("menu"==this.model.filterSettings.filterType||this._isExcelFilter)&&!_.is(".e-filtericon")&&1!=_.closest(".e-dlgcontainer").length&&this._closeFDialog(),this.model.allowSearching&&null!=this._searchBar&&(_.is(this._searchBar.find(".e-cancel"))?this._searchBar.find("input").val(""):i.target.id==this._id+"_searchbar"?this._searchBar.find(".e-cancel").removeClass("e-hide"):this._searchBar.find(".e-cancel").hasClass("e-hide")||this._searchBar.find(".e-cancel").addClass("e-hide"))}},_checkCellSelectionByRow:function(t,i){for(var s=0;s<this.selectedRowCellIndexes.length&&this.selectedRowCellIndexes[s].rowIndex!=t;s++);return s!=this.selectedRowCellIndexes.length&&-1!=e.inArray(i,this.selectedRowCellIndexes[s].cellIndex)?this.selectedRowCellIndexes[s]:-1},_persistState:function(e){this.model.enablePersistence&&this._isHeightResponsive&&(e._isHeightResponsive=this._isHeightResponsive)},_restoreState:function(e){this.model.enablePersistence&&e._isHeightResponsive&&(this._isHeightResponsive=e._isHeightResponsive)},_destroy:function(){var t,i,s,l,n,o;if(this.element.off(),this.element.find(".e-gridheader").find(".e-headercontent,.e-movableheader").add(this.getContent().find(".e-content,.e-movablecontent")).off("scroll"),(t=e("#"+this._id+"EditForm")).length){for(i=t.find(".e-field"),l=0;l<i.length;l++)(s=e(i[l])).hasClass("e-datetimepicker")?s.ejDateTimePicker("destroy"):s.hasClass("e-datepicker")?s.ejDatePicker("destroy"):s.hasClass("e-dropdownlist")&&s.ejDropDownList("destroy");t.remove()}this._confirmDialog&&this._confirmDialog.ejDialog("destroy"),this.element.find(".e-dropdownlist").ejDropDownList("model.dataSource",[]),this.model.showColumnChooser&&(e("#"+this._id+"ccDiv").ejDialog("destroy"),e("#"+this._id+"ccDiv").remove(),e("#"+this._id+"_ccTail").remove(),e("#"+this._id+"_ccTailAlt").remove()),this.model.allowFiltering&&"excel"==this.model.filterSettings.filterType&&this._excelFilter.resetExcelFilter(),this.model.allowReordering&&e(".e-columndropindicator").remove(),this.model.allowFiltering&&"menu"==this.model.filterSettings.filterType&&(n=this,e.each(this.model.columns,function(t,i){o=i.type,e("#"+n._id+o+"_ddinput_popup_wrapper").remove(),"string"==o?e("#"+n._id+"_stringDlg").find(".e-autocomplete").ejAutocomplete("destroy"):"date"==o?e("#"+n._id+"_dateDlg").find(".e-datepicker").ejDatePicker("destroy"):"datetime"==o?e("#"+n._id+"_datetimeDlg").find(".e-datetimepicker").ejDateTimePicker("destroy"):"number"==o&&e("#"+n._id+"_numberDlg").find(".e-numerictextbox").ejNumericTextbox("destroy")})),this._$onresize&&e(window).off("resize",this._$onresize),this.element.empty().removeClass("e-grid "+this.model.cssClass),this.element.ejWaitingPopup("destroy"),this.model.contextMenuSettings.enableContextMenu&&(e("#"+this._id+"_Context").ejMenu("destroy"),e("#"+this._id+"_Context").remove())},_getLocalizedLabels:function(){return t.getLocalizedConstants(this.sfType,this.model.locale)}}),t.gridFeatures.common&&e.extend(t.Grid.prototype,t.gridFeatures.common),t.gridFeatures.edit&&e.extend(t.Grid.prototype,t.gridFeatures.edit),t.gridFeatures.filter&&e.extend(t.Grid.prototype,t.gridFeatures.filter),t.gridFeatures.group&&e.extend(t.Grid.prototype,t.gridFeatures.group),t.gridFeatures.selection&&e.extend(t.Grid.prototype,t.gridFeatures.selection),t.gridFeatures.sort&&e.extend(t.Grid.prototype,t.gridFeatures.sort),t.gridFeatures.dragAndDrop&&e.extend(t.Grid.prototype,t.gridFeatures.dragAndDrop),t.Grid.Locale=t.Grid.Locale||{},t.Grid.Locale.default=t.Grid.Locale["en-US"]={EmptyRecord:"No records to display",GroupDropArea:"Drag a column header here to group its column",DeleteOperationAlert:"No records selected for delete operation",EditOperationAlert:"No records selected for edit operation",SaveButton:"Save",OkButton:"OK",CancelButton:"Cancel",EditFormTitle:"Details of ",AddFormTitle:"Add New Record",Notactionkeyalert:"This Key-Combination is not available",Keyconfigalerttext:"This Key-Combination has already been assigned to ",GroupCaptionFormat:"{{:headerText}}: {{:key}} - {{:count}} {{if count == 1 }} item {{else}} items {{/if}} ",BatchSaveConfirm:"Are you sure you want to save changes?",BatchSaveLostChanges:"Unsaved changes will be lost. Are you sure you want to continue?",ConfirmDelete:"Are you sure you want to Delete Record?",CancelEdit:"Are you sure you want to Cancel the changes?",PagerInfo:"{0} of {1} pages ({2} items)",FrozenColumnsViewAlert:"Frozen columns should be in grid view area",FrozenColumnsScrollAlert:"Enable allowScrolling while using frozen Columns",FrozenNotSupportedException:"Frozen Columns and Rows are not supported for Grouping, Row Template, Detail Template, Hierarchy Grid and Batch Editing",Add:"Add",Edit:"Edit",Delete:"Delete",Update:"Update",Cancel:"Cancel",Done:"Done",Columns:"Columns",SelectAll:"(Select All)",PrintGrid:"Print",ExcelExport:"Excel Export",WordExport:"Word Export",PdfExport:"PDF Export",StringMenuOptions:[{text:"StartsWith",value:"StartsWith"},{text:"EndsWith",value:"EndsWith"},{text:"Contains",value:"Contains"},{text:"Equal",value:"Equal"},{text:"NotEqual",value:"NotEqual"}],NumberMenuOptions:[{text:"LessThan",value:"LessThan"},{text:"GreaterThan",value:"GreaterThan"},{text:"LessThanOrEqual",value:"LessThanOrEqual"},{text:"GreaterThanOrEqual",value:"GreaterThanOrEqual"},{text:"Equal",value:"Equal"},{text:"NotEqual",value:"NotEqual"}],PredicateAnd:"AND",PredicateOr:"OR",Filter:"Filter",FilterMenuCaption:"Filter Value",FilterbarTitle:"'s filter bar cell",MatchCase:"Match Case",Clear:"Clear",ResponsiveFilter:"Filter",ResponsiveSorting:"Sort",Search:"Search",DatePickerWaterMark:"Select date",NumericTextBoxWaterMark:"Enter value",EmptyDataSource:"DataSource must not be empty at initial load since columns are generated from dataSource in AutoGenerate Column Grid",ForeignKeyAlert:"The updated value should be a valid foreign key value",True:"true",False:"false",UnGroup:"Click here to ungroup",AddRecord:"Add Record",EditRecord:"Edit Record",DeleteRecord:"Delete Record",Save:"Save",Grouping:"Group",Ungrouping:"Ungroup",SortInAscendingOrder:"Sort In Ascending Order",SortInDescendingOrder:"Sort In Descending Order",NextPage:"Next Page",PreviousPage:"Previous Page",FirstPage:"First Page",LastPage:"Last Page",EmptyRowValidationMessage:"Atleast one field must be updated",NoResult:"No Matches Found"},t.Grid.Actions={Paging:"paging",Sorting:"sorting",Filtering:"filtering",BeginEdit:"beginedit",Save:"save",Add:"add",Delete:"delete",Cancel:"cancel",Grouping:"grouping",Ungrouping:"ungrouping",Refresh:"refresh",Reorder:"reorder",Search:"searching",BatchSave:"batchsave",VirtualScroll:"virtualscroll"},t.Grid.SummaryType={Average:"average",Minimum:"minimum",Maximum:"maximum",Count:"count",Sum:"sum",TrueCount:"truecount",FalseCount:"falsecount",Custom:"custom"},t.Grid.EditMode={Normal:"normal",Dialog:"dialog",DialogTemplate:"dialogtemplate",Batch:"batch",ExternalForm:"externalform",ExternalFormTemplate:"externalformtemplate",InlineForm:"inlineform",InlineTemplateForm:"inlineformtemplate"},t.Grid.PrintMode={AllPages:"allpages",CurrentPage:"currentpage"},t.Grid.ResizeMode={NextColumn:"nextcolumn",Control:"control",Normal:"normal"},t.Grid.Rowposition={Top:"top",Bottom:"bottom"},t.Grid.FormPosition={BottomLeft:"bottomleft",TopRight:"topright"},t.Grid.ClipMode={Ellipsis:"ellipsis",Clip:"clip",EllipsisWithTooltip:"ellipsiswithtooltip"},t.Grid.EditingType={String:"stringedit",Boolean:"booleanedit",Numeric:"numericedit",Dropdown:"dropdownedit",DatePicker:"datepicker",DateTimePicker:"datetimepicker"},t.Grid.UnboundType={Edit:"edit",Save:"save",Delete:"delete",Cancel:"cancel"},t.Grid.ToolBarItems={Add:"add",Edit:"edit",Delete:"delete",Update:"update",Cancel:"cancel",Search:"search",PrintGrid:"printGrid",ExcelExport:"excelExport",WordExport:"wordExport",PdfExport:"pdfExport"},t.Grid.FilterType={Menu:"menu",FilterBar:"filterbar",Excel:"excel"},t.Grid.FilterBarMode={Immediate:"immediate",OnEnter:"onenter"},t.Grid.SelectionType={Single:"single",Multiple:"multiple"},t.Grid.ColumnLayout={Auto:"auto",Fixed:"fixed"},t.Grid.GridLines={Both:"both",None:"none",Horizontal:"horizontal",Vertical:"vertical"},t.Grid.VirtualScrollMode={Normal:"normal",Continuous:"continuous"},t.Grid.SelectionMode={Row:"row",Cell:"cell",Column:"column"},t.Grid.WrapMode={Both:"both",Content:"content",Header:"header"},t.Grid.exportAll=function(e,i){t.Grid.prototype.export(e,null,!0,i)},t.SqlDataSourceAdaptor=(new t.UrlAdaptor).extend({init:function(){this.initialRender=!0},processQuery:function(e,i,s){var l,n,o,a,r=t.UrlAdaptor.prototype.processQuery(e,i,s),d=t.parseJSON(r.data),h={};if(d.param)for(l=0;l<d.param.length;l++)n=d.param[l],h[o=Object.keys(n)[0]]=n[o];return h.value=d,a=JSON.stringify({type:"SqlData",args:d}),0==this.initialRender&&__doPostBack("",a),this.initialRender=!1,{data:JSON.stringify(h),result:e.dataSource.json,ejPvtData:r.ejPvtData,count:e.dataSource.json.length}},processResponse:function(e,i,l,n,o){var a,r,d,h=e.ejPvtData||{},c=e.groupDs;if(n&&n.getResponseHeader("Content-Type")&&-1!=n.getResponseHeader("Content-Type").indexOf("xml")&&9==e.nodeType)return l._requiresCount?{result:[],count:0}:[];if((a=JSON.parse(e.data))&&"batch"===a.action&&e.added)return o.added=e.added,o;if(h&&h.aggregates&&h.aggregates.length){var u,m=h.aggregates,p={},g={};for(("count"in e&&(p.count=e.count),e.result&&(p.result=e.result),e.aggregate&&(e=e.aggregate),d=0);d<m.length;d++)(u=t.aggregates[m[d].type])&&(g[m[d].field+" - "+m[d].type]=u(e,m[d].field));p.aggregates=g,e=p}if(h&&h.groups&&h.groups.length){for((r=h.groups,p={},"count"in e&&(p.count=e.count),e.aggregates&&(p.aggregates=e.aggregates),e.result&&(e=e.result),d=0);d<r.length;d++)t.isNullOrUndefined(c)||(c=t.group(c,r[d])),e=t.group(e,r[d],h.aggregates,null,c);return p.count!=s?p.result=e:p=e,p}return e}})}(jQuery,Syncfusion),function(e,t){t.gridFeatures=t.gridFeatures||{},t.gridFeatures.gridResize=function(t){this.$headerTable=t.getHeaderTable(),this.gridInstance=t,this._colMinWidth=15,this._$visualElement=e(),this._currentCell=-1,this._allowStart=!1,this._oldWidth=null,this._orgX=null,this._orgY=null,this._extra=null,this._expand=!1,this._target=null,this._cellIndex=-1},t.gridFeatures.gridResize.prototype={_mouseHover:function(t){var i,s,l,n,o;if(!this._$visualElement.is(":visible")&&(this._allowStart=!1,e(t.target).is(".e-headercelldiv")&&(t.target=t.target.parentNode),i=e(t.target),e(t.target).hasClass("e-filtericon")&&("col-resize"==e(t.target).css("cursor")||"col-resize"==e(t.target).closest("tr").css("cursor"))&&(e(t.target).css("cursor","pointer"),e(t.target).closest("tr").css("cursor","pointer")),i.hasClass("e-headercell"))){var a=t.target,r=a.getBoundingClientRect(),d=0,h=0;(t.type="mousemove")?(d=t.clientX,h=t.clientY):(t.type="touchmove")?(d=evt.originalEvent.changedTouches[0].clientX,h=evt.originalEvent.changedTouches[0].clientY):(t.type="MSPointerMove")&&(d=t.originalEvent.clientX,h=t.originalEvent.clientY),s=this.gridInstance.model.scrollSettings&&this.gridInstance.model.scrollSettings.frozenColumns?this.gridInstance.getHeaderContent().width()+this.gridInstance.element.children(".e-gridheader").find(".e-columnheader").offset().left:this.gridInstance.getHeaderTable().width()+this.gridInstance.element.children(".e-gridheader").find(".e-columnheader").offset().left,(d>=r.left+document.documentElement.scrollLeft+a.offsetWidth-5||d<=r.left+3)&&d<s&&d>=r.left&&h<=r.top+document.documentElement.scrollTop+t.target.offsetHeight?(l=d>r.left+3?e(t.target).find(".e-headercelldiv"):e(t.target).prevAll("th:visible:first").find(".e-headercelldiv"),n=window.pageXOffset||document.documentElement.scrollTop||document.body.scrollTop,o=this.gridInstance.element.find(".e-headercell").not(".e-detailheadercell").offset().left+10-n,(this.gridInstance.model.enableRTL&&d<=o||!this.gridInstance.model.enableRTL&&d>=o)&&((this.gridInstance.model.showStackedHeader||l.length)&&-1==e.inArray(e(l).attr("ej-mappingname"),this.gridInstance._disabledResizingColumns)?(this.gridInstance.model.showStackedHeader&&e(i.parents("thead")).find("tr").css("cursor","col-resize"),this.gridInstance.model.showStackedHeader||i.parent().css("cursor","col-resize"),this._currentCell=e(t.target).hasClass("e-stackedHeaderCell")?this.gridInstance.getHeaderContent().find(".e-headercell:visible").index(a):this.gridInstance.getHeaderContent().find(".e-headercell:visible").not(".e-stackedHeaderCell").index(a),this.gridInstance.model.enableRTL&&(this._currentCell=this._currentCell-1),this._allowStart=!0):(i.parent().css("cursor","pointer"),this._currentCell=-1))):(this.gridInstance.element.find(".e-columnheader").css("cursor","pointer"),this._currentCell=-1)}},_start:function(t,i){var s,l,n,o,a,r,d=this.gridInstance.getHeaderTable().find(".e-columnheader");if(l=e(this._target).hasClass("e-stackedHeaderCell")?d.find(".e-headercell").not(".e-hide"):d.find(".e-headercell").not(".e-stackedHeaderCell,.e-hide"),-1!=this._currentCell&&this._currentCell<l.length&&(n=l[this._currentCell]),void 0!==n)if(o=n.getBoundingClientRect(),s=this._tableY=o.top+parseInt(-1!=navigator.userAgent.indexOf("WebKit")?document.body.scrollTop:document.documentElement.scrollTop),this._allowStart){if(a=this._$visualElement=e(document.createElement("div")),_height=this.gridInstance.element.find(".e-gridcontent").first().height()+this.gridInstance.element.find(".e-gridheader").height(),this.gridInstance.model.showStackedHeader&&this.gridInstance.model.stackedHeaderRows.length>0){var h=this.gridInstance.getHeaderTable().find("tr.e-columnheader"),c=(h.length,e(this._target).parent("tr")[0].rowIndex);for(r=0;r<c;r++)_height-=e(h[r]).height()}a.addClass("e-reSizeColbg").appendTo(this.gridInstance.element).attr("unselectable","on").css("visibility","hidden"),this.gridInstance._resizeTimeOut=setTimeout(function(){a.css({visibility:"visible",height:_height+"px",cursor:"col-resize",left:t,top:s,position:"fixed"})},100),this._oldWidth=n.offsetWidth,this._orgX=t,this._orgY=i,this._extra=t-this._orgX,this._expand=!0}else this._currentCell=-1},_mouseMove:function(e){if(this._expand){var t=0;(e.type="mousemove")?(t=e.clientX,e.clientY):(e.type="touchmove")?(t=evt.originalEvent.changedTouches[0].clientX,evt.originalEvent.changedTouches[0].clientY):(e.type="MSPointerMove")&&(t=e.originalEvent.clientX,e.originalEvent.clientY),-1!=navigator.userAgent.indexOf("WebKit")&&(t=e.pageX,e.pageY),t+=document.documentElement.scrollLeft,e.preventDefault(),this._moveVisual(t)}else this._mouseHover(e)},_getCellIndex:function(t){e(t._target);var i,s,l=t._target,n=l.getBoundingClientRect(),o=-1!=navigator.userAgent.indexOf("WebKit")?document.body.scrollLeft:document.documentElement.scrollLeft;return this._orgX<n.left+5+o&&(l=e(l).prevAll(":visible:first")[0]),s=i=l.cellIndex,t.gridInstance.model.groupSettings.groupedColumns.length&&(s=i-t.gridInstance.model.groupSettings.groupedColumns.length),s},_reSize:function(i){var s,l,n,o,a,r,d,h,c,u,m,p,g,f,_,v;if(this._initialTableWidth=this.gridInstance.model.scrollSettings&&this.gridInstance.model.scrollSettings.frozenColumns?this.gridInstance.getHeaderTable().first().parent().width()+this.gridInstance.getHeaderTable().last().parent().width():this.gridInstance.getHeaderTable().parent().width(),this.gridInstance.model.enableRTL&&(this.gridInstance.model.detailsTemplate||this.gridInstance.model.childGrid)?this._currentCell=this._currentCell-1:this.gridInstance.model.enableRTL||this._getResizableCell(),l=this.gridInstance.model.scrollSettings&&this.gridInstance.model.scrollSettings.frozenColumns>0?this.gridInstance.getHeaderTable().find("thead"):e(this._target).parents("thead"),-1!=this._currentCell&&this._expand){this._expand=!1;var b=(e(this._target).hasClass("e-stackedHeaderCell")?l.find(".e-headercell:not(.e-detailheadercell)").filter(":visible"):l.find(".e-headercell:not(.e-detailheadercell,.e-stackedHeaderCell)").filter(":visible"))[this._currentCell],C=b.offsetWidth,w=i-this._orgX;if(this.gridInstance.model.enableRTL&&(w=-w),parseInt(w)+parseInt(C)>this._colMinWidth){if(0!=w&&l.css("cursor","default"),t.getObject("resizeSettings.resizeMode",this.gridInstance.model)==t.Grid.ResizeMode.NextColumn&&(n=this.gridInstance.getHeaderTable().find("colgroup").find("col"),t.isNullOrUndefined(this.gridInstance.model.detailsTemplate||this.gridInstance.model.childGrid)||(this.gridInstance._detailColsRefresh(),n=this.gridInstance._$headerCols),a=(o=n.filter(this._diaplayFinder).eq(this.gridInstance.model.allowGrouping&&t.isNullOrUndefined(this.gridInstance.model.detailsTemplate||this.gridInstance.model.childGrid)?this._currentCell+this.gridInstance.model.groupSettings.groupedColumns.length:this._currentCell)).width()),this._resizeColumnUsingDiff(C,w),r=(s=this.gridInstance.element.find(".e-gridcontent").first()).find("div").hasClass("e-content"),(d=!t.isIOSWebView()&&this.gridInstance.getBrowserDetails())&&"msie"==d.browser&&this.gridInstance.model.allowScrolling&&(h=this.gridInstance.getContentTable().width(),c=this.gridInstance._calculateWidth(),this.gridInstance.model.scrollSettings&&this.gridInstance.model.scrollSettings.frozenColumns>0?(this.gridInstance.getHeaderTable().last().width(c-this.gridInstance.getHeaderContent().find(".e-frozenheaderdiv").width()),this.gridInstance.getContentTable().last().width(c-this.gridInstance.getContent().find(".e-frozencontentdiv").width()),this.gridInstance.model.showSummary&&this.gridInstance.getFooterTable().last().width(c-this.gridInstance.getFooterContent().find(".e-frozenfootertdiv").width())):c>h&&(this.gridInstance.getHeaderTable().width(c),this.gridInstance.getContentTable().width(c),this.gridInstance.model.showSummary&&this.gridInstance.getFooterTable().width(c)),parseInt(d.version,10)>8&&this.gridInstance.model.groupSettings&&this.gridInstance.model.groupSettings.groupedColumns.length&&(c>h?(this.gridInstance.getContentTable().width(c),this.gridInstance.getContentTable().children("colgroup").find("col").first().css("width",2e3/s.find("table").first().width()+"%")):(this.gridInstance.getContentTable().css("width","100%"),this.gridInstance._groupingAction(!0),this.gridInstance.getContentTable().children("colgroup").find("col").first().css("width",(this.gridInstance.getHeaderTable().find("colgroup").find("col").first().width()/s.find("table").first().width()*100).toFixed(2)+"%"))),this.gridInstance.getHeaderTable().parent().scrollLeft(s.find(".e-content").scrollLeft()-1)),this.gridInstance._colgroupRefresh(),this.gridInstance.model.allowTextWrap&&this.gridInstance.rowHeightRefresh(),this.gridInstance.model.groupSettings.groupedColumns.length&&!this.gridInstance.model.isEdit&&this.gridInstance._recalculateIndentWidth(),t.getObject("resizeSettings.resizeMode",this.gridInstance.model)!=t.Grid.ResizeMode.Normal)if(t.getObject("resizeSettings.resizeMode",this.gridInstance.model)==t.Grid.ResizeMode.NextColumn){u=this.gridInstance.getHeaderTable().find("colgroup").find("col"),m=this.gridInstance.getContentTable().find("colgroup").find("col"),t.isNullOrUndefined(this.gridInstance.model.detailsTemplate||this.gridInstance.model.childGrid)||(this.gridInstance._detailColsRefresh(),u=this.gridInstance._$headerCols,m=this.gridInstance._$contentCols);var y=this._currentCell+1,S=u.filter(this._diaplayFinder).eq(this.gridInstance.model.allowGrouping&&t.isNullOrUndefined(this.gridInstance.model.detailsTemplate)?y+this.gridInstance.model.groupSettings.groupedColumns.length:y);if((P=S.width()+(a-o.width()))<this._colMinWidth&&(P=this._colMinWidth),S.width(P),this.gridInstance.model.groupSettings&&this.gridInstance.model.groupSettings.groupedColumns.length){var x=this.gridInstance.getContentTable().find(".e-recordtable"),T=x.find("colgroup"),D=this.gridInstance.getVisibleColumnNames().length;for(this.gridInstance.getContentTable().find(".e-detailrow").length&&(T=T.not(x.find(".e-detailrow").find("colgroup")).get()),_=0;_<T.length;_++)(p=e(T[_]).find("col").filter(this._diaplayFinder)).length>D&&p.splice(0,p.length-D),e(p[y]).width(P)}if(this.gridInstance.model.scrollSettings&&this.gridInstance.model.scrollSettings.frozenColumns){if(y>=0&&y<this.gridInstance.model.scrollSettings.frozenColumns&&this._getFrozenResizeWidth()+w>this.gridInstance.element.find(".e-headercontent").first().width())return;$ContentCol=m.filter(this._diaplayFinder).eq(y)}else $ContentCol=m.filter(this._diaplayFinder).eq(this.gridInstance.model.allowGrouping&&t.isNullOrUndefined(this.gridInstance.model.detailsTemplate)?y+this.gridInstance.model.groupSettings.groupedColumns.length:y);if($ContentCol.width(P),this.gridInstance._findColumnsWidth(),this.gridInstance.model.scrollSettings.frozenColumns>0&&e(b).is(":last-child")&&"ejGrid"==this.gridInstance.pluginName){var k=o.width()-a,I=this.gridInstance.getHeaderContent().find(".e-frozenheaderdiv").width()+k,O=this.gridInstance.getHeaderContent().find(".e-movableheaderdiv").width()-k,R=parseInt(this.gridInstance.getHeaderContent().find(".e-movableheader")[0].style["margin-left"])+k;this.gridInstance.getHeaderContent().find(".e-frozenheaderdiv").width(I),this.gridInstance.getContent().find(".e-frozencontentdiv").width(I),this.gridInstance.getHeaderContent().find(".e-movableheaderdiv").width(O),this.gridInstance.getContent().find(".e-movablecontentdiv").width(O),this.gridInstance.getHeaderContent().find(".e-movableheader").css("margin-left",R),this.gridInstance.getContent().find(".e-movablecontent").css("margin-left",R)}this.gridInstance.model.scrollSettings.frozenColumns>0&&e(this._target).parent("tr").parents("div:first").hasClass("e-frozenheaderdiv")&&(this.gridInstance.getHeaderContent().find(".e-frozenheaderdiv").width(this._newWidth),this.gridInstance.getContent().find(".e-frozencontentdiv").width(this._newWidth))}else this.gridInstance.model.scrollSettings.frozenColumns||(g=this.gridInstance.getHeaderTable().width(),this.gridInstance.getHeaderTable().css("width",g+parseInt(w)),this.gridInstance.getContentTable().css("width",g+parseInt(w)),this.gridInstance.model.scrollSettings.width+=parseInt(w),this.gridInstance.getContent().width()>this.gridInstance.getContentTable().width()?(this.gridInstance.getContentTable().addClass("e-tableLastCell"),this.gridInstance.getHeaderTable().addClass("e-tableLastCell")):(this.gridInstance.getContentTable().removeClass("e-tableLastCell"),this.gridInstance.getHeaderTable().removeClass("e-tableLastCell")));if("msie"==d.browser||!d||!this.gridInstance.model.allowScrolling||0!=this.gridInstance.model.scrollSettings.frozenColumns||(this.gridInstance.getHeaderTable().width("100%"),this.gridInstance.getContentTable().width("100%"),((f=this.gridInstance._calculateWidth())<=this.gridInstance.getContentTable().width()||this.gridInstance.getHeaderTable().width()>this.gridInstance.getContentTable().width())&&(this.gridInstance.getHeaderTable().width(f),this.gridInstance.getContentTable().width(f))),this.gridInstance.model.allowResizing&&"default"==this.gridInstance.getHeaderTable().find(".e-columnheader").css("cursor")){var N=this._currentCell,E=e(this._target),A=[],M=[],P=C+w,L={};if(this.gridInstance.model.showStackedHeader&&E.hasClass("e-stackedHeaderCell")){var F=E.parent(".e-stackedHeaderRow").index(),j=E.parent(".e-stackedHeaderRow").children()[this._cellIndex].cellIndex,V=this.gridInstance.model.stackedHeaderRows[F].stackedHeaderColumns[j].column,z=V;for(V instanceof Array||(z=V.split(",")),_=0;_<z.length;_++)v=this.gridInstance.getColumnIndexByField(z[_]),A.push(v),M.push(this.gridInstance.model.columns[v]);L={columnIndex:A,column:M,oldWidth:C,newWidth:P}}else L={columnIndex:N,column:this.gridInstance.model.columns[N],oldWidth:C,newWidth:P};this.gridInstance._trigger("resized",L)}this.gridInstance.model.allowScrolling&&(this.gridInstance._scrollObject.refresh(this.gridInstance.model.scrollSettings.frozenColumns>0),!r&&s.find("div").hasClass("e-content")&&this.gridInstance.refreshScrollerEvent(),this.gridInstance._isHscrollcss())}}this._target=null,this._$visualElement.remove(),this._expand=!1,this._currentCell=-1,this._allowStart=!1},_getFrozenResizeWidth:function(){for(var e=this.gridInstance.getHeaderTable().find("colgroup").find("col").slice(0,this.gridInstance.model.scrollSettings?this.gridInstance.model.scrollSettings.frozenColumns:0),t=0,i=0;i<e.length;i++)"none"!=e.eq(i).css("display")&&(t+=parseInt(e[i].style.width.replace("px","")));return t},_diaplayFinder:function(){return"none"!=e(this).css("display")},_resizeColumnUsingDiff:function(i,s){var l,n,o,a,r,d,h,c,u,m,p,g,f,_,v,b,C;this._currntCe=this._currentCell,n=this.gridInstance.getHeaderTable().find("colgroup").find("col"),o=this.gridInstance.getContentTable().find("colgroup").find("col"),t.isNullOrUndefined(this.gridInstance.model.detailsTemplate||this.gridInstance.model.childGrid)||(this.gridInstance._detailColsRefresh(),n=this.gridInstance._$headerCols,o=this.gridInstance._$contentCols);var w,y=n.filter(this._diaplayFinder).eq(this.gridInstance.model.allowGrouping&&t.isNullOrUndefined(this.gridInstance.model.detailsTemplate||this.gridInstance.model.childGrid)?this._currentCell+this.gridInstance.model.groupSettings.groupedColumns.length:this._currentCell),S=(n.slice(0,this.gridInstance.model.scrollSettings?this.gridInstance.model.scrollSettings.frozenColumns:0),y[0].style.width),x=-1!=S.indexOf("%"),T=!S||x?e(this._target).outerWidth():S;if(l=s/=x?1:i/parseInt(T),(a=this._newWidth=parseInt(s)+parseInt(T))>0&&0!=s){if(a<this._colMinWidth&&(a=this._colMinWidth),t.getObject("resizeSettings.resizeMode",this.gridInstance.model)==t.Grid.ResizeMode.NextColumn&&(r=y.next(),(d=!(!this.gridInstance.model.scrollSettings.frozenColumns||this._currentCell!=this.gridInstance.model.scrollSettings.frozenColumns-1))&&(r=n.eq(this.gridInstance.model.scrollSettings.frozenColumns)),(d||!y.is(":last-child"))&&r.width()+(y.width()-a)<=this._colMinWidth&&(a=y.width()+(r.width()-this._colMinWidth))),s=a-i,this.gridInstance.model.scrollSettings&&this.gridInstance.model.scrollSettings.frozenColumns){if(this._currentCell>=0&&this._currentCell<this.gridInstance.model.scrollSettings.frozenColumns&&this._getFrozenResizeWidth()+s>this.gridInstance.element.find(".e-headercontent").first().width())return;w=o.filter(this._diaplayFinder).eq(this._currentCell)}else w=o.filter(this._diaplayFinder).eq(this.gridInstance.model.allowGrouping&&t.isNullOrUndefined(this.gridInstance.model.detailsTemplate||this.gridInstance.model.childGrid)?this._currentCell+this.gridInstance.model.groupSettings.groupedColumns.length:this._currentCell);if(this.gridInstance.model.showSummary&&(this._$footerCols=this.gridInstance.getFooterTable().find("colgroup").find("col"),O=this.gridInstance.model.columns.length,this._$footerCols.length>O&&this._$footerCols.splice(0,this._$footerCols.length-O),$footerCols=this._$footerCols,$footerCols.filter(this._diaplayFinder).eq(this._currentCell).outerWidth(a)),e(this._target).parent("tr").hasClass("e-stackedHeaderRow")?this._resizeStackedHeaderColumn(e(this._target).parent("tr"),l,this._currntCe):y.outerWidth(a),e(this._target).parent("tr").hasClass("e-stackedHeaderRow")){if(this.gridInstance.model.groupSettings.groupedColumns.length)for(k=(D=this.gridInstance.getContentTable().find(".e-recordtable")).find("colgroup"),m=0;m<this._changedcell.length;m++)for(I=this._changedcell[m],h=0;h<k.length;h++)c=e(k[h]).children().filter(this._diaplayFinder),(b=parseInt(l)+parseInt(c[I].style.width))<this._colMinWidth&&(b=this._colMinWidth),e(c[I]).width(b);for(this.gridInstance.getContentTable().find("colgroup").find("col").filter(this._diaplayFinder).length,m=0;m<this._changedcell.length;m++)u=this.gridInstance.getContentTable().find("colgroup").find("col").filter(this._diaplayFinder)[this._changedcell[m]],(b=parseInt(l)+parseInt(u.style.width))<this._colMinWidth&&(b=this._colMinWidth),e(u).outerWidth(b),this.gridInstance.model.isEdit&&this.gridInstance.model.allowGrouping&&0==this.gridInstance.model.groupSettings.groupedColumns.length&&($sEditCol=this.gridInstance.getContentTable().find(".gridform").find("colgroup col").filter(this._diaplayFinder)[this._changedcell[m]],e($sEditCol).outerWidth(b))}else{if(this.gridInstance.model.groupSettings&&this.gridInstance.model.groupSettings.groupedColumns.length){var D,k=(D=this.gridInstance.getContentTable().find(".e-recordtable")).find("colgroup"),I=this._currentCell,O=this.gridInstance.getVisibleColumnNames().length;for(this.gridInstance.getContentTable().find(".e-detailrow").length&&(k=k.not(D.find(".e-detailrow").find("colgroup")).get()),m=0;m<k.length;m++)(p=e(k[m]).find("col").filter(this._diaplayFinder)).length>O&&p.splice(0,p.length-O),e(p[I]).width(a)}w.outerWidth(a),this.gridInstance.model.isEdit&&(f=(g=this.gridInstance.getContentTable().find(".e-editedrow,.e-addedrow")).find("table").find("colgroup col"),_=g.hasClass("e-addedrow")&&this.gridInstance.model.groupSettings.groupedColumns.length?this._currentCell+this.gridInstance.model.groupSettings.groupedColumns.length-1:this._currentCell,f.filter(this._diaplayFinder).eq(_).outerWidth(a))}if(this.gridInstance._findColumnsWidth(),this.gridInstance.model.scrollSettings&&this.gridInstance.model.scrollSettings.frozenColumns&&"nextcolumn"!=t.getObject("resizeSettings.resizeMode",this.gridInstance.model)&&"ejGrid"==this.gridInstance.pluginName){for(v=this.gridInstance.getContentTable().find("colgroup").find("col").slice(0,this.gridInstance.model.scrollSettings.frozenColumns),b=0,m=0;m<v.length;m++)b+="none"==v[m].style.display?0:parseInt(v[m].style.width.replace("px",""));this.gridInstance.getHeaderContent().find(".e-frozenheaderdiv").width(b),C=this.gridInstance.model.enableRTL?"margin-right":"margin-left",this.gridInstance.getContent().find(".e-frozencontentdiv").width(b).next().css(C,b+"px"),this.gridInstance.getHeaderContent().find(".e-frozenheaderdiv").width(b).next().css(C,b+"px"),this.gridInstance.model.showSummary&&this.gridInstance.getFooterContent().find(".e-frozenfooterdiv").width(b)}this.gridInstance.getHeaderTable().find(".e-columnheader").css("cursor","default")}},_resizeStackedHeaderColumn:function(t,i,s){var l,n,o,a,r;this._changedcell=[];var d=0,h=0,c=this.gridInstance.getHeaderContent().find(".e-headercell").not(".e-detailheadercell")[s],u=e(c).attr("colspan"),m=e(c).parent("tr"),p=(m.next(),c.cellIndex);for(this.gridInstance.model.groupSettings.showGroupedColumn&&(d+=h=this.gridInstance.model.groupSettings.groupedColumns.length);p>h;)p--,l=e(m).children("th").not(".e-detailheadercell")[p],d+=parseInt(e(l).attr("colspan"));for(this._currentCell=d,n=d+parseInt(u),o=d;o<n;o++)a=this.gridInstance.getHeaderTable().find("col").filter(this._diaplayFinder)[o],this._changedcell.push(o-h),(r=parseInt(i)+parseInt(a.style.width))<this._colMinWidth&&(r=this._colMinWidth),e(a).outerWidth(r)},_triggerResizeEvents:function(t,i){var s,l,n,o,a,r=this.gridInstance.getHeaderTable().find(".e-columnheader"),d=r.find(".e-headercell").filter(":visible"),h=this._cellIndex,c=e(this._target),u=[];if(col=[],"resizeStart"==t&&(this._orgX=i,h=this._cellIndex=this._getCellIndex(this,i)),l=(s=d[this._currentCell]).offsetWidth,this.gridInstance.model.showStackedHeader&&c.hasClass("e-stackedHeaderCell")){var m=c.parent(".e-stackedHeaderRow").index(),p=c.parent(".e-stackedHeaderRow").children()[this._cellIndex].cellIndex,g=this.gridInstance.model.stackedHeaderRows[m].stackedHeaderColumns[p].column,f=g;for(g instanceof Array||(f=g.split(",")),n=0;n<f.length;n++)o=this.gridInstance.getColumnIndexByField(f[n]),u.push(o),col.push(this.gridInstance.model.columns[o])}if("resizeStart"==t)return a={},a=this.gridInstance.model.showStackedHeader&&c.hasClass("e-stackedHeaderCell")?{columnIndex:u,column:col,target:c,oldWidth:l}:{columnIndex:h,column:this.gridInstance.model.columns[h],target:e(s),oldWidth:l},this.gridInstance._trigger("resizeStart",a);r.find(".e-headercell").not(".e-detailheadercell").filter(":visible");var _=i-this._orgX,v=l+_;return this.gridInstance._colgroupRefresh(),a={},a=this.gridInstance.model.showStackedHeader&&c.hasClass("e-stackedHeaderCell")?{columnIndex:u,column:col,target:e(s),oldWidth:l,newWidth:v,extra:_}:{columnIndex:h,column:this.gridInstance.model.columns[h],target:e(s),oldWidth:l,newWidth:v,extra:_},this.gridInstance._trigger("resizeEnd",a)},_mouseUp:function(e){if(this.gridInstance._resizeTimeOut&&(clearTimeout(this.gridInstance._resizeTimeOut),this.gridInstance._resizeTimeOut=0),this._expand){var i=e.clientX,s=e.clientY;if(-1!=navigator.userAgent.indexOf("WebKit")&&(i=e.pageX,s=e.pageY),this.gridInstance.model.allowResizing&&"col-resize"==this.gridInstance.getHeaderTable().find(".e-columnheader").css("cursor")&&this._triggerResizeEvents("resizeEnd",i))return void this.gridInstance.element.find(".e-reSizeColbg").remove();i+=document.documentElement.scrollLeft,this._reSize(i,s),!t.isNullOrUndefined(this._currntCe)&&this._currntCe>=0&&(this.gridInstance.model.columns[this._currntCe].width=this.gridInstance.columnsWidthCollection[this._currntCe])}},_getResizableCell:function(){var t,i,s;if(t=(e(this._target).hasClass("e-stackedHeaderCell")?this.gridInstance.getHeaderTable().find(".e-columnheader"):this.gridInstance.getHeaderTable().find(".e-columnheader").not(".e-stackedHeaderRow")).find(".e-headercell").not(".e-hide,.e-detailheadercell"),i=-1!=navigator.userAgent.indexOf("WebKit")?document.body.scrollLeft:document.documentElement.scrollLeft,!this.gridInstance.model.scrollSettings.frozenColumns||this._currentCell!=this.gridInstance.model.scrollSettings.frozenColumns-1)for(s=0;s<t.length;s++){if(point=t[s].getBoundingClientRect(),point.left+i+5>this._orgX&&e(t[s]).height()+point.top>=this._orgY)return void(this._currentCell=s-1);if(s==t.length-1||this.gridInstance.model.showStackedHeader&&e(this._target).get(0)===t[s])return void(this._currentCell=s)}},_moveVisual:function(e){var t=this.gridInstance.getHeaderContent().find("div").first()[0].getBoundingClientRect();t.left+document.documentElement.scrollLeft+t.width<e||e<t.left+document.documentElement.scrollLeft?this._$visualElement.remove():-1!=this._currentCell&&this._$visualElement.css({left:e,top:this._tableY})},_mouseDown:function(t){var i,s;return!this._allowStart||"col-resize"!=e(t.target).closest("tr").css("cursor")||(this._target=t.target,i=t.clientX,s=t.clientY,-1!=navigator.userAgent.indexOf("WebKit")&&(i=t.pageX,s=t.pageY-document.body.scrollTop),this.gridInstance.model.allowResizing&&"col-resize"==this.gridInstance.getHeaderTable().find(".e-columnheader").css("cursor")&&(e(t.target).is(".e-headercelldiv")&&(t.target=t.target.parentNode),this._target=t.target,this._triggerResizeEvents("resizeStart",i))?void 0:(i+=document.documentElement.scrollLeft,2!=t.button&&this._start(i,s),!1))},_columnResizeToFit:function(i){var s,l,n,o,a,r,d,h,c,u,m,p,g=this.gridInstance.getHeaderTable().find(".e-columnheader").filter(function(){return"col-resize"==e(this).css("cursor")});if(this.gridInstance.model.allowResizeToFit&&g.length){e(i.target).is(".e-headercelldiv")&&(i.target=i.target.parentNode);var f,_=e(i.target),v=0,b=0;if(f=_.hasClass("e-stackedHeaderCell")?this.gridInstance.getHeaderContent().find(".e-headercell").not(".e-detailheadercell"):this.gridInstance.getHeaderContent().find(".e-headercell").not(".e-stackedHeaderCell,.e-detailheadercell"),this._target=_,_.hasClass("e-headercell")){var C=i.target,w=e.inArray(C,f),y=w;this._orgX=i.pageX,this.gridInstance.model.enableRTL?this._currentCell=w:this._getResizableCell(),w!=this._currentCell&&(w=y=this._currentCell,C=i.target.previousSibling);var S=f.filter(":visible")[y],x=[],T=[],D=[];if(b=this.gridInstance.model.groupSettings.groupedColumns.length,t.isNullOrUndefined(this.gridInstance.model.detailsTemplate)&&t.isNullOrUndefined(this.gridInstance.model.childGrid)||(b+=1),e(C).parent("tr").hasClass("e-stackedHeaderRow")){for(currentSpan=e(S).attr("colspan"),tr=e(S).parent("tr"),tHeadIndex=S.cellIndex,tr.next();tHeadIndex>b;)tHeadIndex--,s=e(tr).children("th")[tHeadIndex],v+=parseInt(e(s).attr("colspan"));l=v+parseInt(currentSpan)}else v=y,l=y+1;var k=0,I=0,O=0,R=[],N=[];if(-1!=v)for(o={columnIndex:v+(n=f.slice(0,v+1).filter(".e-hide").length),column:this.gridInstance.model.columns[v+n],target:_,oldWidth:a},this.gridInstance._trigger("resizeStart",o),p=v;p<l;p++){if(n=f.slice(0,p+1).filter(".e-hide").length,O=this._getContentWidth(p+n),$cellDiv=this.gridInstance.getHeaderTable().find(".e-headercell:not(.e-hide, .e-stackedHeaderCell)").children(".e-headercelldiv").eq(p),I=this._getHeaderContentWidth($cellDiv),k=I>O?I:O,k+=parseInt($cellDiv.css("padding-left"),10),a=this.gridInstance.getHeaderTable().find("col").filter(this._diaplayFinder).eq(p+b).width(),k=a>k||this._colMinWidth<k?k:this._colMinWidth,r=this.gridInstance.getHeaderTable().find("col").filter(this._diaplayFinder),(this.gridInstance.model.detailsTemplate||this.gridInstance.model.childGrid)&&r.splice(0,1),r.eq(p+b).width(k),this.gridInstance.model.groupSettings.groupedColumns.length&&(d=this.gridInstance.getContentTable().find(".e-recordtable").find("colgroup"),h=this,e.each(d,function(t,i){e(i).find("col").filter(h._diaplayFinder).eq(p).width(k)})),c=this.gridInstance.getContentTable().find("col").filter(this._diaplayFinder),(this.gridInstance.model.detailsTemplate||this.gridInstance.model.childGrid)&&c.splice(0,1),c.eq(p+b).width(k),this.gridInstance.model.isEdit)for(this.gridInstance.getContentTable().find(".e-editedrow").find("col"),u=this.gridInstance.element.find(".gridform"),j=0;j<u.length;j++)e(u[j]).find("col").eq(p+b).width(k);R.push(this.gridInstance.model.columns[p+n]),N.push(Math.abs(k-a)),x.push(p+n),T.push(k),D.push(a),(this.gridInstance.model.scrollSettings.frozenColumns>0||this.gridInstance.model.groupSettings.groupedColumns.length&&this.gridInstance.model.isEdit)&&(m=p+n,this.gridInstance.columnsWidthCollection[m]=k,this.gridInstance.setWidthToColumns(),this.gridInstance.model.scrollSettings.frozenColumns<=m+1&&(this.gridInstance.getHeaderContent().find(".e-movableheader").css("margin-left",k),this.gridInstance.getContent().find(".e-movablecontent").css("margin-left",k)))}for(this.gridInstance._colgroupRefresh(),this.gridInstance._recalculateIndentWidth(),o={columnIndex:x,column:R,target:S,oldWidth:D,newWidth:T,extra:N},this.gridInstance._trigger("resizeEnd",o),p=0;p<x.length;p++)this.gridInstance.columnsWidthCollection[x[p]]=T[p],this.gridInstance.model.columns[x[p]].width=T[p];o={columnIndex:x,column:R,target:S,oldWidth:D,newWidth:T,extra:N},this.gridInstance._trigger("resized",o),this.gridInstance.model.summaryRows.length>0&&this.gridInstance._summaryColRrefresh(),this.gridInstance._findColumnsWidth()}}},_getContentWidth:function(i){var s,l,n=0,o=t.buildTag("span",{},{}),a=this.gridInstance;return t.isNullOrUndefined(a._gridRows)||(l=a._gridRows,this.gridInstance.model.scrollSettings.frozenColumns&&i>=this.gridInstance.model.scrollSettings.frozenColumns&&(l=l[1],i-=this.gridInstance.model.scrollSettings.frozenColumns),e.each(l,function(t,l){if(e(l).is(".e-row,.e-alt_row")&&!e(l).is(".e-editedrow")){var r=e(l).find("td.e-rowcell").eq(i),d=e(r).html();a.model.columns[i].commands?o.html(e(d).children()):r.hasClass("e-validError")?o.html(e(d).attr("value")):o.html(d),e(r).html(o),(s=r.find("span:first").width())>n&&(n=s),e(r).html(d)}})),a._refreshUnboundTemplate(this.gridInstance.getContentTable()),n},_getHeaderContentWidth:function(e){var i=0,s=t.buildTag("span",{},{}),l=e.html();return s.html(l),e.html(s),i=e.find("span:first").width(),(this.gridInstance.model.allowFiltering&&"menu"==this.gridInstance.model.filterSettings.filterType||"excel"==this.gridInstance.model.filterSettings.filterType)&&(i=i+e.parent().find(".e-filtericon").width()+10),e.html(l),i}}}(jQuery,Syncfusion)}),
/*!
*  filename: ej.pager.min.js
*  version : 14.4.0.15
*  Copyright Syncfusion Inc. 2001 - 2016. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
function(e){"function"==typeof define&&define.amd?define(["./../common/ej.core.min"],e):e()}(function(){!function(e,t,i){t.widget("ejPager","ej.Pager",{_rootCSS:"e-pager",validTags:["div"],defaults:{pageSize:12,pageCount:10,currentPage:1,enableExternalMessage:!1,externalMessage:"",enableQueryString:!1,locale:"en-US",masterObject:null,click:null,enableRTL:!1,totalRecordsCount:null,totalPages:null,customText:"",showPageInfo:!0},_init:function(){this._initPrivateProperties(),this.model.enableQueryString&&this._queryStringValue(),this.renderPager(),this._wireEvents()},_initPrivateProperties:function(){this._links=[],this._$prev=null,this._$first=null,this._$PP=null,this._$NP=null,this._lastNP=!1,this._lastpageCount=null,this._$last=null,this._$next=null,this._prevPageNo=null,this.localizedLabels=this._getLocalizedLabels()},_wireEvents:function(){this.model.click!=i&&this._on(this.element,"click",this._pagerClickHandler)},renderPager:function(){var e=t.buildTag("div.e-pagercontainer","",{},{unselectable:"on"});this._renderPagerContainer(e),this.element[0].appendChild(e[0]),this._pageInfo(),this.model.enableExternalMessage&&this._renderPagerMessage()},_queryStringValue:function(){var e=new RegExp("[\\?&]page=([^&#]*)").exec(window.location.href);this.model.currentPage=e?parseInt(e[1]||1):1},_renderPagerMessage:function(){var e=t.buildTag("div.e-pagermessage");this.model.externalMessage.toString().length?e.html(this.model.externalMessage):e.hide(),this.element.append(e)},_renderPagerContainer:function(e){this._renderBackwardButton(e),this._renderpreviousPager(e),this._renderNumericItem(e),this._renderForwardPager(e),this._renderForwardButton(e)},_renderMsgBar:function(){var e=t.buildTag("span.e-pagermsg",String.format(this.localizedLabels.pagerInfo,this.model.currentPage,this.model.totalPages||0,this.model.totalRecordsCount||0));this._parentMsgBar.appendChild(e[0]),this._parentMsgBar.style.textAlign=t.TextAlign.Right},_renderpreviousPager:function(e){this._$PP=t.buildTag("a.e-link e-nextprevitemdisabled e-disable e-spacing e-PP","...",{},{title:this.localizedLabels.previousPagerTooltip,role:"link"}),e.append(this._$PP)},_renderForwardPager:function(e){this._$NP=t.buildTag("a.e-link e-NP e-numericitem e-spacing e-default","...",{},{title:this.localizedLabels.nextPagerTooltip,role:"link"}),e.append(this._$NP)},_renderBackwardButton:function(e){this._$first=t.buildTag("div.e-firstpage e-icon e-mediaback  e-firstpagedisabled e-disable","",{},{unselectable:"on",title:this.localizedLabels.firstPageTooltip}),this._$prev=t.buildTag("div.e-prevpage e-icon e-arrowheadleft-2x  e-prevpagedisabled e-disable","",{},{unselectable:"on",title:this.localizedLabels.previousPageTooltip}),e.append(this._$first),e.append(this._$prev)},_renderNumericItem:function(e){var i=t.buildTag("div.e-numericcontainer e-default","",{},{unselectable:"on"});this._renderNumericLinks(i,this.model.pageCount),e.append(i)},_renderNumericLinks:function(e){var i,s;for(e.empty(),i=1;i<=this.model.pageCount;i++)s=t.buildTag("a.e-link",this.model.customText+i,{},{role:"link"}).addClass("e-numericitem e-spacing e-default").data("index",i),i==this.model.currentPage&&s.removeClass("e-default").addClass("e-currentitem e-active"),e.append(s);this._links=e.children()},_renderForwardButton:function(e){this._$next=t.buildTag("div.e-nextpage e-icon e-arrowheadright-2x  e-default","",{},{unselectable:"on",title:this.localizedLabels.nextPageTooltip}),this._$last=t.buildTag("div.e-lastpage e-icon e-mediaforward  e-default","",{},{unselectable:"on",title:this.localizedLabels.lastPageTooltip}),e.append(this._$next),e.append(this._$last)},_applyCss:function(){this.model.currentPage>1?(this._$prev.removeClass("e-prevpagedisabled").removeClass("e-disable").addClass("e-prevpage e-default"),this._$first.removeClass("e-firstpagedisabled").removeClass("e-disable").addClass("e-firstpage e-default")):(this._$prev.addClass("e-prevpagedisabled e-disable").removeClass("e-prevpage").removeClass("e-default"),this._$first.addClass("e-firstpagedisabled e-disable").removeClass("e-firstpage").removeClass("e-default")),this.model.currentPage>this.model.pageCount?this._$PP.removeClass("e-nextprevitemdisabled").removeClass("e-disable").addClass("e-numericitem e-default"):this._$PP.addClass("e-nextprevitemdisabled e-disable").removeClass("e-numericitem").removeClass("e-default"),this._lastNP=!!(this._links.length&&parseInt(this._links[0].innerHTML.replace(this.model.customText,""),10)+this.model.pageCount>this.model.totalPages),0==this._lastNP?this._$NP.removeClass("e-nextprevitemdisabled").removeClass("e-disable").addClass("e-numericitem e-default"):this._$NP.addClass("e-nextprevitemdisabled e-disable").removeClass("e-numericitem").removeClass("e-default"),this._lastpageCount=this.model.totalPages%this.model.pageCount,0==this._lastpageCount&&(this._lastpageCount=this.model.pageCount),this.model.currentPage>this.model.totalPages-this._LastpageCount&&(this._$PP.removeClass("e-nextprevitemdisabled").removeClass("e-disable").addClass("e-numericitem e-default"),this._$NP.addClass("e-nextprevitemdisabled e-disable").removeClass("e-numericitem").removeClass("e-default")),this.model.currentPage==this.model.totalPages||0==this.model.totalRecordsCount?(this._$last.addClass("e-lastpagedisabled e-disable").removeClass("e-lastpage").removeClass("e-default"),this._$next.addClass("e-nextpagedisabled e-disable").removeClass("e-nextpage").removeClass("e-default"),this._$NP.addClass("e-nextprevitemdisabled e-disable").removeClass("e-numericitem").removeClass("e-default")):(this._$last.addClass("e-lastpage e-default").removeClass("e-lastpagedisabled").removeClass("e-disable"),this._$next.addClass("e-nextpage e-default").removeClass("e-nextpagedisabled").removeClass("e-disable")),this._links.length&&(this._links.removeClass("e-currentitem").removeClass("e-active").addClass("e-default"),e(this._links[(this.model.currentPage-1)%this.model.pageCount]).removeClass("e-default").addClass("e-currentitem e-active"),e(this._links[(this._prevPageNo-1)%this.model.pageCount]).removeClass("e-default").addClass("e-numericitem")),this.model.pageSize>=this.model.totalRecordsCount/this.model.pageCount&&null!=this._$PP&&0!=this._$PP.length&&(this._$PP.addClass("e-nextprevitemdisabled e-disable").removeClass("e-numericitem").removeClass("e-default"),this._$NP.addClass("e-nextprevitemdisabled e-disable").removeClass("e-numericitem").removeClass("e-default"))},_SetTotalPages:function(){this.model.totalPages=this.model.totalRecordsCount%this.model.pageSize==0?this.model.totalRecordsCount/this.model.pageSize:parseInt(this.model.totalRecordsCount/this.model.pageSize,10)+1},_refreshNumericItem:function(){var t,i,s;if(0!=this._links.length&&null!=this._links)for(this.model.currentPage=1==this.model.totalPages?1:this.model.currentPage,this.model.currentPage>this.model.totalPages&&0!=this.model.totalPages&&(this.model.currentPage=this.model.totalPages),t=parseInt(this.model.currentPage/this.model.pageCount,10),this.model.currentPage%this.model.pageCount==0&&t>0&&(t-=1),this._links.css("display","none"),i=0;i<this.model.pageCount;i++)(s=t*this.model.pageCount+1+i)<=this.model.totalPages&&(this._links[i].style.display="",e(this._links[i]).data("index",s),e(this._links[i]).html(this.model.customText+s))},_refreshPagerInfo:function(){0==this.model.totalRecordsCount&&(this.model.currentPage=0),this.element.find(".e-pagermsg").text(String.format(this.localizedLabels.pagerInfo,this.model.currentPage,this.model.totalPages||0,this.model.totalRecordsCount||0))},_refreshExternalMessage:function(){this.model.externalMessage.toString().length?this.element.find(".e-pagermessage").empty().html(this.model.externalMessage).show():this.element.find(".e-pagermessage").hide()},refreshPager:function(){this._SetTotalPages(),this._refreshNumericItem(),this._refreshPagerInfo(),this._applyCss(),this.model.enableExternalMessage&&this._refreshExternalMessage(),this.model.enableRTL?this.element.addClass("e-rtl"):this.element.removeClass("e-rtl")},_kDownHandler:function(e){var t;if(t=e.keyCode?e.keyCode:e.which?e.which:e.charCode,e.target=null,this.model.masterObject.checkKey("firstPage",t,e))e.target=this._$first;else if(this.model.masterObject.checkKey("previousPager",t,e))e.target=this._$PP;else if(this.model.masterObject.checkKey("previousPage",t,e))e.target=this._$prev;else if(this.model.masterObject.checkKey("lastPage",t,e))e.target=this._$last;else if(this.model.masterObject.checkKey("nextPager",t,e))e.target=this._$NP;else{if(!this.model.masterObject.checkKey("nextPage",t,e))return!1;e.target=this._$next}this._pagerClickHandler(e)},_pageInfo:function(){this.model.showPageInfo&&!this._parentMsgBar?(this._parentMsgBar=document.createElement("div"),this._parentMsgBar.className+="e-parentmsgbar",this._renderMsgBar(),this.element[0].appendChild(this._parentMsgBar),this.element[0].className+=this.model.enableRTL?" e-pager e-rtl":" e-pager"):(this._parentMsgBar&&this._parentMsgBar.remove(),this._parentMsgbar=null)},_pagerClickHandler:function(t){this._prevPageNo=this.model.currentPage;var s=e(t.target);return-1!=e.inArray(t.target,this._links)?this.model.currentPage=parseInt(e(t.target).data("index"),10):s.hasClass("e-nextpage")&&1!=s.hasClass("e-nextpagedisabled")?this.model.currentPage%this.model.pageCount==0?(this.model.currentPage++,this._links!=i&&0!=this._links.length&&(this.model.currentPage=parseInt(e(this._links[0]).data("index"),10)+this.model.pageCount),parseInt(this._links[this.model.pageCount-1].innerHTML,10)+this.model.pageCount>=this.model.totalPages&&(this._lastNP=!0)):this.model.currentPage++:s.hasClass("e-prevpage")&&1!=s.hasClass("e-prevpagedisabled")?(this.model.currentPage%this.model.pageCount==1&&(this._lastNP=!1),this.model.currentPage--,this.model.currentPage<0&&(this.model.currentPage=0)):s.hasClass("e-lastpage")&&1!=s.hasClass("e-lastpagedisabled")?(this._LastpageCount=this.model.totalPages%this.model.pageCount,0==this._LastpageCount&&(this._LastpageCount=this.model.pageCount),this.model.currentPage=this.model.totalPages,this._lastNP=!0):s.hasClass("e-firstpage")&&1!=s.hasClass("e-firstpagedisabled")?(this.model.currentPage=1,this._lastNP=!1):s.hasClass("e-NP")&&1!=s.hasClass("e-nextprevitemdisabled")?(this._links!=i&&(this.model.currentPage=parseInt(e(this._links[0]).data("index"),10)+this.model.pageCount),parseInt(this._links[this.model.pageCount-1].innerHTML.replace(this.model.customText,""),10)+this.model.pageCount>=this.model.totalPages&&(this._lastNP=!0,this._LastpageCount=this.model.totalRecordsCount-this.model.pageSize<this.model.pageSize?this.model.totalRecordsCount-this.model.pageSize:this.model.totalRecordsCount/this.model.pageSize%this.model.pageCount,0==this._LastpageCount&&(this._LastpageCount=this.model.pageCount),this._links!=i&&(this.model.currentPage=parseInt(e(this._links[this.model.pageCount-1]).data("index"),10)+1))):s.hasClass("e-PP")&&1!=s.hasClass("e-nextprevitemdisabled")&&(this._links!=i&&(this.model.currentPage=parseInt(e(this._links[0]).data("index"),10)-this.model.pageCount),this._lastNP=!1),this.goToPage(this.model.currentPage,t),!1},goToPage:function(e,t){e!=this.model.currentPage&&(this._prevPageNo=this.model.currentPage),this._prevPageNo!==e&&e>=1&&e<=this.model.totalPages?(this.model.currentPage=e,this.model.enableQueryString&&this._updateQueryString(this.model.currentPage),this._trigger("click",{currentPage:e,event:t})):this._trigger("click",{currentPage:e,event:t})},_updateQueryString:function(e){var t=this._getUpdatedURL(window.location.href,"page",e);history.pushState?window.history.pushState({path:t},"",t):window.location.href=t},_getUpdatedURL:function(e,t,i){var s,l,n=new RegExp("([?|&])"+t+"=.*?(&|#|$)","i");return e.match(n)?e.replace(n,"$1"+t+"="+i+"$2"):(s="",l=-1!==e.indexOf("?")?"&":"?",-1!==e.indexOf("#")&&(s=e.replace(/.*#/,"#"),e=e.replace(/#.*/,"")),e+l+t+"="+i+s)},_getLocalizedLabels:function(){return t.getLocalizedConstants(this.sfType,this.model.locale)},_setFirst:!0,_setModel:function(e){for(var t in e)switch(t){case"pageCount":this._renderNumericLinks(this.element.find(".e-numericcontainer"));break;case"enableExternalMessage":this._renderPagerMessage();break;case"showPageInfo":this._pageInfo()}this.refreshPager()},_destroy:function(){this.element.empty().removeClass("e-pager")}}),t.Pager.Locale=t.Pager.Locale||{},t.Pager.Locale.default=t.Pager.Locale["en-US"]={pagerInfo:"{0} of {1} pages ({2} items)",firstPageTooltip:"Go to first page",lastPageTooltip:"Go to last page",nextPageTooltip:"Go to next page",previousPageTooltip:"Go to previous page",nextPagerTooltip:"Go to next pager",previousPagerTooltip:"Go to previous pager"}}(jQuery,Syncfusion)}),
/*!
*  filename: ej.waitingpopup.min.js
*  version : 14.4.0.15
*  Copyright Syncfusion Inc. 2001 - 2016. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
function(e){"function"==typeof define&&define.amd?define(["./../common/ej.core.min"],e):e()}(function(){var e,t;e=jQuery,(t=Syncfusion).widget("ejWaitingPopup","ej.WaitingPopup",{element:null,model:null,validTags:["div","span"],_setFirst:!1,_rootCSS:"e-waitingpopup",defaults:{showOnInit:!1,target:null,appendTo:null,showImage:!0,htmlAttributes:{},cssClass:"",text:null,template:null,create:null,destroy:null},dataTypes:{showOnInit:"boolean",showImage:"boolean",cssClass:"string"},_isTargetVisible:function(){return"none"!=this.element.css("display")},show:function(){this._isTargetVisible()&&(this._refreshPanel(),this.maindiv.css("display","block"),this.model.showOnInit=!0)},hide:function(){this.maindiv.css("display","none"),this.model.showOnInit=!1},refresh:function(){this._isTargetVisible()&&this._refreshPanel()},_setText:function(e){e?this.popupText?this.popupText.html(e):(this._generateTextTag(e),this._setContentPosition()):this.popupText&&(this.popupText.remove(),this.popupText=null)},_showImage:function(e){e?(this.popupImage=t.buildTag("span.e-image"),this.popupText?this.popupImage.insertBefore(this.popupText):this.maindiv.append(this.popupImage)):this.popupImage&&(this.popupImage.remove(),this.popupImage=null)},_setTemplate:function(){var i=this.model.template;"string"==typeof i&&(i=e(i)),this.templateObj="object"==typeof i&&"function"==typeof i.css?i:t.buildTag("div","",{"text-align":"center"}).append(i),this.templateObj.css({visibility:"visible",display:"block"}),this.maindiv.append(this.templateObj)},_setTheme:function(e){this.maindiv.removeClass(this.model.cssClass).addClass(e)},_init:function(){this._initialize(),this._render(),this._wireEvents()},_wireEvents:function(){e(window).on("resize",e.proxy(this._resizeHandler,this))},_unwireEvents:function(){e(window).off("resize",e.proxy(this._resizeHandler,this))},_resizeHandler:function(){this.refresh()},_setModel:function(i){for(var s in i)switch(s){case"text":this._setText(i[s]);break;case"cssClass":this._setTheme(i[s]);break;case"htmlAttributes ":this._addAttr(i[s]);break;case"showOnInit":this._setVisibility(i[s]);break;case"showImage":this._showImage(i[s]),this._setContentPosition();break;case"target":this.model.target=i[s],this._setTarget(),this.refresh();break;case"appendTo":this.model.appendTo=i[s],this._setTarget(),t.isNullOrUndefined(this.model.appendTo)||"document"==this.model.appendTo||"window"==this.model.appendTo?e("body").append(this.maindiv):this.maindiv.appendTo(e(this.model.appendTo)),this.refresh();break;case"template":this.maindiv.empty(),i[s]?(this.model.template=i[s],this._setTemplate()):(this.model.template=i[s]=null,this._showImage(this.model.showImage),this.model.text&&this._generateTextTag(this.model.text)),this._setContentPosition()}},_setTarget:function(){this.targetElement="document"==this.model.target?e(document):"window"==this.model.target?e(window):this.model.target?e(this.model.target):this.element},_destroy:function(){this.maindiv.remove(),this._unwireEvents()},_initialize:function(){this.maindiv=null,this.popupText=null,this.popupImage=null,this.templateObj=null,this.targetElement=null},_render:function(){this._setTarget();var i=e("#"+this.element[0].id+"_WaitingPopup").get(0);i&&e(i).remove(),this.maindiv=t.buildTag("div.e-waitpopup-pane e-widget "+this.model.cssClass+"#"+this.element[0].id+"_WaitingPopup"),this.model.template?this._setTemplate():(this._showImage(this.model.showImage),this.model.text&&this._generateTextTag(this.model.text)),t.isNullOrUndefined(this.model.appendTo)||"document"==this.model.appendTo||"window"==this.model.appendTo?e("body").append(this.maindiv):this.maindiv.appendTo(e(this.model.appendTo)),this._setVisibility(this.model.showOnInit),this._addAttr(this.model.htmlAttributes)},_refreshPanel:function(){this.maindiv.width(this.targetElement.outerWidth()),this.maindiv.height(this.targetElement.outerHeight()),this._setPanelPosition(),this._setContentPosition()},_addAttr:function(t){var i=this;e.map(t,function(e,t){"class"==t?i.maindiv.addClass(e):i.maindiv.attr(t,e)})},_setPanelPosition:function(){var i=t.util.getOffset(this.targetElement);null!=this.model.appendTo&&e(this.model.appendTo).length>0&&("relative"!=this.targetElement.css("position")&&"absolute"!=this.targetElement.css("position")||this.targetElement[0]!==e(this.model.appendTo)[0]?(i.left-=this.targetElement.offsetParent().offset().left,i.top-=this.targetElement.offsetParent().offset().top):i={left:0,top:0}),this.maindiv.css({position:"absolute",left:Math.ceil(i.left)+"px",top:Math.ceil(i.top)+"px","z-index":this._maxZindex()+1})},_setContentPosition:function(){if(null==this.model.template){var e,t=0,i=0,s=null;e=this.targetElement.outerHeight(),this.popupText&&(t=this.popupText.outerHeight()),this.popupImage&&(i=this.popupImage.outerHeight()),this.popupImage&&(s=Math.ceil((e-(i+t))/2),this.popupImage.css("top",s+"px")),this.popupText&&(s||(s=Math.ceil((e-t)/2)),this.popupText.css("top",s+"px"))}else this.templateObj.css({position:"relative",left:Math.ceil((this.targetElement.outerWidth()-this.templateObj.outerWidth())/2),top:Math.ceil((this.targetElement.outerHeight()-this.templateObj.outerHeight())/2)})},_generateTextTag:function(e){this.popupText=t.buildTag("div.e-text",e),this.maindiv.append(this.popupText)},_setVisibility:function(e){e&&this._isTargetVisible()?this.show():this.hide()},_maxZindex:function(){return t.util.getZindexPartial(this.element)}})}),
/*!
*  filename: ej.radiobutton.min.js
*  version : 14.4.0.15
*  Copyright Syncfusion Inc. 2001 - 2016. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
function(e){"function"==typeof define&&define.amd?define(["./../common/ej.core.min"],e):e()}(function(){var e,t;e=jQuery,(t=Syncfusion).widget("ejRadioButton","ej.RadioButton",{_rootCSS:"e-radiobtn",element:null,_requiresID:!0,model:null,validTags:["input"],_addToPersist:["checked"],_setFirst:!1,angular:{require:["?ngModel","^?form","^?ngModelOptions"]},defaults:{id:null,name:null,value:null,checked:!1,cssClass:"",text:"",enableRTL:!1,htmlAttributes:{},enablePersistence:!1,idPrefix:"ej",size:"small",enabled:!0,validationRules:null,validationMessage:null,beforeChange:null,change:null,create:null,destroy:null},dataTypes:{id:"string",name:"string",enablePersistence:"boolean",size:"enum",enabled:"boolean",idPrefix:"string",validationRules:"data",validationMessage:"data",htmlAttributes:"data"},observables:["checked"],checked:t.util.valueFunction("checked"),_init:function(){var e=t.browserInfo();this._cloneElement=this.element.clone(),this._isIE8="msie"==e.name&&"8.0"==e.version,this._setValue(),this._renderControl(),this.isChecked&&this._checkedHandler(),t.isNullOrUndefined(this.radbtn.attr("disabled"))||(this.model.enabled=!1),this._setEnabled(this.model.enabled),this._addAttr(this.model.htmlAttributes),null!=this.model.validationRules&&(this._initValidator(),this._setValidation()),this._wireEvents(),this.initialRender=!1},_addAttr:function(t){var i=this;e.map(t,function(e,t){"class"==t?i.div.addClass(e):"name"==t||"required"==t?i.radbtn.attr(t,e):"disabled"==t&&"disabled"==e?i.disable():"checked"==t&&"checked"==e?i._checkedChange(!0,!0):i.div.attr(t,e)})},_initValidator:function(){this.element.closest("form").data("validator")||this.element.closest("form").validate()},_setValidation:function(){var i,s,l,n;for(s in this.element.find("input").rules("add",this.model.validationRules),i=(i=this.element.closest("form").data("validator"))||this.element.closest("form").validate(),name=this.element.find("input").attr("name"),i.settings.messages[name]={},this.model.validationRules)if(l=null,!t.isNullOrUndefined(this.model.validationRules[s])){if(t.isNullOrUndefined(this.model.validationRules.messages&&this.model.validationRules.messages[s]))for(n in i.settings.messages[name][s]=e.validator.messages[s],this.model.validationMessage)s==n&&(l=this.model.validationMessage[s]);else l=this.model.validationRules.messages[s];i.settings.messages[name][s]=null!=l?l:e.validator.messages[s]}},_setModel:function(e){for(var t in e)switch(t){case"cssClass":this._changeSkin(e[t]);break;case"enableRTL":this.model.text?e[t]?this.textWrapDiv.addClass("e-rtl"):this.textWrapDiv.removeClass("e-rtl")&&this.element.closest(".e-radiobtn-wrap").hasClass("e-rtl")&&this.element.closest(".e-radiobtn-wrap").removeClass("e-rtl"):e[t]?this.element.closest(".e-radiobtn-wrap").addClass("e-rtl"):this.element.closest(".e-radiobtn-wrap").removeClass("e-rtl");break;case"text":this._setText(e[t]);break;case"size":this._setSize(e[t]);break;case"validationRules":null!=this.model.validationRules&&(this.element.find("input").rules("remove"),this.model.validationMessage=null),this.model.validationRules=e[t],null!=this.model.validationRules&&(this._initValidator(),this._setValidation());break;case"validationMessage":this.model.validationMessage=e[t],null!=this.model.validationRules&&null!=this.model.validationMessage&&(this._initValidator(),this._setValidation());break;case"checked":"boolean"==typeof this.checked()?(this.model.checked=e[t],this._checkedChange(this.model.checked)):null!=e[t]()&&e[t]()==this.element.find(".e-input").attr("value")&&this._checkedChange(e[t]());break;case"enabled":this._setEnabled(e[t]);break;case"id":this._setIdAttr(e[t]);break;case"name":this.radbtn.attr("name",e[t]);break;case"value":this.radbtn.attr("value",e[t]);break;case"htmlAttributes":this._addAttr(e[t])}},_destroy:function(){this.radbtn.remove(),this._cloneElement.removeClass("e-js e-input e-radiobtn"),this._cloneElement.insertBefore(this.element),this.element.remove()},_changeSkin:function(e){this.model.cssClass!=e&&(this.element.removeClass(this.model.cssClass).addClass(e),this.textWrapDiv.removeClass(this.model.cssClass).addClass(e))},_setValue:function(){t.isNullOrUndefined(this.element.attr("type"))&&this.element.attr("type","radio"),t.isNullOrUndefined(this.element.attr("id"))||(this.model.id=this.element.attr("id")),t.isNullOrUndefined(this.element.attr("name"))||(this.model.name=this.element.attr("name")),t.isNullOrUndefined(this.element.attr("value"))||(this.model.value=this.element.attr("value")),this.element.attr({id:this.model.id,name:this.model.name,value:this.model.value}),"boolean"==typeof this.checked()?this.model.checked=this.isChecked=this.model.checked||"checked"==this.element.attr("checked"):this.isChecked=this.element.attr("value")==this.checked(),this.isChecked&&this.element.attr("checked","checked"),this._hiddenValue=this.element.attr("value"),this._isAngularbind=!1},_setIdAttr:function(t){e("#"+this.model.idPrefix+this.model.id+"_wrapper").attr("id",this.model.idPrefix+t+"_wrapper"),e("#"+this.model.idPrefix+this.model.id).attr("id",this.model.idPrefix+t),this.radbtn.attr("id",t)},_setSize:function(e){e==t.RadioButtonSize.Medium?this.span.removeClass("e-radsmaller").addClass("e-radmedium"):this.span.removeClass("e-radmedium").addClass("e-radsmaller")},_setEnabled:function(e){e?this.enable():this.disable()},_renderControl:function(){this.initialRender=!0;var i=t.browserInfo();this.div="msie"==i.name&&"8.0"==i.version?e('<div class="e-radiobtn-wrap e-widget e-rad-outer" ></div>'):e('<div class="e-radiobtn-wrap e-widget" ></div>'),this.div.attr({id:this.model.idPrefix+this.model.id,role:"radio",tabindex:0,"aria-checked":!1}),this.span=e("<span></span>"),this.span.addClass("e-spanicon"),this._setSize(this.model.size),this.spanImg=e('<span class="e-rad-icon e-icon e-rad-select"></span>',"",{},{role:"presentation"}),this.element.addClass("e-input"),this.div.addClass(this.model.cssClass),this.span.append(this.spanImg),this.div.insertBefore(this.element),this.div.append(this.element),this.div.append(this.span),this._setTextWrapper(this.model.text),this.radbtn=this.element,this.element=this.div},_setTextWrapper:function(i){""!=i?(this.textWrapDiv=t.buildTag("div.e-radiobtn-wrap "+this.model.cssClass+"#"+this.model.idPrefix+this.model.id+"_wrapper"),this.div.wrapAll(this.textWrapDiv),this.txtSpan=t.buildTag("div.e-text",i),this.textWrapDiv=e("#"+this.model.idPrefix+this.model.id+"_wrapper"),this.textWrapDiv.append(this.txtSpan),this.model.enableRTL&&this.textWrapDiv.addClass("e-rtl")):this.model.enableRTL&&this.element.closest(".e-radiobtn-wrap").addClass("e-rtl")},_setText:function(e){""==this.model.text&&""!=e?this._setTextWrapper(e):this.txtSpan.html(e)},_wireEvents:function(){this._on(this.element,"click",this._checkedHandler),this._on(this.element,"focus",this._focusIn),this._on(this.element,"focusout",this._focusOut)},_focusIn:function(){e(this.element).addClass("e-focus"),e(this.element).on("keydown",e.proxy(this._checkUnCheck,this))},_focusOut:function(){e(this.element).removeClass("e-focus"),e(this.element).off("keydown",e.proxy(this._checkUnCheck,this))},_checkUnCheck:function(e){(32==e.keyCode||37==e.keyCode||38==e.keyCode||39==e.keyCode||40==e.keyCode)&&(e.preventDefault(),this._checkedHandler())},_checkedHandler:function(){this.element.hasClass("e-disable")||(this.isChecked="boolean"==typeof this.checked()?"checked"==this.radbtn.attr("checked"):this.checked()==this.radbtn.attr("value"),e(this.element).find(".e-rad-icon").hasClass("e-circle_01")||this._changeEvent(!0))},_checkedChange:function(e,t){this.isChecked=e,this._changeEvent(t)},_changeEvent:function(t){var i={isChecked:this.isChecked,isInteraction:!!t};if(!this.initialRender&&1==this._trigger("beforeChange",i))return!1;if(e(this.element).find(".e-rad-icon").hasClass("e-circle_01"))this.spanImg.removeClass("e-circle_01").addClass("e-rad-select"),this.span.removeClass("e-rad-active"),this.div.attr({tabindex:0,"aria-checked":!1}),this.radbtn.removeAttr("checked");else{var s=this.element.find(".e-input").attr("name"),l=e('input.e-radiobtn[name="'+s+'"]:radio'),n=this.element.find(".e-input"),o=e(n).data("ejRadioButton");i.isChecked&&(this.spanImg.addClass("e-circle_01").removeClass("e-rad-select"),this.span.addClass("e-rad-active"),this.div.attr({tabindex:0,"aria-checked":!0}),this.radbtn.attr("checked","checked")),e.each(l,function(t,i){e(i).closest(".e-radiobtn-wrap").find(".e-rad-icon").removeClass("e-circle_01").addClass("e-rad-select"),e(i).closest(".e-radiobtn-wrap").find(".e-spanicon").removeClass("e-rad-active"),e(i).closest(".e-radiobtn-wrap").attr({tabindex:0,"aria-checked":!1});var s=e(i).data("ejRadioButton");null!=s&&null!=s.checked()&&"boolean"==typeof s.checked()&&(s.model.checked=!1)}),null!=o&&null!=o.checked()&&"boolean"==typeof o.checked()?o.model.checked=!0:o.checked(o.radbtn.attr("value")),this.element.find(".e-rad-icon").addClass("e-circle_01").removeClass("e-rad-select"),this.span.addClass("e-rad-active"),this.div.attr({tabindex:0,"aria-checked":!0}),this._isAngularbind||this.element.find(".e-input").click(),this.isChecked=!0}i={isChecked:this.isChecked,isInteraction:!!t},this.initialRender||this._trigger("change",i),t&&this._trigger("_change",{value:this._hiddenValue})},disable:function(){this.element.hasClass("e-disable")||(this.element.addClass("e-disable"),this.radbtn.attr("disabled","disabled")),this._isIE8&&this.span.addClass("e-disable"),this.div.attr("aria-disabled",!0),this.model.enabled=!1},enable:function(){this.element.hasClass("e-disable")&&(this.element.removeClass("e-disable"),this.radbtn.prop("disabled",!1)),this._isIE8&&this.span.removeClass("e-disable"),this.div.attr("aria-disabled",!1),this.model.enabled=!0}}),t.RadioButtonSize={Small:"small",Medium:"medium"}}),
/*!
*  filename: ej.dropdownlist.min.js
*  version : 14.4.0.15
*  Copyright Syncfusion Inc. 2001 - 2016. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
function(e){"function"==typeof define&&define.amd?define(["./../common/ej.core.min","./../common/ej.globalize.min","./../common/ej.data.min","./../common/ej.scroller.min","./../common/ej.draggable.min"],e):e()}(function(){var t,i;t=jQuery,(i=Syncfusion).widget("ejDropDownList","ej.DropDownList",{element:null,model:null,validTags:["select","input"],_addToPersist:["value","text","selectedIndex","selectedItemIndex","selectedItems","selectedIndices","popupWidth","popupHeight","itemValue"],_setFirst:!1,_rootCSS:"e-dropdownlist",angular:{require:["?ngModel","^?form","^?ngModelOptions"]},_requiresID:!0,defaults:{cssClass:"",value:null,htmlAttributes:{},text:null,itemValue:"",itemsCount:0,dataSource:null,delimiterChar:",",query:null,fields:{id:null,text:null,value:null,category:null,groupBy:null,imageUrl:null,imageAttributes:null,spriteCssClass:null,htmlAttributes:null,selected:null,tableName:null},locale:"en-US",watermarkText:null,height:"",width:"",popupHeight:"152px",popupWidth:"auto",maxPopupHeight:null,minPopupHeight:"20",maxPopupWidth:null,minPopupWidth:"0",targetID:null,template:null,headerTemplate:null,selectedItemIndex:-1,selectedIndex:-1,disableItemsByIndex:null,enableItemsByIndex:null,selectedItems:[],selectedIndices:[],cascadeTo:null,enablePopupResize:!1,allowVirtualScrolling:!1,virtualScrollMode:"normal",showRoundedCorner:!1,showPopupOnLoad:!1,enableRTL:!1,enabled:!0,filterType:"contains",sortOrder:"ascending",caseSensitiveSearch:!1,showCheckbox:!1,checkAll:!1,uncheckAll:!1,enablePersistence:!1,enableFilterSearch:!1,enableIncrementalSearch:!0,readOnly:!1,enableAnimation:!1,multiSelectMode:"none",allowGrouping:!1,enableSorting:!1,validationRules:null,validationMessage:null,actionBegin:null,actionComplete:null,actionFailure:null,actionSuccess:null,create:null,popupHide:null,popupShown:null,beforePopupShown:null,beforePopupHide:null,popupResizeStart:null,popupResize:null,popupResizeStop:null,change:null,select:null,dataBound:null,search:null,checkChange:null,cascade:null,destroy:null},dataTypes:{cssClass:"string",itemsCount:"number",watermarkText:"string",template:"string",disableItemsByIndex:"string",enableItemsByIndex:"string",enableIncrementalSearch:"boolean",cascadeTo:"string",delimiterChar:"string",showRoundedCorner:"boolean",showPopupOnLoad:"boolean",enableRTL:"boolean",enablePersistence:"boolean",allowVirtualScrolling:"boolean",virtualScrollMode:"enum",enabled:"boolean",readOnly:"boolean",multiSelectMode:"enum",dataSource:"data",query:"data",fields:"data",selectedItems:"array",enableAnimation:"boolean",allowGrouping:"boolean",enableSorting:"boolean",validationRules:"data",validationMessage:"data",htmlAttributes:"data",locale:"string"},observables:["value","selectedItemIndex","selectedIndex"],value:i.util.valueFunction("value"),selectedItemIndex:i.util.valueFunction("selectedItemIndex"),selectedIndex:i.util.valueFunction("selectedIndex"),enable:function(){this._visibleInput.hasClass("e-disable")&&(this.target.disabled=!1,this.model.enabled=!0,this._visibleInput.removeClass("e-disable"),this.dropdownbutton.removeClass("e-disable"),this.popupListWrapper.removeClass("e-disable"),this._isIE8&&this.drpbtnspan.removeClass("e-disable"),this.container.on("mousedown",t.proxy(this._OnDropdownClick,this)),"visualmode"==this.model.multiSelectMode&&this._ulBox.removeClass("e-disable"),this.wrapper.attr("tabindex","0")),this._wireEvents()},disable:function(){this._visibleInput.hasClass("e-disable")||(this.target.disabled=!0,this.model.enabled=!1,this._visibleInput.addClass("e-disable"),this.popupListWrapper.addClass("e-disable"),this.dropdownbutton.addClass("e-disable"),this._isIE8&&this.drpbtnspan.addClass("e-disable"),"visualmode"==this.model.multiSelectMode&&this._ulBox.addClass("e-disable"),this.container.off("mousedown",t.proxy(this._OnDropdownClick,this)),this._unwireEvents(),this.wrapper.removeAttr("tabindex"),this._isPopupShown()&&this._hideResult())},getValue:function(){return this._visibleInput.val()},_setValue:function(e){i.isNullOrUndefined(e)||(this._raiseEvents=!1,i.isNullOrUndefined(this.model.text)||this.unselectItemByText(this.model.text),this._raiseEvents=!0,this.selectItemByValue(e))},_setText:function(e){e&&(this._raiseEvents=!1,this.unselectItemByText(this.model.text),this._raiseEvents=!0,this.selectItemByText(e))},_setItemValue:function(e){this.model.itemValue=e},_changeWatermark:function(e){if(!this.model.enabled)return!1;this._isWatermark?this._visibleInput.attr("placeholder",e):this._hiddenSpan.text(e)},hidePopup:function(){if(!this.model.enabled)return!1;this.ultag.find("li").length>0&&this._hideResult()},showPopup:function(){if(!this.model.enabled)return!1;this.ultag.find("li").length>0&&this._showResult()},clearText:function(){this._clearTextboxValue(),this._isWatermark||this._setWatermark()},addItem:function(e){var i,s,l,n,o,a;if(!this.model.enabled||!e||(this._mapFields(),(i=t.isArray(e)?e:[e]).length<1))return!1;for(s=this.mapFld,(l={_id:null,_imageUrl:null,_imageAttributes:null,_spriteCSS:null,_text:null,_value:null,_htmlAttributes:null,_selected:null,_category:null})._id=i[0][s._id]?s._id:"id",l._imageUrl=i[0][s._imageUrl]?s._imageUrl:"imageUrl",l._imageAttributes=i[0][s._imageAttributes]?s._imageAttributes:"imageAttributes",l._spriteCSS=i[0][s._spriteCSS]?s._spriteCSS:"spriteCssClass",l._text=i[0][s._text]?s._text:"text",l._value=i[0][s._value]?s._value:"value",l._htmlAttributes=i[0][s._htmlAttributes]?s._htmlAttributes:"htmlAttributes",l._selected=i[0][s._selected]?s._selected:"selected",l._category=i[0][s._category]?s._category:"groupBy",this._generateLi(i,l),n=this.dummyUl,o=0;o<i.length;o++)this._listItem(i[o],"add");this.model.showCheckbox?this._appendCheckbox(n,!0):this._isSingleSelect()||this._multiItemSelection(n,!0),this._virtualUl.append(t(this.dummyUl).clone(!0)),this.ultag.append(this.dummyUl),this._isPopupShown()&&(a=this.scrollerObj?this.scrollerObj.scrollTop():0,this._refreshScroller(),this.scrollerObj&&this.scrollerObj.option("scrollTop",a))},_toArray:function(e,s){var l;return"function"==typeof e&&(e=i.util.getVal(e)),t.isArray(e)?l=e:"string"==typeof e?s&&("visualmode"==this.model.multiSelectMode||"delimiter"==this.model.multiSelectMode||this.model.showCheckbox)?0==(l=e.split(this.model.delimiterChar)).length&&(l=[e]):(s||0==(l=e.split(this.model.delimiterChar)).length)&&(l=[e]):l=[e],l},_trim:function(e){return"string"==typeof e?t.trim(e):e},selectItemByIndex:function(e){this._selectItemByIndex(e)},selectItemsByIndices:function(e){this._selectItemByIndex(e)},_selectItemByIndex:function(e){var i,s,l,n;for(this.listitems=this._getLi(),this._selectedIndices=t.map(this._selectedIndices,function(e){return parseInt(e)}),this.model.selectedItems=this.model.selectedIndices=this._selectedIndices,i=this._toArray(e,!0),l=0;l<i.length;l++)if(null!=(s=parseInt(i[l]))&&s>=0){if(-1==t.inArray(s,this._selectedIndices))for(n=0;n<this.listitems.length;n++)t(this.listitems[n]).hasClass("e-disable")||n==s&&(this.selectedIndexValue=n,this._activeItem=s,this._enterTextBoxValue())}else this.model.showCheckbox||"none"!=this.model.multiSelectMode||this._clearTextboxValue()},unselectItemsByIndices:function(e){this._unselectItemByIndex(e)},unselectItemByIndex:function(e){this._unselectItemByIndex(e)},_unselectItemByIndex:function(e){var i,s,l,n;for(this._selectedIndices=t.map(this._selectedIndices,function(e){return parseInt(e)}),this.model.selectedItems=this.model.selectedIndices=this._selectedIndices,s=this._toArray(e,!0),this.listitems=this._getLi(),n=0;n<s.length;n++)for(l=parseInt(s[n]),i=0;i<this.listitems.length;i++)i==l&&(this.selectedIndexValue=i,this._activeItem=l,this._activeItem==this._aselectedItem&&(this._aselectedItem=null),this._removeTextBoxValue())},setSelectedValue:function(e){this.selectItemByValue(e)},selectItemByValue:function(e){var s,l,n,o;if(this.listitems=this._getLi(),i.isNullOrUndefined(e)||""===e)this._clearTextboxValue();else for(l=this._toArray(e,!0),n=0;n<l.length;n++)for(s=0;s<this.listitems.length;s++)if(!t(this.listitems[s]).hasClass("e-disable")&&(o=this._getAttributeValue(this.listitems[s])||t(this.listitems[s]).text())&&(this._selectedValue=o,this._selectedValue==l[n])){this._activeItem=s,this._aselectedItem=this._activeItem,this._enterTextBoxValue();break}},unselectItemByValue:function(e){var t,i,s=this._toArray(e,!0);for(this.listitems=this._getLi(),i=0;i<s.length;i++)for(t=0;t<this.listitems.length;t++)if(this._getAttributeValue(this.listitems[t])&&(this._selectedValue=this._getAttributeValue(this.listitems[t]),this._selectedValue==s[i])){this._activeItem=t,this._activeItem==this._aselectedItem&&(this._aselectedItem=null),this._removeTextBoxValue();break}},setSelectedText:function(e){this.selectItemByText(e)},selectItemByText:function(e){var s,l,n;if(this.listitems=this._getLi(),this._mapFields(),i.isNullOrUndefined(e)||""===e)this._clearTextboxValue();else for(l=this._toArray(e,!0),n=0;n<l.length;n++)for(s=0;s<this.listitems.length;s++)if(!t(this.listitems[s]).hasClass("e-disable")&&(this.selectedTextValue=this._isPlainType(this.popupListItems)?this.popupListItems[s]:this._getField(this.popupListItems[s],this.mapFld._text),this.selectedTextValue==l[n])){this._activeItem=s,this._aselectedItem=this._activeItem,this._enterTextBoxValue();break}},unselectItemByText:function(e){var t,i,s=this._toArray(e,!0);for(this.listitems=this._getLi(),this._mapFields(),i=0;i<s.length;i++)for(t=0;t<this.listitems.length;t++)if(this.unselectedTextValue=this._isPlainType(this.popupListItems)?this.popupListItems[t]:this._getField(this.popupListItems[t],this.mapFld._text),this.unselectedTextValue==s[i]){this._activeItem=t,this._activeItem==this._aselectedItem&&(this._aselectedItem=null),this._removeTextBoxValue();break}},getSelectedValue:function(){return this.element.val()},getSelectedItem:function(){var e,t=[];for(this.listitems=this._getLi(),e=0;e<this._selectedIndices.length;e++)t.push(this.listitems[this._selectedIndices[e]]);return t},getItemDataByValue:function(e){for(var t,i=this._toArray(e,!1),s=[],l=this.model.fields&&this.model.fields.value?this.model.fields.value:"value",n=0;n<i.length;n++)for(t=0;t<this._rawList.length;t++)this._rawList[t][l]==i[n]&&s.push(this._rawList[t]);return s},getListData:function(){return this._rawList},getSelectedItemsID:function(){return this._selectedItemsID},disableItemsByIndices:function(e){this._disableItemByIndex(e)},disableItemByIndex:function(e){this._disableItemByIndex(e)},_disableItemByIndex:function(e){var i,s;if(!this.model.enabled)return!1;for(i=this._toArray(e,!1),s=0;s<i.length;s++)null==i[s]||isNaN(parseInt(i[s]))||i.length>0&&!(t.inArray(parseInt(i[s]),this._disabledItems)>-1)&&(index=t.inArray(i[s],this._disabledItems),this._setClass(this._getLi()[parseInt(i[s])],"e-disable"),this._disabledItems.push(parseInt(i[s])),this.model.disableItemsByIndex=String(this._disabledItems.join(",")))},enableItemsByIndices:function(e){this._enableItemByIndex(e)},enableItemByIndex:function(e){this._enableItemByIndex(e)},_enableItemByIndex:function(e){var i,s,l=this._toArray(e,!1);for(this.model.enableItemsByIndex=e,s=0;s<l.length;s++)l.length>0&&t.inArray(parseInt(l[s]),this._disabledItems)>-1&&!isNaN(parseInt(l[s]))&&(i=t.inArray(parseInt(l[s]),this._disabledItems),this._removeClass(this._getLi()[parseInt(l[s])],"e-disable"),this._disabledItems.splice(i,1));this.model.enableItemsByIndex=null,this.model.disableItemsByIndex=this._disabledItems.join(this.model.delimiterChar)},_validateDelimiter:function(e){return 1!=this._trim(e).length||/^[a-zA-Z0-9]+$/.test(e)?",":e},_removeText:function(e){var i=this.element[0].value.split(this.model.delimiterChar),s=this._visibleInput[0].value.split(this.model.delimiterChar),l=t.inArray(e,i);l>=0&&(i.splice(l,1),s.splice(l,1)),this.element[0].value=i.join(this.model.delimiterChar),this._visibleInput[0].value=s.join(this.model.delimiterChar)},_addText:function(e){var t,i,s,l;if(this._checkContains(this._hiddenValue))return!1;for(t=["element","_visibleInput"],s=0;s<t.length;s++)i="element"==t[s]?this._hiddenValue:e,this[t[s]][0].value&&""!=this[t[s]][0].value?((l=this[t[s]][0].value.split(this.model.delimiterChar)).push(i),this[t[s]][0].value=l.join(this.model.delimiterChar)):this[t[s]][0].value=i},_checkContains:function(e){var t,i=this.element[0].value.split(this.model.delimiterChar);for(this.contains=!1,t=0;t<i.length;t++)if(i[t]===e){this.contains=!0;break}return this.contains},_updateLocalConstant:function(){this._localizedLabels=i.getLocalizedConstants("ej.DropDownList",this.model.locale)},_init:function(){var e=i.browserInfo();this._updateLocalConstant(),this._isIE8="msie"==e.name&&"8.0"==e.version,this._textContent=this._isIE8?"innerText":"textContent",(this.element.is("input")&&(this.element.is("input[type=text]")||!this.element.attr("type"))||this.element.is("select"))&&(this._isWatermark="placeholder"in document.createElement("input"),this._id=this.element[0].id,this._initialize(),this._render(),this._addAttr(this.model.htmlAttributes),this._enabled(this.model.enabled),this._initValue=!1,this._checkboxValue=!1,null!=this.model.validationRules&&(this._initValidator(),this._setValidation()))},_initValidator:function(){this.element.closest("form").data("validator")||this.element.closest("form").validate()},_setValidation:function(){var e,s,l,n,o;if(0!=this.element.closest("form").length)for(l in this.element.rules("add",this.model.validationRules),(e=this.element.closest("form").data("validator"))||(e=this.element.closest("form").validate()),s=this.element.attr("name"),e.settings.messages[s]={},this.model.validationRules)if(n=null,!i.isNullOrUndefined(this.model.validationRules[l])){if(i.isNullOrUndefined(this.model.validationRules.messages&&this.model.validationRules.messages[l]))for(o in e.settings.messages[s][l]=t.validator.messages[l],this.model.validationMessage)l==o&&(n=this.model.validationMessage[l]);else n=this.model.validationRules.messages[l];e.settings.messages[s][l]=null!=n?n:t.validator.messages[l]}},_setInitialPopup:function(e){this.model.enabled&&!this.model.readOnly&&(0==e?this._hideResult():this._showResult())},_changeSkin:function(e){this.wrapper.removeClass(this.model.cssClass).addClass(e),this.popupListWrapper.removeClass(this.model.cssClass).addClass(e)},_setRTL:function(e){this.model.enableRTL!=e&&(this.model.enableRTL=e,this._RightToLeft(),this._dropbtnRTL())},_changeHeight:function(e){this.wrapper.height(e),this._setListHeight()},_changeWidth:function(e){this.wrapper.width(e),this._setListWidth()},_setModel:function(e){var s,l,n,o,a;for(s in e)switch(s){case"dataSource":this._isEqualDataSource(e[s])||this._checkModelDataBinding(e[s],this.model.query);break;case"query":this._checkModelDataBinding(this.model.dataSource,e[s]);break;case"fields":this.model.fields=t.extend(this.model.fields,e[s]),this._checkModelDataBinding(this.model.dataSource,this.model.query);break;case"itemsCount":this.model.itemsCount=e[s],this._checkModelDataBinding(this.model.dataSource,this.model.query);break;case"template":this.model.template=e[s],this._checkModelDataBinding(this.model.dataSource,this.model.query);break;case"value":l=i.util.getVal(e[s]),i.isNullOrUndefined(l)||""===l?this._clearTextboxValue():(this._setValue(i.util.getVal(e[s])),e[s]=this.model.value);break;case"delimiterChar":n=this.model.delimiterChar,e[s]=this._validateDelimiter(e[s]),this.model.delimiterChar=e[s],this.model.text&&(this.model.text=this.model.text.split(n).join(this.model.delimiterChar),this._visibleInput.val(this.model.text)),this.model.value&&(this.model.value=this.model.value.split(n).join(this.model.delimiterChar),this.element.val(this.model.value));break;case"text":i.isNullOrUndefined(e[s])||""===e[s]?this._clearTextboxValue():(this._setText(e[s]),e[s]=this.model.text);break;case"itemValue":this._setItemValue(e[s]);break;case"enableRTL":this._setRTL(e[s]);break;case"enabled":this._enabled(e[s]);break;case"height":this._changeHeight(e[s]);break;case"width":this._changeWidth(e[s]);break;case"popupHeight":this.model.popupHeight=e[s],this._setListHeight(e[s]);break;case"popupWidth":this.model.popupWidth=e[s],this._setListWidth();break;case"minPopupHeight":this.model.minPopupHeight=e[s],this._setListHeight(e[s]);break;case"minPopupWidth":this.model.minPopupWidth=e[s],this._setListWidth();break;case"maxPopupHeight":this.model.maxPopupHeight=e[s],this._setListHeight(e[s]);break;case"maxPopupWidth":this.model.maxPopupWidth=e[s],this._setListWidth();break;case"cssClass":this._changeSkin(e[s]);break;case"showCheckbox":this.model.showCheckbox=e[s],o=this.model.text,a=this.model.text?this.model.text.split(this.model.delimiterChar):this.model.text,this._raiseEvents=!1,this._clearTextboxValue(),this._raiseEvents=!0,this._checkboxHideShow(e[s]),this.model.showCheckbox||"none"!=this.model.multiSelectMode?("visualmode"==this.model.multiSelectMode&&this._renderBoxModel(),this._setText(o)):a&&a.length&&this._setText(a[0]),this._isPopupShown()&&this._setListPosition();break;case"checkAll":return this._setCheckAll(e[s]),!1;case"uncheckAll":return this._setUncheckAll(e[s]),!1;case"watermarkText":this._changeWatermark(e[s]);break;case"validationRules":0!=this.element.closest("form").length&&(null!=this.model.validationRules&&(this.element.rules("remove"),this.model.validationMessage=null),this.model.validationRules=e[s],null!=this.model.validationRules&&(this._initValidator(),this._setValidation()));break;case"locale":this.model.locale=e[s],this._updateLocalConstant();break;case"validationMessage":0!=this.element.closest("form").length&&(this.model.validationMessage=e[s],null!=this.model.validationRules&&null!=this.model.validationMessage&&(this._initValidator(),this._setValidation()));break;case"showRoundedCorner":this._roundedCorner(e[s]),this.model.showRoundedCorner=e[s];break;case"showPopupOnLoad":this._setInitialPopup(e[s]);break;case"targetID":this.model.targetID=e[s],this._showFullList();break;case"selectedItemIndex":case"selectedIndex":this._selectItemByIndex(e[s]),this.model.selectedItemIndex=this.model.selectedIndex=e[s];break;case"unselectItemByIndex":this._unselectItemByIndex(e[s]);break;case"disableItemsByIndex":this._disableItemByIndex(e[s]);break;case"enableItemsByIndex":this._enableItemByIndex(e[s]);break;case"selectedItems":case"selectedIndices":this._selectCheckedItem(e[s]),e[s]=this.model.selectedItems=this.model.selectedIndices=this._selectedIndices;break;case"multiSelectMode":"visualmode"==this.model.multiSelectMode&&(this._swapUlandInput(!1),this._ulBox.remove(),this._ulBox=null),this.model.multiSelectMode=e[s],o=this.model.text,a=this.model.text?this.model.text.split(this.model.delimiterChar):this.model.text,this._raiseEvents=!1,this._clearTextboxValue(),this._raiseEvents=!0,this.model.showCheckbox||"none"!=this.model.multiSelectMode?("visualmode"==this.model.multiSelectMode&&this._renderBoxModel(),this._setText(o)):(this._setText(a[0]),this.wrapper.find("input[name="+this._name+"]").remove()),this._isPopupShown()&&this._setListPosition();break;case"allowGrouping":this._setGroupingAndSorting("allowGrouping",e[s]);break;case"enableSorting":this._setGroupingAndSorting("enableSorting",e[s]);break;case"htmlAttributes":this._addAttr(e[s]);break;case"enablePopupResize":this.model.enablePopupResize=e[s],e[s]?this._enablePopupResize():this.popupListWrapper.removeClass("e-resizable").find(".e-resizebar").remove()&&this._hideResult();break;case"enableFilterSearch":if(e[s]){this.model.enableFilterSearch=!0,this._enableSearch();break}this._removeSearch()}},_clearTextboxValue:function(){this.element.val(""),this._visibleInput.val(""),this._updateValue(""),this.selectedTextValue=this._selectedValue=this._hiddenValue="",this._updateText(),this.selectedIndexValue=this._hiddenDelimiterIndex=this._activeItem=-1,this._selectedItemsID=[],this._selectedIndices=[],this.model.selectedItems=[],this.model.selectedIndices=[],this.selectedIndex(null),this.ultag.children("li").removeClass("e-hover").removeClass("e-active"),this.model.showCheckbox&&this._resetCheck(),0!=this.wrapper.find("ul.e-ul.e-boxes").length&&(this._ulBox.children("li").remove(),""===this._name?this.wrapper.find("input:hidden[id^='#']").remove():this.wrapper.find("input:hidden[id^='#'][name="+this._name+"]").remove(),t(this.element).attr("name",this._name))},_destroy:function(){this._destroyDropdown(),this._visibleInput.removeClass("e-input "),this._setAttr(this.element[0],{accesskey:this.wrapper.attr("accesskey"),type:"text"}),this._isWatermark&&this._visibleInput.removeAttr("placeholder"),this.element[0].value="",this.model.dataSource||(this.selectOptions?this.docbdy&&this.docbdy.append(this.selectOptions.show()).show()&&this.element.remove()&&this.selectOptions&&this.selectOptions.removeClass("e-dropdownlist e-js"):this.docbdy&&this.ultag.find("li").removeClass("e-active")&&this.docbdy.append(this.ultag.html()).show()),this._hideResult(),this.popupPanelWrapper.remove(),this.element.removeAttr("aria-expanded aria-autocomplete aria-haspopup aria-owns accesskey role").css({width:"",display:"block"}),this._unwireEvents()},_finalize:function(){this.model.text!=this._visibleInput.val()&&this._setText(this.model.text),""==this.value()&&""!==this._visibleInput[0].value&&this._updateValue(this.element[0].value),this.value()!==this.element.val()&&this._setValue(this.value()),this.selectedIndex(-1!=this.selectedIndex()?this.selectedIndex():this.selectedItemIndex()),-1!=this.selectedIndex()?this._selectItemByIndex(this.selectedIndex()):this._selectedIndices.length>0&&this._selectCheckedItem(this._selectedIndices),null!=this.model.disableItemsByIndex&&this._disableItemByIndex(this.model.disableItemsByIndex),null!=this.model.enableItemsByIndex&&this._enableItemByIndex(this.model.enableItemsByIndex)},_initialize:function(){this._selectedIndices=this.model.selectedIndices.length>0?this.model.selectedIndices:this.model.selectedItems,this.model.selectedItems=this.model.selectedIndices=this._selectedIndices,this.model.selectedIndex=-1!=this.model.selectedIndex?this.model.selectedIndex:this.model.selectedItemIndex,this.element.is("select")&&(this.selectelement=!0,this._renderSelectToDropdown()),this._selectedItemsID=[],this.target=this.element[0],this._disabledItems=[],this._queryString=null,this.suggLen=0,this._itemId=null,this.checkedStatus=!1,this._incqueryString="",this._activeItem=null,this.ddWidth=0,this._initValue=!0,this._virtualCount=0,this._raiseEvents=!0},_renderSelectToDropdown:function(){var e,s,l,n;if(this.inputElement=i.buildTag("input.e-dropdownlist#"+this._id+"_input","",{},{type:"text","data-role":"none"}),this.inputElement.insertAfter(this.element),this.element.attr("name")&&(this.inputElement.attr("name",this.element.attr("name")),this.element.removeAttr("name")),this.selectOptions=this.element,this.selectOptions.attr("id",this._id),null==this.model.dataSource){for(this.optionDiv=i.buildTag("div#"+this._id+"_list"),this.optionDiv.insertAfter(this.inputElement),this.optionUl=i.buildTag("ul"),this.optionDiv.append(this.optionUl),this.selectOptionItems=this.element.children("option"),s=this.selectOptionItems.length,this.optionDummyUl=t(),e=0;e<s;e++)n=this.selectOptionItems[e],null!=(l=t(n).attr("label")?t(n).attr("label"):n.innerHTML)&&(this.optionLi=i.buildTag("li",l,{},{"data-value":n.value,unselectable:"on"}),this.optionDummyUl.push(this.optionLi[0]),t(n).attr("selected")&&this.model.showCheckbox&&(-1==t.inArray(e,this._selectedIndices)?(this._selectedIndices.push(e),this.model.selectedItems=this.model.selectedIndices=this._selectedIndices):i.isNullOrUndefined(this.selectedIndex())&&this.selectedIndex(e)));this.optionUl.append(this.optionDummyUl)}this.element.css("display","none"),this.element=this.inputElement},_render:function(){var e;this._renderDropdown(),this._setWatermark(),this._renderPopupPanelWrapper(),this._showFullList(),this._roundedCorner(this.model.showRoundedCorner),e=this.model.dataSource,i.DataManager&&e instanceof i.DataManager?e.dataSource.offline&&e.dataSource.json&&e.dataSource.json.length>0&&this._finalize():this._finalize(),i.DataManager&&this.model.dataSource instanceof i.DataManager||this._finalize(),this._setCheckAll(this.model.checkAll)},_isEqualDataSource:function(e){var t,i,s;if(!this.model.dataSource||!e||this.model.dataSource.length!==e.length)return!1;for(t=!0,i=0,s=this.model.dataSource.length;i<s;i++)if(this.model.dataSource[i]!==e[i]){t=!1;break}return t},_checkModelDataBinding:function(e,t){this.element.val(""),this._visibleInput.val(""),this._updateValue(""),this.selectedTextValue=this._selectedValue=this._hiddenValue="",this._updateText(),this.selectedIndexValue=this._hiddenDelimiterIndex=this._activeItem=-1,this._selectedItemsID=[],this.model.selectedItems=this.model.selectedIndices=this._selectedIndices=[],this.model.selectedIndex=this.model.selectedItemIndex=-1,"visualmode"==this.model.multiSelectMode&&this._destroyBoxModel(),this.model.dataSource=e,this.model.query=t,this.ultag.empty(),this._showFullList()},_initDataSource:function(e){var t=this;i.DataManager&&e instanceof i.DataManager&&(t._addLoadingClass(),t._trigger("actionBegin",{requestFrom:"default"})||e.executeQuery(this._getQuery()).done(function(e){t._trigger("actionSuccess",{e:e,requestFrom:"default"}),t._totalCount=e.count,t._listItem(e.result),t._removeLoadingClass(),t._renderPopupList(),t._finalize()}).fail(function(e){t.model.dataSource=null,t._addLoadingClass(),t._trigger("actionFailure",{e:e,requestFrom:"default"})}).always(function(e){t._trigger("actionComplete",{e:e,requestFrom:"default"})}))},_listItem:function(e,i){"add"==i?(this.popupListItems.push(e),this._rawList.push(e)):t.isArray(e)&&(this.popupListItems=e.slice(0),this._rawList=e.slice(0))},_getQuery:function(e){var t,s,l,n=this.model.fields,o=i.Query();if(!i.isNullOrUndefined(this.model.query)||this.model.template||e)this.model.query&&(o=this.model.query.clone());else{for(l in s=[],n)"tableName"!==l&&n[l]&&s.push(n[l]);s.length>0&&o.select(s)}return this.model.allowVirtualScrolling&&o.requiresCount(),this.model.itemsCount>0&&o.take(this.model.itemsCount),t=this.model.dataSource.dataSource,n&&(t&&t.url&&!t.url.match(n.tableName+"$")||t&&!t.url||!t)&&(i.isNullOrUndefined(n.tableName)||o.from(n.tableName)),o},_addLoadingClass:function(){this._isPopupShown()?this.popupListWrapper.addClass("e-load"):(this.dropdownbutton.addClass("e-load"),this.drpbtnspan.removeClass("e-icon e-arrow-sans-down")),this._readOnly=!0},_removeLoadingClass:function(){this.dropdownbutton.removeClass("e-load"),this.drpbtnspan.addClass("e-icon e-arrow-sans-down"),this._readOnly=!1,this.popupListWrapper.removeClass("e-load")},_renderDropdown:function(){if(this.wrapper=i.buildTag("span.e-ddl e-widget "+this.model.cssClass+"#"+this._id+"_wrapper","",{},{tabindex:"0",accesskey:this.element.attr("accesskey")}),this.container=i.buildTag("span.e-in-wrap e-box #"+this._id+"_container"),this.element.removeAttr("accesskey"),null==this.model.value&&null!=this.element.attr("value")&&(this.model.value=this.element.attr("value")),this.element.attr("value","").val(""),this._setAttr(this.element[0],{type:"hidden",role:"combobox","aria-expanded":!1,"aria-autocomplete":"list","aria-haspopup":!0,"aria-owns":this._id+"_popup"}).element.hide(),this.drpbtnspan=i.buildTag("span.e-icon e-arrow-sans-down","",{},{"aria-label":"select",unselectable:"on"}),this.dropdownbutton=i.buildTag("span.e-select#"+this._id+"_dropdown","",{},{role:"button",unselectable:"on"}).append(this.drpbtnspan),this.container.insertAfter(this.element),this.container.append(this.element),this.container.append(this.dropdownbutton),this.wrapper.insertBefore(this.container),this.wrapper.append(this.container),this.selectelement&&this.selectOptions.insertBefore(this.element),this._visibleInput=i.buildTag("input#"+this._id+"_hidden","",{}).insertAfter(this.element),this._visibleInput.addClass("e-input "),this._setAttr(this._visibleInput[0],{readonly:!0,tabindex:-1,"data-role":"none"}),!this._isWatermark){var e=null!=this.model.watermarkText?this.model.watermarkText:this._localizedLabels.watermarkText;this._hiddenSpan=i.buildTag("span.e-input e-placeholder ").insertAfter(this.element),this._hiddenSpan.text(e),this._hiddenSpan.css("display","none"),this._hiddenSpan.on("mousedown",t.proxy(this._OnDropdownClick,this))}this._checkNameAttr(),this._setDimentions(),this._RightToLeft(),this.ddWidth=this.dropdownbutton.outerWidth()>0?this.dropdownbutton.outerWidth():24,this.container.on("mousedown",t.proxy(this._OnDropdownClick,this))},_checkNameAttr:function(){this._name=i.isNullOrUndefined(this.element.attr("name"))?this._id:this.element.attr("name"),this.element.attr("name",this._name)},_addAttr:function(e){var s=this;t.map(e,function(e,l){var n=l.toLowerCase();"class"==n?s.wrapper.addClass(e):"disabled"==n&&"disabled"==e?s.disable():"readOnly"==n&&"readOnly"==e?s.model.readOnly=!0:"style"==n?s.wrapper.attr(l,e):i.isValidAttr(s._visibleInput[0],l)?t(s._visibleInput).attr(l,e):s.wrapper.attr(l,e)})},_renderBoxModel:function(){if("visualmode"!=this.model.multiSelectMode)return!1;this._ulBox=i.buildTag("ul.e-ul e-boxes"),this.container.prepend(this._ulBox),this._ulBox.css("min-height","30px"),this._ulBox.css("display","none"),this._on(this.container,"click",function(e){if(!this.model.enabled)return!1;var i=t(e.target);i.hasClass("e-options")&&(!e.ctrlKey&&i.siblings().hasClass("e-active")&&this._removeActive(),i.hasClass("e-active")?i.removeClass("e-active"):i.addClass("e-active")),!e.ctrlKey&&i.hasClass("e-boxes")&&this._removeActive()})},_renderPopupPanelWrapper:function(){var e=t("#"+this.element[0].id+"_popup_wrapper").get(0);e&&t(e).remove(),this.popupPanelWrapper=i.buildTag("div#"+this._id+"_popup_wrapper"),t("body").append(this.popupPanelWrapper),this.popupListWrapper=i.buildTag("div.e-ddl-popup e-box e-widget  e-popup#"+this._id+"_popup_list_wrapper","",{display:"none",overflow:"hidden"}),this.popupList=i.buildTag("div#"+this._id+"_popup",{tabIndex:0}),this.popupListWrapper.addClass(this.model.cssClass),this.popup=this.popupList,this.popupScroller=i.buildTag("div"),this.ultag=i.buildTag("ul.e-ul","",{},{role:"listbox"}),this.popupScroller.append(this.ultag),this.popupList.append(this.popupScroller),this.model.headerTemplate&&(this.headerTemplate=t("<div>").append(this.model.headerTemplate),this.popupListWrapper.append(this.headerTemplate)),this.popupListWrapper.append(this.popupList),this.popupPanelWrapper.append(this.popupListWrapper),this.ultag.on({mouseenter:t.proxy(this._OnMouseEnter,this),mouseleave:t.proxy(this._OnMouseLeave,this),click:t.proxy(this._OnMouseClick,this)},"li:not('.e-category')"),i.isTouchDevice()&&this.ultag.on({tap:t.proxy(this._OnMouseEnter,this)},"li:not('.e-category')"),t(window).on("resize",t.proxy(this._OnWindowResize,this))},_updateText:function(){this.model.text=""==this._visibleInput.val()?null:this._visibleInput.val()},_updateValue:function(e){this.value(""==e?null:e)},_setGroupingAndSorting:function(e,t){var i,s,l;if(this.model[e]=t,i=this.model.text,this._updateValue(""),this._selectedIndices=[],this.ultag.empty(),this._showFullList(),this.model.showCheckbox&&i)for(s=i.split(this.model.delimiterChar),l=0;l<s.length;l++)this.selectItemByText(s[l]);else this.selectItemByText(i)},_setSortingList:function(){var e,i,s=document.createElement("ul");if(t(s).append(this.itemsContainer.children()),this.model.allowGrouping||t(s).find(">.e-category").length>0)for(this.popupListWrapper.addClass("e-atc-popup"),e=0;e<t(s).find(">.e-category").length;e++)i=t(s).find(">.e-category").eq(0).first().nextUntil(".e-category").get(),this._setSortList(s,i);else t(s).children(">.e-category").remove(),i=t(s).children("li").get(),this._setSortList(s,i);this.itemsContainer=t(s)},_setSortList:function(e,i){i.sort(function(e,i){var s=t(e).text().toUpperCase(),l=t(i).text().toUpperCase();return s<l?-1:s>l?1:0}),"descending"==this.model.sortOrder&&i.reverse(),(this.model.allowGrouping||t(e).find(">.e-category").length>0)&&(t(e).append(t("<li>").text(t(e).find(">.e-category").eq(0).text()).addClass("e-category")),t(e).find(">.e-category").eq(0).remove()),t.each(i,function(i,s){t(e).append(s)})},_renderPopupList:function(){this._doDataBind(),this._renderRemaining()},_renderRemaining:function(){var e=this;this._dropbtnRTL(),this.model.enableFilterSearch&&this._enableSearch(),this.model.enablePopupResize&&this._enablePopupResize(),this.model.allowVirtualScrolling&&"normal"==this.model.virtualScrollMode&&this._totalCount&&this._totalCount>0&&(this._totalHeight=29*this._totalCount,this._totalPages=this._totalCount/(29*this.model.itemsCount),this._loadedItemHeight=29*this._getLi().length,this._getLi().attr("page",0),this._virtualPages=[0],this.ultag.append(t("<span>").addClass("e-virtual").css({height:this._totalHeight-this._loadedItemHeight,display:"block"}))),this._virtualUl=this.ultag.clone(!0),this._setListWidth(),this._setListHeight(),this._setListPosition(),this.popupScroller.css({height:"",width:""}),this.popupList.ejScroller({height:this._getPopupHeight(),width:0,scrollerSize:20,scroll:function(t){e.model.allowVirtualScrolling&&e._onScroll(t)}}),this.scrollerObj=this.popupList.ejScroller("instance"),this.popupList.find("div.e-scrollbar div").attr("unselectable","on"),this.popupListWrapper.css({display:"none",visibility:"visible"}),this._isSingleSelect()||(this.model.showCheckbox?this._checkboxHideShow(this.model.showCheckbox):this._multiItemSelection(this._getLi())),this._setUncheckAll(this.model.uncheckAll),this._changeSkin(this.model.cssClass),this.model.showPopupOnLoad&&this._showResult()},_enableSearch:function(){this.model.enableFilterSearch&&(this.inputSearch||(this.inputSearch=i.buildTag("input#"+this._id+"_inputSearch.e-input","",{},{type:"text","data-role":"none"}),this.popupListWrapper.prepend(t("<span>").addClass("e-atc e-search").append(t("<span>").addClass("e-in-wrap ").append(this.inputSearch).append(t("<span>").addClass(" e-icon e-search")))),this._on(this.inputSearch,"keyup",this._OnSearchEnter)))},_removeSearch:function(){this.model.enableFilterSearch=!1,this.popupListWrapper.find(".e-atc.e-search").remove(),this._isPopupShown()&&this.hidePopup(),this.inputSearch=null},_OnSearchEnter:function(e){var s,l,n="mozilla"==i.browserInfo().name?e.charCode:e.keyCode;-1!=t.inArray(n,[38,40,13])&&this.ultag.find("li.e-nosuggestion").length<=0?13==n?this._OnKeyUp(e):this._OnKeyDown(e):(this._activeItem=-1,this._queryString=this.inputSearch.val(),""==this._queryString&&this._virtualUl?(l={searchString:this._queryString,searchQuery:null,items:this._rawList},this._trigger("search",l),this._resetList(),this._updateSelectedIndexByValue(this.value()),this._refreshScroller(),this._setListPosition()):(this._mapFields(),s=this._addSearchQuery(i.Query(),!this._isPlainType(this._rawList)),l={searchString:this._queryString,items:this._rawList,searchQuery:s},this.popupListWrapper.find(".e-atc.e-search .e-search").addClass("e-cross-circle").removeClass("e-search"),this._on(this.popupListWrapper.find(".e-atc.e-search .e-cross-circle"),"mousedown",this._refreshSearch),this._trigger("search",l)||this._filterSearch(s,l)))},_refreshSearch:function(){this._resetSearch(),this._refreshPopup()},_filterSearch:function(e,t){var s=!1,l=t.result?t.result:i.DataManager(this._rawList).executeLocal(e);0==l.length&&(s=!0,l.push(this._getLocalizedLabels("emptyResultText"))),this.popupListItems=l,this.ultag.empty(),this._isPlainType(this.popupListItems)?this._plainArrayTypeBinding(l):this._objectArrayTypeBinding(l,"search"),s&&1==this.ultag.find("li").length&&this.ultag.find("li").eq(0).addClass("e-nosuggestion"),this.model.showCheckbox&&!s&&this._appendCheckbox(this._getLi()),this._onSearch=!0,this._setValue(this.value()),this._onSearch=!1,this._updateSelectedIndexByValue(this.value()),this._refreshScroller(),this._setListPosition()},_updateSelectedIndexByValue:function(e){var t,i,s;if(e&&this.model.enableFilterSearch){for(this._selectedIndices=this.model.selectedItems=this.model.selectedIndices=[],this._virtualList=this._virtualUl.children("li:not('.e-category')"),t=this._toArray(e),i=0;i<t.length;i++)for(s=0;s<this._virtualList.length;s++)if(t[i]==this._getIndexedValue(this._virtualList[s])){this._selectedIndices.push(s);break}this.model.selectedItems=this.model.selectedIndices=this._selectedIndices}},_getIndexedValue:function(e){return this._getAttributeValue(e)?this._getAttributeValue(e):e.innerText},_resetSearch:function(){this.inputSearch&&this.model&&this.model.enableFilterSearch&&""!=this.inputSearch.val()&&this._virtualUl&&(this.inputSearch.val(""),this._resetList())},_resetList:function(){1==this.popupListWrapper.find(".e-atc.e-search .e-cross-circle").length&&(this.popupListWrapper.find(".e-atc.e-search .e-cross-circle").addClass("e-search").removeClass("e-cross-circle"),this._off(this.popupListWrapper.find(".e-atc.e-search .e-cross-circle"),"mousedown",this._refreshSearch)),this._listItem(this._rawList),this.ultag.empty().append(this._virtualUl.children().clone(!0)),this._onSearch=!0,this._setValue(this.value()),this._onSearch=!1},_addSearchQuery:function(e,t){var i,s="";return t&&(s=(i=this.model.fields)&&i.text?i.text:"text"),this._queryString&&e.where(s,this.model.filterType,this._queryString,!this.model.caseSensitiveSearch),this.model.itemsCount>0&&e.take(this.model.itemsCount),e},_targetElementBinding:function(){var e,i,s,l,n,o=this.element.parents().last();if(this.docbdy=this.model.targetID?o.find("#"+this.model.targetID):this.optionDiv?this.optionDiv:null,!this.docbdy)return!1;if(this.itemsContainer="UL"==this.docbdy[0].nodeName?this.docbdy:this.docbdy.children("ol,ul"),(this.model.allowGrouping||this.itemsContainer.find(">.e-category").length>0)&&!this.model.enableSorting)for(this.popupListWrapper.addClass("e-atc-popup"),e=0;e<this.itemsContainer.find(">.e-category").length;e++)(i=this.itemsContainer.find(">.e-category").eq(e)).replaceWith(t("<li>").text(i.text()).addClass("e-category"));else this.model.enableSorting&&this._setSortingList();for(this.itemsContainer.children("ol,ul").remove(),this.items=this.itemsContainer.children("li"),this.items.children("img,div").addClass("e-align"),this._listItem([]),s=0;s<this.items.length;s++)l=t(this.items[s]).text(),n=this._getAttributeValue(this.items[s]),t(this.items[s]).attr("data-value")||t(this.items[s]).attr("data-value",n||l),this._listItem({text:l,value:n||l},"add");this.ultag.empty().append(this.itemsContainer.children()),this.ultag.children("li").attr("role","option").attr("unselectable","on"),this.docbdy.css({display:"none"}).children("ol,ul").remove()},_plainArrayTypeBinding:function(e){var s,l;if(this.dummyUl=t(),this.model.enableSorting&&(e.sort(),"descending"==this.model.sortOrder&&e.reverse()),e.length>0){for(s=0;s<e.length;s++)i.isNullOrUndefined(e[s])||(l=i.buildTag("li",e[s],{},{"data-value":e[s],unselectable:"on"}),this.dummyUl.push(l[0]));this.ultag.append(this.dummyUl),this._trigger("dataBound",{data:e})}},_mapFields:function(){this.model.fields.groupBy=this.model.fields.groupBy?this.model.fields.groupBy:this.model.fields.category;var e=this.model.fields;this.mapFld={_id:null,_imageUrl:null,_imageAttributes:null,_spriteCSS:null,_text:null,_value:null,_htmlAttributes:null,_selected:null},this.mapFld._id=e&&e.id?e.id:"id",this.mapFld._imageUrl=e&&e.imageUrl?e.imageUrl:"imageUrl",this.mapFld._imageAttributes=e&&e.imageAttributes?e.imageAttributes:"imageAttributes",this.mapFld._spriteCSS=e&&e.spriteCssClass?e.spriteCssClass:"spriteCssClass",this.mapFld._text=e&&e.text?e.text:"text",this.mapFld._value=e&&e.value?e.value:"value",this.mapFld._htmlAttributes=e&&e.htmlAttributes?e.htmlAttributes:"htmlAttributes",this.mapFld._selected=e&&e.selected?e.selected:"selected",this.mapFld._category=e&&e.groupBy?e.groupBy:"groupBy"},_doDataBind:function(){var e=this.model.dataSource,t=this.popupListItems;!e||!t||!t.length||t.length<1?this._targetElementBinding():this._isPlainType(t)?this._plainArrayTypeBinding(t):this._objectArrayTypeBinding(t)},_isPlainType:function(e){return"object"!=typeof e[0]},_objectArrayTypeBinding:function(e,s){var l,n,o,a,r,d;if(this.dummyUl=t(),this._mapFields(),this.model.enableSorting&&(l=i.Query().sortBy(this.mapFld._text,this.model.sortOrder,!0),e=i.DataManager(e).executeLocal(l),this.popupListItems=e),this.model.allowGrouping||this.model.fields.groupBy)for(this.popupListWrapper.addClass("e-atc-popup"),n=this.mapFld._category,a=i.Query().group(n),this.model.enableSorting||a.queries.splice(0,1),o=i.DataManager(e).executeLocal(a),this._swapUnCategorized(o),"search"==s?this.popupListItems=[]:this._listItem([]),r=0;r<o.length;r++)for(o[r].key&&this.ultag.append(i.buildTag("li.e-category",o[r].key).attr("role","option")[0]),this._generateLi(o[r].items,this.mapFld),this.ultag.append(this.dummyUl),d=0;d<o[r].items.length;d++)"search"==s?this.popupListItems.push(o[r].items[d]):this._listItem(o[r].items[d],"add");else this._generateLi(e,this.mapFld),this.ultag.append(this.dummyUl);this._trigger("dataBound",{data:e})},_onScroll:function(e){var s,l,n,o;e.scrollTop&&(s=e.scrollTop,(l=this).model.allowVirtualScrolling&&"continuous"==l.model.virtualScrollMode?(o=i.Query().skip(l._rawList.length).take(l.model.itemsCount).clone(),s>=t(l.popupList).find("ul,ol").height()-t(l.popupList).height()&&l._rawList.length<l._totalCount&&(l._addLoadingClass(),i.DataManager&&l.model.dataSource instanceof i.DataManager?(o=l._getQuery().skip(l._rawList.length).take(l.model.itemsCount).clone(),l._trigger("actionBegin",{requestFrom:"scroll"})||l.model.dataSource.executeQuery(o).done(function(e){l.addItem(e.result),l._removeLoadingClass(),l._trigger("actionSuccess",{e:e,requestFrom:"scroll"})}).fail(function(){l.model.dataSource=null,l._removeLoadingClass(),l._trigger("actionFailure",{e:e,requestFrom:"scroll"})}).always(function(e){l._trigger("actionComplete",{e:e,requestFrom:"scroll"})})):(n=i.DataManager(l.model.dataSource).executeLocal(o),l.addItem(n),l._removeLoadingClass()))):l.model.allowVirtualScrolling&&"normal"==l.model.virtualScrollMode&&window.setTimeout(function(){0==l._virtualCount&&l._loadList()},300))},_loadList:function(){var s,l,n,o,a;this._virtualCount++;var r,d=this.scrollerObj.scrollTop(),h=this,c=0,u=null;if(this._currentPage=Math.round(d/(29*this.model.itemsCount)),-1!=t.inArray(this._currentPage,this._virtualPages.sort(function(e,t){return e-t})))if(0==this._currentPage){if(-1!=t.inArray(this._currentPage+1,this._virtualPages))return this._virtualCount--,!1;this._currentPage=this._currentPage+1}else if(-1!=t.inArray(this._currentPage-1,this._virtualPages)){if(-1!=t.inArray(this._currentPage+1,this._virtualPages))return this._virtualCount--,!1;this._currentPage=this._currentPage+1}else this._currentPage=this._currentPage-1;for(r=!(-1!=t.inArray(this._currentPage-1,this._virtualPages)),this._addLoadingClass(),s=this._virtualPages.length-1;s>=0;s--)if(this._virtualPages[s]<this._currentPage){c=this._virtualPages[s],s+1==this._virtualPages.length||(u=this._virtualPages[s+1]);break}if(l=r?(this._currentPage-1)*this.model.itemsCount:this._currentPage*this.model.itemsCount,n=i.Query().range(l,this._currentPage*this.model.itemsCount+this.model.itemsCount),i.DataManager&&h.model.dataSource instanceof i.DataManager){if(a=r?(this._currentPage-1)*this.model.itemsCount:this._currentPage*this.model.itemsCount,n=this._getQuery().skip(a),r){for(s=0;s<n.queries.length;s++)if("onTake"==n.queries[s].fn){n.queries.splice(s,1);break}n.take(2*this.model.itemsCount)}h._trigger("actionBegin",{requestFrom:"scroll"})||h.model.dataSource.executeQuery(n).done(function(e){h._appendVirtualList(e.result,c,h._currentPage,u,r),h._removeLoadingClass(),h._trigger("actionSuccess",{e:e,requestFrom:"scroll"})}).fail(function(){h._virtualCount--,h._removeLoadingClass(),h._trigger("actionFailure",{e:e,requestFrom:"scroll"})}).always(function(e){h._trigger("actionComplete",{e:e,requestFrom:"scroll"})})}else o=i.DataManager(h.model.dataSource).executeLocal(n),this._appendVirtualList(o,c,this._currentPage,u,r),h._removeLoadingClass()},_appendVirtualList:function(e,i,s,l,n){var o,a,r,d,h,c;if(this._virtualCount--,-1!=t.inArray(s,this._virtualPages.sort(function(e,t){return e-t})))return!1;for(n&&-1!=t.inArray(s-1,this._virtualPages.sort())&&(e.splice(0,this.model.itemsCount),n=!1),o=this.model.itemsCount,a=t("<ul>"),0!=(r=n?(s-1)*o*29-29*(i*o+o):s*o*29-29*(i*o+o))&&a.append(t("<span>").addClass("e-virtual").css({display:"block",height:r})),this._mapFields(),this._generateLi(e,this.mapFld),t(this.dummyUl).attr("page",s),n&&t(this.dummyUl).slice(0,o).attr("page",s-1),this.model.showCheckbox&&this._appendCheckbox(this.dummyUl),a.append(this.dummyUl),d=29*(s*o+o),0!=(d=null!=l?l*o*29-d:this.ultag.height()-d)&&a.append(t("<span>").addClass("e-virtual").css({display:"block",height:d})),(h=this.ultag.find("li[page="+i+"]").last()).next().remove(),a.children().insertAfter(h),this._virtualPages.push(s),n&&this._virtualPages.push(s-1),c=0;c<e.length;c++)this._listItem(e[c],"add");this._virtualUl=this.ultag.clone(!0),this._renderBoxModel()},_generateLi:function(e,s){var l,n,o,a;if(this.mapFld=s,this.dummyUl=[],!e||!e.length||e.length<1)return!1;for(l=0;l<e.length;l++){var r=this._getField(e[l],this.mapFld._id),d=this._getField(e[l],this.mapFld._imageUrl),h=this._getField(e[l],this.mapFld._imageAttributes),c=this._getField(e[l],this.mapFld._spriteCSS),u=this._getField(e[l],this.mapFld._text),m=this._getField(e[l],this.mapFld._value),p=this._getField(e[l],this.mapFld._htmlAttributes),g=this._getField(e[l],this.mapFld._selected),f=document.createElement("li");!i.isNullOrUndefined(m)&&m.toString().length>0?f.setAttribute("data-value","object"==typeof m?JSON.stringify(m):m):f.setAttribute("data-value",u),i.isNullOrUndefined(r)||""===r||f.setAttribute("id",r),i.isNullOrUndefined(p)||""==p||this._setAttr(f,p),this.model.template?t(f).append(this._getTemplatedString(e[l])):(i.isNullOrUndefined(d)||""==d||(n=document.createElement("img"),this._setClass(n,"e-align")._setAttr(n,{src:d,alt:u}),h&&""!=h&&this._setAttr(n,h),f.appendChild(n)),i.isNullOrUndefined(c)||""==c||(o=document.createElement("div"),this._setClass(o,"div.e-align "+c+" sprite-image"),f.appendChild(o)),g&&this._setClass(f,"chkselect"),i.isNullOrUndefined(u)&&(u=String(u)),(a=document.createElement("span")).innerHTML=u,this._setClass(a,"e-ddltxt"),f.innerHTML+=a.outerHTML),this._setAttr(f,{role:"option",unselectable:"on"}),this.dummyUl.push(f)}},_setAttr:function(e,t){var i,s,l;if("string"==typeof t)2==(i=t.replace(/['"]/g,"").split("=")).length&&e.setAttribute(i[0],i[1]);else for(s in t)if("styles"!=s&&"style"!=s||"object"!=typeof t[s])e.setAttribute(s,t[s]);else for(l in t[s])e.style[l]=t[s][l];return this},_setClass:function(e,t){return e.className+=" "+t,this},_removeClass:function(e,t){var i=e.className.indexOf(t);return i>=0&&(e.className=0!=i&&" "===e.className[i-1]?e.className.replace(" "+t,""):e.className.replace(t,"")),this},_hasClass:function(e,t){return e.className.indexOf(t)>=0},_swapUnCategorized:function(e){t(e).each(function(t,i){if(!i.key){for(var s=t;s>0;s--)e[s]=e[s-1];return e[s]=i,!1}})},_getField:function(e,t){return i.pvt.getObject(t,e)},_getTemplatedString:function(e){for(var t,i,s=this.model.template,l=s.indexOf("${"),n=s.indexOf("}");-1!=l&&-1!=n;)i=(t=s.substring(l,n+1)).replace("${","").replace("}",""),l=(s=s.replace(t,this._getField(e,i))).indexOf("${"),n=s.indexOf("}");return s},_setWatermark:function(){if(""==this.element.val()&&""==this._trim(this._visibleInput.val())){var e=null!=this.model.watermarkText?this.model.watermarkText:this._localizedLabels.watermarkText;this._isWatermark?this._visibleInput.attr("placeholder",e):this._hiddenSpan.css("display","block").text(e),"visualmode"==this.model.multiSelectMode&&this._ulBox&&0==this._ulBox.find("li").length&&this._swapUlandInput(!1)}},_checkboxHideShow:function(e){e?(this.listitems=this._getLi(),0==this.listitems.find("input[type=checkbox]").length&&this._appendCheckbox(this.listitems)):this._removeCheck(this.popupList),this.model.showCheckbox=e,this._virtualUl=this.ultag.clone(!0)},_setCheckAll:function(e){!this._isSingleSelect()&&e?this.checkAll():this.model.checkAll=!1},_setUncheckAll:function(e){!this._isSingleSelect()&&e?this.uncheckAll():this.model.uncheckAll=!1},checkAll:function(){var e,s,l=this._selectedIndices,n=!1;if(this._mapFields(),this.listitems=this._getLi(),this._isWatermark||this._hiddenSpan.css("display","none"),!this._isSingleSelect()){for(e=0;e<this.listitems.length;e++)this._currentText=this._isPlainType(this.popupListItems)?this.popupListItems[e]:this._getField(this.popupListItems[e],this.mapFld._text),this._hiddenValue=this._getAttributeValue(this.listitems[e])||this._currentText,this._checkContains(this._hiddenValue)?n=!0:this.model.showCheckbox?(s=t(this.listitems[e]).children(".e-checkwrap")[0])&&!this._isChecked(s)?(this._setClass(s,"e-check-act"),this._setAttr(s,{"aria-checked":!0}),s.firstChild.checked=!0,n=!1):n=!0:(n=!1,t(this.listitems[e]).addClass("e-active")),n||(this.checkedStatus=!0,this._itemID=t(this.listitems[e]).attr("id"),i.isNullOrUndefined(this._itemID)||""==this._itemID||this._selectedItemsID.push(this._itemID),this._createListHidden(this._hiddenValue),"visualmode"==this.model.multiSelectMode&&(this._ulBox.append(this._createBox(this._currentText,this._hiddenValue)),this._isPopupShown()&&this._setListPosition()),this._addText(this._currentText),-1==t.inArray(e,l)&&(this._selectedIndices.push(e),this.model.selectedItems=this.model.selectedIndices=this._selectedIndices),this._selectedValue=this._getAttributeValue(this.listitems[e])||"",this._initValue||this._trigger("checkChange",{isChecked:this.checkedStatus,data:this.model}),args={text:this._visibleInput[0].value,selectedText:this._currentText,itemId:e,selectedValue:this._selectedValue,value:this._selectedValue,isChecked:this.checkedStatus},this._initValue||this._trigger("change",args),this._activeItem=e,this.activeItem=this._getActiveItem(),this._cascadeAction());this._updateValue(this.element.val()),this._updateText(),this.model.itemValue=this._selectedValue,this.model.uncheckAll=!1,this.model.checkAll=!0,this._activeItem=-1,this._setWatermark()}},_createListHidden:function(e){var i=document.createElement("input");this._setAttr(i,{type:"hidden",name:this._name,value:e,id:"#"+e}),this.container.append(i),t(this.element).attr("name","hiddenEle")},_removeListHidden:function(e){var i=document.getElementById("#"+e);t(i).remove()},_getAttributeValue:function(e){return e?e.getAttribute("data-value")||e.getAttribute("value"):null},_selectCheckedItem:function(e){for(var t=0;t<e.length;t++)this._activeItem=e[t],this._enterTextBoxValue()},unCheckAll:function(){this.uncheckAll()},uncheckAll:function(){var e,s,l,n=!1;if(this.listitems=this._getLi(),this._mapFields(),!this._isSingleSelect()){for(e=0;e<this.listitems.length;e++)this._currentText=this._isPlainType(this.popupListItems)?this.popupListItems[e]:this._getField(this.popupListItems[e],this.mapFld._text),this._hiddenValue=this._getAttributeValue(this.listitems[e])||this._currentText,this._checkContains(this._hiddenValue)?this.model.showCheckbox?(s=t(this.listitems[e]).children(".e-checkwrap")[0])&&this._isChecked(s)?(this._removeClass(s,"e-check-act"),this._setAttr(s,{"aria-checked":!1}),s.firstChild.checked=!1,n=!0):n=!1:(t(this.listitems[e]).removeClass("e-active"),n=!0):n=!1,n&&(this.checkedStatus=!1,this._activeItem=e,this.activeItem=this._getActiveItem(),this._removeText(this._hiddenValue),this._removeListHidden(this._hiddenValue),l=this._selectedIndices,t.inArray(e,l)>-1&&(this._selectedIndices.splice(t.inArray(e,l),1),this.model.selectedItems=this.model.selectedIndices=this._selectedIndices),this._selectedValue=this._getAttributeValue(this.listitems[e])||"",this._itemID=t(this.listitems[e]).attr("id"),i.isNullOrUndefined(this._itemID)||""==this._itemID||this._removeSelectedItemsID(),this._initValue||this._trigger("checkChange",{isChecked:this.checkedStatus,data:this.model}),args={text:this._visibleInput[0].value,selectedText:this._currentText,itemId:e,selectedValue:this._selectedValue,value:this._selectedValue,isChecked:this.checkedStatus},this._initValue||this._trigger("change",args),this._cascadeAction(),"visualmode"==this.model.multiSelectMode&&(this._deleteBoxCheck(this._hiddenValue),this._isPopupShown()&&this._setListPosition()));this._updateValue(this.element.val()),this._updateText(),this.model.itemValue=this._selectedValue,this.model.checkAll=!1,this.model.uncheckAll=!0,this._setWatermark(),this._activeItem=-1}},_removeSelectedItemsID:function(){var e;e=this._selectedItemsID.indexOf(this._itemID),this._selectedItemsID.splice(e,1),this._itemID=""},_refreshScroller:function(){this.model.enablePopupResize||(this.popupList.css("height","auto"),this.popupListWrapper.css("height","auto")),this.popupList.find(".e-content, .e-vhandle").removeAttr("style"),this.popupList.find(".e-vhandle div").removeAttr("style"),this.popupList.children(".e-content").removeClass("e-content");var e=this._isPopupShown();this.popupListWrapper.css("display","block"),this.popupList.css({display:"block"}),this.scrollerObj.model.height=Math.ceil(this._getPopupHeight()),this.scrollerObj.refresh(),this.model.enablePopupResize||(this.popupList.css("height","auto"),this.popupListWrapper.css("height","auto")),this.scrollerObj.option("scrollTop",0),e||this.popupListWrapper.css("display","none")},_enablePopupResize:function(){this.model.enablePopupResize&&(this.popupListWrapper.addClass("e-resizable").append(i.buildTag("div.e-resizebar").append(i.buildTag("div.e-icon e-resize-handle"))).find(".e-resize-handle").addClass(this.model.enableRTL?"e-rtl-resize":""),this._resizePopup())},_resizePopup:function(){var e=this,i=!1;this.popupListWrapper.find("div.e-resize-handle").ejResizable({minHeight:e._validatePixelData(e.model.minPopupHeight),minWidth:e._validatePixelData(e.model.minPopupWidth),maxHeight:e._validatePixelData(e.model.maxPopupHeight),maxWidth:e._validatePixelData(e.model.maxPopupWidth),handle:"e-ddl-popup",resizeStart:function(t){if(!e.model.enabled)return!1;i||e._trigger("popupResizeStart",{event:t}),i=!0},resize:function(i){var s=t(i.element).parents("div.e-ddl-popup");e._refreshPopupOnResize(t(s).outerHeight(),t(s).outerWidth()),e._trigger("popupResize",{event:i})},resizeStop:function(t){i&&(e._refreshPopupOnResize(e.model.popupHeight,e.model.popupWidth),i&&e._trigger("popupResizeStop",{event:t}),i=!1)},helper:function(i){var s=t(i.element).parents("div.e-ddl-popup");return e._refreshPopupOnResize(t(s).outerHeight(),t(s).outerWidth()),t(e.popupListWrapper)}})},_refreshPopupOnResize:function(e,t){e&&(this.model.popupHeight=e),t&&(this.model.popupWidth=t),this.popupListWrapper.css({height:this._validatePixelData(this.model.popupHeight),"min-height":this._validatePixelData(this.model.minPopupHeight),"max-height":this._validatePixelData(this.model.maxPopupHeight)}),this._setListWidth(),this._refreshScroller()},_setListWidth:function(){var e=this.model.popupWidth;"auto"!=e?this.popupListWrapper.css({width:e}):this.popupListWrapper.css({"min-width":this._validatePixelData(this.model.minPopupWidth)}),this.popupListWrapper.css({"max-width":this._validatePixelData(this.model.maxPopupWidth)})},_setListHeight:function(){this.model.enablePopupResize&&this.model.enableFilterSearch&&this.model.minPopupHeight&&this.model.minPopupHeight.toString().indexOf("%")<0&&20==this._validatePixelData(this.model.minPopupHeight)&&(this.model.minPopupHeight="65"),this.model.enablePopupResize?this.popupListWrapper.css({"min-height":this._validatePixelData(this.model.minPopupHeight),"max-height":this._validatePixelData(this.model.maxPopupHeight),height:this._validatePixelData(this.model.popupHeight)}):this.popupListWrapper.css({"max-height":this._validatePixelData(this.model.popupHeight),"min-height":this._validatePixelData(this.model.minPopupHeight)})},_validatePixelData:function(e){return e&&!isNaN(e)?Number(e):e},_getPopupHeight:function(){var e,t=this.popupListWrapper.height();return this.model.enablePopupResize&&(t-=this.popupListWrapper.find(">div.e-resizebar").height()),this.model.headerTemplate&&this.headerTemplate&&(t-=this.headerTemplate.height()),this.model.enableFilterSearch&&this.inputSearch&&(e=this.inputSearch.parent(".e-in-wrap"),t-=parseInt(e.css("height"))+parseInt(e.css("margin-top"))+parseInt(e.css("margin-bottom"))),t},_refreshPopup:function(){"auto"!=this.model.popupWidth||this._validatePixelData(this.model.minPopupWidth)?this._validatePixelData(this.model.minPopupWidth)&&this.popupListWrapper.css({"min-width":this._validatePixelData(this.model.minPopupWidth)}):this.popupListWrapper.css({"min-width":this.wrapper.width()}),this._refreshScroller(),this._setListPosition()},_setListPosition:function(){var e,i=this.wrapper,s=this._getOffset(i),l=t(document).scrollTop()+t(window).height()-(s.top+t(i).outerHeight()),n=s.top-t(document).scrollTop(),o=this.popupListWrapper.outerHeight(),a=this.popupListWrapper.outerWidth(),r=s.left,d=i.outerHeight(),h=(d-i.height())/2,c=this._getZindexPartial(),u=(o<l||o>n?s.top+d+3:s.top-o-3)-h;e=t(document).scrollLeft()+t(window).width()-r,(this.model.enableRTL||a>e&&a<r+i.outerWidth())&&(r-=this.popupListWrapper.outerWidth()-i.outerWidth()),this.popupListWrapper.css({left:r+"px",top:u+"px","z-index":c})},_getOffset:function(e){return i.util.getOffset(e)},_getZindexPartial:function(){return i.util.getZindexPartial(this.element,this.popupListWrapper)},_showResult:function(){var e=this,s={text:this._visibleInput[0].value,value:this._selectedValue,refreshPopup:!0};this._trigger("beforePopupShown",s)||(s.refreshPopup&&this._refreshPopup(),t(this.popupListWrapper).slideDown(this.model.enableAnimation?200:1,function(){t(document).on("mousedown",t.proxy(e._OnDocumentClick,e)),e._on(i.getScrollableParents(e.wrapper),"scroll",e._hideResult)}),this.element[0].setAttribute("aria-expanded",!0),this._listSize=this._getLi().length,this._trigger("popupShown",{text:this._visibleInput[0].value,value:this._selectedValue}),this.scrollerObj.setModel({scrollTop:this._calcScrollTop("active")}))},_OnWindowResize:function(){!i.isNullOrUndefined(this.model)&&this._isPopupShown()&&this._refreshPopup()},_hideResult:function(e){if(this.model&&this._isPopupShown()){if(!i.isNullOrUndefined(e)&&!i.isNullOrUndefined(this.inputSearch)&&t(this.inputSearch).is(":focus")&&"scroll"==e.type&&i.isTouchDevice())return!1;var s=this;if(this._trigger("beforePopupHide",{text:this._visibleInput[0].value,value:this._selectedValue}))return;t(this.popupListWrapper).slideUp(this.model.enableAnimation?100:0,function(){t(document).off("mousedown",t.proxy(s._OnDocumentClick,s))}),null!=this.element&&this.element.attr("aria-expanded",!1),this._off(i.getScrollableParents(this.wrapper),"scroll",this._hideResult),null!=this._visibleInput&&this._trigger("popupHide",{text:this._visibleInput[0].value,value:this._selectedValue}),setTimeout(function(){s._resetSearch()},100)}},_isPopupShown:function(){return"block"==this.popupListWrapper.css("display")},_enterTextBoxValue:function(){var e,i,s=!0;this.removeID=!1,this.checkedStatus=!1,this._isWatermark||this._hiddenSpan.css("display","none"),this._chooseSelectionType(),(this._activeItem>=0||null!=this._activeItem)&&(this.model.showCheckbox?(i=this.activeItem.find(".e-checkwrap")[0],this.checkedStatus=this._isChecked(i)):this.checkedStatus=this.activeItem.hasClass("e-active")),e={text:this._currentText,selectedText:this._currentText,itemId:this.selectedIndexValue,value:this._selectedValue,isChecked:this.checkedStatus,isInteraction:!!this._uiInteract},this._initValue||this._onSearch||!this._raiseEvents||!this._trigger("select",e)?((this._activeItem>=0||null!=this._activeItem)&&(this._isSingleSelect()||this._checkContains(this._selectedValue)?this._isSingleSelect()?(this.ultag.children("li").removeClass("e-hover").removeClass("e-active"),this.activeItem.addClass("e-active"),this._maintainHiddenValue(),this._visibleInput.val(this._currentText),this.element.val(this._hiddenValue),this.selectedItemIndex(this.selectedIndexValue),this.selectedIndex(this.selectedIndexValue),this._selectedIndices[0]=this.selectedIndexValue):s=!1:(this.model.showCheckbox?(i=this.activeItem.find(".e-checkwrap")[0],this._isChecked(i)||(this._setClass(i,"e-check-act"),this._setAttr(i,{"aria-checked":!0}),t(i).find(".e-check-input")[0].checked=!0)):this.activeItem.addClass("e-active"),"visualmode"==this.model.multiSelectMode&&(this._ulBox.append(this._createBox(this._currentText,this._selectedValue)),this._isPopupShown()&&this._setListPosition()),this._maintainHiddenValue(),this._addText(this._currentText),this._createListHidden(this._hiddenValue),-1==t.inArray(this.selectedIndexValue,this._selectedIndices)&&(this._selectedIndices.push(this.selectedIndexValue),this.model.selectedItems=this.model.selectedIndices=this._selectedIndices)),s&&(this.checkedStatus=!0,this._onValueChange(),this._cascadeAction(),this.selectelement&&t("#"+this._id).children().length>this.selectedIndexValue&&(t("#"+this._id).children()[this.selectedIndexValue].selected=!0))),this.model.uncheckAll=!1,this._setWatermark()):this._setWatermark()},_onValueChange:function(){this.model.itemValue=this._selectedValue,this._updateText(),this.value()==this.element.val()||null==this.value()&&""==this.element.val()||(this._updateSelectedIndexByValue(this._visibleInput.val()),this._updateValue(this.element.val()),args={text:this._visibleInput[0].value,selectedText:this._currentText,itemId:this.selectedIndexValue,selectedValue:this._selectedValue,value:this._selectedValue,isChecked:this.checkedStatus,isInteraction:!!this._uiInteract},this._initValue||this._onSearch||!this._raiseEvents||(this._trigger("change",args),this.model.showCheckbox&&this._trigger("checkChange",{isChecked:this.checkedStatus,text:this._visibleInput.val(),itemId:this.selectedIndexValue,selectedText:this._currentText,selectedValue:this._selectedValue,value:this._selectedValue,data:this.model})),this._uiInteract=!1)},_decode:function(e){return t("<span>").html(e).text()},_chooseSelectionType:function(){this.activeItem=this._getActiveItem(),this.selectedIndexValue=this._activeItem,this._mapFields(),null==this.model.dataSource||this._isPlainType(this.model.dataSource)?(this._currentText=this.activeItem.text(),this._getAttributeValue(this.activeItem[0])?this._selectedValue=this._getAttributeValue(this.activeItem[0]):null!=this._currentText?(this.activeItem[0].setAttribute("value",this._currentText),this._selectedValue=this._currentText):this._selectedValue="",this._itemID=t(this.activeItem).attr("id")):(this._currentText=this._decode(this._getField(this.popupListItems[this._activeItem],this.mapFld._text)),this._currentText=""===this._currentText||null==this._currentText?this.activeItem.text():this._currentText,this._selectedValue=this._getField(this.popupListItems[this._activeItem],this.mapFld._value),this._selectedValue=null!=this._selectedValue?this._selectedValue:this._currentText,this._itemID=this._getField(this.popupListItems[this._activeItem],this.mapFld._id)),i.isNullOrUndefined(this._itemID)||""==this._itemID||(this.model.showCheckbox?this.removeID?this._removeSelectedItemsID():this._selectedItemsID.push(this._itemID):(this._selectedItemsID=[],this.removeID||this._selectedItemsID.push(this._itemID))),this.selectedTextValue=this._currentText},_maintainHiddenValue:function(){this._hiddenValue=this._getAttributeValue(this.activeItem[0])||this._currentText},_removeTextBoxValue:function(){var e,i;this._uiInteract=!0,this.removeID=!0,this.checkedStatus=!0,this._chooseSelectionType(),(this._activeItem>=0||null!=this._activeItem)&&(this.model.showCheckbox?(i=this.activeItem.find(".e-checkwrap")[0],this.checkedStatus=this._isChecked(i)):this.checkedStatus=this.activeItem.hasClass("e-active")),e={text:this._currentText,selectedText:this._currentText,itemId:this.selectedIndexValue,value:this._selectedValue,isChecked:this.checkedStatus},this._initValue||this._onSearch||!this._raiseEvents||!this._trigger("select",e)?(this._maintainHiddenValue(),this._removeText(this._hiddenValue),this._removeListHidden(this._hiddenValue),this.activeItem.removeClass("e-active"),this._isSingleSelect()||(this.model.showCheckbox?(i=this.activeItem.find(".e-checkwrap")[0],this._isChecked(i)&&(this._removeClass(i,"e-check-act"),this._setAttr(i,{"aria-checked":!1}),t(i).find(".e-check-input")[0].checked=!0)):this.activeItem.removeClass("e-active"),t.inArray(this.selectedIndexValue,this._selectedIndices)>-1&&(this._selectedIndices.splice(t.inArray(this.selectedIndexValue,this._selectedIndices),1),this.model.selectedItems=this.model.selectedIndices=this._selectedIndices),"visualmode"==this.model.multiSelectMode&&(this._deleteBoxCheck(this._hiddenValue),this._isPopupShown()&&this._setListPosition())),this.checkedStatus=!1,this._onValueChange(),null==this.model.cascadeTo||this._isSingleSelect()||this._cascadeAction(),this.model.checkAll=!1,this._setWatermark()):this._setWatermark()},_createBox:function(e,s){if(!this._checkContains(s)){"none"==this._ulBox.css("display")&&"none"!=this._visibleInput.css("display")&&this._swapUlandInput(!0);var l=i.buildTag("span.e-icon e-close","",{},{unselectable:"on"}),n=i.buildTag("li.e-options").text(e).attr("data-value",s).append(l);return this._on(l,"click",function(e){if(!this.model.enabled)return!1;this._deleteBox(t(e.target).parent())}),n}},_deleteBoxCheck:function(e){for(var i=this._ulBox.children("li"),s=0;s<i.length;s++)t(i[s]).attr("data-value")==e&&t(i[s]).remove()},_deleteLastBox:function(){var e=this._ulBox.children("li:not(.e-search-box)").last();e.hasClass("e-active")?this._deleteBox(e):(this._removeActive(),e.addClass("e-active"))},_deleteBox:function(e){for(var i,s,l,n=0;n<e.length;n++)for(i=t(e[n]).attr("data-value"),s=this._getLi(),l=0;l<s.length;l++)if(t(s[l]).attr("data-value")==i){this._activeItem=l,this._removeTextBoxValue();break}this._isFocused||this._isPopupShown()||this._setWatermark()},_swapUlandInput:function(e){e?(this._visibleInput.css("display","none"),this._ulBox.css("display","block"),this.wrapper.css({height:"auto"})):(this._visibleInput.css("display","block"),this._ulBox.css("display","none"),this.wrapper.css({height:this.model.height}))},_removeActive:function(){this._ulBox.children("li").removeClass("e-active")},_adjustWidth:function(){var e=i.buildTag("span",this._visibleInput.val());this.container.append(e),this._visibleInput.width(e.width()+30),e.remove()},_destroyBoxModel:function(){this._visibleInput.css("display","block"),this.wrapper.height(this.model.height),this._ulBox.remove(),this._ulBox=null,this._off(this.container,"click")},_removeListHover:function(){this.ultag.children("li").removeClass("e-hover")},_addListHover:function(){var e=this._getActiveItem();e.addClass("e-hover"),this.scrollerObj.setModel({scrollTop:this._calcScrollTop("hover")}),e.focus()},_getLi:function(){return this.ultag.children("li:not('.e-category'):not('.e-nosuggestion')")},_calcScrollTop:function(e){this.ultag.outerHeight();var i,s,l,n,o=this.ultag.find("li"),a=0;for(this._selectedIndices&&this._selectedIndices.length>0&&"active"==e?(n=this._getLi(),i=this._selectedIndices.length==n.length?0:this._selectedIndices[this._selectedIndices.length-1],(null!=this.model.fields.groupBy||this.ultag.find("li.e-category").length>0)&&(i=t.inArray(n.eq(i)[0],o))):i=this.ultag.find("li.e-"+e).index(),l=0;l<i;l++)a+=o.eq(l).outerHeight(!0);return(s=a-(this.popupList.outerHeight()-o.eq(i).outerHeight(!0))/2)<0?0:s},_getActiveItem:function(){return this._getLi().eq(this._activeItem)},_setDimentions:function(){this.model.height&&this.wrapper.height(this.model.height),this.model.width&&this.wrapper.width(this.model.width)},_roundedCorner:function(e){e?(this.container.addClass("e-corner"),this.popupListWrapper.addClass("e-corner"),this.inputSearch&&this.inputSearch.parent(".e-in-wrap").addClass("e-corner")):(this.container.removeClass("e-corner"),this.popupListWrapper.removeClass("e-corner"),this.inputSearch&&this.inputSearch.parent(".e-in-wrap").removeClass("e-corner"))},_enabled:function(e){e?this.enable():this.disable()},_destroyDropdown:function(){this.element.insertAfter(this.wrapper),this.element.width(this.element.width()+this.dropdownbutton.outerWidth()),this.wrapper.remove(),this.container.off("mousedown",t.proxy(this._OnDropdownClick,this))},_RightToLeft:function(){this.model.enableRTL?this.wrapper.addClass("e-rtl"):this.wrapper.removeClass("e-rtl")},_dropbtnRTL:function(){this.model.enableRTL?(this.popupListWrapper.addClass("e-rtl").find(".e-resize-handle").addClass("e-rtl-resize"),this.popupList.addClass("e-rtl")):(this.popupListWrapper.removeClass("e-rtl").find(".e-resize-handle").removeClass("e-rtl-resize"),this.popupList.removeClass("e-rtl"))},_OnDropdownClick:function(e){if(this._preventDefaultAction(e),t(e.target).is("li")&&t(e.target).parent().hasClass("e-boxes")||t(e.target).parents("ul").hasClass("e-boxes")&&t(e.target).hasClass("e-icon e-close")||this.model.readOnly||this._readOnly)return!1;this.ultag.find("li").length>0&&(e.which&&1==e.which||e.button&&0==e.button)&&this._OnPopupHideShow()},_OnPopupHideShow:function(){this._isPopupShown()?this._hideResult():(this._showResult(),this.wrapper.focus())},_showFullList:function(){var e=this.model.dataSource;i.DataManager&&e instanceof i.DataManager?e.dataSource.offline||e.dataSource.json&&e.dataSource.json.length>0?this._getFilteredList(e.dataSource.json):this._initDataSource(e):this._getFilteredList(e)},_getFilteredList:function(e){if(!e||!e.length||e.length<1)this._targetElementBinding(),this._renderRemaining();else{var t=i.DataManager(e).executeLocal(this._isPlainType(e)?i.Query():this._getQuery(!0));this._totalCount=t.count,this._listItem(t.result?t.result:t),this._renderPopupList(),this._rawList=this.popupListItems}},_cascadeAction:function(){if(this.model.cascadeTo)for(var e=this.model.cascadeTo.split(","),s=0;s<e.length;s++)t("#"+e[s]).hasClass("e-dropdownlist")?this._doCascadeAction(e[s],this,this.checkedStatus):t("#"+e[s]).on("ejDropDownListcreate",{Obj:this,status:this.checkedStatus},function(e){i.isNullOrUndefined(e.data.Obj.getValue())||""==e.data.Obj.getValue()||e.data.Obj._doCascadeAction(this.id,e.data.Obj,e.data.status)})},_doCascadeAction:function(e,s,l){s._currentValue=s._getField(s.popupListItems[s._activeItem],s.mapFld._value),s.selectDropObj=t("#"+e).ejDropDownList("instance");var n={cascadeModel:s.selectDropObj.model,cascadeValue:s._currentValue,setCascadeModel:{},requiresDefaultFilter:!0};this._trigger("cascade",n),s.selectDropObj._setCascadeModel=n.setCascadeModel,i.isNullOrUndefined(s[e])&&(s[e]=s.selectDropObj.model.dataSource),i.DataManager&&s[e]instanceof i.DataManager?s._cascadeOdataInit(s[e],n.requiresDefaultFilter,l,n.cascadeQuery):s._cascadeJsonInit(s.selectDropObj,s[e],s.mapFld._value,n.requiresDefaultFilter,l,n.cascadeQuery)},_cascadeOdataInit:function(e,t,i,s){var l,n=this;n._dQuery=this.selectDropObj._getQuery().clone(),l=n._dQuery.clone(),t?l.where(n.mapFld._value,"equal",n._currentValue):l=s,n.selectDropObj._addLoadingClass(),n._trigger("actionBegin",{requestFrom:"cascade"})||e.executeQuery(l).fail(function(e){n._changedSource=null,n.selectDropObj.setModel({dataSource:n._changedSource,enabled:!1}),n._trigger("actionFailure",{e:e,requestFrom:"cascade"})}).done(function(e){n._trigger("actionSuccess",{e:e,requestFrom:"cascade"}),n._cascadeDataBind(n.selectDropObj,e.result,i),n.selectDropObj._removeLoadingClass()}).always(function(e){n._trigger("actionComplete",{e:e,requestFrom:"cascade"})})},_cascadeJsonInit:function(e,t,s,l,n,o){var a=l?i.Query().where(s,"==",this._currentValue):o,r=i.DataManager(t).executeLocal(a);this._cascadeDataBind(e,r,n)},_cascadeDataBind:function(e,s,l){var n,o,a,r,d,h=e.value();if(this.model.showCheckbox&&l||"none"!=this.model.multiSelectMode&&this.activeItem.hasClass("e-active"))this._changedSource=i.isNullOrUndefined(this._changedSource)?s:this._changedSource.concat(s);else if(this.model.showCheckbox||"none"!=this.model.multiSelectMode){for(n=0;n<s.length;n++)if(this._isPlainType(s)&&this._isPlainType(this._changedSource))this._changedSource.splice(this._changedSource.indexOf(s[n]),1);else for(o=0;o<this._changedSource.length;o++)JSON.stringify(this._changedSource[o])==JSON.stringify(s[n])&&this._changedSource.splice(o,1);e.setModel({dataSource:null})}else this._changedSource=s;if(a=JSON.parse(JSON.stringify(e.model)),e.setModel({dataSource:this._changedSource,enabled:this._changedSource.length>0}),this._isSingleSelect()||e.selectItemByValue(h),(e.model.showCheckbox||"none"!=e.model.multiSelectMode)&&(t("input:hidden[id^='#'][name="+e._id+"]").remove(),e._visibleInput.attr("name",e._name)),e._setSelectedItem)e.setModel(e._setCascadeModel);else{for(r=["value","text","selectedIndex","selectedIndices"],d=0;d<r.length;d++)e.model[r[d]]=a[r[d]];e._finalize()}e._setSelectedItem=!0},_OnMouseEnter:function(e){var i,s;if(!this.model.enabled||this.model.readOnly||this._readOnly)return!1;this.ultag.children("li").removeClass("e-hover"),t(e.target).is("li:not('.e-category')")&&t(e.target).addClass("e-hover"),t(e.target).hasClass("e-disable")?t(e.target).removeClass("e-hover"):"li"!=e.target.tagName&&(i=t(e.target).parents("li:not('.e-category')"),t(i).addClass("e-hover")),this.ultag.children("li:not('.e-category')").each(function(e){if(t(this).hasClass("e-hover"))return s=e,!1}),this._activeItem=s},_OnMouseLeave:function(){if(!this.model.enabled||this.model.readOnly||this._readOnly)return!1;this.ultag.children("li").removeClass("e-hover")},_OnMouseClick:function(e){var i,s,l;if(this._uiInteract=!0,!this.model.enabled||this.model.readOnly||this._readOnly||this.model.enableFilterSearch&&t(e.target).is("li")&&t(e.target).hasClass("e-nosuggestion"))return!1;(!t(e.target).is("li")||t(e.target).hasClass("e-disable"))&&(t(e.target).is("li")||t(e.target).closest("li").hasClass("e-disable"))||(this._isSingleSelect()?(this._enterTextBoxValue(),this._hideResult()):this.model.showCheckbox?(i="LI"===e.target.nodeName?e.target:t(e.target).parents("li.e-hover"),s=t(i).find(".e-checkwrap")[0],this._onCheckChange({target:s})):(l=t(e.target).is("li")?e.target:t(e.target).closest("li")[0],this._activeItem=t.inArray(l,this._getLi()),t(l).hasClass("e-active")?this._removeTextBoxValue():this._enterTextBoxValue()))},_OnDocumentClick:function(e){if(this.model&&(!this.model.enabled||this.model.readOnly||this._readOnly))return!1;t(e.target).is(this.popupList)||t(e.target).parents(".e-ddl-popup").is(this.popupListWrapper)||t(e.target).is(this._visibleInput)||t(e.target).parents(".e-ddl").is(this.wrapper)?t(e.target).is(this.inputSearch)?this.inputSearch.focus():(t(e.target).is(this.popupList)||t(e.target).parents(".e-ddl-popup").is(this.popupListWrapper))&&this._preventDefaultAction(e):this._hideResult()},_OnKeyPress:function(e){this.model.enableIncrementalSearch&&13!=e.keyCode&&this._OnTextEnter("mozilla"==i.browserInfo().name?e.charCode:e.keyCode),32==e.keyCode&&this._preventDefaultAction(e)},_OnTextEnter:function(e){var i=this;this._incqueryString+=String.fromCharCode(e),this._incqueryString.length>0&&setTimeout(function(){i._incqueryString=""},1e3);var s,l,n=this._getLi(),o=this.model.caseSensitiveSearch,a=this._incqueryString,r=this._incqueryString.length,d=!1;for(o||(a=a.toLowerCase()),s=0;s<n.length&&(l=t(n[s]).text(),(l=o?l:l.toLowerCase()).substr(0,r)==a&&(this._activeItem=s,this._isSingleSelect()?(this._enterTextBoxValue(),this.scrollerObj.setModel({scrollTop:this._calcScrollTop("active")})):this._isPopupShown()&&(this._removeListHover(),this._addListHover()),d=!0),!d);s++);},_selectItem:function(e){this._isSingle||this._clearTextboxValue(),this._activeItem=e,this._addListHover(),this._enterTextBoxValue()},_focusItem:function(e){this._removeListHover(),this._activeItem=e,this._addListHover()},_selectFocusedItem:function(e){this._focusItem(e),this._enterTextBoxValue()},_selectShiftDown:function(e,i,s){s||this._clearTextboxValue();for(var l=e;l<=i;l++)t.inArray(l,this._disabledItems)<0&&t.inArray(l,this.model.selectedIndices)<0&&this._selectFocusedItem(l)},_selectShiftUp:function(e,i,s){s||this._clearTextboxValue();for(var l=i;l>=e;l--)t.inArray(l,this._disabledItems)<0&&t.inArray(l,this.model.selectedIndices)<0&&this._selectFocusedItem(l)},_selectShiftHome:function(e,i,s){if(s||this._clearTextboxValue(),e>=0&&e<=this._listSize-1){if(0==e)this._clearTextboxValue();else for(var l=e;l>=i;l--)t.inArray(l,this._disabledItems)<0&&t.inArray(l,this.model.selectedIndices)<0&&(this._activeItem=l,this._enterTextBoxValue());this._activeItem=e,0==e&&this._enterTextBoxValue(),this.scrollerObj.setModel({scrollTop:0})}},_selectShiftEnd:function(e,i,s){if(s||this._clearTextboxValue(),e<=this._listSize-1){if(e==i)this._clearTextboxValue();else for(var l=e;l<=i;l++)t.inArray(l,this._disabledItems)<0&&t.inArray(l,this.model.selectedIndices)<0&&(this._activeItem=l,this._enterTextBoxValue());this._activeItem=e,e==i&&this._enterTextBoxValue(),this.scrollerObj.setModel({scrollTop:this.ultag.outerHeight()})}},_getLastFocusedLi:function(){return this._selectedIndices&&this._selectedIndices.length>0?this._selectedIndices[this._selectedIndices.length-1]:null},_getLastShiftFocusedLi:function(e,i){var s=i?e-1:e+1;return t.inArray(s,this._selectedIndices)<0?e:this._getLastShiftFocusedLi(s,i)},_shiftUp:function(e,t,i){var s,l,n;if(null==e||e<0)this._checkDisableStep(0,t,!1,!1,!0);else if(e>0&&e<=this._listSize-1&&null!=(s=this._disableItemSelectUp(e-t)))if(null!=this._getLastFocusedLi())if(this._selectedIndices.length>1&&e-1==this._selectedIndices[this._selectedIndices.length-2])for(l=1;l<=t&&e-l==this._selectedIndices[this._selectedIndices.length-2];l++)this._activeItem=e+1-l,this._removeTextBoxValue(),this._focusItem(e-l);else n=this._getLastShiftFocusedLi(this._getLastFocusedLi(),!1),this._selectShiftUp(s,n,i);else this._moveUp(e,t,!1)},_shiftDown:function(e,t,i){var s,l,n;if(null==e||e<0)this._checkDisableStep(-1,t,!0,!1,!0);else if(e<this._listSize-1&&null!=(s=this._disableItemSelectDown(e+t)))if(null!=this._getLastFocusedLi())if(this._selectedIndices.length>1&&e+1==this._selectedIndices[this._selectedIndices.length-2])for(l=1;l<=t&&e+l==this._selectedIndices[this._selectedIndices.length-2];l++)this._activeItem=e-1+l,this._removeTextBoxValue(),this._focusItem(e+l);else n=this._getLastShiftFocusedLi(this._getLastFocusedLi(),!0),this._selectShiftDown(n,s,i);else this._moveDown(e,t,!1)},_moveUp:function(e,t,i){null==e||e<=0?this._checkDisableStep(0,t,!1,i):e>this._listSize-1?this._checkDisableStep(this._listSize-1,t,!1,i):e>0&&e<=this._listSize-1&&this._checkDisableStep(e,t,!1,i)},_moveDown:function(e,t,i){null==e||e<0?this._checkDisableStep(-1,t,!0,i):0==e?this._checkDisableStep(0,t,!0,i):e>=this._listSize-1?this._checkDisableStep(this._listSize-1,t,!0,i):e<this._listSize-1&&this._checkDisableStep(e,t,!0,i)},_checkDisableStep:function(e,t,i,s,l){var n,o=i?"_disableItemSelectDown":"_disableItemSelectUp",a=i?e+t:e-t,r=this[o](a);if(null==r)for(n=t;n>=0&&(a=i?e+n:e-n,null==(r=this[o](a)));n--);null!=r&&(s?this._focusItem(r):this._selectItem(r),l&&s&&this._enterTextBoxValue())},_disableItemSelectDown:function(e){return(null==e||e<0)&&(e=0),e<this._listSize?t.inArray(e,this._disabledItems)<0?e:this._disableItemSelectDown(e+1):this._listSize-1},_disableItemSelectUp:function(e){if((null==e||e<0)&&(e=0),e<this._listSize){if(t.inArray(e,this._disabledItems)<0)return e;if(e>0)return this._disableItemSelectUp(e-1)}},_preventDefaultAction:function(e,t){e.preventDefault?e.preventDefault():e.returnValue=!1,t&&(e.stopPropagation?e.stopPropagation():e.cancelBubble=!0)},_OnKeyDown:function(e){var t,i,s,l,n;if(this._uiInteract=!0,this.model.enabled)if(this._itemId=null,t=this._getLi(),this._listSize=t.length,s=this.popupList.height(),i=this.ultag.children("li").outerHeight(),l=0!=Math.round(s/i)?Math.round(s/i):5,this._isSingle=this._isSingleSelect(),this._isSingle)switch(e.keyCode){case 38:if(e.altKey){this.ultag.find("li").length>0&&this._hideResult();break}case 33:n=33==e.keyCode?l:1,this._moveUp(this._activeItem,n),this._preventDefaultAction(e,!0);break;case 8:this._preventDefaultAction(e);break;case 40:if(e.altKey){this.ultag.find("li").length>0&&this._showResult();break}case 34:n=34==e.keyCode?l:1,this._moveDown(this._activeItem,n),this._preventDefaultAction(e,!0);break;case 37:this.model.enableRTL?this._moveDown(this._activeItem,1):this._moveUp(this._activeItem,1),this._preventDefaultAction(e);break;case 39:this.model.enableRTL?this._moveUp(this._activeItem,1):this._moveDown(this._activeItem,1),this._preventDefaultAction(e);break;case 9:case 27:this._isPopupShown()&&this._hideResult();break;case 35:this._moveDown(this._listSize-1,0),this._preventDefaultAction(e);break;case 36:n=null!=this._activeItem?this._activeItem:this._listSize-1,this._moveUp(n,n),this._preventDefaultAction(e)}else switch(e.keyCode){case 38:e.altKey?this.ultag.find("li").length>0&&this._hideResult():e.shiftKey?this._shiftUp(this._activeItem,1,e.ctrlKey):this._moveUp(this._activeItem,1,e.ctrlKey),this._preventDefaultAction(e);break;case 33:e.shiftKey?this._shiftUp(this._activeItem,l,e.ctrlKey):this._moveUp(this._activeItem,l,e.ctrlKey),this._preventDefaultAction(e);break;case 8:this._preventDefaultAction(e);break;case 40:e.altKey?this.ultag.find("li").length>0&&this._showResult():e.shiftKey?this._shiftDown(this._activeItem,1,e.ctrlKey):this._moveDown(this._activeItem,1,e.ctrlKey),this._preventDefaultAction(e);break;case 34:e.shiftKey?this._shiftDown(this._activeItem,l,e.ctrlKey):this._moveDown(this._activeItem,l,e.ctrlKey),this._preventDefaultAction(e);break;case 37:this.model.enableRTL?this._moveDown(this._activeItem,1,!1):this._moveUp(this._activeItem,1,!1),this._preventDefaultAction(e);break;case 39:this.model.enableRTL?this._moveUp(this._activeItem,1,!1):this._moveDown(this._activeItem,1,!1),this._preventDefaultAction(e);break;case 9:case 27:this._isPopupShown()&&this._hideResult();break;case 35:e.shiftKey?this._selectShiftEnd(this._activeItem,this._listSize-1,e.ctrlKey):this._moveDown(this._activeItem,this._listSize,e.ctrlKey),this._preventDefaultAction(e);break;case 36:n=null!=this._activeItem?this._activeItem:this._listSize-1,e.shiftKey?this._selectShiftHome(this._activeItem,0,e.ctrlKey):this._moveUp(this._activeItem,n,e.ctrlKey),this._preventDefaultAction(e)}},_OnKeyUp:function(e){if(this.model.enabled){if(this._preventDefaultAction(e),e.target,null==this._activeItem&&(this._activeItem=this._getLi().index(this.popupList.find("ol,ul").children("li.e-hover"))),""==this._trim(this._visibleInput.val())&&38==e.keyCode&&40==e.keyCode)return this._hideResult(),!1;switch(e.keyCode){case 13:!this._isSingle&&this._isPopupShown()&&(e.ctrlKey||e.shiftKey)&&this._activeItem>=0?this._selectAndUnselect():this._isPopupShown()&&this._hideResult(),this._preventDefaultAction(e);break;case 32:this._isPopupShown()&&this._isSingle&&this._hideResult(),!this._isSingle&&this._isPopupShown()&&this._activeItem>=0&&this._selectAndUnselect(),this._preventDefaultAction(e);break;case 8:"visualmode"==this.model.multiSelectMode&&this._deleteLastBox(),this._preventDefaultAction(e);break;case 46:if("visualmode"==this.model.multiSelectMode||this.model.showCheckbox){this._deleteBox(this._ulBox.children("li.e-active"));break}}}},_isSingleSelect:function(){return!this.model.showCheckbox&&"none"==this.model.multiSelectMode},_selectAndUnselect:function(){this.model.showCheckbox?this._isChecked(this._getActiveItem().find(".e-checkwrap")[0])?this._removeTextBoxValue():this._enterTextBoxValue():"none"!=this.model.MultiSelectMode&&(this._getActiveItem().hasClass("e-active")?this._removeTextBoxValue():this._enterTextBoxValue())},_targetFocus:function(){this.model.enabled&&!this._isFocused&&(this._isWatermark||this._hiddenSpan.css("display","none"),this.wrapper.addClass("e-focus"),this._isFocused=!0,this._trigger("focusIn"))},_targetBlur:function(){this.model.enabled&&(this._isFocused=!1,this.wrapper.removeClass("e-focus"),this._setWatermark(),this._trigger("focusOut"))},_getLocalizedLabels:function(e){return void 0===this._localizedLabels[e]?i.DropDownList.Locale["en-US"][e]:this._localizedLabels[e]},_wireEvents:function(){this._on(this.wrapper,"focus",this._targetFocus),this._on(this.wrapper,"blur",this._targetBlur),this._on(this.wrapper,"keydown",this._OnKeyDown),this._on(this.popupList,"keydown",this._OnKeyDown),this._on(this.popupList,"keyup",this._OnKeyUp),this._on(this.wrapper,"keyup",this._OnKeyUp),this._on(this.popupList,"keypress",this._OnKeyPress),this._on(this.wrapper,"keypress",this._OnKeyPress)},_unwireEvents:function(){this._off(this.wrapper,"focus",this._targetFocus),this._off(this.wrapper,"blur",this._targetBlur),this._off(this.wrapper,"keydown",this._OnKeyDown),this._off(this.popupList,"keydown",this._OnKeyDown),this._off(this.popupList,"keyup",this._OnKeyUp),this._off(this.wrapper,"keyup",this._OnKeyUp),this._off(this.popupList,"keypress",this._OnKeyPress),this._off(this.wrapper,"keypress",this._OnKeyPress),t(window).off("resize",t.proxy(this._OnWindowResize,this))},_multiItemSelection:function(e,t){var i,s;for(this._ulBox||"visualmode"!=this.model.multiSelectMode||this._renderBoxModel(),i=0;i<e.length;i++)s=t?this._rawList.length-(e.length-i):i,this._hasClass(e[i],"chkselect")&&(this._activeItem=s,this._enterTextBoxValue(),this._removeClass(e[i],"chkselect"));this._setWatermark()},_appendCheckbox:function(e,t){var i;for(this._ulBox||"visualmode"!=this.model.multiSelectMode||this._renderBoxModel(),i=0;i<e.length;i++){var s=t?this._rawList.length-(e.length-i):i,l=document.createElement("input"),n=document.createElement("span");this._setAttr(l,{type:"checkbox",name:"list"+s,"data-role":"none",id:this._id+"_check"+s})._setClass(l,"e-check-input")._setAttr(n,{name:"list"+s+"_wrap","data-role":"none",id:this._id+"_check"+s+"wrap",unselectable:"on"})._setClass(n,"e-checkwrap e-icon "),n.appendChild(l),e[i].insertBefore(n,e[i].childNodes[0]),this._hasClass(e[i],"chkselect")&&(this._activeItem=s,this._enterTextBoxValue(),this._removeClass(e[i],"chkselect"))}this._setWatermark()},_onCheckChange:function(e){var i="INPUT"===e.target.nodeName?e.target.parentElement:e.target;this._activeItem=t.inArray(t(i).parents("li")[0],this._getLi()),this._hasClass(i,"e-check-act")?this._removeTextBoxValue():this._enterTextBoxValue()},_isChecked:function(e){return this._hasClass(e,"e-check-act")&&1==t(e).children(".e-check-input")[0].checked},_removeCheck:function(){this._getLi().find(".e-checkwrap").remove()},_resetCheck:function(){var e,t,i=this._getLi();for(i.find(".e-check-act").removeClass("e-check-act").attr("aria-checked",!1),e=i.find(".e-check-input:checked"),t=0;t<e.length;t++)e[t].checked=!1}}),i.DropDownList.Locale=i.DropDownList.Locale||{},i.DropDownList.Locale.default=i.DropDownList.Locale["en-US"]={emptyResultText:"No suggestions",watermarkText:""},i.MultiSelectMode={None:"none",Delimiter:"delimiter",VisualMode:"visualmode"},i.VirtualScrollMode={Normal:"normal",Continuous:"continuous"}}),
/*!
*  filename: ej.dialog.min.js
*  version : 2.4.85
*  Copyright Syncfusion Inc. 2001 - 2020. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
function(e,t,i){t.widget("ejDialog","ej.Dialog",{_rootCSS:"e-dialog",element:null,_ignoreOnPersist:["drag","dragStart","dragStop","resizeStop","resizeStart","resize","beforeClose","beforeOpen","collapse","expand","close","open","destroy","create","ajaxSuccess","ajaxError","contentLoad","actionButtonClick","enableResize"],model:null,validTags:["div","span"],_setFirst:!1,angular:{terminal:!1},defaults:{showOnInit:!0,closeOnEscape:!0,closeIconTooltip:"close",enableAnimation:!0,allowDraggable:!0,backgroundScroll:!0,height:"auto",minHeight:120,minWidth:200,maxHeight:null,maxWidth:null,enableModal:!1,position:{X:"",Y:""},containment:null,enableResize:!0,htmlAttributes:{},showHeader:!0,showFooter:!1,contentType:null,contentUrl:null,ajaxSettings:{type:"GET",cache:!1,data:{},dataType:"html",contentType:"html",async:!0},title:"",width:400,zIndex:1e3,cssClass:"",enableRTL:!1,allowKeyboardNavigation:!0,showRoundedCorner:!1,actionButtons:["close"],animation:{show:{effect:"fade",duration:400},hide:{effect:"fade",duration:400}},tooltip:{close:"Close",collapse:"Collapse",restore:"Restore",maximize:"Maximize",minimize:"Minimize",expand:"Expand",unPin:"UnPin",pin:"Pin"},footerTemplateId:null,locale:"en-US",faviconCSS:null,content:null,target:null,enablePersistence:!1,enabled:!0,isResponsive:!1,actionButtonClick:null,beforeClose:null,close:null,expand:null,collapse:null,beforeOpen:null,open:null,drag:null,dragStart:null,dragStop:null,resize:null,resizeStart:null,resizeStop:null,contentLoad:null,ajaxSuccess:null,ajaxError:null,create:null,destroy:null,Close:null},dataTypes:{showOnInit:"boolean",closeOnEscape:"boolean",enableAnimation:"boolean",backgroundScroll:"boolean",position:"data",animation:"data",closeIconTooltip:"string",tooltip:"data",allowDraggable:"boolean",enableModal:"boolean",enableResize:"boolean",isResponsive:"boolean",showHeader:"boolean",showFooter:"boolean",title:"string",faviconCSS:"string",zIndex:"number",cssClass:"string",enablePersistence:"boolean",contentUrl:"string",contentType:"string",enableRTL:"boolean",enabled:"boolean",allowKeyboardNavigation:"boolean",showRoundedCorner:"boolean",locale:"string",htmlAttributes:"data",ajaxSettings:"data",actionButtons:"array",footerTemplateId:"string"},_setModel:function(i){var s,l;for(s in i)switch(s){case"closeIconTooltip":this._dialogClose.attr("title",i[s]);break;case"tooltip":this._tooltipText(i[s]);break;case"title":this.model.title=i[s],this._ejDialog.find("span.e-title").length<=0?this._addTitleText():this._ejDialog.find("span.e-title").html(i[s]),this._updateCaptionWidth();break;case"width":this.model.width=i[s],this._changeSize(),this._updateCaptionWidth(),i[s]=this.model.width;break;case"height":this.model.height=i[s],this._changeSize(),i[s]=this.model.height;break;case"position":this.model.position=i[s],this._dialogPosition();break;case"cssClass":this._changeSkin(i[s]);break;case"showRoundedCorner":this.model.showRoundedCorner=i[s],this._roundedCorner(i[s]);break;case"contentType":this.model.contentType=i[s],this._appendContent(i[s]);break;case"enabled":this.model.enabled=i[s],this._enabledAction(i[s]);break;case"contentUrl":this.model.contentUrl=i[s],this._appendContent(this.model.contentType);break;case"backgroundScroll":this.model.backgroundScroll=i[s],!this.model.backgroundScroll&&this.model.enableModal?e("body").addClass("e-dialog-modal"):e("body").removeClass("e-dialog-modal");break;case"content":case"target":this._ejDialog.appendTo(e(i[s])),this.model.target=this.model.content=i[s],this._dialogPosition();break;case"containment":this._setDragArea(i[s]),t.isNullOrUndefined(this._target)?this._ejDialog.appendTo(document.body):this._ejDialog.appendTo(this._target),this.model.position.X=this.model.position.Y="",this._dialogPosition(),this.model.containment=i[s]=this._target,this.model.enableModal&&this._createOverlay(),this._dialogTitlebar.ejDraggable({dragArea:this._target});break;case"locale":this.model.locale=i[s],this.localizedLabels=this._getLocalizedLabels(),this._setLocaleCulture(this.localizedLabels,!0),this._tooltipText(this.model.tooltip),this._ejDialog.find("span.e-title").length<=0?this._addTitleText():this._ejDialog.find("span.e-title").html(this.model.title),this._updateCaptionWidth();break;case"minHeight":this.model.minHeight=i[s],this._ejDialog.css("minHeight",i[s]),this._minMaxValidation(),this._resetScroller(),this._resizeDialog();break;case"minWidth":this.model.minWidth=i[s],this._ejDialog.css("minWidth",i[s]),this._minMaxValidation(),this._resetScroller(),this._resizeDialog();break;case"maxHeight":this.model.maxHeight=i[s],this._ejDialog.css("maxHeight",i[s]),this._minMaxValidation(),this._resetScroller(),this._resizeDialog();break;case"maxWidth":this.model.maxWidth=i[s],this._ejDialog.css("maxWidth",i[s]),this._minMaxValidation(),this._resetScroller(),this._resizeDialog();break;case"zIndex":this._ejDialog.css("z-index",i[s]);break;case"faviconCSS":this.model.faviconCSS=i[s],this._favIcon(),this._updateCaptionWidth();break;case"isResponsive":this.model.isResponsive=i[s],this.model.isResponsive?this._ejDialog.addClass("e-dialog-resize"):this._ejDialog.removeClass("e-dialog-resize"),this._wireResizing();break;case"allowDraggable":this.model.allowDraggable=i[s],i[s]?this._enableDrag():this._dialogTitlebar.removeClass("e-draggable");break;case"enableResize":this.model.enableResize=i[s],i[s]?this._enableResize():(this._ejDialog.removeClass("e-resizable"),this._ejDialog.find(".e-resize-handle").remove()),this._reRenderScroller();break;case"showHeader":this.model.showHeader=i[s],i[s]?(this._renderTitleBar(),this._iconsRender(this.model.actionButtons),this.model.faviconCSS&&(this._dialogFavIcon=!1,this._favIcon()),this._enableDrag(),this._maximize||this._updateScroller(t.isNullOrUndefined(this.contentDiv)?this._ejDialog.outerHeight(!0)-1-this._dialogTitlebar.outerHeight(!0):"0px"==this.contentDiv.css("border-width"),t.isNullOrUndefined(this.contentDiv)?this._ejDialog.width()-2:"0px"==this.contentDiv.css("border-width"))):(this._ejDialog.find(".e-titlebar").remove(),this._maximize?this.refresh():this._updateScroller(t.isNullOrUndefined(this.contentDiv)?this._ejDialog.outerHeight(!0)-1:"0px"==this.contentDiv.css("border-width"),t.isNullOrUndefined(this.contentDiv)?this._ejDialog.width()-2:"0px"==this.contentDiv.css("border-width"))),this._roundedCorner(this.model.showRoundedCorner),this.model.showFooter&&this._setContainerSize()._resetScroller();break;case"showFooter":this.model.showFooter=i[s],i[s]?(this._appendContent(),this._ejDialog.find(".e-resizable").remove()):this._ejDialog.find(".e-footerbar").remove(),this._enableResize()._enableDrag()._sizeInPercent(),this._reRenderScroller(),this._setContainerSize()._resetScroller(),this._roundedCorner(this.model.showRoundedCorner);break;case"footerTemplateId":this.model.footerTemplateId=i[s],this.model.showFooter&&(this._ejDialog.find(".e-footerbar").empty(),l=e("body").find("#"+this.model.footerTemplateId).html(),this._dialogFooterbar.append(l),this._enableResize());break;case"enableRTL":this.model.enableRTL=i[s],this.model.faviconCSS&&this._favIcon(),i[s]?(this._ejDialog.addClass("e-rtl"),this.iframe&&this.iframe.contents().find("body").css("direction","rtl"),this.scroller&&this._resetScroller()):(this._ejDialog.removeClass("e-rtl"),this.iframe&&this.iframe.contents().find("body").css("direction","ltr"),this.scroller&&this._resetScroller());break;case"actionButtons":t.isNullOrUndefined(this._dialogTitlebar)||(this._removeAllIcons(),this._iconsRender(i[s])),this.model.actionButtons=i[s],this._updateCaptionWidth();break;case"enableModal":this._enableModal(i[s]);break;case"htmlAttributes":this._addAttr(i[s])}},_destroy:function(){this._overLay&&this._overLay.remove(),this._cloneElement.appendTo(this._ejDialog.parent()),this._ejDialog.remove(),this.model.enableAnimation&&this._ejDialog.stop(),this._cloneElement.removeClass("e-dialog"),this.element=this._cloneElement,this._isOpen=!1,e(window).off("resize",e.proxy(this._reSizeHandler,this))},keyConfigs:[37,38,39,40],_init:function(){this._init=!0,this._widthPercent=null,this._heightPercent=null,this._windowSize={outerWidth:e(window).outerWidth(),outerHeight:e(window).outerHeight()},this._initSize={width:this.model.width,height:this.model.height},this._sizeType={width:isNaN(this.model.width)?this.model.width.match(/px|%|auto/g)[0]:null,height:isNaN(this.model.height)?this.model.height.match(/px|%|auto/g)[0]:null},this._isOpen=this._maximize=this._minimize=!1,this.localizedLabels=this._getLocalizedLabels(),this._setLocaleCulture(this.localizedLabels),this._setDimension(),this.model.close||(this.model.close=this.model.Close),this.model.target||(this.model.target=this.model.content),this._responsive(),this._renderControl(),this._wireEvents(),this.scrObj=this._ejDialog.closest(".e-dialog.e-js").data("ejDialog"),this.scrObj&&this.scrObj._resetScroller(),this.hidden=!1,this._init=!1,this._keyNavigation=!1},_responsive:function(){this.width=this.model.width,e(this.element).width(this.width),this.height=this.model.height,e(this.element).height(this.height),e(window).on("resize",e.proxy(this._resizeHandler,this))},_resizeHandler:function(){this._maximize&&(this.width=e(this._dialogTitlebar).outerWidth(),e(this.contentDiv).width(this.width),e(this.contentDiv).children().width(this.width),this.model.height=this.height=e(window).height(),this._ejDialog.css({height:this.height}),this.contentDiv.height(this._ejDialog.height()-e(this._dialogTitlebar).outerHeight()-e(this._dialogFooterbar).outerHeight()),this.element.height(this.contentDiv.height())),t.isNullOrUndefined(this.element)||this._collapsible||this._resetScroller()},_setLocaleCulture:function(e,t){this.defaults.closeIconTooltip===this.model.closeIconTooltip&&(this.model.closeIconTooltip=e.closeIconTooltip),t&&(this.model.tooltip=this.localizedLabels.tooltip,this.model.title=this.localizedLabels.title),JSON.stringify(this.model.tooltip)===JSON.stringify(this.defaults.tooltip)&&(this.model.tooltip=e.tooltip),this.model.title===this.defaults.title&&(this.model.title=e.title)},_setDragArea:function(i){t.isNullOrUndefined(i)?this._target=null:"string"==typeof i?("parent"==i&&(this._target=e(this.element).parent()),"document"==i.toLowerCase()&&(this._target=e(document)),"window"==i.toLowerCase()?this._target=e(window):e(i).length>0&&(this._target=e(i))):"object"==typeof i?i.length>0&&(this._target=i):this._target=null},_addAttr:function(t){var i=this;e.map(t,function(e,t){if("class"==t)i._ejDialog.addClass(e);else if("disabled"==t&&"disabled"==e)i.model.enabled=!1,i._enabledAction(!1);else if(i._ejDialog[0].hasAttribute("style")){var s=i._ejDialog[0].getAttribute("style")+e;i._ejDialog.attr(t,s)}})},_tooltipText:function(i){e.extend(this.model.tooltip,i),!t.isNullOrUndefined(this._dialogClose)&&this._dialogClose.hasClass("e-close")&&this._dialogClose.attr("title",this.model.tooltip.close),!t.isNullOrUndefined(this._dialogCollapsible)&&(i.collapse||i.expand)&&(this._dialogCollapsible.hasClass("e-arrowhead-up")&&this._dialogCollapsible.attr("title",this.model.tooltip.collapse),this._dialogCollapsible.hasClass("e-arrowhead-down")&&this._dialogCollapsible.attr("title",this.model.tooltip.expand)),!t.isNullOrUndefined(this._dialogMaximize)&&(i.maximize||i.restore)&&(this._dialogMaximize.hasClass("e-maximize")&&this._dialogMaximize.attr("title",this.model.tooltip.maximize),this._dialogMaximize.hasClass("e-restore")&&this._dialogMaximize.attr("title",this.model.tooltip.restore)),!t.isNullOrUndefined(this._dialogMinimize)&&(i.minimize||i.restore)&&(this._dialogMinimize.hasClass("e-minus")&&this._dialogMinimize.attr("title",this.model.tooltip.minimize),this._dialogMinimize.hasClass("e-restore")&&this._dialogMinimize.attr("title",this.model.tooltip.restore)),!t.isNullOrUndefined(this._dialogPin)&&(i.pin||i.unPin)&&(this._dialogPin.hasClass("e-unpin")&&this._dialogPin.attr("title",this.model.tooltip.pin),this._dialogPin.hasClass("e-pin")&&this._dialogPin.attr("title",this.model.tooltip.unPin))},_renderControl:function(){var i,s,l;this._cloneElement=this.element.clone(),this.element.attr("tabindex",0).attr({role:"dialog","aria-labelledby":this.element.prop("id")+"_title"}),this._ejDialog=t.buildTag("div.e-dialog e-widget e-box "+this.model.cssClass+" e-dialog-wrap e-shadow#"+(""==this.element.prop("id")?"":this.element.prop("id")+"_wrapper"),"",{display:"none",zIndex:this.model.zIndex},{tabindex:0}),this.model.isResponsive&&this._ejDialog.addClass("e-dialog-resize"),this.wrapper=this._ejDialog,this._addAttr(this.model.htmlAttributes),this._setDragArea(this.model.containment),t.isNullOrUndefined(this.model.containment)||t.isNullOrUndefined(this._target)?t.isNullOrUndefined(this.model.target)||(i=this.model.target):i=this._target,s=t.isNullOrUndefined(i)?document.body:i,(l=e(s).find("#"+this._id+"_wrapper").get(0))&&e(l).remove(),this._ejDialog.appendTo(s),this.model.enableRTL&&this._ejDialog.addClass("e-rtl"),this.model.showHeader&&(this._renderTitleBar(),this._iconsRender(this.model.actionButtons),this.model.faviconCSS&&this._favIcon()),this._appendContent(this.model.contentType),this._enableResize()._enableDrag()._setSize(),"auto"!=this.model.height&&this._sizeInPercent(),"ajax"!=this.model.contentType&&(this.model.showOnInit&&this.open()?this._setContainerSize()._resetScroller():this._setHiddenDialogSize()),this._roundedCorner(this.model.showRoundedCorner),this._enabledAction(this.model.enabled),"auto"==this._sizeType.width&&(this._maxWidth=this.model.width),"auto"==this._sizeType.height&&(this._maxHeight=this.model.height)},_setContainerSize:function(){if("auto"!=this.model.height){var t=this._ejDialog.outerHeight()-(this.model.showHeader?e(this._ejDialog.find("div.e-titlebar")).outerHeight(!0):0)+(this.model.showFooter?e(this._ejDialog.find("div.e-footerbar")).outerHeight(!0):0)-1;this.contentDiv.height(t),this.element.outerHeight(t)}return this},_changeSize:function(){this._initSize={width:this.model.width,height:this.model.height},this._sizeType.width=isNaN(this.model.width)?this.model.width.match(/px|%|auto/g):null,this._sizeType.height=isNaN(this.model.height)?this.model.height.match(/px|%|auto/g):null,this._setSize()._sizeInPercent()._setContainerSize()._resetScroller()},_enableDrag:function(){return this.model.allowDraggable&&this.model.showHeader&&(this._dialogTitlebar.addClass("e-draggable"),this._dragDialog()),this},_enableResize:function(){if(this.model.enableResize){this._ejDialog.addClass("e-resizable");var e=t.buildTag("div.e-icon e-resize-handle");this.model.showFooter?e.appendTo(this._dialogFooterbar):e.appendTo(this._ejDialog),this._resizeDialog()}return this},_changeSkin:function(e){this.model.cssClass!=e&&this._ejDialog.removeClass(this.model.cssClass).addClass(e)},_enableModal:function(e){e?this._isOpen&&this._createOverlay():this._overLay&&this._overLay.remove()},_enabledAction:function(e){e?(this._ejDialog.removeClass("e-disable"),this.wrapper.children(".e-disable-overlay").remove(),t.isNullOrUndefined(this.scroller)||this.scroller.enable()):(this._ejDialog.addClass("e-disable"),t.buildTag("div.e-disable-overlay").appendTo(this.wrapper),t.isNullOrUndefined(this.scroller)||this.scroller.disable())},_renderTitleBar:function(){this._elementTitle=this.element.attr("title"),"string"!=typeof this._elementTitle&&(this._elementTitle=""),this.model.title=this.model.title||this._elementTitle,this._dialogTitlebar=t.buildTag("div#"+this.element.prop("id")+"_title.e-titlebar e-header e-dialog").prependTo(this._ejDialog),this._addTitleText()},_renderFooterBar:function(){this._dialogFooterbar=t.buildTag("div#"+this.element.prop("id")+"_foot.e-footerbar e-dialog e-js").appendTo(this._ejDialog)},_addTitleText:function(){return this.model.title&&(this._titleText=t.buildTag("span.e-title",this.model.title).prependTo(this._dialogTitlebar)),this},_updateCaptionWidth:function(){var e=this.model.faviconCSS&&!t.isNullOrUndefined(this._dialogFavIcon)?this._dialogFavIcon.outerWidth():0;return this._titleText&&!t.isNullOrUndefined(this._dialogTitlebar)&&this._titleText.css("max-width",this._dialogTitlebar.width()-20-this._dialogTitlebar.find(".e-dialog-icon").width()*this._dialogTitlebar.find(".e-dialog-icon").length-e),this},_iconsRender:function(i){for(var s=0;s<i.length;s++)switch("msie"==t.browserInfo().name&&t.browserInfo().version<=8?e.trim(i[s]):i[s].trim()){case"close":this._closeIcon();break;case"collapse":case"collapsible":this._collapsibleIcon();break;case"maximize":this._maximizeIcon();break;case"minimize":this._minimizeIcon();break;case"pin":this._pinIcon();break;default:this._customIconsRender(i[s])}},_customIconsRender:function(e){this._customIcon=t.util.buildTag("div#"+this.element[0].id+"_"+e+"button.e-dialog-icon e-icon e-"+e,null,null).attr("tabIndex","0").attr("title",e),this._customIcon.appendTo(this._dialogTitlebar),this._on(this._customIcon,"touchstart click",this._iconClick)},_iconClick:function(t){if(!this.element.hasClass("e-disable")){var i={cancel:!1,buttonID:e(t.target).attr("id"),event:t.type,model:this.model,currentTarget:t.currentTarget.title};this._trigger("actionButtonClick",i)}},_removeAllIcons:function(){this._dialogTitlebar.find("div.e-dialog-icon").remove()},_appendContent:function(i){var s,l,n,o,a;this.contentDiv=t.isNullOrUndefined(this.contentDiv)?t.buildTag("div.e-dialog-scroller"):this.contentDiv,this.element.removeAttr("title").addClass("e-widget-content e-box"),s=this,t.isNullOrUndefined(this.model.contentUrl)||t.isNullOrUndefined(i)?(this.dialogIframeContent=this.element.children().find("iframe").contents()[0],t.isNullOrUndefined(this.dialogIframeContent)?this.element.show().appendTo(this.contentDiv):this.element.show().appendTo(this.contentDiv).find("iframe").append(this.dialogIframeContent.lastChild)):"ajax"==i?(this.model.ajaxSettings.url=this.model.contentUrl,this._sendAjaxOptions(this.element,this.model.ajaxSettings.url)):"iframe"==i?(this.element.children(".e-iframe").length>0?(this.iframe=this.element.find("iframe.e-iframe"),this.iframe.attr("src",this.model.contentUrl)):(this.iframe=t.buildTag("iframe.e-iframe","",{width:"100%",height:"100%"},{scrolling:"auto",frameborder:0,src:this.model.contentUrl}),this.element.appendTo(this.contentDiv).append(this.iframe).show()),this.model.enableRTL&&e(this.iframe).load(function(){s.iframe.contents().find("body").css("direction","rtl")}),this._trigger("contentLoad",{contentType:i,url:this.model.contentUrl})):"image"==i?(l=t.buildTag("img.e-images","","",{src:this.model.contentUrl}),this.element.append(l).show().appendTo(this.contentDiv),e(l).on("load",function(){s._dialogPosition()}),this._trigger("contentLoad",{contentType:i,url:this.model.contentUrl})):this.element.show().appendTo(this.contentDiv),this._ejDialog.find("div.e-resize-handle").length>0?0==this._ejDialog.find(".e-footerbar").length&&this.contentDiv.insertBefore(this._ejDialog.find("div.e-resize-handle")):(n=this.element.children().find("iframe").contents()[0],t.isNullOrUndefined(n)?0==this._ejDialog.find(".e-footerbar").length?this.contentDiv.appendTo(this._ejDialog):this.contentDiv.insertBefore(this._dialogFooterbar):(this.contentDiv.appendTo(this._ejDialog),o=e("#"+this.contentDiv.find("iframe").attr("id")),e(o[0].contentDocument.lastChild).remove(),o[0].contentDocument.appendChild(n),"mozilla"==t.browserInfo().name&&setTimeout(function(){e(o[0].contentDocument.lastChild).remove(),o[0].contentDocument.appendChild(n)},500))),this.model.showFooter&&0==this._ejDialog.find(".e-footerbar").length&&(this._renderFooterBar(),null!=this.model.footerTemplateId&&(a=e("body").find("#"+this.model.footerTemplateId).html(),this._dialogFooterbar.append(a)))},_roundedCorner:function(e){this._ejDialog[e?"addClass":"removeClass"]("e-corner"),this.contentDiv.removeClass("e-dialog-top e-dialog-bottom e-dialog-content"),this.model.showRoundedCorner&&(this.model.showHeader&&!this.model.showFooter?this.contentDiv.addClass("e-dialog-bottom"):!this.model.showHeader&&this.model.showFooter?this.contentDiv.addClass("e-dialog-top"):this.model.showHeader||this.model.showFooter||this.contentDiv.addClass("e-dialog-content"))},_reRenderScroller:function(){if(null!=this.scroller&&(this.scroller.refresh(!0),!this.model.enableRTL)){if(this.scroller._vScrollbar&&this.scroller._vScrollbar._scrollData&&this.model.enableResize){if(this.model.showFooter)var e=this.scroller._vScrollbar.element.find("> div.e-vscroll").height(),t=0,i=0;else e=this.scroller._vScrollbar.element.find("> div.e-vscroll").height(),t=2,i=this._ejDialog.find("div.e-resize-handle").outerHeight();Math.floor(this.contentDiv.outerHeight())===Math.floor(this.scroller._vScrollbar.model.height+1)&&(this.scroller._vScrollbar.model.height-=i+t,this.scroller._vScrollbar._scrollData.handle-=i,this.scroller._vScrollbar._scrollData.handleSpace-=i+t,this.scroller._vScrollbar._updateLayout(this.scroller._vScrollbar._scrollData),this.scroller._vScrollbar.element.find("> div.e-vscroll").height(e-i-t))}if((!this.scroller._vScrollbar||!this.scroller._vScrollbar._scrollData)&&this.scroller._hScrollbar&&this.scroller._hScrollbar._scrollData&&this.model.enableResize){if(this.model.showFooter){var s=this.scroller._hScrollbar.element.find("> div.e-hscroll").width();t=0,i=0}else s=this.scroller._hScrollbar.element.find("> div.e-hscroll").width(),t=2,i=this._ejDialog.find("div.e-resize-handle").outerWidth();this.scroller._hScrollbar.model.width-=i+t,this.scroller._hScrollbar._scrollData.handle-=i+t,this.scroller._hScrollbar._scrollData.handleSpace-=i+t,this.scroller._hScrollbar._updateLayout(this.scroller._hScrollbar._scrollData),this.scroller._hScrollbar.element.find("> div.e-hscroll").width(s-i-t)}}},_dialogMaxZindex:function(){var t,i,s,l=this.element.parents();return t=e("body").children(),e(t).each(function(e,t){l.push(t)}),i=e(this.model.target).children(),e(i).each(function(e,t){l.push(t)}),!(s=Math.max.apply(s,e.map(l,function(t){if("static"!=e(t).css("position"))return parseInt(e(t).css("z-index"))||1})))||s<1e4?s=1e4:s+=1,s},_setZindex:function(){var e=this._dialogMaxZindex();this.model.zIndex<=e&&this._ejDialog.css({zIndex:e+1})},_createOverlay:function(){var i,s=this._ejDialog.css("zIndex");t.isNullOrUndefined(this._overLay)||this._overLay.remove(),this.model.backgroundScroll||e("body").addClass("e-dialog-modal"),this._overLay=t.buildTag("div#"+this.element.attr("id")+"_overLay.e-overlay","",{zIndex:s-1}),e(this._overLay).addClass("e-widget"),t.isNullOrUndefined(this.model.containment)||t.isNullOrUndefined(this._target)?t.isNullOrUndefined(this.model.target)||(i=this.model.target):i=this._target,this._overLay.appendTo(t.isNullOrUndefined(i)?document.body:i);var l=t.isNullOrUndefined(this.model.containment)||t.isNullOrUndefined(this._target)?"fixed":"absolute",n=t.isNullOrUndefined(i)||"fixed"==l||"static"!=e(i).css("position").toLowerCase()?0:e(i).offset().left,o=t.isNullOrUndefined(i)||"fixed"==l||"static"!=e(i).css("position").toLowerCase()?0:e(i).offset().top;this._overLay.css({top:o,left:n,position:l})},_sendAjaxOptions:function(t,i){t.addClass("e-load");var s=this,l=this.model.title,n={success:function(e){try{s._ajaxSuccessHandler(e,t,i,l)}catch(e){}},error:function(e){try{s._ajaxErrorHandler({status:e.status,responseText:e.responseText,statusText:e.statusText},t,i,l)}catch(e){}},complete:function(){try{s._setContainerSize(),s._resetScroller(),s.model.showOnInit||s._setHiddenDialogSize()}catch(e){}}};e.extend(!0,n,this.model.ajaxSettings),this._sendAjaxRequest(n)},_setHiddenDialogSize:function(){this._isOpen||(this._ejDialog.css({display:"block",visibility:"hidden"}),this._setContainerSize()._resetScroller(),this._ejDialog.css({display:"none",visibility:""}))},_sendAjaxRequest:function(t){e.ajax({type:t.type,cache:t.cache,url:t.url,dataType:t.dataType,data:t.data,contentType:t.contentType,async:t.async,success:t.success,error:t.error,beforeSend:t.beforeSend,complete:t.complete})},_ajaxSuccessHandler:function(e,t,i){t.removeClass("e-load"),t.html(e).addClass("e-dialog-loaded").appendTo(this._ejDialog),t.appendTo(this.contentDiv),this._dialogPosition(),this.model.showOnInit&&this.open(),this._trigger("ajaxSuccess",{data:e,url:i})},_ajaxErrorHandler:function(e,t,i){t.addClass("e-dialog-loaded").appendTo(this.contentDiv),this._dialogPosition().open(),this._trigger("ajaxError",{data:e,url:i})},_closeIcon:function(){this._dialogClose=t.util.buildTag("div#"+this.element[0].id+"_closebutton.e-dialog-icon e-icon e-close",null,null).attr("tabIndex","0"),"close"==this.model.closeIconTooltip&&"Close"==this.model.tooltip.close?this._dialogClose.appendTo(this._dialogTitlebar).attr("title",this.model.tooltip.close):"close"!=this.model.closeIconTooltip&&"Close"==this.model.tooltip.close?this._dialogClose.appendTo(this._dialogTitlebar).attr("title",this.model.closeIconTooltip):("close"==this.model.closeIconTooltip&&this.model.tooltip.close,this._dialogClose.appendTo(this._dialogTitlebar).attr("title",this.model.tooltip.close)),this._on(this._dialogClose,"touchstart click",this._closeClick)},_collapsibleIcon:function(){this._dialogCollapsible=t.util.buildTag("div#"+this.element[0].id+"_collapsbutton.e-dialog-icon e-icon",null,null).attr("tabIndex","0"),this._collapsible?this._dialogCollapsible.appendTo(this._dialogTitlebar).attr("title",this.model.tooltip.expand).addClass("e-arrowhead-down").removeClass("e-arrowhead-up"):this._dialogCollapsible.appendTo(this._dialogTitlebar).attr("title",this.model.tooltip.collapse).addClass("e-arrowhead-up").removeClass("e-arrowhead-down"),this._on(this._dialogCollapsible,"touchstart click",this._collapsibleClick)},_maximizeIcon:function(){this._dialogMaximize=t.util.buildTag("div#"+this.element[0].id+"_maximizebutton.e-dialog-icon e-icon",null,null).attr("tabIndex","0"),this._maximize?this._dialogMaximize.appendTo(this._dialogTitlebar).attr("title",this.model.tooltip.restore).addClass("e-restore").removeClass("e-maximize"):this._dialogMaximize.appendTo(this._dialogTitlebar).attr("title",this.model.tooltip.maximize).addClass("e-maximize").removeClass("e-restore"),this._on(this._dialogMaximize,"touchstart click",this._maximizeClick)},_minimizeIcon:function(){this._dialogMinimize=t.util.buildTag("div#"+this.element[0].id+"_minimizebutton.e-dialog-icon e-icon",null,null).attr("tabIndex","0"),this._minimize?this._dialogMinimize.appendTo(this._dialogTitlebar).attr("title",this.model.tooltip.restore).addClass("e-restore").removeClass("e-minus"):this._dialogMinimize.appendTo(this._dialogTitlebar).attr("title",this.model.tooltip.minimize).addClass("e-minus").removeClass("e-restore"),this._on(this._dialogMinimize,"touchstart click",this._minimizeClick)},_pinIcon:function(){this._dialogPin=t.util.buildTag("div#"+this.element[0].id+"_pinbutton.e-dialog-icon e-icon",null,null).attr("tabIndex","0"),this._dialogPin.appendTo(this._dialogTitlebar).attr("title",this.dialogPin?this.model.tooltip.unPin:this.model.tooltip.pin).addClass(this.dialogPin?"e-pin":"e-unpin").removeClass(this.dialogPin?"e-unpin":"e-pin"),this._on(this._dialogPin,"touchstart click",this._pinClick)},_favIcon:function(){if(this._dialogFavIcon)e=this._dialogFavIcon.find("span").removeClass().addClass("e-dialog-custom");else{this._dialogFavIcon=t.util.buildTag("div.e-dialog-favicon","",{},{style:"float:"+(this.model.enableRTL?"right":"left")});var e=t.util.buildTag("span.e-dialog-custom","",{},{role:"presentation"});e.appendTo(this._dialogFavIcon),this._dialogFavIcon.appendTo(this._dialogTitlebar)}this.model.faviconCSS?e.addClass(this.model.faviconCSS):this._dialogFavIcon.remove(),this._dialogFavIcon.css("float",this.model.enableRTL?"right":"left")},_minMaxValidation:function(){var e=parseInt(this.model.minWidth),t=parseInt(this.model.minHeight),i=parseInt(this.model.maxWidth),s=parseInt(this.model.maxHeight),l=parseInt(this.model.width),n=parseInt(this.model.height),o=this._getParentObj();isNaN(this.model.minWidth)&&this.model.minWidth.indexOf("%")>0&&(e=this._convertPercentageToPixel(o.outerWidth(),e)),isNaN(this.model.minHeight)&&this.model.minHeight.indexOf("%")>0&&(t=this._convertPercentageToPixel(o.outerHeight(),t)),isNaN(this.model.maxWidth)&&this.model.maxWidth.indexOf("%")>0&&(i=this._convertPercentageToPixel(o.innerWidth(),i)),isNaN(this.model.maxHeight)&&this.model.maxHeight.indexOf("%")>0&&(s=this._convertPercentageToPixel(o.innerHeight(),s)),isNaN(this.model.width)&&this.model.width.indexOf("%")>0&&(l=this._convertPercentageToPixel(o.innerWidth(),l)),isNaN(this.model.height)&&this.model.height.indexOf("%")>0&&(n=this._convertPercentageToPixel(o.innerHeight(),n)),(i&&l>i||e&&l<e)&&(this.model.width=l>i?i:e),(s&&n>s||t&&n<t)&&(this.model.height=n>s?s:t)},_setSize:function(){var e=this.model;return this._minMaxValidation(),this._ejDialog.css({width:e.width,minWidth:e.minWidth,maxWidth:e.maxWidth}),this._ejDialog.css({height:e.height,minHeight:e.minHeight,maxHeight:e.maxHeight}),this._dialogPosition(),this},_resetScroller:function(){this.element.css({height:"auto","max-width":"","max-height":"",width:""});var i,s=this._ejDialog.outerHeight(!0)-(this.model.showHeader?e(this._ejDialog.find("div.e-titlebar")).outerHeight(!0):0)-(this.model.showFooter?e(this._ejDialog.find("div.e-footerbar")).outerHeight(!0):0),l={width:"0px"==this.contentDiv.css("border-width")||"0px"==this.contentDiv.css("border-left-width")?Math.round(this._ejDialog.width()):Math.round(this._ejDialog.width()-2),enableRTL:this.model.enableRTL,height:"0px"==this.contentDiv.css("border-width")?s:s-1,enableTouchScroll:!1};"auto"==this.model.height&&(this.element.height()<this.model.maxHeight||!this.model.maxHeight)&&!this._maximize&&(l.height="auto"),"auto"!=this.model.width||this._maximize||(l.width=this.model.width),this.contentDiv.ejScroller(l),this.scroller=this.contentDiv.data("ejScroller"),this._reRenderScroller(),this._padding=parseInt(e(this.element).css("padding-top"))+parseInt(e(this.element).css("padding-bottom")),"none"==e(this._ejDialog).css("display")&&(this.hidden=!0,this._ejDialog.css({display:"block"})),!t.isNullOrUndefined(this.contentDiv.height())&&this.contentDiv.height()>0&&(i=t.isNullOrUndefined(this.scroller)?this.contentDiv.outerHeight()-this._padding:!this.scroller._hScrollbar&&this.scroller._vScrollbar?this.contentDiv.outerHeight():this.scroller._hScrollbar?this.contentDiv.outerHeight()-this.scroller.model.buttonSize:this.contentDiv.outerHeight(),"auto"!=this.model.height&&"100%"!=this.model.height?this.element.css({height:i-1}):this.element.css("height",this.model.height),"auto"!=this.model.height&&"100%"!=this.model.height||this.scroller._vScrollbar||this.element.css({"min-height":this.model.minHeight-(this.model.showHeader?e(this._ejDialog.find("div.e-titlebar")).outerHeight(!0):0)}),this.scroller._vScrollbar||"auto"==this.model.width||"100%"==this.model.width?this.scroller._vScrollbar||this.element.css("width",this.model.width):this.element.outerWidth("0px"==this.contentDiv.css("border-width")||"0px"==this.contentDiv.css("border-left-width")?this._ejDialog.width():this._ejDialog.width()-2),this.element.css({"max-width":this.model.maxWidth,"max-height":this.model.maxHeight})),this.hidden&&this._ejDialog.css({display:"none"}),this.hidden=!1},_updateScroller:function(e,t){this.contentDiv.ejScroller({width:t,height:e,enableRTL:this.model.enableRTL,enableTouchScroll:!1}),this.scroller=this.contentDiv.data("ejScroller"),this._reRenderScroller(),this._changeSize()},_dragDialog:function(){var i=this;this._ejDialog.parents(".e-dialog-scroller");return this._dialogTitlebar.ejDraggable({handle:".e-titlebar",cursorAt:{top:0,left:0},dragArea:i._target,dragStart:function(e){return e.element.attr("aria-grabbed",!0),i._clickHandler(),!i.dialogPin&&i.model.allowDraggable&&i.model.enabled?i._trigger("dragStart",{event:e})?(e.cancel=!0,!1):void 0:(e.cancel=!0,!1)},drag:function(e){i._trigger("drag",{event:e})},dragStop:function(s){var l,n;i._ejDialog.focus(),s.element.attr("aria-grabbed",!1),i.element.find("> .e-draggable.e-titlebar")&&((l=e("#"+i.element.find("> .e-draggable.e-titlebar").attr("id")).data("ejDraggable"))&&l.option("cursorAt",i.element.offset())),n=this.helper.offsetParent().offset(),i._trigger("dragStop",{event:s}),i.model.position.X=t.isNullOrUndefined(this.position.left)?parseInt(this.helper.css("left")):this.position.left-[n.left+parseFloat(this.helper.offsetParent().css("border-left-width"))],i.model.position.Y=t.isNullOrUndefined(this.position.top)?parseInt(this.helper.css("top")):this.position.top-[n.top+parseFloat(this.helper.offsetParent().css("border-top-width"))],i._positionChanged=!0,i.dlgresized=!0},helper:function(){return e(i._ejDialog).addClass("dragClone")}}),this},_resizeDialog:function(){if(this.model.enableResize){var t,i=this,s=!1,l=parseInt(this.model.minWidth),n=parseInt(this.model.minHeight),o=parseInt(this.model.maxWidth),a=parseInt(this.model.maxHeight);return t=this._getParentObj(),isNaN(this.model.minWidth)&&this.model.minWidth.indexOf("%")>0&&(l=this._convertPercentageToPixel(t.outerWidth(),l)),isNaN(this.model.minHeight)&&this.model.minHeight.indexOf("%")>0&&(n=this._convertPercentageToPixel(t.outerHeight(),n)),isNaN(this.model.maxWidth)&&this.model.maxWidth.indexOf("%")>0&&(o=this._convertPercentageToPixel(t.innerWidth(),o)),isNaN(this.model.maxHeight)&&this.model.maxHeight.indexOf("%")>0&&(a=this._convertPercentageToPixel(t.innerHeight(),a)),this._ejDialog.find("div.e-resize-handle").ejResizable({minHeight:n,minWidth:l,maxHeight:a,maxWidth:o,handle:"e-widget-content",resizeStart:function(e){if(i.dlgresized=!0,!i.model.enabled)return!1;s||i._trigger("resizeStart",{event:e}),s=!0,i.model.position={X:i._ejDialog.css("left"),Y:i._ejDialog.css("top")},i._dialogPosition()},resize:function(t){i.dlgresized=!0;var s=e(t.element).parents("div.e-dialog-wrap");i.model.height=e(s).outerHeight(),i.model.width=e(s).outerWidth(),i._setSize(),i._setContainerSize(),i._resetScroller(),i._updateCaptionWidth(),i._trigger("resize",{event:t}),i._sizeType={width:"px",height:"px"},this.scrObj&&this.scrObj._resetScroller()},resizeStop:function(t){i.dlgresized=!0,i._ejDialog.focus(),i._sizeInPercent();var l=e(t.element).parents("div.e-dialog-wrap");i.model.height=e(l).outerHeight(),i.model.width=e(l).outerWidth(),i._setSize(),i._setContainerSize(),i._resetScroller(),s&&i._trigger("resizeStop",{event:t}),s=!1,i._setDimension()},helper:function(){return e(i._ejDialog)}}),this}},_dialogPosition:function(){if(this._ejDialog.parents("form").length>0&&t.isNullOrUndefined(this.model.containment)&&t.isNullOrUndefined(this.model.target)&&this._ejDialog.appendTo(this._ejDialog.parents("form")),""!=this.model.position.X||""!=this.model.position.Y)if(this._ejDialog.css("position","absolute"),t.isNullOrUndefined(this.model.target)&&t.isNullOrUndefined(this.model.containment))this._ejDialog.css("left",this.model.position.X),this._ejDialog.css("top",this.model.position.Y);else{var i=t.isNullOrUndefined(this.model.containment)?this.model.target:this.model.containment;this.dlgresized||this._keyNavigation?(this._ejDialog.css("left",this.model.position.X),this._ejDialog.css("top",this.model.position.Y)):(this._ejDialog.css("left",e(i).offset().left+parseInt(this.model.position.X)),this._ejDialog.css("top",e(i).offset().top+parseInt(this.model.position.Y)))}else this._centerPosition();return this},_centerPosition:function(){var i,s,l,n,o=0,a=0;t.isNullOrUndefined(this.model.target)&&(t.isNullOrUndefined(this._target)||e(this._target).is(e(document))||e(this._target).is(e(window)))?(n=document.documentElement,o=(e(window).outerWidth()>this._ejDialog.width()?(e(window).outerWidth()-this._ejDialog.outerWidth())/2:0)+(window.pageXOffset||n.scrollLeft),a=(e(window).outerHeight()>this._ejDialog.height()?(e(window).outerHeight()-this._ejDialog.outerHeight())/2:0)+(window.pageYOffset||n.scrollTop)):("static"==(i=t.isNullOrUndefined(this._target)?e(this.model.target):e(this._target)).css("position")&&(s=i.offsetParent().offset(),o=(l=i.offset()).left-s.left,a=l.top-s.top),i.outerWidth()>this._ejDialog.width()&&(o+=(i.outerWidth()-this._ejDialog.width())/2),i.outerHeight()>this._ejDialog.height()&&(a+=(i.outerHeight()-this._ejDialog.height())/2)),this._ejDialog.css({top:a,left:o}),this._ejDialog.css("position","absolute")},_closeClick:function(e){"touchstart"==e.type&&e.preventDefault(),this.model.enabled&&(e.stopPropagation(),this.close(e))},_collapsibleClick:function(t){this.model.enabled&&(e(t.target).hasClass("e-arrowhead-up")?this._actionCollapse(t):e(t.target).hasClass("e-arrowhead-down")&&this._actionExpand(t))},_actionCollapse:function(e){this._minimize||(this._dialogCollapsible&&this._dialogCollapsible.removeClass("e-arrowhead-up").addClass("e-arrowhead-down"),this._dialogCollapsible&&this._dialogCollapsible.attr("title",this.model.tooltip.expand),this._ejDialog.find("div.e-resize-handle").hide(),this._ejDialog.find(".e-widget-content").parent().slideUp("fast"),this.model.showFooter&&this._dialogFooterbar.slideUp("fast"),this._ejDialog.removeClass("e-shadow"),this._ejDialog.css("minHeight","0"),this._ejDialog.height("auto"),this._trigger("collapse",{isInteraction:!!e}),this._collapsible=!0)},_actionExpand:function(e){this._minimize||(this._dialogCollapsible&&this._dialogCollapsible.removeClass("e-arrowhead-down").addClass("e-arrowhead-up"),this._dialogCollapsible&&this._dialogCollapsible.attr("title",this.model.tooltip.collapse),this._ejDialog.addClass("e-shadow"),this._ejDialog.find(".e-widget-content").parent().slideDown("fast"),this.model.showFooter&&this._dialogFooterbar.slideDown("fast"),this._maximize?(this._ejDialog.css({width:"100%",height:"100%"}),this.element.css({width:"100%",height:"100%"}),this.contentDiv.css({width:"100%",height:"100%"})):this._ejDialog.height(this.model.height),this._ejDialog.find("div.e-resize-handle").show(),this._trigger("expand",{isInteraction:!!e}),this._collapsible=!1)},_maximizeClick:function(i){if(this.model.enabled){var s=e(i.target),l=this._dialogMaximize;s.hasClass("e-maximize")?(this._actionMaximize(),this._dialogTitlebar&&(this._dialogTitlebar.find(".e-restore").removeClass("e-restore").addClass("e-minus"),this._dialogMinimize&&this._dialogMinimize.attr("title",this.model.tooltip.minimize)),s.removeClass("e-maximize").addClass("e-restore"),this._dialogMaximize.attr("title",this.model.tooltip.restore),this._hideIcon(!0)):s.hasClass("e-restore")&&(this._actionRestore(),s.removeClass("e-restore").addClass("e-maximize"),this._dialogMaximize.attr("title",this.model.tooltip.maximize),!t.isNullOrUndefined(l)&&e(l).hasClass("e-arrowhead-down")&&(e(l).removeClass("e-arrowhead-down").addClass("e-arrowhead-up"),this._dialogMaximize.attr("title",this.model.tooltip.collapse)),this._hideIcon(!0))}this._resetScroller()},_actionMaximize:function(){this._ejDialog.css("top","0px").css("left","0px").css("overflow","hidden").css("position",this.model.containment||this.model.target?"absolute":"fixed"),this._ejDialog.css({width:"100%",height:"100%"}),this.element.css({width:"100%",height:"100%"}),this.contentDiv.css({width:"100%",height:"100%"}),this._maximize=!0,this._minimize=!1;var i=this;this._dialogCollapsible&&!t.isNullOrUndefined(this._dialogCollapsible.hasClass("e-arrowhead-down"))&&(this._dialogCollapsible.removeClass("e-arrowhead-down").addClass("e-arrowhead-up"),this._dialogCollapsible.attr("title",this.model.tooltip.collapse),this._collapseValue=!0),1==this._collapseValue&&this._ejDialog.find(".e-widget-content").parent().slideDown("fast",function(){i.refresh(),i._reRenderScroller()}),this._resetScroller(),e(this.contentDiv).is(":hidden")&&this.contentDiv.show()},_actionRestore:function(){this.element.height("").width(""),this.contentDiv.height("").width(""),this._restoreDialog(),this._maximize=this._minimize=!1},_minimizeClick:function(i){if(this.model.enabled){var s=e(i.target),l=this._dialogMinimize.hasClass("e-icon")&&this._dialogMinimize;s.hasClass("e-minus")?(this._maximize&&this._setSize(),this._actionMinimize()):s.hasClass("e-restore")&&(this._actionRestore(),s.removeClass("e-restore").addClass("e-minus"),this._dialogMinimize.attr("title",this.model.tooltip.minimize),!t.isNullOrUndefined(l)&&e(l).hasClass("e-arrowhead-down")&&(e(l).removeClass("e-arrowhead-down").addClass("e-arrowhead-up"),this._dialogMinimize.attr("title",this.model.tooltip.collapse)),this._hideIcon(!0))}},_actionMinimize:function(){var t;e(window).height(),this._ejDialog.height(),this.element.height();this._ejDialog.css("top","").css("bottom","0").css("left","0").css("position",this.model.containment||this.model.target?"absolute":"fixed"),this._ejDialog.css("minHeight","0"),this._dialogTitlebar?(this._dialogTitlebar.find(".e-restore").removeClass("e-restore").addClass("e-maximize"),this._dialogMaximize&&this._dialogMaximize.attr("title",this.model.tooltip.maximize),this._dialogTitlebar.find(".e-minus").removeClass("e-minus").addClass("e-restore"),this._dialogMinimize&&this._dialogMinimize.attr("title",this.model.tooltip.restore),this._isOpen?t=this._dialogTitlebar.outerHeight():(this._ejDialog.css({display:"block",visibility:"hidden"}),t=this._dialogTitlebar.outerHeight(),this._ejDialog.css({display:"none",visibility:""})),this._ejDialog.css("height",t+2),this._hideIcon(!1)):this._ejDialog.css("height",""),this.contentDiv.hide(),this.model.showFooter&&this._dialogFooterbar.hide(),this._maximize=!1,this._minimize=!0},_hideIcon:function(i){var s=this._dialogCollapsible?this._dialogCollapsible:null;i?(t.isNullOrUndefined(s)||e(s).parent(".e-dialog-icon").show(),this._ejDialog.find("div.e-resize-handle").show()):(t.isNullOrUndefined(s)||e(s).parent(".e-dialog-icon").hide(),this._ejDialog.find("div.e-resize-handle").hide())},_pinClick:function(t){if(this.model.enabled){var i=e(t.target);i.hasClass("e-unpin")?(this.dialogPin=!0,i.removeClass("e-unpin").addClass("e-pin"),this._dialogPin.attr("title",this.model.tooltip.unPin)):i.hasClass("e-pin")&&(this.dialogPin=!1,i.removeClass("e-pin").addClass("e-unpin"),this._dialogPin.attr("title",this.model.tooltip.pin))}},_restoreDialog:function(){this.contentDiv.show(),this.model.showFooter&&this._dialogFooterbar.show(),this._ejDialog.css({position:"absolute",bottom:""}).addClass("e-shadow"),this._setSize()._resetScroller(),this._dialogTitlebar&&(this._dialogTitlebar.find(".e-minus").parent().show(),this._dialogCollapsible&&(this._dialogCollapsible.removeClass("e-arrowhead-down").addClass("e-arrowhead-up"),this._dialogCollapsible.attr("title",this.model.tooltip.collapse)))},_clickHandler:function(){var e=this._dialogMaxZindex();parseInt(this._ejDialog.css("zIndex"))<e&&this._ejDialog.css({zIndex:e+1})},_mouseClick:function(t){t.currentTarget==this._id&&(e(t.target).hasClass("e-dialog")||e(t.target).hasClass("e-icon e-resize-handle"))&&(this._setZindex(),e(t.target).closest(".e-dialog.e-widget").focus())},_keyDown:function(t){var i;i=t.keyCode?t.keyCode:t.which?t.which:t.charCode,this.model.allowKeyboardNavigation&&this.model.enabled&&e(t.target).hasClass("e-dialog")&&e.inArray(i,this.keyConfigs)>-1&&this.model.allowDraggable&&!this.dialogPin&&(this._keyPressed(i,t.ctrlKey),t.preventDefault()),this.model.closeOnEscape&&27===i&&this.model.enabled&&(this.element.find(".e-js.e-dialog").first().is(":visible")||(this.close(t),t.preventDefault())),13===i&&this.model.enabled&&(e(t.target).hasClass("e-close")?this.close(t):(e(t.target).hasClass("e-arrowhead-up")||e(t.target).hasClass("e-arrowhead-down"))&&this._collapsibleClick(t),e(t.target).hasClass("e-maximize")||e(t.target).hasClass("e-restore")&&e(t.target).is(this._dialogMaximize)?this._maximizeClick(t):(e(t.target).hasClass("e-minus")||e(t.target).hasClass("e-restore")&&e(t.target).is(this._dialogMinimize))&&this._minimizeClick(t),(e(t.target).hasClass("e-pin")||e(t.target).hasClass("e-unpin"))&&this._pinClick(t)),9==i&&this.model.enableModal&&this._focusOnTab(t)},_focusOnTab:function(t){var i=this._ejDialog.find("a, button, :input, select, [tabindex]:not('-1')");i=e(i).find("a, button, :input, select, [tabindex]:not('')"),t.shiftKey?i[i.index(t.target)-1]||(t.preventDefault(),i.last().focus()):i[i.index(t.target)+1]||(t.preventDefault(),i[0].focus())},_keyPressed:function(e,t){switch(this._keyNavigation=!0,e){case 40:t?this._resizing("height",this._ejDialog.outerHeight()+3):this.option("position",{X:this._ejDialog.position().left,Y:this._ejDialog.position().top+3});break;case 39:t?this._resizing("width",this._ejDialog.outerWidth()+3):this.option("position",{X:this._ejDialog.position().left+3,Y:this._ejDialog.position().top});break;case 38:t?this._resizing("height",this._ejDialog.outerHeight()-3):this.option("position",{X:0==this._ejDialog.position().left?0:this._ejDialog.position().left,Y:this._ejDialog.position().top>3?this._ejDialog.position().top-3:0});break;case 37:t?this._resizing("width",this._ejDialog.outerWidth()-3):this.option("position",{X:this._ejDialog.position().left>3?this._ejDialog.position().left-3:0,Y:0==this._ejDialog.position().top?0:this._ejDialog.position().top})}},_resizing:function(e,t){this.model.enableResize&&this.option(e,t)},_sizeInPercent:function(){if(!this._enableWindowResize())return this;var e=this._getParentObj();return this._widthPercent="%"==this._sizeType.width?parseFloat(this.model.width):this._convertPixelToPercentage(e.outerWidth(),this._ejDialog.outerWidth()),this._heightPercent="%"==this._sizeType.height?parseFloat(this.model.height):this._convertPixelToPercentage(e.outerHeight(),this._ejDialog.outerHeight()),this._widthPercent>=100&&(this._widthPercent=100,this._ejDialog.outerWidth(e.outerWidth()),this.model.width=this._ejDialog.width()),this._heightPercent>=100&&(this._heightPercent=100,this._ejDialog.outerHeight(e.outerHeight()),this.model.height=this._ejDialog.height()),this},_getParentObj:function(){return t.isNullOrUndefined(this.model.containment)?t.isNullOrUndefined(this.model.target)?e(document):e(this.model.target):e(this.model.containment)},_convertPercentageToPixel:function(e,t){return Math.round(t*e/100)},_convertPixelToPercentage:function(e,t){return Math.round(t/e*100)},_reSizeHandler:function(){var t;this._maximize?this._resetScroller():(""!=this.model.position.X&&(""!=this.model.position.Y||this._minimize)||this._centerPosition(),t=this._getParentObj(),this._change=!1,this._windowSize.outerWidth!=e(window).outerWidth()?"%"==this._sizeType.width?this._percentageWidthDimension(t):this._pixelsWidthDimension(t):this._windowSize.outerHeight!=e(window).outerHeight()&&("%"==this._sizeType.height?this._percentageHeightDimension(t):this._pixelsHeightDimension(t)),this._change&&this._resizeContainer(t),this._windowSize={outerWidth:e(window).outerWidth(),outerHeight:e(window).outerHeight()},this._centerPosition())},_setDimension:function(){t.isNullOrUndefined(this.model.maxWidth)?t.isNullOrUndefined(this._sizeType.width)?this._maxWidth=+this.model.width:("px"==this._sizeType.width||"auto"==this._sizeType.width)&&(this._maxWidth=this.model.width):this._maxWidth=this.model.maxWidth,t.isNullOrUndefined(this.model.maxHeight)?t.isNullOrUndefined(this._sizeType.height)?this._maxHeight=+this.model.height:("px"==this._sizeType.height||"auto"==this._sizeType.height)&&(this._maxHeight=this.model.height):this._maxHeight=this.model.maxHeight},_percentageWidthDimension:function(e){this._ejDialog.outerWidth(this._convertPercentageToPixel(e.outerWidth(),this._widthPercent)),this._change=!0},_percentageHeightDimension:function(e){this._ejDialog.outerHeight(this._convertPercentageToPixel(e.outerHeight(),this._heightPercent)),this._change=!0},_pixelsWidthDimension:function(t){e(t).outerWidth()<=this._ejDialog.outerWidth()&&this._setWidth(t),e(t).outerHeight()<=this._ejDialog.outerHeight()&&!this.model.isResponsive&&this._setHeight(t),parseInt(this._ejDialog.css("width"))<parseInt(this._maxWidth)&&(parseInt(this._maxWidth)<e(t).outerWidth()?this._ejDialog.outerWidth(parseInt(this._maxWidth)):this._ejDialog.outerWidth(t.outerWidth()),this._change=!0)},_pixelsHeightDimension:function(t){e(t).outerHeight()<=this._ejDialog.outerHeight()&&!this.model.isResponsive&&this._setHeight(t),e(t).outerWidth()<=this._ejDialog.outerWidth()&&this._setWidth(t),parseInt(this._ejDialog.css("height"))<parseInt(this._maxHeight)&&(parseInt(this._maxHeight)<e(t).outerHeight()?this._ejDialog.outerWidth(parseInt(this._maxHeight)):this._ejDialog.outerHeight(t.outerHeight()),this._change=!0)},_setWidth:function(e){this._ejDialog.outerWidth(e.outerWidth()),this._change=!0},_setHeight:function(e){this._ejDialog.outerHeight(e.outerHeight()),this._change=!0},_resizeContainer:function(){this.contentDiv.width(this._ejDialog.width()),this.element.outerWidth(this.contentDiv.width());var i=this._ejDialog.height()-(this.model.showHeader?e(this._ejDialog.find("div.e-titlebar")).outerHeight(!0):0);this.contentDiv.height(t.isNullOrUndefined(this.contentDiv)?i-1:"0px"==this.contentDiv.css("border-width")),this.element.outerHeight(t.isNullOrUndefined(this.contentDiv)?i-1:"0px"==this.contentDiv.css("border-width")),this.scroller=this.contentDiv.ejScroller({width:!t.isNullOrUndefined(this.contentDiv)&&("0px"==this.contentDiv.css("border-width")?this._ejDialog.width():this._ejDialog.width()-2),height:!t.isNullOrUndefined(this.contentDiv)&&("0px"==this.contentDiv.css("border-width")?this.element.outerHeight():this.element.outerHeight()-2),rtl:this.model.rtl,enableTouchScroll:!1}),this.scroller=this.contentDiv.data("ejScroller"),this._reRenderScroller(),""==this.model.position.X||""==this.model.position.Y&&!this._minimize||this._positionChanged?this._centerPosition():this._ejDialog.css("height",this._dialogTitlebar.outerHeight()),this._updateCaptionWidth(),this._change=!1},_getLocalizedLabels:function(){return t.getLocalizedConstants(this.sfType,this.model.locale)},_enableWindowResize:function(){return!!(this.model.isResponsive||isNaN(this.model.width)&&this.model.width.indexOf("%")>0&&isNaN(this.model.height)&&this.model.height.indexOf("%")>0&&"auto"!=this.model.height)},_wireResizing:function(){e(window)[this._enableWindowResize()?"on":"off"]("resize",e.proxy(this._reSizeHandler,this))},_wireEvents:function(){this._on(this._ejDialog,"keydown",this._keyDown),this._on(this._ejDialog,"click",this._mouseClick),this._wireResizing()},refresh:function(){this._resetScroller()},open:function(){var i,s,l,n,o;return!!this._isOpen||1!=this._trigger("beforeOpen")&&(this.element.css("display","block"),this._setZindex(),this._minimize||this._maximize||this._init||this._dialogPosition(),i=this,s={},this._ejDialog.show(),this.model.enableAnimation&&(this._ejDialog.css({opacity:0}),"slide"==this.model.animation.show.effect?(n=this._ejDialog.css("left"),this._ejDialog.css({left:-this._ejDialog.width()}),s={left:n,opacity:1}):s={opacity:1}),this._ejDialog.animate(s,this.model.enableAnimation?Number(this.model.animation.show.duration):0,function(){i.model&&("none"==i._ejDialog.css("display")&&i._ejDialog.show(),i._ejDialog.eq(0).focus(),i._ejDialog.css({opacity:""}),i.contentDiv.find("a:visible:enabled, button:visible:enabled, :input:visible:enabled, select:visible:enabled, .e-input").first().focus(),i._trigger("open"),i._updateCaptionWidth(),i.model.enableModal&&!i.model.backgroundScroll&&(i._ejDialog.height()>e(window).height()&&i._ejDialog.css("height",e(window).height()),i.model.height=e(window).height(),i._overLay.css("position","fixed"),i.scroller.refresh(!0),i.refresh()),(i.model.maxHeight||i.model.maxWidth)&&(l=i._ejDialog.outerHeight(!0)-(i._dialogTitlebar?i._dialogTitlebar.outerHeight(!0):0),("auto"==i.model.height||"100%"==i.model.height)&&(l=i.model.height),i._updateScroller(t.isNullOrUndefined(this.contentDiv)?l-2:"0px"==this.contentDiv.css("border-width"),t.isNullOrUndefined(this.contentDiv)?i._ejDialog.width()-2:"0px"==this.contentDiv.css("border-width")),i.scroller.refresh()))}),1==this.model.enableModal&&this._createOverlay(),this._isOpen=!0,this.element.find("> .e-draggable.e-titlebar")&&((o=e("#"+this.element.find("> .e-draggable.e-titlebar").attr("id")).data("ejDraggable"))&&o.option("cursorAt",this.element.offset())),this)},close:function(t){var i,s,l;return!this._isOpen||!this.model.enabled||(i=!!t,1!=this._trigger("beforeClose",{event:t,isInteraction:i})&&(this._isOpen=!1,s=this,l={},this.model.enableAnimation&&(l="slide"==this.model.animation.hide.effect?{left:-this._ejDialog.width(),opacity:0}:{opacity:0}),this._ejDialog.animate(l,this.model.enableAnimation?Number(this.model.animation.hide.duration):0,function(){s._trigger("close",{event:t,isInteraction:i}),s._ejDialog.hide()}),this.model.enableModal&&(this._overLay&&this._overLay.remove(),this.model.backgroundScroll||e("body").removeClass("e-dialog-modal")),this))},isOpened:function(){return this.isOpen()},isOpen:function(){return this._isOpen},setTitle:function(e){return this.model.title=e,this._titleText.text(e),this._updateCaptionWidth(),this},setContent:function(e){return!!this.model.enabled&&(this.element.html(e),this._resetScroller(),this)},focus:function(){return this._setZindex(),this.element.focus(),this},minimize:function(){if(this.model.showHeader)return this._actionMinimize(),e(this.wrapper.find(".e-minus")[0]).parent().hide(),this},maximize:function(){if(this.model.showHeader)return this._actionMaximize(),e(this.wrapper.find(".e-maximize")[0]).removeClass("e-maximize").addClass("e-restore"),e(this.wrapper.find(".e-restore")[1]).removeClass("e-restore").addClass("e-minus"),this._dialogMaximize&&this._dialogMaximize.attr("title",this.model.tooltip.restore),this._dialogTitlebar&&this._dialogTitlebar.find(".e-minus").parent().show(),this._hideIcon(!0),this},restore:function(){if(this.model.showHeader){var t=this._minimize;return this._actionRestore(),e(this.wrapper.find(".e-restore")[0]).removeClass("e-restore").addClass(t?"e-minus":"e-maximize"),this._dialogMaximize&&this._dialogMaximize.attr("title",this.model.tooltip.maximize),this._hideIcon(!0),this}},pin:function(){if(this.model.showHeader)return this.dialogPin=!0,e(this.wrapper.find(".e-unpin")[0]).removeClass("e-unpin").addClass("e-pin"),this._dialogPin&&this._dialogPin.attr("title",this.model.tooltip.unPin),this},unpin:function(){if(this.model.showHeader)return this.dialogPin=!1,e(this.wrapper.find(".e-pin")[0]).removeClass("e-pin").addClass("e-unpin"),this._dialogPin&&this._dialogPin.attr("title",this.model.tooltip.pin),this},collapse:function(){if(this.model.showHeader)return this._actionCollapse(),this._collapseValue=!0,this},expand:function(){if(this.model.showHeader)return this._actionExpand(),this}}),t.Dialog.Locale=t.Dialog.Locale||{},t.Dialog.Locale.default=t.Dialog.Locale["en-US"]={tooltip:{close:"Close",collapse:"Collapse",restore:"Restore",maximize:"Maximize",minimize:"Minimize",expand:"Expand",unPin:"UnPin",pin:"Pin"},title:"",closeIconTooltip:"close"}}(jQuery,Syncfusion),
/*!
*  filename: ej.button.min.js
*  version : 14.4.0.15
*  Copyright Syncfusion Inc. 2001 - 2016. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
function(e){"function"==typeof define&&define.amd?define(["./../common/ej.core.min"],e):e()}(function(){var e,t;e=jQuery,(t=Syncfusion).widget("ejButton","ej.Button",{element:null,model:null,validTags:["button","input"],_setFirst:!1,_rootCSS:"e-button",_requiresID:!0,defaults:{size:"normal",type:"submit",height:"",width:"",enabled:!0,htmlAttributes:{},text:null,contentType:"textonly",imagePosition:"imageleft",showRoundedCorner:!1,cssClass:"",prefixIcon:null,suffixIcon:null,enableRTL:!1,repeatButton:!1,timeInterval:"150",create:null,click:null,destroy:null},dataTypes:{size:"enum",enabled:"boolean",type:"enum",showRoundedCorner:"boolean",text:"string",contentType:"enum",imagePosition:"enum",prefixIcon:"string",suffixIcon:"string",cssClass:"string",repeatButton:"boolean",enableRTL:"boolean",timeInterval:"string",htmlAttributes:"data"},disable:function(){this.element.addClass("e-disable").attr("aria-disabled",!0),this.model.enabled=!1},enable:function(){this.element.removeClass("e-disable").attr("aria-disabled",!1),this.model.enabled=!0},_init:function(){this._cloneElement=this.element.clone(),this._initialize(),this._render(),this._controlStatus(this.model.enabled),this._wireEvents(this.model.repeatButton),this._addAttr(this.model.htmlAttributes)},_addAttr:function(t){var i=this;e.map(t,function(e,t){"class"==t?i.element.addClass(e):i.element.attr(t,e),"disabled"==t&&"disabled"==e&&i.disable()})},_destroy:function(){this.element.removeClass(this.model.cssClass+"e-ntouch e-btn e-select e-disable e-corner e-widget").removeAttr("role aria-describedby aria-disabled"),this.element.removeClass("e-btn-"+this.model.size),this.model.contentType&&"textonly"!=this.model.contentType&&this.element.append(this._cloneElement.text())&&this.imgtxtwrap[0].remove()},_setModel:function(e){for(var t in e)switch(t){case"size":this._setSize(e[t]);break;case"height":this._setHeight(e[t]);break;case"width":this._setWidth(e[t]);break;case"contentType":this._setContentType(e[t]);break;case"imagePosition":this._setImagePosition(e[t]);break;case"text":this._setText(e[t]);break;case"prefixIcon":this._setMajorIcon(e[t]);break;case"suffixIcon":this._setMinorIcon(e[t]);break;case"enabled":this._controlStatus(e[t]);break;case"showRoundedCorner":this._roundedCorner(e[t]);break;case"cssClass":this._setSkin(e[t]);break;case"enableRTL":this._setRTL(e[t]);break;case"timeInterval":this.model.timeInterval=e[t];break;case"htmlAttributes":this._addAttr(e[t])}},_setSize:function(e){this.element.removeClass("e-btn-mini e-btn-medium e-btn-small e-btn-large e-btn-normal"),this.element.addClass("e-btn-"+e)},_setType:function(e){this.element.prop({type:e})},_setHeight:function(e){this.element.css("height",e)},_setWidth:function(e){this.element.css("width",e)},_setText:function(e){"inputButton"==this.buttonType?this.element.val(e):this.model.contentType==t.ContentType.TextOnly?this.element.html(e):this.textspan.html(e),this.model.text=e},_setMajorIcon:function(e){this.majorimgtag.removeClass(this.model.prefixIcon),this.majorimgtag.addClass(e),this.model.prefixIcon=e},_setMinorIcon:function(e){this.minorimgtag.removeClass(this.model.suffixIcon),this.minorimgtag.addClass(e),this.model.suffixIcon=e},_setContentType:function(e){e!=this.model.contentType&&(this.element.empty(),this.model.contentType=e,this._renderButtonNormal())},_setImagePosition:function(e){this.model.contentType==t.ContentType.TextAndImage&&e!=this.model.imagePosition&&(this.element.empty(),this.model.imagePosition=e,this._renderButtonNormal())},_setRTL:function(e){e?this.element.addClass("e-rtl"):this.element.removeClass("e-rtl")},_controlStatus:function(e){e?this.enable():this.disable()},_setSkin:function(e){this.model.cssClass!=e&&(this.element.removeClass(this.model.cssClass),this.element.addClass(e))},_initialize:function(){t.isTouchDevice()||this.element.addClass("e-ntouch"),this.element.is("input")?this.buttonType="inputButton":this.element.is("a")||this.element.is("button")?this.buttonType="tagButton":this.element.removeClass("e-button"),this.element.attr("type")?this.model.type=this.element.attr("type"):this._setType(this.model.type),this._timeout=null},_render:function(){this._setSize(this.model.size),this._setHeight(this.model.height),this._setWidth(this.model.width),this._setRTL(this.model.enableRTL),this.element.addClass(this.model.cssClass+" e-btn e-select e-widget").attr("role","button"),"inputButton"==this.buttonType?(this.element.addClass("e-txt"),null!=this.model.text&&""!=this.model.text?this.element.val(this.model.text):this.model.text=this.element.val()):this._renderButtonNormal(),this._roundedCorner(this.model.showRoundedCorner),this.model.text&&this.element.attr("aria-describedby",this.model.text)},_renderButtonNormal:function(){if((null==this.model.text||""==this.model.text)&&(this.model.text=this.element.html()),this.element.empty(),this.textspan=t.buildTag("span.e-btntxt",this.model.text),this.model.contentType.indexOf("image")>-1&&(this.majorimgtag=t.buildTag("span").addClass(this.model.prefixIcon),this.minorimgtag=t.buildTag("span").addClass(this.model.suffixIcon),this.imgtxtwrap=t.buildTag("div")),this.model.contentType==t.ContentType.TextAndImage){switch(this.model.imagePosition){case t.ImagePosition.ImageRight:this.imgtxtwrap.append(this.textspan,this.majorimgtag);break;case t.ImagePosition.ImageLeft:this.imgtxtwrap.append(this.majorimgtag,this.textspan);break;case t.ImagePosition.ImageBottom:this.majorimgtag.attr("style","display:inherit"),this.imgtxtwrap.append(this.textspan,this.majorimgtag);break;case t.ImagePosition.ImageTop:this.majorimgtag.attr("style","display:inherit"),this.imgtxtwrap.append(this.majorimgtag,this.textspan)}this.element.append(this.imgtxtwrap)}else this.model.contentType==t.ContentType.ImageTextImage?(this.imgtxtwrap.append(this.majorimgtag,this.textspan,this.minorimgtag),this.element.append(this.imgtxtwrap)):this.model.contentType==t.ContentType.ImageBoth?(this.imgtxtwrap.append(this.majorimgtag,this.minorimgtag),this.element.append(this.imgtxtwrap)):this.model.contentType==t.ContentType.ImageOnly?(this.imgtxtwrap.append(this.majorimgtag),this.element.append(this.imgtxtwrap)):(this.element.addClass("e-txt"),this.element.html(this.model.text))},_roundedCorner:function(e){1==e?this.element.addClass("e-corner"):this.element.removeClass("e-corner")},_wireEvents:function(t){t&&(this._on(this.element,"mousedown",this._btnRepatMouseClickEvent),this._on(e(document),"mouseup",this._mouseUpClick),this._on(this.element,"keyup",this._btnRepatKeyUpEvent),this._on(e(document),"keypress",this._btnRepatKeyDownEvent)),this._on(this.element,"click",this._btnMouseClickEvent)},_btnMouseClickEvent:function(e){var t,i=this;if(!i.model.enabled)return!1;i.element.hasClass("e-disable")||(t={target:e.currentTarget,e:e,status:i.model.enabled},i._trigger("click",t))},_btnRepatMouseClickEvent:function(e){var t=this;if(!t.model.enabled)return!1;t.element.hasClass("e-disable")||(t.model.enabled,(0==e.button||1==e.which)&&(t._timeout=setInterval(function(){t._trigger("click",{target:e.currentTarget,status:t.model.enabled})},this.model.timeInterval)))},_mouseUpClick:function(){clearTimeout(this._timeout)},_btnRepatKeyDownEvent:function(e){var t,i=this;i.element.hasClass("e-disable")||(t={status:i.model.enabled},(32==e.keyCode||13==e.keyCode)&&i._trigger("click",t))},_btnRepatKeyUpEvent:function(e){(32==e.keyCode||13==e.keyCode)&&clearTimeout(this._timeout)}}),t.ContentType={TextOnly:"textonly",ImageOnly:"imageonly",ImageBoth:"imageboth",TextAndImage:"textandimage",ImageTextImage:"imagetextimage"},t.ImagePosition={ImageRight:"imageright",ImageLeft:"imageleft",ImageTop:"imagetop",ImageBottom:"imagebottom"},t.ButtonSize={Normal:"normal",Mini:"mini",Small:"small",Medium:"medium",Large:"large"},t.ButtonType={Button:"button",Reset:"reset",Submit:"submit"}}),
/*!
*  filename: ej.autocomplete.min.js
*  version : 14.4.0.15
*  Copyright Syncfusion Inc. 2001 - 2016. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
function(e){"function"==typeof define&&define.amd?define(["./../common/ej.globalize.min","./../common/ej.core.min","./../common/ej.data.min","./../common/ej.scroller.min"],e):e()}(function(){!function(e,t,i){t.widget("ejAutocomplete","ej.Autocomplete",{element:null,model:null,validTags:["input"],_ignoreOnPersist:["fields","dataSource","query","focusIn","focusOut","change","select","create","destroy","open","close","actionComplete","actionSuccess","actionFailure"],_setFirst:!1,_rootCSS:"e-autocomplete",type:"editor",angular:{require:["?ngModel","^?form","^?ngModelOptions"]},_requiresID:!0,defaults:{dataSource:null,query:null,fields:{text:null,key:null,category:null,groupBy:null,htmlAttributes:null},locale:"en-US",template:null,allowGrouping:!1,enableDistinct:!1,allowSorting:!0,sortOrder:"ascending",htmlAttributes:{},multiSelectMode:"none",delimiterChar:",",allowAddNew:!1,addNewText:"Add New",showRoundedCorner:!1,readOnly:!1,cssClass:"",watermarkText:null,value:"",selectValueByKey:null,filterType:"startswith",caseSensitiveSearch:!1,showLoadingIcon:!0,showResetIcon:!1,itemsCount:0,minCharacter:1,delaySuggestionTimeout:200,showPopupButton:!1,highlightSearch:!1,enableAutoFill:!1,enableRTL:!1,enabled:!0,visible:!0,height:"",width:"",emptyResultText:"No suggestions",animateType:"slide",showEmptyResultText:!0,enablePersistence:!1,popupHeight:"152px",popupWidth:"auto",autoFocus:!1,multiColumnSettings:{enable:!1,showHeader:!0,stringFormat:"{0}",columns:[{field:null,headerText:null,textAlign:"left",headerTextAlign:"left",cssClass:"",type:"string",filterType:"startswith"}]},validationRules:null,validationMessage:null,focusIn:null,focusOut:null,change:null,select:null,create:null,open:null,close:null,destroy:null,actionBegin:null,actionComplete:null,actionSuccess:null,actionFailure:null},dataTypes:{autoFocus:"boolean",watermarkText:"string",locale:"string",cssClass:"string",filterType:"enum",caseSensitiveSearch:"boolean",showLoadingIcon:"boolean",template:"string",allowGrouping:"boolean",enableDistinct:"boolean",allowSorting:"boolean",sortOrder:"enum",allowAddNew:"boolean",addNewText:"string",showRoundedCorner:"boolean",showResetIcon:"boolean",readOnly:"boolean",itemsCount:"number",animateType:"enum",minCharacter:"number",showPopupButton:"boolean",highlightSearch:"boolean",enableAutoFill:"boolean",enableRTL:"boolean",multiSelectMode:"enum",delimiterChar:"string",emptyResultText:"string",showEmptyResultText:"boolean",enabled:"boolean",visible:"boolean",enablePersistence:"boolean",dataSource:"data",query:"data",fields:"data",validationRules:"data",validationMessage:"data",htmlAttributes:"data",multiColumnSettings:"data"},observables:["value","selectValueByKey"],value:t.util.valueFunction("value"),_selectValueByKey:t.util.valueFunction("selectValueByKey"),enable:function(){this.model.enabled||(this.model.enabled=!0,this.target.disabled=!1,this.element.removeClass("e-disable").attr({"aria-disabled":!1}),this.element.removeAttr("disabled"),this.model.showPopupButton&&this.dropdownbutton.removeClass("e-disable").attr({"aria-disabled":!1}),"visualmode"==this.model.multiSelectMode&&this._ulBox.removeClass("e-disable").attr({"aria-disabled":!1}))},disable:function(){this.model.enabled&&(this._hideResult(),this.model.enabled=!1,this.target.disabled=!0,this.element.attr("disabled","disabled"),this.element.addClass("e-disable").attr({"aria-disabled":!0}),this.model.showPopupButton&&this.dropdownbutton.addClass("e-disable").attr({"aria-disabled":!0}),"visualmode"==this.model.multiSelectMode&&this._ulBox&&this._ulBox.addClass("e-disable").attr({"aria-disabled":!0}))},clearText:function(){"visualmode"==this.model.multiSelectMode&&this._deleteBox(this._ulBox.children("li")),this.element.val(""),this._valueChange(),this._isFocused?this.element.blur():this._focusOutAction(),this._hideResult()},getValue:function(){var e=this.value();return null==e?"":e},getSelectedItems:function(){return this._isFocused&&"visualmode"!=this.model.multiSelectMode&&this._updateSelectedItemArray(this.getValue()),this._selectedItems},_setValue:function(i){var s,l,n;if(this._isWatermark||this._hiddenSpan.css("display","none"),("object"==typeof i||"number"==typeof i&&isNaN(i)||""==e.trim(i))&&(i=""),"visualmode"==this.model.multiSelectMode&&this._hiddenInput.val(""),this.element.val(""),i)if("visualmode"==this.model.multiSelectMode)if(this._selectedItems=[],this._modelValue=i,this._deleteBox(this._ulBox.children("li")),s=i.split(this.model.delimiterChar),this.element.width(1).val("").removeAttr("placeholder"),this._hiddenInput||(this._hiddenInput=t.buildTag("input#"+this.target.id+"_hidden","",{},{type:"hidden",name:this.element.attr("name")}).insertBefore(this.element)),t.DataManager&&this.model.dataSource instanceof t.DataManager)this._createBoxForObjectType(s);else if(this.suggestionListItems=this.model.dataSource,this.suggestionListItems&&"object"!=typeof this.suggestionListItems[0])for(this._hiddenInput.val(i),l=0,n=s.length;l<n;l++)s[l]&&(this._ulBox.append(this._createBox(s[l])),this._selectedItems.push(s[l]));else this._createBoxForObjectType(s);else this.element.val(i),this._updateSelectedItemArray(i);return"visualmode"!=this.model.multiSelectMode&&this.value(this.element.val()),this._preVal=this.element.val(),this._isWatermark||this._setWatermarkTxt(),i},_createBoxForObjectType:function(i){for(var s,l=this,n=this._declareVariable(),o=0,a=i.length;o<a;o++)""!=(s=e.trim(i[o]))&&(t.DataManager&&this.model.dataSource instanceof t.DataManager?(this._dataQuery=this._getQuery().where(n[0],"equal",s,!1),this._promise=this.model.dataSource.executeQuery(this._dataQuery),this._promise.done(function(e){var i=e.result;l._strData=i instanceof Array&&i.length?i[0]:s,t.isNullOrUndefined(l._strData[n[1]])||l._selectKeyInit(),l._selectedItems.push(l._strData)}).fail(function(){l._selectedItems.push(s)})):(this._dataQuery=t.Query().where(n[0],"equal",s,!1),this._promise=t.DataManager(this.suggestionListItems).executeLocal(this._dataQuery),this._strData=this._promise instanceof Array&&this._promise.length?this._promise[0]:s,t.isNullOrUndefined(this._strData[n[1]])||this._selectKeyInit(),this._selectedItems.push(this._strData)),"visualmode"==this.model.multiSelectMode&&this._ulBox.append(this._createBox(s)))},_selectKeyInit:function(){var e,i=this._declareVariable();delimiterChar=this._delimiterChar(),"visualmode"==this.model.multiSelectMode&&this._hiddenInput.val(this._hiddenInput.val()+(t.isNullOrUndefined(this._strData[i[1]]||this._strData[i[0]])?"":(this._strData[i[1]]||this._strData[i[0]])+this.model.delimiterChar)),t.isNullOrUndefined(this._strData[i[1]])||("none"!=this.model.multiSelectMode?(e=(e=null!=this._selectValueByKey()?this._selectValueByKey()+this._strData[i[1]]+delimiterChar:this._strData[i[1]]+delimiterChar).split(delimiterChar).reduce(function(e,t){return e.indexOf(t)<0&&e.push(t),e},[]),this._selectValueByKey(e.join(delimiterChar))):this._selectValueByKey(this._strData[i[1]]))},_declareVariable:function(){var e=this.model.fields,i={_key:null,_text:null,_attr:null},s=[];if(!t.isNullOrUndefined(e))return i._text=e&&e.text?e.text:"text",i._key=e&&e.key?e.key:"key",s.push(i._text,i._key),s},selectValueByKey:function(t){var i,s=this;t=t.toString(),i="none"!=this.model.multiSelectMode?t.split(this.model.delimiterChar):t.split(","),"[object Array]"===Object.prototype.toString.call(i)&&e.each(i,function(t,i){s._setOperation(e.trim(i),"key")})},selectValueByText:function(e){this._setOperation(e,"text")},setValue:function(e){this._setText(e)},_setOperation:function(e,i){var s,l,n,o="",a=this,r=this.model.dataSource;if(t.isNullOrUndefined(r))return!1;if("object"==typeof r[0]||r instanceof t.DataManager)o=(n=this.model.fields)&&n[i]?n[i]:i;else if("key"==i)return!1;if(t.DataManager&&r instanceof t.DataManager)l=this._getQuery().where(o,"equal",e,!this.model.caseSensitiveSearch),(s=r.executeQuery(l)).done(function(e){a._setText(e.result[0])});else{if(!r||!r.length||r.length<1)return!1;l=t.Query().where(o,"equal",e,!this.model.caseSensitiveSearch),s=t.DataManager(r).executeLocal(l),this._setText(s[0])}},_setText:function(e){var t,i,s;if(!e)return!1;if(i=this.model.fields,t="object"==typeof this.model.dataSource[0]||"object"==typeof e?"string"==typeof e?e:i&&i.text?e[i.text]:e.text:e){if("visualmode"==this.model.multiSelectMode&&this._removeDuplicates(e))return!1;this._valueToTextBox(t,e,!0),s="visualmode"==this.model.multiSelectMode?this._modelValue:this.element.val(),this.value(s),this.model.showResetIcon&&this._showReset()}},_textFormateString:function(e){var i,s,l=this.model.multiColumnSettings.stringFormat;if(this._columnsIndex(),t.isNullOrUndefined(e)||"object"!=typeof e)l=t.isNullOrUndefined(e)||"object"==typeof e?this._currList[this._activeItem-1]:l.replace("{"+this._columnIndex[0]+"}",e);else for(i=0,s=this._columnIndex.length;i<s;i++)l=l.replace("{"+this._columnIndex[i]+"}",e[this.model.multiColumnSettings.columns[parseInt(this._columnIndex[i])].field]);return l},_columnsIndex:function(){var t=this;this._columnIndex=[],e.each(this.model.multiColumnSettings.stringFormat.match(/\{.+?\}/g),function(e,i){t._columnIndex[e]=i.slice(1,-1)})},_valueToTextBox:function(e,i,s){var l,n,o;!this._addNewTemplate&&this.model.multiColumnSettings.enable&&"string"!=typeof i&&(e=this._textFormateString(i)),"visualmode"==this.model.multiSelectMode?(i="string"==typeof i&&this._addNewTemplate&&i.substr(i.length-this._addNewTemplate.length)==this._addNewTemplate?i.replace(this._addNewTemplate,""):i,l=e.indexOf(this._addNewTemplate),this._addNewTemplate&&(e=e.substr(0,e.length-this._addNewTemplate.length)),o=this.model.delimiterChar,n=(n=this._getUniqueKey())||(this.model.fields&&this.model.fields.key?i[this.model.fields.key]:t.isNullOrUndefined(i.key)?n:i.key),(!(this._selectValueByKey()==n||null==n)||l>-1)&&this._selectValueByKey(null!=this._selectValueByKey()?this._selectValueByKey()+(l>-1?e:n)+o:(l>-1?e:n)+o),(!(this._hiddenInput.val()==n||null==n)||l>-1)&&this._hiddenInput.val(this._hiddenInput.val()+(n||e)+o),this._modelValue=t.isNullOrUndefined(this.value())?e+o:this.value()+e+o,this.element.val("").removeAttr("placeholder").width(1),this._ulBox.append(this._createBox(e)),this._addNewTemplate=null):"delimiter"==this.model.multiSelectMode?(o=this.target.value.lastIndexOf(this.model.delimiterChar),this._typed||""==this.element.val()||s||!this.model.showPopupButton?s?this.element.val(""==this.element.val()?e+this.model.delimiterChar:this.element.val()+e+this.model.delimiterChar):-1==o?this.element.val(this._queryString.substr(0,o+1)+e+this.model.delimiterChar):this.element.val(this._queryString.substr(0,o+this.model.delimiterChar.length)+e+this.model.delimiterChar):!this.model.enableAutoFill||this.showSuggestionBox?this._checkDeli()?this.element.val(this._queryString.substr(0,o)+this.model.delimiterChar+e+this.model.delimiterChar):this.element.val(this.element.val()+this.model.delimiterChar):this._checkDeli()||this.element.val(this.element.val()+this.model.delimiterChar),this._typed=!1):(this.element.val(e),this._selectedItems=[]),this._selectedItems.push(i),this._originalval.push(e),this._moveCaretToEnd(this.element[0])},_removeDuplicates:function(e){return 0!=this._selectedItems.length&&(-1!=this._selectedItems.indexOf(e)||void 0)},search:function(){this.model.enabled&&this._checkDelimiter()&&(this._hideResult(),this._autoFill=!1,this._queryString=e.trim(this._queryString),this._queryString.length>0&&this._OnTextEnter())},setVisible:function(e){e?this.wrapper.show():this.wrapper.hide()},hide:function(){this._hideResult()},open:function(){this._showFullList()},_changeWatermark:function(e){this._isWatermark?this.element.attr("placeholder",e):this._hiddenSpan.text(e)},_changeSkin:function(e){this.wrapper.removeClass(this.model.cssClass).addClass(e),this.suggestionList.removeClass(this.model.cssClass).addClass(e)},_setDropdown:function(e){this.model.showPopupButton=e,e?this._renderDropdown():this._destroyDropdown()},_changeHeight:function(e){this.wrapper.height(e)},_changeWidth:function(e){this.wrapper.width(e),this._setListWidth()},_setCulture:function(){this._localizedLabels=this._getLocalizedLabels(),t.isNullOrUndefined(this._options)||(t.isNullOrUndefined(this._options.addNewText)||(this._localizedLabels.addNewText=this._options.addNewText),t.isNullOrUndefined(this._options.emptyResultText)||(this._localizedLabels.emptyResultText=this._options.emptyResultText)),this.model.addNewText=this._localizedLabels.addNewText,this.model.emptyResultText=this._localizedLabels.emptyResultText},_init:function(e){if(this._options=e,this._setCulture(),!this.element.is("input")||this.element.attr("type")&&"text"!=this.element.attr("type"))return!1;this.model.fields.groupBy=this.model.fields.groupBy?this.model.fields.groupBy:this.model.fields.category,this._initialize(),this._render(),this._wireEvents(),this.initialRender=!1,null!=this.model.validationRules&&(this._initValidator(),this._setValidation())},_initValidator:function(){this.element.closest("form").data("validator")||this.element.closest("form").validate()},_setValidation:function(){var i,s,l,n,o;if(this.model.validationRules)for(l in(i="visualmode"==this.model.multiSelectMode?this._hiddenInput:this.element).rules("add",this.model.validationRules),s=(s=this.element.closest("form").data("validator"))||this.element.closest("form").validate(),name=i.attr("name"),s.settings.messages[name]={},this.model.validationRules)if(n=null,!t.isNullOrUndefined(this.model.validationRules[l])){if(t.isNullOrUndefined(this.model.validationRules.messages&&this.model.validationRules.messages[l]))for(o in s.settings.messages[name][l]=e.validator.messages[l],this.model.validationMessage)l==o&&(n=this.model.validationMessage[l]);else n=this.model.validationRules.messages[l];s.settings.messages[name][l]=null!=n?n:e.validator.messages[l]}},_removeDuplicateValue:function(e){return e.split(this.model.delimiterChar).reduce(function(e,t){return e.indexOf(t)<0&&e.push(t),e},[]).join(this.model.delimiterChar)},_delimiterChar:function(){return"none"!=this.model.multiSelectMode?this.model.delimiterChar:""},_setModel:function(e){var i,s,l,n,o,a,r;for(i in e){switch(i){case"dataSource":this.model.dataSource=null;break;case"watermarkText":this._changeWatermark(e[i]);break;case"delaySuggestionTimeout":this.model.delaySuggestionTimeout=parseInt(e[i]);break;case"value":deli=this._delimiterChar(),"none"!=this.model.multiSelectMode&&(r=e[i].substr(e[i].length-deli.length)==deli?e[i]:e[i]+deli,e[i]=""==e[i]?this.value():(this.value()?this.value():"")+r,"visualmode"==this.model.multiSelectMode&&(e[i]=e[i].split(deli).reduce(function(e,t){return e.indexOf(t)<0&&e.push(t),e},[]),e[i]=e[i].join(deli))),this.value(this._setValue(e[i])),this._modelValue=this.value(),s="visualmode"==this.model.multiSelectMode?this._hiddenInput.val():this.element.val(),this._changeEvtTrigger(s),this.model.showResetIcon&&this._showReset();break;case"showPopupButton":this._setDropdown(e[i]);break;case"enableRTL":this._RightToLeft(e[i]);break;case"showRoundedCorner":this._setRoundedCorner(e[i]);break;case"readOnly":this._checkReadOnly(e[i]);break;case"delimiterChar":l=this.model.delimiterChar,e[i]=this._validateDelimiter(e[i]),this.model.delimiterChar=e[i],this.element.val(this.value().replace(new RegExp(l,"g"),this.model.delimiterChar)),this.value(this.element.val());break;case"validationRules":null!=this.model.validationRules&&(this.element.rules("remove"),this.model.validationMessage=null),this.model.validationRules=e[i],null!=this.model.validationRules&&(this._initValidator(),this._setValidation());break;case"validationMessage":this.model.validationMessage=e[i],null!=this.model.validationRules&&null!=this.model.validationMessage&&(this._initValidator(),this._setValidation());break;case"locale":t.Autocomplete.Locale[e[i]]?(this.model.locale=e[i],this._setCulture()):e[i]=this.model.locale;break;case"filterType":for(a in n=[],t.filterType)t.filterType.hasOwnProperty(a)&&n.push(t.filterType[a]);n.indexOf(e[i])>-1?this.model.filterType=e[i]:e[i]=this.model.filterType;break;case"multiSelectMode":this.model.multiSelectMode=e[i],o=this._delimiterChar(),"none"!=this.model.multiSelectMode&&(a=this._selectValueByKey(),(r=this.value())&&(r=r.substr(r.length-o.length)==o?r:r+o,this.value(r),"visualmode"==this.model.multiSelectMode&&this.value(this._removeDuplicateValue(this.value()))),a&&(this._selectValueByKey(a.substr(a.length-o.length)==o?a:a+o),"visualmode"==this.model.multiSelectMode&&this._selectValueByKey(this._removeDuplicateValue(this._selectValueByKey())))),"visualmode"==e[i]?(null!=this.model.validationRules&&this.element.rules("remove"),""!=this.element.val()&&this._isWatermark&&this.element.removeAttr("placeholder"),this._renderBoxModel()):this.element.hasClass("e-visual-mode")&&this._destroyBoxModel(),this._setValue(this.value()),this._setValidation(),t.isNullOrUndefined(this.element.attr("placeholder"))&&this._isWatermark&&this._setWatermark();break;case"enabled":this._disabled(!e[i]);break;case"visible":this.setVisible(e[i]);break;case"height":this._changeHeight(e[i]);break;case"width":this._changeWidth(e[i]);break;case"cssClass":this._changeSkin(e[i]);break;case"itemsCount ":(e[i]<=0||isNaN(e[i]))&&(e[i]=0);break;case"popupHeight":this.suggestionList.css({"max-height":isNaN(e[i])?e[i]:e[i]+"px"});break;case"popupWidth":this.model.popupWidth=e[i],this._setListWidth();break;case"selectValueByKey":deli=this._delimiterChar(),a=t.util.getVal(e[i]),this.selectValueByKey(a),keyValue="none"!=this.model.multiSelectMode?this._selectValueByKey()+e[i]:e[i],keyValue=keyValue.split(deli).reduce(function(e,t){return e.indexOf(t)<0&&e.push(t),e},[]),keyValue=keyValue.join(deli),e[i]=keyValue.substr(keyValue.length-deli.length)==deli?keyValue:keyValue+deli;break;case"htmlAttributes":this._addAttr(e[i]);break;case"emptyResultText":t.isNullOrUndefined(this._options)&&(this._options={}),this._options.emptyResultText=this.model.emptyResultText=e[i],this._setCulture();break;case"addNewText":t.isNullOrUndefined(this._options)&&(this._options={}),this._options.addNewText=this.model.emptyResultText=e[i],this._setCulture();break;case"multiColumnSettings":t.isNullOrUndefined(e[i].enable)||(this.model.multiColumnSettings.enable=e[i].enable),t.isNullOrUndefined(e[i].showHeader)||(this.model.multiColumnSettings.showHeader=e[i].showHeader),t.isNullOrUndefined(e[i].stringFormat)||(this.model.multiColumnSettings.stringFormat=e[i].stringFormat),t.isNullOrUndefined(e[i].columns)||(this.model.multiColumnSettings.columns=e[i].columns),this.suggestionList.remove(),this._renderSuggestionList();break;case"showResetIcon":this.model.showResetIcon=e[i],e[i]?this._showReset():this._removeReset()}this._hideResult()}},_destroy:function(){this.element.width("").removeAttr("role aria-label aria-expanded aria-haspopup aria-autocomplete autocomplete placeholder aria-owns aria-disabled disabled"),this.element.insertAfter(this.wrapper),"visualmode"==this.model.multiSelectMode&&this.element.removeClass("e-visual-mode").attr("name",this._hiddenInput.attr("name")),this.model.enabled||this.element.removeClass("e-disable"),this.wrapper.remove(),this.element.removeClass("e-input").val(""),this._isWatermark&&this.element.removeAttr("placeholder"),this._hideResult(),this.suggestionList.remove()},_initialize:function(){this.value(""===this.value()?this.element[0].value:this.value()),this.element.attr("role","combobox").attr("aria-label","Autocomplete textbox").attr("aria-expanded",!1).attr("tabindex",0).attr("aria-autocomplete","list"),/Edge\/12./i.test(navigator.userAgent)&&this.element.addClass("edge-browser"),this.target=this.element[0],this.dropdownbutton=null,this._isIE8="msie"==t.browserInfo().name&&"8.0"==t.browserInfo().version,this.showSuggestionBox=!1,this.noresult=!0,this._queryString=null,this.suggLen=0,this._selectedItems=[],this._modelValue="",this._activeItem=0,this._originalval=[],this.ctrlKeyPressed=!1,this._isFocused=!1,this._isOpened=!1,this._typed=!1,this._cancelEvent=!1,this._isWatermark=this._checkWatermarkSupport(),this._selectedObj=[]},_render:function(){this._renderWrapper(),this._addAttr(this.model.htmlAttributes),this._setDimentions(),this._renderDropdown(),this._checkProperties(),this._isWatermark?this._setWatermark():this._setWatermarkTxt(),this._renderSuggestionList(),this._RightToLeft(this.model.enableRTL),this._setRoundedCorner(this.model.showRoundedCorner),this.setVisible(this.model.visible),this._setListPosition()},_renderWrapper:function(){var e,i;this.element.addClass("e-input").attr("autocomplete","off"),this.wrapper=t.buildTag("span.e-atc e-widget "+this.model.cssClass+"#"+this.target.id+"_wrapper").insertAfter(this.element),document.activeElement==this.element[0]&&(e=!0),this.container=t.buildTag("span.e-in-wrap e-box").append(this.element),this.wrapper.append(this.container),this._isWatermark||(this._hiddenSpan=t.buildTag("span.e-input e-placeholder ").insertAfter(this.element),this._hiddenSpan.text(this.model.watermarkText),this._hiddenSpan.css("display","none"),i=this,this._hiddenSpan.click(function(){this._isFocused||i.element.focus()})),e&&this.element.focus()},_renderDropdown:function(){if(this.model.showPopupButton){var i=t.buildTag("span.e-icon e-search").attr(this._isIE8?{unselectable:"on"}:{});this.dropdownbutton=t.buildTag("span.e-select#"+this.target.id+"_dropdown").attr(this._isIE8?{unselectable:"on"}:{}).append(i),this.container.append(this.dropdownbutton).addClass("e-padding"),this.model.enabled||this.dropdownbutton.addClass("e-disable").attr({"aria-disabled":!0}),this.dropdownbutton.on("mousedown",e.proxy(this._OnDropdownClick,this))}},_addAttr:function(t){var i=this;e.map(t,function(e,t){"required"==t&&i.element.attr(t,e),"class"==t?i.wrapper.addClass(e):"name"==t?i.element.attr(t,e):"disabled"==t&&"disabled"==e?i._disabled(!0):"readOnly"==t&&!0===e?i._checkReadOnly(!0):i.wrapper.attr(t,e)})},_setDimentions:function(){this.model.height&&this.wrapper.height(this.model.height),this.model.width&&this.wrapper.width(this.model.width)},_renderBoxModel:function(){this._ulBox=t.buildTag("ul.e-ul e-boxes");var i=this.model.enabled?"":"e-disable";this._ulBox.addClass(i),this._hiddenInput=t.buildTag("input#"+this.target.id+"_hidden","",{},{type:"hidden"}).insertBefore(this.element),this._hiddenInput.attr("name",this.element.attr("name")),this.element.val("").removeAttr("name").addClass("e-visual-mode"),this._isWatermark||this.element.width(1),this.container.prepend(this._hiddenInput,this._ulBox),this.wrapper.height("auto"),this._on(this.container,"mousedown",function(t){if(!this.model.enabled)return!1;var i=e(t.target);i.is(this.element)||(t.preventDefault(),this._isFocused||this.element.focus(),i.hasClass("e-options")?(!t.ctrlKey&&i.siblings().hasClass("e-active")&&this._removeActive(),i.hasClass("e-active")?i.removeClass("e-active"):i.addClass("e-active")):this._moveCaretToEnd(this.element[0])),!t.ctrlKey&&(i.hasClass("e-boxes")||i.hasClass("e-input"))&&this._removeActive()})},_destroyBoxModel:function(){this.container.prepend(this.element),this.element.attr({name:this._hiddenInput.attr("name")}).removeAttr("style").removeClass("e-visual-mode"),this.wrapper.height(this.model.height),this._hiddenInput.remove(),this._hiddenInput=null,this._ulBox.remove(),this._off(this.container,"mousedown")},_deleteLastBox:function(){var e=this._ulBox.children().last(),t=e.hasClass("e-active");this._removeActive(),t?this._deleteBox(e):e.addClass("e-active")},_deleteBox:function(t){for(var i,s,l,n,o=0,a=t.length;o<a;o++)i=this._ulBox.children().index(t[o]),this._selectedItems.splice(i,1),s=this.model.delimiterChar,(l=this._hiddenInput.val().split(s)).splice(i,1),this._hiddenInput.val(l.join(s)),this._selectValueByKey(l.join(s)),(n=this._modelValue.split(s)).splice(i,1),this._modelValue=n.join(s),e(t[o]).remove();this.showSuggestionBox&&this._refreshPopup(),this._valueChange(),""==this._hiddenInput.val()&&this._setWatermark()},_removeActive:function(){this._ulBox.children("li.e-active").removeClass("e-active")},_adjustWidth:function(){var e,i=t.buildTag("span",this.element.val());this.container.append(i),e=i.width()+30,this.element.width()!=e&&this.element.width(e),""==this._hiddenInput.val()&&this._setWatermark(),i.remove()},_checkProperties:function(){var i,s;this._checkReadOnly(this.model.readOnly),this.model.delimiterChar=this._validateDelimiter(this.model.delimiterChar),this.model.enabled?this.model.enabled&&e(this.element).hasClass("e-disable")&&(this.model.enabled=!1,this._disabled(!1)):(this.model.enabled=!0,this._disabled(!0)),this._checkNameAttr(),"visualmode"==this.model.multiSelectMode&&this._renderBoxModel(),null!=this._selectValueByKey()&&""==this.value()?(i=this._selectValueByKey().toString(),"none"!=this.model.multiSelectMode&&(i=i.substr(i.length-this.model.delimiterChar.length)==this.model.delimiterChar?i:i+this.model.delimiterChar,"visualmode"==this.model.multiSelectMode?this._selectValueByKey(null):this._selectValueByKey(i)),this.selectValueByKey(i),this.model.showResetIcon&&this._showReset()):(s=this.value(),"none"!=this.model.multiSelectMode&&(t.isNullOrUndefined(s)||""!=s)&&(s=s.substr(s.length-this.model.delimiterChar.length)==this.model.delimiterChar?s:s+this.model.delimiterChar),this.value(this._setValue(s)),this.model.showResetIcon&&""!=this.value()&&this._showReset())},_checkNameAttr:function(){this.element.attr("name")||this.element.attr("name",this.element[0].id)},_disabled:function(e){e?this.disable():this.enable()},_destroyDropdown:function(){this.dropdownbutton.off("mousedown",e.proxy(this._OnDropdownClick,this)),this.dropdownbutton.remove(),this.dropdownbutton=null,this.container.removeClass("e-padding")},_validateDelimiter:function(t){return e.trim(t).length!=t.length&&null==t.length||/^[a-zA-Z0-9]+$/.test(t)?",":t},_checkWatermarkSupport:function(){return"placeholder"in document.createElement("input")},_setWatermark:function(){(this.model.watermarkText&&(""==this.value()||t.isNullOrUndefined(this.value()))||"visualmode"!=this.model.multiSelectMode)&&this.element.attr("placeholder",this.model.watermarkText).width("")},_setWatermarkTxt:function(){null!=this.model.watermarkText&&""==e.trim(this.element.val())&&("visualmode"!=this.model.multiSelectMode||""==e.trim(this._hiddenInput.val()))&&this._hiddenSpan.css("display","block").text(this.model.watermarkText)},_renderSuggestionList:function(){var i,s,l,n,o,a,r=e("#"+this.element[0].id+"_suggestion").get(0);if(r&&e(r).remove(),this.suggestionList=t.buildTag("div.e-atc-popup e-popup e-widget e-box "+this.model.cssClass+"#"+this.target.id+"_suggestion","",{display:"none"}).attr("role","listbox"),this.element.attr("aria-owns",this.target.id+"_suggestion"),this.popup=this.suggestionList,i=t.buildTag("div"),this.model.multiColumnSettings.enable){if(this._tableColumn=t.buildTag("table","",{},{role:"listbox","border-collapse":"separate",border:0,cellspacing:0,cellpadding:0,class:"e-atc-tableContent"}),this._listEventBind(this._tableColumn,"tr"),this._headerColGroup=document.createElement("colgroup"),this.model.multiColumnSettings.showHeader){for(this._tableHeaderDiv=t.buildTag("div",{},{},{class:"e-atc-tableHeader "+(this.model.enableRTL?"e-atc-tableHeaderRTL":"e-atc-tableHeaderScroll")}),s=t.buildTag("div",{},{},{class:"e-atc-tableHeaderContent e-atc-tableHeaderBorder"}),l=document.createElement("tr"),this._tableHeader=t.buildTag("table","",{},{cellspacing:"0.25px"}),n=0,o=this.model.multiColumnSettings.columns.length;n<o;n++)e(l).append(t.buildTag("th",this.model.multiColumnSettings.columns[n].headerText?this.model.multiColumnSettings.columns[n].headerText:"column"+n,{"text-align":this.model.multiColumnSettings.columns[n].headerTextAlign?this.model.multiColumnSettings.columns[n].headerTextAlign:"left"},{class:n==this.model.multiColumnSettings.columns.length-1?"":this.model.enableRTL?"e-atc-thleft":"e-atc-thright"})),e(this._headerColGroup).append(document.createElement("col"));e(this._tableHeaderDiv).append(e(s).append(e(this._tableHeader).append(l).append(this._headerColGroup))),this.suggestionList.append(this._tableHeaderDiv)}else{for(n=0,o=this.model.multiColumnSettings.columns.length;n<o;n++)e(this._headerColGroup).append(document.createElement("col"));this._tableColumn.append(this._headerColGroup)}(a=t.buildTag("div")).append(this._tableColumn),i.append(a)}else this.ul=t.buildTag("ul.e-ul").attr("role","listbox"),this._listEventBind(this.ul,"li:not('.e-category')"),i.append(this.ul);this.suggestionList.append(i),e("body").append(this.suggestionList),this._setListWidth(),this._setListHeight(),this.model.multiColumnSettings.enable?(i.ejScroller({height:i.height(),width:0,scrollerSize:20}),this.scrollerObj=i.ejScroller("instance")):(this.suggestionList.ejScroller({height:this.suggestionList.height(),width:0,scrollerSize:20}),this.scrollerObj=this.suggestionList.ejScroller("instance"))},_listEventBind:function(t,i){t.on({mouseenter:e.proxy(this._OnMouseEnter,this),mouseleave:e.proxy(this._OnMouseLeave,this),click:e.proxy(this._OnMouseClick,this)},i)},_checkEmptyList:function(){"visualmode"==this.model.multiSelectMode&&this._removeRepeated(),0==this.suggestionListItems.length?(this.suggestionListItems.push(this.model.emptyResultText),this.noresult=!0):this.noresult=!1},_showSuggestionList:function(e){this.suggestionListItems=this.model.enableDistinct?t.dataUtil.distinct(this.suggestionListItems,"object"!=typeof this.suggestionListItems[0]?"":this.model.fields&&this.model.fields.text?this.model.fields.text:"text",!0):this.suggestionListItems,this.model.itemsCount>0&&(this.suggestionListItems=t.DataManager(this.suggestionListItems).executeLocal(t.Query().take(this.model.itemsCount))),this._checkEmptyList(),this._addNewTemplate=null,this.noresult&&"visualmode"==this.model.multiSelectMode&&this.model.allowAddNew&&""!=this.element.val()&&!this._repeatRemove&&(this.noresult=!1,this.suggestionListItems.pop(),this._addNewTemplate="   ("+this.model.addNewText+")",this.suggestionListItems.push(this.element.val()+this._addNewTemplate),this._checkEmptyList()),(!this.noresult||this.model.showEmptyResultText)&&this._generateSuggestionList(e)},_generateSuggestionList:function(i){var s,l,n,o,a,r,d,h,c,u,m,p=this.suggestionListItems;if(this.model.multiColumnSettings.enable?this._tableColumn.empty()&&this.model.multiColumnSettings.showHeader&&this._tableHeaderDiv.css("display",""):this.ul.empty(),s=this,l=document.createDocumentFragment(),"object"!=typeof p[0]){if(s.model.multiColumnSettings.enable){var g=t.buildTag("tbody"),f=t.buildTag("tr").attr("role","option").attr(s._isIE8?{unselectable:"on"}:{}),_=t.buildTag("td",{},{},{role:"option"});for(o=0,a=p.length;a>o;o++){var v=s.model.highlightSearch&&!s.noresult?s._highlightSuggestion(p[o]):p[o],b=f.clone(),C=_.clone();e(C).attr(s._isIE8?{unselectable:"on"}:{}).attr(p[o]!=p.length-1?{class:"e-atc-tdbottom"}:{}).html(v),b[0].appendChild(C[0]),g[0].appendChild(b[0]),l.appendChild(g[0]),s.model.showEmptyResultText&&s.model.emptyResultText==v&&s.model.multiColumnSettings.showHeader&&s._tableHeaderDiv.css("display","none")&&e(C).removeClass("e-atc-tdbottom"),s._addNewTemplate&&!t.isNullOrUndefined(s._tableHeaderDiv)&&s._tableHeaderDiv.css("display","none")}s._tableColumn[0].appendChild(l)}else{for(n=t.buildTag("li",{},{},{role:"option"}).attr(s._isIE8?{unselectable:"on"}:{}),o=0,a=p.length;a>o;o++)v=s.model.highlightSearch&&!s.noresult?s._highlightSuggestion(p[o]):p[o],(r=n.clone())[0].innerHTML=v,l.appendChild(r[0]);s.ul[0].appendChild(l)}this._currList=p,this._mapper={txt:null,key:null}}else d=this.model.fields,(h={_key:null,_text:null,_attr:null})._key=d&&d.key?d.key:"key",h._text=d&&d.text?d.text:"text",h._attr=d&&d.htmlAttributes?d.htmlAttributes:"htmlAttributes",this._mapper={txt:h._text,key:h._key},this._currList=[],this.model.fields.groupBy?(c=d&&d.groupBy?d.groupBy:"groupBy",m=t.Query().group(c),this._addSortingQuery(m,"key"),u=t.DataManager(p).executeLocal(m),this._swapUnCategorized(u),u.forEach(function(e,i){if(e.key)if(s.model.multiColumnSettings.enable){var l=t.buildTag("tr.e-category").attr("role","option").attr(s._isIE8?{unselectable:"on"}:{});l.append(t.buildTag("td",e.key).attr("role","option").attr(s._isIE8?{unselectable:"on"}:{}).attr(i!=p.length-1?{class:"e-atc-tdbottom"}:{})),s._tableColumn.append(l)}else s.ul.append(t.buildTag("li.e-category",e.key).attr("role","option").attr(s._isIE8?{unselectable:"on"}:{}));s._generateLi(e.items,h)})):this._generateLi(p,h);this._getLiTags().length>0&&(e(document).off("mousedown",e.proxy(this._OnDocumentClick,this)),this._showResult(i))},_swapUnCategorized:function(e){for(var t,i=e.length,s=0;s<i;s++)if(!e[s].key){for(t=s;t>0;t--)e[t]=e[t-1];return e[t]=e[s],!1}},_generateLi:function(i,s){var l,n,o,a,r,d,h,c,u,m,p,g=this,f=document.createDocumentFragment(),_=document.createDocumentFragment();if(g.model.multiColumnSettings.enable){for(l=g.model.multiColumnSettings.columns.length,this._tableColumn.append(t.buildTag("tbody")),n=t.buildTag("tr"),o=t.buildTag("td"),h=0,c=i.length;c>h;h++)if(u=i[h][s._text],m=i[h][s._key],!t.isNullOrUndefined(u)||g.model.multiColumnSettings.enable){for(g._getField(i[h]),(a=n.clone())[0].className=h%2?"e-atc-trbgcolor":"",r=0;r<l;r++)(d=o.clone())[0].innerHTML=g.model.highlightSearch&&e.inArray(r.toString(),g._columnIndex)>-1?g._highlightSuggestion(g._getField(i[h],g.model.multiColumnSettings.columns[r].field).toString()):g._getField(i[h],g.model.multiColumnSettings.columns[r].field),d[0].className=(h!=i.length-1?"e-atc-tdbottom ":"")+(r!=g.model.multiColumnSettings.columns.length-1?g.model.enableRTL?"e-atc-tdleft ":"e-atc-tdright ":"")+(g.model.multiColumnSettings.columns[r].cssClass?g.model.multiColumnSettings.columns[r].cssClass:""),d[0].style.textAlign=g.model.multiColumnSettings.columns[r].textAlign?g.model.multiColumnSettings.columns[r].textAlign:"left",_.appendChild(d[0]);a[0].appendChild(_),m&&a.attr("id",m),g._setAttributes(g._getField(i[h],s._attr),a[0]),f.appendChild(a[0]),g._currList=g._currList.concat([i[h]])}e(g._tableColumn).find("tbody")[0].appendChild(f)}else{for(h=0,c=i.length;c>h;h++)u=i[h][s._text],m=i[h][s._key],t.isNullOrUndefined(u)||(g.model.highlightSearch&&(u=g._highlightSuggestion(u)),g.model.template&&(u=g._getTemplatedString(i[h],s._text,u)),(p=document.createElement("li")).innerHTML+=u,m&&p.setAttribute("id",m),g._setAttributes(g._getField(i[h],s._attr),p),f.appendChild(p),g._currList=g._currList.concat([i[h]]));g.ul[0].appendChild(f)}},_getLiTags:function(){return this.model.multiColumnSettings.enable?this._tableColumn.find("tbody tr:not('.e-category')"):this.ul.children("li:not('.e-category')")},_getTemplatedString:function(e,t,i){for(var s=this.model.template,l=s.indexOf("${"),n=s.indexOf("}");-1!=l&&-1!=n;){var o=s.substring(l,n+1),a=o.replace("${","").replace("}",""),r=this._getField(e,a);t==a&&(r=i),r||(r=""),l=(s=s.split(o).join(r)).indexOf("${"),n=s.indexOf("}")}return s},_getField:function(e,i){return t.pvt.getObject(i,e)},_setAttributes:function(t,i){if(t)for(var s in"string"==typeof t&&(t=e.parseJSON(t)),t)i.setAttribute(s,t[s])},_setListWidth:function(){var e=this.model.popupWidth;e&&"auto"!=e?this.suggestionList.css({width:e}):this.suggestionList.css({width:this.wrapper.width()})},_setListHeight:function(){this.suggestionList.css({"max-height":this.model.popupHeight})},_refreshPopup:function(){"auto"==this.model.popupWidth&&this.wrapper.outerWidth()!=this.suggestionList.outerWidth()&&(this.suggestionList.css({width:this.wrapper.width()}),this._refreshScroller()),this._setListPosition()},_showResult:function(s){var l,n,o,a;this._refreshScroller(),this._refreshPopup(),this._isOpened?e(document).on("mousedown",e.proxy(this._OnDocumentClick,this)):(this.suggestionList.css("display","none"),l=this,clearTimeout(this._typing),this._typing=setTimeout(function(){l.suggestionList["slide"==l.model.animateType?"slideDown":"fadeIn"]("none"==l.model.animateType?0:300,function(){e(document).on("mousedown",e.proxy(l._OnDocumentClick,l))})},this.model.delaySuggestionTimeout),n=s!=i?{event:s,isInteraction:!0}:{isInteraction:!1},this._trigger("open",n),this.wrapper.addClass("e-active")),this._isOpened=!0,this.showSuggestionBox=!0,o=this._getLiTags(),this._listSize=o.length,e(window).on("resize",e.proxy(this._OnWindowResize,this)),(a=t.getScrollableParents(this.wrapper))[0]!=window&&this._on(a,"scroll",this._hideResult)},_hideResult:function(s){var l,n;this.showSuggestionBox&&(this.showSuggestionBox=!1,this._activeItem=0,clearTimeout(this._hiding),this.element.attr("aria-expanded",!1),l=this,this._isOpened?(this.suggestionList.css("display","none"),n=s!=i?{event:s,isInteraction:!0}:{isInteraction:!1},this._trigger("close",n)):this._hiding=setTimeout(function(){l.model&&l.suggestionList["slide"==l.model.animateType?"slideUp":"fadeOut"]("none"==l.model.animateType?0:100),l._activeItem=0},this.model.delaySuggestionTimeout),e(document).off("mousedown",e.proxy(this._OnDocumentClick,this)),e(window).off("resize",e.proxy(this._OnWindowResize,this)),this._off(t.getScrollableParents(this.wrapper),"scroll",this._hideResult),this.wrapper.removeClass("e-active"))},_refreshScroller:function(){this.suggestionList.css("height","auto"),this.suggestionList.find(".e-content , .e-scroller").removeAttr("style"),this.model.multiColumnSettings.enable&&this.model.multiColumnSettings.showHeader&&(e(this._tableColumn).attr("width","auto"),e(this._tableHeader).attr("width","auto")),this.suggestionList.css("display","block"),this.model.multiColumnSettings.enable&&(this.scrollerObj.option("height","auto"),this._columnBorderAlign());var i=this.suggestionList.height()>parseInt(e.isNumeric(this.model.popupHeight)?this.model.popupHeight:this.model.popupHeight.replace("px",""))-4;i||this.model.multiColumnSettings.enable&&(this.suggestionList.height()<=this._tableColumn.height()||this.suggestionList.width()<=this._tableColumn.width()||this.model.multiColumnSettings.showHeader&&this.suggestionList.width()<=this._tableHeader.width())?(i&&(this.scrollerObj.model.height=this.model.multiColumnSettings.showHeader&&this._tableHeader?parseInt(this.suggestionList.height())-parseInt(this._tableHeader.height()):this.suggestionList.height()),!this.model.multiColumnSettings.enable&&this.suggestionList.width()<this.suggestionList.find(".e-ul").width()&&this.suggestionList.find(".e-ul").width(this.suggestionList.find(".e-ul").width()),this.scrollerObj.model.width=this.suggestionList.width(),this.scrollerObj.refresh(),this.scrollerObj.option({enableRTL:this.model.enableRTL,scrollTop:0,scrollLeft:0}),this.model.multiColumnSettings.enable&&this.model.multiColumnSettings.showHeader&&this._addThBorder(),this.suggestionList.addClass("e-scroller"),!this.scrollerObj._vScroll&&this.model.multiColumnSettings.enable&&this.model.multiColumnSettings.showHeader&&this._removeThBorder()):(this.suggestionList.removeClass("e-scroller"),this.scrollerObj.refresh(),this.model.multiColumnSettings.enable&&this.model.multiColumnSettings.showHeader&&this._removeThBorder()),this.suggestionList.css("height","auto"),this._isIE8&&this.suggestionList.find(".e-vscroll div, .e-hscroll div").attr("unselectable","on"),this.model.multiColumnSettings.enable&&this.model.multiColumnSettings.showHeader&&(this.suggestionList.find(".e-content").scroll(t.proxy(function(t){this._tableHeader.parent(".e-atc-tableHeaderContent").scrollLeft(e(t.currentTarget).scrollLeft())},this)),this.suggestionList.find(".e-content").length>0&&this._tableHeader.parent(".e-atc-tableHeaderContent").scrollLeft(this.model.enableRTL?this.suggestionList.find(".e-content")[0].scrollWidth-this.suggestionList.find(".e-content")[0].clientWidth:0))},_columnBorderAlign:function(){var t,i,s;if(this.model.multiColumnSettings.enable&&this.model.multiColumnSettings.showHeader&&"none"!=this._tableHeaderDiv.css("display")){for(this._tableWid=this._tableHeader.outerWidth()>this._tableColumn.outerWidth()?this._tableHeader.outerWidth():this._tableColumn.outerWidth(),this._tableColumn.find("colgroup").remove(),e(this._headerColGroup.children).removeAttr("style"),i=0,s=this._headerColGroup.children.length;i<s;i++)e(this._headerColGroup.children[i]).css({width:parseInt(e(this._tableColumn).find("tr:first td").eq(i).outerWidth())>parseInt(this._tableHeader.find("tr:first th").eq(i).outerWidth())?e(this._tableColumn).find("tr:first td").eq(i).outerWidth():this._tableHeader.find("tr:first th").eq(i).outerWidth()});this._tableColumn.append(e(this._headerColGroup).clone()),t=this._tableWid>this.suggestionList.width()?this._tableWid:"100%",e(this._tableColumn).attr("width",t),e(this._tableHeader).attr("width",t)}else if(this.model.multiColumnSettings.enable&&!this.model.multiColumnSettings.showHeader){if(e(this._tableColumn).attr("width","auto"),this._tableWid=this._tableColumn.outerWidth(),e(this._headerColGroup.children).removeAttr("style"),"100%"!=(t=this._tableWid>this.suggestionList.width()?this._tableWid:"100%")){for(i=0,s=this._headerColGroup.children.length;i<s;i++)e(this._headerColGroup.children[i]).css({width:e(this._tableColumn).find("tr:first td").eq(i).outerWidth()});this._tableColumn.append(this._headerColGroup)}e(this._tableColumn).attr("width",t)}else e(this._tableColumn).attr("width","100%")},_removeThBorder:function(){this._tableHeader.parents(".e-atc-tableHeader").removeClass(this.model.enableRTL?"e-atc-tableHeaderRTL":"e-atc-tableHeaderScroll"),this._tableHeader.parent(".e-atc-tableHeaderContent").removeClass("e-atc-tableHeaderBorder")},_addThBorder:function(){this._tableHeader.parents(".e-atc-tableHeader").addClass(this.model.enableRTL?"e-atc-tableHeaderRTL":"e-atc-tableHeaderScroll").removeClass(this.model.enableRTL?"e-atc-tableHeaderScroll":"e-atc-tableHeaderRTL"),this._tableHeader.parent(".e-atc-tableHeaderContent").addClass("e-atc-tableHeaderBorder")},_setListPosition:function(){var t,i=this.wrapper,s=this._getOffset(i),l=e(document).scrollTop()+e(window).height()-(s.top+e(i).outerHeight()),n=s.top-e(document).scrollTop(),o=this.suggestionList.outerHeight(),a=this.suggestionList.outerWidth(),r=s.left,d=i.outerHeight(),h=(d-i.height())/2,c=this._getZindexPartial(),u=(o<l||o>n?s.top+d+3:s.top-o-3)-h;t=e(document).scrollLeft()+e(window).width()-r,(this.model.enableRTL||a>t&&a<r+i.outerWidth())&&(r-=this.suggestionList.outerWidth()-i.outerWidth()),this.suggestionList.css({left:r+"px",top:u+"px","z-index":c})},_getOffset:function(e){return t.util.getOffset(e)},_getZindexPartial:function(){return t.util.getZindexPartial(this.element,this.suggestionList)},_targetFocus:function(e){"visualmode"==this.model.multiSelectMode&&this._setWatermarkWidth(30),this._isWatermark||this._hiddenSpan.css("display","none"),this.wrapper.addClass("e-focus"),this._isFocused=!0,this._trigger("focusIn",{event:e,isInteraction:!0,value:this.value()})},_focusOutAction:function(e){var i,s;this._isFocused=!1,this.wrapper.removeClass("e-focus"),this._isWatermark||this._setWatermarkTxt(),this._removeSelection(),"visualmode"==this.model.multiSelectMode&&this.model.showResetIcon&&""!=this.element.val()&&this._removeReset(),"visualmode"==this.model.multiSelectMode?(this._removeActive(),this.element.val(""),this._setWatermarkWidth(1),this._preVal="",this._addNewTemplate=null):("delimiter"==this.model.multiSelectMode&&this._valueChange(e),this._updateSelectedItemArray(this.getValue())),t.isNullOrUndefined(this.value())||""==this.value()||(i=this.value().split(this.model.delimiterChar),("delimiter"==this.model.multiSelectMode||"none"==this.model.multiSelectMode)&&(s=this._removeDuplicateVal(i),this._keyProcess(s))),""==this.element.val()&&(""==this.value()||null==this.value())&&this._selectValueByKey(null)},_targetBlur:function(e){this._focusOutAction(e),this._trigger("focusOut",{event:e,isInteraction:!0,value:this.value()})},_setWatermarkWidth:function(e){this.model.watermarkText&&this.element.attr("placeholder")?this.element.width(""):this.element.val("").width(e)},_checkDeli:function(){var e=this.element.val(),t=this.model.delimiterChar;return e.substr(e.length-t.length,e.length)==t&&(this.element.val(e.substr(0,e.length-t.length)),!0)},_removeSelection:function(){if(this.model.enableAutoFill){this.element.attr("aria-autocomplete","both");var e=this._getCaretSelection();e.end-e.start!=0&&e.end-e.start!=this.element.val().length&&(this.target.value=this.target.value.substr(0,e.start))}},_removeListHover:function(){this._getLiTags().removeClass("e-hover")},_addListHover:function(){var t=e(this._getLiTags()[this._activeItem-1]);t.addClass("e-hover"),this.scrollerObj.setModel({scrollTop:this._calcScrollTop()}),t.focus()},_calcScrollTop:function(){this.model.multiColumnSettings.enable?this.model.multiColumnSettings.showHeader?(this._tableColumn.outerHeight(),this._tableHeader.outerHeight()):this._tableColumn.outerHeight():this.ul.outerHeight();var e,t=this.model.multiColumnSettings.enable?this._tableColumn.find("tr"):this.ul.find("li");return e=this.model.multiColumnSettings.enable?this._tableColumn.find("tr.e-hover").index():this.ul.find("li.e-hover").index(),t.eq(1).outerHeight()*e-((this.model.multiColumnSettings.enable?this._tableColumn.parent().outerHeight():this.suggestionList.outerHeight())-t.eq(e).outerHeight())/2},getActiveText:function(){if(this._activeItem>0)return this.model.multiColumnSettings.enable?this._textFormateString(this._currList[this._activeItem-1]):!t.isNullOrUndefined(this._mapper)&&this._mapper.txt?this._getField(this._currList[this._activeItem-1],this._mapper.txt):this._currList[this._activeItem-1]},_getUniqueKey:function(){var e=null;return t.isNullOrUndefined(this._mapper)||(this._mapper.key&&(e=this._getField(this._currList[this._activeItem-1],this._mapper.key)),t.isNullOrUndefined(e)&&(e=null)),e},_setTextBoxValue:function(){var t,i,s,l,n,o;this._activeItem&&!this.noresult&&(t=this.model.multiColumnSettings.enable?this._textFormateString(this._currList[this._activeItem-1]):this.getActiveText(),i=this._getCaretSelection(),this.suggLen=i.start,s=this.target.value.substr(0,this.suggLen),o=-1==(n=this.target.value.lastIndexOf(this.model.delimiterChar))?e.trim(s.substr(n+1,this.suggLen)):e.trim(s.substr(n+this.model.delimiterChar.length,this.suggLen)),!s||s.toLowerCase()!=t.substr(0,this.suggLen).toLowerCase()&&o.toLowerCase()!=t.substr(0,this.suggLen-(n+this.model.delimiterChar.length)).toLowerCase()?("delimiter"==this.model.multiSelectMode&&t&&o?this.element.val(this.element.val().replace(o,t)):t&&this.element.val(t),this._removeSelection()):(l="delimiter"==this.model.multiSelectMode?s+t.substr(o.length,t.length):s+t.substr(s.length,t.length),this.element.val(l),this._autofilSelection(),"visualmode"==this.model.multiSelectMode&&(this._adjustWidth(),this.model.enableAutoFill&&this._refreshPopup()),this.model.autoFocus&&!this.noresult&&this._addListHover()))},_enterTextBoxValue:function(e){var t,i,s;!this._activeItem||this.noresult||this.model.readOnly||(t=this.getActiveText(),i=this._currList[this._activeItem-1],this._preVal=t+("delimiter"==this.model.multiSelectMode?this.model.delimiterChar:""),this._valueToTextBox(t,i,!1),s="visualmode"==this.model.multiSelectMode?this._modelValue:""==this.element.val()?null:this.element.val(),this._trigger("select",{event:e,isInteraction:!0,value:s,text:t,key:this._getUniqueKey(),item:i}),this._valueChange(e),this.model.showResetIcon&&this._showReset()),this._isOpened&&this._trigger("close",{event:e,isInteraction:!0})},_createBox:function(i){var s=t.buildTag("span.e-icon e-close"),l=t.buildTag("li.e-options",i).append(s);return this._on(s,"click",function(t){if(!this.model.enabled)return!1;this._deleteBox(e(t.target).parent())}),l},_addLoadingClass:function(){this.model.showLoadingIcon&&this.element.addClass("e-load")},_removeLoadingClass:function(){this.element.removeClass("e-load")},_highlightSuggestion:function(t){var i,s,l,n,o,a,r,d,h;if(""!=e.trim(this._queryString)&&(i=this.model.caseSensitiveSearch?"g":"gi",a=e.trim(this._queryString),a=/^[a-zA-Z0-9- ]*$/.test(a)?a:a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),s="startswith"==this.model.filterType?"^"+a:"endswith"==this.model.filterType?a+"$":a,(l=new RegExp(s,i)).test(t)))for(n=t.match(l),r=t.replace(l,"~^"),t="",d=0,h=(o=r.split("~^")).length;h>d;d++)t+=n[d]?o[d]+"<span class='e-hilight-txt'>"+n[d]+"</span>":o[d];return t},_RightToLeft:function(e){e?(this.wrapper.addClass("e-rtl"),this.suggestionList.addClass("e-rtl")):(this.wrapper.removeClass("e-rtl"),this.suggestionList.removeClass("e-rtl")),this.model.multiColumnSettings.enable&&this.model.multiColumnSettings.showHeader&&(this._tableHeaderDiv.removeClass(e?"e-atc-tableHeaderRTL":"e-atc-tableHeaderScroll"),this._tableHeader.find("tr :not(th:last)").addClass(e?"e-atc-thleft":"e-atc-thright").removeClass(e?"e-atc-thright":"e-atc-thleft"))},_setRoundedCorner:function(e){e?(this.container.addClass("e-corner"),this.suggestionList.addClass("e-corner")):(this.container.removeClass("e-corner"),this.suggestionList.removeClass("e-corner"))},_checkReadOnly:function(e){this.model.readOnly=e,this.model.readOnly?(this.element.attr({readonly:"readonly","aria-readonly":!0}),this._off(this.element,"keydown",this._OnKeyDown),this._off(this.element,"keyup",this._OnKeyUp),this._off(this.element,"paste",this._OnPaste),this._off(this.element,"keypress",this._onkeyPress)):(this.element.removeAttr("readonly aria-readonly"),this._on(this.element,"keydown",this._OnKeyDown),this._on(this.element,"keyup",this._OnKeyUp),this._on(this.element,"paste",this._OnPaste),this._on(this.element,"keypress",this._onkeyPress))},_onkeyPress:function(e){13==e.keyCode&&this._PreventDefaultAction(e)},_OnPaste:function(e){var t=this;setTimeout(function(){t._OnKeyUp(e)},0)},_OnKeyDown:function(t){var i;switch("startswith"!=this.model.filterType&&(this.model.enableAutoFill=!1),t.keyCode){case 37:case 35:case 36:this._removeSelection();break;case 38:this.showSuggestionBox&&this.suggestionList&&(this._removeListHover(),this._activeItem>1?this._activeItem-=1:this._activeItem=this._listSize,this._navigationHover()),this._PreventDefaultAction(t);break;case 40:this.showSuggestionBox&&this.suggestionList?(this._removeListHover(),this._activeItem<this._listSize?this._activeItem+=1:this._activeItem=1,this._navigationHover()):t.ctrlKey&&""==this.element.val()?this._showFullList(t):t.ctrlKey&&this._showSuggestionList(t),this._PreventDefaultAction(t);break;case 33:case 34:if(this.showSuggestionBox&&this.suggestionList){this._removeListHover();var s=this.model.multiColumnSettings.enable?this._tableColumn.parent().height():this.suggestionList.height(),l=this.model.multiColumnSettings.enable?this._tableColumn.find("tr").outerHeight():this.ul.children("li").outerHeight(),n=0!=Math.round(s/l)?Math.round(s/l):this._listSize;this._activeItem=33==t.keyCode?this._activeItem-n:this._activeItem+n,this._activeItem<1&&(this._activeItem=1),this._activeItem>this._listSize&&(this._activeItem=this._listSize),this._navigationHover()}this._PreventDefaultAction(t);break;case 8:""==e.trim(this.element.val())&&(this._isOpened=!1),"visualmode"==this.model.multiSelectMode&&""==this.element.val()&&this._deleteLastBox();break;case 17:this.ctrlKeyPressed=!0;break;case 9:this.showSuggestionBox&&(this._queryString=this.element.val(),this._enterTextBoxValue(t),this._hideResult(t),this._isOpened=!1,this._PreventDefaultAction(t));break;case 27:this._isOpened=!1,i=this.showSuggestionBox,this._hideResult(t),this._PreventDefaultAction(t),i&&this._trigger("close",{event:t,isInteraction:!0})}"visualmode"==this.model.multiSelectMode&&(17!=t.keyCode&&8!=t.keyCode&&46!=t.keyCode&&this._removeActive(),this._adjustWidth())},_PreventDefaultAction:function(e){e.preventDefault(),this._cancelEvent||(e.stopPropagation(),e.cancelBubble=!0,e.returnValue=!0)},_bubbleEvent:function(e){return"boolean"==typeof e&&(this._cancelEvent=e),this._cancelEvent},_navigationHover:function(){this._addListHover(),this.model.enableAutoFill&&(this.element.attr("aria-autocomplete","both"),this._queryString=this.target.value,this._setTextBoxValue())},_OnKeyUp:function(t){if(this._keyDownComplete(t),this.ctrlKeyPressed&&"paste"!=t.type)return 17==t.keyCode&&(this.ctrlKeyPressed=!1),!1;if(""==e.trim(this.element.val())&&38==t.keyCode&&40==t.keyCode)return this._hideResult(t),!1;if(!this._checkDelimiter())return!1;switch(this._queryString=e.trim(this._queryString),t.keyCode){case 34:case 33:case 38:case 40:case 37:case 39:case 20:case 16:case 17:case 18:case 35:case 36:case 144:case 9:case 27:break;case 13:t.preventDefault(),this._queryString=this.element.val(),this._enterTextBoxValue(t),this.model.enableAutoFill&&(this.element.attr("aria-autocomplete","both"),this.suggLen=this.element.val().length,this._autofilSelection()),this._isOpened=!1,this._hideResult(t);break;case 46:if("visualmode"==this.model.multiSelectMode&&""==this.element.val()){this._deleteBox(this._ulBox.children("li.e-active"));break}case 8:this._queryString.length>=this.model.minCharacter?(this._autoFill=!1,this._OnTextEnter(t)):(this.noresult=!0,this._hideResult(t),""==e.trim(this.element.val())&&(this._isOpened=!1)),this._typed=!0;break;default:this._queryString.length>=this.model.minCharacter?(this._autoFill=!0,this._OnTextEnter(t)):this.noresult=!0,this._typed=!0}},_getFilteredList:function(e,i){var s,l;clearTimeout(this.timeDelay),t.isNullOrUndefined(e)||"object"!=typeof e[0]||(s=this.model.fields.text?this.model.fields.text:"text",this.model.actionFailure&&t.isNullOrUndefined(t.DataManager(e).executeLocal(t.Query().select(s))[0])&&this._trigger("actionFailure",{error:this._localizedLabels.actionFailure})),!e||!e.length||e.length<1?(this.suggestionListItems=[],this.model.actionFailure&&this._trigger("actionFailure",{error:this._localizedLabels.actionFailure})):(l=t.Query(),this._addQuery(l,"object"==typeof e[0]),this.suggestionListItems=t.DataManager(e).executeLocal(l),this.model.actionSuccess&&this._trigger("actionSuccess")),this._doneRemaining(i),this.model.actionComplete&&this._trigger("actionComplete")},_performSearch:function(e){var i,s;this.model.actionBegin&&this._trigger("actionBegin"),i=this.model.dataSource,t.DataManager&&i instanceof t.DataManager?i.dataSource.offline||i.dataSource.json&&i.dataSource.json.length>0?(this._getFilteredList(i.dataSource.json,e),this._selectedObj.push(i.dataSource.json)):(window.clearTimeout(this.timer),s=this,this.timer=window.setTimeout(function(){s._fetchRemoteDat(i)},700)):this._getFilteredList(i,e)},_fetchRemoteDat:function(e){var t=this,i=this._getQuery();this._addQuery(i,!0),e.executeQuery(i).fail(function(e){t.suggestionListItems=null,t._removeLoadingClass(),t._trigger("actionFailure",e)}).done(function(e){t.suggestionListItems=e.result,"none"==t.model.multiSelectMode?t._selectedObj=e.result:"delimiter"==t.model.multiSelectMode&&(t._selectedObj=t._selectedObj.concat(e.result)),t._doneRemaining(e),t._trigger("actionSuccess",e)}).always(function(e){t._trigger("actionComplete",e)})},_addSortingQuery:function(e,t){if(this.model.allowSorting){var i="descending"==this.model.sortOrder;e.sortBy(t,i)}},_addQuery:function(e,t){var i,s,l,n,o="";if(t&&(o=(s=this.model.fields)&&s.text?s.text:"text"),this._queryString)if(this.model.multiColumnSettings.enable)if(this._columnsIndex(),t){for(o=[],l=0,n=this._columnIndex.length;l<n;l++)o.push(this.model.multiColumnSettings.columns[this._columnIndex[l]].field),i=this._predicateConvertion(i,this.model.multiColumnSettings.columns[this._columnIndex[l]].field,this.model.multiColumnSettings.columns[this._columnIndex[l]].filterType?this.model.multiColumnSettings.columns[this._columnIndex[l]].filterType:"startswith",this._queryString,!this.model.caseSensitiveSearch,this.model.multiColumnSettings.columns[this._columnIndex[l]].type?this.model.multiColumnSettings.columns[this._columnIndex[l]].type:"string");e.where(i)}else e.where(o,this.model.filterType,this._queryString,!this.model.caseSensitiveSearch);else e.where(o,this.model.filterType,this._queryString,!this.model.caseSensitiveSearch);this._addSortingQuery(e,o)},_predicateConvertion:function(e,s,l,n,o,a){var r;return"number"==a?r=Number(n):"boolean"==a?"true"==n||"yes"==n||"1"==n?r=!0:("false"==n||"no"==n||"0"==n)&&(r=!1):r="date"==a?new Date(n):n,"number"==a&&isNaN(r)||"boolean"==a&&r==i?e:e!=i?e.or(s,l,r,o):t.Predicate(s,l,r,o)},_getQuery:function(){var e;if(t.isNullOrUndefined(this.model.query)){var i=[],s=t.Query(),l=this.model.fields;for(e in l)"tableName"!==e&&l[e]&&i.push(l[e]);i.length>0&&s.select(i),t.isNullOrUndefined(this.model.dataSource.dataSource.url)||this.model.dataSource.dataSource.url.match(l.tableName+"$")||t.isNullOrUndefined(l.tableName)||s.from(l.tableName)}else s=this.model.query.clone();return s},_OnTextEnter:function(e){var i=this;t.isDevice()?(clearTimeout(this.timeDelay),this.timeDelay=setTimeout(function(){i._onTextProcess(e)},i.model.delaySuggestionTimeout)):i._onTextProcess(e)},_onTextProcess:function(e){this._addLoadingClass(),this.element.attr("aria-expanded",!1),this._performSearch(e),this.model.showResetIcon&&this._showReset()},_showReset:function(){t.isNullOrUndefined(this.resetSpan)&&(this.resetSpan=t.buildTag("span.e-icon e-iclose"),this.model.showPopupButton?(this.dropdownbutton.before(this.resetSpan),this.container.addClass("e-popup e-reset")):this.container.append(this.resetSpan).addClass("e-reset")),this._on(this.resetSpan,"mousedown",this._refreshSearch)},_refreshSearch:function(){this.resetSpan=null,this.clearText(),this._refreshPopup()},_removeReset:function(){this.resetSpan=this.resetSpan&&this.resetSpan[0].remove(),this._refreshPopup()},_doneRemaining:function(e){this._showSuggestionList(e),this.element.attr({"aria-expanded":!0,"aria-haspopup":!0}),(this.model.enableAutoFill&&this._autoFill&&!this.noresult||this.model.autoFocus)&&(this.element.attr("aria-autocomplete","both"),this._activeItem=1,this._queryString=this.target.value),this.model.enableAutoFill&&this._autoFill&&!this.noresult&&this._setTextBoxValue(),this.model.autoFocus&&!this.noresult&&this._addListHover(),this._removeLoadingClass(),this.noresult&&!this.model.showEmptyResultText&&this._hideResult(e)},_removeRepeated:function(){var e,t,i,s=this.suggestionListItems;if(!s||0==s.length||0==this._selectedItems.length||1==this.suggestionListItems.length&&this.suggestionListItems[0]==this.element.val()+this._addNewTemplate)return!1;for(this._repeatRemove=!1,e=0,t=this._selectedItems.length;e<t;e++)-1!=(i=s.indexOf(this._selectedItems[e]))&&this.suggestionListItems.splice(i,1),this.element.val()==this._selectedItems[e]&&(this._repeatRemove=!0)},_checkDelimiter:function(){this._queryString=this.element.val();var e="delimiter"!=this.model.multiSelectMode?-1:this._queryString.lastIndexOf(this.model.delimiterChar);return-1==e||(this._queryString=this._queryString.substr(e+this.model.delimiterChar.length,this._queryString.length)),!0},_autofilSelection:function(){var e=this.element[0],t=this.element.val().length;e.setSelectionRange?e.setSelectionRange(this.suggLen,t):e.createTextRange&&((e=e.createTextRange()).collapse(!0),e.moveEnd("character",t),e.moveStart("character",this.suggLen),e.select())},_OnDropdownClick:function(e){this.model.enabled&&!this.model.readOnly&&(e.preventDefault(),(e.which&&1==e.which||e.button&&0==e.button)&&(this._addLoadingClass(),this.showSuggestionBox?(this._hideResult(e),this._isOpened=!1,this._removeLoadingClass()):this._showFullList(e)))},_showFullList:function(e){this._isFocused||this.element.focus(),this._queryString=null,this._autoFill=!1,this._performSearch(e)},_OnMouseEnter:function(e){this._getActiveItemIndex(e)},_getActiveItemIndex:function(t){var i=t.target;this.model.multiColumnSettings.enable&&"tr"!=t.target.tagName.toLowerCase()?i=e(t.target).parents("tr"):"li"!=t.target.tagName.toLowerCase()&&(i=e(t.target).parents("li")),this._getLiTags().removeClass("e-hover"),e(i).addClass("e-hover"),this._queryString=this.element.val(),this._activeItem=this._getLiTags().index(e(i))+1},_OnMouseLeave:function(){this._getLiTags().removeClass("e-hover"),this.model.highlightSearch&&this._getLiTags().find(".e-hilight-txt").removeClass("e-hover")},_OnMouseClick:function(e){this._getActiveItemIndex(e),this.noresult||(this._enterTextBoxValue(e),this._isOpened=!1,this._hideResult(e))},_OnDocumentClick:function(t){e(t.target).is(this.suggestionList)||e(t.target).parents(".e-atc-popup").is(this.suggestionList)||e(t.target).is(this.element)||e(t.target).parents(".e-atc").is(this.wrapper)?(e(t.target).is(this.suggestionList)||e(t.target).parents(".e-atc-popup").is(this.suggestionList))&&t.preventDefault():(this._isOpened=!1,this._hideResult(t),this._trigger("close",{event:t,isInteraction:!0}))},_OnWindowResize:function(){this._refreshPopup()},_keyProcess:function(e){var i,s,l,n,o=this._declareVariable();if(i=this._delimiterChar(),!t.isNullOrUndefined(e))for(s=0,l=e.length;s<l;s++)n=e[s],t.DataManager&&this.model.dataSource instanceof t.DataManager?this._selectValueByKey(null):(this._dataQuery=this.model.multiColumnSettings.enable?t.Query():t.Query().where(o[0],this.model.filterType,n,!1),this._promise=t.DataManager(this.model.dataSource).executeLocal(this._dataQuery),this.model.multiColumnSettings.enable?this._formatStringKey(e,o,i):this._promise instanceof Array&&0==this._promise.length?null!=this._selectValueByKey()&&this._selectValueByKey():this._getFieldKey(this._promise[0],o[1],i))},_formatStringKey:function(e,t,i){var s,l,n,o,a,r;for(this._selectValueByKey(null),s=0,l=e.length;s<l;s++)if(""!=e[s]){for(n=e[s],a=0,r=this._promise.length;a<r;a++)n==this._textFormateString(this._promise[a])&&(o=a);o?this._getFieldKey(this._promise[o],t[1],i):null!=this._selectValueByKey()&&this._selectValueByKey()}},_getFieldKey:function(i,s,l){if((t.isNullOrUndefined(this.model.template)||!t.isNullOrUndefined(this._getField(i,s)))&&!t.isNullOrUndefined(this._getField(i,s))){if(a=this._getField(i,s).toString(),"none"!=this.model.multiSelectMode){var n,o,a=this._selectValueByKey();delimiterChar=this.model.delimiterChar,n=this._getField(i,s).toString(),null!=a?(o=a.toString().split(l).filter(function(e){return""!==e}),-1==e.inArray(n,o)?(o.push(n),a=o.join(delimiterChar)+delimiterChar):a=n+delimiterChar):a=n+delimiterChar}this._selectValueByKey(a)}},_removeDuplicateVal:function(i){var s=[];return e.each(i,function(t,i){-1==e.inArray(i,s)&&s.push(i)}),1!=i.length||t.isNullOrUndefined(this._originalval)||-1==e.inArray(i[0],this._originalval)&&this._selectValueByKey(null),s},_valueChange:function(e){var t="visualmode"==this.model.multiSelectMode?this._modelValue:this.element.val();(this.value()!=t||""==t&&""!=this.element.val())&&(this.value(t),this._changeEvtTrigger(t,e)),this.model.showResetIcon&&!t&&(this.wrapper.find("span.e-iclose").remove(),this.resetSpan=null)},_changeEvtTrigger:function(e,t){var s=t!=i?{event:t,isInteraction:!0,value:e}:{isInteraction:!1,value:e};this.initialRender||(this._trigger("_change",{value:e}),this._trigger("change",s))},_updateSelectedItemArray:function(i){var s,l,n,o=[];if(this._selectedItems=[],this.suggestionListItems=this.model.dataSource,"delimiter"==this.model.multiSelectMode&&i)if(o=i.split(this.model.delimiterChar),t.DataManager&&this.model.dataSource instanceof t.DataManager||!t.isNullOrUndefined(this.suggestionListItems)&&"object"!=typeof this.suggestionListItems[0]){for(s=0,l=o.length;s<l;s++)if(o[s]){var a=this,r=this._selectedObj.length,d={};for(n=0;n<r;n++)this._selectedObj[n][a.model.fields.text]==o[s]&&(d=this._selectedObj[n],n=r);this._selectedItems.push(e.isEmptyObject(d)?o[s]:d)}}else this._createBoxForObjectType(o);else"none"==this.model.multiSelectMode&&i&&(o.push(i),t.DataManager&&this.model.dataSource instanceof t.DataManager||!t.isNullOrUndefined(this.suggestionListItems)&&"object"!=typeof this.suggestionListItems[0]?(a=this,d=e.grep(this._selectedObj,function(e){if(e[a.model.fields.text]==i)return e}),this._selectedItems.push(d.length>0?d:i)):this._createBoxForObjectType(o))},_keyDownComplete:function(e){var t=this.element.val();this._preVal!=t&&(this._preVal=t,"visualmode"==this.model.multiSelectMode&&this._adjustWidth(),this._valueChange(e))},_moveCaretToEnd:function(e){var t,i;e.scrollLeft=e.scrollWidth,e.createTextRange&&((t=e.createTextRange()).moveEnd("textedit"),t.moveStart("textedit"),t.select()),"number"==typeof e.selectionStart?e.selectionStart=e.selectionEnd=e.value.length:void 0!==e.createTextRange&&((i=e.createTextRange()).collapse(!1),i.select())},_getCaretSelection:function(){var e,t,i,s,l=this.element[0],n=0,o=0;return isNaN(l.selectionStart)?(e=document.selection.createRange().getBookmark(),(t=l.createTextRange()).moveToBookmark(e),(i=l.createTextRange()).collapse(!0),i.setEndPoint("EndToStart",t),{start:s=i.text.length,end:s+t.text.length}):(n=l.selectionStart,o=l.selectionEnd,{start:Math.abs(n),end:Math.abs(o)})},_getLocalizedLabels:function(){return t.getLocalizedConstants(this.sfType,this.model.locale)},_wireEvents:function(){this._on(this.element,"focus",this._targetFocus),this._on(this.element,"blur",this._targetBlur)}}),t.Autocomplete.Locale=t.Autocomplete.Locale||{},t.Autocomplete.Locale.default=t.Autocomplete.Locale["en-US"]={addNewText:"Add New",emptyResultText:"No suggestions",actionFailure:"The specified field doesn't exist in given data source"},t.filterType={StartsWith:"startswith",Contains:"contains",EndsWith:"endswith",LessThan:"lessthan",GreaterThan:"greaterthan",LessThanOrEqual:"lessthanorequal",GreaterThanOrEqual:"greaterthanorequal",Equal:"equal",NotEqual:"notequal"},t.SortOrder={Ascending:"ascending",Descending:"descending"},t.MultiSelectMode={None:"none",Delimiter:"delimiter",VisualMode:"visualmode"},t.Animation={None:"none",Slide:"slide",Fade:"fade"},t.Type={Number:"number",String:"string",Boolean:"boolean",Date:"date"}}(jQuery,Syncfusion)}),
/*!
*  filename: ej.datepicker.min.js
*  version : 14.4.0.15
*  Copyright Syncfusion Inc. 2001 - 2016. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
function(e){"function"==typeof define&&define.amd?define(["./../common/ej.globalize.min","./../common/ej.core.min","./../common/ej.touch.min"],e):e()}(function(){var e,t,l;e=jQuery,(t=Syncfusion).widget("ejDatePicker","ej.DatePicker",{element:null,_rootCss:"e-datepicker",model:null,validTags:["input","div","span"],_setFirst:!1,_addToPersist:["value"],_cancelValue:!1,type:"editor",angular:{require:["?ngModel","^?form","^?ngModelOptions"],requireFormatters:!0},defaults:{dayHeaderFormat:"min",showPopupButton:!0,enableAnimation:!0,showFooter:!0,displayInline:!1,htmlAttributes:{},dateFormat:"",watermarkText:"Select date",value:null,minDate:new Date(1900,0,1),maxDate:new Date(2099,11,31),startLevel:"month",depthLevel:"",cssClass:"",startDay:-1,stepMonths:1,locale:"en-US",showOtherMonths:!0,enableStrictMode:!1,enablePersistence:!1,enabled:!0,width:"",height:"",enableRTL:!1,showRoundedCorner:!1,headerFormat:"MMMM yyyy",buttonText:"Today",readOnly:!1,specialDates:null,fields:{date:"date",tooltip:"tooltip",iconClass:"iconClass",cssClass:"cssClass"},showTooltip:!0,showDisabledRange:!0,highlightSection:"none",highlightWeekend:!1,validationRules:null,validationMessage:null,allowEdit:!0,tooltipFormat:"ddd MMM dd yyyy",allowDrillDown:!0,blackoutDates:[],beforeDateCreate:null,open:null,close:null,select:null,change:null,focusIn:null,focusOut:null,beforeOpen:null,beforeClose:null,navigate:null,create:null,destroy:null},dataTypes:{startDay:"number",stepMonths:"number",showOtherMonths:"boolean",enableStrictMode:"boolean",showRoundedCorner:"boolean",enableRTL:"boolean",displayInline:"boolean",showPopupButton:"boolean",locale:"string",readOnly:"boolean",cssClass:"string",dateFormat:"string",watermarkText:"string",headerFormat:"string",buttonText:"string",specialDates:"data",showTooltip:"boolean",highlightSection:"enum",highlightWeekend:"boolean",enableAnimation:"boolean",validationRules:"data",validationMessage:"data",htmlAttributes:"data",tooltipFormat:"string",allowEdit:"boolean",allowDrillDown:"boolean"},_setModel:function(i){var s,l,n=!1,o=!1,a=!1;for(s in i)switch(s){case"dayHeaderFormat":this.model.dayHeaderFormat=i[s],n=o=!0;break;case"showPopupButton":this._renderDateIcon(i[s],!0);break;case"displayInline":this._setDisplayInline(i[s]),this.model.allowEdit||i[s]||!this._isInputBox()||this.element.on("mousedown",e.proxy(this._showDatePopUp,this));break;case"value":t.isPlainObject(i[s])&&(i[s]=null),t.isNullOrUndefined(i.minDate)&&t.isNullOrUndefined(i.maxDate)?(this._setDateValue(i[s]),this._specificFormat()&&(this._stopRefresh=!0),i[s]=this.model.value):this._updateDateValue(i[s]),a=n=o=!0;break;case"specialDates":this.model.specialDates=i[s],this._createSpecialDateObject(),n=o=!0;break;case"fields":this.model.fields=i[s],this._mapField=this._getMapper(),n=o=!0;break;case"showTooltip":this.model.showTooltip=i[s],n=o=!0;break;case"highlightWeekend":this.model.highlightWeekend=i[s],n=o=!0;break;case"highlightSection":this.model.highlightSection=i[s],n=o=!0;break;case"dateFormat":this.model.dateFormat=i[s],this._ensureValue();break;case"minDate":this._setMinDate(i[s]),i[s]=this.model.minDate,this._ensureValue(),a=n=o=!0;break;case"maxDate":this._setMaxDate(i[s]),i[s]=this.model.maxDate,this._ensureValue(),a=n=o=!0;break;case"locale":this.model.locale=i[s],this.model.startDay=t.isNullOrUndefined(this._options.startDay)&&this.model.startDay===this.culture.calendar.firstDay||this._options.startDay===this.defaults.startDay?-1:this.model.startDay,this.model.dateFormat=t.isNullOrUndefined(this._options.dateFormat)&&this.model.dateFormat===this.culture.calendar.patterns.d?"":this.model.dateFormat,this._setCulture(i[s]),this.model.value&&this._setDateValue(this.model.value),i[s]=this.model.locale,n=o=!0;break;case"showOtherMonths":this.model.showOtherMonths=i[s],this._otherMonthsVisibility();break;case"enableStrictMode":this.model.enableStrictMode=i[s],a=n=o=!0;break;case"validationRules":null!=this.model.validationRules&&(this.element.rules("remove"),this.model.validationMessage=null),this.model.validationRules=i[s],null!=this.model.validationRules&&(this._initValidator(),this._setValidation());break;case"validationMessage":this.model.validationMessage=i[s],null!=this.model.validationRules&&null!=this.model.validationMessage&&(this._initValidator(),this._setValidation());break;case"readOnly":this.model.readOnly=i[s],this._disbleMaualInput();break;case"width":this._setWidth(i[s]);break;case"height":this._setHeight(i[s]);break;case"cssClass":this._setSkin(i[s]);break;case"enableRTL":this._setRTL(i[s]);break;case"showRoundedCorner":this._setRoundedCorner(i[s]);break;case"enabled":i[s]?this.enable():this.disable();break;case"buttonText":t.isNullOrUndefined(this._options)&&(this._options={}),this._options.buttonText=this.model.buttonText=i[s],this._localizedLabels.buttonText=this.model.buttonText,this._setFooterText(i[s]);break;case"showFooter":this._enableFooter(i[s]);break;case"watermarkText":t.isNullOrUndefined(this._options)&&(this._options={}),this._options.watermarkText=this.model.watermarkText=i[s],this._localizedLabels.watermarkText=this.model.watermarkText,this._setWaterMark();break;case"startDay":l=i[s],(parseInt(i[s])<0||parseInt(i[s])>6)&&(i[s]=this.culture.calendar.firstDay,l=-1),this.model.startDay=i[s],t.isNullOrUndefined(this._options)&&(this._options={}),this._options.startDay=l,n=o=!0;break;case"startLevel":this.model.startLevel=i[s],n=o=!0;break;case"headerFormat":this.model.headerFormat=i[s],n=o=!0;break;case"depthLevel":this.model.depthLevel=i[s],n=o=!0;break;case"htmlAttributes":this._addAttr(i[s]);break;case"allowEdit":this._changeEditable(i[s]);break;case"tooltipFormat":this.model.tooltipFormat=i[s],n=o=!0;break;case"allowDrillDown":this._allowQuickPick(i[s]),n=o=!0;break;case"showDisabledRange":this._setRestrictDateState(i[s]);break;case"blackoutDates":this.model.blackoutDates=i[s],this._initDisableObj(this.model.blackoutDates),n=o=!0}a&&(this._validateMinMaxDate(),i.value=this.model.value,i.maxDate=this.model.maxDate,i.minDate=this.model.minDate),this._setWaterMark(),n&&(this.isValidState||this.model.displayInline)&&this._refreshDatepicker(),o&&this._startLevel(this.model.startLevel),this._triggerChangeEvent(),this._checkErrorClass()},observables:["value"],_destroy:function(){this.model.displayInline&&e(window).off("resize",e.proxy(this._OnWindowResize,this)),this._isOpen&&this.hide(),this.sfCalendar.remove(),this.wrapper&&(this.element.insertAfter(this.wrapper),this.wrapper.remove()),this._cloneElement.removeClass("e-js e-input").removeClass(t.util.getNameSpace(this.sfType)),this._cloneElement.insertAfter(this.element),this.element.remove()},_init:function(e){this._options=e,this._cloneElement=this.element.clone(),this._dt_drilldown=!1,this._ISORegex(),this._initDisableObj(this.model.blackoutDates),this.animation={open:{duration:200},close:{duration:100}},this._animating=!1,this._isSupport=document.createElement("input").placeholder!=l,this._checkAttribute(),this._setValues(),this._createDatePicker(),this._setRestrictDateState(this.model.showDisabledRange),null!=this.model.validationRules&&(this._initValidator(),this._setValidation()),e&&e.value!=l&&e.value!=this.element.val()&&this._trigger("_change",{value:this.element.val()})},_ISORegex:function(){this._tokens=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,this._extISORegex=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,this._basicISORegex=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,this._numberRegex={2:/\d\d?/,4:/^\d{4}/,z:/Z|[+-]\d\d(?::?\d\d)?/gi,t:/T/,"-":/\-/,":":/:/},this._zeroRegex=/Z|[+-]\d\d(?::?\d\d)?/,this._dates=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],this._times=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]]},_initValidator:function(){this.element.closest("form").data("validator")||this.element.closest("form").validate()},_setValidation:function(){var i,s,l,n;for(s in this.element.rules("add",this.model.validationRules),i=(i=this.element.closest("form").data("validator"))||this.element.closest("form").validate(),name=this.element.attr("name"),i.settings.messages[name]={},this.model.validationRules)if(l=null,!t.isNullOrUndefined(this.model.validationRules[s])){if(t.isNullOrUndefined(this.model.validationRules.messages&&this.model.validationRules.messages[s]))for(n in i.settings.messages[name][s]=e.validator.messages[s],this.model.validationMessage)s==n&&(l=this.model.validationMessage[s]);else l=this.model.validationRules.messages[s];i.settings.messages[name][s]=null!=l?l:e.validator.messages[s]}},_checkAttribute:function(){for(var e,i,s=["min","max","readonly","disabled"],l=["minDate","maxDate","readOnly","enabled"],n=0;n<s.length;n++)e=this.element.attr(s[n]),i=l[n],t.isNullOrUndefined(e)||(t.isNullOrUndefined(this._options)||t.isNullOrUndefined(this._options[i]))&&(this.model[i]="enabled"!=i&&"readOnly"!=i?new Date(e):"readOnly"==i?this.element.is("[readonly]"):!this.element.is("[disabled]"))},_updateDateValue:function(e){var t=this._checkDateObject(e);null!=t?(this.isValidState=!0,""==t?(this.element.val(""),this.model.value=null):(this.model.value=t,this._preTxtValue=this.element.val(this._formatter(this.model.value,this.model.dateFormat)))):("string"==typeof t&&this.model.enableStrictMode?this.element.val(e):this.element.val(""),this.model.value=null,this.isValidState=""==this.element.val()),this._removeWatermark()},_ensureValue:function(){var e=this._parseDate(this.element.val(),this.model.dateFormat);this.model.value?this._setDateValue(this.model.value):e&&this._setDateValue(e)},_changeEditable:function(t){var i=t?"_on":"_off";this.element.is(":input")&&(t?(this.model.readOnly||this.element.attr("readonly",!1),this.element.off("mousedown",e.proxy(this._showDatePopUp,this))):(this.model.readOnly||this.element.attr("readonly","readonly"),this.model.displayInline||this.element.on("mousedown",e.proxy(this._showDatePopUp,this))),this[i](this.element,"blur",this._onFocusOut),this[i](this.element,"focus",this._onFocusIn),this[i](this.element,"keydown",this._onKeyDown))},_allowQuickPick:function(t){e(".e-datepicker-headertext",this.sfCalendar)[t?"on":"off"]("click",e.proxy(this._forwardNavHandler,this))},_setRestrictDateState:function(e){var t=e?"addClass":"removeClass";this.sfCalendar[t]("e-dp-restrict-show")},_setValues:function(){this.Date=new Date,this._id=this.element[0].id,this.isValidState=!0,this._setCulture(this.model.locale),this._setMinDate(this.model.minDate),this._setMaxDate(this.model.maxDate),this._calendarDate=this._zeroTime(new Date),(this.model.startDay<0||this.model.startDay>6)&&(this.model.startDay=0),this.Date.firstDayOfWeek=this.model.startDay,this.Date.fullYearStart="20",this._showHeader=!0,t.isNullOrUndefined(this.model.value)&&""!=this.element[0].value&&(this.model.value=this.element[0].value),this._validateMinMaxDate(),this._dateValue=new Date(this._calendarDate.toString()),this._isIE7=this._checkIE7(),this._isIE8="msie"==t.browserInfo().name&&"8.0"==t.browserInfo().version,this._isIE9="msie"==t.browserInfo().name&&"9.0"==t.browserInfo().version,this._getInternalEvents=!1,this._flag=!0,this._ejHLWeekEnd=!1,this._isOpen=!1,this._prevDate=null,this._preValue=null,this._isFocused=!1},_addAttr:function(i){var s=this;e.map(i,function(e,i){var l=i.toLowerCase();"class"==l?s.wrapper.addClass(e):"disabled"==l&&"disabled"==e?s.disable():"readOnly"==l&&"readOnly"==e?s.model.readOnly=!0:"style"==l||"id"==l?s.wrapper.attr(i,e):t.isValidAttr(s.element[0],i)?s.element.attr(i,e):s.wrapper.attr(i,e)})},_createDatePicker:function(){this._createWrapper(),this._wireEvents(),this.model.displayInline&&this.show(),this.model.enableRTL&&this._setRTL(!0),this.model.showRoundedCorner&&this._setRoundedCorner(!0)},_checkNameAttr:function(){!this.element.attr("name")&&this._isInputBox()&&this.element.attr("name",this.element[0].id),this.model.displayInline&&!this._isInputBox()&&this._hiddenInput.attr("name",this.element[0].id)},_createWrapper:function(){if(this._mapField=this._getMapper(),this.model.specialDates&&this._createSpecialDateObject(),this._isInputBox()&&(this.element.addClass("e-input").attr({"aria-atomic":"true","aria-live":"assertive",tabindex:"0"}),this.wrapper=t.buildTag("span.e-datewidget e-widget "+this.model.cssClass),t.isTouchDevice()||this.wrapper.addClass("e-ntouch"),this.innerWrapper=t.buildTag("span.e-in-wrap e-box"),this.wrapper.append(this.innerWrapper).insertBefore(this.element),this.innerWrapper.append(this.element),this.innerWrapper.addClass("e-padding"),this.dateIcon=t.buildTag("span.e-select#"+this._id+"-img","",{},this._isIE8?{unselectable:"on"}:{}).append(t.buildTag("span.e-icon e-calendar","",{},{"aria-label":"Select"}).attr(this._isIE8?{unselectable:"on"}:{})).insertAfter(this.element)),!this._isSupport||this.model.displayInline&&!this._isInputBox()){this._hiddenInput=t.buildTag("input.e-input e-placeholder ","",{},{type:"text"}).insertAfter(this.element),this._isInputBox()&&this._hiddenInput.val(this._localizedLabels.watermarkText),this._hiddenInput.css("display","block");var i=this;e(this._hiddenInput).focus(function(){i.element.focus()})}this._checkNameAttr(),this._setHeight(this.model.height),this._setWidth(this.model.width),this._id&&e("#e-"+this._id).remove(),this.sfCalendar=t.buildTag("div.e-datepicker e-popup e-widget "+this.model.cssClass+" e-calendar "+(this.model.specialDates&&this.model.specialDates[0][this._mapField._icon]?"e-icons ":""),"",{},{id:this._id?"e-"+this._id:""}).attr({"aria-hidden":"true"}).attr(this._isIE8?{unselectable:"on"}:{}).insertBefore(this.element),this.model.displayInline&&!this.element.is("input")&&this.sfCalendar.addClass("e-inline"),this.popup=this.sfCalendar,t.isTouchDevice()||this.sfCalendar.addClass("e-ntouch"),this._resizeCalender(),this._setDateValue(this.model.value),this._preValue=this._parseDate(this.element.val(),this.model.dateFormat),this._setWaterMark(),this._dateValue=new Date(this._calendarDate.toString()),this._createCalender(),this._setDisplayInline(this.model.displayInline),this.model.readOnly&&this._disbleMaualInput(),this.model.enabled?this.model.enabled&&e(this.element).hasClass("e-disable")&&this.enable():this.disable(),this._layoutChanged(),this._checkErrorClass(),this._addAttr(this.model.htmlAttributes)},_isInputBox:function(){return this.element.is("input")&&(this.element.is("input[type=text]")||!this.element.attr("type"))},_renderDateIcon:function(e,t){t&&this.model.showPopupButton==e||(!e&&this.dateIcon?(this._bindInputEvent(),this.dateIcon.css("display","none"),this.innerWrapper.removeClass("e-padding")):(this.innerWrapper&&(this.innerWrapper.addClass("e-padding"),this.dateIcon.css("display","block")),this.model.displayInline||this._bindDateButton()),this.model.showPopupButton=e)},_resizeCalender:function(){"short"==this.model.dayHeaderFormat||"min"==this.model.dayHeaderFormat||"none"==this.model.dayHeaderFormat?this.sfCalendar.removeClass("e-headerlong"):"long"==this.model.dayHeaderFormat&&this.sfCalendar.addClass("e-headerlong")},_setWidth:function(e){e?this.wrapper?this.wrapper.width(e):this.element.width(e):this.model.width=this.wrapper?this.wrapper.outerWidth():this.element.width()},_setHeight:function(e){e?this.wrapper?this.wrapper.height(e):this.element.height(e):this.model.height=this.wrapper?this.wrapper.outerHeight():this.element.height(),this._isIE7&&this.element.height(this.innerWrapper.height())},_setRTL:function(e){e?(this.wrapper&&this.wrapper.addClass("e-rtl"),this.sfCalendar.addClass("e-rtl")):(this.wrapper&&this.wrapper.removeClass("e-rtl"),this.sfCalendar.removeClass("e-rtl"))},_setRoundedCorner:function(e){e?(this.innerWrapper&&this.innerWrapper.addClass("e-corner"),this.sfCalendar.addClass("e-corner")):(this.innerWrapper&&this.innerWrapper.removeClass("e-corner"),this.sfCalendar.removeClass("e-corner"))},_refreshDatepicker:function(){var t,i;this._stopRefresh?this._stopRefresh=!1:(t=this.element.val(),i=this._specificFormat()&&this._formatter(this._preValue,this.model.dateFormat,this.model.locale)!=t?this._parseDate(t,!0):this._parseDate(t),i=this._validateYearValue(i),this._setDateValue(i),this._specificFormat()&&this._compareDate(this.model.value,this._calendarDate)&&this.element.val(t),e(".e-datepicker-headertext",this.sfCalendar).text(this._formatter(this._calendarDate,this.model.headerFormat)),this._resizeCalender(),this._dateValue=new Date(this._calendarDate.toString()),this._hoverDate=this._calendarDate.getDate()-1,this._renderCalendar(this,this._dateValue),this._setFooterText(this._localizedLabels.buttonText),this._enableFooter(this.model.showFooter),this._layoutChanged())},_validateYearValue:function(e){if(null!=e){var i=t.preferredCulture(this.model.locale).calendars.standard.twoDigitYearMax;i="string"==typeof i?(new Date).getFullYear()%100+parseInt(i,10):i,this._calendarDate.getFullYear()-e.getFullYear()==100&&this._calendarDate.getFullYear()>i&&e.setFullYear(this._calendarDate.getFullYear())}return e},_setFooterText:function(t){e(".e-footer-text",this.sfCalendar).html(t)},_setSkin:function(e){this.wrapper?(this.wrapper.removeClass(this.model.cssClass),this.wrapper.addClass(e)):(this.element.removeClass(this.model.cssClass),this.element.addClass(e)),this.sfCalendar.removeClass(this.model.cssClass),this.sfCalendar.addClass(e)},_setDisplayInline:function(t){this.model.displayInline=t,t&&this._isInputBox()?(this.sfCalendar.insertAfter(this.wrapper),this._setDatePickerPosition()):t?(this.element.append(this.sfCalendar),this._isSupport&&this._isInputBox()||this._hiddenInput.css("display","none")):(this.sfCalendar.css("display","none"),e("body").append(this.sfCalendar),this._isOpen=!1),t?(this.show(),this._off(this.dateIcon,"mousedown",this._showDatePopUp),this.element.off("mousedown",e.proxy(this._showDatePopUp,this))):this._isInputBox()&&this._renderDateIcon(this.model.showPopupButton,!1)},_disbleMaualInput:function(){this.model.readOnly?(e(this.element).attr("readonly","readonly"),this.model.displayInline||this.hide()):this.model.allowEdit&&e(this.element).prop("readonly",!1)},_checkDateObject:function(e,t){return!e||"object"==typeof JSON&&"{}"===JSON.stringify(e)?null:(e instanceof Date||(e=(t=this._specificFormat()?this._parseDate(e,!0):this._parseDate(e,t))||((t=this._checkJSONString(e))?t:null)),!isNaN(Date.parse(e))&&(this._dateValue=this._calendarDate=this._zeroTime(e),this._validateDate(e))?this._dateValue:null)},_checkJSONString:function(e){if(isNaN(Date.parse(e))){if(this._extISORegex.exec(e)||this._basicISORegex.exec(e))return this._dateFromISO(e)}else{if(new Date(e).toJSON()===e||new Date(e).toDateString()===e||new Date(e).toGMTString()===e||new Date(e).toISOString()===e||new Date(e).toLocaleString()===e||new Date(e).toString()===e||new Date(e).toUTCString()===e)return new Date(e);if("string"==typeof e)return this._dateFromISO(e)}},_dateFromISO:function(e){var t,i,s,l,n,o,a,r,d,h=this._extISORegex.exec(e)||this._basicISORegex.exec(e),c="",u="",m="";if(h){for(t=0;t<this._dates.length;t++)if(this._dates[t][1].exec(h[1])){c=this._dates[t][0];break}if(h[3])for(i=0;i<this._times.length;i++)if(this._times[i][1].exec(h[3])){u=(h[2]||" ")+this._times[i][0];break}for(h[4]&&this._zeroRegex.exec(h[4])&&(m="Z"),s=(c+u+m).match(this._tokens),n=[],a=0;a<s.length;a++)r=s[a],o=this._checkLiteral(s[a]),d=this._numberRegex[o?s[a].toLowerCase():r.length]||new RegExp("^\\d{1,"+r.length+"}"),(l=e.match(d))&&(e.substr(0,e.indexOf(l))>=0&&!o&&(s[a].indexOf("M")>=0?n.push(parseInt(l[0])-1):n.push(parseInt(l[0]))),e=e.slice(e.indexOf(l[0])+l[0].length));return new Date(n[0],n[1],n[2],n[3],n[4],n[5])}},_checkLiteral:function(e){return char=e.toLowerCase(),"t"==char||"z"==char||":"==char||"-"==char},_checkInstanceType:function(e){return(e=this._stringToObject(e))?(e instanceof Date||(e=this._parseDate(e)),isNaN(Date.parse(e))?null:this._zeroTime(e)):null},_stringToObject:function(e){if("string"==typeof e){var i=t.parseDate(e,this.model.dateFormat,this.model.locale);e=null!=i?i:new Date(e)}return e},_validateMinMaxDate:function(){var e=!1,t=!1;this.model.maxDate<this.model.minDate&&(this.model.minDate=this.model.maxDate),this.model.enableStrictMode?this.model.value?this.model.value<this.model.minDate?(this._calendarDate=this.model.minDate,this.isValidState=!1,t=!0):this.model.value>this.model.maxDate?(this._calendarDate=this.model.maxDate,this.isValidState=!1,t=!0):this.isValidState=!0:this._calendarDate<this.model.minDate?this._calendarDate=this.model.minDate:this._calendarDate>this.model.maxDate&&(this._calendarDate=this.model.maxDate):(this.model.value?this.model.value<this.model.minDate?(this._calendarDate=this.model.value=this.model.minDate,e=!0):this.model.value>this.model.maxDate&&(this._calendarDate=this.model.value=this.model.maxDate,e=!0):(this.element.val(""),this._calendarDate<this.model.minDate?this._calendarDate=this.model.minDate:this._calendarDate>this.model.maxDate&&(this._calendarDate=this.model.maxDate)),this.isValidState=!0),e&&this.element.val(this._formatter(this.model.value,this.model.dateFormat)),t&&this._getInternalEvents&&this._trigger("outOfRange")},_setCulture:function(e){this.culture=t.preferredCulture(e),this.culture&&(this.model.locale="en"==this.culture.name?"en-US":this.culture.name,this.Date.dayNames=this.culture.calendar.days.names,this.Date.dayNamesMin=this.culture.calendar.days.namesShort,this.Date.abbrDayNames=this.culture.calendar.days.namesAbbr,this.Date.monthNames=this.culture.calendar.months.names,this.Date.abbrMonthNames=this.culture.calendar.months.namesAbbr,this.Date.format=this.culture.calendar.patterns.d,""==this.model.dateFormat&&(this.model.dateFormat=this.culture.calendar.patterns.d),-1==this.model.startDay&&(this.model.startDay=this.culture.calendar.firstDay)),this._separator=this._getSeparator(),this._localizedLabels=this._getLocalizedLabels(),t.isNullOrUndefined(this._options)||(t.isNullOrUndefined(this._options.watermarkText)||(this._localizedLabels.watermarkText=this._options.watermarkText),t.isNullOrUndefined(this._options.buttonText)||(this._localizedLabels.buttonText=this._options.buttonText)),this._localizedLabelToModel()},_localizedLabelToModel:function(){this.model.watermarkText=this._localizedLabels.watermarkText,this.model.buttonText=this._localizedLabels.buttonText},_setWaterMark:function(){if(null!=this.element&&this.element.hasClass("e-input"))return this._localizedLabels.watermarkText&&""==this.element.val()&&(this.isValidState=!0,this._checkErrorClass()),this._isSupport||""!=this.element.val()?e(this.element).attr("placeholder",this._localizedLabels.watermarkText):this._hiddenInput.css("display","block").val(this._localizedLabels.watermarkText),!0},_setDatePickerPosition:function(){if(!this.model.displayInline||this._isInputBox()){var i,s,l=this.element.is("input")?this.wrapper:this.element,n=this._getOffset(l),o=e(document).scrollTop()+e(window).height()-(n.top+e(l).outerHeight()),a=n.top-e(document).scrollTop(),r=this.sfCalendar.outerHeight(),d=this.sfCalendar.outerWidth(),h=n.left,c=l.outerHeight(),u=(l.height(),this._getZindexPartial()),m=r<o||r>a?n.top+c+3:n.top-r-3;i=e(document).scrollLeft()+e(window).width()-h,s=e(document).scrollLeft()+h+l.width(),(this.model.enableRTL||d>i&&d<h+l.outerWidth()&&!t.isNullOrUndefined(this.wrapper))&&(h+=this.wrapper.width()-this.sfCalendar.width()),d>s&&(h=n.left),this.sfCalendar.css({left:h+"px",top:m+"px","z-index":u})}},_getOffset:function(e){return t.util.getOffset(e)},_getZindexPartial:function(){return t.util.getZindexPartial(this.element,this.sfCalendar)},_setMinDate:function(e){this.model.minDate=this._checkInstanceType(e),this.model.minDate||(this.model.minDate=new Date("11/31/1899"))},_setMaxDate:function(e){this.model.maxDate=this._checkInstanceType(e),this.model.maxDate||(this.model.maxDate=new Date("12/31/2099"))},_setDateValue:function(e,i){var s=this._checkDateObject(e,i);null!=s?(this.isValidState=!0,this.model.value=new Date(s.toString()),this._validateMinMaxDate(),this._preTxtValue=this.element.val(this._formatter(this.model.value,this.model.dateFormat))):(e instanceof Date&&(this._validateMinMaxDate(),e=this._formatter(e,this.model.dateFormat)),this.model.enableStrictMode?this.element.val(e):this.element.val(null),this.model.value=null,this._triggerChangeEvent(),this.isValidState=!(""!=this.element.val()&&!t.isNullOrUndefined(this.element.val()))),this._removeWatermark()},_updateInputVal:function(){(null!=this._validateValue()||!this.model.enableStrictMode)&&this.sfCalendar.find(".e-datepicker-days").is(":visible")&&this._refreshDatepicker()},_validateInputVal:function(){var e=this._validateValue();null!=e&&(this.model.enableStrictMode||(e<=this.model.maxDate&&e>=this.model.minDate||(this.model.value=null),this.isValidState=!0))},_validateValue:function(){var e;return e=this._specificFormat()&&this.element.val()!=this._formatter(this._preValue,this.model.dateFormat,this.model.locale)?this._parseDate(this.element.val(),!0):this._parseDate(this.element.val()),this._validateYearValue(e)},_getSeparator:function(){var e,t;for(formats=this.culture?this.culture.calendar.patterns.d:this.model.dateFormat,e=new RegExp("^[a-zA-Z0-9]+$"),t=0;t<formats.length;t++)if(!e.test(formats[t]))return formats[t]},_checkIE7:function(){if("Microsoft Internet Explorer"==navigator.appName){var e=-1;if(null!=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})").exec(navigator.userAgent)&&(e=parseFloat(RegExp.$1)),e>=7&&e<8)return!0}return!1},_isValidDate:function(e){return e&&"function"==typeof e.getTime&&isFinite(e.getTime())},_formatter:function(e,i){var s=this._checkFormat(i);return t.format(e,s,this.model.locale)},_parseDate:function(e,i){var s=this._checkFormat(this.model.dateFormat);return DateValue=e,this._specificFormat()&&DateValue!=l&&""!=e&&1!=i&&t.format(t.parseDate(DateValue,s,this.model.locale),this.model.dateFormat,this.model.locale)!=DateValue?this._dateValue:t.parseDate(e,s,this.model.locale)},_checkFormat:function(e){var i=this,s=this._regExp();return e.replace(s,function(e){return"/"===e&&"/"!==t.preferredCulture(i.model.locale).calendars.standard["/"]?"'/'":e})},_regExp:function(){return/\/dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|HH|H|hh|h|mm|m|fff|ff|f|tt|ss|s|zzz|zz|z|gg|g|"[^"]*"|'[^']*'|[/]/g},isLeapYear:function(e){return e%4==0&&e%100!=0||e%400==0},_zeroTime:function(e){var t="string"==typeof e?this._parseDate(e):new Date(e);return t.setMilliseconds(0),t.setSeconds(0),t.setMinutes(0),t.setHours(0),t},_getDaysInMonth:function(e){return[31,this.isLeapYear(e)?29:28,31,30,31,30,31,31,30,31,30,31][e.getMonth()]},_addDays:function(e,t){return e.setDate(e.getDate()+t),e},_addYears:function(e,t){return e.setFullYear(e.getFullYear()+t),e},_addMonths:function(e,t){var i=e.getDate();return e.setMonth(e.getMonth()+t),i>e.getDate()&&this._addDays(e,-e.getDate()),e},_isWeekend:function(e){return 0==e.getDay()||6==e.getDay()},_isSpecialDates:function(e){if(this.model.specialDates)for(var t=0;t<this.model.specialDates.length;t++)if(this.model.specialDates[t]&&this.model.specialDates[t][this._mapField._date]&&e.getDate()==this.model.specialDates[t][this._mapField._date].getDate()&&e.getMonth()==this.model.specialDates[t][this._mapField._date].getMonth()&&e.getFullYear()==this.model.specialDates[t][this._mapField._date].getFullYear())return this._getIndex=t,!0;return!1},_getMapper:function(){var e=this.model.fields,t={_date:null,_tooltip:null,_icon:null,_custom:null};return t._date=e&&e.date?e.date:"date",t._tooltip=e&&e.tooltip?e.tooltip:"tooltip",t._icon=e&&e.iconClass?e.iconClass:"iconClass",t._custom=e&&e.cssClass?e.cssClass:"cssClass",t},_createSpecialDateObject:function(){for(var e=0;e<this.model.specialDates.length;e++)this.model.specialDates[e][this._mapField._date]=this._checkInstanceType(this.model.specialDates[e][this._mapField._date])},_getMonthName:function(e,t){return e?this.Date.abbrMonthNames[t.getMonth()]:this.Date.monthNames[t.getMonth()]},_displayNewMonth:function(e,t){return this._setDisplayedMonth(this.displayedMonth+e,this.displayedYear+t,!0),!1},_setDisplayedMonth:function(e,t,i){var s,n,o,a,r,d;this.model.minDate!=l&&this.model.maxDate!=l&&((s=new Date(this.model.minDate.getTime())).setDate(1),(n=new Date(this.model.maxDate.getTime())).setDate(1),!e&&!t||isNaN(e)&&isNaN(t)?(o=this._zeroTime(new Date)).setDate(1):o=isNaN(e)?new Date(t,this.displayedMonth,1):isNaN(t)?new Date(this.displayedYear,e,1):new Date(t,e,1),o.getTime()<s.getTime()?o=s:o.getTime()>n.getTime()&&(o=n),a=this.displayedMonth,r=this.displayedYear,this.displayedMonth=o.getMonth(),this.displayedYear=o.getFullYear(),d=o,i&&(this.displayedMonth!=a||this.displayedYear!=r)&&(this._renderCalendar(this,d),this._dateValue=d,this._trigger("monthChanged",[this.displayedMonth,this.displayedYear])))},_clearSelected:function(){this.numSelected=0,"week"==this.model.highlightSection?e("td.e-active",this.sfCalendar).removeClass("e-active").addClass("e-state-hover").attr("aria-selected",!1).parent().removeClass("e-selected-week"):"month"==this.model.highlightSection?e("td.e-active",this.sfCalendar).removeClass("e-active").addClass("e-state-hover").attr("aria-selected",!1).parent().parent().removeClass("e-selected-month"):"workdays"==this.model.highlightSection?e("td.e-active",this.sfCalendar).removeClass("e-active").addClass("e-state-hover").attr("aria-selected",!1).parent().removeClass("e-work-week"):e("td.e-active",this.sfCalendar).removeClass("e-active").addClass("e-state-hover").attr("aria-selected",!1)},_addSelected:function(){"week"==this.model.highlightSection?e("td.e-active",this.sfCalendar).parent().addClass("e-selected-week"):"month"==this.model.highlightSection?e("td.e-active, this.sfCalendar").parent().parent().addClass("e-selected-month"):"workdays"==this.model.highlightSection&&e("td.e-active",this.sfCalendar).parent().addClass("e-work-week")},_hideOtherMonths:function(t){e("td.other-month",t).css("visibility","hidden")},_showOtherMonths:function(t){e("td.other-month",t).css({visibility:"visible"})},_otherMonthsVisibility:function(){this.model.showOtherMonths?this._showOtherMonths(this.sfCalendar):this._hideOtherMonths(this.sfCalendar)},_createCalender:function(){t.buildTag("div.e-header").attr(this._isIE8?{unselectable:"on"}:{}).append(t.buildTag("span.e-prev").append(t.buildTag("a.e-icon e-arrow-sans-left").attr({role:"button"}).attr(this._isIE8?{unselectable:"on"}:{}))).append(t.buildTag("span.e-text").append(t.buildTag("span.e-datepicker-headertext").text(this._formatter(this._calendarDate,this.model.headerFormat)).attr({"aria-atomic":"true","aria-live":"assertive",role:"heading"}).attr(this._isIE8?{unselectable:"on"}:{}))).append(t.buildTag("span.e-next").append(t.buildTag("a.e-icon e-arrow-sans-right").attr({role:"button"}).attr(this._isIE8?{unselectable:"on"}:{}))).appendTo(this.sfCalendar),this._enableHeader(this._showHeader);var i=t.buildTag("table.e-dp-viewdays","",{},{cellspacing:2}).data("e-table","data").attr({role:"grid","aria-activedescendant":""}).attr(this._isIE8?{unselectable:"on"}:{});this.sfCalendar.append(i),this._renderCalendar(this),this._startLevel(this.model.startLevel),t.buildTag("div.e-footer").append(t.buildTag("span.e-footer-icon")).append(t.buildTag("span.e-footer-text")).appendTo(this.sfCalendar),e(".e-footer-text",this.sfCalendar).html(this._localizedLabels.buttonText),this._enableFooter(this.model.showFooter)},_enableHeader:function(t){t?e(".e-header",this.sfCalendar).show():e(".e-header",this.sfCalendar).hide()},_enableFooter:function(t){t?e(".e-footer",this.sfCalendar).show():e(".e-footer",this.sfCalendar).hide()},_checkArrows:function(e,t){this._preArrowCondition(e,this.model.minDate.getFullYear()),this._nextArrowCondition(t,this.model.maxDate.getFullYear())},_checkDateArrows:function(){this._preArrowCondition(this._tempMinDate,this.model.minDate),this._nextArrowCondition(this._tempMaxDate,this.model.maxDate)},_preArrowCondition:function(e,t){e<=t?this.sfCalendar.find(".e-arrow-sans-left").addClass("e-disable").attr({"aria-disabled":!0}):this.sfCalendar.find(".e-arrow-sans-left").removeClass("e-disable").attr({"aria-disabled":!1})},_nextArrowCondition:function(e,t){e>=t?this.sfCalendar.find(".e-arrow-sans-right").addClass("e-disable").attr({"aria-disabled":!0}):this.sfCalendar.find(".e-arrow-sans-right").removeClass("e-disable").attr({"aria-disabled":!1})},_previousNextHandler:function(t){var i,s,l,n;if(this.model.readOnly||!this.model.enabled||e(t.target).hasClass("e-disable"))return!1;switch(t.preventDefault(),i=e("table",this.sfCalendar),s=this._navigateFrom(i),l=!!(e(t.target).is("a")?e(t.target.parentNode):e(t.target)).hasClass("e-prev"),this._processNextPrevDate(l),e("table",this.sfCalendar).get(0).className){case"e-dp-viewdays":n="month";break;case"e-dp-viewmonths":n="year";break;case"e-dp-viewyears":n="decade";break;case"e-dp-viewallyears":n="century"}this._trigger("navigate",{date:this._dateValue,value:this._formatter(this._dateValue,this.model.dateFormat),navigateTo:n,navigateFrom:s})},_processNextPrevDate:function(t){var i,l,n,o,a,r,d;if(this._DRPdisableFade&&(s=new Date(this.sfCalendar.find("td.current-month").attr("date")),this._dateValue=s),t&&this.sfCalendar.find(".e-arrow-sans-left").hasClass("e-disable")||!t&&this.sfCalendar.find(".e-arrow-sans-right").hasClass("e-disable"))return!1;switch((i=e("table",this.sfCalendar)).get(0).className){case"e-dp-viewdays":if(n=this.model.stepMonths,t){if(this._dateValue<=this.model.minDate)return this._flag=!1,!1}else if(this._dateValue>=this.model.maxDate)return this._flag=!1,!1;this._flag=!0,this._addMonths(this._dateValue,t?-n:n),this._clickedDate&&(this._calendarDate=this._clickedDate),this._dateValue=this._dateValue<this.model.minDate?new Date(this.model.minDate.toString()):this._dateValue,this._dateValue=this._dateValue>this.model.maxDate?new Date(this.model.maxDate.toString()):this._dateValue,this._renderCalendar(this,this._dateValue),e(".e-datepicker-headertext",this.sfCalendar).text(this._formatter(this._dateValue,this.model.headerFormat)),this._addFocus("day",this._hoverDate),o=this._findFirstLastDay(new Date(this._dateValue.toString())),this._preArrowCondition(o.firstDay,this.model.minDate),this._nextArrowCondition(o.lastDay,this.model.maxDate);break;case"e-dp-viewmonths":if((a=this._dateValue).setFullYear(e(".e-datepicker-headertext",this.sfCalendar).text()),t){if(a.getFullYear()<=this.model.minDate.getFullYear())return this._flag=!1,!1}else if(a.getFullYear()>=this.model.maxDate.getFullYear())return this._flag=!1,!1;this._flag=!0,this._addYears(a,t?-1:1),this._renderCalendar(this,a),l=a.getFullYear(),e(".e-datepicker-headertext",this.sfCalendar).text(l),e("tbody,tr.e-week-header",i).not(".e-datepicker-months").hide(),e(e(i).find(".e-datepicker-months")).show(),this._addFocus("month",this._hoverMonth),this._checkArrows(l,l);break;case"e-dp-viewyears":if((r=this._dateValue).setFullYear(e(i).find(".e-state-hover").text()),t){if(parseInt(e("td.e-year-first:first").text())<=this.model.minDate.getFullYear())return this._flag=!1,!1}else if(parseInt(e("td.e-year-last:first").prev().text())>=this.model.maxDate.getFullYear())return this._flag=!1,!1;this._flag=!0,e(i).find(".e-state-hover").hasClass("e-year-first")&&t||e(i).find(".e-state-hover").hasClass("e-year-last")&&!t?this._dateValue.setFullYear(r.getFullYear()):e(i).find(".e-state-hover").hasClass("e-year-first")&&!t?this._dateValue.setFullYear(r.getFullYear()+11):e(i).find(".e-state-hover").hasClass("e-year-last")&&t?this._dateValue.setFullYear(r.getFullYear()-11):this._dateValue.setFullYear(r.getFullYear()+(t?-10:10)),this._renderCalendar(this,this._dateValue),d=parseInt(this._dateValue.getFullYear())-(parseInt(this._dateValue.getFullYear())%10+1),e(".e-datepicker-headertext",this.sfCalendar).text(d+1+" - "+(d+10)),e("tbody,tr.e-week-header",i).not(".e-datepicker-years").hide(),e(e(i).find(".e-datepicker-years")).show(),this._addFocus("year",this._hoverYear+(e(".e-year-first.e-hidedate").length?-1:0)),this._checkArrows(d+1,d+10);break;case"e-dp-viewallyears":if(t){if(parseFloat(e("td.e-allyear-first",i.get(0)).text().split("-")[1])<=this.model.minDate.getFullYear())return this._flag=!1,!1;this._flag=!0}else{if(parseFloat(e("td.e-allyear-last",i.get(0)).prev().text().split("-")[1])>=this.model.maxDate.getFullYear())return this._flag=!1,!1;this._flag=!0}this._dateValue.setFullYear((this._lastHoveredYear?this._lastHoveredYear:this._dateValue.getFullYear())+(t?-100:100)),this._lastHoveredYear=this._dateValue.getFullYear(),this._renderCalendar(this,this._dateValue),d=parseInt(this._dateValue.getFullYear())-(parseInt(this._dateValue.getFullYear())%100+1),l=parseFloat(e("td.e-allyear-last",i.get(0)).prev().text().split("-")[1]),e(".e-datepicker-headertext",this.sfCalendar).text(d+1+" - "+l),e("tbody,tr.e-week-header",i).not(".e-datepicker-allyears").hide(),e(e(i).find(".e-datepicker-allyears")).show(),this._addFocus("allyear",this._hoverAllYear+(e(".e-allyear-first.e-hidedate").length?-1:0)),this._checkArrows(d+1,l)}this._layoutChanged()},_addFocus:function(t,i){var s,l,n="e-current-"+t;return"day"==t&&(n="current-month"),s=this.sfCalendar.find("tbody tr td."+n),"month"==t&&e(s).each(function(t,s){parseInt(e(s).attr("index"))!=parseInt(i)||(i=t)}),(l=s[i])||(l=s.last()),this.sfCalendar.find("table td").removeClass("e-state-hover"),e(l).addClass("e-state-hover"),this._setActiveState(t),i},_setActiveState:function(t){var i,s,l;if(this.model.value instanceof Date){var n,o=this.sfCalendar.find("tbody tr td.e-current-"+t),a=this,r=-1;switch(t){case"month":this.model.value.getFullYear()===parseInt(e(".e-text",this.sfCalendar).text())&&e(o).each(function(t,i){parseInt(e(i).attr("index"))!=parseInt(a.model.value.getMonth())||(r=t)});break;case"year":i=this.model.value.getFullYear(),e(o).each(function(e,t){parseInt(t.innerHTML)!=parseInt(i)||(r=e)});break;case"allyear":s=parseInt(this.model.value.getFullYear())-(parseInt(this.model.value.getFullYear())%10+1),l=s+1+" - "+(s+10),e(o).each(function(e,t){parseInt(t.innerHTML)!=parseInt(l)||(r=e)})}(n=o[r])&&(this.sfCalendar.find("table td").removeClass("e-active"),e(n).hasClass("e-hidedate")||e(n).addClass("e-active"))}},_setFocusByName:function(t,i){var s,l,n=this.sfCalendar.find("tbody tr td.e-current-"+t);return e(n).each(function(e,t){parseInt(t.innerHTML)!=parseInt(i)||(s=e)}),(l=n[s])||(l=n.last()),this.sfCalendar.find("table td").removeClass("e-state-hover"),e(l).addClass("e-state-hover"),this._setActiveState(t),s},_getHeaderTxt:function(){return this.sfCalendar.find(".e-datepicker-headertext").text()},_findFirstLastDay:function(e){return y=e.getFullYear(),m=e.getMonth(),{firstDay:new Date(y,m,1),lastDay:new Date(y,m+1,0)}},_forwardNavHandler:function(t){if(this.model.readOnly||!this.model.enabled)return!1;t&&t.preventDefault();var i,s,l=e("table",this.sfCalendar),n=e("table",this.sfCalendar).get(0).className;switch(navFrom=this._navigateFrom(l),n){case"e-dp-viewdays":this._hoverMonth=this._getDateObj(l.find(".e-state-hover")).getMonth()||this._getDateObj(l.find(".e-active")).getMonth()||0,this._DRPdisableFade&&(this._renderCalendar(this,this._calendarDate),e(".e-datepicker-headertext",this.sfCalendar).text(this._formatter(this._dateValue,this.model.headerFormat))),this._startLevel("year"),s="year",this._addFocus("month",this._hoverMonth);break;case"e-dp-viewmonths":i=this._getHeaderTxt(),this._startLevel("decade"),s="decade",this._hoverYear=this._setFocusByName("year",i);break;case"e-dp-viewyears":i=this._getHeaderTxt(),this._startLevel("century"),s="century",this._hoverAllYear=this._setFocusByName("allyear",i)}"century"!=navFrom&&this._trigger("navigate",{date:this._dateValue,value:this._formatter(this._dateValue,this.model.dateFormat),navigateTo:s,navigateFrom:navFrom}),this._layoutChanged()},_cellSelection:function(){var t,i;switch(e("table",this.sfCalendar),e("table",this.sfCalendar).get(0).className){case"e-dp-viewmonths":this._hoverMonth=this._addFocus("month",this._dateValue.getMonth());break;case"e-dp-viewyears":t=new Date(this._dateValue.toString()),this._navigationToPrevNext("year"),this._dateValue=t,this._hoverYear=this._setFocusByName("year",this._dateValue.getFullYear());break;case"e-dp-viewallyears":t=new Date(this._dateValue.toString()),this._navigationToPrevNext("allyear"),this._dateValue=t,i=parseInt(this._dateValue.getFullYear())-(parseInt(this._dateValue.getFullYear())%10+1),this._hoverAllYear=this._setFocusByName("allyear",i+1+" - "+i+10)}this._layoutChanged()},_navigationToPrevNext:function(t){var i,s,l=this.sfCalendar.find("tbody tr td.e-current-"+t),n=this._dateValue.getFullYear();e(l).each(function(e,t){parseInt(t.innerHTML)!=parseInt(n)||(i=e)}),(s=l[i])&&(e(s).hasClass("e-"+t+"-last")?this._processNextPrevDate(!1):e(s).hasClass("e-"+t+"-first")&&this._processNextPrevDate(!0))},_navigateFrom:function(e){var t;switch(e.get(0).className){case"e-dp-viewdays":t="month";break;case"e-dp-viewmonths":t="year";break;case"e-dp-viewyears":t="decade";break;case"e-dp-viewallyears":t="century"}return t},_backwardNavHandler:function(i){var s,l;if(this._animating=!0,this.model.readOnly||!this.model.enabled)return!1;i.type?(i.preventDefault(),s=e(i.currentTarget)):s=i;var n,o,a=e("table",this.sfCalendar),r=e("table",this.sfCalendar).get(0).className,d=this;switch(navFrom=this._navigateFrom(a),r){case"e-dp-viewmonths":a.removeClass("e-dp-viewmonths").addClass("e-dp-viewdays"),this._lastHoveredMonth=parseInt(e(s).attr("index")),this._dateValue=new Date(this._dateValue.getFullYear(),this._lastHoveredMonth,this._dateValue.getDate()),this._DRPdisableFade&&this._trigger("_month_Loaded",{currentTarget:i.currentTarget}),this._renderCalendar(this,this._dateValue),e("tbody",a).not(".e-datepicker-days,.e-week-header").hide(),e(e(a).find(".e-datepicker-days,.e-week-header")).fadeIn("fast",function(){d._addFocus("day",d._hoverDate||0),d._animating=!1}),e(".e-datepicker-headertext",this.sfCalendar).text(this._formatter(this._dateValue,this.model.headerFormat)),o="month";break;case"e-dp-viewyears":a.removeClass("e-dp-viewyears").addClass("e-dp-viewmonths"),this._lastHoveredYear=parseInt(s.text()),this._dateValue.setFullYear(this._lastHoveredYear),this._renderCalendar(this,this._dateValue),e("tbody,tr.e-week-header",a).not(".e-datepicker-months").hide(),t.isNullOrUndefined(this._hoverMonth)&&!t.isNullOrUndefined(this._dateValue)&&(this._hoverMonth=this._dateValue.getMonth()),e(e(a).find(".e-datepicker-months")).fadeIn("fast",function(){d._addFocus("month",d._hoverMonth||0),d._animating=!1}),n=s.text(),e(".e-datepicker-headertext",this.sfCalendar).text(n),this._checkArrows(n,n),o="year";break;case"e-dp-viewallyears":l=s.text().split("-"),a.removeClass("e-dp-viewallyears").addClass("e-dp-viewyears"),l[0]<this.model.minDate.getFullYear()?l[0]=this.model.minDate.getFullYear().toString():l[0]>this.model.maxDate.getFullYear()&&(l[0]=this.model.maxDate.getFullYear().toString()),this._renderCalendar(this,new Date(l[0],0,1)),e("tbody,tr.e-week-header",a).not(".e-datepicker-years").hide(),e(e(a).find(".e-datepicker-years")).fadeIn("fast",function(){d._addFocus("year",d._hoverYear||0),d._animating=!1}),e(".e-datepicker-headertext",this.sfCalendar).text(l[0]+" - "+l[1]),this._checkArrows(l[0],l[1]),o="decade",this._dateValue=new Date(this._dateValue.setFullYear(parseInt(e.trim(l[0]))+(this._lastHoveredYear?this._lastHoveredYear%10:this._dateValue.getFullYear()%10)));break;default:this._clearSelected(),this.sfCalendar.find("table td").removeClass("e-state-hover"),s.not("td.other-month.e-hidedate").addClass("e-active").attr("aria-selected",!0),this._addSelected(),this._hoverDate=this._getDateObj(s).getDate()-1,this._dateValue=new Date(s.attr("date")),this._clickedDate=new Date(s.attr("date")),this._animating=!1}"month"!=navFrom&&this._trigger("navigate",{date:this._dateValue,value:this._formatter(this._dateValue,this.model.dateFormat),navigateTo:o,navigateFrom:navFrom}),this._layoutChanged()},_startLevel:function(t){var i,s,l,n,o=e("table",this.sfCalendar),a=e(".e-datepicker-headertext",this.sfCalendar),r=this._dateValue;switch(t){case"decade":o.removeClass("e-dp-viewallyears e-dp-viewmonths e-dp-viewdays").addClass("e-dp-viewyears"),e("tbody,tr.e-week-header",o).not(".e-datepicker-years").hide(),e(e(o).find(".e-datepicker-years")).show(),r=this.model.enableStrictMode&&this._calendarDate<this._dateValue?this._calendarDate:r,i=1+(n=parseInt(r.getFullYear())-(parseInt(r.getFullYear())%10+1)),s=n+10,a.text(i+" - "+s),this._checkArrows(i,s),this._hoverYear=this._setFocusByName("year",r.getFullYear());break;case"century":this._calendarDate<this._dateValue||this._renderCalendar(this,r),o.removeClass("e-dp-viewyears e-dp-viewdays e-dp-viewmonths").addClass("e-dp-viewallyears"),e("tbody,tr.e-week-header",o).not(".e-datepicker-allyears").hide(),e(e(o).find(".e-datepicker-allyears")).show(),l=(i=parseFloat(e("td.e-allyear-first",o.get(0)).text().split("-")[1])+1)+" - "+(s=parseFloat(e("td.e-allyear-last",o.get(0)).prev().text().split("-")[1])),a.text(l),this._checkArrows(i,s),n=parseInt(r.getFullYear())-(parseInt(r.getFullYear())%10+1),this._hoverAllYear=this._setFocusByName("allyear",n+1+" - "+(n+10));break;case"year":o.removeClass("e-dp-viewyears e-dp-viewallyears e-dp-viewdays").addClass("e-dp-viewmonths"),e("tbody,tr.e-week-header",o).hide(),e(e(o).find(".e-datepicker-months")).show(),i=this.model.enableStrictMode&&this._calendarDate<this._dateValue?this._calendarDate.getFullYear():r.getFullYear(),a.text(i),this._checkArrows(i,i),this._hoverMonth=r.getMonth(),this._addFocus("month",this._hoverMonth);break;case"month":o.removeClass("e-dp-viewyears e-dp-viewallyears e-dp-viewmonths").addClass("e-dp-viewdays ")}},_depthLevel:function(t){var i=this.sfCalendar;switch(t){case"year":e(i.find(".e-current-year,.e-current-allyear")).on("click",e.proxy(this._backwardNavHandler,this)),this._on(e(".e-current-month",this.sfCalendar),"click",e.proxy(this._onDepthSelectHandler,this));break;case"decade":e(i.find(".e-current-allyear")).on("click",e.proxy(this._backwardNavHandler,this)),e(".e-current-year",this.sfCalendar).on("click",e.proxy(this._onDepthSelectHandler,this));break;case"century":e(i.find(".e-current-allyear")).on("click",e.proxy(this._onDepthSelectHandler,this));break;case"month":this._on(i.find(".current-month,.other-month,.e-current-month,.e-current-year,.e-current-allyear"),"click",e.proxy(this._backwardNavHandler,this)),this._on(i.find(".current-month , .other-month"),"click",e.proxy(this._onSetCancelDateHandler,this))}},_onDepthSelectHandler:function(t){if(this.model.readOnly||!this.model.enabled)return!1;e(t.target).hasClass("e-current-month")?this._dateValue=new Date(this._dateValue.setMonth(parseInt(t.target.attributes.index.value))):(e(t.target).hasClass("e-current-year")||e(t.target).hasClass("e-current-allyear"))&&(this._dateValue=new Date(this._dateValue.setFullYear(parseInt(t.target.innerHTML)))),this._onSetCancelDateHandler(t)},_datepickerMonths:function(t,i,s){for(var l,n,o,a,r=function(e){return document.createElement(e)},d=0,h=0;h<3;h++){for(l=e(r("tr")),n=0;n<4;n++)o=e(r("td")).addClass("e-current-month e-state-default").attr({index:d}).attr(this._isIE8?{unselectable:"on"}:{}).html(this.Date.abbrMonthNames[d++]),(s.getFullYear()<this.model.minDate.getFullYear()||s.getFullYear()>this.model.maxDate.getFullYear()||s.getFullYear()<=this.model.minDate.getFullYear()&&d<this.model.minDate.getMonth()+1||s.getFullYear()>=this.model.maxDate.getFullYear()&&d>this.model.maxDate.getMonth()+1)&&(o.addClass("e-hidedate"),o.removeClass("e-current-month")),l.append(o);t.append(l)}i.append(t),a=s.getFullYear(),this._checkArrows(a,a)},_datepickerYears:function(t,i,s){for(var l,n,o,a,r=function(e){return document.createElement(e)},d=parseInt(s)-(parseInt(s)%10+1),h=[],c=0;c<12;c++)h.push(d+c);for(l=0,n=0;n<3;n++){for(o=e(r("tr")),c=0;c<4;c++)(a=e(r("td"))).attr(this._isIE8?{unselectable:"on"}:{}),0==l?a.addClass("e-year-first e-current-year "):11==l?a.addClass("e-year-last e-current-year "):a.addClass("e-current-year e-state-default"),(h[l]<this.model.minDate.getFullYear()||h[l]>this.model.maxDate.getFullYear())&&(a.addClass("e-hidedate"),a.removeClass("e-current-year")),a.html(h[l++]),o.append(a);t.append(o)}i.append(t),this._checkArrows(h[0],h[h.length])},_datepickerAllYears:function(t,i,s){for(var l,n,o,a,r=parseInt(s)-(parseInt(s)%100+10),d=[],h=this._isIE8||this._isIE9?"":"\n",c=0;c<12;c++)d.push(parseInt(r)+" -"+h+parseInt(r+9)),r+=10;for(l=0,n=0;n<3;n++){for(o=e(document.createElement("tr")),c=0;c<4;c++)(a=e(document.createElement("td"))).attr(this._isIE8?{unselectable:"on"}:{}),0==l?a.addClass("e-allyear-first e-current-allyear "):11==l?a.addClass("e-allyear-last e-current-allyear "):a.addClass("e-current-allyear e-state-default"),(parseInt(d[l].split("-\n")[1])<this.model.minDate.getFullYear()||parseInt(d[l].split("-\n")[0])>this.model.maxDate.getFullYear())&&(a.addClass("e-hidedate"),a.removeClass("e-current-allyear")),a.html(d[l++]),o.append(a);t.append(o)}i.append(t)},_renderHeader:function(i){var s,l,n,o,a,r,d=e(document.createElement("thead")),h=t.preferredCulture(this.model.locale).calendars.standard.days;if("none"!=i.model.dayHeaderFormat)for(s=t.buildTag("tr.e-week-header").attr({role:"columnheader"}).attr(this._isIE8?{unselectable:"on"}:{}),l=this.Date.firstDayOfWeek;l<this.Date.firstDayOfWeek+7;l++)n=l%7,o=h.names[n],a="short"==i.model.dayHeaderFormat?h.namesAbbr[n]:"long"==i.model.dayHeaderFormat?o:h.namesShort[n],r=t.buildTag("th","",{},{scope:"col",abbr:o,date:o,title:this._formatter(o,"dddd"),class:0==n||6==n?"e-week-end":"e-week-day"}).attr(this._isIE8?{unselectable:"on"}:{}).html(a),s.append(r);return d.append(s)},_renderCalendar:function(i,s){var n,o,a,r,d,h,c,u,m;i=e.extend({},t.DatePicker.prototype.defaults,i),this.Date.firstDayOfWeek=this.model.startDay,n=s||(this._calendarDate?this._calendarDate:this._zeroTime(new Date)),(o=e("table",this.sfCalendar)).empty(),o.append(this._renderHeader(i)),a=t.buildTag("tbody.e-datepicker-allyears","",{display:"none"}).attr(this._isIE8?{unselectable:"on"}:{}),this._datepickerAllYears(a,o,n.getFullYear()),a=t.buildTag("tbody.e-datepicker-years","",{display:"none"}).attr(this._isIE8?{unselectable:"on"}:{}),this._datepickerYears(a,o,n.getFullYear());var p=i.model.month==l?n.getMonth():i.model.month,g=i.model.year||n.getFullYear(),f=new Date(g,p,1,0,0,0),_=this.Date.firstDayOfWeek-f.getDay()+1;_>1&&(_-=7),r=Math.ceil((-1*_+1+this._getDaysInMonth(f))/7),this._addDays(f,_-1),d=this._zeroTime(new Date),h=this._calendarDate,a=t.buildTag("tbody.e-datepicker-months","",{display:"none"}).attr(this._isIE8?{unselectable:"on"}:{}),this._datepickerMonths(a,o,n),a=t.buildTag("tbody.e-datepicker-days","",{display:"none"}).attr(this._isIE8?{unselectable:"on"}:{});for(var v=0,b=!0,C=!0;v++<r;){for(c=jQuery(document.createElement("tr")),u=0;u<7;u++){var w=f.getMonth()==p,y=this._isSpecialDates(f),S=this._checkDisableRange(f),x=this._getIndex,T=e(document.createElement("td")).html(y?"<span></span>"+f.getDate():f.getDate()+"").attr({date:f.toDateString(),title:this.model.showTooltip?y&&this.model.specialDates[x][this._mapField._tooltip]?this.model.specialDates[x][this._mapField._tooltip]:this._formatter(f,this.model.tooltipFormat):"","aria-selected":!1,role:"gridcell"}).attr(this._isIE8?{unselectable:"on"}:{}).addClass((w?"current-month e-state-default ":"other-month e-state-default ")+(this._isWeekend(f)?this._ejHLWeekEnd?"e-dp-weekend e-week-end ":this.model.highlightWeekend?"e-week-end ":"":"e-week-day ")+(w&&f.getTime()==d.getTime()?"today ":""));T.find("span:first-of-type").addClass(y?this.model.specialDates[x][this._mapField._icon]?"e-special-date-icon "+this.model.specialDates[x][this._mapField._icon]+" ":"e-special-day":""),T.addClass(y&&this.model.specialDates[x][this._mapField._custom]?this.model.specialDates[x][this._mapField._custom]:""),S&&this._disableDates({date:f,element:T}),h.getTime()==f.getTime()&&w&&(T.hasClass("e-hidedate")||(this.model.value?(T.addClass("e-active").attr({"aria-selected":!0}),"week"==this.model.highlightSection&&c.addClass("e-selected-week"),"month"==this.model.highlightSection&&a.addClass("e-selected-month"),"workdays"==this.model.highlightSection&&c.addClass("e-work-week")):T.addClass("e-state-hover").attr({"aria-selected":!1})),this._hoverDate||(T.hasClass("e-hidedate")||T.addClass("e-state-hover"),this._hoverDate=f.getDate()-1)),m=!0,(f<this.model.minDate||f>this.model.maxDate)&&(T.addClass("e-hidedate"),T.removeClass("current-month"),this.model.showOtherMonths&&T.removeClass("other-month"),m=C=!1),w&&(m&&b&&(this._tempMinDate=f,b=!1,C=!0),C&&(this._tempMaxDate=f)),this._trigger("beforeDateCreate",{date:f,value:this._formatter(f,this.model.dateFormat),element:T}),c.append(T),f=new Date(f.getFullYear(),f.getMonth(),f.getDate()+1,0,0,0)}a.append(c)}o.append(a),this._DRPdisableFade?(e(a).css("display","block"),e(a).css({display:"table-row-group","vertical-align":"middle","border-color":"inherit"})):this._isIE8||this._isIE7?e(a).css("display","block"):e(a).fadeIn("fast"),this.model.startLevel===this.model.depthLevel||"month"!=this.model.depthLevel&&""!=this.model.depthLevel&&("century"==this.model.startLevel||"decade"==this.model.startLevel&&"century"!=this.model.depthLevel||"year"==this.model.startLevel&&"decade"!=this.model.depthLevel&&"century"!=this.model.depthLevel)?this._depthLevel(this.model.depthLevel):(this._on(o.find(".current-month,.other-month,.e-current-month,.e-current-year,.e-current-allyear"),"click",e.proxy(this._backwardNavHandler,this)),this._on(o.find(".current-month , .other-month"),"click",e.proxy(this._onSetCancelDateHandler,this))),this._otherMonthsVisibility(),this._checkDateArrows()},_checkDisableRange:function(e){return!t.isNullOrUndefined(this._disableCollection[e.getFullYear()])&&-1!==jQuery.inArray(e.getMonth(),this._disableCollection[e.getFullYear()])},_initDisableObj:function(){var e,s,l;for(this._disableCollection={},i=0;i<this.model.blackoutDates.length;i++)(e=this._checkInstanceType(this.model.blackoutDates[i]))&&(s=e.getFullYear(),l=e.getMonth(),t.isNullOrUndefined(this._disableCollection[s])&&(this._disableCollection[s]=[]),-1==jQuery.inArray(l,this._disableCollection[s])&&this._disableCollection[s].push(l))},_disableDates:function(e){for(i=0;i<this.model.blackoutDates.length;i++){var t=this._checkInstanceType(this.model.blackoutDates[i]);t&&+e.date==+t&&e.element.removeClass("current-month").addClass("e-hidedate")}},_keyboardNavigation:function(e){var t;if(this._animating)return!1;if(!this._isOpen||37!=e.keyCode&&38!=e.keyCode&&39!=e.keyCode&&40!=e.keyCode&&13!=e.keyCode&&36!=e.keyCode&&35!=e.keyCode)if(this.model.displayInline||27!=e.keyCode&&9!=e.keyCode){if(e.altKey&&40==e.keyCode)return this.show(),!1}else this.hide();else{if(e.preventDefault&&e.preventDefault(),e.altKey)return 13==e.keyCode?(this._setCurrDate(e),!1):void 0;(t={row:null,col:null}).col=this.sfCalendar.find("tbody tr td.e-state-hover").index(),t.row=this.sfCalendar.find("tbody tr td.e-state-hover").parent().index(),t.col=-1!=t.col?t.col+1:this.sfCalendar.find("tbody tr td.e-active").index()+1,t.row=-1!=t.row?t.row+1:this.sfCalendar.find("tbody tr td.e-active").parent().index()+1;var i,s=3,l=4;switch(this.sfCalendar.find("table")[0].className){case"e-dp-viewallyears":i=this._changeRowCol(t,e.keyCode,s,l,"yearall",e.ctrlKey),e.ctrlKey||(this._hoverAllYear=this.sfCalendar.find("tbody.e-datepicker-allyears tr td").index(i));break;case"e-dp-viewyears":i=this._changeRowCol(t,e.keyCode,s,l,"year",e.ctrlKey),e.ctrlKey||(this._hoverYear=this.sfCalendar.find("tbody.e-datepicker-years tr td").index(i));break;case"e-dp-viewmonths":i=this._changeRowCol(t,e.keyCode,s,l,"month",e.ctrlKey),e.ctrlKey||(this._hoverMonth=this.sfCalendar.find("tbody.e-datepicker-months tr td").index(i));break;case"e-dp-viewdays":s=this.sfCalendar.find("tbody.e-datepicker-days tr").length,l=7,i=this._changeRowCol(t,e.keyCode,s,l,"day",e.ctrlKey),e.ctrlKey||(this._hoverDate=this._getDateObj(i).getDate()-1)}e.ctrlKey||(this.sfCalendar.find("table td").removeClass("e-state-hover"),i.addClass("e-state-hover"))}},_changeRowCol:function(t,i,s,l,n,o){var a,r,d,h,c,u={parent:null,child:null};switch(n){case"day":a="tbody.e-datepicker-days tr td.current-month",u.parent=".e-datepicker-days",u.child=".current-month";break;case"month":a="tbody.e-datepicker-months tr td.e-current-month",u.parent=".e-datepicker-months",u.child=".e-current-month";break;case"year":a="tbody.e-datepicker-years tr td.e-current-year",u.parent=".e-datepicker-years",u.child=".e-current-year";break;case"yearall":a="tbody.e-datepicker-allyears tr td.e-current-allyear",u.parent=".e-datepicker-allyears",u.child=".e-current-allyear"}if(t.row<=0&&t.col<=0)return this.sfCalendar.find(a+":first");switch(i){case 36:return this.sfCalendar.find(a+":first");case 35:return this.sfCalendar.find(a+":last");case 38:if(o&&this.model.allowDrillDown)this._forwardNavHandler();else{if(!(t.row>1))return this._processNextPrevDate(!0),this.sfCalendar.find(a+":nth-child("+t.col+"):last");t.row-=1}if((r=this._getCell(t,u)).length<=0){if(null!==(r=this._findVisible(t,u,"up")))return r;this._processNextPrevDate(!0),r=this.sfCalendar.find(a+":nth-child("+t.col+"):last")}return r;case 37:if(o)return this._processNextPrevDate(!0),this.sfCalendar.find("tbody tr td.e-state-hover");if(t.col>1)t.col-=1;else{if(!(t.row>1))return this._processNextPrevDate(!0),this.sfCalendar.find(a+":last");t={row:t.row-1,col:l}}if((r=this._getCell(t,u)).length<=0){if(null!==(r=this._findVisible(t,u,"left")))return r;this._processNextPrevDate(!0),r=this.sfCalendar.find(a+":last")}return r;case 39:if(o)return this._processNextPrevDate(!1),this.sfCalendar.find("tbody tr td.e-state-hover");if(t.col<l)t.col+=1;else{if(!(t.row<s))return this._processNextPrevDate(!1),this.sfCalendar.find(a+":first");t={row:t.row+1,col:1}}if((r=this._getCell(t,u)).length<=0){if(null!==(r=this._findVisible(t,u,"right")))return r;this._processNextPrevDate(!1),r=this.sfCalendar.find(a+":first")}return r;case 40:if(!o){if(!(t.row<s))return this._processNextPrevDate(!1),this.sfCalendar.find(a+":nth-child("+t.col+"):first");if(t.row+=1,(r=this._getCell(t,u)).length<=0){if(null!==(r=this._findVisible(t,u,"down")))return r;this._processNextPrevDate(!1),r=this.sfCalendar.find(a+":nth-child("+t.col+"):first")}return r}case 13:d=e("table",this.sfCalendar).get(0).className,h=this._getCell(t,u),c=e(h)[0],"e-dp-viewmonths"==d&&"year"==this.model.startLevel&&"year"==this.model.depthLevel?(this._dateValue=new Date(this._dateValue.setMonth(parseInt(c.attributes.index.value))),this._onSetCancelDateHandler({type:null,target:h})):"e-dp-viewyears"==d&&"decade"==this.model.startLevel&&"decade"==this.model.depthLevel||"e-dp-viewallyears"==d&&"century"==this.model.startLevel&&"century"==this.model.depthLevel?(this._dateValue=new Date(this._dateValue.setFullYear(parseInt(c.innerHTML))),this._onSetCancelDateHandler({type:null,target:h})):"e-dp-viewdays"==d?(this._backwardNavHandler(h),this._onSetCancelDateHandler({type:null,target:h})):this._backwardNavHandler(h)}return this._getCell(t,u)},_findVisible:function(e,t,s){var l=e.col,n=e.row,o=t.child.slice(1,t.child.length);for(i=0;i>=0;i++){if(nextElement=this.sfCalendar.find("tbody"+t.parent+" tr:nth-child("+n+") td:nth-child("+l+")"),nextElement.length<=0)return null;if(nextElement.hasClass("e-hidedate")||!nextElement.is(":visible")){if("right"==s||"left"==s?"right"==s?l++:l--:"down"==s?n++:n--,n<=0||n>this.sfCalendar.find("tbody"+t.parent+" tr").length||(l>this.sfCalendar.find("tbody"+t.parent+" tr:nth-child("+n+") td").length&&(n++,l=1),l<=0&&(n--,l=this.sfCalendar.find("tbody"+t.parent+" tr:nth-child("+n+") td").length),n<=0||n>this.sfCalendar.find("tbody"+t.parent+" tr").length))return null}else{if(nextElement.hasClass("other-month"))return null;if(nextElement.hasClass(o))return e.col=l,e.row=n,nextElement}}},_getCell:function(e,t){return this.sfCalendar.find("tbody"+t.parent+" tr:nth-child("+e.row+") td"+t.child+":nth-child("+e.col+")")},_getDateObj:function(e){return new Date(e.attr("date"))},_touchCalendar:function(e){var t=this.sfCalendar.find("table")[0].className;switch(e.type){case"pinchin":"e-dp-viewdays"!=t&&this._keyboardNavigation({keyCode:13});break;case"pinchout":"e-dp-viewallyears"!=t&&this.model.allowDrillDown&&this._forwardNavHandler();break;case"swipeleft":this._processNextPrevDate(!1);break;case"swiperight":this._processNextPrevDate(!0)}},show:function(i){var s,l;if(this._isOpen)return!1;if(s=this,this._popupOpen=!0,l=null!=this._preValue?new Date(this._preValue.toString()):this._preValue,this.model.enabled){if(this.model.displayInline||this._setDatePickerPosition(),this._trigger("beforeOpen",{element:this.sfCalendar,events:i}))return!1;this.sfCalendar.attr({"aria-hidden":"false"}),s._isOpen=!0,this.sfCalendar.slideDown(this.model.enableAnimation?this.animation.open.duration:0,function(){s.model&&!s.model.displayInline&&e(document).on("mousedown",e.proxy(s._onDocumentClick,s))}),this._updateInputVal(),this._refreshLevel(l),this._trigger("open",{prevDate:l,date:this.model.value,value:this._formatter(this.model.value,this.model.dateFormat)}),e(window).on("resize",e.proxy(this._OnWindowResize,this)),this.model.displayInline||this._on(t.getScrollableParents(this.wrapper),"scroll",this.hide),this._isInputBox()&&this.wrapper.addClass("e-active")}},hide:function(i){if(!this._isOpen||this._getInternalEvents||this._trigger("beforeClose",{element:this.sfCalendar,events:i}))return!1;var s=this;this._popupOpen=!1,this.sfCalendar.attr({"aria-hidden":"true"}),this._popClose&&i!=l&&"click"!=i.type||(this.sfCalendar.slideUp(this.model.enableAnimation?this.animation.close.duration:0,function(){s._isOpen=!1,e(document).off("mousedown",e.proxy(s._onDocumentClick,s)),s._setWaterMark()}),""!=this.element.val()&&this._validateInputVal(),this._trigger("close",{prevDate:this._prevDate,date:this.model.value,value:this._formatter(this.model.value,this.model.dateFormat)}),e(window).off("resize",e.proxy(this._OnWindowResize,this)),this._off(t.getScrollableParents(this.wrapper),"scroll",this.hide),this._isInputBox()&&this.wrapper.removeClass("e-active"))},enable:function(){this.model.enabled=!0,this.element.removeClass("e-disable").attr({"aria-disabled":!1}),this.element.prop("disabled",!1),this.dateIcon&&this.dateIcon.removeClass("e-disable").attr({"aria-disabled":!1}),this._isIE8&&this.dateIcon&&this.dateIcon.children().removeClass("e-disable"),this.element.prop("disabled",!1),this._isSupport||this._hiddenInput.prop("disabled",!1),this.sfCalendar.removeClass("e-disable").attr({"aria-disabled":!1})},disable:function(){this.model.enabled=!1,this.element.addClass("e-disable").attr({"aria-disabled":!0}),this.element.attr("disabled","disabled"),this.dateIcon&&this.dateIcon.addClass("e-disable").attr({"aria-disabled":!0}),this._isIE8&&this.dateIcon&&this.dateIcon.children().addClass("e-disable"),this.element.attr("disabled","disabled"),this._isSupport||this._hiddenInput.attr("disabled","disabled"),this.sfCalendar.addClass("e-disable").attr({"aria-disabled":!0}),this._isOpen&&(this.element.is(":input")&&this.element.blur(),this.model.displayInline||this.hide())},getValue:function(){return this._formatter(this.model.value,this.model.dateFormat)},_wireEvents:function(){this._allowQuickPick(this.model.allowDrillDown),this._on(e(".e-next",this.sfCalendar),"click",e.proxy(this._previousNextHandler,this)),this._on(e(".e-prev",this.sfCalendar),"click",e.proxy(this._previousNextHandler,this)),this.model.displayInline||(this.sfCalendar.on("mouseenter touchstart",e.proxy(function(){this._popClose=!0},this)),this.sfCalendar.on("mouseleave touchend",e.proxy(function(){this._popClose=!1},this))),this.element.is(":input")&&this.model.allowEdit&&(this._on(this.element,"blur",this._onFocusOut),this._on(this.element,"focus",this._onFocusIn),this._on(this.element,"keydown",this._onKeyDown)),this.model.allowEdit||(this.element.attr("readonly","readonly"),this.element.on("mousedown",e.proxy(this._showDatePopUp,this))),this.model.showFooter&&this._on(e(".e-footer",this.sfCalendar),"click",this._setCurrDate),this._on(this.sfCalendar,"pinchin pinchout swipeleft swiperight",e.proxy(this._touchCalendar,this))},_bindDateButton:function(){this._on(this.dateIcon,"mousedown",this._showDatePopUp),this.model.allowEdit&&this.element.off("mousedown",e.proxy(this._showDatePopUp,this))},_bindInputEvent:function(){this._off(this.dateIcon,"mousedown",this._showDatePopUp)},_specificFormat:function(){var i=t.globalize._getDateParseRegExp(t.globalize.findCulture(this.model.locale).calendar,this.model.dateFormat);return e.inArray("dddd",i.groups)>-1||e.inArray("ddd",i.groups)>-1},_onFocusOut:function(t){var i,s,l;this._isFocused=!1,i=null!=this._preValue?new Date(this._preValue.toString()):this._preValue,this._validateOnFocusOut(this._validateValue(),t),this.wrapper.removeClass("e-focus"),this._isOpen&&!this.model.displayInline||this._setWaterMark()||this._compareDate(this._preValue,this._parseDate(this.element.val(),this.model.dateFormat))||this._updateInputVal(),(!this._isOpen||this.model.displayInline)&&this._refreshLevel(i),""!=this.element.val()&&(!this._isOpen||this.model.displayInline)&&this._validateInputVal(),this.element.off("keydown",e.proxy(this._keyboardNavigation,this)),this.model.showPopupButton||this._off(this.element,"click",this._elementClick),s=this.element.val(),l={prevDate:this._prevDate,value:s},this._specificFormat()?this._prevDate!=s&&this._setDateValue(s,!0):this._setDateValue(s),this.model.value||this._clearSelected(),this._trigger("focusOut",l),this._checkErrorClass()},_onFocusIn:function(t){this._isSupport&&(t.preventDefault(),this._isFocused=!0),this.wrapper.removeClass("e-error").attr("aria-invalid","false"),this.isValidState=!0,this.wrapper.addClass("e-focus"),this.model.readOnly||(this._isSupport||this._hiddenInput.css("display","none"),this.element.on("keydown",e.proxy(this._keyboardNavigation,this)),this.model.showPopupButton||this.model.readOnly||this.show(t),this.model.showPopupButton||this._on(this.element,"click",this._elementClick),this._trigger("focusIn",{date:this.model.value,value:this._formatter(this.model.value,this.model.dateFormat)}))},_elementClick:function(e){this._popupOpen||this.show(e)},_removeWatermark:function(){""==this.element.val()||this._isSupport||this._hiddenInput.css("display","none")},_refreshPopup:function(){this._refreshDatepicker(),this._startLevel(this.model.startLevel)},_refreshLevel:function(e){if(this.model.startLevel==this.model.depthLevel&&"month"!=this.model.startLevel){var t=this._stringToObject(this.element.val());(t=this._validateYearValue(t))&&(this._compareDate(e,t)||this._refreshPopup())}},_validateOnFocusOut:function(e,i){var s,l,n=null!=this._preValue?this._calendarDate:this._preValue,o=this._formatter(n,this.model.dateFormat);this._specificFormat()&&e>this.model.minDate&&e<this.model.maxDate?null==e?this.model.value=n:(this.model.value=e,this._formatter(e,this.model.dateFormat,this.model.locale)):this._formatter(this._parseDate(this._formatter(new Date,"MM/dd/yyyy")),this.model.dateFormat),s=!1,l=!1,null==e||this.model.enableStrictMode?null!=e||this.model.enableStrictMode?e?(e<this.model.minDate||e>this.model.maxDate?(this.isValidState=!1,l=!0,this._calendarDate=e<this.model.minDate?this.model.minDate:this.model.maxDate):this.isValidState=!0,this._triggerChangeEvent(i),l&&this._getInternalEvents&&this._trigger("outOfRange")):(this.isValidState=!1,this._calendarDate<this.model.minDate?this._calendarDate=this.model.minDate:this._calendarDate>this.model.maxDate&&(this._calendarDate=this.model.maxDate)):(null==this._preTxtValue||""==this.element.val()?(this.element.val(""),this._isSupport||this._hiddenInput.css("display","block")):this.element.val(o),this._triggerChangeEvent(i)):(t.isNullOrUndefined(this.model.value)&&(this.model.value=this._parseDate(this.element.val())),this.model.maxDate<this.model.minDate&&(this.model.minDate=this.model.maxDate),this.model.enableStrictMode||(e?(e<this.model.minDate||e>this.model.maxDate)&&(s=!0,this._calendarDate=e=e<this.model.minDate?this.model.minDate:this.model.maxDate):(this.element.val(""),this._calendarDate<this.model.minDate?this._calendarDate=this.model.minDate:this._calendarDate>this.model.maxDate&&(this._calendarDate=this.model.maxDate)),this.isValidState=!0),s&&this.element.val(this._formatter(e,this.model.dateFormat)),this._compareDate(this._preValue,this._parseDate(this.element.val(),!0))||this._triggerChangeEvent(i))},_onKeyDown:function(e){if(13===e.keyCode){var t=null!=this._preValue?new Date(this._preValue.toString()):this._preValue;this._validateOnFocusOut(this._validateValue(),e),this._isOpen&&!this.model.displayInline||this._setWaterMark()||this._compareDate(this._preValue,this._parseDate(this.element.val(),this.model.dateFormat))||this._updateInputVal(),(!this._isOpen||this.model.displayInline)&&this._refreshLevel(t),""!=this.element.val()&&(!this._isOpen||this.model.displayInline)&&this._validateInputVal(),this._checkErrorClass()}},_showhidePopup:function(e){if(!this.model.enabled)return!1;this._isOpen?(this._isFocused||!this.element.is(":input")||t.isTouchDevice()||this.element.focus(),this._cancelValue||this.hide(e)):(this._isFocused||!this.element.is(":input")||t.isTouchDevice()||this.element.focus(),this.show(e))},_compareDate:function(e,t){return+e==+t},_validateDate:function(e){var t,s=!0;if(null!=e){for(i=0;i<this.model.blackoutDates.length;i++)(t=this._checkInstanceType(this.model.blackoutDates[i]))&&+e==+t&&(s=!1);(e<this.model.minDate||e>this.model.maxDate)&&this.model.enableStrictMode&&(s=!1,this.isValidState=!1)}return s},_triggerChangeEvent:function(e){var t,i,s=""==this.element.val()?null:this.element.val();this._prevDate=this._formatter(this._preValue,this.model.dateFormat),i={prevDate:this._prevDate,value:s,isInteraction:!!e},t=this._specificFormat()&&e!=l&&"keydown"==e.type&&this._formatter(this._preValue,this.model.dateFormat,this.model.locale)!=this.element.val()?this._parseDate(this.element.val(),!0):this._specificFormat()&&e!=l&&"blur"==e.type?this.model.value:this._parseDate(s),t=this._validateYearValue(t),this._validateDate(t)||(t=null),this._compareDate(this._preValue,t)?""==this.element.val()&&null==this._prevDate||this.element.val()==this._prevDate||(i.value=this.element.val(),this._trigger("_change",i)):(this._preValue=this.model.value=t,i.value=this._formatter(this.model.value,this.model.dateFormat),this.model.value&&(this._clickedDate=this._calendarDate=this.model.value),this.model.displayInline&&!this._isInputBox()&&this._hiddenInput.attr("value",s),this.model.value||this.model.enableStrictMode||this._setDateValue(this.model.value),i.value=s,this._trigger("_change",i),i.value=this._formatter(this.model.value,this.model.dateFormat),this._trigger("change",i),this._checkErrorClass())},_triggerSelectEvent:function(){var e,t=this.element.val();this._parseDate(t)&&(e={prevDate:this._prevDate,date:this.model.value,value:t,isSpecialDay:this._isSpecialDates(this.model.value)},this._prevDate!=t&&this._parseDate(e.value)&&this.model.value>=this.model.minDate&&this.model.value<=this.model.maxDate&&(this._cancelValue=this._trigger("select",e)),this._dt_drilldown&&this._trigger("dt_drilldown",e))},_onDocumentClick:function(t){this.model&&(e(t.target).is(this.popup)||e(t.target).parents(".e-popup").is(this.popup)||e(t.target).is(this.wrapper)||e(t.target).parents(".e-datewidget").is(this.wrapper)?(e(t.target).is(this.popup)||e(t.target).parents(".e-popup").is(this.popup))&&t.preventDefault():this.hide(t))},_OnWindowResize:function(){this._setDatePickerPosition()},_showDatePopUp:function(e){var t=!1;if(e.button?t=2==e.button:e.which&&(t=3==e.which),!t&&(this._isSupport||this.model.showPopupButton||(e.preventDefault(),this._onFocusIn()),!this.model.readOnly)){if(e.preventDefault(),!this.model.enabled&&this.model.displayInline)return!1;this._showhidePopup(e)}},_layoutChanged:function(){this._getInternalEvents&&this._trigger("layoutChange")},_setCurrDate:function(e){if(this.model.readOnly||!this.model.enabled)return!1;e&&e.preventDefault(),this._prevDate=this._formatter(this.model.value,this.model.dateFormat),this._dateValue=this._zeroTime(new Date),this.model.value=this._calendarDate=new Date(this._dateValue.toString()),this._setDateValue(this.model.value),this._triggerSelectEvent(e),this._triggerChangeEvent(e),this._refreshDatepicker(),this._changeDayClass(),this._startLevel(this.model.startLevel),this._onSetCancelDateHandler(e),this._layoutChanged()},_changeDayClass:function(){var e=this.popup.children("table")[0].className;"e-dp-viewdays"!=e&&this.popup.children("table").removeClass(e).addClass("e-dp-viewdays")},_onSetCancelDateHandler:function(t){if(this.model.readOnly||!this.model.enabled||t&&(e(t.target).hasClass("e-disable")||e(t.target).hasClass("e-hidedate")))return!1;t&&t.type&&t.preventDefault(),this._specificFormat()?this._prevDate=this.element.val():this.model.value=this._parseDate(this.element.val()),this._prevDate=this._formatter(this.model.value,this.model.dateFormat),this._setDateValue(this._dateValue),this._triggerSelectEvent(t),this._triggerChangeEvent(t),this._dateValue=new Date(this.model.value.toString()),this.element.is(":input")&&!this.model.displayInline&&this._showhidePopup(t),t&&e(t.currentTarget).hasClass("other-month")&&this._refreshDatepicker(),this._cellSelection()},_closeCalendar:function(e){e&&e!=this.element||this.sfCalendar.empty().remove()},_checkErrorClass:function(){this.wrapper&&(this.isValidState?this.wrapper.removeClass("e-error").attr("aria-invalid","false"):this.wrapper.addClass("e-error").attr("aria-invalid","true"))},_getLocalizedLabels:function(){return t.getLocalizedConstants(this.sfType,this.model.locale)}}),t.DatePicker.Locale=t.DatePicker.Locale||{},t.DatePicker.Locale.default=t.DatePicker.Locale["en-US"]={watermarkText:"Select date",buttonText:"Today"},t.DatePicker.Header={None:"none",Short:"short",Min:"min",Long:"long"},t.DatePicker.HighlightSection={Month:"month",Week:"week",WorkDays:"workdays",None:"none"},t.DatePicker.Level={Month:"month",Year:"year",Decade:"decade",Century:"century"}}),
/*!
*  filename: ej.datetimepicker.min.js
*  version : 14.4.0.15
*  Copyright Syncfusion Inc. 2001 - 2016. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
function(e){"function"==typeof define&&define.amd?define(["./../common/ej.globalize.min","./../common/ej.core.min","./../common/ej.scroller.min","./ej.datepicker.min","./ej.timepicker.min"],e):e()}(function(){var e,t,s;e=jQuery,(t=Syncfusion).widget("ejDateTimePicker","ej.DateTimePicker",{element:null,model:null,validTags:["input"],_addToPersist:["value"],_setFirst:!1,_rootCSS:"e-datetimepicker",type:"editor",angular:{require:["?ngModel","^?form","^?ngModelOptions"],requireFormatters:!0},defaults:{cssClass:"",locale:"en-US",readOnly:!1,showRoundedCorner:!1,enableRTL:!1,htmlAttributes:{},enabled:!0,value:"",minDateTime:new Date("1/1/1900 12:00:00 AM"),maxDateTime:new Date("12/31/2099 11:59:59 PM"),height:"",width:"",dateTimeFormat:"",showPopupButton:!0,enableStrictMode:!1,buttonText:{today:"Today",timeNow:"Time Now",done:"Done",timeTitle:"Time"},watermarkText:"Select datetime",enablePersistence:!1,interval:30,timeDisplayFormat:"",timePopupWidth:105,popupPosition:"bottom",dayHeaderFormat:"short",startLevel:"month",depthLevel:"",startDay:-1,stepMonths:1,showOtherMonths:!0,enableAnimation:!0,headerFormat:"MMMM yyyy",validationRules:null,validationMessage:null,timeDrillDown:{enabled:!1,interval:5,showMeridian:!1,autoClose:!0,showFooter:!0},beforeOpen:null,beforeClose:null,open:null,close:null,change:null,create:null,destroy:null,focusIn:null,focusOut:null},dataTypes:{cssClass:"string",locale:"string",readOnly:"boolean",showRoundedCorner:"boolean",enableRTL:"boolean",enabled:"boolean",enableAnimation:"boolean",dateTimeFormat:"string",showPopupButton:"boolean",buttonText:"data",watermarkText:"string",enablePersistence:"boolean",enableStrictMode:"boolean",interval:"number",timeDrillDown:"data",timeDisplayFormat:"string",dayHeaderFormat:"string",startLevel:"string",depthLevel:"string",startDay:"number",stepMonths:"number",showOtherMonths:"boolean",headerFormat:"string",validationRules:"data",validationMessage:"data",htmlAttributes:"data"},_setModel:function(i){var s,l,n,o,a=!1;for(s in i)switch(s){case"cssClass":this._changeSkin(i[s]);break;case"locale":this._localize(i[s]);break;case"readOnly":this._readOnly(i[s]);break;case"showRoundedCorner":this._setRoundedCorner(i[s]);break;case"enableRTL":this._setRtl(i[s]);break;case"enabled":this._enabled(i[s]);break;case"validationRules":null!=this.model.validationRules&&(this.element.rules("remove"),this.model.validationMessage=null),this.model.validationRules=i[s],null!=this.model.validationRules&&(this._initValidator(),this._setValidation());break;case"validationMessage":this.model.validationMessage=i[s],null!=this.model.validationRules&&null!=this.model.validationMessage&&(this._initValidator(),this._setValidation());break;case"value":i[s]=this._setValue(i[s]),this._specificFormat()&&(this._stopRefresh=!0),a=!0;break;case"enableStrictMode":this.model.enableStrictMode=i[s],a=!0;break;case"minDateTime":n=this._stringToObject(i[s]),l=this._getFormat(n,this.timePicker.model.timeFormat),this._isValidDate(n)?(this.datePicker.option("minDate",n),this.timePicker.option("minTime",l),i[s]=n,this.model.minDateTime=n):i[s]=this.model[s],a=!0;break;case"maxDateTime":n=this._stringToObject(i[s]),o=this._getFormat(i[s],this.timePicker.model.timeFormat),this._isValidDate(n)?(this.datePicker.option("maxDate",n),this.timePicker.option("maxTime",o),i[s]=n,this.model.maxDateTime=n):i[s]=this.model[s],a=!0;break;case"height":this.wrapper.height(i[s]);break;case"width":this.wrapper.width(i[s]);break;case"dateTimeFormat":this.model.dateTimeFormat=i[s],this.isValidState&&this._setValue(this.model.value);break;case"showPopupButton":this._showButton(i[s]);break;case"watermarkText":t.isNullOrUndefined(this._options)&&(this._options={}),this._options[s]=this.model.watermarkText=i[s],this._localizedLabels.watermarkText=this.model.watermarkText,this._setWaterMark();break;case"buttonText":t.isNullOrUndefined(this._options)||(this._options=[]),this._options.buttonText=this.model.buttonText=i[s],this._localizedLabels.buttonText=this.model.buttonText,this._buttonText(i[s]);break;case"interval":this._updateTimeHeight(),this.timePicker.option("interval",i[s]);break;case"timeDisplayFormat":this._updateTimeHeight(),this.timePicker.option("timeFormat",i[s]);break;case"timePopupWidth":this._updateTimeHeight(),this.timePicker.option("popupWidth",i[s]);break;case"dayHeaderFormat":this.datePicker.option("dayHeaderFormat",i[s]);break;case"startLevel":this.datePicker.option("startLevel",i[s]);break;case"depthLevel":this.datePicker.option("depthLevel",i[s]);break;case"startDay":this.datePicker.option("startDay",i[s]),this.model.startDay=this.datePicker.model.startDay,i[s]=this.model.startDay;break;case"stepMonths":this.datePicker.option("stepMonths",i[s]);break;case"showOtherMonths":this.datePicker.option("showOtherMonths",i[s]);break;case"headerFormat":this.datePicker.option("headerFormat",i[s]);break;case"htmlAttributes":this._addAttr(i[s]);break;case"popupPosition":this.model.popupPosition=i[s],this._setListPosition();break;case"timeDrillDown":t.isNullOrUndefined(i[s].enabled)||(this.model.timeDrillDown.enabled=i[s].enabled,this._changeDesign()),t.isNullOrUndefined(i[s].interval)||(this.model.timeDrillDown.interval=i[s].interval,this._generateMins(e.trim(t.format(this.timePicker._createObject(this._datetimeValue),"HH:00",this.model.locale)))),t.isNullOrUndefined(i[s].showMeridian)||(this.model.timeDrillDown.showMeridian=i[s].showMeridian,this._sfTimeHour.empty(),this._renderHourTable()),t.isNullOrUndefined(i[s].showFooter)||(this.model.timeDrillDown.showFooter=i[s].showFooter,this._changeDesign())}a&&this._validateMinMax(),this._valueChange(!0),"value"==s&&(i[s]=this.model.value),this._updateTimeHeight(),this._checkErrorClass()},observables:["value"],_destroy:function(){this.isPopupOpen&&this._hideResult(),this.wrapper&&(this.element.insertAfter(this.wrapper),this.wrapper.remove()),this._cloneElement.removeClass("e-js e-input").removeClass(t.util.getNameSpace(this.sfType)),this._cloneElement.insertAfter(this.element),this.element.remove(),t.isNullOrUndefined(this.datePicker)||this.datePicker.destroy(),t.isNullOrUndefined(this.timePicker)||this.timePicker.destroy(),this.popup.remove()},_init:function(e){if(!this.element.is("input")||this.element.attr("type")&&"text"!=this.element.attr("type"))return!1;this._options=e,this._cloneElement=this.element.clone(),this._ISORegex(),this._isSupport=document.createElement("input").placeholder!=s,this._validateMeridian(),this._initialize(),this._initial=!0,this._interval=60,this._render(),this._wireEvents(),this._addAttr(this.model.htmlAttributes),null!=this.model.validationRules&&(this._initValidator(),this._setValidation()),this._changeDesign(),e&&e.value!=s&&e.value!=this.element.val()&&this._trigger("_change",{value:this.element.val()})},_ISORegex:function(){this._tokens=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,this._extISORegex=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,this._basicISORegex=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,this._numberRegex={2:/\d\d?/,4:/^\d{4}/,z:/Z|[+-]\d\d(?::?\d\d)?/gi,t:/T/,"-":/\-/,":":/:/},this._zeroRegex=/Z|[+-]\d\d(?::?\d\d)?/,this._dates=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],this._times=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]]},_changeDesign:function(){if(this.model.timeDrillDown.enabled){var t=this.model.timeDrillDown.showFooter?"block":"none";this.popup.addClass("e-drill-down"),this._timeContainer.css("display","none"),this._buttonContainer.css("display","none"),this.datePicker.option("showFooter",this.model.timeDrillDown.showFooter),e(".e-footer",this._sfTimeHour).css("display",t),e(".e-footer",this._sfTimeMins).css("display",t)}else this.popup.removeClass("e-drill-down"),this._sfTimeHour.hide(),this._sfTimeMins.hide(),this._updateTimeHeight(),this._dateContainer.show(),this._timeContainer.show(),this._buttonContainer.show(),this.datePicker.option("showFooter",!1),this.timePicker._refreshScroller(),this.timePicker._changeActiveEle()},_initValidator:function(){this.element.closest("form").data("validator")||this.element.closest("form").validate()},_setValidation:function(){var i,s,l,n;for(s in this.element.rules("add",this.model.validationRules),i=(i=this.element.closest("form").data("validator"))||this.element.closest("form").validate(),name=this.element.attr("name"),i.settings.messages[name]={},this.model.validationRules)if(l=null,!t.isNullOrUndefined(this.model.validationRules[s])){if(t.isNullOrUndefined(this.model.validationRules.messages&&this.model.validationRules.messages[s]))for(n in i.settings.messages[name][s]=e.validator.messages[s],this.model.validationMessage)s==n&&(l=this.model.validationMessage[s]);else l=this.model.validationRules.messages[s];i.settings.messages[name][s]=null!=l?l:e.validator.messages[s]}},_addAttr:function(i){var s=this;e.map(i,function(e,i){var l=i.toLowerCase();"class"==l?s.wrapper.addClass(e):"disabled"==l&&"disabled"==e?s._enabled(!1):"readOnly"==l&&"readOnly"==e?s._readOnly(!0):"style"==l||"id"==l?s.wrapper.attr(i,e):t.isValidAttr(s.element[0],l)?s.element.attr(l,e):s.wrapper.attr(l,e)})},_validateMeridian:function(){var e=t.preferredCulture(this.model.locale);e&&(this.model.locale="en"==e.name?"en-US":e.name),(t.isNullOrUndefined(this._options)||t.isNullOrUndefined(this._options.timeDrillDown)||t.isNullOrUndefined(this._options.timeDrillDown.showMeridian))&&(this.model.timeDrillDown.showMeridian=!t.isNullOrUndefined(t.preferredCulture(this.model.locale).calendars.standard.AM))},_initialize:function(){var i,s,l,n;this.popup=null,this.isPopupOpen=!1,this.isValidState=!0,this.model.value=""===this.model.value?this.element[0].value:this.model.value,this._localizedLabels=this._getLocalizedLabels(),t.isNullOrUndefined(this._options)||(t.isNullOrUndefined(this._options.buttonText)||e.extend(this._localizedLabels.buttonText,this._options.buttonText),t.isNullOrUndefined(this._options.watermarkText)||(this._localizedLabels.watermarkText=this._options.watermarkText)),this._localizedLabelToModel(),this._isIE8="msie"==t.browserInfo().name&&"8.0"==t.browserInfo().version,this._isIE9="msie"==t.browserInfo().name&&"9.0"==t.browserInfo().version,this.model.dateTimeFormat&&this.model.timeDisplayFormat||this._getDateTimeFormat(),(i=!this.model.value||"object"==typeof JSON&&"{}"===JSON.stringify(this.model.value)?null:this.model.value instanceof Date?this.model.value:(s=t.parseDate(this.model.value,this.model.dateTimeFormat,this.model.locale))||((s=this._checkJSONString(this.model.value))?s:null))&&(this.model.value=i),(l=this.model.minDateTime=this._stringToObject(this.model.minDateTime))&&this._isValidDate(l)||(this.model.minDateTime=this.defaults.minDateTime),(n=this.model.maxDateTime=this._stringToObject(this.model.maxDateTime))&&this._isValidDate(n)||(this.model.maxDateTime=this.defaults.maxDateTime)},_checkJSONString:function(e){var t=new Date(e);if(isNaN(Date.parse(t))){if(this._extISORegex.exec(e)||this._basicISORegex.exec(e))return this._dateFromISO(e)}else{if(t.toJSON()===this.model.value||t.toGMTString()===this.model.value||t.toISOString()===this.model.value||t.toLocaleString()===this.model.value||t.toString()===this.model.value||t.toUTCString()===this.model.value)return t;if("string"==typeof e)return this._dateFromISO(e)}},_render:function(){this._renderWrapper(),this._renderIcon(),this._setDimentions(),this._renderDropdown(),this._checkProperties()},_renderWrapper:function(){if(this.element.addClass("e-input").attr({"aria-atomic":"true","aria-live":"assertive",tabindex:"0",value:this.model.value}),this.wrapper=t.buildTag("span.e-datetime-wrap e-widget "+this.model.cssClass+"#"+this.element[0].id+"_wrapper").insertAfter(this.element),t.isTouchDevice()||this.wrapper.addClass("e-ntouch"),this.container=t.buildTag("span.e-in-wrap e-box").append(this.element),this.wrapper.append(this.container),!this._isSupport){this._hiddenInput=t.buildTag("input.e-input e-placeholder ","",{},{type:"text"}).insertAfter(this.element),this._hiddenInput.val(this._localizedLabels.watermarkText),this._hiddenInput.css("display","block");var i=this;e(this._hiddenInput).focus(function(){i.element.focus()})}},_removeWatermark:function(){""==this.element.val()||this._isSupport||this._hiddenInput.css("display","none")},_renderIcon:function(){if(!this.model.showPopupButton)return!1;this.datetimeIcon=t.buildTag("span.e-select","",{}).attr(this._isIE8?{unselectable:"on"}:{});var e=t.buildTag("span.e-icon e-datetime","",{},{"aria-label":"select"}).attr(this._isIE8?{unselectable:"on"}:{});this.datetimeIcon.append(e),this.container.append(this.datetimeIcon).addClass("e-padding"),this._on(this.datetimeIcon,"click",this._iconClick),this._on(this.datetimeIcon,"mousedown",function(e){e.preventDefault()})},_setDimentions:function(){this.model.height&&this.wrapper.height(this.model.height),this.model.width&&this.wrapper.width(this.model.width)},_renderDropdown:function(){var i,s,l,n,o,a=e("#"+this.element[0].id+"_popup").get(0);a&&e(a).remove(),this.popup=t.buildTag("div.e-datetime-popup e-popup e-widget e-box "+this.model.cssClass+"#"+this.element[0].id+"_popup").css("visibility","hidden"),t.isTouchDevice()||this.popup.addClass("e-ntouch"),e("body").append(this.popup),this._renderControls(),i=t.buildTag("div.e-header",this._localizedLabels.buttonText.timeTitle).attr(this._isIE8?{unselectable:"on"}:{}),this._dateContainer=t.buildTag("div.e-datecontainer").append(this.datePicker.popup).attr(this._isIE8?{unselectable:"on"}:{}),this._timeContainer=t.buildTag("div.e-timecontainer").append(i,this.timePicker.popup).attr(this._isIE8?{unselectable:"on"}:{}),this._drillDownContainer=t.buildTag("div.e-drillDowncontainer").append().attr(this._isIE8?{unselectable:"on"}:{}),s=t.buildTag("div.e-popup-container").append(this._dateContainer,this._timeContainer,this._drillDownContainer).attr(this._isIE8?{unselectable:"on"}:{}),l=t.buildTag("div.e-dt-button e-dt-today",this._localizedLabels.buttonText.today).attr(this._isIE8?{unselectable:"on"}:{}),n=t.buildTag("div.e-dt-button e-dt-now",this._localizedLabels.buttonText.timeNow).attr(this._isIE8?{unselectable:"on"}:{}),o=t.buildTag("div.e-dt-button e-dt-done",this._localizedLabels.buttonText.done).attr(this._isIE8?{unselectable:"on"}:{}),this._buttonContainer=t.buildTag("div.e-button-container").append(l,n,o).attr(this._isIE8?{unselectable:"on"}:{}),this._renderDrillDown(),this.popup.append(s,this._buttonContainer),this._checkForResponsive(),this._updateTimeHeight(),this._bindOperations(),this._updateValues(),this.popup.css({visibility:"visible",display:"none"}),this._on(l,"click",this._todayClick),this._on(n,"click",this._nowClick),this._on(o,"click",this._doneClick)},_renderControls:function(){this._renderDateControl(),this._renderTimeControl();var e=t.buildTag("span").append(this.datePicker.wrapper,this.timePicker.wrapper);e.find("span").css("display","none"),this.popup.append(e)},_renderDrillDown:function(){this._renderHourPopup(),this._renderMinsPopup()},_renderHourPopup:function(){this._sfTimeHour=t.buildTag("div.e-timepicker e-popup e-widget "+this.model.cssClass+" e-time-hours ","",{},{id:this._id?"e-hours-"+this._id:""}).attr({"aria-hidden":"true"}).attr(this._isIE8?{unselectable:"on"}:{}),t.isTouchDevice()||this._sfTimeHour.addClass("e-ntouch"),this._drillDownContainer.append(this._sfTimeHour),this._renderHourTable()},_renderHourTable:function(){var s,l,n,o,a,r,d;if(t.buildTag("div.e-header").attr(this._isIE8?{unselectable:"on"}:{}).append(t.buildTag("span.e-prev").append(t.buildTag("a.e-icon e-arrow-sans-left").attr({role:"button"}).attr(this._isIE8?{unselectable:"on"}:{}))).append(t.buildTag("span.e-text").append(t.buildTag("span.e-hours-headertext").text("October 2015").attr({"aria-atomic":"true","aria-live":"assertive",role:"heading"}).attr(this._isIE8?{unselectable:"on"}:{}))).append(t.buildTag("span.e-next").append(t.buildTag("a.e-icon e-arrow-sans-right").attr({role:"button"}).attr(this._isIE8?{unselectable:"on"}:{}))).appendTo(this._sfTimeHour),this._interval<1)return!1;o=6e4*this._interval,a=this.model.timeDrillDown.showMeridian?2:1,rowCount=this.model.timeDrillDown.showMeridian?6:4;var h=this.model.timeDrillDown.showMeridian?"hh":"HH:00",c=["AM","PM"],u=0,m="";for(s=this.timePicker._createObject("12:00:00 AM"),l=this.model.timeDrillDown.showMeridian?this.timePicker._createObject("11:59:59 AM"):this.timePicker._createObject("11:59:59 PM"),i=0;i<a;i++){for(this.model.timeDrillDown.showMeridian&&(m=c[i].toLowerCase(),r=t.isNullOrUndefined(t.preferredCulture(this.model.locale).calendars.standard[c[i]])?"":t.preferredCulture(this.model.locale).calendars.standard[c[i]][0],t.buildTag("div.e-header-"+m).attr(this._isIE8?{unselectable:"on"}:{}).append(t.buildTag("span.e-text").append(t.buildTag("span.e-hours-meridiantxt-"+m).text(r).attr({"aria-atomic":"true","aria-live":"assertive",role:"heading"}).attr(this._isIE8?{unselectable:"on"}:{}))).appendTo(this._sfTimeHour)),table=t.buildTag("table.e-dp-viewhours","",{},{cellspacing:2}).data("e-table","data").attr({role:"grid","aria-activedescendant":""}).attr(this._isIE8?{unselectable:"on"}:{}),this._sfTimeHour.append(table),tbody=t.buildTag("tbody.e-timepicker-hours").attr(this._isIE8?{unselectable:"on"}:{}),tr=t.buildTag("tr","").attr(this._isIE8?{unselectable:"on"}:{});this.timePicker._compareTime(l,s,!0);)n=this._localizeTime(s,h),d=t.buildTag("td.e-hour e-state-default",n),this.model.timeDrillDown.showMeridian&&d.addClass("e-hour-"+m),this._isIE8&&d.attr("unselectable","on"),tr.append(d),++u>=rowCount&&(u=0,tbody.append(tr),tr=t.buildTag("tr","").attr(this._isIE8?{unselectable:"on"}:{})),s=this.timePicker._createObject(s).getTime()+o;table.append(tbody),this.model.timeDrillDown.showMeridian&&(s=this.timePicker._createObject("12:00:00 PM"),l=this.timePicker._createObject("11:59:59 PM"))}t.buildTag("div.e-footer").append(t.buildTag("span.e-footer-icon")).append(t.buildTag("span.e-footer-text")).appendTo(this._sfTimeHour),e(".e-footer-text",this._sfTimeHour).html(this._localizedLabels.buttonText.timeNow),e(".e-hours-headertext",this._sfTimeHour).text(t.format(this.datePicker.model.value,"dd MMM yyyy")),this._on(this._sfTimeHour.find(".e-hour"),"click",e.proxy(this._hourNavHandler,this)),this._on(e(".e-next",this._sfTimeHour),"click",e.proxy(this._prevNextHourHandler,this)),this._on(e(".e-prev",this._sfTimeHour),"click",e.proxy(this._prevNextHourHandler,this)),this._on(e(".e-footer",this._sfTimeHour),"click",this._todayBtn),e(".e-hours-headertext",this._sfTimeHour).on("click",e.proxy(this._forwardNavHandler,this)),this._sfTimeHour.hide()},_localizeTime:function(i,s){return e.trim(t.format(this.timePicker._createObject(i),s,this.model.locale))},_renderMinsPopup:function(){var i,s,l,n,o,a,r;if(this._sfTimeMins=t.buildTag("div.e-timepicker e-popup e-widget "+this.model.cssClass+" e-time-minitues ","",{},{id:this._id?"e-time-minitues-"+this._id:""}).attr({"aria-hidden":"true"}).attr(this._isIE8?{unselectable:"on"}:{}),t.isTouchDevice()||this._sfTimeMins.addClass("e-ntouch"),this._drillDownContainer.append(this._sfTimeMins),t.buildTag("div.e-header").attr(this._isIE8?{unselectable:"on"}:{}).append(t.buildTag("span.e-prev").append(t.buildTag("a.e-icon e-arrow-sans-left").attr({role:"button"}).attr(this._isIE8?{unselectable:"on"}:{}))).append(t.buildTag("span.e-text").append(t.buildTag("span.e-minitues-headertext").attr({"aria-atomic":"true","aria-live":"assertive",role:"heading"}).attr(this._isIE8?{unselectable:"on"}:{}))).append(t.buildTag("span.e-next").append(t.buildTag("a.e-icon e-arrow-sans-right").attr({role:"button"}).attr(this._isIE8?{unselectable:"on"}:{}))).appendTo(this._sfTimeMins),t.buildTag("div.e-mins-header").attr(this._isIE8?{unselectable:"on"}:{}).append(t.buildTag("span.e-text").append(t.buildTag("span.e-minitues-meridiantxt").text("AM").attr({"aria-atomic":"true","aria-live":"assertive",role:"heading"}).attr(this._isIE8?{unselectable:"on"}:{}))).appendTo(this._sfTimeMins),i=t.buildTag("table.e-dp-viewmins","",{},{cellspacing:2}).data("e-table","data").attr({role:"grid","aria-activedescendant":""}).attr(this._isIE8?{unselectable:"on"}:{}),this._sfTimeMins.append(i),tbody=t.buildTag("tbody.e-timepicker-mins").attr(this._isIE8?{unselectable:"on"}:{}),this._intervall<1)return!1;for(o=6e4*this._interval,s=this.timePicker._createObject("12:00:00 AM"),l=this.timePicker._createObject("11:59:59 PM"),tr=t.buildTag("tr","").attr(this._isIE8?{unselectable:"on"}:{}),a=0;this.timePicker._compareTime(l,s,!0);)n=this._localizeTime(s,"HH:00"),r=t.buildTag("td.e-mins e-state-default",n),this._isIE8&&r.attr("unselectable","on"),tr.append(r),++a>=4&&(a=0,tbody.append(tr),tr=t.buildTag("tr","").attr(this._isIE8?{unselectable:"on"}:{})),s=this.timePicker._createObject(s).getTime()+o;i.append(tbody),e(".e-minitues-headertext",this._sfTimeMins).text(e(".e-hours-headertext",this._sfTimeHour).text()),t.buildTag("div.e-footer").append(t.buildTag("span.e-footer-icon")).append(t.buildTag("span.e-footer-text")).appendTo(this._sfTimeMins),e(".e-footer-text",this._sfTimeMins).html(this._localizedLabels.buttonText.timeNow),e(".e-minitues-headertext",this._sfTimeMins).text(t.format(this.datePicker.model.value,"dd MMM yyyy")),this.model.timeDrillDown.showMeridian||e(".e-mins-header",this._sfTimeMins).css("display","none"),this._on(i.find(".e-mins"),"click",e.proxy(this._minsNavHandler,this)),this._on(e(".e-next",this._sfTimeMins),"click",e.proxy(this._prevNextMinsHandler,this)),this._on(e(".e-prev",this._sfTimeMins),"click",e.proxy(this._prevNextMinsHandler,this)),this._on(e(".e-footer",this._sfTimeMins),"click",this._todayBtn),e(".e-minitues-headertext",this._sfTimeMins).on("click",e.proxy(this._forwardNavHandler,this)),this._sfTimeMins.hide()},_todayBtn:function(){this._nowClick(),this._hideResult()},_hourNavHandler:function(i){var s,l;if(this.model.readOnly||!this.model.enabled||i&&e(i.target).hasClass("e-disable"))return!1;i&&i.type&&i.preventDefault(),e("table",this._sfTimeHour).find("td").removeClass("e-active"),e(i.target).addClass("e-active"),this._sfTimeHour.hide(),this._sfTimeMins.show(),this._addFocus(this._sfTimeMins),this.model.timeDrillDown.showMeridian?(l=e(i.target).hasClass("e-hour-am")?"AM":"PM",s=e(i.target).text()+":00 "+l):s=e(i.target).text(),this._generateMins(s);var n=new Date(this._datetimeValue.toString()).setMinutes(this.model.value.getMinutes()),o=e.trim(t.format(this.timePicker._createObject(n),"HH:mm",this.model.locale)),a=e.trim(t.format(this.timePicker._createObject(n),"HH:00",this.model.locale));index=(this.timePicker._parse(o)-this.timePicker._parse(a))/(6e4*this.model.timeDrillDown.interval),index=Math.ceil(index),this._hoverMins=this._setFocusByIndex("mins",index,this._sfTimeMins)},_minsNavHandler:function(i){if(this.model.readOnly||!this.model.enabled||i&&e(i.target).hasClass("e-disable"))return!1;i&&i.type&&i.preventDefault(),e("table",this._sfTimeMins).find("td").removeClass("e-active").removeClass("e-state-hover"),e(i.target).addClass("e-active"),this.model.timeDrillDown.showMeridian?(value=e(i.target).text()+" "+t.format(this._datetimeValue,"tt","en-US"),value=this.timePicker._localizeTime(value)):value=e(i.target).text(),this.timePicker.option("value",value),this.datePicker.option("value",this._datetimeValue),this._datetimeValue=new Date(this.model.value.toString()),this.model.timeDrillDown.autoClose&&this._hideResult(i),this._updateInput()},_generateMins:function(i){var s,l,n,o,a,r,d,h=e("table",this._sfTimeMins);for(h.empty(),this.model.timeDrillDown.showMeridian?e(".e-mins-header",this._sfTimeMins).show():e(".e-mins-header",this._sfTimeMins).hide(),s=this.model.timeDrillDown.showMeridian?"hh:mm":"HH:mm",e(".e-minitues-headertext",this._sfTimeMins).text(e(".e-hours-headertext",this._sfTimeHour).text()),tbody=t.buildTag("tbody.e-timepicker-mins").attr(this._isIE8?{unselectable:"on"}:{}),a=0,r=6e4*this.model.timeDrillDown.interval,l=this.timePicker._createObject(i),this._datetimeValue.setHours(l.getHours()),n=this.timePicker._createObject(l).getTime()+354e4,tr=t.buildTag("tr","").attr(this._isIE8?{unselectable:"on"}:{}),tbody.append(tr);this.timePicker._compareTime(n,l,!0);)a>=4&&(a=0,tr=t.buildTag("tr","").attr(this._isIE8?{unselectable:"on"}:{}),tbody.append(tr)),o=this._localizeTime(l,s),d=t.buildTag("td.e-mins e-state-default",o),this._isIE8&&d.attr("unselectable","on"),tr.append(d),a++,l=this.timePicker._createObject(l).getTime()+r;h.append(tbody),e(".e-mins-header",this._sfTimeMins).find(".e-minitues-meridiantxt").text(t.format(this._datetimeValue,"tt",this.model.locale)),this._disableRange("mins"),this._on(h.find(".e-mins"),"click",e.proxy(this._minsNavHandler,this))},_prevNextHourHandler:function(t){if(this.model.readOnly||!this.model.enabled)return!1;t.preventDefault();var i=!!(e(t.target).is("a")?e(t.target.parentNode):e(t.target)).hasClass("e-prev");this._processNextPrev(i,this._sfTimeHour)},_prevNextMinsHandler:function(t){if(this.model.readOnly||!this.model.enabled)return!1;t.preventDefault();var i=!!(e(t.target).is("a")?e(t.target.parentNode):e(t.target)).hasClass("e-prev");this._processNextPrev(i,this._sfTimeMins)},_processNextPrev:function(i,s){if(i&&s.find(".e-arrow-sans-left").hasClass("e-disable")||!i&&s.find(".e-arrow-sans-right").hasClass("e-disable"))return!1;switch(e("table",s).get(0).className){case"e-dp-viewhours":incVal=i?-1:1,this._datetimeValue.setDate(this._datetimeValue.getDate()+incVal),this._disableRange("hour"),this._hoverHour=this._setFocusByIndex("hour",this._hoverHour,this._sfTimeHour),e(".e-hours-headertext",this._sfTimeHour).text(t.format(this._datetimeValue,"dd MMM yyyy")),e(".e-minitues-headertext",this._sfTimeMins).text(t.format(this._datetimeValue,"dd MMM yyyy"));break;case"e-dp-viewmins":incVal=i?-1:1,this._datetimeValue.setHours(this._datetimeValue.getHours()+incVal),this._generateMins(e.trim(t.format(this.timePicker._createObject(this._datetimeValue),"HH:00",this.model.locale)));var l=new Date(this._datetimeValue.toString()).setMinutes(this.model.value.getMinutes()),n=e.trim(t.format(this.timePicker._createObject(l),"HH:mm",this.model.locale)),o=e.trim(t.format(this.timePicker._createObject(l),"HH:00",this.model.locale));index=(this.timePicker._parse(n)-this.timePicker._parse(o))/(6e4*this.model.timeDrillDown.interval),index=Math.ceil(index),this._disableRange("mins"),this._hoverMins=this._setFocusByIndex("mins",index,this._sfTimeMins),e(".e-hours-headertext",this._sfTimeHour).text(t.format(this._datetimeValue,"dd MMM yyyy")),e(".e-minitues-headertext",this._sfTimeMins).text(t.format(this._datetimeValue,"dd MMM yyyy"))}},_forwardNavHandler:function(i,s){var l;if(this.model.readOnly||!this.model.enabled)return!1;switch(i&&i.preventDefault(),i?e(i.currentTarget).get(0).className:s.find(".e-text>span").get(0).className){case"e-hours-headertext":this._sfTimeHour.css("display","none"),this._dateContainer.css("display","block"),this._addFocus(this._dateContainer.find(".e-datepicker"));break;case"e-minitues-headertext":this._sfTimeMins.css("display","none"),this._disableRange("hour"),start=this._localizeTime(this.timePicker._createObject("12:00:00 AM"),"HH:00"),l=e.trim(t.format(this.timePicker._createObject(this._datetimeValue),"HH:00",this.model.locale)),indx=(this.timePicker._parse(l)-this.timePicker._parse(start))/(6e4*this._interval),indx=Math.floor(indx),this._hoverHour=this._setFocusByIndex("hour",indx,this._sfTimeHour),e(".e-hours-headertext",this._sfTimeHour).text(t.format(this._datetimeValue,"dd MMM yyyy")),e(".e-minitues-headertext",this._sfTimeMins).text(t.format(this._datetimeValue,"dd MMM yyyy")),this._sfTimeHour.css("display","block"),this._addFocus(this._sfTimeHour)}},_renderDateControl:function(){var e=t.buildTag("input#"+this.element[0].id+"_date","",{},{type:"text"});this.popup.append(e),e.ejDatePicker({height:"0px",width:"0px",displayInline:!0,showDateIcon:!1,showFooter:!!this.model.timeDrillDown.enabled&&this.model.timeDrillDown.showFooter,enableStrictMode:!0,buttonText:this._localizedLabels.buttonText.today,minDate:this._stringToObject(this.model.minDateTime),maxDate:this._stringToObject(this.model.maxDateTime),dayHeaderFormat:this.model.dayHeaderFormat,startLevel:this.model.startLevel,depthLevel:this.model.depthLevel,startDay:this.model.startDay,stepMonths:this.model.stepMonths,showOtherMonths:this.model.showOtherMonths,headerFormat:this.model.headerFormat,enabled:this.model.enabled,enableRTL:this.model.enableRTL,showRoundedCorner:this.model.showRoundedCorner,readOnly:this.model.readOnly,cssClass:this.model.cssClass,locale:this.model.locale}),this.datePicker=e.data("ejDatePicker"),this.model.startDay=this.datePicker.model.startDay,this.datePicker._getInternalEvents=!0,this.datePicker._dt_drilldown=!0,this.datePicker.popup.css({position:"static",display:"block"})},_renderTimeControl:function(){var e,i,s=t.buildTag("input#"+this.element[0].id+"_time","",{},{type:"text"});this.popup.append(s),s.ejTimePicker({height:"0px",width:"0px",interval:this.model.interval,timeFormat:this.model.timeDisplayFormat,popupWidth:this.model.timePopupWidth,enabled:this.model.enabled,enableRTL:this.model.enableRTL,showRoundedCorner:this.model.showRoundedCorner,readOnly:this.model.readOnly,cssClass:this.model.cssClass,locale:this.model.locale}),this.timePicker=s.data("ejTimePicker"),this.timePicker._getInternalEvents=!0,this.timePicker.showDropdown=!0,this.timePicker._dateTimeInternal=!0,this.timePicker.popup.css({position:"static",display:"block"}),e=this.model.minDateTime?this._stringToObject(this.model.minDateTime):this.defaults.minDateTime,i=this.model.maxDateTime?this._stringToObject(this.model.maxDateTime):this.defaults.maxDateTime,""==this.model.value&&(this.timePicker.option("minTime",this._getFormat(e,this.timePicker.model.timeFormat)),this.timePicker.option("maxTime",this._getFormat(i,this.timePicker.model.timeFormat)))},_updateTimeHeight:function(){var e=this.datePicker.popup.height()-this.popup.find(".e-header").height();e=this.popup.hasClass("e-dt-responsive")?"98px":e,this.timePicker.option("popupHeight",e)},_bindOperations:function(){var e=this;this.datePicker.option("layoutChange",function(){e._updateTimeHeight()}),this.datePicker.option("outOfRange",function(){e.isValidState=!1}),this.timePicker.option("outOfRange",function(){e.isValidState=!1}),this.datePicker.option("change",function(t){e._refreshTimes(t)}),this.datePicker.option("select",function(t){e._updateInput(t)}),this.datePicker.option("dt_drilldown",function(t){e.model.timeDrillDown.enabled&&(e._updateInput(t),e._switchToDrilDown(t))}),this.timePicker.option("select",function(){e._updateInput()})},_switchToDrilDown:function(){var i,s;this._dateContainer.hide(),this._sfTimeHour.show(),this._addFocus(this._sfTimeHour),i=new Date(this.model.value.toString()),this._datetimeValue=new Date(i.setHours(this._datetimeValue.getHours(),this._datetimeValue.getMinutes(),this._datetimeValue.getSeconds(),this._datetimeValue.getMilliseconds())),this._disableRange("hour"),start=this._localizeTime(this.timePicker._createObject("12:00:00 AM"),"HH:00"),s=e.trim(t.format(this.timePicker._createObject(this._datetimeValue),"HH:00",this.model.locale)),indx=(this.timePicker._parse(s)-this.timePicker._parse(start))/(6e4*this._interval),indx=Math.floor(indx),this._hoverHour=this._setFocusByIndex("hour",indx,this._sfTimeHour),e(".e-hours-headertext",this._sfTimeHour).text(t.format(this._datetimeValue,"dd MMM yyyy")),e(".e-minitues-headertext",this._sfTimeMins).text(t.format(this._datetimeValue,"dd MMM yyyy"))},_disableRange:function(s){var l,n,o,a="hour"==s?this._interval:this.model.timeDrillDown.interval,r="hour"==s?this._sfTimeHour:this._sfTimeMins,d="hour"==s?"e-hide-hour e-disable":"e-hide-mins e-disable";if(r.find("tbody tr td.e-"+s).removeClass(d),r.find(".e-arrow-sans-left").removeClass("e-disable"),r.find(".e-arrow-sans-right").removeClass("e-disable"),start="hour"==s?this._localizeTime(this.timePicker._createObject("12:00:00 AM"),"HH:00"):this._localizeTime(e.trim(t.format(this.timePicker._createObject(this._datetimeValue),"HH:00",this.model.locale)),"HH:00"),this._compareDate(this.model.minDateTime,this._datetimeValue)){if("mins"==s&&this.model.minDateTime.getHours()!==this._datetimeValue.getHours())return!1;for(l=e.trim(t.format(this.timePicker._createObject(this.model.minDateTime),"HH:mm",this.model.locale)),indx=(this.timePicker._parse(l)-this.timePicker._parse(start))/(6e4*a),indx="hour"==s?Math.floor(indx):Math.ceil(indx),i=0;i<indx;i++)o=r.find("tbody tr td.e-"+s)[i],e(o).addClass(d);r.find(".e-arrow-sans-left").addClass("e-disable")}if(this._compareDate(this.model.maxDateTime,this._datetimeValue)){if("mins"==s&&this.model.maxDateTime.getHours()!==this._datetimeValue.getHours())return!1;for(l=e.trim(t.format(this.timePicker._createObject(this.model.maxDateTime),"HH:mm",this.model.locale)),indx=(this.timePicker._parse(l)-this.timePicker._parse(start))/(6e4*a),indx=Math.floor(indx)+1,n=r.find("tbody tr td.e-"+s).length,i=indx;i<n;i++)o=r.find("tbody tr td.e-"+s)[i],e(o).addClass(d);r.find(".e-arrow-sans-right").addClass("e-disable")}},_setFocusByName:function(t,i,s){var l,n,o=s.find("tbody tr td.e-"+t);return e(o).each(function(e,t){t.innerHTML!=i||(l=e)}),(n=o[l])||(n=o.last()),s.find("table td").removeClass("e-state-hover").removeClass("e-active"),e(n).hasClass("e-hide-"+t)||e(n).addClass("e-state-hover"),this._setActiveState(t,s),l},_setFocusByIndex:function(t,i,s){var l,n=s.find("tbody tr td.e-"+t);return(l=n[i])||(l=n.last()),s.find("table td").removeClass("e-state-hover").removeClass("e-active"),e(l).hasClass("e-hide-"+t)||e(l).addClass("e-state-hover"),this._setActiveState(t,s),i},_setActiveState:function(i,s){var l,n=s.find("tbody tr td.e-"+i),o=-1;switch(i){case"hour":this._compareDate(this.model.value,this._datetimeValue)&&(start=this._localizeTime(this.timePicker._createObject("12:00:00 AM"),"HH:00"),r=e.trim(t.format(this.timePicker._createObject(this.model.value),"HH:00",this.model.locale)),o=(this.timePicker._parse(r)-this.timePicker._parse(start))/(6e4*this._interval),o=Math.floor(o));break;case"mins":if(this._compareDate(this.model.value,this._datetimeValue)&&this.model.value.getHours()===this._datetimeValue.getHours()){var a=new Date(this._datetimeValue.toString()).setMinutes(this.model.value.getMinutes()),r=e.trim(t.format(this.timePicker._createObject(a),"HH:mm",this.model.locale)),d=e.trim(t.format(this.timePicker._createObject(a),"HH:00",this.model.locale));o=(this.timePicker._parse(r)-this.timePicker._parse(d))/(6e4*this.model.timeDrillDown.interval),o=Math.ceil(o)}}(l=n[o])&&(s.find("table td").removeClass("e-active"),e(l).removeClass("e-state-hover").addClass("e-active"))},_compareDate:function(e,t){return+new Date(e.toString()).setHours(0,0,0,0)==+new Date(t.toString()).setHours(0,0,0,0)},_updateInput:function(e){var t=(new Date).setHours(0,0,0,0),i=this._getDate()||new Date,s=this._getTime()||this.timePicker._createObject(t);this.model.value=new Date(i.getFullYear(),i.getMonth(),i.getDate(),s.getHours(),s.getMinutes(),s.getSeconds()),this._preVal=this._objectToString(this.model.value),this._updateDateTime(),this._raiseChangeEvent(),this._updateModel(e),e&&(e.cancel=!0)},_updateDateTime:function(){this.isValidState=!0;var e=this._objectToString(this.model.value);this.element.val(e),this._removeWatermark()},_refreshTimes:function(e){var t,i,s=this._getDateObj(e.value,this.datePicker.model.dateFormat);if(!s)return!1;this.isValidState=!0,this._compare(s,this._setEmptyTime(this.model.minDateTime))?(t=this._getFormat(this.model.minDateTime,this.timePicker.model.timeFormat),this._getTime(),this.timePicker.option("minTime",t),this.model.enableStrictMode||this._updateInput()):this.timePicker.option("minTime",this._defaultMinVal()),this._compare(s,this._setEmptyTime(this.model.maxDateTime))?(i=this._getFormat(this.model.maxDateTime,this.timePicker.model.timeFormat),this._getTime(),this.timePicker.option("maxTime",i),this.model.enableStrictMode||this._updateInput()):this.timePicker.option("maxTime",this._defaultMaxVal()),this.timePicker._changeActiveEle()},_defaultMinVal:function(){var e=(new Date).setHours(0,0,0,0);return t.format(this.timePicker._createObject(e),this.timePicker.model.timeFormat,this.timePicker.model.locale)},_defaultMaxVal:function(){var e=(new Date).setHours(23,59,59,59);return t.format(this.timePicker._createObject(e),this.timePicker.model.timeFormat,this.timePicker.model.locale)},_updateValues:function(){var e=this.model.value;null!=this.model.value&&(this.datePicker.option("value",this.model.value),this.timePicker.option("value",this.model.value)),this._setValue(e),this._validateMinMax(),this._preVal=this.element.val(),this._checkErrorClass()},_specificFormat:function(){var i=t.globalize._getDateParseRegExp(t.globalize.findCulture(this.model.locale).calendar,this.model.dateFormat);return e.inArray("dddd",i.groups)>-1||e.inArray("ddd",i.groups)>-1},_setValue:function(e){return!e||"object"==typeof JSON&&"{}"===JSON.stringify(e)?(this.element.val(""),this.model.value=null,this.isValidState=!0):"string"==typeof e?this._extISORegex.exec(e)||this._basicISORegex.exec(e)?this._checkObject(this._dateFromISO(e)):(this.element.val(e),this._updateModel(),this._validateMinMax(),this._checkStrictMode()):e instanceof Date&&this._isValidDate(e)&&this._checkObject(e),this._checkErrorClass(),this.model.value},_checkObject:function(e){e instanceof Date&&this._isValidDate(e)&&(this.model.value=e,this._updateDateTime(),this._validateMinMax(),this._checkStrictMode())},_dateFromISO:function(e){var t,i,s,l,n,o,a,r,d,h=this._extISORegex.exec(e)||this._basicISORegex.exec(e),c="",u="",m="";if(h){for(t=0;t<this._dates.length;t++)if(this._dates[t][1].exec(h[1])){c=this._dates[t][0];break}if(h[3])for(i=0;i<this._times.length;i++)if(this._times[i][1].exec(h[3])){u=(h[2]||" ")+this._times[i][0];break}for(h[4]&&this._zeroRegex.exec(h[4])&&(m="Z"),s=(c+u+m).match(this._tokens),n=[],a=0;a<s.length;a++)r=s[a],o=this._checkLiteral(s[a]),d=this._numberRegex[o?s[a].toLowerCase():r.length]||new RegExp("^\\d{1,"+r.length+"}"),(l=e.match(d))&&(e.substr(0,e.indexOf(l))>=0&&!o&&(s[a].indexOf("M")>=0?n.push(parseInt(l[0])-1):n.push(parseInt(l[0]))),e=e.slice(e.indexOf(l[0])+l[0].length));return new Date(n[0],n[1],n[2],n[3],n[4],n[5])}},_checkLiteral:function(e){return char=e.toLowerCase(),"t"==char||"z"==char||":"==char||"-"==char},_validateValue:function(e){var i=t.parseDate(e,this.model.dateTimeFormat);!i||i<this.model.minDateTime||i>this.model.maxDateTime?(this.model.value=null,this._change("value",this.model.value),this.isValidState=!1):(this._change("value",this.model.value),this.isValidState=!0)},_validateMinMax:function(){var e,t,i;if(e=this.model.value?this._stringToObject(this.model.value):null,t=this.model.minDateTime?this._stringToObject(this.model.minDateTime):this.defaults.minDateTime,i=this.model.maxDateTime?this._stringToObject(this.model.maxDateTime):this.defaults.maxDateTime,!e||!t||!i)return!1;t>i&&(this.model.minDateTime=this.model.maxDateTime),e<t&&(this.model.enableStrictMode?this.model.enableStrictMode&&(this.datePicker.option("minDate",this._getFormat(t,this.datePicker.model.dateFormat)),this.timePicker.option("minTime",this._getFormat(t,this.timePicker.model.timeFormat)),this.isValidState=!1):(this._setValue(t),this.isValidState=!0)),e>i&&(this.model.enableStrictMode?this.model.enableStrictMode&&(this.datePicker.option("maxDate",this._getFormat(i,this.datePicker.model.dateFormat)),this.timePicker.option("maxTime",this._getFormat(i,this.timePicker.model.timeFormat)),this.isValidState=!1):(this._setValue(i),this.isValidState=!0)),e<t||e>i||(this.isValidState=!0)},_checkProperties:function(){this.model.readOnly&&this._readOnly(!0),this.model.showRoundedCorner&&this._setRoundedCorner(!0),this.model.enableRTL&&this._setRtl(!0),this.model.enabled&&this._enabled(!0),this.model.enabled?this.model.enabled&&this.element.hasClass("e-disable")&&this._enabled(!0):this._enabled(!1),this.element.attr("name")||this.element.attr({name:this.element[0].id}),this._checkStrictMode(),this._checkErrorClass(),this._datetimeValue=new Date(this.datePicker._dateValue.toString()),t.isNullOrUndefined(this.model.value)||(this._datetimeValue=new Date(this.model.value.toString())),this._setWaterMark()},_checkStrictMode:function(){this.model.enableStrictMode||this.isValidState||(this.model.value<this.model.minDateTime?(this.element.val(this._objectToString(this.model.minDateTime)),this.model.value=this.model.minDateTime,this.isValidState=!0):this.model.value>this.model.maxDateTime?(this.element.val(this._objectToString(this.model.maxDateTime)),this.model.value=this.model.maxDateTime,this.isValidState=!0):(this.model.value="",this.element.val(""),this.isValidState=!0))},_targetFocus:function(e){e.preventDefault(),this.isFocused=!0,this.wrapper.addClass("e-focus"),this.wrapper.removeClass("e-error"),this._isSupport||this._hiddenInput.css("display","none"),this._prevDateTimeVal=this.element.val(),this.model.showPopupButton||this.model.readOnly||this._showResult(),this.model.showPopupButton||this._on(this.element,"click",this._elementClick),this._trigger("focusIn",{value:this.model.value})},_targetBlur:function(){var e;this.isFocused=!1,this.wrapper.removeClass("e-focus"),this.model.showPopupButton||this._hideResult(),(e=t.parseDate(this.element.val(),this.model.dateTimeFormat))&&!this.model.enableStrictMode&&(e<this.model.minDateTime||e>this.model.maxDateTime)&&(e=e<this.model.minDateTime?this.model.minDateTime:this.model.maxDateTime,this.element.val(this._objectToString(e))),null!=t.parseDate(this.element.val(),this.model.dateTimeFormat)||this.model.enableStrictMode||(null==this._prevDateTimeVal||""==this.element.val()?this.element.val(""):this.element.val(this._preVal)),this._valueChange(),this.model.enableStrictMode?""!=this.element.val()&&this._validateValue(this.element.val()):this.isValidState?this._prevDateTimeVal=this.element.val():(this.element.val(this._prevDateTimeVal),this._preVal=this._prevDateTimeVal,this.model.value=this._stringToObject(this._prevDateTimeVal),this.isValidState=!0),this._isSupport||""!=this.element.val()||this._hiddenInput.css("display","block"),this._checkErrorClass(),this.model.showPopupButton||this._off(this.element,"click",this._elementClick),this._trigger("focusOut",{value:this.model.value})},_elementClick:function(){this.isPopupOpen||this._showResult()},_keyDownOnInput:function(e){switch(e.keyCode){case 40:e.altKey&&this._showhidePopup();break;case 37:case 39:this.model.timeDrillDown.enabled||e.altKey&&this.isPopupOpen&&(e.preventDefault(),this._addPrevNextFocus(37==e.keyCode));break;case 27:e.preventDefault();case 9:this._hideResult();break;case 13:if(!this.model.timeDrillDown.enabled){this._valueChange();break}}},_addFocus:function(t){t.hasClass("e-focus")||(this._removeFocus(),t.addClass("e-focus"),t.hasClass("e-datepicker e-popup")?e(document).on("keydown",e.proxy(this.datePicker._keyboardNavigation,this.datePicker)):t.hasClass("e-timecontainer")?e(document).on("keydown",e.proxy(this.timePicker._keyDownOnInput,this.timePicker)):t.hasClass("e-time-hours")?e(document).on("keydown",e.proxy(this._keyDownOnHours,this)):t.hasClass("e-time-minitues")?e(document).on("keydown",e.proxy(this._keyDownOnMinutes,this)):t.hasClass("e-dt-button")&&e(document).on("keydown",e.proxy(this._buttonClick,this)))},_removeFocus:function(){var t=this._getFocusedElement();t.length>0&&(t.removeClass("e-focus"),t.hasClass("e-datepicker e-popup")?e(document).off("keydown",e.proxy(this.datePicker._keyboardNavigation,this.datePicker)):t.hasClass("e-timecontainer")?e(document).off("keydown",e.proxy(this.timePicker._keyDownOnInput,this.timePicker)):t.hasClass("e-time-hours")?e(document).off("keydown",e.proxy(this._keyDownOnHours,this)):t.hasClass("e-time-minitues")?e(document).off("keydown",e.proxy(this._keyDownOnMinutes,this)):t.hasClass("e-dt-button")&&e(document).off("keydown",e.proxy(this._buttonClick,this)))},_addPrevNextFocus:function(e){var t,i=this._getFocusedElement();i.length>0?i.hasClass("e-datepicker e-popup")?t=e?this.popup.find(".e-dt-done"):this.popup.find(".e-timecontainer"):i.hasClass("e-timecontainer")?t=e?this.popup.find(".e-datecontainer >.e-datepicker.e-popup"):this.popup.find(".e-dt-today"):i.hasClass("e-dt-today")?t=e?this.popup.find(".e-timecontainer"):this.popup.find(".e-dt-now"):i.hasClass("e-dt-now")?t=e?this.popup.find(".e-dt-today"):this.popup.find(".e-dt-done"):i.hasClass("e-dt-done")&&(t=e?this.popup.find(".e-dt-now"):this.popup.find(".e-datecontainer >.e-datepicker.e-popup")):t=e?this.popup.find(".e-dt-done"):this.popup.find(".e-datecontainer >.e-datepicker.e-popup"),this._addFocus(t)},_getFocusedElement:function(){return this.popup.children("div").find("div.e-focus")},_keyDownOnHours:function(e){var t,i;(37==e.keyCode||38==e.keyCode||39==e.keyCode||40==e.keyCode||13==e.keyCode||36==e.keyCode||35==e.keyCode)&&(e.preventDefault&&e.preventDefault(),(t={row:null,col:null}).col=this._sfTimeHour.find("tbody tr td.e-state-hover").index(),t.row=this._sfTimeHour.find("tbody tr td.e-state-hover").parent().index(),t.col=-1!=t.col?t.col+1:this._sfTimeHour.find("tbody tr td.e-active").index()+1,-1!=t.row?(t.row=t.row+1,this.model.timeDrillDown.showMeridian&&this._sfTimeHour.find("tbody tr td.e-state-hover").hasClass("e-hour-pm")&&(t.row=t.row+2)):(t.row=this._sfTimeHour.find("tbody tr td.e-active").parent().index()+1,this.model.timeDrillDown.showMeridian&&this._sfTimeHour.find("tbody tr td.e-active").hasClass("e-hour-pm")&&(t.row=t.row+2)),this._sfTimeHour.find("table")[0].className,rowLength=this._sfTimeHour.find("tbody.e-timepicker-hours tr").length,colLength=this.model.timeDrillDown.showMeridian?6:4,i=this._changeRowCol(t,e.keyCode,rowLength,colLength,"hours",e.ctrlKey),e.ctrlKey||(this._hoverHour=this._sfTimeHour.find("tbody.e-timepicker-hours tr td").index(i)),e.ctrlKey||(this._sfTimeHour.find("table td").removeClass("e-state-hover"),i.addClass("e-state-hover")))},_changeRowCol:function(t,i,s,l,n,o){var a,r,d,h,c={parent:null,child:null};switch(n){case"hours":a="tbody.e-timepicker-hours tr td.e-hour",c.parent=".e-timepicker-hours",c.child=".e-hour",hiddenClass=".e-hide-hour",r=this._sfTimeHour;break;case"mins":a="tbody.e-timepicker-mins tr td.e-mins",c.parent=".e-timepicker-mins",c.child=".e-mins",hiddenClass=".e-hide-mins",l=(r=this._sfTimeMins).find("tbody"+c.parent+" tr:nth-child("+t.row+") td"+c.child).length}if(t.row<=0&&t.col<=0)return r.find(a+":not(.e-disable):first");switch(i){case 36:return r.find(a+":not(.e-disable):first");case 35:return r.find(a+":not(.e-disable):last");case 38:if(o)this._forwardNavHandler(null,r);else{if(!(t.row>1))return this._processNextPrev(!0,r),r.find(a+":nth-child("+t.col+"):last");t.row-=1}if((d=this._getCell(t,c,r).not(hiddenClass)).length<=0){if(null!==(d=this._findVisible(t,c,"up",r)))return d;this._processNextPrev(!0,r),d=r.find(a+":nth-child("+t.col+"):last")}return d;case 37:if(o)return this._processNextPrev(!0,r),r.find("tbody tr td.e-state-hover");if(t.col>1)t.col-=1;else{if(!(t.row>1))return this._processNextPrev(!0,r),r.find(a+":not(.e-disable):last");t={row:t.row-1,col:l},"mins"==n&&(t.col=l=r.find("tbody"+c.parent+" tr:nth-child("+t.row+") td"+c.child).length)}if((d=this._getCell(t,c,r).not(hiddenClass)).length<=0){if(null!==(d=this._findVisible(t,c,"left",r)))return d;this._processNextPrev(!0,r),d=r.find(a+":not(.e-disable):last")}return d;case 39:if(o)return this._processNextPrev(!1,r),r.find("tbody tr td.e-state-hover");if(t.col<l)t.col+=1;else{if(!(t.row<s))return this._processNextPrev(!1,r),r.find(a+":not(.e-disable):first");t={row:t.row+1,col:1}}if((d=this._getCell(t,c,r).not(hiddenClass)).length<=0){if(null!==(d=this._findVisible(t,c,"right",r)))return d;this._processNextPrev(!1,r),d=r.find(a+":not(.e-disable):first")}return d;case 40:if(!o){if(!(t.row<s))return this._processNextPrev(!1,r),r.find(a+":nth-child("+t.col+"):first");if(t.row+=1,(d=this._getCell(t,c,r).not(hiddenClass)).length<=0){if(null!==(d=this._findVisible(t,c,"down",r)))return d;this._processNextPrev(!1,r),d=r.find(a+":nth-child("+t.col+"):first")}return d}case 13:h=this._getCell(t,c,r),e(h)[0],args={type:null,target:h},"hours"==n&&this._hourNavHandler(args),"mins"==n&&this._minsNavHandler(args)}return this._getCell(t,c,r).not(hiddenClass)},_getCell:function(t,i,s){var l,n=t.row;return this.model.timeDrillDown.showMeridian&&t.row>2&&s.hasClass("e-time-hours")&&(n-=2),l=s.find("tbody"+i.parent+" tr:nth-child("+n+") td"+i.child+":nth-child("+t.col+")"),this.model.timeDrillDown.showMeridian&&l.length>0&&s.hasClass("e-time-hours")&&(l=t.row<=2?e(l[0]):e(l[1])),l},_findVisible:function(e,t,s,l){var n=e.col,o=e.row,a=t.child.slice(1,t.child.length);for(i=0;i>=0;i++){if(nextElement=this._getCell({row:o,col:n},t,l),nextElement.length<=0)return null;if(nextElement.hasClass("e-disable")||!nextElement.is(":visible")){if("right"==s||"left"==s?"right"==s?n++:n--:"down"==s?o++:o--,o<=0||o>l.find("tbody"+t.parent+" tr").length||(n>l.find("tbody"+t.parent+" tr:nth-child("+o+") td").length&&(o++,n=1),n<=0&&(o--,n=l.find("tbody"+t.parent+" tr:nth-child("+o+") td").length),o<=0||o>l.find("tbody"+t.parent+" tr").length))return null}else if(nextElement.hasClass(a))return e.col=n,e.row=o,nextElement=this._getCell(e,t,l)}},_keyDownOnMinutes:function(e){var t,i;(37==e.keyCode||38==e.keyCode||39==e.keyCode||40==e.keyCode||13==e.keyCode||36==e.keyCode||35==e.keyCode)&&(e.preventDefault&&e.preventDefault(),(t={row:null,col:null}).col=this._sfTimeMins.find("tbody tr td.e-state-hover").index(),t.row=this._sfTimeMins.find("tbody tr td.e-state-hover").parent().index(),t.col=-1!=t.col?t.col+1:this._sfTimeMins.find("tbody tr td.e-active").index()+1,t.row=-1!=t.row?t.row+1:this._sfTimeMins.find("tbody tr td.e-active").parent().index()+1,this._sfTimeMins.find("table")[0].className,rowLength=this._sfTimeMins.find("tbody.e-timepicker-mins tr").length,colLength=4,i=this._changeRowCol(t,e.keyCode,rowLength,colLength,"mins",e.ctrlKey),e.ctrlKey||(this._hoverHour=this._sfTimeMins.find("tbody.e-timepicker-mins tr td").index(i)),e.ctrlKey||(this._sfTimeMins.find("table td").removeClass("e-state-hover"),i.addClass("e-state-hover")))},_valueChange:function(e){this.model.enableStrictMode?this.model.enableStrictMode&&(this._preVal!=this.element.val()||this.model.value<this.model.minDateTime||this.model.value>this.model.maxDateTime)&&(this._updateModel(),this._raiseChangeEvent(e)):(this._preVal!=this.element.val()&&(this._preVal=this.element.val(),this._updateModel(),this._validateMinMax(),this._raiseChangeEvent(e)),this._setWaterMark())},_updateModel:function(e){var i,l;this._stopRefresh?this._stopRefresh=!1:""==(i=this.element.val())?(this.model.value=null,this._change("value",this.model.value),this.isValidState=!0):(l=e!=s&&"select"==e.type||this._prevDateTimeVal==this.element.val()?this.model.value:t.parseDate(i,this.model.dateTimeFormat,this.model.locale))?(this.model.value=l,this.isValidState=!0,this._refreshPopup(),this._specificFormat()&&this._prevDateTimeVal!=this.element.val()&&this.element.val(this._objectToString(this.model.value))):(this.model.value=null,this._change("value",this.model.value),this.isValidState=!1)},_refreshPopup:function(){if(this.isValidState&&this.isPopupOpen){var e=this._setEmptyTime(this.model.value),t=this._setEmptyDate(this.model.value),i=this._getDate(),s=this._getTime();i&&this._compare(i,e)||this.datePicker.option("value",e),s&&this._compare(s,t)||this.timePicker.option("value",t)}},_buttonClick:function(e){if(13==e.keyCode){e.preventDefault();var t=this._getFocusedElement();t.hasClass("e-dt-today")?this._todayClick():t.hasClass("e-dt-now")?this._nowClick():t.hasClass("e-dt-done")&&this._doneClick()}},_todayClick:function(){if(!this.model.enabled||this.model.readOnly)return!1;this.datePicker.popup.find(".today").hasClass("e-active")&&this.datePicker.popup.children("table").hasClass("e-dp-viewdays")&&""!=this.element.val()&&this.isValidState||(this.datePicker._setCurrDate(),this._updateInput())},_nowClick:function(){var e;if(!this.model.enabled||this.model.readOnly)return!1;this.timePicker.setCurrentTime();var i=this.model.minDateTime,s=this.model.maxDateTime,l=this.datePicker.model.value,n=new Date;l=t.isNullOrUndefined(l)?new Date:l,(e=new Date(l.getFullYear(),l.getMonth(),l.getDate(),n.getHours(),n.getMinutes(),n.getSeconds()))<i?this.timePicker.option("value",this.timePicker._localizeTime(i)):e>s&&this.timePicker.option("value",this.timePicker._localizeTime(s)),this._updateInput()},_doneClick:function(){this._hideResult()},_iconClick:function(e){e.preventDefault(),this.isFocused||t.isTouchDevice()||this.element.focus(),this._showhidePopup(),this._isIE9&&this.popup.find(".e-popup-container").css("display","inline-block")},_setInitialSelection:function(){var t,i,s,l,n=this.timePicker.ul.find("li");n.hasClass("e-hover")||(i=t=this.timePicker._setEmptyDate(new Date),this.timePicker.minTime&&!this._compareTime(this._createObject(t),this.timePicker.minTime,!0)&&(i=this.timePicker.minTime),this.timePicker.maxTime&&!this._compareTime(this.timePicker.maxTime,this._createObject(t),!0)&&(i=this.timePicker.maxTime),s=n.first().html(),l=(this.timePicker._parse(i)-this.timePicker._parse(s))/(6e4*this.timePicker.model.interval),l=Math.round(l),activeItem=l==n.length?l:l+1,(activeItem<0||activeItem>n.length||isNaN(activeItem))&&(activeItem=1),e(this.timePicker.ul.find("li")[activeItem-1]).addClass("e-hover"),this._calcScrollTop())},_calcScrollTop:function(){this.timePicker.ul.outerHeight();var e,t=this.timePicker.ul.find("li").outerHeight();e=t*this.timePicker.ul.find("li.e-hover").index()-(this.timePicker.popupList.outerHeight()-t)/2,this.timePicker.scrollerObj.setModel({scrollTop:e})},_showhidePopup:function(){if(this.model.readOnly)return!1;this.isPopupOpen?this._hideResult():this._showResult()},_showResult:function(){if(this.isPopupOpen||!this.model.enabled||this._trigger("beforeOpen",{element:this.popup}))return!1;this.isPopupOpen=!0,this._setListPosition(),this._checkForResponsive();var i=this;this.popup.slideDown(this.model.enableAnimation?200:0,function(){i._on(e(document),"mousedown",i._OnDocumentClick),i.model.timeDrillDown.enabled&&i._addFocus(i._dateContainer.find(".e-datepicker")),i.timePicker.model.value||i._setInitialSelection()}),this._updateModel(),this._updateTimeHeight(),this._validateMinMax(),this._on(e(window),"resize",this._OnWindowResize),this._on(t.getScrollableParents(this.wrapper),"scroll",this._hideResult),this._raiseEvent("open"),this._initial&&(this.timePicker._refreshScroller(),this.timePicker._changeActiveEle(),this._initial=!1),this.wrapper.addClass("e-active")},_hideResult:function(i){var s=this;if(!this.isPopupOpen||this._trigger("beforeClose",{element:this.popup}))return!1;this.isPopupOpen=!1,this._removeFocus(),this._popClose&&i&&"click"!=i.type?this.isPopupOpen=!0:(this.popup.slideUp(this.model.enableAnimation?100:0,function(){s.model&&(s.model.timeDrillDown.enabled&&(s._sfTimeHour.hide(),s._sfTimeMins.hide(),s._dateContainer.show()),t.isNullOrUndefined(s.model.value)||(s._datetimeValue=new Date(s.model.value.toString())))}),this._raiseEvent("close"),this._off(e(document),"mousedown",this._OnDocumentClick),this._off(e(window),"resize",this._OnWindowResize),this._off(t.getScrollableParents(this.wrapper),"scroll",this._hideResult),this.wrapper.removeClass("e-active"))},_setListPosition:function(){var i,s,l=this.wrapper,n=this._getOffset(l),o=e(document).scrollTop()+e(window).height()-(n.top+e(l).outerHeight()),a=n.top-e(document).scrollTop(),r=this.popup.outerHeight(),d=this.popup.outerWidth(),h=n.left,c=l.outerHeight(),u=(c-l.height())/2,m=this._getZindexPartial();this.model.popupPosition,s=this.model.popupPosition==t.PopupPosition.Bottom?(r<o||r>a?n.top+c+3:n.top-r-3)-u:(r>a?n.top+c+3:n.top-r-3)-u,i=e(document).scrollLeft()+e(window).width()-h,(this.model.enableRTL||d>i&&d<h+l.outerWidth())&&(h-=this.popup.outerWidth()-l.outerWidth()),this.popup.css({left:h+"px",top:s+"px","z-index":m})},_getOffset:function(e){return t.util.getOffset(e)},_OnDocumentClick:function(t){this.model&&(e(t.target).is(this.popup)||e(t.target).parents(".e-datetime-popup").is(this.popup)||e(t.target).is(this.wrapper)||e(t.target).parents(".e-datetime-wrap").is(this.wrapper)?(e(t.target).is(this.popup)||e(t.target).parents(".e-datetime-popup").is(this.popup))&&(t.preventDefault(),e(t.target).parents(".e-datepicker").length>0?this._addFocus(e(t.target).parents(".e-datepicker")):e(t.target).parents(".e-timecontainer").length>0?this._addFocus(e(t.target).parents(".e-timecontainer")):e(t.target).hasClass("e-dt-button")?this._addFocus(e(t.target)):e(t.target).parents(".e-time-hours").length>0?this._addFocus(e(t.target).parents(".e-time-hours")):e(t.target).parents(".e-time-minitues").length>0?this._addFocus(e(t.target).parents(".e-time-minitues")):this._removeFocus()):this._hideResult())},_OnWindowResize:function(){this._setListPosition(),this._checkForResponsive(),this._updateTimeHeight()},_raiseChangeEvent:function(i){var s;+t.parseDate(this._prevDateTimeVal,this.model.dateTimeFormat)==+t.parseDate(this.element.val(),this.model.dateTimeFormat)?this._prevDateTimeVal!=this.element.val()&&(s={prevDateTime:this._prevDateTimeVal,value:this.element.val(),isValidState:this.isValidState},this._prevDateTimeVal=this.element.val(),this._trigger("_change",s)):(s={prevDateTime:this._prevDateTimeVal,value:this.element.val(),isInteraction:!i,isValidState:this.isValidState},this._trigger("_change",s),s.value=""==e.trim(this.element.val())?null:this.element.val(),this._trigger("change",s),this._prevDateTimeVal=this.element.val())},_raiseEvent:function(e){return!(null==this.element||!this.model[e])&&this._trigger(e,{prevDateTime:this._preVal,value:this.element.val()})},_getDateTimeFormat:function(){var e=t.preferredCulture(this.model.locale).calendar.patterns;this.model.dateTimeFormat||(this.model.dateTimeFormat=e.d+" "+e.t),this.model.timeDisplayFormat||(this.model.timeDisplayFormat=e.t)},_getZindexPartial:function(){return t.util.getZindexPartial(this.element,this.popup)},_checkErrorClass:function(){this.isValidState?this.wrapper.removeClass("e-error"):this.wrapper.addClass("e-error")},_getDate:function(){return this.datePicker.model.value},_getTime:function(){return this._getDateObj(this.timePicker.model.value,this.timePicker.model.timeFormat)},_setEmptyTime:function(e){var t=new Date(e);return t.setMilliseconds(0),t.setSeconds(0),t.setMinutes(0),t.setHours(0),t},_setEmptyDate:function(e){var t=new Date(e);return t.setDate(1),t.setMonth(0),t.setFullYear(2e3),t},_objectToString:function(e){return this._getFormat(e,this.model.dateTimeFormat)},_stringToObject:function(e){return this._getDateObj(e,this.model.dateTimeFormat)},_getFormat:function(e,i){if(e instanceof Date){var s=this._checkFormat(i);return t.format(e,s,this.model.locale)}return e},_checkFormat:function(e){var i=this,s=this._regExp();return e.replace(s,function(e){return"/"===e&&"/"!==t.preferredCulture(i.model.locale).calendars.standard["/"]?"'/'":e})},_regExp:function(){return/\/dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|HH|H|hh|h|mm|m|fff|ff|f|tt|ss|s|zzz|zz|z|gg|g|"[^"]*"|'[^']*'|[/]/g},_getDateObj:function(e,i){var s,l;if("string"!=typeof e)return e;if(s=this._checkFormat(i),null!=(l=t.parseDate(e,s,this.model.locale)))return l;if(""==e||null==e)return null;var n,o=/^\s*(\d{4})-(\d\d)-(\d\d)T(\d\d):(\d\d):(\d\d).*Z\s*$/.exec(e),a=new Date;return o&&(a=new Date,n=+o[2],a.setUTCFullYear(o[1],n-1,o[3]),a.setUTCHours(o[4],o[5],o[6]),n!=a.getUTCMonth()+1&&a.setTime()),this._isValidDate(a)?a:void 0},_compare:function(e,t){return e&&t&&e.getTime()==t.getTime()},_isValidDate:function(e){return e&&"function"==typeof e.getTime&&isFinite(e.getTime())},_change:function(e,t){this.datePicker.option(e,t),this.timePicker.option(e,t)},_changeSkin:function(e){this.wrapper.removeClass(this.model.cssClass).addClass(e),this.popup.removeClass(this.model.cssClass).addClass(e),this._change("cssClass",e)},_localize:function(s){var l,n;if(this.model.locale=s,this.model.dateTimeFormat=this.model.timeDisplayFormat="",l=["AM","PM"],this._getDateTimeFormat(),this._localizedLabels=this._getLocalizedLabels(),t.isNullOrUndefined(this._options)||(t.isNullOrUndefined(this._options.buttonText)||e.extend(this._localizedLabels.buttonText,this._options.buttonText),t.isNullOrUndefined(this._options.watermarkText)||(this._localizedLabels.watermarkText=this._options.watermarkText)),this._localizedLabelToModel(),this._buttonText(this._localizedLabels.buttonText),(this.isValidState||this.model.value instanceof Date&&this._isValidDate(this.model.value))&&this.element.val(this._objectToString(this.model.value)),this._preVal=this.element.val(),this._change("locale",s),this.model.startDay=this.datePicker.model.startDay,this._validateMeridian(),this._sfTimeHour.empty(),this._renderHourTable(),this.model.timeDrillDown.showMeridian)for(i=0;i<2;i++)n=t.isNullOrUndefined(t.preferredCulture(this.model.locale).calendars.standard[l[i]])?"":t.preferredCulture(this.model.locale).calendars.standard[l[i]][0],e("span.e-hours-meridiantxt-"+l[i].toLowerCase(),this._sfTimeHour).text(n)},_setWaterMark:function(){if(null!=this.element&&this.element.hasClass("e-input"))return this._localizedLabels.watermarkText&&""==this.element.val()&&(this.isValidState=!0,this._checkErrorClass()),this._isSupport||""!=this.element.val()?e(this.element).attr("placeholder",this._localizedLabels.watermarkText):this._hiddenInput.css("display","block").val(this._localizedLabels.watermarkText),!0},_localizedLabelToModel:function(){this.model.watermarkText=this._localizedLabels.watermarkText,this.model.buttonText=this._localizedLabels.buttonText},_readOnly:function(e){this.model.readOnly=e,e?this.element.attr("readonly","readonly"):this.element.prop("readonly",!1),this._change("readOnly",e)},_setRoundedCorner:function(e){e?(this.container.addClass("e-corner"),this.popup.addClass("e-corner")):(this.container.removeClass("e-corner"),this.popup.removeClass("e-corner")),this.datePicker.option("showRoundedCorner",e)},_setRtl:function(e){e?(this.wrapper.addClass("e-rtl"),this.popup.addClass("e-rtl")):(this.wrapper.removeClass("e-rtl"),this.popup.removeClass("e-rtl")),this._change("enableRTL",e)},_enabled:function(e){e?(this.model.enabled=!1,this.enable()):(this.model.enabled=!0,this.disable())},_showButton:function(e){this.model.showPopupButton=e,e?(this.container.addClass("e-padding"),this._renderIcon()):(this.container.removeClass("e-padding"),this.datetimeIcon.remove(),this.datetimeIcon=null)},_buttonText:function(t){e.extend(this.model.buttonText,t),this.popup.find(".e-dt-today").html(this.model.buttonText.today),this.popup.find(".e-dt-now").html(this.model.buttonText.timeNow),this.popup.find(".e-dt-done").html(this.model.buttonText.done),this.popup.find(".e-timecontainer").find(".e-header").html(this.model.buttonText.timeTitle)},_checkForResponsive:function(){if(e(window).outerWidth()>200&&e(window).outerWidth()<=500)this.popup.hasClass("e-dt-responsive")||(this.popup.addClass("e-dt-responsive"),this.timePicker.option("popupWidth",this.datePicker.popup.outerWidth()),this.timePicker.option("popupHeight",98),this.timePicker._refreshScroller(),this.timePicker._changeActiveEle());else if(this.popup.hasClass("e-dt-responsive")){this.popup.removeClass("e-dt-responsive"),this.timePicker.option("popupWidth",this.model.timePopupWidth);var t=this.datePicker.popup.height()-this.popup.find(".e-header").height();this.timePicker.option("popupHeight",t),this.timePicker._refreshScroller(),this.timePicker._changeActiveEle()}},enable:function(){this.model.enabled||(this.element[0].disabled=!1,this.model.enabled=!0,this.element.prop("disabled",!1),this.element.removeClass("e-disable").attr("aria-disabled",!1),this._isSupport||this._hiddenInput.prop("disabled",!1),this.datetimeIcon&&this.datetimeIcon.removeClass("e-disable").attr("aria-disabled",!1),this._isIE8&&this.datetimeIcon&&this.datetimeIcon.children().removeClass("e-disable"),this.popup.children("div").removeClass("e-disable").attr("aria-disabled",!1),this._change("enabled",!0))},disable:function(){this.model.enabled&&(this.element[0].disabled=!0,this.model.enabled=!1,this.element.addClass("e-disable").attr("aria-disabled",!0),this.element.attr("disabled","disabled"),this._isSupport||this._hiddenInput.attr("disabled","disabled"),this.datetimeIcon&&this.datetimeIcon.addClass("e-disable").attr("aria-disabled",!0),this._isIE8&&this.datetimeIcon&&this.datetimeIcon.children().addClass("e-disable"),this.popup.children("div").addClass("e-disable").attr("aria-disabled",!0),this._hideResult(),this._change("enabled",!1),this.datePicker.popup.removeClass("e-disable").attr("aria-disabled",!1),this.timePicker.popup.removeClass("e-disable").attr("aria-disabled",!1))},getValue:function(){return this._objectToString(this.model.value)},setCurrentDateTime:function(){this.model.readOnly||this._setValue(new Date)},show:function(){this._showResult()},hide:function(){this._hideResult()},_wireEvents:function(){this._on(this.element,"focus",this._targetFocus),this._on(this.element,"blur",this._targetBlur),this._on(this.element,"keydown",this._keyDownOnInput),this.popup.on("mouseenter touchstart",e.proxy(function(){this._popClose=!0},this)),this.popup.on("mouseleave touchend",e.proxy(function(){this._popClose=!1},this))},_getLocalizedLabels:function(){return t.getLocalizedConstants(this.sfType,this.model.locale)}}),t.DateTimePicker.Locale=t.DateTimePicker.Locale||{},t.DateTimePicker.Locale.default=t.DateTimePicker.Locale["en-US"]={watermarkText:"Select datetime",buttonText:{today:"Today",timeNow:"Time Now",done:"Done",timeTitle:"Time"}},t.PopupPosition={Bottom:"bottom",Top:"top"}}),
/*!
*  filename: ej.editor.min.js
*  version : 14.4.0.15
*  Copyright Syncfusion Inc. 2001 - 2016. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
function(e){"function"==typeof define&&define.amd?define(["./../common/ej.globalize.min","./../common/ej.core.min"],e):e()}(function(){!function(e,t,i){t.widget({ejNumericTextbox:["ej.NumericTextbox","e-numerictextbox"],ejPercentageTextbox:["ej.PercentageTextbox","e-percentagetextbox"],ejCurrencyTextbox:["ej.CurrencyTextbox","e-currencytextbox"]},{element:null,model:null,validTags:["input"],_addToPersist:["value"],_setFirst:!1,type:"editor",angular:{require:["?ngModel","^?form","^?ngModelOptions"],requireFormatters:!0,requireParser:!0},defaults:{width:"",height:"",value:null,name:null,htmlAttributes:{},minValue:-Number.MAX_VALUE,maxValue:Number.MAX_VALUE,incrementStep:1,decimalPlaces:0,validateOnType:!1,cssClass:"",enablePersistence:!1,showSpinButton:!0,locale:"en-US",enableStrictMode:!1,showRoundedCorner:!1,readOnly:!1,enabled:!0,enableRTL:!1,watermarkText:"",validationRules:null,validationMessage:null,groupSeparator:null,groupSize:null,positivePattern:null,negativePattern:null,change:null,focusIn:null,focusOut:null,create:null,destroy:null},dataTypes:{minValue:"number",maxValue:"number",incrementStep:"number",decimalPlaces:"number",showSpinButton:"boolean",enableStrictMode:"boolean",showRoundedCorner:"boolean",enableRTL:"boolean",locale:"string",watermarkText:"string",cssClass:"string",readOnly:"boolean",enabled:"boolean",validationRules:"data",validationMessage:"data",htmlAttributes:"data",validateOnType:"boolean",groupSeparator:"string"},observables:["value"],_setModel:function(e){var i=!1;for(var s in e)switch(s){case"value":t.isNullOrUndefined(e.minValue)&&t.isNullOrUndefined(e.maxValue)?(this._setValue(e[s],!0),e[s]=this.model.value):(this.model.value=this._checkNumValue(e[s]),this._localizedFormat(),this._raiseChangeEvent(!0),i=!0);break;case"enableRTL":this._enableRTL(e[s]);break;case"width":this._setWidth(e[s]);break;case"height":this._setHeight(e[s]);break;case"validationRules":null!=this.model.validationRules&&(this.element.rules("remove"),this.model.validationMessage=null),this.model.validationRules=e[s],null!=this.model.validationRules&&(this._initValidator(),this._setValidation());break;case"validationMessage":this.model.validationMessage=e[s],null!=this.model.validationRules&&null!=this.model.validationMessage&&(this._initValidator(),this._setValidation());break;case"minValue":if(isNaN(e[s]))return;this.model.minValue=parseFloat(e[s].toFixed(this.model.decimalPlaces)),i=!0;break;case"maxValue":if(isNaN(e[s]))return;this.model.maxValue=parseFloat(e[s].toFixed(this.model.decimalPlaces)),i=!0;break;case"incrementStep":if(isNaN(e[s]))return;this.model.incrementStep=parseFloat(e[s].toFixed(this.model.decimalPlaces));break;case"enableStrictMode":this.model.enableStrictMode=e[s];break;case"showSpinButton":this._showSpin(e[s]);break;case"showRoundedCorner":this._roundedCorner(e[s]);break;case"locale":this.model.decimalPlaces=t.isNullOrUndefined(this._options.decimalPlaces)&&this.model.decimalPlaces===this.culture.numberFormat.decimals||-1===this._options.decimalPlaces?-1:this.model.decimalPlaces,this._setLocalize(e[s]),this._options.decimalPlaces=this.model.decimalPlaces,e[s]=this.model.locale;break;case"decimalPlaces":this._setDecimal(e[s]),t.isNullOrUndefined(this._options)&&(this._options={}),this._options.decimalPlaces=e[s];break;case"cssClass":this._setSkin(e[s]);break;case"readOnly":this._setReadOnly(e[s]);break;case"enabled":e[s]?this.enable():this.disable();break;case"watermarkText":t.isNullOrUndefined(this._options)||(this._options=[]),this._options.watermarkText=this.model.watermarkText=e[s],this._localizedLabels.watermarkText=this.model.watermarkText,this._changeWatermark(e[s]);break;case"htmlAttributes":this._addAttr(e[s]);break;case"groupSeparator":this._checkSeparator(e[s]),e[s]=this.model.groupSeparator;break;case"positivePattern":case"negativePattern":case"groupSize":this.model[s]=e[s],this._options[s]=e[s],this._initCustomValue(),e[s]=this.model[s],this._setValue(this.model.value,!0)}i&&(this._validateMinMaxValue(!0,!0),e.value=this.model.value,e.maxValue=this.model.maxValue,e.minValue=this.model.minValue,this.model.minValue!=-Number.MAX_VALUE&&(this._startValue=this.model.minValue),this.element.attr({"aria-valuemin":this.model.minValue,"aria-valuemax":this.model.maxValue,"aria-valuenow":this.model.value})),this._checkSeparator(this.model.groupSeparator),this.element.val(this._removeSeparator(this.model.value)),this._updateSeparator(),this._checkErrorClass()},_destroy:function(){this.wrapper&&(this.element.insertBefore(this.wrapper),this.wrapper.remove()),this._isWatermark&&this.element.removeAttr("placeholder"),this.element.val("").removeClass("e-input e-disable").empty(),this.element.removeAttr("disabled aria-disabled aria-valuemin aria-valuemax aria-valuenow aria-live"),this._cloneElement.attr("role")||this.element.removeAttr("role"),this.element.css("display","block")},_init:function(e){if(this._cloneElement=this.element.clone(),this._options=t.isNullOrUndefined(e)?{}:e,!this.element.is("input")||!this.element.is("input[type=text]")&&this.element.attr("type"))return this._destroy(),!1;this._isWatermark="placeholder"in document.createElement("input"),this.model.locale="en"==t.preferredCulture(this.model.locale).name?"en-US":t.preferredCulture(this.model.locale).name,this._localizedLabels=this._getLocalizedLabels(),this.culture=t.preferredCulture(this.model.locale),this._initCustomValue(),this._prevSeparator=null,this._checkSeparator(this.model.groupSeparator),this._checkAttribute(),this._renderControl(),this._setValues(),this._wireEvents(),this._initObjects(),this._addAttr(this.model.htmlAttributes),null!=this.model.validationRules&&(this._initValidator(),this._setValidation()),this._updateSeparator(),e&&e.value!=i&&this._trigger("_change",{value:this.model.value})},_checkAttribute:function(){for(var e,i,s=["min","max","step","readonly","disabled","placeholder"],l=["minValue","maxValue","incrementStep","readOnly","enabled","watermarkText"],n=0;n<s.length;n++)e=this.element.attr(s[n]),i=l[n],t.isNullOrUndefined(e)||t.isNullOrUndefined(this._options)||!t.isNullOrUndefined(this._options[i])||("watermarkText"==i?this._options[i]=e:this.model[i]="disabled"!=i&&"readOnly"!=i?t.parseFloat(e,this.model.locale):"readOnly"==i?this.element.is("[readonly]"):!this.element.is("[disabled]"))},_addAttr:function(i){var s=this;e.map(i,function(e,i){var l=i.toLowerCase();"class"==l?s.wrapper.addClass(e):"accesskey"==l?s._hiddenInput.attr(i,e):"disabled"==l&&"disabled"==e?s.disable():"readonly"==l&&"readOnly"==e?s._setReadOnly(!0):"tabindex"==l?(s._hiddenInput.attr(i,e),s.element.attr(i,e)):"style"==l||"id"==l?s.wrapper.attr(i,e):t.isValidAttr(s.element[0],i)?s.element.attr(i,e):s.wrapper.attr(i,e)})},_setValues:function(){this._id=this.element[0].id,this._textBox=this._hiddenInput[0],this._error=!1,this._timeout=null,this.isValidState=!0,this._allowkeyboard=!0,this._validateOnType=!1,this._focused=!1,this._startValue=0,"ej.CurrencyTextbox"===this.sfType&&this.model.minValue==-Number.MAX_VALUE&&(this.model.minValue=0),(t.isNullOrUndefined(this.model.decimalPlaces)||this.model.decimalPlaces<0)&&(this.model.decimalPlaces="ej.CurrencyTextbox"===this.sfType?t.preferredCulture(this.model.locale).numberFormat.currency.decimals:t.preferredCulture(this.model.locale).numberFormat.decimals),this.model.minValue=parseFloat(this.model.minValue.toFixed(this.model.decimalPlaces)),this.model.maxValue=parseFloat(this.model.maxValue.toFixed(this.model.decimalPlaces)),this.model.minValue!=-Number.MAX_VALUE&&(this._startValue=this.model.minValue),t.isNullOrUndefined(this._options)||t.isNullOrUndefined(this._options.watermarkText)||(this._localizedLabels.watermarkText=this._options.watermarkText),this._localizedLabelToModel(),this._localizedFormat(),this._validateMinMaxValue(!0),this._updateSymbol(this.model.locale),value=t.isNullOrUndefined(this.model.value)?this.model.value:-1==this.model.value.toString().indexOf("e")?this._removeSeparator(this.model.value):this._convertToExponetial(this.model.value).unformattedValue,this.element.val(value)},_initValidator:function(){this.element.closest("form").data("validator")||this.element.closest("form").validate()},_setValidation:function(){var i,s,l,n,o=this.model.validationRules;for(s in this.element.rules("add",o),i=(i=this.element.closest("form").data("validator"))||this.element.closest("form").validate(),name=this.element.attr("name"),i.settings.messages[name]={},o)if(l=null,!t.isNullOrUndefined(o[s])){if(t.isNullOrUndefined(o.messages&&o.messages[s]))for(n in i.settings.messages[name][s]=e.validator.messages[s],this.model.validationMessage)s==n&&(l=this.model.validationMessage[s]);else l=o.messages[s];i.settings.messages[name][s]=null!=l?l:e.validator.messages[s]}},_renderControl:function(){this.wrapper=t.buildTag("span.e-widget e-pinch"),this.innerWrap=t.buildTag("span.e-in-wrap e-box "),this.wrapper.attr("style",this.element.attr("style")),"ej.NumericTextbox"===this.sfType?this.wrapper.addClass("e-numeric"):"ej.PercentageTextbox"===this.sfType?this.wrapper.addClass("e-percent"):"ej.CurrencyTextbox"===this.sfType&&this.wrapper.addClass("e-currency"),this.wrapper.append(this.innerWrap).insertAfter(this.element),this.innerWrap.append(this.element),this._hiddenInput=t.buildTag("input","",{},{type:"text"}).insertBefore(this.element),this._hiddenInput.attr("data-role","none"),this._hiddenInput[0].tabIndex=this.element[0].tabIndex,this._hiddenInput.attr("accesskey",this.element[0].accessKey),this.element[0].accessKey="",this._hiddenInput.css("display","block"),this.element.css("display","none"),this._isWatermark||(this._hiddenSpan=t.buildTag("span.e-input e-placeholder ").insertAfter(this.element),this._hiddenSpan.text(this._localizedLabels.watermarkText),this._hiddenSpan.css("display","none"),this._on(this._hiddenSpan,"mousedown",this._focusIn),this._on(this._hiddenSpan,"mousewheel",this._mouseWheel),this._on(this._hiddenSpan,"DOMMouseScroll",this._mouseWheel)),this.model.name=null!=this.element.attr("name")?this.element.attr("name"):null!=this.model.name?this.model.name:this.element[0].id,null==this.element.attr("name")&&this.element.attr("name",this.model.name),this.element.addClass("e-input"),this.model.value=t.isNullOrUndefined(this.model.value)&&""!=this.element[0].value?this._checkNumValue(this.element[0].value):this._checkNumValue(this.model.value),this._hiddenInput.attr({value:this.model.value}).addClass("e-input"),this.element.attr({role:"spinbutton","aria-valuemin":this.model.minValue,"aria-valuemax":this.model.maxValue,"aria-valuenow":this.model.value,"aria-live":"assertive",value:this.model.value});var i=e('<span class="e-select"><span class="e-spin e-spin-up " role="button" "aria-label"="Increase Value" unselectable="on" /><span class="e-spin e-spin-down" role="button" "aria-label"="Decrease Value" unselectable="on" /></span>');i.find(".e-spin-up").append(t.buildTag("span.e-icon e-arrow e-arrow-sans-up").attr({role:"presentation",unselectable:"on"})),i.find(".e-spin-down").append(t.buildTag("span.e-icon e-arrow e-arrow-sans-down").attr({role:"presentation",unselectable:"on"})),this.innerWrap.append(i),this.spin=this.wrapper.find(".e-select"),this.spinUp=this.wrapper.find(".e-spin-up"),this.spinDown=this.wrapper.find(".e-spin-down"),this._setWidth(this.model.width),this._setHeight(this.model.height),""!=this.model.cssClass&&this._setSkin(this.model.cssClass),this._showSpin(this.model.showSpinButton),this.model.showRoundedCorner&&this._roundedCorner(this.model.showRoundedCorner),this.model.enableRTL&&this._enableRTL(this.model.enableRTL),this.model.readOnly&&this._setReadOnly(this.model.readOnly),this.model.enabled?this.model.enabled&&this.element.hasClass("e-disable")&&this.enable():this.disable()},_initObjects:function(){this._preVal=this.model.value,null===this.model.value?(this.isValidState=!0,this._hiddenInput.val(null)):(this.model.value<this.model.minValue||this.model.value>this.model.maxValue)&&(this.isValidState=!1),this._checkErrorClass(),this._setWaterMark()},_showSpin:function(e){e?(this.spin&&(this.spin.show(),this.innerWrap.addClass("e-padding")),this._spinEvents("_on")):(this.spin&&(this.spin.hide(),this.innerWrap.removeClass("e-padding")),this._spinEvents("_off"))},_roundedCorner:function(e){e&&!this.innerWrap.hasClass("e-corner")?this.innerWrap.addClass("e-corner"):this.innerWrap.hasClass("e-corner")&&this.innerWrap.removeClass("e-corner")},_enableRTL:function(e){e?this.spin?this.wrapper.addClass("e-rtl"):this.element.addClass("e-rtl"):this.spin?this.wrapper.removeClass("e-rtl"):this.element.removeClass("e-rtl")},_setWidth:function(e){""!=e?this.wrapper.width(e):this.model.width=this.wrapper.outerWidth()},_setHeight:function(e){""!=e?this.wrapper.height(e):this.model.height=this.wrapper.outerHeight()},_setSkin:function(e){this.wrapper.removeClass(this.model.cssClass),this.wrapper.addClass(e)},_setValue:function(e,t){this._isWatermark||this._hiddenSpan.css("display","none"),this.model.value=this._checkNumValue(e),this._validateMinMaxValue(!1),this._checkErrorClass(),this._localizedFormat(),this._raiseChangeEvent(t),this._setWaterMark()},_setLocalize:function(e){var i=t.preferredCulture(this.model.locale).numberFormat[","];this.model.locale="en"==t.preferredCulture(e).name?"en-US":t.preferredCulture(e).name,this.model.groupSeparator=t.isNullOrUndefined(this._options.groupSeparator)&&i===this.model.groupSeparator?t.preferredCulture(this.model.locale).numberFormat[","]:this.model.groupSeparator,this._localizedLabels=this._getLocalizedLabels(),t.isNullOrUndefined(this._options)||t.isNullOrUndefined(this._options.watermarkText)||(this._localizedLabels.watermarkText=this._options.watermarkText),this._localizedLabelToModel(),this.culture=t.preferredCulture(this.model.locale),this._initCustomValue(),this._updateSymbol(this.model.locale),this._localizedFormat(),this._changeWatermark(this.model.watermarkText),value=t.isNullOrUndefined(this.model.value)?this.model.value:-1==this.model.value.toString().indexOf("e")?this._formatValue(this.model.value,"n",!0):this._convertToExponetial(this.model.value).unformattedValue,this.element.val(value)},_localizedLabelToModel:function(){this.model.watermarkText=this._localizedLabels.watermarkText},_updateSymbol:function(e){this._percentSymbol=t.preferredCulture(e).numberFormat.percent.symbol,this._currencySymbol=t.preferredCulture(e).numberFormat.currency.symbol},_setDecimal:function(e){this.model.decimalPlaces=e,this._localizedFormat()},_validateMinMaxValue:function(e,i){var s,l=!1;this.model.minValue>this.model.maxValue&&(this.model.minValue=this.model.maxValue),!t.isNullOrUndefined(this.model.value)&&this.model.minValue>this.model.value?(1!=this.model.enableStrictMode?(this.isValidState=!0,this._startValue=this.model.value=this.model.minValue):this.isValidState=!1,l=!0):!t.isNullOrUndefined(this.model.value)&&this.model.maxValue<this.model.value?(1!=this.model.enableStrictMode?(this.isValidState=!0,this.model.value=this.model.maxValue):this.isValidState=!1,l=!0):this.isValidState=!0,this.model.minValue==this.model.maxValue&&(this._startValue=this.model.minValue),l&&e&&(s=this._formatValue(this.model.value,"n",!0),this._hiddenInput.val(s),s=t.isNullOrUndefined(this.model.value)?this.model.value:-1==this.model.value.toString().indexOf("e")?this._formatValue(this.model.value,"n",!0):this._convertToExponetial(this.model.value).unformattedValue,this.element.val(s),this._localizedFormat(),this._raiseChangeEvent(i))},_convertToExponetial:function(e){var i,s,l,n="",o=e<0;for(e=e.toString(),s=t.preferredCulture(this.model.locale).numberFormat,e=e.replace(".",s["."]),unformattedValue=e,null,"ej.NumericTextbox"===this.sfType?(i=o?s.pattern[0]:"n",e=o?e.replace("-",""):e,symbol=""):"ej.PercentageTextbox"===this.sfType?(i=o?s.percent.pattern[0]:s.percent.pattern[1],e=o?e.replace("-",""):e,symbol=s.percent.symbol):"ej.CurrencyTextbox"===this.sfType&&(i=o?s.currency.pattern[0]:s.currency.pattern[1],e=o?e.replace("-",""):e,symbol=s.currency.symbol),idx=0,l=i.length;idx<l;idx++)ch=i.charAt(idx),n+="n"===ch?e:"$"===ch||"%"===ch?symbol:ch;return{formattedValue:n,unformattedValue:unformattedValue}},_localizedFormat:function(){if(this.culture=t.preferredCulture(this.model.locale),t.isNullOrUndefined(this.model.value))this._textBox.value="";else if(-1==this.model.value.toString().indexOf("e"))this._textBox.value=this._removeSeparator(this.model.value),this._focused||""==this._textBox.value||(this._textBox.value=this._formatValue(this.model.value,"n",!0),"ej.PercentageTextbox"===this.sfType?this._appendPercentSymbol(this._textBox.value):"ej.CurrencyTextbox"===this.sfType&&this._appendCurrencySymbol(this._textBox.value));else{var e=this._convertToExponetial(this.model.value);this._textBox.value=e.unformattedValue,this._focused||""==this._textBox.value||(this._textBox.value=e.formattedValue)}},_checkNumValue:function(e){return"string"==typeof e&&(e=this._changeSeparator?this._replaceSeparator(e,this.model.groupSeparator,t.preferredCulture(this.model.locale).numberFormat[","]):e),"string"!=typeof e||isNaN(this._parseValue(e))?"number"!=typeof e||isNaN(e)?null:e:(e=this._parseValue(e),parseFloat(e))},_setReadOnly:function(e){this.model.readOnly=e,e?(this.element.attr("readonly",!0),this._hiddenInput.attr("readonly",!0)):(this.element.prop("readonly",!1),this._hiddenInput.prop("readonly",!1))},_setWaterMark:function(){null!=this._localizedLabels.watermarkText&&""===this._textBox.value&&""===e.trim(this._hiddenInput.val())&&(this._isWatermark?(this._hiddenInput.attr("placeholder",this._localizedLabels.watermarkText),this.element.attr("placeholder",this._localizedLabels.watermarkText)):this._hiddenSpan.css("display","block").text(this._localizedLabels.watermarkText))},_changeWatermark:function(e){if(!this.model.enabled)return!1;this._isWatermark?(this._hiddenInput.attr("placeholder",e),this.element.attr("placeholder",e)):this._hiddenSpan.text(e)},_setSelectionRange:function(e,t){function i(i){i.collapse(!0),i.moveEnd("character",t),i.moveStart("character",e),i.select()}var s,l=this._textBox;try{l.setSelectionRange?l.setSelectionRange(e,t):l.createTextRange&&i(l.createTextRange())}catch(e){s=this,window.setTimeout(function(){document.body.focus(),s._textBox.select(),i(document.selection.createRange())},1)}},_getSelection:function(e){var t=null;return document.selection?""===(t=document.selection.createRange()).text?t.text:this._removeFormats(t.text):null==e?this.model.value:this._removeFormats(e.substring(this._textBox.selectionStart,this._textBox.selectionEnd))},_caretPosition:function(){var e,t=this._textBox,i=0;return document.selection?(t.focus(),(e=document.selection.createRange()).moveStart("character",-t.value.length),i=e.text.length):(t.selectionStart||"0"==t.selectionStart)&&(i=t.selectionEnd),i},_appendPercentSymbol:function(e){this._percentSymbol&&(e=e.replace(this._percentSymbol,"")),e.indexOf(t.preferredCulture(this.model.locale).numberFormat.percent.symbol)<0&&(this._textBox.value=this._formatValue(this._parseValue(e)/100,"p",!0)),this._percentSymbol=t.preferredCulture(this.model.locale).numberFormat.percent.symbol},_appendCurrencySymbol:function(e){this._currencySymbol&&(e=e.replace(this._currencySymbol,"")),e.indexOf(t.preferredCulture(this.model.locale).numberFormat.currency.symbol)<0&&(this._textBox.value=this._formatValue(this._parseValue(e),"c",!0)),this._currencySymbol=t.preferredCulture(this.model.locale).numberFormat.currency.symbol},_removeFormats:function(e){var i=t.preferredCulture(this.model.locale).numberFormat[","];return null!=e?"."==i?e.toString().replace(/["."]/g,""):e.toString().match(new RegExp(i,"g"))?e.toString().replace(new RegExp(i,"g"),""):e:null},_checkErrorClass:function(){this.isValidState?this.wrapper.removeClass("e-error"):this.wrapper.addClass("e-error")},enable:function(){this.model.enabled=!0,this.element[0].disabled=!1,this.element.prop("disabled",!1),this._hiddenInput.prop("disabled",!1),this.element.removeClass("e-disable").attr({"aria-disabled":!1}),this._hiddenInput.removeClass("e-disable").attr({"aria-disabled":!1}),this.wrapper.find(".e-select").removeClass("e-disable").attr({"aria-disabled":!1}),this.wrapper.find(".e-select span.e-icon.e-arrow").removeClass("e-disable"),this.wrapper.removeClass("e-disable-wrap")},disable:function(){this.model.enabled=!1,this.element[0].disabled=!0,this.element.attr("disabled","disabled"),this._hiddenInput.attr("disabled","disabled"),this.element.addClass("e-disable").attr({"aria-disabled":!0}),this._hiddenInput.addClass("e-disable").attr({"aria-disabled":!0}),this.wrapper.find(".e-select").addClass("e-disable").attr({"aria-disabled":!0}),this.wrapper.find(".e-select span.e-icon.e-arrow").addClass("e-disable"),this.wrapper.addClass("e-disable-wrap")},getValue:function(){return this.model.value},_wireEvents:function(){this._on(this._hiddenInput,"focus",this._focusIn),this._on(this.element,"blur",this._focusOut),this._on(this.element,"keydown",this._keyDown),this._on(this.element,"keypress",this._keyPress),this._on(this.element,"mousewheel",this._mouseWheel),this._on(this.element,"DOMMouseScroll",this._mouseWheel)},_spinEvents:function(e){this[e](this.spinUp,"mousedown mouseup touchstart touchend",this._spinUpClick),this[e](this.spinDown,"mousedown mouseup touchstart touchend",this._spinDownClick)},_isIE8:function(){var e=!1,i=t.browserInfo();return"msie"==i.name&&"8.0"==i.version&&(e=!0),e},_spinUpClick:function(t){var i,s=!1;t.button?s=this._isIE8()?1!=t.button:0!=t.button:t.which&&(s=3==t.which),s||(i=this,t.preventDefault(),clearTimeout(this._timeout),this.model.enabled&&!this.model.readOnly&&(this._on(this.spinUp,"mouseleave",this._mouseUpClick),this.spinUp.addClass("e-active"),i=this,"mouseup"==t.type||"touchend"==t.type?(this._updateInputField("increment"),this.spinUp.removeClass("e-active"),this._off(e(document),"mouseup",this._mouseUpClick)):("mousedown"==t.type||"touchstart"==t.type)&&(this._focused||this._hiddenInput[0].focus(),this._timeout=setInterval(function(){i._updateInputField("increment")},150),this._on(e(document),"mouseup",this._mouseUpClick))))},_spinDownClick:function(t){var i,s=!1;t.button?s=this._isIE8()?1!=t.button:0!=t.button:t.which&&(s=3==t.which),s||(i=this,t.preventDefault(),clearTimeout(this._timeout),this.model.enabled&&!this.model.readOnly&&(this._on(this.spinDown,"mouseleave",this._mouseUpClick),this.spinDown.addClass("e-active"),"mouseup"==t.type||"touchend"==t.type?(this._updateInputField("decrement"),this.spinDown.removeClass("e-active"),this._off(e(document),"mouseup",this._mouseUpClick)):("mousedown"==t.type||"touchstart"==t.type)&&(this._focused||this._hiddenInput[0].focus(),this._timeout=setInterval(function(){i._updateInputField("decrement")},150),this._on(e(document),"mouseup",this._mouseUpClick))))},_mouseUpClick:function(e){e.stopPropagation(),clearTimeout(this._timeout),this._off(this.spinUp,"mouseleave",this._mouseUpClick),this._off(this.spinDown,"mouseleave",this._mouseUpClick),this.spinDown.removeClass("e-active"),this.spinUp.removeClass("e-active")},_mouseWheel:function(e){if(e.preventDefault(),this._focused||this.element[0].focus(),this.model.enabled&&!this.model.readOnly){var t,i=e.originalEvent;i.wheelDelta?t=i.wheelDelta/120:i.detail&&(t=-i.detail/3),t>0?this._updateInputField("increment"):t<0&&this._updateInputField("decrement"),this._cancelEvent(e)}},_numberValue:function(){var e=this._textBox.value;return"ej.NumericTextbox"===this.sfType&&(e=this._formatValue(this.model.value,"n",!0)),("ej.PercentageTextbox"===this.sfType||"ej.CurrencyTextbox"===this.sfType)&&(e=this._formatValue(this.model.value,"n",!0)),"string"!=typeof e||isNaN(this._parseValue(e))?"":e},_formatValue:function(e,i,s){s&&this._updateCultureInfo();e=t.format(e,i+this.model.decimalPlaces,this.model.locale);return s&&this._restCultureInfo(),e},_parseValue:function(e){this._updateCultureInfo();e=t.parseFloat(e,this.model.locale);return this._restCultureInfo(),e},_initCustomValue:function(){var e,i="ej.PercentageTextbox"==this.sfType?"percent":"ej.CurrencyTextbox"==this.sfType?"currency":"numeric";switch(i){case"percent":case"currency":e=this.culture.numberFormat[i],t.isNullOrUndefined(this._options.negativePattern)&&(this.model.negativePattern=e.pattern[0]),t.isNullOrUndefined(this._options.positivePattern)&&(this.model.positivePattern=e.pattern[1]),t.isNullOrUndefined(this._options.groupSize)&&(this.model.groupSize=e.groupSizes[0]);break;case"numeric":e=this.culture.numberFormat,t.isNullOrUndefined(this._options.negativePattern)&&(this.model.negativePattern=e.pattern[0]),t.isNullOrUndefined(this._options.groupSize)&&(this.model.groupSize=e.groupSizes[0])}},_updateCultureInfo:function(){var e,t="ej.PercentageTextbox"==this.sfType?"percent":"ej.CurrencyTextbox"==this.sfType?"currency":"numeric";e="numeric"==t?this.culture.numberFormat:this.culture.numberFormat[t],this._oldNegativePattern=e.pattern[0],this._oldGroupSize=e.groupSizes[0],e.pattern[0]=this.model.negativePattern,e.groupSizes[0]=this.model.groupSize,"numeric"!=t&&(this._oldPositivePattern=e.pattern[1],e.pattern[1]=this.model.positivePattern)},_restCultureInfo:function(){var e,t="ej.PercentageTextbox"==this.sfType?"percent":"ej.CurrencyTextbox"==this.sfType?"currency":"numeric";(e="numeric"==t?this.culture.numberFormat:this.culture.numberFormat[t]).pattern[0]=this._oldNegativePattern,e.groupSizes[0]=this._oldGroupSize,"numeric"!=t&&(e.pattern[1]=this._oldPositivePattern)},_toggleTextbox:function(e){this._hiddenInput.toggle(e),this.element.toggle(!e)},_focusIn:function(){if(!this.model.readOnly){if(this._focused=!0,t.isNullOrUndefined(this.model.value)||this.element.val(this._removeSeparator(this.model.value)),this._toggleTextbox(!1),this._textBox=this.element[0],this.element[0].focus(),this._preVal=this.model.value,this._isWatermark||this._hiddenSpan.css("display","none"),this.wrapper.addClass("e-focus"),this.wrapper.removeClass("e-error"),!this._error){if(""!=this._textBox.value){var e=this._formatValue(this._textBox.value,"n",!0);this._textBox.value=e,this._hiddenInput.val(e)}this._setSelectionRange(0,this._textBox.value.length)}this._trigger("focusIn",{value:this.model.value})}},_focusOut:function(){var e;this._focused=!1,this.wrapper.removeClass("e-focus"),this._error||(""!=this._textBox.value?((e=t.parseFloat(this._textBox.value,this.model.locale))<this.model.minValue?this.model.enableStrictMode?this.isValidState=!1:this._textBox.value=this._formatValue(this.model.minValue,"n",!0):e>this.model.maxValue&&(this.model.enableStrictMode?this.isValidState=!1:this._textBox.value=this._formatValue(this.model.maxValue,"n",!0)),this.model.value=t.parseFloat(this._textBox.value,this.model.locale),isNaN(this.model.value)&&!this.model.value&&(this.model.value=null,this.isValidState=!1),this._toggleTextbox(!0),this._textBox=this._hiddenInput[0],this._localizedFormat(),this._checkErrorClass()):(e=""==this._textBox.value?null:this._textBox.value,this.model.value=e,this._hiddenInput.val(e),this._toggleTextbox(!0),this._textBox=this._hiddenInput[0]),null===this.model.value||this.model.value>=this.model.minValue&&this.model.value<=this.model.maxValue?this.isValidState=!0:this.model.enableStrictMode&&(this.isValidState=!1),this._raiseChangeEvent(),this._setWaterMark(),e=t.isNullOrUndefined(this.model.value)?this.model.value:-1==this.model.value.toString().indexOf("e")?this._removeSeparator(this.model.value):this._convertToExponetial(this.model.value).unformattedValue,this.element.val(e),this._updateSeparator(),this._trigger("focusOut",{value:this.model.value})),this._checkErrorClass()},_cancelEvent:function(e){return e.cancelBubble=!0,e.returnValue=!1,e.stopPropagation(),e.preventDefault(),!1},_updateInputField:function(i){var s,l,n;this.isValidState=!0,this._focused||e(this._hiddenInput[0]).focus(),s=this.model.incrementStep,this.model.value,""===this._textBox.value?(this._textBox.value=this._formatValue(this._startValue,"n",!0),s=0):this._textBox.value.indexOf(" ")>=0&&(this._textBox.value=this._textBox.value.replace(" ","")),"ej.PercentageTextbox"===this.sfType||"ej.CurrencyTextbox"===this.sfType?(n=l=this._textBox.value,l.indexOf(t.preferredCulture(this.model.locale).numberFormat.percent.symbol)>-1&&(n=l.substring(0,l.length-1)),this.model.value=this._parseValue(n)):"ej.NumericTextbox"==this.sfType&&(this.model.value=t.parseFloat(this._textBox.value,this.model.locale)),isNaN(this.model.value)&&!this.model.value&&(this.model.value=this._startValue),this.model.value>=this.model.minValue&&this.model.value>this.model.maxValue?(this.model.value=this.model.maxValue,this._setValue(this.model.value)):this.model.value<this.model.minValue&&this.model.value<=this.model.maxValue?(this.model.value=this.model.minValue,this._setValue(this.model.value)):this.model.value>=this.model.minValue&&this.model.value<=this.model.maxValue&&((n="increment"==i?this.model.value+s:this.model.value-s)>=this.model.minValue&&n<=this.model.maxValue&&this._setValue(n)),this._checkErrorClass()},_validateDecimal:function(e){var i=String.fromCharCode(e.keyCode);return i=188==e.keyCode?",":190==e.keyCode?".":110==e.keyCode?t.preferredCulture(this.model.locale).numberFormat["."]:i,t.preferredCulture(this.model.locale).numberFormat["."].charCodeAt(0)==i.charCodeAt(0)},_allowKeyCodes:function(e){for(var t=[38,40,35,36,109,189,46,8,127,37,39,190,9,13,16,17,18,20,110,173,86,88,67],i=0;i<t.length;i++)if(e.keyCode==t[i]||this._validateDecimal(e)&&0!=this.model.decimalPlaces)return!0;return!1},_raiseChangeEvent:function(e){var i,s=this.model.value;this._checkNumValue(this._preVal)!==this._checkNumValue(s)&&(this._preVal=s,this.model.value=this._checkNumValue(this._formatValue(this._preVal,"n",!1)),this._updateHiddenField(),i=t.isNullOrUndefined(this.model.value)?this.model.value:-1==this.model.value.toString().indexOf("e")?this._removeSeparator(this.model.value):this._convertToExponetial(this.model.value).unformattedValue,this.element.val(i),this.element.attr("aria-valuenow",i),this._updateSeparator(),this.element.trigger("change"),this._trigger("_change",{value:this.model.value,isInteraction:!e}),this._trigger("change",{value:this.model.value,isInteraction:!e}))},_updateHiddenField:function(){var e=this._textBox;this._textBox=this._hiddenInput[0],this._localizedFormat(),this._textBox=e},_removeSeparator:function(e){var i,s;if(!t.isNullOrUndefined(e))return i=(e=this._checkNumValue(this._formatValue(e,"n",!1))).toString(),s=t.preferredCulture(this.model.locale).numberFormat,i.replace(".",s["."])},_updateSeparator:function(){var e;this._changeSeparator&&this.model.value&&("ej.NumericTextbox"===this.sfType?e=this._formatValue(this.model.value,"n",!0):"ej.PercentageTextbox"===this.sfType?e=this._formatValue(this.model.value/100,"p",!0):"ej.CurrencyTextbox"===this.sfType&&(e=this._formatValue(this.model.value,"c",!0)),this._hiddenInput.val(this._replaceSeparator(e,t.preferredCulture(this.model.locale).numberFormat[","],this.model.groupSeparator)))},_replaceSeparator:function(e,i,s){var l,n,o=""===i?new RegExp("\\s","g"):new RegExp("\\"+i,"g");return this.model.groupSeparator==t.preferredCulture(this.model.locale).numberFormat["."]?(l=this.model.decimalPlaces,n=e.length-l-1,e.substring(0,n).replace(o,s)+e.substring(n,e.length)):e.replace(o,s)},_checkSeparator:function(e){this.model.groupSeparator=null!=e?this._validateSeparator(e):t.preferredCulture(this.model.locale).numberFormat[","],this._changeSeparator=t.preferredCulture(this.model.locale).numberFormat[","]!=this.model.groupSeparator,this._prevSeparator=this.model.groupSeparator},_validateSeparator:function(e){var i=e.toString(),s=new RegExp("[a-zA-Z0-9]");return i=i.length>1?i[0]:i,s.test(i)?null!=this._prevSeparator?this._prevSeparator:t.preferredCulture(this.model.locale).numberFormat[","]:i},_keyPress:function(e){var i,s;if(0!==e.which&&!e.metaKey&&!e.ctrlKey&&8!==e.keyCode&&13!==e.keyCode){return cursor=this._caretPosition(),beforeCursor=this._textBox.value.toString().substring(0,cursor),afterCursor=this._textBox.value.toString().substring(cursor),numberFormat=t.preferredCulture(this.model.locale).numberFormat,i=String.fromCharCode(e.which),value=beforeCursor+i+afterCursor,s="."===(s=numberFormat["."])?"\\"+s:s,!!(0===this.model.decimalPlaces?/^(-)?(\d*)$/:new RegExp("^(-)?(((\\d+("+s+"\\d*)?)|("+s+"\\d*)))?$")).test(value)&&void 0}},_validateDecimalOnType:function(e){var i,s,l,n,o,a;return i=this._caretPosition(),this._textBox.value.toString().substring(0,i),this._textBox.value.toString().substring(i),l=this._getSelection(this._textBox.value),o=t.preferredCulture(this.model.locale).numberFormat["."],n=t.isNullOrUndefined(this.model.value)?"":this.model.value.toString(),0!=this.model.decimalPlaces?(a=this._textBox.value.split(o)[1],s=n.indexOf(o)>0&&n.substring(n.indexOf(o)+1,n.length).length>this.model.decimalPlaces||!!(0==l.length&&i>this._textBox.value.indexOf(o)&&a&&a.length>=this.model.decimalPlaces)):s=!1,s?(this._keypressFlag=!1,this._cancelEvent(e),!1):void 0},_keyDown:function(s){var l,n,o,a,r,d,h,c;if(!this.model.readOnly)if(this._CurrentCultureInfo=JSON.parse(JSON.stringify(t.preferredCulture())),s.keyCode>=48&&s.keyCode<=57||s.keyCode>=96&&s.keyCode<=105||this._allowKeyCodes(s)){if(s.shiftKey&&(35==s.keyCode||36==s.keyCode||37==s.keyCode||39==s.keyCode||46==s.keyCode||127==s.keyCode)||s.ctrlKey&&(86==s.keyCode||118==s.keyCode||67==s.keyCode||88==s.keyCode))return!0;if(1==s.ctrlKey&&9!=s.keyCode&&17!=s.keyCode&&86!=s.keyCode&&67!=s.keyCode||67==s.keyCode||86==s.keyCode||88==s.keyCode)return this._keypressFlag=!1,this._cancelEvent(s),!1;if((s.keyCode>=48&&s.keyCode<=57||s.keyCode>=96&&s.keyCode<=105||110==s.keyCode)&&(l=this._caretPosition(),this._textBox.value.toString().substring(0,l),this._textBox.value.toString().substring(l),o=this._getSelection(this._textBox.value),s.keyCode>=96&&s.keyCode<=105&&(s.keyCode-=48),this.model.validateOnType&&this._validateDecimalOnType(s),this._validateOnType)){var u=t.preferredCulture(this.model.locale).numberFormat["."],m=this.model.value.toString(),p=m.indexOf(u),g=this.model.value,f=this.model.minValue.toFixed(this.model.decimalPlaces),_=this.model.maxValue.toFixed(this.model.decimalPlaces),v=!1;if((f.toString().indexOf("e")>0||_.toString().indexOf("e")>0)&&(v=!0),v)0!=this.model.decimalPlaces?(a=this._textBox.value.split(".")[1],n=(m.indexOf(u)>0||Number(m)<Number(f)||Number(m)>Number(_))&&m.substring(m.indexOf(u)+1,m.length).length>this.model.decimalPlaces||!!(0==o.length&&l>this._textBox.value.indexOf(u)&&a&&a.length>=this.model.decimalPlaces)):n=!1;else if("."!=u&&(m=this._textBox.value.toString(),this.model.minValue.toString().match(new RegExp(".","g"))&&(f=this.model.minValue.toString().replace(/["."]/g,u)),this.model.maxValue.toString().match(new RegExp(".","g"))&&(_=this.model.maxValue.toString().replace(/["."]/g,u))),d=f.toString().indexOf(u)>0?Number(f.toString().substring(0,f.toString().indexOf(u))):this.model.minValue,h=_.toString().indexOf(u)>0?Number(_.toString().toString().substring(0,_.toString().indexOf(u))):this.model.maxValue,p>0){g=Number(m.substring(m.indexOf(u)+1,m.toString().length)),d=f.toString().indexOf(u)>0?Number(f.toString().substring(f.toString().indexOf(u)+1,f.toString().length)):0,h=_.toString().indexOf(u)>0?Number(_.toString().substring(_.toString().indexOf(u)+1,_.toString().length)):0;var b=Number(m.substring(0,m.indexOf(u))),C=Number(f.toString().substring(0,f.toString().indexOf(u))),w=Number(_.toString().substring(0,_.toString().indexOf(u)));n=!this._validateValue(g,d,h,!0,b,C,w)}else n=!this._validateValue(g,d,h,!1);if(n)return this._keypressFlag=!1,this._cancelEvent(s),!1}if(38==s.keyCode&&this._allowkeyboard&&(this._updateInputField("increment"),this._cancelEvent(s)),40==s.keyCode&&this._allowkeyboard&&(this._updateInputField("decrement"),this._cancelEvent(s)),8==s.keyCode&&(l=this._caretPosition(),this._textBox.value.substring(0,l),this._textBox.value.substring(l),o=this._getSelection(this._textBox.value)),(46==s.keyCode||127==s.keyCode)&&(l=this._caretPosition(),this._textBox.value.substring(0,l),this._textBox.value.substring(l),o=this._getSelection(this._textBox.value)),this._validateDecimal(s)&&0!=this.model.decimalPlaces&&46!=s.keyCode){if(r=t.preferredCulture(this.model.locale).numberFormat["."],(c=this._textBox.value.split(r))[1]==i){var y=this._caretPosition(),S=c[0].substring(0,y),x=c[0].substring(y);if((this.model.minValue.toString().indexOf("e")>0||this.model.maxValue.toString().indexOf("e")>0)&&(v=!0),x.length>this.model.decimalPlaces&&1==this.model.validateOnType)return this._keypressFlag=!1,this._cancelEvent(s),!1;if(this._validateOnType&&!v){if(this.model.minValue.toString().match(new RegExp(".","g"))&&(d=this.model.minValue.toString().replace(/["."]/g,r)),this.model.maxValue.toString().match(new RegExp(".","g"))&&(h=this.model.maxValue.toString().replace(/["."]/g,r)),d=d.indexOf(r)>0?Number(d.substring(0,d.indexOf(r))):Number(d),h=h.indexOf(r)>0?Number(h.substring(0,h.indexOf(r))):Number(h),!this._validateValue(this.model.value,d,h,"DecimalKeyPressed"))return this._keypressFlag=!1,this._cancelEvent(s),!1;this._textBox.value=S+r+x}else this._textBox.value=S+r+x;this._setSelectionRange(y+1,y+1)}this._cancelEvent(s)}else(190==s.keyCode||110==s.keyCode)&&this._cancelEvent(s);(109==s.keyCode||189==s.keyCode||173==s.keyCode)&&(0!=this._caretPosition()&&this._getSelection(this._removeFormats(this._textBox.value))!=this.model.value||this.model.minValue>=0&&!this.model.enableStrictMode||this._textBox.value.toString().match(new RegExp("-","g"))&&""===this._getSelection(this._textBox.value)?this._cancelEvent(s):this._getSelection()==this.model.value&&(this.model.value=null)),13==s.keyCode&&this._checkNumValue(this._preVal)!==this._checkNumValue(this._textBox.value)&&this._setValue(this._textBox.value)}else(27!=s.keyCode&&!s.ctrlKey||s.ctrlKey&&90==s.keyCode&&""===e.trim(this._textBox.value))&&(this._keypressFlag=!1,this._cancelEvent(s))},_getLocalizedLabels:function(){return t.getLocalizedConstants(this.sfType,this.model.locale)}}),t.NumericTextbox.Locale=t.NumericTextbox.Locale||{},t.NumericTextbox.Locale.default=t.NumericTextbox.Locale["en-US"]={watermarkText:"Enter value"},t.PercentageTextbox.Locale=t.PercentageTextbox.Locale||{},t.PercentageTextbox.Locale.default=t.PercentageTextbox.Locale["en-US"]={watermarkText:"Enter value"},t.CurrencyTextbox.Locale=t.CurrencyTextbox.Locale||{},t.CurrencyTextbox.Locale.default=t.CurrencyTextbox.Locale["en-US"]={watermarkText:"Enter value"}}(jQuery,Syncfusion)}),
/*!
*  filename: ej.toolbar.min.js
*  version : 14.4.0.15
*  Copyright Syncfusion Inc. 2001 - 2016. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
function(e){"function"==typeof define&&define.amd?define(["./../common/ej.core.min","./../common/ej.data.min","./ej.tooltip.min"],e):e()}(function(){var e,t;e=jQuery,(t=Syncfusion).widget("ejToolbar","ej.Toolbar",{element:null,model:null,validTags:["div","span"],_setFirst:!1,_rootCSS:"e-toolbar",angular:{terminal:!1},defaults:{height:"",width:"",enabled:!0,hide:!1,disabledItemIndices:[],enabledItemIndices:[],enableSeparator:!1,orientation:"horizontal",enableRTL:!1,isResponsive:!1,showRoundedCorner:!1,htmlAttributes:{},dataSource:null,query:null,fields:{id:"id",tooltipText:"tooltipText",imageUrl:"imageUrl",text:"text",imageAttributes:"imageAttributes",spriteCssClass:"spriteCssClass",htmlAttributes:"htmlAttributes",group:"group"},tooltipSettings:{associate:"mouseenter",showShadow:!0,position:{stem:{horizontal:"left",vertical:"top"}},tip:{size:{width:5,height:5}},isBalloon:!1},cssClass:"",targetID:null,create:null,click:null,itemHover:null,itemLeave:null,destroy:null},dataTypes:{enabled:"boolean",hide:"boolean",enableSeparator:"boolean",disabledItemIndices:"data",enabledItemIndices:"data",orientation:"enum",enableRTL:"boolean",showRoundedCorner:"boolean",isResponsive:"boolean",dataSource:"data",query:"data",fields:"data",cssClass:"string",htmlAttributes:"data",targetID:"string"},hide:function(){if(!this.model.enabled&&"none"==this.element.css("display"))return!1;this.element.css("display","none"),this.model.hide=!0},show:function(){if(!this.model.enabled&&"none"!=this.element.css("display"))return!1;this.element.css("display","block"),this.model.hide=!1},_init:function(){null!=this.model.targetID&&this.element.html(e("#"+this.model.targetID).find("ul,ol")),this._cloneElement=e(this.element).clone(),this._localDataSource=null,null!=this.model.dataSource&&this._generateTemplate(),this.model.dataSource instanceof t.DataManager||this._initialize(),this._renderTooltip(this.model.tooltipSettings)},_setModel:function(t){for(var i in t)switch(i){case"height":this._setHeight(t[i]);break;case"width":this.model.width=t[i],this._setWidth(),this._bindUnbindWidth();break;case"enabled":this._controlStatus(t[i]);break;case"disabledItemIndices":this._disableItemByIndex(t[i]),t[i]=this.model.disabledItemIndices;break;case"enabledItemIndices":this._enableItemByIndex(t[i]);break;case"isResponsive":this.model.isResponsive=t[i],this.model.isResponsive?(this._responsiveLayout(),this._renderTooltip(this.model.tooltipSettings)):this._removeResponsive();break;case"hide":this._controlVisibleOptions(t[i]);break;case"orientation":this._setOrientation(t[i]),this.model.orientation=t[i],this._wireResizing();break;case"tooltipSettings":this.model.tooltipSettings=e.extend(!0,this.model.tooltipSettings,t[i]),this._renderTooltip(this.model.tooltipSettings);break;case"enableRTL":this._enableRTL(t[i]);break;case"showRoundedCorner":this._roundedCorner(t[i]);break;case"cssClass":this._setSkin(t[i]);break;case"htmlAttributes":this._addAttr(t[i]);break;case"enableSeparator":this.model.enableSeparator=t[i],this._renderToolbarSeparator();break;case"fields":e.extend(this.model.fields,t[i]);break;case"query":this.model.query=t[i];break;case"dataSource":for(optio in t)"fields"==optio&&e.extend(this.model.fields,t[optio]),"query"==optio&&(this.model.query=t[optio]);this._refreshTagItems(i,t[i]);break;case"targetID":this.model.targetID=t[i],this._setTargetID()}},_setTargetID:function(){this.element.removeAttr("role tabindex aria-disabled style"),e(this._spantag).remove(),e(this._liTemplte).remove(),this._liTemplte=this._tipRes=null,this.element.removeClass("e-widget e-box e-toolbarspan e-rtl"),this.element.find("ul,ol").removeClass("e-ul e-horizontal e-vertical e-separator e-comnrtl"),this.element.find("li").removeClass("e-tooltxt e-comnrtl"),this.element.find("li").removeAttr("aria-label"),this._init()},_refreshTagItems:function(e,t){this.model[e]=t,this.element.empty(),this._generateTemplate(),this._initialize()},_setHeight:function(e){this.element.css("height",e)},_setWidth:function(){var t,i;if("auto"==this.model.width){var s=parseFloat(this.element.css("border-left-width"))+parseFloat(this.element.css("border-right-width")),l=this.element.find("ul").children("li"),n=this.element.find("ul"),o=this.element.find(".e-toolbar-res-arrow");for(t=0,i=n.length;t<i;t++)null!=n[t]&&e(n[t]).hasClass("e-separator")&&(s+=parseFloat(n.eq(t).css("border-right-width"))+parseFloat(n.eq(t).css("border-left-width")));for(null!=o[0]&&(s+=Math.round(this.element.find(".e-toolbar-res-arrow").outerWidth())+8),t=0,i=l.length;t<i;t++)null!=l[t]&&(s+=Math.round(l.eq(t).outerWidth()));this.element.css("width",Math.ceil(s))}else this.element.css("width",this.model.width)},_bindUnbindWidth:function(){"auto"!=this.model.width?this._off(e(window),"resize",this._widthHandler):this._on(e(window),"resize",this._widthHandler)},_widthHandler:function(){this._setWidth(this.model.width)},_setOrientation:function(e){e!=t.Orientation.Vertical?(this.element.removeClass(this.model.cssClass).addClass("e-toolbarspan "+this.model.cssClass),this.itemsContainer.removeClass("e-ul e-vertical").addClass("e-ul e-horizontal")):(this.element.removeClass("e-toolbarspan "+this.model.cssClass).addClass(this.model.cssClass),this.itemsContainer.removeClass("e-ul e-horizontal").addClass("e-ul e-vertical")),this.items.addClass("e-tooltxt")},_reSizeHandler:function(){this._isResized&&this._liTemplte.children().length>0&&(e(this.element).append(this._liTemplte.children()),this._renderToolbarSeparator(),this._liTemplte.addClass("e-display-none"),this._contstatus=!1),this._elementWidth="function"==typeof getComputedStyle?parseFloat(window.getComputedStyle(this.element[0]).width):this.element.width()-1,this._liWidth=this._spanWidth,this._spantag.removeClass("e-display-block").addClass("e-display-none");for(var t=0;t<this.itemsContainer.length;t++)this._liWidth+=e(this.itemsContainer[t]).outerWidth(!0),this._liWidth>this._elementWidth&&(this._spantag.hasClass("e-display-block")||this._spantag.removeClass("e-display-none").addClass("e-display-block"),this._spantag.addClass("e-res-pos"),this._liTemplte.append(this.itemsContainer[t]));this._isResized=!0},_getZindexPartial:function(){return t.util.getZindexPartial(this.element,this.popup)},_getOffset:function(e){return t.util.getOffset(e)},_btnMouseClick:function(i){var s,l,n,o=this.element.outerWidth(),a=this.element.outerHeight(),r=e(this._liTemplte).outerWidth(),d=e(window).width(),h=e(window).scrollLeft();e(i.currentTarget).hasClass("e-disable")||(maxZ=this._getZindexPartial(),s=this._getOffset(this.element),l=this.model.enableRTL?s.left:s.left+o-r,n=s.top+a-1+2,l=l<h?h+1:l+r>d+h?d-r+h-1:l,this._contstatus?(this._liTemplte.addClass("e-display-none"),this._contstatus=!1):(this._liTemplte.removeClass("e-display-none").css({top:n+"px",left:l+"px","z-index":maxZ}),this._contstatus=!0,this._on(t.getScrollableParents(this.element),"scroll",this._hidecontext),this.element.bind("click",e.proxy(this._hidecontext,this))),this._contstatus&&this._on(e(document),"mouseup",this._documentClick),this._removeListHover())},_hidecontext:function(i){e(i.target).is(e("#"+this.element[0].id+"_target"))||(this._liTemplte.addClass("e-display-none"),this._contstatus=!1,this.element.unbind("click",e.proxy(this._hidecontext,this)),this._off(t.getScrollableParents(this.element),"scroll",this._hidecontext),this._off(e(document),"mouseup",this._documentClick))},_documentClick:function(t){e(t.target).is(e("#"+this.element[0].id+"_target"))||0!=e(t.target).closest("div#"+this.element[0].id+"_hiddenlist").length||e(t.target).parents().hasClass("e-ddl-popup")||(this._liTemplte.addClass("e-display-none"),this._contstatus=!1,this._off(e(document),"mouseup",this._documentClick))},_setSkin:function(e){this.element.removeClass(this.model.cssClass).addClass(e);var t="e-toolbarTooltip "+e;this._subControlsSetModel("cssClass",t)},_subControlsSetModel:function(i,s){t.isNullOrUndefined(this._tipToolbar)||e(this.target).ejTooltip("option",i,s),t.isNullOrUndefined(this._tipRes)||e(this._liTemplte).ejTooltip("option",i,s)},_destroy:function(){this.element.html(""),t.isNullOrUndefined(this._tipToolbar)||e(this.target).ejTooltip("destroy"),t.isNullOrUndefined(this._tipRes)||e(this._liTemplte).ejTooltip("destroy"),this._cloneElement.removeClass("e-toolbar e-js"),this.element.replaceWith(this._cloneElement),this._liTemplte&&this._liTemplte.remove(),this._unWireResizing()},_initialize:function(){this.element.attr({role:"toolbar",tabindex:"0"}),this.element.children().find("li"),this._focusEnable=!0,this._renderControl(),this._responsiveLayout(),this._wireEvents()},_responsiveLayout:function(){this._roundedCorner(this.model.showRoundedCorner),this.model.isResponsive&&"horizontal"==this.model.orientation&&(this._spantag=e("<span id='"+this.element[0].id+"_target' class='e-icon e-toolbar-res-arrow e-rel-position e-display-block' unselectable='on'></span>"),this._spantag.appendTo(this.element),this._spanWidth=this._spantag.outerWidth(!0)+8,this._liTemplte=e("<div id='"+this.element[0].id+"_hiddenlist' class='e-responsive-toolbar e-display-none e-abs-position "+e(this.element)[0].className+"'></div>"),this.model.enableRTL&&this._liTemplte.addClass("e-rtl"),this._isResized=!1,this._reSizeHandler(),e("body").append(this._liTemplte)),this._on(e("#"+this.element[0].id+"_target"),"mousedown",this._btnMouseClick),this._wireResizing(),this._controlVisibleOptions(this.model.hide),this._enableRTL(this.model.enableRTL),this._disabledItems=this.model.disabledItemIndices,this._controlStatus(this.model.enabled),this.model.disabledItemIndices=this._disabledItems,0!=this.model.disabledItemIndices.length&&this._disableItemByIndex(this.model.disabledItemIndices),0!=this.model.enabledItemIndices.length&&this._enableItemByIndex(this.model.enabledItemIndices),this._setWidth()},_removeResponsive:function(){e(this._spantag).remove(),t.isNullOrUndefined(this._tipRes)||e(this._liTemplte).ejTooltip("destroy");var i=e(this._liTemplte).children("ul");e(this._liTemplte).detach(),e(this.element).append(i),this.itemsContainer=this.element.children("ol,ul"),this.items=this.itemsContainer.children("li"),this._off(this.items,"mouseup"),this._off(this.items,"mousedown"),this._off(this.element),this._wireEvents(),this._wireResizing(),this._setWidth()},_controlVisibleOptions:function(e){0!=e?this.hide():this.show()},_controlStatus:function(e){1!=e?this.disable():this.enable()},_roundedCorner:function(e){e?(this.element.addClass("e-corner"),this._liTemplte&&this._liTemplte.addClass("e-corner")):(this.element.removeClass("e-corner"),this._liTemplte&&this._liTemplte.removeClass("e-corner")),this._subControlsSetModel("showRoundedCorner",e)},_generateTemplate:function(){var e=this;this.element.css("visibility","hidden"),this.model.dataSource instanceof t.DataManager?this.model.dataSource.executeQuery(this.model.query).done(function(t){e._generateGroup(t.result),e._initialize(),e.element.css("visibility","visible")}):(e._generateGroup(e.model.dataSource),e.element.css("visibility","visible"))},_generateGroup:function(e){var t,i,s,l,n,o=this;for(this._localDataSource=e,t=-1,i=[],s=0;s<e.length;s++)if(this._isNewGroup(e[s].group,i)){for(i[++t]=e[s].group,l=-1,o.itemsSource=[],n=s;n<e.length;n++)e[s].group==e[n].group&&(o.itemsSource[++l]=e[n]);o.element.append(o._generateTagitems())}},_isNewGroup:function(e,t){if(!t)return!0;for(var i=0;i<t.length;i++)if(e==t[i])return!1;return!0},_renderControl:function(){this.element.addClass("e-widget e-box"),this._renderToolbarItems(),this._addAttr(this.model.htmlAttributes),this._setOrientation(this.model.orientation),this._renderToolbarSeparator(),this._setHeight(this.model.height),this._bindUnbindWidth()},_renderToolbarItems:function(){this.target=this.element[0],this.itemsContainer=this.element.children("ol,ul"),this.itemsContainer.children("ol,ul").remove(),this.items=this.itemsContainer.children("li");for(var i=0;i<this.items.length;i++)t.isNullOrUndefined(e(this.items[i]).attr("title"))&&e(this.items[i]).attr("aria-label",this.items[i].id);this._liCount=this.items.length},_generateTagitems:function(){var e,i;for(e=this.itemsSource,this.ultag=t.buildTag("ul"),i=0;i<e.length;i++)this.ultag.append(this._generateLi(e[i]));return this.ultag},_generateLi:function(e){var i,s,l;return i=t.buildTag("li"),e[this.model.fields.id]?i.attr("id",e[this.model.fields.id]):e[this.model.fields.text]&&i.attr("id",e[this.model.fields.text]),e[this.model.fields.tooltipText]&&i.attr("title",e[this.model.fields.tooltipText]),e[this.model.fields.imageUrl]&&""!=e[this.model.fields.imageUrl]&&(s=t.buildTag("img.e-align","",{},{src:e[this.model.fields.imageUrl],alt:e[this.model.fields.text]}),e[this.model.fields.imageAttributes]&&this._setAttributes(e[this.model.fields.imageAttributes],s),i.append(s)),e[this.model.fields.spriteCssClass]&&""!=e[this.model.fields.spriteCssClass]&&(l=t.buildTag("div.e-align "+e[this.model.fields.spriteCssClass]+" e-spriteimg"),i.append(l)),e[this.model.fields.text]&&""!=e[this.model.fields.text]&&i.append(e[this.model.fields.text]),e[this.model.fields.htmlAttributes]&&this._setAttributes(e[this.model.fields.htmlAttributes],i),i},_setAttributes:function(t,i){for(var s in t)e(i).attr(s,t[s])},_renderToolbarSeparator:function(){var t,i;if(this.model.enableSeparator){for(t=0,i=this.itemsContainer.length-1;t<i;t++)e(this.itemsContainer[t]).addClass("e-separator");if(1==this.itemsContainer.length)for(t=0,i=this.itemsContainer[0].children.length;t<i;t++)t==i-1?e(this.itemsContainer[0].children[t]).removeClass("e-separator"):e(this.itemsContainer[0].children[t]).addClass("e-separator")}else this.itemsContainer.removeClass("e-separator").find(".e-separator").removeClass("e-separator");this._setWidth()},_addAttr:function(t){var i=this;e.map(t,function(e,t){"class"==t?i.element.addClass(e):"disabled"==t&&"disabled"==e?i.disable():i.element.attr(t,e)})},_enableRTL:function(e){e?(this.element.addClass("e-rtl"),this.items.addClass("e-comnrtl"),this.model.orientation==t.Orientation.Horizontal&&this.itemsContainer.addClass("e-comnrtl"),this._liTemplte&&this._liTemplte.addClass("e-rtl")):(this.element.removeClass("e-rtl"),this.items.removeClass("e-comnrtl"),this.model.orientation==t.Orientation.Horizontal&&this.itemsContainer.removeClass("e-comnrtl"),this._liTemplte&&this._liTemplte.removeClass("e-rtl")),this.model.enableRTL=e,this._subControlsSetModel("enableRTL",e),this._renderToolbarSeparator()},_renderTooltip:function(i){var s=e.extend(!0,{},i);s.cssClass=t.isNullOrUndefined(s.cssClass)?"e-toolbarTooltip "+this.model.cssClass:s.cssClass+" e-toolbarTooltip "+this.model.cssClass,s.enableRTL=this.model.enableRTL,s.showRoundedCorner=this.model.showRoundedCorner,s.target="li[data-content], li[title]",s.beforeOpen=this._showTooltip,this._tipToolbar=e(this.target).ejTooltip(s).data("ejTooltip"),this.model.isResponsive&&!t.isNullOrUndefined(this._liTemplte)&&(this._tipRes=e(this._liTemplte).ejTooltip(s).data("ejTooltip"))},_showTooltip:function(t){var i=e(t.event.currentTarget);t.event.target,i.hasClass("e-disable")&&(t.cancel=!0)},_hideTooltip:function(){t.isNullOrUndefined(this._tipToolbar)||(this._tipToolbar.hide(),this._tipToolbar._isHidden=!1),t.isNullOrUndefined(this._tipRes)||(this._tipRes.hide(),this._tipRes._isHidden=!1)},_addOverlay:function(i){for(var s,l=0;l<i.length;l++)e(i[l]).hasClass("e-disable")||(e(i[l]).addClass("e-disable"),s=t.buildTag("div.e-item-overlay"),e(i[l]).append(s))},_removeOverlay:function(t){for(var i=0;i<t.length;i++)e(t[i]).children(".e-item-overlay").remove()},disableItem:function(t){var i=e(t);null==i||i.length<=0||(i.hasClass("e-disable")||(i.attr("aria-disabled",!0).removeAttr("aria-label"),this._addOverlay(i)),i.removeClass("e-hover e-active").attr("aria-selected",!1))},enableItem:function(t){var i=e(t);null==i||i.length<=0||(i.removeClass("e-disable").attr("aria-disabled",!1).removeClass("e-disable"),this._removeOverlay(i))},disableItemByID:function(e){var t=this.itemsContainer.find("li#"+e);null==t||t.length<=0||this.disableItem(t)},enableItemByID:function(e){var t=this.itemsContainer.find("li#"+e);null==t||t.length<=0||this.enableItem(t)},_enableItemByIndex:function(t){var i,s;if(!this.model.enabled)return!1;if(0!=t.length)for(s=0;s<t.length;s++)e.inArray(t[s],this.model.disabledItemIndices)>-1&&(i=e.inArray(t[s],this.model.disabledItemIndices),this.enableItem(this.items[this.model.disabledItemIndices[i]]),this.model.disabledItemIndices.splice(i,1))},_disableItemByIndex:function(t){var i;if(!this.model.enabled)return!1;for(this._disabledItems=this.model.disabledItemIndices,i=0;i<t.length;i++)e.inArray(t[i],this.model.disabledItemIndices)<0&&this._disabledItems.push(parseInt(t[i]));for(i=0;i<this.items.length;i++)e.inArray(i,this.model.disabledItemIndices)>-1&&this.disableItem(this.items[i]);this.model.disabledItemIndices=this._disabledItems},disable:function(){if("true"==this.element.attr("aria-disabled"))return!1;this.element.attr("aria-disabled",!0).removeAttr("aria-label"),this._addOverlay(this.items),this.model.isResponsive&&"horizontal"==this.model.orientation&&this._spantag.addClass("e-disable"),this.model.enabled=!1,this._subControlsSetModel("enabled",!1)},enable:function(){if(this.model.disabledItemIndices=[],"false"==this.element.attr("aria-disabled"))return!1;this.items.removeClass("e-disable"),this._removeOverlay(this.items),this.element.attr("aria-disabled",!1),this.model.isResponsive&&"horizontal"==this.model.orientation&&this._spantag.removeClass("e-disable"),this.model.enabled=!0,this._subControlsSetModel("enabled",!0)},selectItem:function(t){var i=e(t);null==i||i.length<=0||(i.addClass("e-active").attr("aria-selected",!0),this._activeItem=e(this.items).index(i))},deselectItem:function(t){var i=e(t);null==i||i.length<=0||i.removeClass("e-active").attr("aria-selected",!1)},selectItemByID:function(e){var t=this.itemsContainer.find("li#"+e);null==t||t.length<=0||this.selectItem(t)},deselectItemByID:function(e){var t=this.itemsContainer.find("li#"+e);null==t||t.length<=0||this.deselectItem(t)},removeItem:function(t){var i,s,l;if(this.model.disabledItemIndices=[],s=0,null!=(i=e(t))&&!(i.length<=0))for(i.remove(),this.items=this.itemsContainer.children("li"),l=0;l<this.items.length;l++)e(this.items[l]).hasClass("e-disable")&&(this.model.disabledItemIndices[s++]=l)},removeItemByID:function(e){var t=this.itemsContainer.find("li#"+e);null==t||t.length<=0||this.removeItem(t)},_wireResizing:function(){this.model.isResponsive&&"horizontal"==this.model.orientation?e(window).bind("resize",e.proxy(this._reSizeHandler,this)):this._unWireResizing()},_unWireResizing:function(){e(window).unbind("resize",e.proxy(this._reSizeHandler,this))},_wireEvents:function(){this._on(this.element,"mousedown",this._clickEventHandler),this._on(this.element,"focus",this._focusElement),this._on(this.element,"blur",this._targetBlur),this._on(this.items,"mouseenter",this._onItemHover),this._on(this.items,"mouseleave",this._onItemLeave),this._on(this.items,"mousedown",this._onItemClick),this._on(this.items,"mouseup",this._onItemClick)},_onItemHover:function(t){var i=e(t.currentTarget),s=t.target;i.hasClass("e-disable")||(this.items.removeClass("e-hover"),i.addClass("e-hover"),args={currentTarget:i,target:s,status:this.model.enabled},this._trigger("itemHover",args))},_onItemClick:function(t){if(e(t.currentTarget).hasClass("e-disable")||1!=t.which)return!1;var i=t.currentTarget,s=t.target;this._hideTooltip(),"mousedown"==t.type?(this._focusEnable=!1,e(i).addClass("e-active"),this._focusedItem=this._currentItem=e(i)):"mouseup"==t.type&&(this._removeSelection(),e(i).hasClass("e-disable")||(args={currentTarget:i,text:e(i).attr("data-content"),target:s,status:this.model.enabled,event:t},this._activeItem=this.model.isResponsive&&this._contstatus&&e(i).closest(".e-responsive-toolbar").length>0?this._liTemplte.find(".e-tooltxt").index(i):e(this.items).index(i),this._trigger("click",args)))},_onItemLeave:function(t){var i=e(t.currentTarget),s=t.target;i.hasClass("e-disable")||(this._removeSelection(),i.removeClass("e-hover"),args={currentTarget:i,target:s,status:this.model.enabled},this._trigger("itemLeave",args))},_onKeyPress:function(i){var s,l,n,o;if(s=i.keyCode?i.keyCode:i.which?i.which:i.charCode,this.model.isResponsive&&this._liTemplte.find(".e-tooltxt").length>0?(this._keyPressed=!0,this._items=this._contstatus?this._liTemplte.find(".e-tooltxt"):this.element.find(".e-tooltxt"),l=this._items.filter(".e-tooltxt:visible:not(.e-hidden, .e-disable)")):(this._keyPressed=!1,l=this.items.filter(".e-tooltxt:visible:not(.e-hidden, .e-disable)")),this._focusedItem?(n=this._focusedItem,this._focusedItem=null):n=l.filter(".e-hover"),"keydown"==i.type)(38==s||39==s)&&this.model.orientation!=t.Orientation.Vertical||(39==s||40==s)&&this.model.orientation==t.Orientation.Vertical?(i.preventDefault(),o=e(l[l.index(n)+1]).length>0?e(l[l.index(n)+1]):l.first()):(37==s||40==s)&&this.model.orientation!=t.Orientation.Vertical||(37==s||38==s)&&this.model.orientation==t.Orientation.Vertical?(i.preventDefault(),o=e(l[l.index(n)-1]).length>0?e(l[l.index(n)-1]):l.last()):33==s||36==s?(i.preventDefault(),o=l.first()):(34==s||35==s)&&(i.preventDefault(),o=l.last()),o&&(this._removeListHover(),o.addClass("e-hover"));else switch(s){case 13:case 32:if(i.preventDefault(),!n[0])break;args={currentTarget:n[0],target:e(n)[0],status:this.model.enabled,event:i},this._trigger("click",args),this._removeListHover();break;case 27:i.preventDefault(),this.element.blur();break;case 9:i.preventDefault(),this._activeItem=e(this.items).filter(".e-tooltxt:visible:not(.e-hidden, .e-disable)").first().index(),this._addListHover()}},_removeListHover:function(){e(this.items).removeClass("e-hover")},_addListHover:function(){var e=this._getActiveItem();e.hasClass("e-disable")||e.addClass("e-hover").focus()},_getActiveItem:function(){return this.model.isResponsive&&this._keyPressed?e(this._items[this._activeItem]):e(this.items[this._activeItem])},_targetBlur:function(e){e.preventDefault(),this.element.focusout().removeClass("e-focus"),this._removeListHover(),this._off(this.element,"keyup",this._onKeyPress)._off(this.element,"keydown",this._onKeyPress),this._trigger("focusOut")},_clickEventHandler:function(){this._clicked=!0},_removeSelection:function(){this._currentItem&&"true"!=this._currentItem.attr("aria-selected")&&this._currentItem.removeClass("e-active")},_focusElement:function(){this.element.hasClass("e-focus")||(this.element.addClass("e-focus"),this._on(this.element,"keyup",this._onKeyPress)._on(this.element,"keydown",this._onKeyPress),this._focusEnable)?(this._removeListHover(),this._activeItem=this._clicked?-1:0,(this._getActiveItem().hasClass("e-disable")||this._getActiveItem().is(":hidden"))&&(this._activeItem=e(this.items).filter('li:not([class*="e-disable"])').first().index()),this._addListHover()):this._focusEnable=!0}})}),
/*!
*  filename: ej.menu.min.js
*  version : 14.4.0.15
*  Copyright Syncfusion Inc. 2001 - 2016. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
function(e){"function"==typeof define&&define.amd?define(["./../common/ej.core.min","./ej.checkbox.min"],e):e()}(function(){var e,t,s;e=jQuery,(t=Syncfusion).widget("ejMenu","ej.Menu",{element:null,model:null,validTags:["ul"],_setFirst:!1,_rootCss:"e-menu",angular:{terminal:!1},defaults:{height:"",width:"",animationType:"default",orientation:t.Orientation.Horizontal,menuType:"normalmenu",isResponsive:!0,contextMenuTarget:null,htmlAttributes:{},cssClass:"",openOnClick:!1,subMenuDirection:"none",enableCenterAlign:!1,showRootLevelArrows:!0,showSubLevelArrows:!0,enableAnimation:!0,enableSeparator:!0,enabled:!0,fields:{child:null,dataSource:null,query:null,tableName:null,id:"id",parentId:"parentId",text:"text",spriteCssClass:"spriteCssClass",url:"url",imageAttribute:"imageAttribute",htmlAttribute:"htmlAttribute",linkAttribute:"linkAttribute",imageUrl:"imageUrl"},enableRTL:!1,titleText:"Menu",excludeTarget:null,beforeOpen:null,open:null,close:null,mouseover:null,mouseout:null,click:null,keydown:null,create:null,destroy:null},dataTypes:{animationType:"enum",cssClass:"string",titleText:"string",openOnClick:"boolean",enabled:"boolean",enableCenterAlign:"boolean",showArrow:"boolean",showRootLevelArrows:"boolean",showSubLevelArrows:"boolean",enableSeparator:"boolean",isResponsive:"boolean",enableRTL:"boolean",enableAnimation:"boolean",fields:{dataSource:"data",query:"data",child:"data"},excludeTarget:"string",htmlAttributes:"data"},_setModel:function(i){for(var s in i)switch(s){case"menuType":i[s]=this.model.menuType;break;case"fields":this._wireEvents("_off"),this.element.empty().insertBefore(this.wrapper),this.wrapper.remove(),e.extend(this.model.fields,i[s]),this._intializeData(),this.model.enabled||this._wireEvents("_off");break;case"orientation":this._setOrientation(i[s]);break;case"showRootLevelArrows":this._addArrow(i[s],this.model.showSubLevelArrows);break;case"showSubLevelArrows":this._addArrow(this.model.showRootLevelArrows,i[s]);break;case"enableSeparator":this._setSeparator(i[s]);break;case"height":this._setHeight(i[s]);break;case"width":this._setWidth(i[s]);break;case"cssClass":this._setSkin(i[s]);break;case"isResponsive":this.model.isResponsive?this._responsiveLayout():(e(this.resWrap).remove(),e(this.wrapper).removeClass("e-menu-responsive"),e(this.element).removeClass("e-menu-responsive"),this.resWrap=null);break;case"htmlAttributes":this._addAttr(i[s]);break;case"enableRTL":this._setRTL(i[s]);break;case"enableCenterAlign":this._centerAlign(i[s]);break;case"excludeTarget":this.model.excludeTarget=i[s];break;case"enabled":this.model.enabled=i[s],this._controlStatus(i[s]);break;case"animationType":this._setAnimation(i[s]);break;case"enableAnimation":this.model.enableAnimation=i[s];break;case"openOnClick":this._hoverOpen=!i[s],this._hoverClose=!i[s];break;case"subMenuDirection":this._setSubMenuDirection(this.model.subMenuDirection);break;case"titleText":this.model.menuType!=t.MenuType.ContextMenu&&"vertical"!=this.model.orientation&&e(this.label).text(i[s])}},_destroy:function(){this.model.menuType==t.MenuType.ContextMenu?this._referenceElement.append(this._cloneElement):this._cloneElement.insertBefore(this.wrapper),this._cloneElement.removeClass("e-menu e-js"),this.wrapper.remove()},_init:function(){this._cloneElement=this.element.clone(),this.element.css("visibility","hidden"),this._setValues(),this._intializeData(),this.element.css("visibility","visible")},_setValues:function(){this._mouseOver=!0,this._hoverOpen=!0,this._hoverClose=!0,this._isMenuOpen=!1,this._hideSpeed=100,this._showSpeed=100,this._isSubMenuOpen=!1,this._isContextMenuOpen=!1,this._disabledMenuItems=[],this._hiddenMenuItems=[],this._delayMenuHover=0,this._delaySubMenuHover=0,this._delaySubMenuShow=0,this._preventContextOpen=!0,this._setAnimation(this.model.animationType),this._isFocused=!0},_intializeData:function(){t.isNullOrUndefined(this.model.fields)||null==this.model.fields.dataSource?(this._renderMenu(),this._wireEvents("_on")):(this._generateTemplate(this.model.fields.dataSource),this._renderMenu())},_renderMenu:function(){this._renderControl(),this._addArrow(this.model.showRootLevelArrows,this.model.showSubLevelArrows),this._renderArrow(),this._intializeMenu()},_renderControl:function(){"normalmenu"==this.model.menuType?(this.wrapper=t.buildTag("div"),this.wrapper.addClass(this.model.cssClass+" e-menu-wrap")):this.wrapper=t.buildTag("div.e-menu-wrap"),this.model.isResponsive&&this._responsiveLayout(),this.model.menuType!=t.MenuType.ContextMenu&&(this.wrapper.insertBefore(this.element),this.wrapper.append(this.element),null!=this.checkBox&&this.checkBox.ejCheckBox({size:"medium",change:this._oncheck})),this.element.addClass("e-menu e-widget e-box").attr({role:"menu",tabindex:0}),this._addAttr(this.model.htmlAttributes),this.model.enableRTL&&this._setRTL(this.model.enableRTL),this._setSubMenuDirection(this.model.subMenuDirection),"normalmenu"==this.model.menuType?"horizontal"==this.model.orientation?this.element.addClass("e-horizontal"):this.element.addClass("e-vertical"):this._contextMenu_Template(),this._addClass(),this.model.enableCenterAlign&&this._centerAlign(this.model.enableCenterAlign),this.model.enableSeparator&&this._setSeparator(!0),this.model.enabled||this.disable()},_responsiveLayout:function(){this.model.menuType!=t.MenuType.ContextMenu&&"vertical"!=this.model.orientation&&(this.wrapper.addClass("e-menu-responsive"),this.element.addClass("e-menu-responsive"),this.resWrap=t.buildTag("span.e-menu-res-wrap e-menu-responsive"),this.inResWrap=t.buildTag("span.e-in-wrap e-box e-menu-res-in-wrap"),this.label=t.buildTag("span.e-res-title",this.model.titleText),this.check=t.buildTag("span.e-check-wrap e-icon"),this.checkBox=t.buildTag("input#responsive.e-res-icon","",{opacity:0},{type:"checkbox"}),this.wrapper.append(this.resWrap),this.resWrap.append(this.inResWrap),this.inResWrap.append(this.label).append(this.check),this.check.append(this.checkBox))},_addAttr:function(t){var i=this;e.map(t,function(e,t){"class"==t?i.wrapper.addClass(e):"disabled"==t&&"disabled"==e?i.disable():i.element.attr(t,e)})},_oncheck:function(e){var t=this.element.parents(".e-menu-wrap").children(".e-menu");e.isChecked?t.removeClass("e-res-hide").addClass("e-res-show"):t.removeClass("e-res-show").addClass("e-res-hide")},_addClass:function(){this.element.find('li:has("> ul")').find("> a,> span").addClass("aschild"),this.element.find(">li").addClass("e-list").attr({role:"menuitem"}),this.element.find("li").find(">a, >span").addClass("e-menulink");var t,s,l=this.element.find(".e-list a.aschild"),n=this.element.find(".e-list span.aschild");for(i=0;i<l.length;i++)(t=e(l[i])).siblings().attr({"aria-hidden":!0}),t.parent().attr({"aria-haspopup":!0,role:"menu"}).addClass("e-haschild"),t.siblings("ul").children("li").addClass("e-list").attr("role","menuitem");for(i=0;i<n.length;i++)(s=e(n[i])).siblings().attr({"aria-hidden":!0}),s.parent().attr({"aria-haspopup":!0,role:"menu"}).addClass("e-haschild"),s.siblings("ul").children("li").addClass("e-list").attr("role","menuitem")},_renderArrow:function(){if(this.model.menuType!=t.MenuType.ContextMenu&&"vertical"!=this.model.orientation&&0==e(e(this.element).find("span.e-menu-arrow")).length){var i=t.buildTag("span.e-menu-arrow e-menu-left");e(i).append("<span class='e-arrowMenuOuter'></span>").append("<span class='e-arrowMenuInner'></span>"),this.element.find(">li.e-list.e-haschild").append(i)}},_generateTemplate:function(e){var i=this;e instanceof t.DataManager?e.executeQuery(this._columnToSelect(this.model.fields)).done(function(e){i._odataFlag=!0,i._generateItemTemplate(e.result),i._wireEvents("_on")}):(i._odataFlag=!1,this._generateItemTemplate(i.model.fields.dataSource),this._wireEvents("_on"))},_generateItemTemplate:function(e){for(var t,i=0;i<e.length;i++)(null==e[i][this.model.fields.parentId]||0==e[i][this.model.fields.parentId])&&(t=this._menuTemplate(e[i],e,this.model.fields),this.element.append(t))},_menuTemplate:function(i,s,l){var n,o,a,r,d,h,c,u,m,p,g;if((n=e(document.createElement("li"))).attr("class","e-list"),i[l.htmlAttribute]&&this._setAttributes(i[l.htmlAttribute],n),(o=e(document.createElement("a"))).attr("class","e-menulink"),i[l.imageUrl]&&""!=i[l.imageUrl]?((a=e(document.createElement("img"))).attr("src",i[l.imageUrl]),i[l.imageAttribute]&&this._setAttributes(i[l.imageAttribute],a),o.append(a)):i[l.spriteCssClass]&&""!=i[l.spriteCssClass]&&((r=e(document.createElement("span"))).addClass(i[l.spriteCssClass]),o.append(r)),o.append(i[l.text]),i[l.linkAttribute]&&this._setAttributes(i[l.linkAttribute],o),i[l.url]&&o.attr("href",i[l.url]),n.append(o),i[l.id]&&n.prop("id",i[l.id]),t.isNullOrUndefined(l.child)){if(!this._odataFlag&&(u=t.DataManager(l.dataSource).executeLocal(t.Query().where(l.parentId,t.FilterOperators.equal,i[l.id])))&&u.length>0){for(m=t.buildTag("ul"),p=0;p<u.length;p++)g=this._menuTemplate(u[p],l.dataSource,l),m.append(g);n.append(m)}}else if(this._odataFlag=!0,l.child.dataSource instanceof t.DataManager)d=this,h=t.Query(),e(n).attr({"aria-haspopup":!0,role:"menu"}).addClass("e-haschild"),(h=this._columnToSelect(l.child)).where(l.child.parentId,t.FilterOperators.equal,i[l.id]),(c=l.child.dataSource.executeQuery(h)).done(function(t){var i,s,o,a=t.result;if(a&&a.length>0){for(i=e(document.createElement("ul")),s=0;s<a.length;s++)o=d._menuTemplate(a[s],l.child.dataSource,l.child),i.append(o);n.append(i),e(n).children("a").addClass("aschild"),e(n).parent().hasClass("e-menu")&&d.model.showRootLevelArrows?e(n).children("a.aschild").append(e("<span>").addClass("e-icon e-arrowhead-down")).addClass("e-arrow-space"):d.model.showSubLevelArrows&&e(n).children("a.aschild").append(e("<span>").addClass("e-icon e-arrowhead-right")).addClass("e-arrow-space")}}),c.then(function(){d._renderArrow()});else if(t.isNullOrUndefined(i.child)||(t.isPlainObject(i.child)?u=t.DataManager(l.child.dataSource).executeLocal(t.Query().where(l.child.parentId,t.FilterOperators.equal,i[l.id])):i.child instanceof Array&&(u=i.child)),u&&u.length>0){for(m=e(document.createElement("ul")),p=0;p<u.length;p++)g=this._menuTemplate(u[p],l.child.dataSource,l.child),m.append(g);n.append(m)}return n},_setAttributes:function(e,t){for(var i in e)"class"==i?t.addClass(e[i]):t.attr(i,e[i])},_addArrow:function(t,i){if(t){var s="horizontal"==this.model.orientation?"e-arrowhead-down":"e-arrowhead-right";this.element.find('>li.e-list:has("> ul")').children("a,span").append(e("<span>").addClass("e-icon "+s)).addClass("e-arrow-space")}else this.element.find('>li.e-list:has("> ul")').children("a,span").removeClass("e-arrow-space").children("span.e-icon").remove();i?this.element.find(">li.e-list > ul li.e-list:has(>ul)").children("a,span").append(e("<span>").addClass("e-icon e-arrowhead-right")).addClass("e-arrow-space"):this.element.find(">li.e-list > ul li.e-list:has(>ul)").children("a,span").removeClass("e-arrow-space").children("span.e-icon").remove()},_intializeMenu:function(){0!=this.model.height&&this._setHeight(this.model.height),0!=this.model.width&&this._setWidth(this.model.width),"contextmenu"==this.model.menuType&&(this.model.openOnClick=!1),this.model.openOnClick&&(this._hoverOpen=!1,this._hoverClose=!1)},_setOrientation:function(e){"horizontal"==e?this.element.removeClass("e-vertical e-horizontal").addClass("e-horizontal"):this.element.removeClass("e-horizontal e-vertical").addClass("e-vertical")},_setHeight:function(e){"horizontal"==this.model.orientation&&"auto"!==e?(e="number"==typeof e?e+"px":e,this.element.find("> li").find(">a:first").css("line-height",e),this.model.showRootLevelArrows&&this.element.find("> li").find(">a:first").find("> span:first").css({"line-height":e,top:"0px"})):this.element.height(e)},_setWidth:function(e){this.element.css("width",e),"horizontal"===this.model.orientation&&this.model.isResponsive&&this.resWrap.css("width",e)},_setRTL:function(e){e?this.element.removeClass("e-rtl").addClass("e-rtl"):this.element.removeClass("e-rtl"),e&&"horizontal"===this.model.orientation?this.wrapper.removeClass("e-menu-rtl").addClass("e-menu-rtl"):this.wrapper.removeClass("e-menu-rtl"),this.model.subMenuDirection=e?"left":"right"},_setSubMenuDirection:function(e){"left"!=e&&"right"!=e&&(this.model.subMenuDirection=this.model.enableRTL?"left":"right")},_setAnimation:function(e){"none"===e?(this._showAnim="none",this._hideAnim="none"):(this._showAnim="slideDown",this._hideAnim="slideUp")},_controlStatus:function(e){1!=e?this.disable():this.enable()},_centerAlign:function(e){"horizontal"==this.model.orientation&&e?this.element.css("text-align","center"):this.element.css("text-align","inherit")},_columnToSelect:function(e){var i,s=[],l=t.Query();if(t.isNullOrUndefined(e.query)){for(i in e)"tableName"!==i&&"child"!==i&&"dataSource"!==i&&e[i]&&s.push(e[i]);s.length>0&&l.select(s),this.model.fields.dataSource.dataSource.url.match(e.tableName+"$")||t.isNullOrUndefined(e.tableName)||l.from(e.tableName)}else l=e.query;return l},_max_zindex:function(){var t,i,s;return"contextmenu"==this.model.menuType?(t=e(this._targetElement).parents()).push(this._targetElement):t=e(this.element).parents(),i=e("body").children(),index=i.index(this.popup),i.splice(index,1),e(i).each(function(e,i){t.push(i)}),!(s=Math.max.apply(s,e.map(t,function(t){if("static"!=e(t).css("position"))return parseInt(e(t).css("z-index"))||1})))||s<1e4?s=1e4:s+=1,s},_recursiveFunction:function(t,i){var s=this,l=!1;e.each(t,function(e,t){return t.Text==i?(s.selectedItem=t,l=!0,!1):(null!=t.ChildItems&&s._recursiveFunction(t.ChildItems,i),!l&&void 0)})},_contextMenu_Template:function(){var t=e(".e-menu-wrap #"+this.element[0].id).get(0);t&&e(t.parentElement).remove(),this.model.orientation="vertical",this.element.addClass(this.model.cssClass+" e-context"),this.element.css("display","none"),this._referenceElement=this.element.parent(),e("body").append(this.element),this.wrapper.insertBefore(this.element),this.wrapper.append(this.element)},_closeMenu:function(){this._hideAnimation(this.element.find('li.e-list:has("> ul")').find("> ul:visible"),this._hideAnim)},_onMenuIntent:function(e,t,i){t._delayMenuHover=window.setTimeout(function(){if(1==t._mouseOver&&i){var s=t._showAnim,l=t._hideAnim;t._showSpeed,t._hideSpeed,t._show(e,s,l)}},this._showSpeed)},_onHide:function(e,t,i){t._delaySubMenuHover=window.setTimeout(function(){0==t._mouseOver&&i&&(t._id,t._hideAnim,t._hideSpeed,t._closeAll())},t._hideSpeed)},_subMenuPos:function(t,i){var l,n,o,a,r,d,h,c,u,m=e(t).offset(),p=m.left,g=e("ul:first",t),f=e(t).outerWidth();if(null==m||m==s)return!1;o=g.outerWidth()+1,a=document.documentElement.clientWidth+e(document).scrollLeft(),"normalmenu"==this.model.menuType?e(t.parentNode).is(this.element)?"horizontal"==this.model.orientation?(g.css("top",e(t).outerHeight()+"px"),this.model.enableRTL?(n=p+f-o<0?p+f-o:1,g.css({left:"auto",right:n+"px"})):(l=a<p+o?p+o-a:1,g.css("left",-1*l+"px"))):"left"==i&&p>o||"right"==i&&a<=m.left+f+o?g.css("left",-(o+4)+"px"):g.css("left",e(t).outerWidth()+4+"px"):"left"==i&&p>o||"right"==i&&a<=m.left+f+o?g.css("left",-(o+4)+"px"):(g.css("left",e(t).outerWidth()+4+"px"),c=g.outerHeight(),(r=e(window).height())<c?(d=m.top-e(window).scrollTop(),g.css("top",4-d+"px")):r-m.top<c&&(d=r-m.top-c,g.css("top",d-2+"px"))):((a-=m.left+2*o+4)<0?(h=null==o?"-206.5px":"-"+(o+5)+"px",g.css("left",h)):g.parent("li.e-list").parent("ul").width()&&"right"==i?g.css("left",g.parent("li.e-list").parent("ul").width()+4+"px"):m.left>o&&g.css("left",-(o+4)+"px"),c=g.outerHeight(),m.top+c>e(window).height()?(u=-c+e(t).outerHeight(),c>m.top+e(t).outerHeight()/2?g.css("top",-c/2+"px"):g.css("top",u+"px")):g.css("top","0px"))},_setSkin:function(e){this.wrapper.removeClass(this.model.cssClass).addClass(e+" e-menu-wrap")},_setSeparator:function(e){e?this.element.addClass("e-separator"):this.element.removeClass("e-separator")},_contextMenuEvents:function(t){this[t](e(this.model.contextMenuTarget),"mouseup taphold",this._ContextMenuHandler),this[t](this.element,"contextmenu",this._onDefaultPreventer),this[t](e(this.model.contextMenuTarget),"contextmenu",this._onDefaultPreventer),this[t](e(document),"mousedown",this._onContextClose)},_show:function(t,i,s){var l,n=e("> ul",t),o=this._max_zindex();n.attr({"aria-hidden":!1}),this._hideAnimation(e(t).siblings().find(" > ul:visible"),s),e.inArray(this._disabledMenuItems,t)>-1||("none"!=n.css("display")?(l=this.model.openOnClick?e(n):n.children().find("> ul"),this._hideAnimation(l,s)):e("> ul",t).children().find("> ul").hide(),this._subMenuPos(t,this.model.subMenuDirection),n.css({"z-index":o+1}),e(t).children("span.e-menu-arrow").css({"z-index":o+2}),"block"==e("> ul",t).css("display")||e(t).hasClass("e-disable-item")||(this._showAnimation(n,i),n.closest("li").addClass("e-active e-mfocused")),e(t).siblings("li.e-active").length>0&&e(t).siblings("li.e-active").removeClass("e-active e-mfocused"))},_closeAll:function(){this._hideAnimation(this.element.find('li.e-list:has("> ul")').find("> ul:visible"),this._hideAnim),this._hideAnimation(this.element.find("> ul:visible"),this._hideAnim)},_showAnimation:function(e,t){switch(t){case"slideDown":e.slideDown(this.model.enableAnimation?200:0);break;case"none":e.css("display","block")}},_hideAnimation:function(t,i){switch(i){case"slideUp":e(t).attr({"aria-hidden":!0}),t.slideUp(this.model.enableAnimation?100:0);break;case"none":t.css("display","none")}t.closest("li").removeClass("e-active e-mfocused")},_removeValue:function(i,s){for(var l=t.browserInfo(),n="8.0"===l.version&&"msie"===l.name?i[0].outerText:i[0].textContent,o=e(s).length,a=0,r=0==e(s).children("a").length?e(s).children("span"):e(s).children("a");a<=o;){if(e(r[a]).text()===n)return a;a++}},_createSubLevelItem:function(t,i){var s;(s=e(document.createElement("ul"))).append(i),t.append(s),t.attr({role:"menu","aria-haspopup":"true"}),t.addClass("e-haschild"),this.element.find('li:has("> ul")').find("> a,>span").addClass("aschild e-arrow-space"),this._insertArrows(s)},_insertArrows:function(t){this.model.showRootLevelArrows?t.find(">a,>span").append(e("<span>").addClass("e-icon e-arrowhead-down")).addClass("e-arrow-space"):t.find(">a,>span").removeClass("e-arrow-space").find(">span.e-icon").remove(),this.model.showSubLevelArrows?t.parent("li.e-list:has(>ul)").children("a,span").append(e("<span>").addClass("e-icon e-arrowhead-right")).addClass("e-arrow-space"):t.parent("li.e-list:has(>ul)").children("a,span").removeClass("e-arrow-space").find(">span.e-icon").remove()},_createMenuItem:function(t){var i,s,l,n;return(i=e(document.createElement("li"))).attr({class:"e-list",role:"menuitem"}),t.htmlAttribute&&this._setAttributes(t.htmlAttribute,i),t.text&&""!=t.text&&((s=e(document.createElement("a"))).attr({class:"e-menulink"}),t.imageUrl&&""!=t.imageUrl?((l=e(document.createElement("img"))).attr("src",t.imageUrl),t.imageAttribute&&this._setAttributes(t.imageAttribute,l),s.append(l)):t.spriteCssClass&&""!=t.spriteCssClass&&((n=e(document.createElement("span"))).addClass(t.spriteCssClass),s.append(n)),s.append(t.text),t.linkAttribute&&this._setAttributes(t.linkAttribute,s),t.url&&s.attr("href",t.url),i.append(s)),t.id&&i.prop("id",t.id),this.model.enabled||i.addClass("e-disable-item"),i},_insertNode:function(i,s,l){var n=0,o=0,a=0,r=[];for(e(s).is(this.element)?r.push(this.element):"string"==typeof s?r.push(this.element.find(s)):void 0===s?r.push(this.element):r.push(s),o=0;o<r.length;o++)for(a=0;a<r[o].length;a++)for(n=0;n<i.length&&!t.isNullOrUndefined(i[n]);n++)this._addItem(i[n],r[o][a],l)},_addItem:function(t,i,s){var l,n;switch(this._wireEvents("_off"),l=this._createMenuItem(t),i=e("default"===i?"#"+t.parentId:i),s){case"insert":0!=(n=e(i).is(this.element)?i:i.children("ul")).length?n.append(l):this._createSubLevelItem(i,l);break;case"insertBefore":e(i).is(this.element)?i.prepend(l):l.insertBefore(i);break;case"insertAfter":e(i).is(this.element)?i.append(l):l.insertAfter(i)}this._wireEvents("_on")},_removeItem:function(e){0==e.siblings("li").length?(e.closest("ul").siblings("a.aschild").removeClass("aschild e-arrow-space").children("span.e-icon").remove(),e.closest("ul").hasClass("e-menu")?e.remove():e.closest("ul").remove()):e.remove()},_hiddenElement:function(t){t.length>0&&-1==e.inArray(t[0],this._hiddenMenuItems)&&(t.addClass("e-hidden-item"),this._hiddenMenuItems.push(t[0]))},_showElement:function(t){t.length>0&&e.inArray(t[0],this._hiddenMenuItems)>-1&&(t.removeClass("e-hidden-item"),this._hiddenMenuItems.splice(this._hiddenMenuItems.indexOf(t[0]),1))},_getNodeByID:function(t){return"object"!=typeof t&&""!=t&&(t=this.element.find(".e-list"+t)),e(t)},_processItems:function(t,i){for(var s=this._getNodeByID(t),l=0;l<s.length;l++)i?this._showElement(e(s[l])):this._hiddenElement(e(s[l]))},insert:function(e,t){this._insertNode(e,t,"insert")},insertBefore:function(e,t){this._insertNode(e,t,"insertBefore")},insertAfter:function(e,t){this._insertNode(e,t,"insertAfter")},remove:function(t){var i=0,s=0;for(i=0;i<t.length;i++)for(t[i]="string"==typeof t[i]?this.element.find(t[i]):t[i],s=0;s<t[i].length;s++)"LI"===t[i][s].tagName||"UL"===t[i][s].tagName?this._removeItem(e(t[i][s])):t[i][s].remove()},showContextMenu:function(i,s,l,n,o){if(this._closeMenu(),this._eventArgs=n,t.isNullOrUndefined(n)||!this._checkForExclusion(n.target)){if(this._trigger("beforeOpen",{target:l,events:n}))return!1;if(this._preventContextOpen){if(this._targetElement=t.isNullOrUndefined(l)?t.isNullOrUndefined(target)?this.element:target:l,o){var a=this._calculateContextMenuPosition(n);i=a.X,s=a.Y}this.element.css({left:i,top:s}),this.element.css({"z-index":this._max_zindex()+1}),this._showAnimation(this.element,this._showAnim),this._isContextMenuOpen=!0,this.element.focus(),this._trigger("open",{target:l}),this._on(t.getScrollableParents(e(this.model.contextMenuTarget)),"scroll",this.hideContextMenu)}return!1}},_checkForExclusion:function(i){var s,l;if(!t.isNullOrUndefined(this.model.excludeTarget))for(s=this.model.excludeTarget.split(","),l=0;l<s.length;l++)if(e(i).closest(this.model.excludeTarget).is(e.trim(s[l])))return!0},hideContextMenu:function(i){this._closeMenu(),this.element.find(".e-mhover").removeClass("e-mhover"),this.element.find(".e-mfocused").removeClass("e-mfocused"),this._hideAnimation(this.element,this._hideAnim),this._isContextMenuOpen=!1,this._trigger("close",e.extend({events:i},i)),this._off(t.getScrollableParents(e(this.model.contextMenuTarget)),"scroll",this.hideContextMenu)},disableItem:function(t){var i=e(this.element.find("li.e-list >a ,li.e-list >span")).filter(function(){return e.trim(e(this).text())===t});i.length>0&&!(e.inArray(i.parent()[0],this._disabledMenuItems)>-1)&&(i.parent().addClass("e-disable-item").attr({"aria-disabled":!0}),i.parent().find(">a.aschild span.e-icon").addClass("e-disable"),this._disabledMenuItems.push(i.parent()[0]))},disableItemByID:function(t){if(t&&""!=t){var i=this.element.find("#"+t)?this.element.find("#"+t)[0]:s;!i||e.inArray(i,this._disabledMenuItems)>-1||(e(i).addClass("e-disable-item").attr({"aria-disabled":!0}),e(i).find(">a.aschild span.e-icon").addClass("e-disable"),this._disabledMenuItems.push(i))}},getHiddenItems:function(){return this._hiddenMenuItems},hideItems:function(e){if("object"==typeof e&&e.length!==s)for(var t=0;t<e.length;t++)this._processItems(e[t],!1);else this._processItems(e,!1)},showItems:function(e){if("object"==typeof e&&e.length!==s)for(var t=0;t<e.length;t++)this._processItems(e[t],!0);else this._processItems(e,!0)},enableItem:function(t){var i,s=e(this.element.find("li.e-list >a ,li.e-list >span")).filter(function(){return e.trim(e(this).text())===t});s.length>0&&e.inArray(s.parent()[0],this._disabledMenuItems)>-1&&(s.parent().removeClass("e-disable-item").attr({"aria-disabled":!1}),s.parent().find(">a.aschild span.e-icon").removeClass("e-disable"),i=this._removeValue(s,this._disabledMenuItems),this._disabledMenuItems.splice(i,1))},enableItemByID:function(t){var i,s;if(t&&""!=t&&(i=this.element.find("#"+t)[0])&&e.inArray(i,this._disabledMenuItems)>-1)for(e(i).removeClass("e-disable-item").attr({"aria-disabled":!1}),e(i).find(">a.aschild span.e-icon").removeClass("e-disable"),s=this._disabledMenuItems.length-1;s>=0;s--)this._disabledMenuItems[s].id==t&&this._disabledMenuItems.splice(s,1)},disable:function(){this.model.enabled=!1;var t=this.element.find(">li[class~=e-list]"),i=this;e.each(t,function(t,s){e.inArray(s,i._disabledMenuItems)>-1||(e(s).addClass("e-disable-item").attr({"aria-disabled":!0}),e(s).find(">a.aschild span.e-icon").addClass("e-disable"),i._disabledMenuItems.push(s))})},enable:function(){var t,i=this;this.model.enabled=!0,t=this.element.find("li.e-disable-item"),e.each(t,function(t,s){e(s).removeClass("e-disable-item").attr({"aria-disabled":!1}),e(s).find(">a.aschild span.e-icon").removeClass("e-disable"),i._disabledMenuItems.pop(s)})},show:function(e,t,i,s){if(!this.model.enabled)return!1;"contextmenu"==this.model.menuType?this.showContextMenu(e,t,i,s,!1):this.element.css("display","block")},hide:function(e){if(!this.model.enabled)return!1;"contextmenu"==this.model.menuType?this.hideContextMenu(e):(this._closeMenu(),this.element.css("display","none"))},_wireEvents:function(t){this[t](this.element.find("li.e-list"),"mouseout",this._mouseOutHandler),this[t](this.element.find("li.e-list"),"mouseover",this._mouseOverHandler),this[t](this.element,"click",this._onClickHandler),this[t](this.element,"keydown",this._onKeyDownHandler),this[t](this.element,"focus",this._OnFocusHandler),this[t](this.element,"blur",this._OnFocusOutHandler),"contextmenu"==this.model.menuType&&null!=e(this.model.contextMenuTarget)[0]&&this._contextMenuEvents(t),"contextmenu"!=this.model.menuType&&(this[t](e(document),"click",this._onDocumentClick),this[t](this.element,"mousedown",this._onMouseDownHandler))},_mouseOverHandler:function(i){var s,l;if(this.element.find(".e-mhover").removeClass("e-mhover"),i.currentTarget=e(i.target).closest("li")[0],e(i.currentTarget).hasClass("e-disable-item")?this._isFocused=!1:e(i.currentTarget).addClass("e-mhover"),i.stopPropagation&&i.stopPropagation(),void 0!==this._delaySubMenuHover&&clearTimeout(this._delaySubMenuHover),void 0!==this._delaySubMenuHover&&clearTimeout(this._delayMenuHover),this._mouseOver=!0,this._isMenuOpen=!0,this._isSubMenuOpen=!e(i.currentTarget.parentNode.parentNode).is(this.element),"LI"==i.currentTarget.nodeName)s=i.currentTarget;else{if(!i.currentTarget.parentNode)return i.preventDefault(),!1;if("LI"!=i.currentTarget.parentNode.nodeName)return!1;s=i.currentTarget.parentNode}e(i.currentTarget).hasClass("e-disable-item")||this._onMenuIntent(s,this,this._hoverOpen),e.inArray(s,this._disabledMenuItems)>-1||(l={text:e(s).children("a,span").text(),element:s,event:i,ID:t.isNullOrUndefined(s)?"":e(s)[0].id},this._trigger("mouseover",e.extend({events:l},l)))},_onMouseDownHandler:function(t){e(t.target).hasClass("e-menu")&&(this._isFocused=!1)},_mouseOutHandler:function(i){var s,l;if(e(i.currentTarget).removeClass("e-mhover"),i.stopPropagation&&i.stopPropagation(),void 0!==this._delaySubMenuHover&&clearTimeout(this._delaySubMenuHover),void 0!==this._delaySubMenuHover&&clearTimeout(this._delayMenuHover),this._mouseOver=!1,this._isMenuOpen=!1,"LI"==i.currentTarget.nodeName)s=i.currentTarget;else{if(!i.currentTarget.parentNode)return i.preventDefault(),!1;if("LI"!=i.currentTarget.parentNode.nodeName)return!1;s=i.currentTarget.parentNode}this._onHide(s,this,this._hoverClose),e.inArray(s,this._disabledMenuItems)>-1||(l={text:e(s).children("a,span").text(),element:s,event:i,ID:t.isNullOrUndefined(s)?"":e(s)[0].id},this._trigger("mouseout",e.extend({events:l},l)))},_onClickHandler:function(i){var s,l,n,o,a,r="";this._isFocused=!0,l=!1,!e(i.target).closest("li.e-list").hasClass("e-disable-item")&&e(i.target).closest("li.e-list").length>0?(s=e(i.target).closest("li.e-list")[0],e(s).is(this.element.find(">li.e-list"))&&(this._activeElement=s),e(i.target).is("a")&&e(s).find(">a,>span").hasClass("aschild")&&this.model.openOnClick&&(this._isFocused=!1),!this._hoverOpen&&e(s).find(">a,>span").hasClass("aschild")&&(this._show(s,this._showAnim,this._hideAnim),this._hoverOpen=!1,l=!0),e.inArray(s,this._disabledMenuItems)>-1||("contextmenu"==this.model.menuType&&this._isContextMenuOpen&&!e(s).hasClass("e-haschild")&&(this._hideAnimation(this.element,this._hideAnim),this._isContextMenuOpen=!1,this._trigger("close",e.extend({events:i},i)),this._off(t.getScrollableParents(e(this.model.contextMenuTarget)),"scroll",this.hideContextMenu)),l||e(s).find(">a,>span").hasClass("aschild")||(this._closeMenu(),this.model.openOnClick&&(this._hoverOpen=!1)),n=e(s).children("a,span").text(),0!=(o=e(s).closest("ul").parent("li")).length?(parentId=t.isNullOrUndefined(o.attr("id"))?null:o.attr("id"),parentText=o.children("a,span").text()):(parentId=null,parentText=null),r=t.isNullOrUndefined(s)?"":e(s)[0].id,a={text:n,element:s,event:i,selectedItem:this.selectedItem,ID:r,parentId:parentId,parentText:parentText},this._trigger("click",e.extend({events:a},a)),this.selectedItem=null,this.model.openOnClick&&"contextmenu"!=this.model.menuType&&this.element.focus())):e(i.target).is(this.element)&&(this._activeElement=this.element.find(">li:first"))},_onKeyDownHandler:function(i){var s,l,n;if("contextmenu"!=this.model.menuType||this._isContextMenuOpen){var o,a,r,d="",h=this.element.find(".e-mhover"),c=this.element.find(".e-mfocused");if(!e(h).length>0&&e(this._activeElement).length>0&&(h=c=e(this._activeElement)),9==i.keyCode?(this._isFocused=!1,this._OnFocusOutHandler()):(37==i.keyCode||38==i.keyCode||39==i.keyCode||40==i.keyCode)&&i.preventDefault(),40==i.keyCode&&("horizontal"==this.model.orientation?this.element.find(">li.e-mhover").children("ul").length>0||e(this._activeElement).length>0?("none"===e(h).children("ul").css("display")&&this._show(h[h.length-1],this._showAnim,this._hideAnim),h.removeClass("e-mhover e-mfocused").children("ul:first").find("li:first").addClass("e-mhover"),null==this._activeElement?h.addClass("e-mfocused"):e(this._activeElement).addClass("e-mfocused")):(liVisible=h.parent().children("li.e-list:visible:not(.e-hidden-item, .e-disable-item)"),e(h[h.length-1]).removeClass("e-mfocused e-mhover"),(a=e(liVisible[liVisible.index(h)+1]).length>0?e(liVisible[liVisible.index(h[h.length-1])+1]):liVisible.first()).addClass("e-mhover")):"horizontal"!=this.model.orientation&&(liVisible=0==h.length?this.element.children("li.e-list:visible:not(.e-hidden-item, .e-disable-item)"):h.parent().children("li.e-list:visible:not(.e-hidden-item, .e-disable-item)"),h.removeClass("e-mfocused e-mfocused"),h.length>0?(h.removeClass("e-mhover"),a=e(liVisible[liVisible.index(h[h.length-1])+1]).length>0?e(liVisible[liVisible.index(h[h.length-1])+1]):liVisible.first()):a=liVisible.first(),a.addClass("e-mhover"))),39==i.keyCode&&("horizontal"==this.model.orientation&&(this.element.find(">li.e-list").hasClass("e-mhover")||e(this._activeElement).length>0)?(h.removeClass("e-mfocused e-mhover"),liVisible=this.element.children("li.e-list:visible:not(.e-hidden-item, .e-disable-item)"),(a=e(liVisible[liVisible.index(h[h.length-1])+1]).length>0?e(liVisible[liVisible.index(h[h.length-1])+1]):liVisible.first()).addClass("e-mhover")):e(h).children("ul").length>0?(h.removeClass("e-mfocused e-mhover"),s=h.children("ul:first").find("li:first"),this._show(h[h.length-1],this._showAnim,this._hideAnim),liVisible=h.addClass("e-mfocused").children("ul:first").children("li.e-list:visible:not(.e-hidden-item, .e-disable-item)"),(a=e(liVisible[liVisible.index(s)]).length>0?e(liVisible[liVisible.index(s)]):liVisible.first()).addClass("e-mhover")):h.children("ul").length<=0&&"horizontal"==this.model.orientation&&h.parent().closest(".e-list").parent().hasClass("e-menu")&&(this._hideAnimation(h.parent(),this._hideAnim),h.removeClass("e-mfocused e-mhover"),e(c[c.length-1]).removeClass("e-mfocused"),liVisible=h.parent().closest(".e-list").parent().children("li.e-list:visible:not(.e-hidden-item, .e-disable-item)"),(a=e(liVisible[liVisible.index(c[c.length-1])+1]).length>0?e(liVisible[liVisible.index(c[c.length-1])+1]):e(liVisible[liVisible.index(c.first())])).addClass("e-mhover"))),38==i.keyCode&&("horizontal"==this.model.orientation?(liVisible=h.parent().children("li.e-list:visible:not(.e-hidden-item, .e-disable-item)"),h.removeClass("e-mfocused e-mhover"),a=e(liVisible[liVisible.index(h[h.length-1])-1]).length>0?e(liVisible[liVisible.index(h[h.length-1])-1]):liVisible.last()):"horizontal"!=this.model.orientation&&(liVisible=0==h.length?this.element.children("li.e-list:visible:not(.e-hidden-item, .e-disable-item)"):h.parent().children("li.e-list:visible:not(.e-hidden-item, .e-disable-item)"),h.length>0?(h.removeClass("e-mfocused e-mhover"),a=e(liVisible[liVisible.index(h[h.length-1])-1]).length>0?e(liVisible[liVisible.index(h[h.length-1])-1]):liVisible.last()):a=liVisible.last()),a.addClass("e-mhover")),37==i.keyCode&&("horizontal"==this.model.orientation?this.element.find(">li.e-list").hasClass("e-mhover")||e(this._activeElement).length>0?(h.removeClass("e-mfocused e-mhover"),liVisible=this.element.find("li.e-list:visible:not(.e-hidden-item, .e-disable-item)"),(a=e(liVisible[liVisible.index(h[h.length-1])-1]).length>0?e(liVisible[liVisible.index(h[h.length-1])-1]):liVisible.last()).addClass("e-mhover")):(this._hideAnimation(h.parent(),this._hideAnim),h.removeClass("e-mfocused e-mhover"),e(c[c.length-1]).removeClass("e-mfocused e-active"),liVisible=h.parent().closest(".e-list").parent().children("li.e-list:visible:not(.e-hidden-item, .e-disable-item)"),(a=h.parent().closest(".e-list").parent(".e-menu").length>0?e(liVisible[liVisible.index(c[c.length-1])-1]).length>0?e(liVisible[liVisible.index(c[c.length-1])-1]):liVisible.last():e(liVisible[liVisible.index(c[c.length-1])]).length>0?e(liVisible[liVisible.index(c[c.length-1])]):liVisible.last()).addClass("e-mhover")):(0==h.parent("ul.e-menu").length||"contextmenu"==this.model.menuType&&0==h.parent("ul.e-context").length)&&(this._hideAnimation(h.parent(),this._hideAnim),h.removeClass("e-mfocused e-mhover"),e(c[c.length-1]).removeClass("e-mfocused"),liVisible=h.parent().closest(".e-list").parent().children("li.e-list:visible:not(.e-hidden-item, .e-disable-item)"),(a=e(liVisible[liVisible.index(c[c.length-1])]).length>0?e(liVisible[liVisible.index(c[c.length-1])]):e(liVisible[liVisible.index(c.last())])).addClass("e-mhover"))),13==i.keyCode&&(l=e(h).children("a,span").text(),d=t.isNullOrUndefined(e(h)[0])?"":e(h)[0].id,n={menuId:this.element[0].id,text:l,selectedItem:c,ID:d},"contextmenu"==this.model.menuType?this._isContextMenuOpen&&h.length>0&&!c.hasClass("e-disable-item")&&(this.model.click&&this._trigger("click",e.extend({events:n},n)),this.selectedItem=null,this.hideContextMenu(i)):h.length>0&&!h.hasClass("e-disable-item")&&(e(h).find(">a,>span").hasClass("aschild")&&"none"===e(h).children("ul").css("display")?(this._show(h[0],this._showAnim,this._hideAnim),h.removeClass("e-mhover").children("ul:first").find("li:first").addClass("e-mhover")):(this.element.find(".e-mhover >a,.e-mhover >span ").focus(),this.element.find("li.e-list").removeClass("e-mhover e-mfocused"),this._closeAll()),t.isNullOrUndefined(e(h).find(">a").attr("href"))&&this._trigger("click",e.extend({events:n},n)))),27==i.keyCode&&("contextmenu"==this.model.menuType?this.hideContextMenu(i):this.element.find("li.e-list").removeClass("e-mhover"),this.element.find('li.e-list:has("> ul")').find("> ul:visible").parents("li.e-list").addClass("e-mhover"),this._closeAll()),!e(i.target).is(this.element)||!i.target.parentNode)return!1;h.length&&(o=h),e.inArray(o,this._disabledMenuItems)>-1||(l=e(o).children("a,span").text(),d=t.isNullOrUndefined(o)?"":e(o)[0].id,(this.element.find("li.e-mfocused.e-mhover").length||13==i.keyCode)&&(r=13==i.keyCode?h:this.element.find("li.e-mfocused.e-mhover")),n={text:l,element:o,targetElement:r,event:i,ID:d},this._trigger("keydown",e.extend({events:n},n))),this._activeElement=null,c=this.element.find(".e-mfocused")}},_OnFocusHandler:function(){"contextmenu"!=this.model.menuType&&!this.element.find(">li:first").hasClass("e-disable-item")&&this._isFocused&&0==this.element.find(".e-mhover").length?this.element.find(">li:first").addClass("e-mhover"):this._isFocused=!0,"contextmenu"!=this.model.menuType&&(this._activeElement=this.element.find(">li:first"))},_OnFocusOutHandler:function(){this._isFocused||(this.element.find("li.e-list").removeClass("e-mhover e-mfocused"),this._closeAll()),this._isFocused=!1},_onDocumentClick:function(t){this.model.openOnClick&&(this._hoverOpen=!1),e(t.target).parents("ul.e-menu").is(this.element)||(this.element.find("li.e-list").removeClass("e-mhover e-mfocused"),this._closeAll(),this._isFocused=!0)},_ContextMenuHandler:function(e){var t,i,s,l,n=!1;"taphold"==e.type?n=!0:e.button?n=2==e.button:e.which&&(n=3==e.which),t=e.target,n?(i=e,"taphold"==e.type&&(i="touchstart"==e.options.type?e.options.touches[0]:e.options),this._showSpeed,this.showContextMenu(null,null,t,i,!0)):this._isContextMenuOpen&&(s=this._hideAnim,l=this._hideSpeed,this.hideContextMenu(e,s,l))},_calculateContextMenuPosition:function(t){locationX=t.clientX+this.element.width()<e(window).width()?t.pageX:t.pageX-this.element.width(),locationY=t.clientY+this.element.height()<e(window).height()?t.pageY:t.clientY>this.element.height()?t.pageY-this.element.height():e(window).height()-this.element.outerHeight();var i="static"!=e("body").css("position")?e("body").offset():{left:0,top:0};return locationX-=i.left,locationY-=i.top,{X:locationX,Y:locationY}},_onDefaultPreventer:function(e){return e.preventDefault(),e.stopPropagation(),!1},_onContextClose:function(t){var i,s,l,n,o=this;this._isContextMenuOpen&&(i=!1,(e(t.target).is(this.element)||e(t.target).parents(".e-context").is(this.element))&&(i=!0),i||(s=this._hideAnim,l=this._hideSpeed,this.hideContextMenu(t,s,l),n=e(t.target).parents(),e.each(n,function(e,t){t.id,o._ContextTargetId})))}}),t.MenuType={NormalMenu:"normalmenu",ContextMenu:"contextmenu"},t.Direction={Left:"left",Right:"right",None:"none"},t.AnimationType={None:"none",Default:"default"}}),
/*!
*  filename: ej.treeview.min.js
*  version : 14.4.0.15
*  Copyright Syncfusion Inc. 2001 - 2016. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
function(e){"function"==typeof define&&define.amd?define(["./../common/ej.core.min","./../common/ej.data.min","./../common/ej.draggable.min","./ej.checkbox.min","./ej.waitingpopup.min"],e):e()}(function(){var e,t,s;e=jQuery,(t=Syncfusion).widget("ejTreeView","ej.TreeView",{_rootCSS:"e-treeview",element:null,model:null,validTags:["ul","div"],_addToPersist:["expandedNodes","checkedNodes","selectedNodes"],_setFirst:!1,_requiresID:!0,defaults:{allowMultiSelection:!1,showCheckbox:!1,enableAnimation:!0,allowDragAndDrop:!1,htmlAttributes:{},allowDropChild:!0,allowDropSibling:!0,allowDragAndDropAcrossControl:!0,allowEditing:!1,allowKeyboardNavigation:!0,items:null,fields:{dataSource:null,query:null,tableName:null,child:null,id:"id",parentId:"parentId",text:"text",spriteCssClass:"spriteCssClass",expanded:"expanded",hasChild:"hasChild",selected:"selected",linkAttribute:"linkAttribute",imageAttribute:"imageAttribute",htmlAttribute:"htmlAttribute",imageUrl:"imageUrl",isChecked:"isChecked"},autoCheckParentNode:!1,loadOnDemand:!1,cssClass:"",template:null,enableRTL:!1,expandOn:"dblclick",enablePersistence:!1,enabled:!0,expandedNodes:[],checkedNodes:[],selectedNode:-1,selectedNodes:[],width:null,height:null,autoCheck:!0,enableMultipleExpand:!0,fullRowSelect:!1,sortSettings:{allowSorting:!1,sortOrder:"ascending"},nodeClick:null,beforeExpand:null,nodeExpand:null,beforeCollapse:null,nodeCollapse:null,beforeSelect:null,nodeSelect:null,nodeUnselect:null,nodeCheck:null,nodeUncheck:null,inlineEditValidation:null,beforeEdit:null,nodeEdit:null,keyPress:null,nodeDragStart:null,nodeDrag:null,nodeDragStop:null,nodeDropped:null,beforeAdd:null,nodeAdd:null,beforeDelete:null,nodeDelete:null,beforeCut:null,nodeCut:null,beforePaste:null,nodePaste:null,beforeLoad:null,loadSuccess:null,loadError:null,ready:null,create:null,destroy:null},dataTypes:{allowMultiSelection:"boolean",cssClass:"string",showCheckbox:"boolean",enableAnimation:"boolean",allowDragAndDrop:"boolean",allowDropChild:"boolean",allowDragAndDropAcrossControl:"boolean",allowEditing:"boolean",allowKeyboardNavigation:"boolean",autoCheckParentNode:"boolean",loadOnDemand:"boolean",enableRTL:"boolean",expandOn:"string",enablePersistence:"boolean",enableMultipleExpand:"boolean",fullRowSelect:"boolean",items:"data",fields:{dataSource:"data",query:"data",child:"data"},expandedNodes:"array",checkedNodes:"array",selectedNode:"number",selectedNodes:"array",htmlAttributes:"data",sortSettings:{allowSorting:"boolean",sortOrder:"enum"}},observables:["fields.dataSource"],dataSource:t.util.valueFunction("fields.dataSource"),_setModel:function(i){var s,l,n,o,a,r,d,h;for(s in i)switch(s){case"allowMultiSelection":this.model.allowMultiSelection=i[s],this.model.allowMultiSelection||(l=e(this._liList[this.model.selectedNodes[0]]),this._unselectAll(),this._isRender=!1,this._nodeSelectionAction(l),this._isRender=!0);break;case"cssClass":this._changeSkin(i[s]);break;case"fields":this._unWireEvents(),(a=(o=!this.element.hasClass("e-js"))?this.element.children("ul"):this.element).empty(),null==this.model.fields||null==i[s]?this.model.fields=i[s]:this._extendFields(this.model.fields,i[s]),this.model.expandedNodes=[],this.model.checkedNodes=[],this.model.selectedNodes=[],this._persistValues(this.model.expandedNodes,"expandedNodes"),this._persistValues(this.model.checkedNodes,"checkedNodes"),this._persistValues(this.model.selectedNodes,"selectedNodes"),t.isNullOrUndefined(this.model.fields)||null==this.dataSource()?this._initialize():this._checkDataBinding(),o&&(n=this.element.children(".e-treeview-ul"),a.append(n.children()),n.remove());break;case"allowDragAndDropAcrossControl":this.model.allowDragAndDropAcrossControl=i[s],this._enableDragDrop();break;case"enabled":this._enabledAction(i[s]);break;case"showCheckbox":i[s]?(this.model.showCheckbox=i[s],this._showCheckBox(),this.model.enabled||this.element.find(".nodecheckbox").ejCheckBox("disable")):(this.element.find(".e-item > div > .e-chkbox-wrap").remove(),this._updateCheckedNodes());break;case"autoCheck":this.model.autoCheck=i[s];break;case"autoCheckParentNode":this.model.autoCheckParentNode=i[s];break;case"expandedNodes":if(h=i[s].length,r=JSON.parse(JSON.stringify(this.model.expandedNodes)),h>0)for(this._expandNodes(i[s]),d=0,h=r.length;d<h;d++)-1==i[s].indexOf(r[d])&&this._collpaseNode(e(this._liList[r[d]]));else 0==h&&this._collapseAll();i[s]=this.model.expandedNodes;break;case"checkedNodes":if(this.model.showCheckbox)if(h=i[s].length,r=JSON.parse(JSON.stringify(this.model.checkedNodes)),h>0)for(this._checkedNodes(i[s]),d=0,h=r.length;d<h;d++)-1==i[s].indexOf(r[d])&&this._nodeUncheck(e(this._liList[r[d]]).find("> div > .e-chkbox-wrap > .nodecheckbox:first")[0]);else 0==h&&this._uncheckAll();i[s]=this.model.checkedNodes;break;case"expandOn":this._off(this.element,this._isDevice&&e.isFunction(e.fn.tap)?this._touchExpandOn:this.model.expandOn,this._expandEventHandler),this._assignTouchExpandOn(i[s]),this._on(this.element,this._isDevice&&e.isFunction(e.fn.tap)?this._touchExpandOn:i[s],this._expandEventHandler);break;case"allowEditing":this._preventEditable(),i[s]&&this._allowEditable();break;case"allowKeyboardNavigation":this[i[s]?"_on":"_off"](this.element,"keydown",this._KeyPress);break;case"allowDragAndDrop":this.model.allowDragAndDrop=i[s],i[s]?this._addDragableClass():this._preventDraggable();break;case"allowDropChild":this.model.allowDropChild=i[s],i[s]?this._addDragableClass():this._preventDropChild();break;case"allowDropSibling":this.model.allowDropSibling=i[s],i[s]?this._addDragableClass():this._preventDropSibling();break;case"enableRTL":this.model.enableRTL=i[s],(this.element.is("UL")?this.element.parent(".e-treeview-wrap"):this.element)[this.model.enableRTL?"addClass":"removeClass"]("e-rtl");break;case"height":this.element.is("ul")?this.element.parent().height(i[s]):this.element.height(i[s]);break;case"width":this.element.is("ul")?this.element.parent().width(i[s]):this.element.width(i[s]);break;case"selectedNode":case"selectedNodes":this.model.selectedNodes="selectedNode"==s?[i[s]]:i[s],this.element.find("a.e-text.e-active").removeClass("e-node-focus e-active").closest("li").attr("aria-selected",!1),this._doSelectNodes(this.model.selectedNodes,!1),"selectedNode"!=s&&(i[s]=this.model.selectedNodes);break;case"htmlAttributes":this._addAttr(i[s]);break;case"enableMultipleExpand":i[s]||this.collapseAll(),this.model.enableMultipleExpand=i[s];break;case"sortSettings":e.extend(this.model.sortSettings,i[s]),t.isNullOrUndefined(this.model.fields)||null==this.dataSource()||(this.model.expandedNodes=[],this.model.checkedNodes=[],this.model.selectedNodes=[],this._checkDataBinding());break;case"fullRowSelect":this._wholeRowEvents("_off"),this.model.fullRowSelect=i[s],this.model.fullRowSelect?this._addWholeRowWrap():this._removeWholeRowWrap(),this._doWholeRowAction(),this._wholeRowEvents("_on")}},_destroy:function(){this.element.html(""),this._cloneElement.removeClass("e-treeview e-js e-treeview-wrap"),(this.element.is("UL")?this.element.parent(".e-treeview-wrap"):this.element).replaceWith(this._cloneElement),e("#"+this._id+"_WaitingPopup").remove(),window.localStorage?(window.localStorage.removeItem(this._id+"_childNodes"),window.localStorage.removeItem(this._id+"_persistedValues")):window.cookie&&(document.cookie=this._id+"_childNodes=; expires=Thu, 01 Jan 1970 00:00:00 UTC",document.cookie=this._id+"_persistedValues=; expires=Thu, 01 Jan 1970 00:00:00 UTC")},_init:function(){var e;this._cloneElement=this.element.clone(),this._dataSource=[],this._fragment=[],this._templateType="",this._indexID=0,this._newDataSource=this.dataSource(),this._id=this.element.prop("id"),this._treeList=[],this._isTextbox=!1,this._isDevice=this._checkDevice(),this._assignTouchExpandOn(this.model.expandOn),this.model.enablePersistence&&(this._getCookies("_persistedValues")||(e={selectedNodes:[],expandedNodes:[],checkedNodes:[]},e=this._updatePersistAttr(e),this._setCookies("_persistedValues",JSON.stringify(e)))),t.isNullOrUndefined(this.model.fields)||null==this.dataSource()?(this._initialize(),this._completeRendering()):this._checkDataBinding()},_initialize:function(){this._cutNode=null,this._beforeEditText=null,this._CurrenctSelectedNodes=[],this._isLoaded=!1,this._renderMultiTouchDialog(),this.element.is("ul")?this._createWrapper():(this.element.addClass("e-treeview-wrap e-widget").attr("tabindex",0).children("ul:first").addClass("e-ul e-box"),null!=this.model.width&&this.element.width(this.model.width),null!=this.model.height&&this.element.height(this.model.height),this.model.enableRTL&&this.element.addClass("e-rtl"),null!=this.model.cssClass&&this.element.addClass(this.model.cssClass),this._addAttr(this.model.htmlAttributes)),this._elementSettings(),this._beforeBaseClass(),null==this.dataSource()&&(this._addBaseClass(),this._controlRender()),this._addWholeRowWrap(),this._finalize()},_completeRendering:function(){0!=this._treeList.length||this._isLoaded||(this._finalizeNode(),this._enabledAction(this.model.enabled),this._triggerEvent("ready",{element:this.element[0]}),this._isLoaded=!0)},_addWholeRowWrap:function(){this.model.fullRowSelect&&(this.element.is("UL")?this.element.parent(".e-treeview-wrap").addClass("e-fullrow-wrap"):this.element.addClass("e-fullrow-wrap"))},_removeWholeRowWrap:function(){this.element.is("UL")?this.element.parent(".e-treeview-wrap").removeClass("e-fullrow-wrap"):this.element.removeClass("e-fullrow-wrap")},_doWholeRowAction:function(){var t,i,s,l;if(this.model.fullRowSelect)for(t=0,i=this._liList.length;t<i;t++)null!=(s=e(this._liList[t]))[0]&&(l=s.find("> .e-text-wrap"),this._renderWholeRow(s,l));else this.element.find(".e-fullrow").remove()},_renderWholeRow:function(t,i){if(t&&this.model.fullRowSelect){var s=document.createElement("div");s.setAttribute("class","e-fullrow"),i?e(s).insertAfter(i):t[0].appendChild(s)}},_extendFields:function(t,i){if(null==t||null==i)t=i;else if(null==t.child||null==i.child)e.extend(t,i);else{this._extendFields(t.child,i.child);var s=t.child;e.extend(t,i),e.extend(t.child,s)}},_checkDevice:function(){return t.isDevice()&&t.isTouchDevice()},_assignTouchExpandOn:function(e){this._touchExpandOn="dblclick"==e?"doubletap":"click"==e?"tap":e},_renderMultiTouchDialog:function(){var i,s,l;this._customPop=t.buildTag("div.e-fe-popup","",{display:"none"}),i=t.buildTag("div.e-content"),s=t.buildTag("div.e-downtail e-tail"),this.model.allowMultiSelection&&(l=t.buildTag("span.e-rowselect e-icon"),i.append(l)),this._customPop.append(i),this._customPop.append(s),this.element.append(this._customPop),this._on(i,this._isDevice&&e.isFunction(e.fn.tap)?"touchstart":"mousedown",this._popupClick)},_popupClick:function(){var e=this._customPop.find(".e-rowselect");e.hasClass("e-spanclicked")?this._hidePopup():(this._isPopup=!0,e.addClass("e-spanclicked"))},_hidePopup:function(){null!=this._customPop&&this._customPop.is(":visible")&&(this._customPop.find(".e-rowselect").removeClass("e-spanclicked"),this._customPop.hide(),this._isPopup=!1)},_elementSettings:function(){var e=this.element.is("UL")?this.element.parent(".e-treeview-wrap"):this.element;this.element.is("ul")?e.attr("role","tree"):e.attr("aria-activedescendant",this._id+"_active").children("ul:first").attr("role","tree")},_beforeBaseClass:function(){var t=this.element.is("UL")?this.element.parent(".e-treeview-wrap")[0]:this.element[0];this._ulList=e(t.querySelectorAll("ul")),this._liList=e(t.querySelectorAll("li"))},_createWrapper:function(){var e=t.buildTag("div.e-treeview-wrap e-widget "+this.model.cssClass,"","",{tabindex:0,"aria-activedescendant":this._id+"_active"});null!=this.model.width&&e.width(this.model.width),null!=this.model.height&&e.height(this.model.height),this.model.enableRTL&&e.addClass("e-rtl"),e.insertAfter(this.element),e.append(this.element.addClass("e-ul e-box").attr("tabindex",0)),this._addAttr(this.model.htmlAttributes)},_addAttr:function(t){var i=this;e.map(t,function(e,t){"class"==t?i.element.addClass(e):"disabled"==t&&"disabled"==e?i._enabledAction(!1):i.element.attr(t,e)})},_changeSkin:function(e){if(this.model.cssClass!=e){var t=this.element.is("UL")?this.element.parent(".e-treeview-wrap"):this.element;t.removeClass(this.model.cssClass).addClass(e),t.find(".e-item > div > .e-chkbox-wrap").removeClass(this.model.cssClass).addClass(e),this._waitingPopup&&this._waitingPopup.option("cssClass",e)}},_enabledAction:function(e){this.model.enabled=e,e?(this.element.removeClass("e-disable"),this._wireEvents()):(this.element.addClass("e-disable"),this._unWireEvents())},_checkDataBinding:function(){this.dataSource()instanceof t.DataManager?this._initDataSource():(this._ensureDataSource(this.dataSource()),this._initialize(),this._completeRendering())},_initDataSource:function(){this.element.ejWaitingPopup({cssClass:this.model.cssClass}),this._waitingPopup=this.element.ejWaitingPopup("instance"),this._waitingPopup.maindiv.addClass("e-tree-popup");var e,i=this;this.element.ejWaitingPopup("refresh"),this.element.ejWaitingPopup("show"),e=this._columnToSelect(this.model.fields),this.dataSource().executeQuery(e).done(function(e){i.element.ejWaitingPopup("hide"),i.retriveData=e.xhr&&e.xhr.responseJSON&&e.xhr.responseJSON.d?e.xhr.responseJSON.d:e.result?e.result:[],i._typeOfFieldId=i.retriveData[0]?(typeof i.retriveData[0][i.model.fields.id]).toLowerCase():"",i._ensureDataSource(i.retriveData),i._initialize(),(i.model.loadOnDemand||t.isNullOrUndefined(i.model.fields.child))&&i._completeRendering()})},_columnToSelect:function(e){var i,s=[],l=t.Query();if(e.query||t.isNullOrUndefined(e.tableName))l=e.query?e.query:l;else{for(i in e)"tableName"!==i&&"child"!==i&&"dataSource"!==i&&e[i]&&s.push(e[i]);s.length>0&&l.select(s),this.dataSource().dataSource.url.match(e.tableName+"$")||t.isNullOrUndefined(e.tableName)||l.from(e.tableName)}return l},_ensureDataSource:function(e){e=this._getSortAndFilterList(this.model.fields,e),this.currentSelectedData=e,this._renderTemplate(e),this.element.is("ul")?this.element.html(this._fragment.firstChild.children):this.element.html(this._fragment)},_getTemplateType:function(e,t){for(var i=0,s=e.length;i<s;i++){if(e[i].hasOwnProperty(t.parentId)||e[i].hasOwnProperty(t.hasChild))return 1;if(e[i].hasOwnProperty("child"))return 2}return 1},_groupingObjects:function(e,t){for(var i,s={},l=[],n=0,o=e.length;n<o;n++)s[i=JSON.stringify(t(e[n]))]=s[i]||[],s[i].push(e[n]);for(n in s)l.push(s[n]);return l},_renderTemplate:function(e){this._onlineData=!1,this._loadOnDemandNodes=!1;var i=this;this._templateType=this._getTemplateType(e,this.model.fields),this._dataSource=1==this._templateType?this._groupingObjects(e,function(e){return[!t.isNullOrUndefined(e)&&[e[i.model.fields.parentId]].toString()]}):e,this._templateNodeCreation(e,this.model.fields)},_templateNodeCreation:function(i,s){var l,n,o,a;if(this._fragment=document.createDocumentFragment(),l=document.createElement("ul"),this._fragment.appendChild(l),n=this._fragment.firstChild,(this._onlineData||this._loadOnDemandNodes)&&(n.className="e-treeview-ul",n.setAttribute("role","group"),e(n).attr("style","display:none")),null!=this.dataSource()){for(o=0,a=i.length;o<a;o++)i[o]&&(t.isNullOrUndefined(i[o][this.model.fields.parentId])||0==i[o][this.model.fields.parentId]||this._loadOnDemandNodes)&&n.appendChild(this._genTemplate(i[o],s));e(n).find(".e-item:first-child:not(:last-child)").addClass("first"),e(n).find(".e-item:last-child").addClass("last")}},_onlineDataSource:function(t,i,s){this._loadOnDemandNodes=!0,this._templateNodeCreation(t,s);var l=this.element.find(".e-item#"+i);null!=l[0]&&(e(l[0]).append(this._fragment),l.children().find("> div:first").addClass("e-icon e-plus"),this._finalizeLoadOnDemand(l)),this._onlineData=!1},_genTemplate:function(i,s){var l,n,o,a,r,d,h,c,u,m,p,g,f=document.createDocumentFragment();if(n=document.createElement("li"),f.appendChild(n),(l=f.firstChild).id=i[s.id]?i[s.id]:"",l.setAttribute("role","treeitem"),i[s.htmlAttribute]&&this._setAttributes(i[s.htmlAttribute],l),l.className+=" e-item",a=document.createElement("a"),i[s.imageUrl]?((o=document.createElement("img")).className="e-align",o.src=i[s.imageUrl],i[s.imageAttribute]&&this._setAttributes(i[s.imageAttribute],o)):i[s.spriteCssClass]&&((o=document.createElement("span")).className=i[s.spriteCssClass]),this.model.template){if(o&&a.appendChild(o),"function"!=typeof e.fn.render)throw"Error : JsRender dependecy script missing";a.innerHTML+=this._renderEjTemplate(this.model.template,i)}else i[s.text]?e(a).text(i[s.text]):e(a).text("undefined"),o&&a.insertBefore(o,a.lastChild);if(i[s.linkAttribute]&&("object"==typeof i[s.linkAttribute]?this._setAttributes(i[s.linkAttribute],a):a.href=i[s.linkAttribute]),l.appendChild(a),i[s.expanded]&&(l.className+=" expanded"),i[s.selected]&&(l.className+=" selected"),t.isNullOrUndefined(i[s.isChecked])||(l.className+=i[s.isChecked]?" checked":" unchecked"),l.setAttribute("aria-selected",!1),l.setAttribute("aria-expanded",!1),this.dataSource()instanceof t.DataManager)this._updateElement(l,!0),this.model.showCheckbox&&this._checkboxOnTemplate(l.children[0]),this.model.loadOnDemand?(i[s.hasChild]||i.hasOwnProperty("child"))&&(l.children[0].firstChild.className="e-icon e-plus"):!t.isNullOrUndefined(s.child)&&s.child.dataSource instanceof t.DataManager?(d=this,h=s.child.parentId?s.child.parentId:d.model.fields.parentId,c=s.id?s.id:this.model.fields.id,this._treeList.push("false"),this._executeDataQuery(s.child,h,"number"==this._typeOfFieldId?parseInt(i[c]):i[c]).done(function(e){d._treeList.pop(),r=e.xhr&&e.xhr.responseJSON&&e.xhr.responseJSON.d?e.xhr.responseJSON.d:e.result?e.result:[],(r=d._getSortAndFilterList(s.child,r))&&r.length>0&&(d._onlineData=!0,d._onlineDataSource(r,r[0][s.child.parentId],s.child)),0==d._treeList.length&&d._completeRendering()})):t.isNullOrUndefined(this.model.fields.child)&&this._childNodeCreation(i,l,s);else if(this.model.loadOnDemand){if(this._updateElement(l,!0),(i[s.hasChild]||i.hasOwnProperty("child"))&&(l.children[0].firstChild.className="e-icon e-plus"),this.model.showCheckbox&&this._checkboxOnTemplate(l.children[0]),i[s.expanded]&&this._childNodeCreation(i,l,s),this.model.enablePersistence&&(u=this._getCookies("_childNodes")))for(p=0,g=(m=JSON.parse(u)).length;p<g;p++)if(m[p].toString()==i[s.id].toString()){this._childNodeCreation(i,l,s);break}}else this._onlineData||(this._updateElement(l,!0),this.model.showCheckbox&&this._checkboxOnTemplate(l.children[0]),this._childNodeCreation(i,l,s));return l},_childNodeCreation:function(i,s,l){var n,o,a,r,d,h;if(n=2==this._templateType?!t.isNullOrUndefined(i.child)&&i.child.length>0&&i.child:this._getChildNodes(this._dataSource,{id:i[l.id]}),!t.isNullOrUndefined(n)&&n.length>0){for(s.children[0].firstChild.className="e-icon e-plus",o=document.createDocumentFragment(),a=document.createElement("ul"),o.appendChild(a),(r=o.firstChild).className="e-treeview-ul",r.setAttribute("role","group"),e(r).attr("style","display:none"),d=0,h=n.length;d<h;d++)n[d]&&r.appendChild(this._genTemplate(n[d],l));s.appendChild(a)}},_checkboxOnTemplate:function(e){""==e.parentElement.id&&(e.parentElement.id=this._id+"_"+this._indexID,this._indexID++);var t=document.createElement("input");t.setAttribute("type","checkbox"),t.setAttribute("class","nodecheckbox"),t.setAttribute("name",this._id+"_Checkbox_"+e.parentElement.id),t.setAttribute("value",e.parentElement.id),e.insertBefore(t,e.children[1])},_updateElement:function(t,i){var l,n,o,a,r,d,h,c=t.firstChild;c&&("SPAN"==(r=c.nodeName)||"IMG"==r?(a=c,o=t.lastChild):o=t.lastChild,o&&(h=null!=o.lastChild?o.lastChild.nodeValue:"",d=e.trim(o.innerHTML),textElement=e(o).clone()[0],e(o).remove(),textElement.className+=" e-text CanSelect",textElement.innerHTML=d,t.innerHTML=""),(l=document.createElement("div")).setAttribute("class","e-text-wrap"),l.setAttribute("role","presentation"),i&&((n=document.createElement("div")).setAttribute("role","presentation"),l.appendChild(n)),a&&l.appendChild(a),l.appendChild(textElement),e(t).prop("name")==s&&e(t).prop("name",e.trim(h)),t.appendChild(l),this._renderWholeRow(e(t)))},_setAttributes:function(t,i){for(var s in t)e(i).attr(s,t[s])},_addDragableClass:function(){this.model.allowDragAndDrop&&(this._anchors=this._liList.map(function(){return e("a.e-text",this)[0]}),this._anchors.addClass("e-draggable e-droppable"),this._enableDragDrop(),this._on(this.element,"mouseup touchstart pointerdown MSPointerDown",this._anchors,this._focusElement))},_addBaseClass:function(){this._ulList.addClass("e-treeview-ul").attr("role","group"),this._liList.addClass("e-item").attr("role","treeitem"),this.element.is("ul")||this.element.find("ul:first").removeClass("e-treeview-ul").addClass("e-ul")},_controlRender:function(){var i,l,n,o,a,r,d,h,c,u,m,p=this.element;if(null!=p){for(i=p.find(".e-item"),l=0;l<i.length;l++)(d=(n=e(i[l])).children("ul")[0])&&e(n.children("ul")[0]).remove(),(h=n.children("a")[0])?(r=e.trim(e(h).text()),o=e(h).clone(),e(h).remove(),a=n.clone(),e(o).prepend(a.children()),e(o).addClass("e-text CanSelect"),n.html("")):(r=e.trim(this._getText(n)),a=n.clone(),n.html(""),(o=t.buildTag("a.e-text CanSelect","","",{alt:""})).append(a.children()),o[0].innerHTML+=r),c=t.buildTag("div","",{},{role:"presentation"}),u=t.buildTag("div.e-text-wrap","",{},{role:"presentation"}),e(u).append(c).append(o),n.prepend(u),this._renderWholeRow(n),d&&n.append(d),n.prop("name")==s&&n.prop("name",r),this.model.showCheckbox&&this._checkboxOnTemplate(i[l].children[0]);this.model.showCheckbox&&p.find(".nodecheckbox").ejCheckBox({cssClass:this.model.cssClass,change:this._checkedChange})}(m=p.find(".e-item")).find(">ul").hide(),m.find(".e-text").focus(function(){e(this).blur()}),m.filter(".e-item:last-child").addClass("last"),e(m[0]).addClass("first"),e(m[0]).hasClass("first")&&e(m[0]).hasClass("last")&&e(m[0]).removeClass("first"),e(m.filter(":has(ul)")).each(function(){e(this).attr("aria-expanded",!1).attr("aria-selected",!1);var t=e(this).children("ul:first");e(t).is(":hidden")?e(this).find("> div > div:first").removeClass("e-icon e-minus").addClass("e-icon e-plus"):e(this.childNodes[1]).removeClass("e-icon e-plus").addClass("e-icon e-minus")})},_getText:function(t){return e(t).clone().children().remove().end().text()},_expandNodes:function(i){for(var s=i.length,l=[],n=0;n<s;n++)l=e(this._liList[i[n]]),!this.model.enableMultipleExpand&&l.siblings().find(">div>.e-minus").closest(".e-item").length>0||this.isExpanded(l)||(!this.model.loadOnDemand||this.dataSource()instanceof t.DataManager?this._expandNode(l):this._createChildNodesWhenExpand(l))},_checkedNodes:function(t){var i,s,l;for(t.length>0&&this._removeField(this._newDataSource,this.model.fields.isChecked),s=0,l=t.length;s<l;s++)null!=(i=e(this._liList[t[s]]))[0]&&this._nodeCheck(i.find("> div > .e-chkbox-wrap > .nodecheckbox:first")[0])},_finalize:function(){this.model.showCheckbox&&this.element.find(".e-item > div .nodecheckbox").ejCheckBox({cssClass:this.model.cssClass,change:this._checkedChange}),this.model.allowEditing&&this._allowEditable()},_finalizeNode:function(){var i,s,l,n,o;this._isRender=!1;var a,r,d=this.element,h=this._getCookies("_persistedValues"),c=[],u=[];if(!(this.model.expandedNodes instanceof Array&&this.model.expandedNodes.length>0))for(l=(a=d.find("li.expanded")).length,s=0;s<l;s++)i=e(a[s]),!this.model.enableMultipleExpand&&i.siblings().find(">div>.e-minus").closest(".e-item").length>0||this._expandNode(i);if(h&&(c=JSON.parse(h).expandedNodes,u=[]),c&&c.length>0&&!t.isNullOrUndefined(this.model.fields)&&null!=this.dataSource()){for(s=0,l=c.length;s<l;s++)if(null!=(u=this.element.find(".e-item#"+c[s]))[0]){if(!this.model.enableMultipleExpand&&u.siblings().find(">div>.e-minus").closest(".e-item").length>0)continue;!this.model.loadOnDemand||this.dataSource()instanceof t.DataManager?this._expandNode(u):this._createChildNodesWhenExpand(u)}}else r=JSON.parse(JSON.stringify(this.model.expandedNodes)),this._expandNodes(r);if(this.model.showCheckbox)if(h&&(c=JSON.parse(h).checkedNodes,u=[]),c&&c.length>0&&!t.isNullOrUndefined(this.model.fields)&&null!=this.dataSource())for(this._removeField(this._newDataSource,this.model.fields.isChecked),s=0,l=c.length;s<l;s++)null!=(u=this.element.find(".e-item#"+c[s]))[0]&&this._nodeCheck(u.find("> div > .e-chkbox-wrap > .nodecheckbox:first")[0]);else r=JSON.parse(JSON.stringify(this.model.checkedNodes)),this._checkedNodes(r);this.model.checkedNodes instanceof Array&&this.model.checkedNodes.length>0||this.model.showCheckbox&&this._isCheckedAction(),n=!1,h&&(c=JSON.parse(h).selectedNodes,n=!0),(!h||c&&0==c.length)&&(c=this.model.selectedNodes.length>0?this.model.selectedNodes:-1==this.model.selectedNode?[]:[this.model.selectedNode],n=!1),o={ctrlKey:!0},c&&c.length>0?this._doSelectNodes(c,n):this._isSelectedAction(o),this._isRender=!0,d.find(".e-item.checked, .e-item.expanded, .e-item.selected").removeClass("checked expanded selected")},_doSelectNodes:function(t,i){for(var s,l={ctrlKey:!0},n=0,o=t.length;n<o&&(null!=(s=i?this._getNodeByID(t[n]):e(this._liList[t[n]]))[0]&&this._nodeSelectionAction(s,l),this.model.allowMultiSelection);n++);},_doUnselectNodes:function(e){for(var t,i=0,s=e.length;i<s&&(null!=(t=this._getNodeByID(e[i]))[0]&&this._nodeUnSelectionAction(t),this.model.allowMultiSelection);i++);},_updateSelectedNode:function(){var t,i,l,n=e(this._liList).find(".e-text.e-active").closest(".e-item");if(this.model.selectedNodes=[],this.model.allowMultiSelection||(this.model.selectedNode=null),n[0]==s||n.length<=0)this._persistValues(this.model.selectedNodes,"selectedNodes");else if(this.model.allowMultiSelection){for(t=0,i=n.length;t<i;t++)l=e(this._liList).index(n[t]),this.model.selectedNodes.push(l);this._persistValues(this.model.selectedNodes,"selectedNodes")}else this._isRender=!1,this._nodeSelectionAction(e(n[0])),this._isRender=!0},_setCookies:function(e,i){window.localStorage?window.localStorage.setItem(this._id+e,i):document.cookie&&t.cookie.set(this._id+e,i)},_getCookies:function(e){return window.localStorage?window.localStorage.getItem(this._id+e):window.cookie?t.cookie.get(this._id+e):void 0},_updateCheckedNodes:function(){for(var t=[],i=this.element.find(".e-item > div > .e-chkbox-wrap > .nodecheckbox.checked").closest(".e-item"),s=0;s<i.length;s++)t.push(e(this._liList).index(i[s]));(t.length>0||0==i.length)&&(this.model.checkedNodes=t),0==i.length&&this.model.checkedNodes.push(-1),this._persistValues(this.model.checkedNodes,"checkedNodes")},_updateExpandedNodes:function(){var t,i,s,l=[];for(i=0,s=(t=this.element.find(".e-item > div > .e-minus").closest(".e-item").addClass("e-collapse")).length;i<s;i++)l.push(e(this._liList).index(t[i]));(l.length>0||0==t.length)&&(this.model.expandedNodes=l),0==t.length&&this.model.expandedNodes.push(-1),this._persistValues(this.model.expandedNodes,"expandedNodes")},_isCheckedAction:function(){for(var t,i,s,l=this.element.find(".e-item.checked"),n=0;n<l.length;n++)if(t=e(l[n]).find(".e-item"),i=e(l[n]).find(".e-item.unchecked"),0==t.length||!(t.length>0&&i.length==t.length)||!this.model.autoCheck)for(this._nodeCheck(e(l[n]).find("> div > .e-chkbox-wrap > input.nodecheckbox:first")[0]),s=0;s<i.length;s++)this._nodeUncheck(e(i[s]).find("> div > .e-chkbox-wrap > .nodecheckbox:first")[0]);this.element.find(".e-item.checked, .e-item.unchecked").removeClass("checked unchecked")},_isExpandedAction:function(){for(var t,i=this.element.find("li.expanded"),s=i.length,l=0;l<s;l++)t=e(i[l]),!this.model.enableMultipleExpand&&t.siblings().find(" > div > .e-minus").closest(".e-item").length>0||this._expandNode(t);this.element.find(".e-item.expanded").removeClass("expanded")},_isSelectedAction:function(t){for(var i=this.element.find(".e-item.selected"),s=0,l=i.length;s<l&&(null!=i[s]&&this._nodeSelectionAction(e(i[s]),t),this.model.allowMultiSelection);s++);this.element.find(".e-item.selected").removeClass("selected")},_checkedChange:function(t){if(t.isInteraction){var i=this.element.closest(".e-treeview.e-js").data("ejTreeView");action=t.isChecked?"_nodeCheck":"_nodeUncheck",i[action](e(this.element)[0],t)}},_ClickEventHandler:function(i){var s,l,n,o,a,r,d,h=e(i.target),c=h.closest(".e-item").find("> div > div:first");if(this._isPopup=!1,c&&!c.hasClass("e-process")&&!(s=h.closest(".e-item")).hasClass("e-node-disable")){if(l=null!=s[0]?s[0].getAttribute("id"):"",this._triggerEvent("nodeClick",{event:i,currentElement:h[0],id:l,parentId:s.closest("ul").closest(".e-item").attr("id")}),!t.isNullOrUndefined(h)&&h.is("DIV"))if(h.hasClass("e-plus")||h.hasClass("e-minus"))if(h.is("SPAN")&&(h=h.parent("div").find("div:first")),s.children("ul:first"),!(a=this.isChildLoaded(s))&&this.model.loadOnDemand){if(h.removeClass("e-plus").addClass("e-load"),this._checkboxChecked=h.parent().find(".nodecheckbox").hasClass("checked"),o=this._getNodeDetails(s),n={currentElement:s,targetElement:h[0],id:o.id,value:o.text,parentId:o.parentId,isChildLoaded:a,hasParent:!0,async:!0},this._isEventTriggered=!0,this._triggerEvent("beforeExpand",n))return!1;this._loadOnDemand(n,h[0])}else h.hasClass("e-plus")?this._expandNode(s):this._collpaseNode(s);else this.model.fullRowSelect&&(h.hasClass("e-fullrow")||h.hasClass("e-text-wrap"))&&(h=h.closest(".e-item").find("> .e-text-wrap .e-text"));h.is("A")||h.hasClass("input-text")||(h=h.closest(".e-text")),!t.isNullOrUndefined(h)&&h.is("A")&&h.hasClass("CanSelect")&&(i&&"touch"==i.pointerType&&null!=this._customPop&&this.model.allowMultiSelection?(r=e(i.target),this._customPop.is(":visible")||this._customPop.show(),this._customPop.is(":visible")&&!this._customPop.find(".e-rowselect").hasClass("e-spanclicked")?(d=r.offset(),this._customPop.offset({left:d.left,top:d.top-40})):i.ctrlKey=!0):this._hidePopup(),h.hasClass("e-active")?this.model.allowMultiSelection&&this._nodeUnSelectionAction(h.closest(".e-item"),i):this._nodeSelectionAction(h.closest(".e-item"),i))}},_getChildTables:function(e,i,s){if(!t.isNullOrUndefined(e.child))return i==s?e.child:this._getChildTables(e.child,i,s+1)},_loadOnDemand:function(i){var s,l,n,o=this;if(this.dataSource()instanceof t.DataManager){if(l=i.currentElement.parents("ul").length,n=this._getChildTables(o.model.fields,l,1),t.isNullOrUndefined(n)&&t.isNullOrUndefined(this.model.fields.child)&&(n=this.model.fields),!n)return void(e(i.targetElement).hasClass("e-load")&&e(i.targetElement).removeClass(e(i.targetElement).hasClass("e-plus")||e(i.targetElement).hasClass("e-minus")?"e-load":"e-icon e-load"));n.query&&n.query.queries.length>0&&(n.query.queries=[]),this._executeDataQuery(n,n.parentId,"number"==this._typeOfFieldId?parseInt(i.currentElement[0].id):i.currentElement[0].id).done(function(t){s=t.xhr&&t.xhr.responseJSON&&t.xhr.responseJSON.d?t.xhr.responseJSON.d:t.result?t.result:[],(s=o._getSortAndFilterList(n,s)).length>0?(o._onlineData=!0,o._loadChildNodeWhenOnDemand(s,i,n)):e(i.targetElement).hasClass("e-load")&&e(i.targetElement).removeClass(e(i.targetElement).hasClass("e-plus")||e(i.targetElement).hasClass("e-minus")?"e-load":"e-icon e-load")})}else s=this._getChildNodes(this._dataSource,i),!t.isNullOrUndefined(s)&&s.length>0?setTimeout(function(){o._createSubNodesWhenLoadOnDemand(s,i.targetElement,o.model.fields)},400):e(i.targetElement).hasClass("e-load")&&e(i.targetElement).removeClass(e(i.targetElement).hasClass("e-plus")||e(i.targetElement).hasClass("e-minus")?"e-load":"e-icon e-load")},_loadChildNodeWhenOnDemand:function(e,i,s){var l=this;!t.isNullOrUndefined(e)&&e.length>0&&setTimeout(function(){l._createSubNodesWhenLoadOnDemand(e,i.targetElement,s)},100)},_createSubNodesWhenLoadOnDemand:function(t,i,s){this._loadOnDemandNodes=!0,this._templateNodeCreation(t,s),e(this._fragment.firstChild).attr("style","display:none"),this._fragment.firstChild.className="e-treeview-ul",this._fragment.firstChild.setAttribute("role","group"),i.parentNode.parentNode.appendChild(this._fragment);var l=e(i).closest(".e-item");l.attr({"aria-expanded":!1,"aria-expanded":!0}),e(i).removeClass("e-load").addClass("e-plus"),this._expandNode(l),this._finalizeLoadOnDemand(l)},_finalizeLoadOnDemand:function(e){var i,s,l,n;this._beforeBaseClass(),this._isRender=!1,this.model.showCheckbox&&(e.children("ul").find("li > div > input.nodecheckbox").ejCheckBox({cssClass:this.model.cssClass,change:this._checkedChange}),i=e.children("ul").find(".e-item"),(s=e.children("ul").find(".e-item.unchecked")).length>=0&&s.length!=i.length&&this._checkboxChecked?i.not(".unchecked").addClass("checked"):s.length==i.length&&this.isNodeChecked(e)&&this._nodeUncheck(e.find("> div > .e-chkbox-wrap > .nodecheckbox:first")[0]),this._isLoaded&&(this._isCheckedAction(),this._updateCheckedNodes())),this._isRender=!0,this._addDragableClass(),this._preventEditable(),this.model.allowEditing&&this._allowEditable(),this._isLoaded&&(this._isSelectedAction(),this._updateSelectedNode(),this._allowOnDemand=!0,this._isExpandedAction(),this._updateExpandedNodes(),this._allowOnDemand=!1),!this.model.loadOnDemand||!this.model.enablePersistence||this.dataSource()instanceof t.DataManager||((n=this._getCookies("_childNodes"))&&(l=JSON.parse(n)),t.isNullOrUndefined(l)||-1!=l.indexOf(e[0].id)?l=[e[0].id]:l.push(e[0].id),this._setCookies("_childNodes",JSON.stringify(l)))},_getChildNodes:function(e,i){var s,l,n=[];if(1!=this._templateType){for(s=0,l=e.length;s<l;s++){if(e[s][this.model.fields.id]==i.id)return e[s].child;if(e[s].hasOwnProperty("child")&&(n=this._getChildNodes(e[s].child,i),!t.isNullOrUndefined(n)&&n.length>0))break}return n}for(s=0,l=e.length;s<l;s++)if(!t.isNullOrUndefined(e[s][0])&&!t.isNullOrUndefined(e[s][0][this.model.fields.parentId])&&e[s][0][this.model.fields.parentId]==i.id)return e[s]},_getPath:function(e){for(var t=e.prop("name"),i=e.parents(".e-item:first");null!=i[0]&&i[0].parentNode.id!=this._id;)t=i.prop("name")+"/"+t,i=i.parents(".e-item:first");return this._id+"/"+t},_nodeSelectionAction:function(t,i){var s,l,n,o,a;if(null!=t[0]||0!=t.length){var r=e(t.find("> div > .e-text")[0]),d=!1,h=(this.model.selectedNodes.slice(),this._liList.index(t[0]));if(this._currNode=t,!this._triggerEvent("beforeSelect",{target:t,nodeDetails:this._getNodeDetails(t)})){if(this.model.allowMultiSelection&&i&&(!i||i.ctrlKey)||(this.element.find("a.e-text.e-active").removeClass("e-node-focus e-active"),this.element.find("[aria-selected=true]").attr("aria-selected",!1),this.element.find(".e-li-active").removeClass("e-li-active"),this.model.fullRowSelect&&(this.element.find(".e-li-focus").removeClass("e-li-focus"),this.element.find(".e-node-focus").removeClass("e-node-focus")),this.element.find("#"+this._id+"_active").removeAttr("id"),this.model.selectedNodes=[]),this.model.allowMultiSelection&&i&&i.shiftKey){this._startNode||(this._startNode=this._currNode);var c=this.getVisibleNodes(),u=c.index(this._startNode),m=c.index(t[0]);for(u>m&&(s=u,u=m,m=s),l=u;l<=m;l++)n=e(c.get(l)),o=this._liList.index(n[0]),-1==e.inArray(o,this.model.selectedNodes)&&(this.model.selectedNodes.push(o),(a=n.find("> div > a.e-text")).removeClass("e-node-focus"),n.attr("aria-selected",!0),n.addClass("e-li-active"),a.addClass("e-active"),d=!0)}else this._startNode=t;this.model.allowMultiSelection||(this.model.selectedNode=h),d||(this.element.find("a.e-text.e-node-focus").removeClass("e-node-focus"),t.attr("aria-selected",!0),t.addClass("e-li-active"),r.addClass("e-active"),this.model.allowMultiSelection||r.attr("id",this._id+"_active"),-1==e.inArray(h,this.model.selectedNodes)&&this.model.selectedNodes.push(h)),this.model.enablePersistence&&this._persistValues(this.model.selectedNodes,"selectedNodes"),this._triggerGivenEvent("nodeSelect",t)}}},_nodeUnSelectionAction:function(e,t){this.model.allowMultiSelection&&t&&!t.ctrlKey?this._nodeSelectionAction(e,t):(e.removeClass("e-li-active"),e.attr("aria-selected",!1).find("> div > .e-text").removeClass("e-active").attr("id",""),this._updateUnselectModel(e[0]),this._triggerGivenEvent("nodeUnselect",e))},_updateUnselectModel:function(t){var i,s=this._liList.index(t),l=this.model.selectedNodes;this.model.allowMultiSelection||(this.model.selectedNode=null),(i=e.inArray(s,l))>-1&&this.model.selectedNodes.splice(i,1),this._persistValues(this.model.selectedNodes,"selectedNodes")},_triggerGivenEvent:function(e,t){if(this._isRender){var i={currentElement:t,value:t.find("> div > a.e-text").eq(0).text(),id:t[0].getAttribute("id"),parentId:t.closest("ul").closest(".e-item").attr("id"),selectedNodes:this.model.selectedNodes};this._triggerEvent(e,i)}},_getNodesIndex:function(e){for(var t=[],i=0,s=e.length;i<s;i++)t.push(this._liList.index(e[i]));return t},_nodeEnableAction:function(e){var t=this.getParent(e);null!=t[0]&&t.hasClass("e-node-disable")||(this.model.showCheckbox&&e.find("div > .e-chkbox-wrap > .nodecheckbox").ejCheckBox("enable").prop("disabled",!1),e.find(".e-text").removeClass("e-node-disable").closest(".e-item").removeClass("e-node-disable").removeProp("disabled"))},_nodeDisableAction:function(e){var t,i,s;for(this._collpaseNode(e),this.model.showCheckbox&&e.find("div > .e-chkbox-wrap > .nodecheckbox").ejCheckBox("disable").prop("disabled",!0),t=e.find(".e-text.e-active").closest(".e-item"),e.find(".e-text").addClass("e-node-disable").removeClass("e-active").attr("id","").closest(".e-item").addClass("e-node-disable").prop("disabled",!0),i=0,s=t.length;i<s;i++)this._updateUnselectModel(t[i])},_getNodeDetails:function(e){return null!=e[0]&&e.is("LI")&&e.hasClass("e-item")?{id:e[0].getAttribute("id"),text:e.children("div").find(".e-text:first").text(),parentId:e.closest("ul").closest(".e-item").attr("id")||"",level:e.parents("ul").length,count:e.find(".e-item").length,expanded:this._isNodeExpanded(e),checked:this._isChecked(e),selected:e.find("> div > .e-text").hasClass("e-active"),index:this._liList.index(e)}:{id:"",text:"",parentId:"",level:"",count:"",expanded:"",checked:"",selected:"",index:""}},_denyMultipleExpand:function(t){for(var i=t.siblings().find(">div>.e-minus").closest(".e-item"),s=0,l=i.length;s<l;s++)this._collpaseNode(e(i[s]))},_expandCollapseAction:function(t){var i,s,l,n,o;if(t&&!t.hasClass("e-process")&&(s=t.closest(".e-item"),t.is("SPAN")&&(t=e(t).parent("div").find("div:first")),(i=s.children("ul:first")).find("> .e-item").length>0))if(this.model.enableAnimation&&t.addClass("e-process"),l=this._getNodeDetails(s),o=this.isChildLoaded(s),n={currentElement:s,value:l.text,isChildLoaded:o,id:l.id,parentId:l.parentId,async:!1},!this._isNodeExpanded(s)&&o){if(!this._isEventTriggered&&this._triggerEvent("beforeExpand",n))return!1;this._isEventTriggered=!1,s.attr("aria-expanded",!0),this._addExpandedNodes(this._liList.index(s)),e(t).removeClass("e-icon e-plus").addClass("e-icon e-minus"),s.addClass("e-collapse"),this._doAnimation(i,t,"nodeExpand",n,350)}else{if(s.attr("aria-expanded",!1),!0===this._triggerEvent("beforeCollapse",n))return!1;this._removeExpandedNodes(this._liList.index(n.currentElement)),e(t).removeClass("e-icon e-minus").addClass("e-icon e-plus"),s.removeClass("e-collapse"),this._doAnimation(i,t,"nodeCollapse",n,200)}},_doAnimation:function(e,t,i,s,l){var n=this;this.model.enableAnimation?e.animate({height:"toggle"},l,"linear",function(){n._doAnimateAction(t,i,s)}):(e.css("display",200==l?"none":"block"),this._doAnimateAction(t,i,s))},_doAnimateAction:function(e,t,i){e.removeClass("e-process"),this._triggerEvent(t,i)},_isChecked:function(e){return"true"===e.find("> div > .e-chkbox-wrap:first").attr("aria-checked")},_doRecursiveCheck:function(t,i){var s,l,n,o,a,r;s=(o=this._getChildUl(t))?o.querySelectorAll('.e-chkbox-wrap[aria-checked="true"]').length:0,a=o?o.querySelectorAll(".e-item > div > .e-chkbox-wrap > .nodecheckbox"):[],(l=t.firstChild.querySelector(".nodecheckbox"))&&"INPUT"==l.nodeName.toUpperCase()&&(r=e(l).data("ejCheckBox"),s==a.length||this.model.autoCheckParentNode?(r.setModel({enableTriState:!1,checked:!0}),l.className+=" checked",n=t.firstChild.getElementsByTagName("a")[0].innerHTML,i.push({id:t.id,text:n}),this._addHiddenInputElement(l,n),this._addCheckNodes(this._liList.index(t))):r.setModel({enableTriState:!0,checkState:"indeterminate"}),"LI"==(t=t.parentNode.parentNode).nodeName.toUpperCase()&&this._doRecursiveCheck(t,i))},_nodeCheck:function(t,i){var s,l,n,o,a,r,d,h,c;if(null!=e(t)[0]){if(this._CurrenctSelectedNodes=[],this._checkedArray=[],t.className+=" checked",s=e(t).data("ejCheckBox")){if(s.setModel({enableTriState:!1,checked:!0}),n=(l=t.parentNode.parentNode.parentNode).firstChild.getElementsByTagName("a")[0].lastChild.nodeValue,this._checkedArray.push({id:l.id,text:n}),this._updateField(this._newDataSource,l.id,this.model.fields.isChecked,!0),this._addHiddenInputElement(t,n),this._addCheckNodes(this._liList.index(l)),this.model.autoCheck){for(h=0,c=(a=(d=this._getChildUl(l))?d.querySelectorAll(".e-item > div > .e-chkbox-wrap > .nodecheckbox"):[]).length;h<c;h++)e(a[h]).ejCheckBox({checked:!0,enableTriState:!1})[0].className+=" checked",n=(r=a[h].parentNode.parentNode.parentNode).firstChild.getElementsByTagName("a")[0].lastChild.nodeValue,this._checkedArray.push({id:r.id,text:n}),this._addHiddenInputElement(a[h],n),this._addCheckNodes(this._liList.index(r));"LI"==(o=l.parentNode.parentNode).nodeName.toUpperCase()&&this._doRecursiveCheck(o,this._checkedArray)}i&&(i.checknode=this._checkedArray),this._onChecked(e(t),i)}this._persistValues(this.model.checkedNodes,"checkedNodes")}},_addHiddenInputElement:function(e,t){if(null==e.firstChild){var i=document.createElement("input");i.setAttribute("type","hidden"),i.setAttribute("name",this._id+"_Checkbox_"+e.value+".Text"),i.setAttribute("value",t);try{e.appendChild(i)}catch(e){}}},_doRecursiveUncheck:function(t,i){var s,l,n,o,a,r;s=(o=this._getChildUl(t))?o.querySelectorAll('.e-chkbox-wrap[aria-checked="true"]').length:0,a=o?o.querySelectorAll(".e-item > div > .e-chkbox-wrap > .nodecheckbox"):[],(l=t.firstChild.querySelector(".nodecheckbox"))&&"INPUT"==l.nodeName.toUpperCase()&&(r=e(l).data("ejCheckBox"),s<=0&&(r.setModel({enableTriState:!1,checked:!1}),e(l).removeClass("checked").removeClass("checked").children().remove(),n=t.firstChild.getElementsByTagName("a")[0].innerHTML,this._removeCheckNodes(this._liList.index(t)),i.push({id:t.id,text:n})),s>1&&this.model.autoCheckParentNode?(r.setModel({checked:!0}),l.className+=" checked",n=t.firstChild.getElementsByTagName("a")[0].innerHTML,this._addHiddenInputElement(t,n)):s>0&&!this.model.autoCheckParentNode&&(a.length>1?r.setModel({enableTriState:!0,checkState:"indeterminate"}):r.setModel({checked:!1}),e(l).removeClass("checked").removeClass("checked").children().remove(),this._removeCheckNodes(this._liList.index(t))),"LI"==(t=t.parentNode.parentNode).nodeName.toUpperCase()&&this._doRecursiveUncheck(t,i))},_nodeUncheck:function(t,i){var s,l,n;if(null!=e(t)[0]){if(this._uncheckedArray=[],currentLi=t.parentNode.parentNode.parentNode,e(currentLi).find("div > .e-chkbox-wrap > .nodecheckbox").removeClass("checked").children().remove(),chkObj=e(t).data("ejCheckBox"),this._removeCheckNodes(this._liList.index(currentLi)),chkObj){if(chkObj.setModel({enableTriState:!1,checked:!1}),textvalue=currentLi.firstChild.getElementsByTagName("a")[0].lastChild.nodeValue,this._uncheckedArray.push({id:currentLi.id,text:textvalue}),this._updateField(this._newDataSource,currentLi.id,this.model.fields.isChecked,!1),this.model.autoCheck){for(childUl=this._getChildUl(currentLi),l=0,n=(s=childUl?childUl.querySelectorAll(".e-item > div > .e-chkbox-wrap > .nodecheckbox"):[]).length;l<n;l++)e(s[l]).ejCheckBox({enableTriState:!1,checked:!1}),liElement=s[l].parentNode.parentNode.parentNode,textvalue=liElement.firstChild.getElementsByTagName("a")[0].lastChild.nodeValue,this._uncheckedArray.push({id:liElement.id,text:textvalue}),this._removeCheckNodes(this._liList.index(liElement));parentLi=currentLi.parentNode.parentNode,"LI"==parentLi.nodeName.toUpperCase()&&this._doRecursiveUncheck(parentLi,this._uncheckedArray)}i&&(i.unchecknode=this._uncheckedArray),this._onUnChecked(e(t),i)}this._persistValues(this.model.checkedNodes,"checkedNodes")}},_executeDataQuery:function(i,s,l){var n,o,a;if(n=t.Query(),n=this._columnToSelect(i),!t.isNullOrUndefined(s)&&""!=s){for(o=e.extend(!0,[],n._params),n._params=[],n.addParams(s,l),a=0;a<o.length;a++)o[a].key!=s&&n.addParams(o[a].key,o[a].value);n.where(s,t.FilterOperators.equal,l)}return i.dataSource.executeQuery(n)},_createChildNodesWhenExpand:function(i,s,l,n,o,a){var r,d,h,c,u,m,p,g;if(i.length>0&&0==i.find("ul .e-item").length){if(r=i.attr("id"),d=i.children("div").find(".e-text:first").text(),c=i.children("div").find("div.e-plus:first"),h={currentElement:i,targetElement:c[0],id:r,value:d,isChildLoaded:!1,hasParent:!0,async:!1},p=this,this._isEventTriggered=!0,this._triggerEvent("beforeExpand",h))return!1;if(this.dataSource()instanceof t.DataManager){if(u=h.currentElement.parents("ul").length,m=this._getChildTables(this.model.fields,u,1),t.isNullOrUndefined(m)&&t.isNullOrUndefined(this.model.fields.child)&&(m=this.model.fields),!m)return void(e(h.targetElement).hasClass("e-load")&&e(h.targetElement).removeClass(e(h.targetElement).hasClass("e-plus")||e(h.targetElement).hasClass("e-minus")?"e-load":"e-icon e-load"));m.query&&m.query.queries.length>0&&(m.query.queries=[]),this._treeList.push("false"),this._executeDataQuery(m,m.parentId,"number"==this._typeOfFieldId?parseInt(h.currentElement[0].id):h.currentElement[0].id).done(function(e){p._treeList.pop(),g=e.xhr&&e.xhr.responseJSON&&e.xhr.responseJSON.d?e.xhr.responseJSON.d:e.result?e.result:[],g=p._getSortAndFilterList(m,g),p._appendChild(g,i,m,s,l,n),l&&p._expandByLevel(i.find("> ul"),l-1,n),0==p._treeList.length&&(o&&p._doAfterExpand(i,o,a),p._completeRendering())})}else g=this._getChildNodes(this._dataSource,{id:i[0].id}),this._appendChild(g,i,this.model.fields,s,l,n)}else this._expandNode(i)},_appendChild:function(i,s,l,n,o,a){var r,d,h;if(!t.isNullOrUndefined(i)&&i.length>0){if(this._checkboxChecked=s.find("> div > .e-chkbox-wrap > .nodecheckbox").hasClass("checked"),this._loadOnDemandNodes=!0,0==s.find("ul .e-item").length&&(this._templateNodeCreation(i,l),s.append(this._fragment)),this._finalizeLoadOnDemand(s),this._expandNode(s),n&&!o&&!a)for(d=0,h=(r=s.find(".e-item > div > .e-plus").closest(".e-item")).length;d<h;d++)this._createChildNodesWhenExpand(e(r[d]),!0,null,a)}else n&&s.find("> div > .e-plus").removeClass("e-plus e-icon")},_getSortAndFilterList:function(e,i){var s,l;return!i||!i.length||i.length<1?s=[]:(l=t.Query(),this._addSortingQuery(l,e),s=t.DataManager(i).executeLocal(l)),s},_addSortingQuery:function(e,i){if(this.model.sortSettings.allowSorting){var s=i&&i.text?i.text:"text",l=this.model.sortSettings.sortOrder==t.sortOrder.Descending;e.sortBy(s,l)}},_expandNode:function(e){var t;return null!=e[0]&&e.length>0&&(t=e.find("> div > div:first"),this.model.loadOnDemand&&!this.model.enablePersistence?e.find("> ul > .e-item").length>0&&t.hasClass("e-plus")?(this.model.enableMultipleExpand||this._denyMultipleExpand(e),this._expandCollapseAction(e.find("> div > div.e-plus:first"))):t.hasClass("e-icon")&&!t.hasClass("e-minus")&&this._allowOnDemand&&this._createChildNodesWhenExpand(e):t.hasClass("e-plus")&&e.find("> ul > .e-item").length>0&&(this.model.enableMultipleExpand||this._denyMultipleExpand(e),this._expandCollapseAction(t))),!0},_collpaseNode:function(e){if(null!=e[0]&&e.length>0&&e.find("> ul > .e-item").length>0){var t=e.find("> div > div:first");t.hasClass("e-minus")&&this._expandCollapseAction(t)}},_getElement:function(){return this.element.is("UL")?this.element:this.element.find("> ul")},_getImmediateChild:function(e,t){return t?e.find("> .e-item:not(:hidden)"):e.find("> .e-item")},_expandByLevel:function(e,t,i){t>0&&this._expandByNode(this._getImmediateChild(e,i),t,i)},_expandByNode:function(t,i,s){for(var l=0,n=t.length;l<n;l++)e(t[l]).find("> div > div").hasClass("e-plus")&&(this.model.loadOnDemand?this._createChildNodesWhenExpand(e(t[l]),!0,i,s):this._expandNode(e(t[l]))),this._expandByLevel(e(t[l]).find("> ul"),i-1,s)},_expandAll:function(t){var i,s;if(s=this.element.find(t?".e-item > div > .e-plus:not(:hidden)":".e-item > div > .e-plus").closest(".e-item"),this.model.loadOnDemand)for(i=0,len=s.length;i<len;i++)this._createChildNodesWhenExpand(e(s[i]),!0,null,t);else for(i=0,len=s.length;i<len;i++)this._expandNode(e(s[i]))},_collapseByLevel:function(e,t,i){t>0&&this._collapseByNode(this._getImmediateChild(e,i),t,i)},_collapseByNode:function(t,i,s){for(var l=0,n=t.length;l<n;l++)e(t[l]).find("> div > div").hasClass("e-minus")&&this._collpaseNode(e(t[l])),this._collapseByLevel(e(t[l]).find("> ul"),i-1,s)},_collapseAll:function(t){var i,s;if((s=this.element.find(t?".e-item > div > .e-minus:not(:hidden)":".e-item > div > .e-minus").closest(".e-item")).length>0)for(i=0,len=s.length;i<len;i++)this._collpaseNode(e(s[i]))},_checkAll:function(){var t;for(this._CurrenctSelectedNodes=[],(t=this.element.find(".e-item > div > .e-chkbox-wrap > .nodecheckbox")).addClass("checked"),i=0,len=t.length;i<len;i++)e(t[i]).ejCheckBox("setModel",{checked:!0}),this._addHiddenInputElement(t[i],e(t[i]).parent().siblings(".e-text")[0].lastChild.nodeValue);this.model.checkedNodes=this.getCheckedNodesIndex()},_uncheckAll:function(){var t;for((t=this.element.find(".e-item > div > .e-chkbox-wrap > .nodecheckbox")).removeClass("checked").children().remove(),i=0,len=t.length;i<len;i++)e(t[i]).ejCheckBox("setModel",{checked:!1});this.model.checkedNodes=[],this.model.checkedNodes.push(-1)},_selectAll:function(){var t,i,s,l;for(this._isRender=!1,t={ctrlKey:!0},i=0,s=this._liList.length;i<s&&(null!=(l=e(this._liList[i]))[0]&&this._nodeSelectionAction(l,t),this.model.allowMultiSelection);i++);this._isRender=!0},_unselectAll:function(){this.element.find("a.e-text.e-active").removeClass("e-node-focus e-active").closest("li").find("[aria-selected=true]").attr("aria-selected",!1),this.model.selectedNodes=[],this.model.enablePersistence&&this._persistValues(this.model.selectedNodes,"selectedNodes")},_isNodeExpanded:function(e){if(null!=e[0])return e.children("ul:first").length>0&&e.find("> div > div.e-minus").length>0},_showCheckBox:function(){for(var e=this.element,t=e.find("li"),i=0;i<t.length;i++)this._checkboxOnTemplate(t[i].children[0]);e.find(".e-item > div > .nodecheckbox").ejCheckBox({cssClass:this.model.cssClass,change:this._checkedChange}),e.find(".e-item.e-node-disable > div > .e-chkbox-wrap > .nodecheckbox").ejCheckBox("disable")},_drag:function(){var i,s,l=!1,n=t.browserInfo(),o=null,a=null,r=null;s="msie"==n.name&&"8.0"==n.version,this.element.is("ul")?(this._treeView=this.element.parent(),this.model.allowDragAndDropAcrossControl||(r=this.element.parent())):(this._treeView=this.element,this.model.allowDragAndDropAcrossControl||(r=this.element)),e(this._treeView).find("ul li div a").not(".e-js").ejDraggable({dragArea:r,clone:!0,dragStart:function(l){if(!i||t.isNullOrUndefined(l.target)||e(l.target).hasClass("e-node-disable")||0!=i.element.find(".e-item > div > .e-text.e-editable").length||(l.element.attr("aria-grabbed",!0),e(l.target).is("A")&&!e(l.target).hasClass("e-draggable")))return!1;s&&(document.ondragstart=function(){return!1});var n={target:e(l.target).closest(".e-item"),targetElementData:i._getNodeDetails(e(l.target).closest(".e-item")),dragTarget:l.target,parentElement:e(l.target).closest("ul").closest(".e-item"),parentElementData:i._getNodeDetails(e(l.target).closest("ul").closest(".e-item")),event:l.event};return i._triggerEvent("nodeDragStart",n)?(l.cancel=!0,o&&o.remove(),!1):void 0},drag:function(s){var n,a,r,d,h;return l=!1,e(".e-sibling").remove(),n=s.target,a=i._findTarget(e(n)),e(o).css({"margin-left":"20px","margin-top":s.event.clientY-20<0?"0px":"-20px",display:"table"}),e(o).find("> a.e-text").css({display:"table-cell","white-space":"nowrap",margin:"0 0 1px"}),e(o).find(">.e-dropedStatus").css({display:"table-cell"}),r={draggedElement:e(s.element).closest(".e-item"),draggedElementData:i._getNodeDetails(e(s.element).closest(".e-item")),dragTarget:n,target:a,targetElementData:i._getNodeDetails(a),event:s.event},(0==e(s.element).parent().parent().has(e(n)).length||i.model.allowMultiSelection&&i.model.selectedNodes.length>1)&&(e(n).hasClass("e-droppable")||e(n).parent().hasClass("e-droppable"))&&e(n).hasClass("e-dropchild")&&!e(n).hasClass("e-node-disable")&&(i.model.allowDragAndDropAcrossControl||!i.model.allowDragAndDropAcrossControl&&e(n).parents(".e-treeview").is(i.element))?(document.body.style.cursor="",e(o).find("span.e-dropedStatus").removeClass().addClass("e-dropedStatus e-icon e-plus"),e(n).addClass("allowDrop")):e(n).hasClass("e-droppable")&&!e(n).hasClass("e-item")&&!e(n).hasClass("e-text")||e(n).is("UL")&&e(n).hasClass("e-ul")&&0==e(n).find(".e-item").length&&e(n).parent(".e-treeview-wrap").length>0?(document.body.style.cursor="",e(o).find("span.e-dropedStatus").removeClass().addClass("e-dropedStatus e-icon e-plus")):(e(n).hasClass("e-sibling")||e(n).find("a").hasClass("e-text"))&&(e(n).hasClass("e-sibling")||e(n).parent().parent().hasClass("e-item")||e(n).parent().hasClass("e-item")||e(n).hasClass("e-item")||e(n).hasClass("e-text"))&&("LI"!=n.nodeName.toUpperCase()&&(null===n.parentElement||"LI"!=n.parentElement.nodeName.toUpperCase())||this.model.allowDropSibling)&&(i.model.allowDragAndDropAcrossControl||e(n).parents(".e-treeview").is(i.element))||(document.body.style.cursor="not-allowed",e(o).find("span.e-dropedStatus").removeClass().addClass("e-dropedStatus e-icon e-minus"),e(n).removeClass("showline-hover"),e(n).removeClass("noline-hover")),"A"!=n.nodeName&&(0==e(s.element).parent().parent().has(e(n)).length||i.model.allowMultiSelection&&i.model.selectedNodes.length>1)&&e(s.element).parent().parent()[0]!=e(n)[0]?("UL"==n.nodeName&&null!=e(n).children()[0]&&(n=e(n).children()[0],l=!0),"LI"!=n.nodeName&&(n=e(n).closest(".e-droppable")[0]||e(n).parent()),"LI"==n.nodeName&&e(n).hasClass("e-droppable")&&e(n).hasClass("e-dropsibling")&&(i.model.allowDragAndDropAcrossControl||!i.model.allowDragAndDropAcrossControl&&e(n).parents(".e-treeview").is(i.element))?(d=t.buildTag("div.e-sibling"),h=e(n).offset().top+e(n).find("a").height()||-1,(l=!(s.event.pageY>h))?d.insertBefore(e(n).find("> div > a").parent()):d.insertAfter(e(n).find("> div > a").parent()),e(n).parents().hasClass("e-rtl")?(document.body.style.cursor="",e(o).find("span.e-dropedStatus").removeClass().addClass("e-dropedStatus e-icon e-insertInbetween-rtl")):(document.body.style.cursor="",e(o).find("span.e-dropedStatus").removeClass().addClass("e-dropedStatus e-icon e-insertInbetween"))):"A"==n.nodeName&&e(n)&&e(n).hasClass("e-droppable")&&e(n).hasClass("e-dropchild")?(document.body.style.cursor="",e(o).find("span.e-dropedStatus").removeClass().addClass("e-dropedStatus e-icon e-plus"),e(n).addClass("allowDrop")):!e(n).hasClass("e-droppable")||e(n).hasClass("e-item")||e(n).hasClass("e-text")||(document.body.style.cursor="",e(o).find("span.e-dropedStatus").removeClass().addClass("e-dropedStatus e-icon e-plus"))):e(".e-sibling").remove(),!i._triggerEvent("nodeDrag",r)&&void 0},dragStop:function(t){var n,a,r,d,h,c;if(s&&(document.ondragstart=function(){return!0}),t.element.dropped||(o&&o.remove(),document.body.style.cursor=""),"e-sibling"==(n=t.target).className&&(n=e(n).closest(".e-item")[0]),e(".e-sibling").remove(),e(n).hasClass("e-node-disable")||(a=l?"Before":"After",trgtEle=i._findTarget(e(n)),a="A"==n.nodeName?"Over":a,r={draggedElementData:i._getNodeDetails(e(t.element).closest(".e-item")),draggedElement:e(t.element).closest(".e-item"),dropTarget:e(n),target:trgtEle,targetElementData:i._getNodeDetails(trgtEle),position:a,event:t.event},i._triggerEvent("nodeDragStop",r)))return!1;if(i.model.allowMultiSelection&&e(t.element).hasClass("e-active"))for(h=0,c=(d=i.element.find(".e-item > div > .e-active")).length;h<c;h++)t.element=d[h],a=i._dropNode(n,t,a,l);else a=i._dropNode(n,t,a,l);if(e(".allowDrop").removeClass("allowDrop"),e(t.element).attr("aria-grabbed",!1),e(n).hasClass("e-dropchild")||o&&o.remove(),trgtEle=i._findTarget(e(n)),r={droppedElementData:i._getNodeDetails(e(t.element).closest(".e-item")),droppedElement:e(t.element).closest(".e-item"),dropTarget:e(n),target:trgtEle,targetElementData:i._getNodeDetails(trgtEle),position:a,event:t.event},i._triggerEvent("nodeDropped",r))return!1;document.body.style.cursor=""},helper:function(s){var l,n;if(!t.isNullOrUndefined(s.element)&&!e(s.element).hasClass("e-node-disable")&&e(s.element).hasClass("e-draggable")&&(i=e(s.element).closest(".e-treeview.e-js").data("ejTreeView")))return(o=t.buildTag("div.e-dragedNode")).addClass(i.model.cssClass+(i.model.enableRTL?" e-rtl":"")),l=i.element.find(".e-item > div > .e-active").length,a=e(s.element).clone().addClass("dragClone"),this.spanEle=t.buildTag("span.e-icon e-plus e-dropedStatus"),o.append(this.spanEle),o.append(a),n=t.buildTag("span.e-drop-count",l),l>1&&i.model.allowMultiSelection&&e(s.element).hasClass("e-active")&&o.append(n),o.appendTo(e("body"))}})},_dropNode:function(t,i,s,l){return"A"==t.nodeName&&e(t).hasClass("e-dropchild")&&e(t).hasClass("e-droppable")||"UL"==t.nodeName&&0==e(t).children().length?(s="Over",e(t).is("UL")&&e(t).hasClass("e-ul")&&0==e(t).find(".e-item").length&&e(t).parent(".e-treeview-wrap").length>0?this._dropAsChildNode(e(t),e(i.element),i.event):0==e(i.element).parent().parent().has(e(t)).length&&(0==e(t).parent().parent().has(e(i.element)).length||this._isDescendant(e(t).parents("li:last").find(">ul>li"),e(i.element).parents("li:first")[0]))&&(this.model.allowDragAndDropAcrossControl||!this.model.allowDragAndDropAcrossControl&&e(t).parents(".e-treeview").is(this.element))&&this._dropAsChildNode(e(t).closest(".e-item"),e(i.element),i.event)):("UL"==t.nodeName&&(t=e(t).children()[0]),"LI"!=t.nodeName&&(t=e(t).closest(".e-droppable")[0]||e(t).parent()),"LI"==t.nodeName&&e(t).hasClass("e-dropsibling")&&e(t).hasClass("e-droppable")?e(i.element).parent().parent().has(e(t)).length<1&&e(i.element).parent().parent()[0]!=e(t)[0]&&(this.model.allowDragAndDropAcrossControl||!this.model.allowDragAndDropAcrossControl&&e(t).parents(".e-treeview").is(this.element))&&this._dropAsSiblingNode(e(t),e(i.element),l,i.event):"A"==t.nodeName&&e(t).hasClass("e-dropchild")&&e(t).hasClass("e-droppable")&&(s="Over",0==e(i.element).parent().parent().has(e(t)).length&&(0==e(t).parent().parent().has(e(i.element)).length||this._isDescendant(e(t).parents("li:last").find(">ul>li"),e(i.element).parents("li:first")[0]))&&this._dropAsChildNode(e(t).closest(".e-item"),e(i.element),i.event))),s},_findTarget:function(e){return e.hasClass("e-text")?e.closest(".e-item"):e.closest("ul").closest(".e-item").length>0?e.closest("ul").closest(".e-item"):this.element.find(e).length>0?e.parents("ul").first():e},_isDescendant:function(t,i){var s=!0;return e(t).each(function(e,t){if(t==i)return s=!1,!1;s=!0}),s},_childDrop:function(){e(this._treeView).find("ul .e-item div .e-text").ejDroppable({accept:e(this._treeView).find("ul .e-item div .e-text").addClass("e-dropchild"),drop:function(t,i){e(i.helper).hide()}})},_siblingDrop:function(){e(this._treeView).find("ul .e-item").addClass("e-dropsibling").ejDroppable({drop:function(t,i){e(i.helper).hide()}})},_dropAsSiblingNode:function(i,s,l){var n,o=s.parent().parent();o=e(o),n=e(s.parents(".e-item")[1]),t.isNullOrUndefined(this.model.fields)||null==this.dataSource()||this.dataSource()instanceof t.DataManager||this._updateDataSource(s.parents(".e-item:first"),e(i),l,this),l?o.insertBefore(i):o.insertAfter(i),this.model.template||this._autoGenerateNodes(s.parents(".e-item:first")),this._modifyCss(n),this._isRender=!1,this._updateCheckState(o),this._updateCheckState(n),this._isRender=!0,o.find("> div > .e-minus").length>0&&!this.model.enableMultipleExpand&&this._denyMultipleExpand(o),this._updateChanges(e(i))},_dropAsChildNode:function(i,s){var l,n=s.parent().parent();n=e(n),l=e(s.parents(".e-item")[1]),e(i).is("UL")?e(i).append(n):this._appendNode(i,n),t.isNullOrUndefined(this.model.fields)||null==this.dataSource()||this.dataSource()instanceof t.DataManager||this._updateDataSource(s.parents(".e-item:first"),e(i).find("> div > .e-text").first(),"",this),this.model.template||this._autoGenerateNodes(s.parents(".e-item:first")),this._modifyCss(l),this._isRender=!1,this._updateCheckState(n),this._updateCheckState(l),this._isRender=!0,i.find("> div > .e-icon.e-plus:first").length>0&&this._expandNode(i),this._updateChanges(e(i))},_updateChanges:function(t){if(null!=e(t)[0]){var i=this,s=0;do{i._updateNodes(),s++,i=t.closest(".e-treeview.e-js").data("ejTreeView")}while(i&&this._id!=i._id&&1==s)}},_updatePersistProb:function(){var t,i,s,l,n,o;for(this._removeField(this._newDataSource,this.model.fields.selected),this._removeField(this._newDataSource,this.model.fields.expanded),i=0,s=(t=this.getSelectedNodes()).length;i<s;i++)this._updateField(this._newDataSource,e(t[i]).attr("id"),this.model.fields.selected,!0);for(n=0,o=(l=this.getExpandedNodes()).length;n<o;n++)this._updateField(this._newDataSource,e(l[n]).attr("id"),this.model.fields.expanded,!0)},_orderDataSource:function(){var i,s,l,n,o,a;for(this._beforeBaseClass(),i=[],s=this._newDataSource,this._updatePersistProb(),l=0,n=this._liList.length;l<n;l++)for(o=0,a=s.length;o<a;o++)if(!t.isNullOrUndefined(s[o])&&!t.isNullOrUndefined(s[o][this.model.fields.id])&&s[o][this.model.fields.id].toString()==e(this._liList[l]).attr("id")){0==e(this._liList[l]).find("> ul .e-item").length?delete s[o][this.model.fields.hasChild]:1==this._templateType&&(s[o][this.model.fields.hasChild]=!0),i.push(s[o]);break}return i},_updateDataSource:function(i,s,l,n){var o,a,r,d,h,c,u;null!=e(i)[0]&&null!=e(s)[0]&&(o=n,a=s.closest(".e-treeview.e-js").data("ejTreeView"),!o||!a||t.isNullOrUndefined(a.model.fields)||null==a.dataSource()||a.dataSource()instanceof t.DataManager||(s.is("A")?(r=s.closest(".e-item").attr("id"),d=(h=s.closest(".e-item").find("> ul > .e-item")).length>0?h.length:s.closest(".e-item").index()):(r=s.parents(".e-item:first").attr("id"),c=s.next(".e-item"),u=s.prev(".e-item"),d=c.length>0?d=u.length>0?c.index()-1:l?s.index():c.index():l?s.index():s.index()+1),a&&o._findAndUpdate(i.attr("id"),r,o._newDataSource,d,a)))},_removeObject:function(e,i,s){for(var l=0,n=e.length;l<n;l++)if(!t.isNullOrUndefined(e[l])&&!t.isNullOrUndefined(e[l][s])&&e[l][s].toString()==i){e.splice(l,1);break}},_convertDataSourceTypes:function(e,t){for(var i=0;i<e.child.length;i++)e.child[i][this.model.fields.parentId]=e[this.model.fields.id],t.push(e.child[i]),e.child[i].hasOwnProperty("child")&&e.child[i].child.length>0&&this._convertDataSourceTypes(e.child[i],t);return e.child&&(delete e.child,e[this.model.fields.hasChild]=!0),t},_childObjectCollection:function(e,t,i){for(var s,l=0,n=e.length;l<n;l++)(s=this._getChildNodes(t,{id:e[l][this.model.fields.id]}))&&(i=i.concat(s),i=this._childObjectCollection(s,t,i));return i},_updateCopyData:function(t,i,l){var n=i.model.fields;return temp=l,arr=[],proxy=this,e.each(this.model.fields,function(e){("dataSource"!==e||"query"!==e)&&temp[t][proxy.model.fields[e]]!==s&&(arr[n[e]]=temp[t][proxy.model.fields[e]])}),e.extend(void 0,arr,!1)},_findAndUpdate:function(e,i,s,l,n){var o,a,r,d,h,c,u,m,p,g,f,_;if(1==this._templateType){for(p=0,g=s.length;p<g;p++)if(!t.isNullOrUndefined(s[p])&&!t.isNullOrUndefined(s[p][this.model.fields.id])&&s[p][this.model.fields.id].toString()==e){if(this._id==n._id)t.isNullOrUndefined(i)?delete s[p][this.model.fields.parentId]:s[p][this.model.fields.parentId]=i,o=this.dataSource(),r=this,this._templateType=this._getTemplateType(o,this.model.fields),this._dataSource=1==this._templateType?this._groupingObjects(o,function(e){return[!t.isNullOrUndefined(e)&&[e[r.model.fields.parentId]].toString()]}):o;else if(r=this,_=[],d=this._groupingObjects(s,function(e){return[!t.isNullOrUndefined(e)&&[e[r.model.fields.parentId]].toString()]}),f=s.splice(p,1),(a=this._getChildNodes(d,{id:e}))&&a.length>0&&(a=this._childObjectCollection(a,d,a)),2==n._templateType){if(a&&a.length>0){for(h=0,c=a.length;h<c;h++)this._removeObject(s,e,this.model.fields.parentId),delete a[h][n.model.fields.parentId],delete a[h][n.model.fields.hasChild];f[0].hasOwnProperty("child")||(f[0].child=[]),f[0].child=a}delete f[0][n.model.fields.parentId],delete f[0][n.model.fields.hasChild],i?this._changeObjectPos(i,f,n._newDataSource,l):n._newDataSource.splice(l,0,f[0])}else{if(a&&a.length>0){for(h=0,c=a.length;h<c;h++)this._removeObject(s,a[h].id,this.model.fields.parentId),this._removeObject(s,e,this.model.fields.parentId);this._dataSource=1==this._templateType?this._groupingObjects(s,function(e){return[!t.isNullOrUndefined(e)&&[e[r.model.fields.parentId]].toString()]}):s}if(i?f[0][n.model.fields.parentId]=i:delete f[0][n.model.fields.parentId],n._newDataSource.push(f[0]),u=[],a&&a.length>0){if(!(this.dataSource()instanceof t.DataManager)&&this.model.loadOnDemand){for(n._newDataSource.splice(n._newDataSource.length-1,1),a.push(f[0]),p=0;p<a.length;p++)u.push(this._updateCopyData(p,n,a));a=u}m=n._newDataSource=n._newDataSource.concat(a),n._dataSource=1==n._templateType?n._groupingObjects(m,function(e){return[!t.isNullOrUndefined(e)&&[e[n.model.fields.parentId]].toString()]}):m}}break}}else for(p=0,g=s.length;p<g;p++){if(s[p][this.model.fields.id].toString()==e)return f=s.splice(p,1),this._id==n._id?i?this._changeObjectPos(i,f,this._newDataSource,l):this._newDataSource.splice(l,0,f[0]):1==n._templateType?(_=[],f[0].hasOwnProperty("child")?(n._convertDataSourceTypes(f[0],_),f[0]=f.concat(_)):f[0]=f.concat(),i?f[0][0][n.model.fields.parentId]=i:delete f[0][0][n.model.fields.parentId],n._newDataSource=n._newDataSource.concat(f[0])):i?this._changeObjectPos(i,f,n._newDataSource,l):n._newDataSource.splice(l,0,f[0]),!0;if(s[p].hasOwnProperty("child")&&this._findAndUpdate(e,i,s[p].child,l,n))break}},_changeObjectPos:function(e,t,i,s){for(var l=0,n=i.length;l<n;l++){if(i[l][this.model.fields.id].toString()==e)return i[l].hasOwnProperty("child")?i[l].child.splice(s,0,t[0]):(i[l].child=[],i[l].child.push(t[0])),!0;if(i[l].hasOwnProperty("child")&&this._changeObjectPos(e,t,i[l].child,s))break}},_finalizeEditing:function(t){if(null!=e(t)[0]){var i=t.closest(".e-treeview.e-js").data("ejTreeView");i&&(i._preventEditable(),i.model.allowEditing&&i._allowEditable())}},_updateCheckState:function(e){var t,i;this._isTreeElement(e)&&(t=e.closest(".e-treeview.e-js").data("ejTreeView"))&&t.model.showCheckbox&&(e.children("ul").find(".e-item > div > .e-chkbox-wrap > .checked").closest(".e-item").addClass("checked").length>0?t._isCheckedAction():(i=t.isNodeChecked(e)?"_nodeCheck":"_nodeUncheck",t[i](e.find("> div > .e-chkbox-wrap > .nodecheckbox:first")[0])))},_autoGenerateNodes:function(t){var i,s,l,n;if(null!=e(t)[0])if((i=t.closest(".e-treeview.e-js").data("ejTreeView"))&&i.model.showCheckbox){if(0==t.find(".e-chkbox-wrap").length){for(this._checkboxOnTemplate(t[0].children[0]),l=0,n=(s=t.find(".e-item")).length;l<n;l++)this._checkboxOnTemplate(s[l].children[0]);t.find(".nodecheckbox").ejCheckBox({cssClass:i.model.cssClass,change:i._checkedChange})}}else t.find(".e-chkbox-wrap").remove()},_appendNode:function(i,s){var l,n,o,a;for(this._isTreeElement(i)?(null==i.find("ul")[0]?((l=i.closest(".e-treeview.e-js").data("ejTreeView"))&&!this._isNodeExpanded(i)&&l.model.loadOnDemand&&i.find("> div > div").first().hasClass("e-plus")&&l._createChildNodesWhenExpand(i,null,null,null,s,l),this.dataSource()instanceof t.DataManager&&l.model.loadOnDemand&&i.find("> div > div").first().hasClass("e-plus")||this._doAfterExpand(i,s,l)):e(i.find("ul")[0]).append(s),this.isDisabled(i)||this._expandNode(i)):this.element.is("UL")?this.element.append(s):this.element.children("ul:first").length>0?this.element.children("ul:first").append(s):((n=t.buildTag("ul.e-treeview-ul","",{},{role:"group"})).append(s),this.element.append(n)),o=this.element.find(".e-item.expanded"),a=0;a<o.length;a++)!this.model.loadOnDemand||this.dataSource()instanceof t.DataManager?this._expandNode(e(o[a])):this._createChildNodesWhenExpand(e(o[a]));o.removeClass("expanded"),this.model.showCheckbox&&this._isCheckedAction()},_doAfterExpand:function(i,s,l){var n,o=t.buildTag("ul.e-treeview-ul","",{},{role:"group",style:"display:none"});e(o).append(e(s)),0==e(i.find("div")[1]).length?((n=document.createElement("div")).setAttribute("role","presentation"),n.className="e-icon e-minus",e(i.find("div")).append(e(n))):e(i.find("div")[1]).hasClass("e-minus")||e(i.find("div")[1]).addClass("e-icon e-plus"),l&&l.model.loadOnDemand&&i.find("ul").length>0?i.children("ul").append(e(s)):i.append(e(o))},_modifyCss:function(t){null!=(t=e(t))[0]&&0==t.find(".e-item").length&&t.removeClass("e-collapse").attr("aria-expanded",!1).find("> div > .e-icon").removeClass("e-icon e-minus").closest(".e-item").find("ul").remove()},_applyFirstLastChildClass:function(){e(this._liList).removeClass("first last").filter(":first-child:not(:last-child)").addClass("first"),e(this._liList).filter(":last-child").addClass("last")},_expandEventHandler:function(t){var i,s,l=e(t.target);l.hasClass("e-icon")||l.closest(".e-item").hasClass("e-node-disable")||"dblclick"===t.type&&this.model.allowEditing||(t.preventDefault(),i=l.is("A")?e(l.siblings("div")):e(l.parent().siblings("div")),this.model.fullRowSelect&&(l.is("div.e-text-wrap")||l.is("div.e-fullrow"))&&(i=l.closest(".e-item").find("> .e-text-wrap > div")),s=l.closest(".e-item"),i.hasClass("e-minus")?this._collpaseNode(s):this.model.loadOnDemand&&0==i.find(".e-item").length?this._ClickEventHandler({target:i[0]}):this._expandNode(s))},_inlineEdit:function(t){t.preventDefault();var i=e(t.target);return i.hasClass("input-text")||i.hasClass("e-node-disable")||(i.is("A")||(i=i.closest(".e-text")),i.is("A")&&!i.hasClass("e-node-disable")&&this._inlineEditAction(i)),!1},_inlineEditAction:function(e){null==this.element.find(".e-item > div > .e-text > #Edit_Input")[0]&&this._createEditTextBox(e)},_createEditTextBox:function(i){var s,l,n={currentElement:i};return!this._triggerEvent("beforeEdit",n)&&(null==(s=this.element.find(".e-item > div > .e-text > #Edit_Input"))[0]&&((l=t.buildTag("Input.input-text#Edit_Input","","",{type:"text",value:e.trim(i.text()).replace(/\n\s+/g," "),name:"inplace_value"})).width(i.outerWidth()+5),l.height(i.outerHeight()),l.addClass("e-tree-input e-textbox"),this._beforeEditText=i.text(),i[0].lastChild.nodeValue="",i.addClass("e-editable").append(l),""==(s=l).val().length||i.outerWidth(),this._mousePositionAtEnd(s),this._currentEditableNode=i,this._on(s,"keypress",this._editTextBoxKeyPress)._on(s,"keydown",this,this._pressEscKey)._on(s,"mousedown pointerdown MSPointerDown",this,this._preventPropagation)._on(s,this.model.expandOn,this,this._preventPropagation)._on(s,"blur",this._focusout)),s)},_preventPropagation:function(e){e.stopImmediatePropagation(),this._isTextbox=!0},_editTextBoxKeyPress:function(e){e.target.size=e.target.value.length+1},_mousePositionAtEnd:function(e){return e.focus&&e.focus(),e.select&&e.select(),!0},_focusElement:function(t){if(!this._isTextbox){if(t&&("touchstart"==t.type||"pointerdown"==t.type||"MSPointerDown"==t.type)){var i=e(t.currentTarget);i.hasClass("e-text")&&this.selectNode(i.closest(".e-item"))}this.element.focus()}},_focusout:function(t){var i,s=e(t.currentTarget);this._isTextbox=!1,i={id:s.closest(".e-item").attr("id"),oldText:this._beforeEditText,newText:s.val()},this._triggerEvent("inlineEditValidation",i)?this._cancelAction(s):this._saveAction(s,t)},_pressEscKey:function(i){var s,l;i.cancelBubble=!0,i.returnValue=!1,null!=(s=e(i.currentTarget))[0]&&(13==i.keyCode&&(i.stopPropagation(),this._focusout(i)),27==i.keyCode&&this._cancelAction(s),(13==i.keyCode||27==i.keyCode)&&"msie"==(l=t.browserInfo()).name&&"8.0"==l.version&&this.element.focus())},_onFocusHandler:function(e){e.preventDefault()},_onKeyDown:function(e,t){e.find("> div > .e-text:first").removeClass("e-node-focus"),t.find("> div > .e-text:first").addClass("e-node-focus"),this.model.fullRowSelect&&(e.removeClass("e-li-focus"),t.addClass("e-li-focus"))},_KeyPress:function(t){var i,s,l,n,o,a,r,d,h,c,u,m,p,g,f,_,v,b=this;if(_=this.element.is("ul")?this.element:this.element.find("> ul"),i=t.keyCode?t.keyCode:t.which?t.which:t.charCode,b.model.allowKeyboardNavigation&&b.element.find("#Edit_Input").length<1&&b.element.find(".e-chkbox-wrap.e-focus").length<1)if(s=e(_.find(".e-item > div > .e-text.e-active").closest(".e-item")[0]),l=_.find(".e-item:visible"),b._focusedNode?(n=b._focusedNode,b._focusedNode=null):n=_.find(".e-text.e-node-focus").closest(".e-item"),113==i&&(t.preventDefault(),(_=n.length>0?n:s).length>0&&b.model.allowEditing&&(t.target=_.find("> div > .e-text:first"),b._inlineEdit(t))),40!=i||t.altKey)if(38!=i||t.altKey){if(39==i&&!this.model.enableRTL&&!t.altKey||37==i&&this.model.enableRTL)if(t.preventDefault(),a=(o=n.length>0?n.find("> div > div").first():s.find("> div > div").first()).closest(".e-item"),o.hasClass("e-plus"))this.model.loadOnDemand&&0==a.find("> ul .e-item").length?this._ClickEventHandler({target:o[0]}):this._expandNode(e(l[l.index(a)]));else{if(a=this._getNextEle(l,a),b._KeyPressEventHandler(a.length>0?a:"",b,i,t))return;(a.length>0&&a[0]==o.closest(".e-item").find("ul > .e-item:first")[0]||a.find("ul > .e-item").first().hasClass("e-node-disable"))&&b._onKeyDown(n,a)}else if(37==i&&!this.model.enableRTL&&!t.altKey||39==i&&this.model.enableRTL)if(t.preventDefault(),r=(d=n.length>0?n.find("> div > div").first():s.find("> div > div").first()).closest(".e-item"),d.hasClass("e-minus"))this._collpaseNode(e(l[l.index(d.closest(".e-item"))]));else{if(r=e(l[l.index(r)]).closest("ul").closest(".e-item"),b._KeyPressEventHandler(r.length>0?r:"",b,i,t))return;r.length>0&&b._onKeyDown(n,r)}else if(36!=i||t.altKey){if(35!=i||t.altKey){if(13==i)t.preventDefault(),(m=(f=n.length>0?n:s).find("> div > .e-text")).removeClass("e-node-focus"),this.model.fullRowSelect&&f.removeClass("e-li-focus"),m.hasClass("e-active")?b.model.allowMultiSelection&&b._nodeUnSelectionAction(f,event):b._nodeSelectionAction(f,t),b._focusedNode=f;else if(32==i)t.preventDefault(),(f=n.length>0?n:s).length>0&&this.model.showCheckbox&&((p=f.find("> div > .e-chkbox-wrap > .nodecheckbox:first")[0]).checked?this._nodeUncheck(p):this._nodeCheck(p),b._focusedNode=f);else if(46==i)t.preventDefault(),(f=this.model.allowMultiSelection?_.find(".e-item > div > .e-text.e-active").closest(".e-item"):n.length>0?n:s).length>0&&this._removeNode(f,t);else if(t&&1==t.ctrlKey)if(88==i&&this.model.allowDragAndDrop&&this.model.allowDropChild){if(t.preventDefault(),(f=n.length>0?n:s).length>0&&(g=f.parents(".e-item:first"),this._cutNode=e(l[l.index(f)]).detach(),null!=e(this._cutNode)[0])){if(this._triggerEvent("beforeCut",{target:f,nodeDetails:this._getNodeDetails(f),keyCode:i,event:t}))return;this._isRender=!1,this.unselectNode(f),0==g.find("> ul > .e-item").length&&(this.collapseNode(g),this._modifyCss(g)),this._isRender=!0,this._triggerEvent("nodeCut",{parentElement:g,parentDetails:this._getNodeDetails(g),keyCode:i,event:t})}}else if(86==i&&null!=this._cutNode&&this.model.allowDragAndDrop&&this.model.allowDropChild){if(t.preventDefault(),f=n.length>0?n:s,0===(f=e(l[l.index(f)])).length&&(f=this.element),_=this._cutNode.find(" > div > .e-text").first(),e(l).length>0){if(this._triggerEvent("beforePaste",{target:f,nodeDetails:this._getNodeDetails(f),keyCode:i,event:t}))return;this._isRender=!1,this._dropAsChildNode(f,_,t),this._isRender=!0,this._cutNode=null,v=_.closest(".e-item"),this._triggerEvent("nodePaste",{target:v,nodeDetails:this._getNodeDetails(v),keyCode:i,event:t})}}else b.model.allowMultiSelection&&(b._focusedNode=n)}else if(t.preventDefault(),u=n.length>0?n:s,((c=e(l).last()).hasClass("e-node-disable")||c.hasClass("hidden"))&&(c=this._getPrevEle(l,c)),s.length>0&&0==n.length&&s[0]!=c[0]||n.length>0&&n[0]!=c[0]){if(b._KeyPressEventHandler(c,b,i,t))return;b._onKeyDown(u,c)}}else if(t.preventDefault(),u=n.length>0?n:s,((h=e(l).first()).hasClass("e-node-disable")||h.hasClass("hidden"))&&(h=this._getNextEle(l,h)),s.length>0&&0==n.length&&s[0]!=h[0]||n.length>0&&n[0]!=h[0]){if(b._KeyPressEventHandler(h,b,i,t))return;b._onKeyDown(u,h)}}else{if(t.preventDefault(),u=n.length>0?n:s,r=this._getPrevEle(l,u),b._KeyPressEventHandler(r.length>0?r:null,b,i,t))return;r.length>0&&b._onKeyDown(n,r)}else{if(t.preventDefault(),u=n.length>0?n:s,a=this._getNextEle(l,u),b._KeyPressEventHandler(a.length>0?a:null,b,i,t))return;a.length>0&&b._onKeyDown(n,a)}},_getNextEle:function(t,i){var s,l=t.index(i);do{l++,s=e(t[l])}while(s.hasClass("e-node-disable")||s.hasClass("hidden"));return s},_getPrevEle:function(t,i){var s,l=t.index(i);do{l--,s=e(t[l])}while(s.hasClass("e-node-disable")||s.hasClass("hidden"));return s},_removeChildNodes:function(e,i,s){for(var l,n,o=0,a=0;a<i.length;a++)if(!t.isNullOrUndefined(i[a][0][this.model.fields.parentId])&&i[a][0][this.model.fields.parentId].toString()==s){o=i[a].length;break}for(a=0;a<o;a++)for(l=0;l<e.length;l++)if(!t.isNullOrUndefined(e[l][this.model.fields.parentId])&&e[l][this.model.fields.parentId].toString()==s){t.isNullOrUndefined(e[l])||(n=e[l][this.model.fields.id].toString()),e.splice(l,1),this._removeChildNodes(e,i,n);break}},_removeNode:function(i,s){var l,n,o,a,r,d,h,c,u;if(null!=i[0]&&null!=i[0]&&i.length>0){if(c=this,l=e(i[0]).closest("ul").closest(".e-item"),d=e(i[0]),this._triggerEvent("beforeDelete",{target:d,nodeDetails:this._getNodeDetails(d),parentElement:null!=l[0]?l:null,parentDetails:this._getNodeDetails(l),event:s,removedNodes:i}))return;if(this._isRender=!1,!t.isNullOrUndefined(this.dataSource())&&this.dataSource().length>0)for(u=this.dataSource(),a=0,r=i.length;a<r;a++)for(d=e(i[a]),h=0;h<u.length;h++)if(n=d.attr("id"),u[h][this.model.fields.id].toString()==n){o=this._groupingObjects(u,function(e){return[!t.isNullOrUndefined(e)&&[e[c.model.fields.parentId]].toString()]}),u.splice(h,1),this._removeChildNodes(u,o,n);break}if(i.remove(),this._modifyCss(l),this._updateNodes(),this._updateCheckState(l),this._isRender=!0,this._triggerEvent("nodeDelete",{parentElement:null!=l[0]?l:null,parentDetails:this._getNodeDetails(l),event:s,removedNodes:i}))return;c=this,u=this.dataSource(),setTimeout(function(){null==c.dataSource()||c.dataSource()instanceof t.DataManager||(c._dataSource=c._groupingObjects(u,function(e){return[!t.isNullOrUndefined(e)&&[e[c.model.fields.parentId]].toString()]}))},300)}},_updateNodes:function(){this._beforeBaseClass(),this._applyFirstLastChildClass(),this._updateExpandedNodes(),this._updateCheckedNodes(),this._updateSelectedNode()},_updateField:function(e,i,s,l){var n,o,a;if(!(t.isNullOrUndefined(this.model.fields)||null==this.dataSource()||this.dataSource()instanceof t.DataManager||t.isNullOrUndefined(e)||t.isNullOrUndefined(i)||t.isNullOrUndefined(s)))if(1==this._templateType){for(n=0,o=e.length;n<o;n++)if(!t.isNullOrUndefined(e[n])&&!t.isNullOrUndefined(e[n][this.model.fields.id])&&e[n][this.model.fields.id].toString()==i){e[n][s]=l,0==l&&delete e[n][s],a=e[n],e.splice(n,1,a);break}}else for(n=0,o=e.length;n<o;n++){if(e[n][this.model.fields.id].toString()==i){e[n][s]=l,0==l&&delete e[n][s],a=e[n],e.splice(n,1,a);break}e[n].hasOwnProperty("child")&&this._updateField(e[n].child,i,s,l)}},_removeField:function(e,i){if(!(t.isNullOrUndefined(this.model.fields)||null==this.dataSource()||this.dataSource()instanceof t.DataManager||t.isNullOrUndefined(e)))for(var l=0;l<e.length;l++)e[l][i]!=s&&delete e[l][i],e[l].hasOwnProperty("child")&&this._removeField(e[l].child,i)},_KeyPressEventHandler:function(t,i,s,l){var n,o,a,r;return null!=e(t)[0]?(r=this._isNodeExpanded(t),n=this._getNodeDetails(t),a=i._getPath(t),o={keyCode:s,currentElement:t,value:n.text,isExpanded:r,path:a,event:l,id:n.id,parentId:n.parentId}):o={keyCode:s,currentElement:t,value:"",isExpanded:"",path:"",event:l,id:"",parentId:""},this._triggerEvent("keyPress",o)},_documentClick:function(t){var i,s;if("Edit_Input"!=t.target.id&&(i=e("#Edit_Input")[0]),null!=i){var l=e(i).closest(".e-text")[0],n=i.value,o=e(i).closest(".e-item");e(i).remove(),l.lastChild.nodeValue=n,e(l).removeClass("e-editable").removeAttr("style"),this._updateField(this._newDataSource,o.attr("id"),this.model.fields.text,n),this._triggerEvent("nodeEdit",{id:o.attr("id"),oldText:this._beforeEditText,newText:n,target:o,nodeDetails:this._getNodeDetails(o),event:t})}0==this.element.find(t.target).length?(s=this.element.find(".e-item > div > .e-text.e-node-focus"),this._focusedNode=s.closest(".e-item"),s.removeClass("e-node-focus")):e(t.target).hasClass("e-active")&&(this._focusedNode=this.element.find(t.target).closest(".e-item"))},_saveAction:function(t,i){var s=t.val(),l=t.closest(".e-item"),n=t.closest(".e-text")[0];t.remove(),null!=n&&(n.lastChild.nodeValue=s,e(n).removeClass("e-editable"),this._updateField(this._newDataSource,l.attr("id"),this.model.fields.text,s),this._triggerEvent("nodeEdit",{id:l.attr("id"),oldText:this._beforeEditText,newText:s,target:l,nodeDetails:this._getNodeDetails(l),event:i}),this.element.focus(),this._focusedNode=l)},_cancelAction:function(t){var i=t.closest(".e-text")[0];t.remove(),i.lastChild.nodeValue=this._beforeEditText,e(i).removeClass("e-node-hover e-editable"),this.element.focus()},_mouseEnterEvent:function(t){this.element.find(".e-node-hover").removeClass("e-node-hover"),e(t.currentTarget).hasClass("e-text")&&!e(t.currentTarget).hasClass("e-node-disable")&&e(t.currentTarget).addClass("e-node-hover")},_mouseLeaveEvent:function(t){e(t.currentTarget).removeClass("e-node-hover")},_liMouseEnterEvent:function(t){this.element.find(".e-node-hover").removeClass("e-node-hover"),this.element.find(".e-li-hover").removeClass("e-li-hover");var i=e(t.currentTarget).closest(".e-item"),s=i.find("> div .e-text");s.length>0&&!s.hasClass("e-node-disable")&&(s.addClass("e-node-hover"),i.addClass("e-li-hover"))},_liMouseLeaveEvent:function(t){var i=e(t.currentTarget).closest(".e-item");i.find("> div .e-text").removeClass("e-node-hover"),i.removeClass("e-li-hover")},_onFocusOutHandler:function(){this._isPopup||this._hidePopup(),this._isPopup=!1},_createObjectByText:function(t,i){if("string"==typeof t){var s={};return s[this.model.fields.text]=t,null!=e(i)[0]&&(s[this.model.fields.parentId]=i[0].getAttribute("id")),s}},_addNodesWhenObject:function(i,s){var l,n,o,a,r,d,h=JSON.stringify(this._dataSource),c=this.dataSource();if(this._dataSource=[],null!=this.dataSource()&&this.dataSource()instanceof t.DataManager&&(c=[]),null!=s[0]&&s.length>0&&(l=s[0].getAttribute("id")),t.isNullOrUndefined(i.length))this._dataSource.push(i),t.isNullOrUndefined(this.dataSource())||(this._setNodeId(i,this.model.fields),t.isNullOrUndefined(l)||(i[this.model.fields.parentId]=l),c.push(i));else if(this._dataSource=i,!t.isNullOrUndefined(this.dataSource()))for(o=0;o<i.length;o++)this._setNodeId(i[o],this.model.fields),l?i[o][this.model.fields.parentId]=l:delete i[o][this.model.fields.parentId],c.push(i[o]);for(n=this._templateType,this._templateType=2,this._liList||(this._liList=e("li",this.element)),a=document.createDocumentFragment(),r=0,d=this._dataSource.length;r<d;r++)a.appendChild(this._genTemplate(this._dataSource[r],this.model.fields)),this._liList.push(e(a).children()[0]);return this._templateType=n,null==this.dataSource()||this.dataSource()instanceof t.DataManager||(this._dataSource=JSON.parse(h)),a},_setNodeId:function(e,i){var s,l,n,o=i&&i.id?i.id:this.model.fields.id;if((t.isNullOrUndefined(e[o])||""==e[o])&&(e[o]=this._id+"_"+this._indexID,this._indexID++),e.hasOwnProperty("child"))for(l=0,n=(s=e.child).length;l<n;l++)this._setNodeId(s[l],i.child)},_addExpandedNodes:function(t){var i=this.model.expandedNodes;this._removeNullInArray(i),-1==e.inArray(t,i)&&this.model.expandedNodes.push(t),this._persistValues(this.model.expandedNodes,"expandedNodes")},_removeExpandedNodes:function(t){var i=this.model.expandedNodes;e.inArray(t,i)>-1&&(this.model.expandedNodes.splice(e.inArray(t,i),1),0==i.length&&i.push(-1)),this._persistValues(this.model.expandedNodes,"expandedNodes")},_persistValues:function(i,s){var l,n,o,a,r,d,h,c;if(!t.isNullOrUndefined(this.model.fields)&&null!=this.dataSource()){for(n=[],r=0,d=(l=i).length;r<d;r++)!t.isNullOrUndefined(l[r])&&l[r]>=0&&(o=this._liList[l[r]],(a=e(o).attr("id"))&&n.push(a));(h=this._getCookies("_persistedValues"))&&((c=JSON.parse(h))[s]=n,c=this._updatePersistAttr(c),this._setCookies("_persistedValues",JSON.stringify(c)))}},_updatePersistAttr:function(i){return t.isNullOrUndefined(this._ignoreOnPersist)?(-1==e.inArray("selectedNodes",this._addToPersist)&&delete i.selectedNodes,-1==e.inArray("expandedNodes",this._addToPersist)&&delete i.expandedNodes,-1==e.inArray("checkedNodes",this._addToPersist)&&delete i.checkedNodes):(e.inArray("selectedNodes",this._ignoreOnPersist)>-1&&delete i.selectedNodes,e.inArray("expandedNodes",this._ignoreOnPersist)>-1&&delete i.expandedNodes,e.inArray("checkedNodes",this._ignoreOnPersist)>-1&&delete i.checkedNodes),i},_onChecked:function(e,i){var s,l,n,o=e.closest(".e-item");nodeDetails=this._getNodeDetails(o),this._CurrenctSelectedNodes.push(nodeDetails.text),s=this._isChecked(o),l=t.isNullOrUndefined(i)||t.isNullOrUndefined(i.event)?"":i.event,n={currentElement:o,id:nodeDetails.id,parentId:nodeDetails.parentId,value:nodeDetails.text,currentNode:this._CurrenctSelectedNodes,currentCheckedNodes:this._checkedArray,isChecked:s,event:l},this._isRender&&this._triggerEvent("nodeCheck",n)},_onUnChecked:function(e,i){var s,l,n,o=e.closest(".e-item");nodeDetails=this._getNodeDetails(o),this._CurrenctSelectedNodes.push(nodeDetails.text),s=this._isChecked(o),l=t.isNullOrUndefined(i)||t.isNullOrUndefined(i.event)?"":i.event,n={currentElement:o,id:nodeDetails.id,parentId:nodeDetails.parentId,value:nodeDetails.text,currentNode:nodeDetails.text,currentUncheckedNodes:this._uncheckedArray,isChecked:s,event:l},this._triggerEvent("nodeUncheck",n)},_addCheckNodes:function(e){var t=this.model.checkedNodes;this._removeNullInArray(t),!t instanceof Array&&(t=[]),-1==t.indexOf(e)&&t.push(e)},_removeCheckNodes:function(e){var t,i=this.model.checkedNodes;!i instanceof Array&&(i=[]),-1!=(t=i.indexOf(e))&&(i.splice(t,1),0==i.length&&i.push(-1))},_removeNullInArray:function(e){var t=e.indexOf(-1);-1!=t&&e.splice(t,1)},_afterInsertingNode:function(e){this._addDragableClass(),this._finalizeEditing(e);var t=e.closest("ul").closest(".e-item");this._modifyCss(t),this._updateCheckState(t),this._isSelectedAction(),t.length>0&&t.hasClass("e-node-disable")&&this._nodeDisableAction(t),this._updateSelectedNode()},_insertBeforeOrAfter:function(i,s,l){if(null!=(s=this._getNodeByID(s))[0]&&s.is("LI")&&s.hasClass("e-item")){if(this._triggerEvent("beforeAdd",{data:i,targetParent:null!=s[0]?s:null,parentDetails:this._getNodeDetails(s)}))return;if(this._isRender=!1,"object"!=typeof i&&(i=this._createObjectByText(i)),"object"!=typeof i)return;i[this.model.parentId]&&delete i[this.model.parentId],outerLi=this._addNodesWhenObject(i,s),temp=document.createElement("ul"),e(temp).append(outerLi),outerLi=e(temp.children),this.model.showCheckbox&&outerLi.children().find(".nodecheckbox").ejCheckBox({cssClass:this.model.cssClass,change:this._checkedChange}),s.parents(".e-item:first").length>0?s.parents(".e-item:first").append(outerLi):this.element.append(outerLi),this.model.showCheckbox&&this._isCheckedAction(),this._dropAsSiblingNode(s,outerLi.find("> div > .e-text"),l,""),this._afterInsertingNode(outerLi),this._isRender=!0,this._triggerEvent("nodeAdd",{data:i,nodes:outerLi,parentElement:null!=s[0]?s:null,parentDetails:this._getNodeDetails(s)});var n=this,o=this.dataSource();setTimeout(function(){null==n.dataSource()||n.dataSource()instanceof t.DataManager||(n._dataSource=n._groupingObjects(o,function(e){return[!t.isNullOrUndefined(e)&&[e[n.model.fields.parentId]].toString()]}))},300)}},_getNodeByID:function(t){return"object"!=typeof t&&""!=t&&t!=s?this.element.find(this._checkValidId(t.toString())):((t=e(t)).is("A")&&t.hasClass("e-text")&&(t=t.closest(".e-item")),t)},_checkValidId:function(e){return"#"==e[0]?e.replace(/(:|\.|\[|\]|,)/g,"\\$1"):"#"+e.replace(/(:|\.|\[|\]|,)/g,"\\$1")},_isTreeElement:function(t){return null!=e(t)[0]&&t.is("LI")&&t.hasClass("e-item")},_isUrl:function(e){return/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/.test(e)},_getChildUl:function(e){return this.model.fullRowSelect?e.children[2]:e.children[1]},_sendAjaxOptions:function(e,t){var i,s,l=this;(i=this._getNodeDetails(t)).mapper=this.model.fields,i.model=this.model,s={url:e,data:i,type:"POST",async:!0,crossDomain:!0,dataType:"JSON",contentType:"application/json; charset=utf-8",success:function(e){try{l._ajaxSuccessHandler(e,t)}catch(e){}},error:function(e){try{l._ajaxErrorHandler(e)}catch(e){}}},this._sendAjaxRequest(s)},_sendAjaxRequest:function(t){var i=JSON.parse(JSON.stringify(t));delete i.success,delete i.error,this._triggerEvent("beforeLoad",{ajaxOptions:i})||(delete i.success,delete i.error,e.extend(t,i),e.ajax({type:t.type,url:t.url,dataType:t.dataType,data:t.data,async:t.async,contentType:t.contentType,crossDomain:t.crossDomain,success:t.success,error:t.error}))},_ajaxSuccessHandler:function(e,t){this._isRender=!1,"object"==typeof e&&this.addNode(e,t),this._isRender=!0,this._triggerEvent("loadSuccess",{data:e,targetParent:t,parentDetails:this._getNodeDetails(t)})},_ajaxErrorHandler:function(e){this._triggerEvent("loadError",{error:e})},_wireEvents:function(){this._on(this.element,this._isDevice&&e.isFunction(e.fn.tap)?"tap":"click",this._ClickEventHandler)._on(this.element,this._isDevice&&e.isFunction(e.fn.tap)?this._touchExpandOn:this.model.expandOn,this._expandEventHandler)._on(this.element,"focus",this._onFocusHandler)._on(this.element,"blur",this._onFocusOutHandler),this._wholeRowEvents("_on"),this.model.allowEditing&&this._allowEditable(),this.model.allowDragAndDrop&&this._addDragableClass(),this.model.showCheckbox&&this.element.find(".nodecheckbox").ejCheckBox("enable"),this.model.allowKeyboardNavigation&&this._on(this.element,"keydown",this._KeyPress)},_unWireEvents:function(){this._off(this.element,this._isDevice&&e.isFunction(e.fn.tap)?"tap":"click")._off(this.element,this._isDevice&&e.isFunction(e.fn.tap)?this._touchExpandOn:this.model.expandOn)._off(this.element,"focus")._off(this.element,"blur"),this._wholeRowEvents("_off"),this._preventEditable(),this._preventDraggable(),this.model.allowKeyboardNavigation&&this._off(this.element,"keydown"),this.model.showCheckbox&&this.element.find(".nodecheckbox").ejCheckBox("disable")},_wholeRowEvents:function(t){this.model.fullRowSelect?(this[t](this.element,this._isDevice&&e.isFunction(e.fn.touchstart)?"touchstart":"mouseenter",".e-text-wrap",this._liMouseEnterEvent),this[t](this.element,this._isDevice&&e.isFunction(e.fn.touchend)?"touchend":"mouseleave",".e-text-wrap",this._liMouseLeaveEvent),this[t](this.element,this._isDevice&&e.isFunction(e.fn.touchstart)?"touchstart":"mouseenter",".e-fullrow",this._liMouseEnterEvent),this[t](this.element,this._isDevice&&e.isFunction(e.fn.touchend)?"touchend":"mouseleave",".e-fullrow",this._liMouseLeaveEvent)):(this[t](this.element,this._isDevice&&e.isFunction(e.fn.touchstart)?"touchstart":"mouseenter",".e-text",this._mouseEnterEvent),this[t](this.element,this._isDevice&&e.isFunction(e.fn.touchend)?"touchend":"mouseleave",".e-text",this._mouseLeaveEvent))},_enableDragDrop:function(){this.model.allowDragAndDrop&&(this._drag(),this.model.allowDropChild&&this._childDrop(),this.model.allowDropSibling&&this._siblingDrop())},_allowEditable:function(){this.model.template||(this.element.find(".e-item").addClass("AllowEdit"),this._on(e(document),"click",this._documentClick)._on(this.element,this._isDevice&&e.isFunction(e.fn.tap)?"doubletap":"dblclick","a.e-text",this._inlineEdit))},_preventEditable:function(){this.element.find(".e-item").removeClass("AllowEdit"),this._off(e(document),"click")._off(this.element,this._isDevice&&e.isFunction(e.fn.tap)?"doubletap":"dblclick","a.e-text")},_preventDraggable:function(){this.element.find(".e-draggable, .e-droppable").removeClass("e-draggable e-droppable"),this._preventDropSibling(),this._preventDropChild(),this._off(this.element,"mouseup touchstart pointerdown MSPointerDown",this._anchors,this._focusElement)},_preventDropSibling:function(){this.element.find(".e-dropsibling").removeClass("e-dropsibling")},_preventDropChild:function(){this.element.find(".e-item > div > .e-dropchild").removeClass("e-dropchild")},_getNodeData:function(i){var l,n,o,a,r,d;if(!(t.isNullOrUndefined(this.model.fields)||null==this.dataSource()||this.dataSource()instanceof t.DataManager||i==s)){if(this._updatePersistProb(),l=[],2==this._templateType)l=t.DataManager(this._newDataSource).executeLocal(t.Query().where(this.model.fields.id,"equal",i,!1));else{var h=[],c=this._newDataSource,u=t.Query().where(this.model.fields.id,"equal",i,!1),m=t.DataManager(c).executeLocal(u),p=this._getFilterItems(m[0],c);for(n=0,o=p.length;n<o;n++)h.push(new t.Predicate(this.model.fields.id,"equal",p[n],!1));a=t.Query().where(t.Predicate.or(h)),l=t.DataManager(c).executeLocal(a)}for(r=0,d=l.length;r<d;r++)0==e(document.getElementById(l[r][this.model.fields.id])).find("> ul .e-item").length?delete l[r][this.model.fields.hasChild]:1==this._templateType&&(l[r][this.model.fields.hasChild]=!0);return l}},_getFilterItems:function(e,i){var s,l,n,o,a,r,d,h=[];for(h.push(e.id),s=t.Query().where(this.model.fields.parentId,"equal",e.id,!1),n=0,o=(l=t.DataManager(i).executeLocal(s)).length;n<o;n++)for(r=0,d=(a=this._getFilterItems(l[n],i)).length;r<d;r++)h.push(a[r]);return h},refresh:function(){this._unWireEvents(),this.element.html(""),this._init()},expandAll:function(e,t){this.model.enableMultipleExpand&&(e>0?this._expandByLevel(this._getElement(),e,t):this._expandAll(t))},collapseAll:function(e,t){this.model.enableMultipleExpand&&(e>0?this._collapseByLevel(this._getElement(),e,t):this._collapseAll(t))},checkAll:function(){this.model.showCheckbox&&this._checkAll()},unCheckAll:function(){this.model.showCheckbox&&this._uncheckAll()},selectNode:function(e){e&&"object"==typeof e&&e.length>0?(this._unselectAll(),this._doSelectNodes(e,!0)):(e=this._getNodeByID(e),this._isTreeElement(e)&&this._nodeSelectionAction(e))},unselectNode:function(e){e&&"object"==typeof e&&e.length>0?this._doUnselectNodes(e):(e=this._getNodeByID(e),this._isTreeElement(e)&&this._nodeUnSelectionAction(e))},selectAll:function(){this.model.allowMultiSelection&&this._selectAll()},unselectAll:function(){this.model.allowMultiSelection&&this._unselectAll()},enableNode:function(e){e=this._getNodeByID(e),this._isTreeElement(e)&&this._nodeEnableAction(e)},disableNode:function(e){e=this._getNodeByID(e),this._isTreeElement(e)&&this._nodeDisableAction(e)},addNodes:function(e,t){if(e&&"object"==typeof e&&t==s&&e.length>0)for(var i=0;i<e.length;i++)this.addNode(e[i],t);else this.addNode(e,t)},addNode:function(i,s){var l,n,o,a,r,d,h;t.isNullOrUndefined(i)||(l=null,a=s?this._getNodeByID(s):this.model.allowMultiSelection?this.getSelectedNodes():this.getSelectedNode(),"object"==typeof i&&(t.isNullOrUndefined(i.length)&&!t.isNullOrUndefined(i[this.model.fields.parentId])?o=i[this.model.fields.parentId]:t.isNullOrUndefined(i.length)||1!=i.length||(o=i[0][this.model.fields.parentId]),o&&(a=this._getNodeByID(o))),a=this._isTreeElement(a)?e(a[0]):[],this._triggerEvent("beforeAdd",{data:i,targetParent:null!=a[0]?a:null,parentDetails:this._getNodeDetails(a)}))||(0==a.length||a.hasClass("e-node-disable")||this._expandNode(a),"object"!=typeof i&&(i=this._createObjectByText(i,a)),"object"!=typeof i||t.isNullOrUndefined(i.length)&&0==i.length)||(l=this._addNodesWhenObject(i,a),n=document.createElement("ul"),e(n).append(l),l=e(n.children),this.model.showCheckbox&&l.children().find(".nodecheckbox").ejCheckBox({cssClass:this.model.cssClass,change:this._checkedChange}),this._appendNode(a,l),null!=a[0]&&((r=e(a[0].childNodes[0].childNodes[0])).hasClass("e-plus")||r.hasClass("e-minus")?r.removeClass("e-load"):r.removeClass("e-icon e-load")),null!=a[0]&&a.find("> div > .e-minus").length>0&&!this.model.enableMultipleExpand&&this._denyMultipleExpand(a),this._updateNodes(),this._afterInsertingNode(l),this._triggerEvent("nodeAdd",{data:i,nodes:l,parentElement:null!=a[0]?a:null,parentDetails:this._getNodeDetails(a)}),d=this,h=this.dataSource(),setTimeout(function(){null==d.dataSource()||d.dataSource()instanceof t.DataManager||(d._dataSource=d._groupingObjects(h,function(e){return[!t.isNullOrUndefined(e)&&[e[d.model.fields.parentId]].toString()]}))},300))},removeNode:function(e){e=e?this._getNodeByID(e):this.model.allowMultiSelection?this.getSelectedNodes():this.getSelectedNode(),this._isTreeElement(e)&&this._removeNode(e)},removeAll:function(){this._liList.remove(),this._updateNodes()},checkNode:function(e){this.model.showCheckbox&&(e=this._getNodeByID(e),this._isTreeElement(e)&&this._nodeCheck(e.find("> div > .e-chkbox-wrap > .nodecheckbox:first")[0]))},uncheckNode:function(e){this.model.showCheckbox&&(e=this._getNodeByID(e),this._isTreeElement(e)&&this._nodeUncheck(e.find("> div > .e-chkbox-wrap > .nodecheckbox:first")[0]))},expandNode:function(e){e=this._getNodeByID(e),this._isTreeElement(e)&&(this._allowOnDemand=!0,this._expandNode(e),this._allowOnDemand=!1)},collapseNode:function(e){e=this._getNodeByID(e),this._isTreeElement(e)&&this._collpaseNode(e)},showNode:function(e){e=this._getNodeByID(e),this._isTreeElement(e)&&e.css("visibility","").removeClass("hidden")},hideNode:function(e){e=this._getNodeByID(e),this._isTreeElement(e)&&e.css("visibility","hidden").addClass("hidden")},show:function(){this.element.css("visibility","").find(".e-item").removeClass("hidden")},hide:function(){this.element.css("visibility","hidden").find(".e-item").addClass("hidden")},hasChildNode:function(e){return e=this._getNodeByID(e),this._isTreeElement(e)?e.find("> ul > .e-item").length>0:void 0},isChildLoaded:function(e){return e=this._getNodeByID(e),!!(this._isTreeElement(e)&&e.find("ul > .e-item").length>0)},isNodeChecked:function(e){return e=this._getNodeByID(e),this._isTreeElement(e)?this._isChecked(e):void 0},isExpanded:function(e){return e=this._getNodeByID(e),this._isTreeElement(e)?this._isNodeExpanded(e):void 0},isVisible:function(e){return e=this._getNodeByID(e),!(!this._isTreeElement(e)||"hidden"==e.css("visibility"))},isExist:function(e){return e=this._getNodeByID(e),!(!this._isTreeElement(e)||-1==this._liList.index(e))},isSelected:function(e){return e=this._getNodeByID(e),this._isTreeElement(e)?e.find("> div > .e-text").hasClass("e-active"):void 0},isDisabled:function(e){return e=this._getNodeByID(e),!(!this._isTreeElement(e)||!e.hasClass("e-node-disable"))},getTreeData:function(e){return e!=s?this._getNodeData(e):t.isNullOrUndefined(this.model.fields)||null==this.dataSource()||this.dataSource()instanceof t.DataManager?void 0:this._orderDataSource()},getText:function(t){return t=this._getNodeByID(t),this._isTreeElement(t)?e.trim(this.element.find(t).find("> div > .e-text").text()):void 0},getSelectedNode:function(){return this.model.allowMultiSelection?null:this.element.find(".e-item > div > .e-active").closest(".e-item")},getSelectedNodes:function(){return this.element.find(".e-item > div > .e-active").closest(".e-item")},getCheckedNodes:function(){if(this.model.showCheckbox)return this._liList.find('> div > .e-chkbox-wrap[aria-checked="true"]').closest(".e-item")},getExpandedNodes:function(){return this.element.find(".e-item > div > .e-minus").closest(".e-item")},getExpandedNodesIndex:function(){return this._getNodesIndex(this.getExpandedNodes())},getCheckedNodesIndex:function(){return this._getNodesIndex(this.getCheckedNodes())},getSelectedNodeIndex:function(){return this.model.allowMultiSelection?null:this._getNodesIndex(this.getSelectedNode())},getSelectedNodesIndex:function(){return this._getNodesIndex(this.getSelectedNodes())},getVisibleNodes:function(){return this.element.find(".e-item:visible:not(.hidden, .e-node-disable)")},getNodeCount:function(){return this.element.find(".e-item").length},getNode:function(e){return e=this._getNodeByID(e),this._isTreeElement(e)?this._getNodeDetails(e):null},getNodeIndex:function(e){return e=this._getNodeByID(e),this._isTreeElement(e)?this._liList.index(e):void 0},getNodeByIndex:function(t){if("number"==typeof t)return e(this._liList[t])},getParent:function(e){return e=this._getNodeByID(e),this._isTreeElement(e)?e.parents(".e-item:first"):void 0},getChildren:function(e,t){return e=this._getNodeByID(e),this._isTreeElement(e)?t?e.find(".e-item"):e.find("> ul > .e-item"):void 0},updateText:function(i,s){if(i=this._getNodeByID(i),this._isTreeElement(i)&&!t.isNullOrUndefined(s)){var l,n,o=this.element.find(i).children("div").find("> .e-text")[0];if(null!=o){if(n={currentElement:e(o)},this._triggerEvent("beforeEdit",n))return!1;l=o.lastChild.nodeValue}o.lastChild.nodeValue=s,this._updateField(this._newDataSource,i.attr("id"),this.model.fields.text,s),this._triggerEvent("nodeEdit",{id:i.attr("id"),oldText:l,newText:s,target:i,nodeDetails:this._getNodeDetails(i),event:null})}},insertAfter:function(e,t){this._insertBeforeOrAfter(e,t,!1)},insertBefore:function(e,t){this._insertBeforeOrAfter(e,t,!0)},moveNode:function(e,i,s){if(e=this._getNodeByID(e),i=this._getNodeByID(i),this._isTreeElement(e)){if(e.parents(".e-item")[0]==i[0]&&t.isNullOrUndefined(s)||i.find(e).index()==s||null==i[0]&&this._liList.index(e)==s)return;var l=null!=i[0]&&s>=0?i.find("> ul > .e-item").eq(s):this.getNodeByIndex(s);this._isRender=!1,this._isTreeElement(l)?l.parents(".e-item:first")[0]==e.parents(".e-item:first")[0]&&null==l.next(".e-item")[0]?this._dropAsSiblingNode(l,e.find(" > div > .e-text"),!1,""):this._dropAsSiblingNode(l,e.find(" > div > .e-text"),!0,""):this._dropAsChildNode(i,e.find(" > div > .e-text"),""),i.length>0&&i.hasClass("e-node-disable")&&this._nodeDisableAction(i),this._isRender=!0}},loadData:function(e,t){t=this._getNodeByID(t),this._isUrl(e)&&(null==t[0]||this._isTreeElement(t))&&this._sendAjaxOptions(e,t)},ensureVisible:function(t){var i,s,l,n;if(t=this._getNodeByID(t),this._isTreeElement(t)&&!this.isDisabled(t)&&this.isVisible(t)){for(l=0,n=(i=t.parents(".e-item")).length;l<n;l++)this._expandNode(e(i[l]));return s=t.offset(),t.animate({scrollTop:s.top},this.model.enableAnimation?350:0,"linear",function(){t.find("> div > a.e-text")[0].scrollIntoView(!1)}),!0}return!1},_triggerEvent:function(e,t){if(this._isRender)return this._trigger(e,t)}})}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).bootstrap=t()}(this,function(){"use strict";const e=new Map,t={set(t,i,s){e.has(t)||e.set(t,new Map);const l=e.get(t);l.has(i)||0===l.size?l.set(i,s):console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(l.keys())[0]}.`)},get:(t,i)=>e.has(t)&&e.get(t).get(i)||null,remove(t,i){if(!e.has(t))return;const s=e.get(t);s.delete(i),0===s.size&&e.delete(t)}},i="transitionend",s=e=>(e&&window.CSS&&window.CSS.escape&&(e=e.replace(/#([^\s"#']+)/g,(e,t)=>`#${CSS.escape(t)}`)),e),l=e=>{e.dispatchEvent(new Event(i))},n=e=>!(!e||"object"!=typeof e)&&(void 0!==e.jquery&&(e=e[0]),void 0!==e.nodeType),o=e=>n(e)?e.jquery?e[0]:e:"string"==typeof e&&e.length>0?document.querySelector(s(e)):null,a=e=>{if(!n(e)||0===e.getClientRects().length)return!1;const t="visible"===getComputedStyle(e).getPropertyValue("visibility"),i=e.closest("details:not([open])");if(!i)return t;if(i!==e){const t=e.closest("summary");if(t&&t.parentNode!==i)return!1;if(null===t)return!1}return t},r=e=>!e||e.nodeType!==Node.ELEMENT_NODE||!!e.classList.contains("disabled")||(void 0!==e.disabled?e.disabled:e.hasAttribute("disabled")&&"false"!==e.getAttribute("disabled")),d=e=>{if(!document.documentElement.attachShadow)return null;if("function"==typeof e.getRootNode){const t=e.getRootNode();return t instanceof ShadowRoot?t:null}return e instanceof ShadowRoot?e:e.parentNode?d(e.parentNode):null},h=()=>{},c=e=>{e.offsetHeight},u=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,m=[],p=()=>"rtl"===document.documentElement.dir,g=e=>{var t;t=()=>{const t=u();if(t){const i=e.NAME,s=t.fn[i];t.fn[i]=e.jQueryInterface,t.fn[i].Constructor=e,t.fn[i].noConflict=()=>(t.fn[i]=s,e.jQueryInterface)}},"loading"===document.readyState?(m.length||document.addEventListener("DOMContentLoaded",()=>{for(const e of m)e()}),m.push(t)):t()},f=(e,t=[],i=e)=>"function"==typeof e?e(...t):i,_=(e,t,s=!0)=>{if(!s)return void f(e);const n=(e=>{if(!e)return 0;let{transitionDuration:t,transitionDelay:i}=window.getComputedStyle(e);const s=Number.parseFloat(t),l=Number.parseFloat(i);return s||l?(t=t.split(",")[0],i=i.split(",")[0],1e3*(Number.parseFloat(t)+Number.parseFloat(i))):0})(t)+5;let o=!1;const a=({target:s})=>{s===t&&(o=!0,t.removeEventListener(i,a),f(e))};t.addEventListener(i,a),setTimeout(()=>{o||l(t)},n)},v=(e,t,i,s)=>{const l=e.length;let n=e.indexOf(t);return-1===n?!i&&s?e[l-1]:e[0]:(n+=i?1:-1,s&&(n=(n+l)%l),e[Math.max(0,Math.min(n,l-1))])},b=/[^.]*(?=\..*)\.|.*/,C=/\..*/,w=/::\d+$/,y={};let S=1;const x={mouseenter:"mouseover",mouseleave:"mouseout"},T=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function D(e,t){return t&&`${t}::${S++}`||e.uidEvent||S++}function k(e){const t=D(e);return e.uidEvent=t,y[t]=y[t]||{},y[t]}function I(e,t,i=null){return Object.values(e).find(e=>e.callable===t&&e.delegationSelector===i)}function O(e,t,i){const s="string"==typeof t,l=s?i:t||i;let n=A(e);return T.has(n)||(n=e),[s,l,n]}function R(e,t,i,s,l){if("string"!=typeof t||!e)return;let[n,o,a]=O(t,i,s);if(t in x){const e=e=>function(t){if(!t.relatedTarget||t.relatedTarget!==t.delegateTarget&&!t.delegateTarget.contains(t.relatedTarget))return e.call(this,t)};o=e(o)}const r=k(e),d=r[a]||(r[a]={}),h=I(d,o,n?i:null);if(h)return void(h.oneOff=h.oneOff&&l);const c=D(o,t.replace(b,"")),u=n?function(e,t,i){return function s(l){const n=e.querySelectorAll(t);for(let{target:o}=l;o&&o!==this;o=o.parentNode)for(const a of n)if(a===o)return P(l,{delegateTarget:o}),s.oneOff&&M.off(e,l.type,t,i),i.apply(o,[l])}}(e,i,o):function(e,t){return function i(s){return P(s,{delegateTarget:e}),i.oneOff&&M.off(e,s.type,t),t.apply(e,[s])}}(e,o);u.delegationSelector=n?i:null,u.callable=o,u.oneOff=l,u.uidEvent=c,d[c]=u,e.addEventListener(a,u,n)}function N(e,t,i,s,l){const n=I(t[i],s,l);n&&(e.removeEventListener(i,n,Boolean(l)),delete t[i][n.uidEvent])}function E(e,t,i,s){const l=t[i]||{};for(const[n,o]of Object.entries(l))n.includes(s)&&N(e,t,i,o.callable,o.delegationSelector)}function A(e){return e=e.replace(C,""),x[e]||e}const M={on(e,t,i,s){R(e,t,i,s,!1)},one(e,t,i,s){R(e,t,i,s,!0)},off(e,t,i,s){if("string"!=typeof t||!e)return;const[l,n,o]=O(t,i,s),a=o!==t,r=k(e),d=r[o]||{},h=t.startsWith(".");if(void 0===n){if(h)for(const i of Object.keys(r))E(e,r,i,t.slice(1));for(const[i,s]of Object.entries(d)){const l=i.replace(w,"");a&&!t.includes(l)||N(e,r,o,s.callable,s.delegationSelector)}}else{if(!Object.keys(d).length)return;N(e,r,o,n,l?i:null)}},trigger(e,t,i){if("string"!=typeof t||!e)return null;const s=u();let l=null,n=!0,o=!0,a=!1;t!==A(t)&&s&&(l=s.Event(t,i),s(e).trigger(l),n=!l.isPropagationStopped(),o=!l.isImmediatePropagationStopped(),a=l.isDefaultPrevented());const r=P(new Event(t,{bubbles:n,cancelable:!0}),i);return a&&r.preventDefault(),o&&e.dispatchEvent(r),r.defaultPrevented&&l&&l.preventDefault(),r}};function P(e,t={}){for(const[i,s]of Object.entries(t))try{e[i]=s}catch(t){Object.defineProperty(e,i,{configurable:!0,get:()=>s})}return e}function L(e){if("true"===e)return!0;if("false"===e)return!1;if(e===Number(e).toString())return Number(e);if(""===e||"null"===e)return null;if("string"!=typeof e)return e;try{return JSON.parse(decodeURIComponent(e))}catch(t){return e}}function F(e){return e.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`)}const j={setDataAttribute(e,t,i){e.setAttribute(`data-bs-${F(t)}`,i)},removeDataAttribute(e,t){e.removeAttribute(`data-bs-${F(t)}`)},getDataAttributes(e){if(!e)return{};const t={},i=Object.keys(e.dataset).filter(e=>e.startsWith("bs")&&!e.startsWith("bsConfig"));for(const s of i){let i=s.replace(/^bs/,"");i=i.charAt(0).toLowerCase()+i.slice(1,i.length),t[i]=L(e.dataset[s])}return t},getDataAttribute:(e,t)=>L(e.getAttribute(`data-bs-${F(t)}`))};class V{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(e){return e=this._mergeConfigObj(e),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}_configAfterMerge(e){return e}_mergeConfigObj(e,t){const i=n(t)?j.getDataAttribute(t,"config"):{};return{...this.constructor.Default,..."object"==typeof i?i:{},...n(t)?j.getDataAttributes(t):{},..."object"==typeof e?e:{}}}_typeCheckConfig(e,t=this.constructor.DefaultType){for(const[s,l]of Object.entries(t)){const t=e[s],o=n(t)?"element":null==(i=t)?`${i}`:Object.prototype.toString.call(i).match(/\s([a-z]+)/i)[1].toLowerCase();if(!new RegExp(l).test(o))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${s}" provided type "${o}" but expected type "${l}".`)}var i}}class z extends V{constructor(e,i){super(),(e=o(e))&&(this._element=e,this._config=this._getConfig(i),t.set(this._element,this.constructor.DATA_KEY,this))}dispose(){t.remove(this._element,this.constructor.DATA_KEY),M.off(this._element,this.constructor.EVENT_KEY);for(const e of Object.getOwnPropertyNames(this))this[e]=null}_queueCallback(e,t,i=!0){_(e,t,i)}_getConfig(e){return e=this._mergeConfigObj(e,this._element),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}static getInstance(e){return t.get(o(e),this.DATA_KEY)}static getOrCreateInstance(e,t={}){return this.getInstance(e)||new this(e,"object"==typeof t?t:null)}static get VERSION(){return"5.3.3"}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(e){return`${e}${this.EVENT_KEY}`}}const H=e=>{let t=e.getAttribute("data-bs-target");if(!t||"#"===t){let i=e.getAttribute("href");if(!i||!i.includes("#")&&!i.startsWith("."))return null;i.includes("#")&&!i.startsWith("#")&&(i=`#${i.split("#")[1]}`),t=i&&"#"!==i?i.trim():null}return t?t.split(",").map(e=>s(e)).join(","):null},U={find:(e,t=document.documentElement)=>[].concat(...Element.prototype.querySelectorAll.call(t,e)),findOne:(e,t=document.documentElement)=>Element.prototype.querySelector.call(t,e),children:(e,t)=>[].concat(...e.children).filter(e=>e.matches(t)),parents(e,t){const i=[];let s=e.parentNode.closest(t);for(;s;)i.push(s),s=s.parentNode.closest(t);return i},prev(e,t){let i=e.previousElementSibling;for(;i;){if(i.matches(t))return[i];i=i.previousElementSibling}return[]},next(e,t){let i=e.nextElementSibling;for(;i;){if(i.matches(t))return[i];i=i.nextElementSibling}return[]},focusableChildren(e){const t=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(e=>`${e}:not([tabindex^="-"])`).join(",");return this.find(t,e).filter(e=>!r(e)&&a(e))},getSelectorFromElement(e){const t=H(e);return t&&U.findOne(t)?t:null},getElementFromSelector(e){const t=H(e);return t?U.findOne(t):null},getMultipleElementsFromSelector(e){const t=H(e);return t?U.find(t):[]}},B=(e,t="hide")=>{const i=`click.dismiss${e.EVENT_KEY}`,s=e.NAME;M.on(document,i,`[data-bs-dismiss="${s}"]`,function(i){if(["A","AREA"].includes(this.tagName)&&i.preventDefault(),r(this))return;const l=U.getElementFromSelector(this)||this.closest(`.${s}`);e.getOrCreateInstance(l)[t]()})},$=".bs.alert",W=`close${$}`,q=`closed${$}`;class G extends z{static get NAME(){return"alert"}close(){if(M.trigger(this._element,W).defaultPrevented)return;this._element.classList.remove("show");const e=this._element.classList.contains("fade");this._queueCallback(()=>this._destroyElement(),this._element,e)}_destroyElement(){this._element.remove(),M.trigger(this._element,q),this.dispose()}static jQueryInterface(e){return this.each(function(){const t=G.getOrCreateInstance(this);if("string"==typeof e){if(void 0===t[e]||e.startsWith("_")||"constructor"===e)throw new TypeError(`No method named "${e}"`);t[e](this)}})}}B(G,"close"),g(G);const K='[data-bs-toggle="button"]';class Q extends z{static get NAME(){return"button"}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle("active"))}static jQueryInterface(e){return this.each(function(){const t=Q.getOrCreateInstance(this);"toggle"===e&&t[e]()})}}M.on(document,"click.bs.button.data-api",K,e=>{e.preventDefault();const t=e.target.closest(K);Q.getOrCreateInstance(t).toggle()}),g(Q);const Y=".bs.swipe",J=`touchstart${Y}`,X=`touchmove${Y}`,Z=`touchend${Y}`,ee=`pointerdown${Y}`,te=`pointerup${Y}`,ie={endCallback:null,leftCallback:null,rightCallback:null},se={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class le extends V{constructor(e,t){super(),this._element=e,e&&le.isSupported()&&(this._config=this._getConfig(t),this._deltaX=0,this._supportPointerEvents=Boolean(window.PointerEvent),this._initEvents())}static get Default(){return ie}static get DefaultType(){return se}static get NAME(){return"swipe"}dispose(){M.off(this._element,Y)}_start(e){this._supportPointerEvents?this._eventIsPointerPenTouch(e)&&(this._deltaX=e.clientX):this._deltaX=e.touches[0].clientX}_end(e){this._eventIsPointerPenTouch(e)&&(this._deltaX=e.clientX-this._deltaX),this._handleSwipe(),f(this._config.endCallback)}_move(e){this._deltaX=e.touches&&e.touches.length>1?0:e.touches[0].clientX-this._deltaX}_handleSwipe(){const e=Math.abs(this._deltaX);if(e<=40)return;const t=e/this._deltaX;this._deltaX=0,t&&f(t>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(M.on(this._element,ee,e=>this._start(e)),M.on(this._element,te,e=>this._end(e)),this._element.classList.add("pointer-event")):(M.on(this._element,J,e=>this._start(e)),M.on(this._element,X,e=>this._move(e)),M.on(this._element,Z,e=>this._end(e)))}_eventIsPointerPenTouch(e){return this._supportPointerEvents&&("pen"===e.pointerType||"touch"===e.pointerType)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const ne=".bs.carousel",oe=".data-api",ae="next",re="prev",de="left",he="right",ce=`slide${ne}`,ue=`slid${ne}`,me=`keydown${ne}`,pe=`mouseenter${ne}`,ge=`mouseleave${ne}`,fe=`dragstart${ne}`,_e=`load${ne}${oe}`,ve=`click${ne}${oe}`,be="carousel",Ce="active",we=".active",ye=".carousel-item",Se=we+ye,xe={ArrowLeft:he,ArrowRight:de},Te={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},De={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class ke extends z{constructor(e,t){super(e,t),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=U.findOne(".carousel-indicators",this._element),this._addEventListeners(),this._config.ride===be&&this.cycle()}static get Default(){return Te}static get DefaultType(){return De}static get NAME(){return"carousel"}next(){this._slide(ae)}nextWhenVisible(){!document.hidden&&a(this._element)&&this.next()}prev(){this._slide(re)}pause(){this._isSliding&&l(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){this._config.ride&&(this._isSliding?M.one(this._element,ue,()=>this.cycle()):this.cycle())}to(e){const t=this._getItems();if(e>t.length-1||e<0)return;if(this._isSliding)return void M.one(this._element,ue,()=>this.to(e));const i=this._getItemIndex(this._getActive());if(i===e)return;const s=e>i?ae:re;this._slide(s,t[e])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(e){return e.defaultInterval=e.interval,e}_addEventListeners(){this._config.keyboard&&M.on(this._element,me,e=>this._keydown(e)),"hover"===this._config.pause&&(M.on(this._element,pe,()=>this.pause()),M.on(this._element,ge,()=>this._maybeEnableCycle())),this._config.touch&&le.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const e of U.find(".carousel-item img",this._element))M.on(e,fe,e=>e.preventDefault());const e={leftCallback:()=>this._slide(this._directionToOrder(de)),rightCallback:()=>this._slide(this._directionToOrder(he)),endCallback:()=>{"hover"===this._config.pause&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),500+this._config.interval))}};this._swipeHelper=new le(this._element,e)}_keydown(e){if(/input|textarea/i.test(e.target.tagName))return;const t=xe[e.key];t&&(e.preventDefault(),this._slide(this._directionToOrder(t)))}_getItemIndex(e){return this._getItems().indexOf(e)}_setActiveIndicatorElement(e){if(!this._indicatorsElement)return;const t=U.findOne(we,this._indicatorsElement);t.classList.remove(Ce),t.removeAttribute("aria-current");const i=U.findOne(`[data-bs-slide-to="${e}"]`,this._indicatorsElement);i&&(i.classList.add(Ce),i.setAttribute("aria-current","true"))}_updateInterval(){const e=this._activeElement||this._getActive();if(!e)return;const t=Number.parseInt(e.getAttribute("data-bs-interval"),10);this._config.interval=t||this._config.defaultInterval}_slide(e,t=null){if(this._isSliding)return;const i=this._getActive(),s=e===ae,l=t||v(this._getItems(),i,s,this._config.wrap);if(l===i)return;const n=this._getItemIndex(l),o=t=>M.trigger(this._element,t,{relatedTarget:l,direction:this._orderToDirection(e),from:this._getItemIndex(i),to:n});if(o(ce).defaultPrevented)return;if(!i||!l)return;const a=Boolean(this._interval);this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(n),this._activeElement=l;const r=s?"carousel-item-start":"carousel-item-end",d=s?"carousel-item-next":"carousel-item-prev";l.classList.add(d),c(l),i.classList.add(r),l.classList.add(r),this._queueCallback(()=>{l.classList.remove(r,d),l.classList.add(Ce),i.classList.remove(Ce,d,r),this._isSliding=!1,o(ue)},i,this._isAnimated()),a&&this.cycle()}_isAnimated(){return this._element.classList.contains("slide")}_getActive(){return U.findOne(Se,this._element)}_getItems(){return U.find(ye,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(e){return p()?e===de?re:ae:e===de?ae:re}_orderToDirection(e){return p()?e===re?de:he:e===re?he:de}static jQueryInterface(e){return this.each(function(){const t=ke.getOrCreateInstance(this,e);if("number"!=typeof e){if("string"==typeof e){if(void 0===t[e]||e.startsWith("_")||"constructor"===e)throw new TypeError(`No method named "${e}"`);t[e]()}}else t.to(e)})}}M.on(document,ve,"[data-bs-slide], [data-bs-slide-to]",function(e){const t=U.getElementFromSelector(this);if(!t||!t.classList.contains(be))return;e.preventDefault();const i=ke.getOrCreateInstance(t),s=this.getAttribute("data-bs-slide-to");return s?(i.to(s),void i._maybeEnableCycle()):"next"===j.getDataAttribute(this,"slide")?(i.next(),void i._maybeEnableCycle()):(i.prev(),void i._maybeEnableCycle())}),M.on(window,_e,()=>{const e=U.find('[data-bs-ride="carousel"]');for(const t of e)ke.getOrCreateInstance(t)}),g(ke);const Ie=".bs.collapse",Oe=`show${Ie}`,Re=`shown${Ie}`,Ne=`hide${Ie}`,Ee=`hidden${Ie}`,Ae=`click${Ie}.data-api`,Me="show",Pe="collapse",Le="collapsing",Fe=`:scope .${Pe} .${Pe}`,je='[data-bs-toggle="collapse"]',Ve={parent:null,toggle:!0},ze={parent:"(null|element)",toggle:"boolean"};class He extends z{constructor(e,t){super(e,t),this._isTransitioning=!1,this._triggerArray=[];const i=U.find(je);for(const e of i){const t=U.getSelectorFromElement(e),i=U.find(t).filter(e=>e===this._element);null!==t&&i.length&&this._triggerArray.push(e)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return Ve}static get DefaultType(){return ze}static get NAME(){return"collapse"}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let e=[];if(this._config.parent&&(e=this._getFirstLevelChildren(".collapse.show, .collapse.collapsing").filter(e=>e!==this._element).map(e=>He.getOrCreateInstance(e,{toggle:!1}))),e.length&&e[0]._isTransitioning)return;if(M.trigger(this._element,Oe).defaultPrevented)return;for(const t of e)t.hide();const t=this._getDimension();this._element.classList.remove(Pe),this._element.classList.add(Le),this._element.style[t]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const i=`scroll${t[0].toUpperCase()+t.slice(1)}`;this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(Le),this._element.classList.add(Pe,Me),this._element.style[t]="",M.trigger(this._element,Re)},this._element,!0),this._element.style[t]=`${this._element[i]}px`}hide(){if(this._isTransitioning||!this._isShown())return;if(M.trigger(this._element,Ne).defaultPrevented)return;const e=this._getDimension();this._element.style[e]=`${this._element.getBoundingClientRect()[e]}px`,c(this._element),this._element.classList.add(Le),this._element.classList.remove(Pe,Me);for(const e of this._triggerArray){const t=U.getElementFromSelector(e);t&&!this._isShown(t)&&this._addAriaAndCollapsedClass([e],!1)}this._isTransitioning=!0,this._element.style[e]="",this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(Le),this._element.classList.add(Pe),M.trigger(this._element,Ee)},this._element,!0)}_isShown(e=this._element){return e.classList.contains(Me)}_configAfterMerge(e){return e.toggle=Boolean(e.toggle),e.parent=o(e.parent),e}_getDimension(){return this._element.classList.contains("collapse-horizontal")?"width":"height"}_initializeChildren(){if(!this._config.parent)return;const e=this._getFirstLevelChildren(je);for(const t of e){const e=U.getElementFromSelector(t);e&&this._addAriaAndCollapsedClass([t],this._isShown(e))}}_getFirstLevelChildren(e){const t=U.find(Fe,this._config.parent);return U.find(e,this._config.parent).filter(e=>!t.includes(e))}_addAriaAndCollapsedClass(e,t){if(e.length)for(const i of e)i.classList.toggle("collapsed",!t),i.setAttribute("aria-expanded",t)}static jQueryInterface(e){const t={};return"string"==typeof e&&/show|hide/.test(e)&&(t.toggle=!1),this.each(function(){const i=He.getOrCreateInstance(this,t);if("string"==typeof e){if(void 0===i[e])throw new TypeError(`No method named "${e}"`);i[e]()}})}}M.on(document,Ae,je,function(e){("A"===e.target.tagName||e.delegateTarget&&"A"===e.delegateTarget.tagName)&&e.preventDefault();for(const e of U.getMultipleElementsFromSelector(this))He.getOrCreateInstance(e,{toggle:!1}).toggle()}),g(He);var Ue="top",Be="bottom",$e="right",We="left",qe="auto",Ge=[Ue,Be,$e,We],Ke="start",Qe="end",Ye="clippingParents",Je="viewport",Xe="popper",Ze="reference",et=Ge.reduce(function(e,t){return e.concat([t+"-"+Ke,t+"-"+Qe])},[]),tt=[].concat(Ge,[qe]).reduce(function(e,t){return e.concat([t,t+"-"+Ke,t+"-"+Qe])},[]),it="beforeRead",st="read",lt="afterRead",nt="beforeMain",ot="main",at="afterMain",rt="beforeWrite",dt="write",ht="afterWrite",ct=[it,st,lt,nt,ot,at,rt,dt,ht];function ut(e){return e?(e.nodeName||"").toLowerCase():null}function mt(e){if(null==e)return window;if("[object Window]"!==e.toString()){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function pt(e){return e instanceof mt(e).Element||e instanceof Element}function gt(e){return e instanceof mt(e).HTMLElement||e instanceof HTMLElement}function ft(e){return"undefined"!=typeof ShadowRoot&&(e instanceof mt(e).ShadowRoot||e instanceof ShadowRoot)}const _t={name:"applyStyles",enabled:!0,phase:"write",fn:function(e){var t=e.state;Object.keys(t.elements).forEach(function(e){var i=t.styles[e]||{},s=t.attributes[e]||{},l=t.elements[e];gt(l)&&ut(l)&&(Object.assign(l.style,i),Object.keys(s).forEach(function(e){var t=s[e];!1===t?l.removeAttribute(e):l.setAttribute(e,!0===t?"":t)}))})},effect:function(e){var t=e.state,i={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,i.popper),t.styles=i,t.elements.arrow&&Object.assign(t.elements.arrow.style,i.arrow),function(){Object.keys(t.elements).forEach(function(e){var s=t.elements[e],l=t.attributes[e]||{},n=Object.keys(t.styles.hasOwnProperty(e)?t.styles[e]:i[e]).reduce(function(e,t){return e[t]="",e},{});gt(s)&&ut(s)&&(Object.assign(s.style,n),Object.keys(l).forEach(function(e){s.removeAttribute(e)}))})}},requires:["computeStyles"]};function vt(e){return e.split("-")[0]}var bt=Math.max,Ct=Math.min,wt=Math.round;function yt(){var e=navigator.userAgentData;return null!=e&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function St(){return!/^((?!chrome|android).)*safari/i.test(yt())}function xt(e,t,i){void 0===t&&(t=!1),void 0===i&&(i=!1);var s=e.getBoundingClientRect(),l=1,n=1;t&&gt(e)&&(l=e.offsetWidth>0&&wt(s.width)/e.offsetWidth||1,n=e.offsetHeight>0&&wt(s.height)/e.offsetHeight||1);var o=(pt(e)?mt(e):window).visualViewport,a=!St()&&i,r=(s.left+(a&&o?o.offsetLeft:0))/l,d=(s.top+(a&&o?o.offsetTop:0))/n,h=s.width/l,c=s.height/n;return{width:h,height:c,top:d,right:r+h,bottom:d+c,left:r,x:r,y:d}}function Tt(e){var t=xt(e),i=e.offsetWidth,s=e.offsetHeight;return Math.abs(t.width-i)<=1&&(i=t.width),Math.abs(t.height-s)<=1&&(s=t.height),{x:e.offsetLeft,y:e.offsetTop,width:i,height:s}}function Dt(e,t){var i=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(i&&ft(i)){var s=t;do{if(s&&e.isSameNode(s))return!0;s=s.parentNode||s.host}while(s)}return!1}function kt(e){return mt(e).getComputedStyle(e)}function It(e){return["table","td","th"].indexOf(ut(e))>=0}function Ot(e){return((pt(e)?e.ownerDocument:e.document)||window.document).documentElement}function Rt(e){return"html"===ut(e)?e:e.assignedSlot||e.parentNode||(ft(e)?e.host:null)||Ot(e)}function Nt(e){return gt(e)&&"fixed"!==kt(e).position?e.offsetParent:null}function Et(e){for(var t=mt(e),i=Nt(e);i&&It(i)&&"static"===kt(i).position;)i=Nt(i);return i&&("html"===ut(i)||"body"===ut(i)&&"static"===kt(i).position)?t:i||function(e){var t=/firefox/i.test(yt());if(/Trident/i.test(yt())&&gt(e)&&"fixed"===kt(e).position)return null;var i=Rt(e);for(ft(i)&&(i=i.host);gt(i)&&["html","body"].indexOf(ut(i))<0;){var s=kt(i);if("none"!==s.transform||"none"!==s.perspective||"paint"===s.contain||-1!==["transform","perspective"].indexOf(s.willChange)||t&&"filter"===s.willChange||t&&s.filter&&"none"!==s.filter)return i;i=i.parentNode}return null}(e)||t}function At(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function Mt(e,t,i){return bt(e,Ct(t,i))}function Pt(e){return Object.assign({},{top:0,right:0,bottom:0,left:0},e)}function Lt(e,t){return t.reduce(function(t,i){return t[i]=e,t},{})}const Ft={name:"arrow",enabled:!0,phase:"main",fn:function(e){var t,i=e.state,s=e.name,l=e.options,n=i.elements.arrow,o=i.modifiersData.popperOffsets,a=vt(i.placement),r=At(a),d=[We,$e].indexOf(a)>=0?"height":"width";if(n&&o){var h=function(e,t){return Pt("number"!=typeof(e="function"==typeof e?e(Object.assign({},t.rects,{placement:t.placement})):e)?e:Lt(e,Ge))}(l.padding,i),c=Tt(n),u="y"===r?Ue:We,m="y"===r?Be:$e,p=i.rects.reference[d]+i.rects.reference[r]-o[r]-i.rects.popper[d],g=o[r]-i.rects.reference[r],f=Et(n),_=f?"y"===r?f.clientHeight||0:f.clientWidth||0:0,v=p/2-g/2,b=h[u],C=_-c[d]-h[m],w=_/2-c[d]/2+v,y=Mt(b,w,C),S=r;i.modifiersData[s]=((t={})[S]=y,t.centerOffset=y-w,t)}},effect:function(e){var t=e.state,i=e.options.element,s=void 0===i?"[data-popper-arrow]":i;null!=s&&("string"!=typeof s||(s=t.elements.popper.querySelector(s)))&&Dt(t.elements.popper,s)&&(t.elements.arrow=s)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function jt(e){return e.split("-")[1]}var Vt={top:"auto",right:"auto",bottom:"auto",left:"auto"};function zt(e){var t,i=e.popper,s=e.popperRect,l=e.placement,n=e.variation,o=e.offsets,a=e.position,r=e.gpuAcceleration,d=e.adaptive,h=e.roundOffsets,c=e.isFixed,u=o.x,m=void 0===u?0:u,p=o.y,g=void 0===p?0:p,f="function"==typeof h?h({x:m,y:g}):{x:m,y:g};m=f.x,g=f.y;var _=o.hasOwnProperty("x"),v=o.hasOwnProperty("y"),b=We,C=Ue,w=window;if(d){var y=Et(i),S="clientHeight",x="clientWidth";y===mt(i)&&"static"!==kt(y=Ot(i)).position&&"absolute"===a&&(S="scrollHeight",x="scrollWidth"),(l===Ue||(l===We||l===$e)&&n===Qe)&&(C=Be,g-=(c&&y===w&&w.visualViewport?w.visualViewport.height:y[S])-s.height,g*=r?1:-1),l!==We&&(l!==Ue&&l!==Be||n!==Qe)||(b=$e,m-=(c&&y===w&&w.visualViewport?w.visualViewport.width:y[x])-s.width,m*=r?1:-1)}var T,D=Object.assign({position:a},d&&Vt),k=!0===h?function(e,t){var i=e.x,s=e.y,l=t.devicePixelRatio||1;return{x:wt(i*l)/l||0,y:wt(s*l)/l||0}}({x:m,y:g},mt(i)):{x:m,y:g};return m=k.x,g=k.y,r?Object.assign({},D,((T={})[C]=v?"0":"",T[b]=_?"0":"",T.transform=(w.devicePixelRatio||1)<=1?"translate("+m+"px, "+g+"px)":"translate3d("+m+"px, "+g+"px, 0)",T)):Object.assign({},D,((t={})[C]=v?g+"px":"",t[b]=_?m+"px":"",t.transform="",t))}const Ht={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(e){var t=e.state,i=e.options,s=i.gpuAcceleration,l=void 0===s||s,n=i.adaptive,o=void 0===n||n,a=i.roundOffsets,r=void 0===a||a,d={placement:vt(t.placement),variation:jt(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:l,isFixed:"fixed"===t.options.strategy};null!=t.modifiersData.popperOffsets&&(t.styles.popper=Object.assign({},t.styles.popper,zt(Object.assign({},d,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:o,roundOffsets:r})))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign({},t.styles.arrow,zt(Object.assign({},d,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:r})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})},data:{}};var Ut={passive:!0};const Bt={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(e){var t=e.state,i=e.instance,s=e.options,l=s.scroll,n=void 0===l||l,o=s.resize,a=void 0===o||o,r=mt(t.elements.popper),d=[].concat(t.scrollParents.reference,t.scrollParents.popper);return n&&d.forEach(function(e){e.addEventListener("scroll",i.update,Ut)}),a&&r.addEventListener("resize",i.update,Ut),function(){n&&d.forEach(function(e){e.removeEventListener("scroll",i.update,Ut)}),a&&r.removeEventListener("resize",i.update,Ut)}},data:{}};var $t={left:"right",right:"left",bottom:"top",top:"bottom"};function Wt(e){return e.replace(/left|right|bottom|top/g,function(e){return $t[e]})}var qt={start:"end",end:"start"};function Gt(e){return e.replace(/start|end/g,function(e){return qt[e]})}function Kt(e){var t=mt(e);return{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function Qt(e){return xt(Ot(e)).left+Kt(e).scrollLeft}function Yt(e){var t=kt(e),i=t.overflow,s=t.overflowX,l=t.overflowY;return/auto|scroll|overlay|hidden/.test(i+l+s)}function Jt(e){return["html","body","#document"].indexOf(ut(e))>=0?e.ownerDocument.body:gt(e)&&Yt(e)?e:Jt(Rt(e))}function Xt(e,t){var i;void 0===t&&(t=[]);var s=Jt(e),l=s===(null==(i=e.ownerDocument)?void 0:i.body),n=mt(s),o=l?[n].concat(n.visualViewport||[],Yt(s)?s:[]):s,a=t.concat(o);return l?a:a.concat(Xt(Rt(o)))}function Zt(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function ei(e,t,i){return t===Je?Zt(function(e,t){var i=mt(e),s=Ot(e),l=i.visualViewport,n=s.clientWidth,o=s.clientHeight,a=0,r=0;if(l){n=l.width,o=l.height;var d=St();(d||!d&&"fixed"===t)&&(a=l.offsetLeft,r=l.offsetTop)}return{width:n,height:o,x:a+Qt(e),y:r}}(e,i)):pt(t)?function(e,t){var i=xt(e,!1,"fixed"===t);return i.top=i.top+e.clientTop,i.left=i.left+e.clientLeft,i.bottom=i.top+e.clientHeight,i.right=i.left+e.clientWidth,i.width=e.clientWidth,i.height=e.clientHeight,i.x=i.left,i.y=i.top,i}(t,i):Zt(function(e){var t,i=Ot(e),s=Kt(e),l=null==(t=e.ownerDocument)?void 0:t.body,n=bt(i.scrollWidth,i.clientWidth,l?l.scrollWidth:0,l?l.clientWidth:0),o=bt(i.scrollHeight,i.clientHeight,l?l.scrollHeight:0,l?l.clientHeight:0),a=-s.scrollLeft+Qt(e),r=-s.scrollTop;return"rtl"===kt(l||i).direction&&(a+=bt(i.clientWidth,l?l.clientWidth:0)-n),{width:n,height:o,x:a,y:r}}(Ot(e)))}function ti(e){var t,i=e.reference,s=e.element,l=e.placement,n=l?vt(l):null,o=l?jt(l):null,a=i.x+i.width/2-s.width/2,r=i.y+i.height/2-s.height/2;switch(n){case Ue:t={x:a,y:i.y-s.height};break;case Be:t={x:a,y:i.y+i.height};break;case $e:t={x:i.x+i.width,y:r};break;case We:t={x:i.x-s.width,y:r};break;default:t={x:i.x,y:i.y}}var d=n?At(n):null;if(null!=d){var h="y"===d?"height":"width";switch(o){case Ke:t[d]=t[d]-(i[h]/2-s[h]/2);break;case Qe:t[d]=t[d]+(i[h]/2-s[h]/2)}}return t}function ii(e,t){void 0===t&&(t={});var i=t,s=i.placement,l=void 0===s?e.placement:s,n=i.strategy,o=void 0===n?e.strategy:n,a=i.boundary,r=void 0===a?Ye:a,d=i.rootBoundary,h=void 0===d?Je:d,c=i.elementContext,u=void 0===c?Xe:c,m=i.altBoundary,p=void 0!==m&&m,g=i.padding,f=void 0===g?0:g,_=Pt("number"!=typeof f?f:Lt(f,Ge)),v=u===Xe?Ze:Xe,b=e.rects.popper,C=e.elements[p?v:u],w=function(e,t,i,s){var l="clippingParents"===t?function(e){var t=Xt(Rt(e)),i=["absolute","fixed"].indexOf(kt(e).position)>=0&&gt(e)?Et(e):e;return pt(i)?t.filter(function(e){return pt(e)&&Dt(e,i)&&"body"!==ut(e)}):[]}(e):[].concat(t),n=[].concat(l,[i]),o=n[0],a=n.reduce(function(t,i){var l=ei(e,i,s);return t.top=bt(l.top,t.top),t.right=Ct(l.right,t.right),t.bottom=Ct(l.bottom,t.bottom),t.left=bt(l.left,t.left),t},ei(e,o,s));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}(pt(C)?C:C.contextElement||Ot(e.elements.popper),r,h,o),y=xt(e.elements.reference),S=ti({reference:y,element:b,strategy:"absolute",placement:l}),x=Zt(Object.assign({},b,S)),T=u===Xe?x:y,D={top:w.top-T.top+_.top,bottom:T.bottom-w.bottom+_.bottom,left:w.left-T.left+_.left,right:T.right-w.right+_.right},k=e.modifiersData.offset;if(u===Xe&&k){var I=k[l];Object.keys(D).forEach(function(e){var t=[$e,Be].indexOf(e)>=0?1:-1,i=[Ue,Be].indexOf(e)>=0?"y":"x";D[e]+=I[i]*t})}return D}const si={name:"flip",enabled:!0,phase:"main",fn:function(e){var t=e.state,i=e.options,s=e.name;if(!t.modifiersData[s]._skip){for(var l=i.mainAxis,n=void 0===l||l,o=i.altAxis,a=void 0===o||o,r=i.fallbackPlacements,d=i.padding,h=i.boundary,c=i.rootBoundary,u=i.altBoundary,m=i.flipVariations,p=void 0===m||m,g=i.allowedAutoPlacements,f=t.options.placement,_=vt(f),v=r||(_!==f&&p?function(e){if(vt(e)===qe)return[];var t=Wt(e);return[Gt(e),t,Gt(t)]}(f):[Wt(f)]),b=[f].concat(v).reduce(function(e,i){return e.concat(vt(i)===qe?function(e,t){void 0===t&&(t={});var i=t,s=i.placement,l=i.boundary,n=i.rootBoundary,o=i.padding,a=i.flipVariations,r=i.allowedAutoPlacements,d=void 0===r?tt:r,h=jt(s),c=h?a?et:et.filter(function(e){return jt(e)===h}):Ge,u=c.filter(function(e){return d.indexOf(e)>=0});0===u.length&&(u=c);var m=u.reduce(function(t,i){return t[i]=ii(e,{placement:i,boundary:l,rootBoundary:n,padding:o})[vt(i)],t},{});return Object.keys(m).sort(function(e,t){return m[e]-m[t]})}(t,{placement:i,boundary:h,rootBoundary:c,padding:d,flipVariations:p,allowedAutoPlacements:g}):i)},[]),C=t.rects.reference,w=t.rects.popper,y=new Map,S=!0,x=b[0],T=0;T<b.length;T++){var D=b[T],k=vt(D),I=jt(D)===Ke,O=[Ue,Be].indexOf(k)>=0,R=O?"width":"height",N=ii(t,{placement:D,boundary:h,rootBoundary:c,altBoundary:u,padding:d}),E=O?I?$e:We:I?Be:Ue;C[R]>w[R]&&(E=Wt(E));var A=Wt(E),M=[];if(n&&M.push(N[k]<=0),a&&M.push(N[E]<=0,N[A]<=0),M.every(function(e){return e})){x=D,S=!1;break}y.set(D,M)}if(S)for(var P=function(e){var t=b.find(function(t){var i=y.get(t);if(i)return i.slice(0,e).every(function(e){return e})});if(t)return x=t,"break"},L=p?3:1;L>0&&"break"!==P(L);L--);t.placement!==x&&(t.modifiersData[s]._skip=!0,t.placement=x,t.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function li(e,t,i){return void 0===i&&(i={x:0,y:0}),{top:e.top-t.height-i.y,right:e.right-t.width+i.x,bottom:e.bottom-t.height+i.y,left:e.left-t.width-i.x}}function ni(e){return[Ue,$e,Be,We].some(function(t){return e[t]>=0})}const oi={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(e){var t=e.state,i=e.name,s=t.rects.reference,l=t.rects.popper,n=t.modifiersData.preventOverflow,o=ii(t,{elementContext:"reference"}),a=ii(t,{altBoundary:!0}),r=li(o,s),d=li(a,l,n),h=ni(r),c=ni(d);t.modifiersData[i]={referenceClippingOffsets:r,popperEscapeOffsets:d,isReferenceHidden:h,hasPopperEscaped:c},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":h,"data-popper-escaped":c})}},ai={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(e){var t=e.state,i=e.options,s=e.name,l=i.offset,n=void 0===l?[0,0]:l,o=tt.reduce(function(e,i){return e[i]=function(e,t,i){var s=vt(e),l=[We,Ue].indexOf(s)>=0?-1:1,n="function"==typeof i?i(Object.assign({},t,{placement:e})):i,o=n[0],a=n[1];return o=o||0,a=(a||0)*l,[We,$e].indexOf(s)>=0?{x:a,y:o}:{x:o,y:a}}(i,t.rects,n),e},{}),a=o[t.placement],r=a.x,d=a.y;null!=t.modifiersData.popperOffsets&&(t.modifiersData.popperOffsets.x+=r,t.modifiersData.popperOffsets.y+=d),t.modifiersData[s]=o}},ri={name:"popperOffsets",enabled:!0,phase:"read",fn:function(e){var t=e.state,i=e.name;t.modifiersData[i]=ti({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})},data:{}},di={name:"preventOverflow",enabled:!0,phase:"main",fn:function(e){var t=e.state,i=e.options,s=e.name,l=i.mainAxis,n=void 0===l||l,o=i.altAxis,a=void 0!==o&&o,r=i.boundary,d=i.rootBoundary,h=i.altBoundary,c=i.padding,u=i.tether,m=void 0===u||u,p=i.tetherOffset,g=void 0===p?0:p,f=ii(t,{boundary:r,rootBoundary:d,padding:c,altBoundary:h}),_=vt(t.placement),v=jt(t.placement),b=!v,C=At(_),w="x"===C?"y":"x",y=t.modifiersData.popperOffsets,S=t.rects.reference,x=t.rects.popper,T="function"==typeof g?g(Object.assign({},t.rects,{placement:t.placement})):g,D="number"==typeof T?{mainAxis:T,altAxis:T}:Object.assign({mainAxis:0,altAxis:0},T),k=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,I={x:0,y:0};if(y){if(n){var O,R="y"===C?Ue:We,N="y"===C?Be:$e,E="y"===C?"height":"width",A=y[C],M=A+f[R],P=A-f[N],L=m?-x[E]/2:0,F=v===Ke?S[E]:x[E],j=v===Ke?-x[E]:-S[E],V=t.elements.arrow,z=m&&V?Tt(V):{width:0,height:0},H=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},U=H[R],B=H[N],$=Mt(0,S[E],z[E]),W=b?S[E]/2-L-$-U-D.mainAxis:F-$-U-D.mainAxis,q=b?-S[E]/2+L+$+B+D.mainAxis:j+$+B+D.mainAxis,G=t.elements.arrow&&Et(t.elements.arrow),K=G?"y"===C?G.clientTop||0:G.clientLeft||0:0,Q=null!=(O=null==k?void 0:k[C])?O:0,Y=A+q-Q,J=Mt(m?Ct(M,A+W-Q-K):M,A,m?bt(P,Y):P);y[C]=J,I[C]=J-A}if(a){var X,Z="x"===C?Ue:We,ee="x"===C?Be:$e,te=y[w],ie="y"===w?"height":"width",se=te+f[Z],le=te-f[ee],ne=-1!==[Ue,We].indexOf(_),oe=null!=(X=null==k?void 0:k[w])?X:0,ae=ne?se:te-S[ie]-x[ie]-oe+D.altAxis,re=ne?te+S[ie]+x[ie]-oe-D.altAxis:le,de=m&&ne?function(e,t,i){var s=Mt(e,t,i);return s>i?i:s}(ae,te,re):Mt(m?ae:se,te,m?re:le);y[w]=de,I[w]=de-te}t.modifiersData[s]=I}},requiresIfExists:["offset"]};function hi(e,t,i){void 0===i&&(i=!1);var s,l,n=gt(t),o=gt(t)&&function(e){var t=e.getBoundingClientRect(),i=wt(t.width)/e.offsetWidth||1,s=wt(t.height)/e.offsetHeight||1;return 1!==i||1!==s}(t),a=Ot(t),r=xt(e,o,i),d={scrollLeft:0,scrollTop:0},h={x:0,y:0};return(n||!n&&!i)&&(("body"!==ut(t)||Yt(a))&&(d=(s=t)!==mt(s)&&gt(s)?{scrollLeft:(l=s).scrollLeft,scrollTop:l.scrollTop}:Kt(s)),gt(t)?((h=xt(t,!0)).x+=t.clientLeft,h.y+=t.clientTop):a&&(h.x=Qt(a))),{x:r.left+d.scrollLeft-h.x,y:r.top+d.scrollTop-h.y,width:r.width,height:r.height}}function ci(e){var t=new Map,i=new Set,s=[];function l(e){i.add(e.name),[].concat(e.requires||[],e.requiresIfExists||[]).forEach(function(e){if(!i.has(e)){var s=t.get(e);s&&l(s)}}),s.push(e)}return e.forEach(function(e){t.set(e.name,e)}),e.forEach(function(e){i.has(e.name)||l(e)}),s}var ui={placement:"bottom",modifiers:[],strategy:"absolute"};function mi(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return!t.some(function(e){return!(e&&"function"==typeof e.getBoundingClientRect)})}function pi(e){void 0===e&&(e={});var t=e,i=t.defaultModifiers,s=void 0===i?[]:i,l=t.defaultOptions,n=void 0===l?ui:l;return function(e,t,i){void 0===i&&(i=n);var l,o,a={placement:"bottom",orderedModifiers:[],options:Object.assign({},ui,n),modifiersData:{},elements:{reference:e,popper:t},attributes:{},styles:{}},r=[],d=!1,h={state:a,setOptions:function(i){var l="function"==typeof i?i(a.options):i;c(),a.options=Object.assign({},n,a.options,l),a.scrollParents={reference:pt(e)?Xt(e):e.contextElement?Xt(e.contextElement):[],popper:Xt(t)};var o,d,u=function(e){var t=ci(e);return ct.reduce(function(e,i){return e.concat(t.filter(function(e){return e.phase===i}))},[])}((o=[].concat(s,a.options.modifiers),d=o.reduce(function(e,t){var i=e[t.name];return e[t.name]=i?Object.assign({},i,t,{options:Object.assign({},i.options,t.options),data:Object.assign({},i.data,t.data)}):t,e},{}),Object.keys(d).map(function(e){return d[e]})));return a.orderedModifiers=u.filter(function(e){return e.enabled}),a.orderedModifiers.forEach(function(e){var t=e.name,i=e.options,s=void 0===i?{}:i,l=e.effect;if("function"==typeof l){var n=l({state:a,name:t,instance:h,options:s});r.push(n||function(){})}}),h.update()},forceUpdate:function(){if(!d){var e=a.elements,t=e.reference,i=e.popper;if(mi(t,i)){a.rects={reference:hi(t,Et(i),"fixed"===a.options.strategy),popper:Tt(i)},a.reset=!1,a.placement=a.options.placement,a.orderedModifiers.forEach(function(e){return a.modifiersData[e.name]=Object.assign({},e.data)});for(var s=0;s<a.orderedModifiers.length;s++)if(!0!==a.reset){var l=a.orderedModifiers[s],n=l.fn,o=l.options,r=void 0===o?{}:o,c=l.name;"function"==typeof n&&(a=n({state:a,options:r,name:c,instance:h})||a)}else a.reset=!1,s=-1}}},update:(l=function(){return new Promise(function(e){h.forceUpdate(),e(a)})},function(){return o||(o=new Promise(function(e){Promise.resolve().then(function(){o=void 0,e(l())})})),o}),destroy:function(){c(),d=!0}};if(!mi(e,t))return h;function c(){r.forEach(function(e){return e()}),r=[]}return h.setOptions(i).then(function(e){!d&&i.onFirstUpdate&&i.onFirstUpdate(e)}),h}}var gi=pi(),fi=pi({defaultModifiers:[Bt,ri,Ht,_t]}),_i=pi({defaultModifiers:[Bt,ri,Ht,_t,ai,si,di,Ft,oi]});const vi=Object.freeze(Object.defineProperty({__proto__:null,afterMain:at,afterRead:lt,afterWrite:ht,applyStyles:_t,arrow:Ft,auto:qe,basePlacements:Ge,beforeMain:nt,beforeRead:it,beforeWrite:rt,bottom:Be,clippingParents:Ye,computeStyles:Ht,createPopper:_i,createPopperBase:gi,createPopperLite:fi,detectOverflow:ii,end:Qe,eventListeners:Bt,flip:si,hide:oi,left:We,main:ot,modifierPhases:ct,offset:ai,placements:tt,popper:Xe,popperGenerator:pi,popperOffsets:ri,preventOverflow:di,read:st,reference:Ze,right:$e,start:Ke,top:Ue,variationPlacements:et,viewport:Je,write:dt},Symbol.toStringTag,{value:"Module"})),bi="dropdown",Ci=".bs.dropdown",wi=".data-api",yi="ArrowUp",Si="ArrowDown",xi=`hide${Ci}`,Ti=`hidden${Ci}`,Di=`show${Ci}`,ki=`shown${Ci}`,Ii=`click${Ci}${wi}`,Oi=`keydown${Ci}${wi}`,Ri=`keyup${Ci}${wi}`,Ni="show",Ei='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',Ai=`${Ei}.${Ni}`,Mi=".dropdown-menu",Pi=p()?"top-end":"top-start",Li=p()?"top-start":"top-end",Fi=p()?"bottom-end":"bottom-start",ji=p()?"bottom-start":"bottom-end",Vi=p()?"left-start":"right-start",zi=p()?"right-start":"left-start",Hi={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},Ui={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class Bi extends z{constructor(e,t){super(e,t),this._popper=null,this._parent=this._element.parentNode,this._menu=U.next(this._element,Mi)[0]||U.prev(this._element,Mi)[0]||U.findOne(Mi,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return Hi}static get DefaultType(){return Ui}static get NAME(){return bi}toggle(){return this._isShown()?this.hide():this.show()}show(){if(r(this._element)||this._isShown())return;const e={relatedTarget:this._element};if(!M.trigger(this._element,Di,e).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(".navbar-nav"))for(const e of[].concat(...document.body.children))M.on(e,"mouseover",h);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(Ni),this._element.classList.add(Ni),M.trigger(this._element,ki,e)}}hide(){if(r(this._element)||!this._isShown())return;const e={relatedTarget:this._element};this._completeHide(e)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(e){if(!M.trigger(this._element,xi,e).defaultPrevented){if("ontouchstart"in document.documentElement)for(const e of[].concat(...document.body.children))M.off(e,"mouseover",h);this._popper&&this._popper.destroy(),this._menu.classList.remove(Ni),this._element.classList.remove(Ni),this._element.setAttribute("aria-expanded","false"),j.removeDataAttribute(this._menu,"popper"),M.trigger(this._element,Ti,e)}}_getConfig(e){if("object"==typeof(e=super._getConfig(e)).reference&&!n(e.reference)&&"function"!=typeof e.reference.getBoundingClientRect)throw new TypeError(`${bi.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return e}_createPopper(){if(void 0===vi)throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let e=this._element;"parent"===this._config.reference?e=this._parent:n(this._config.reference)?e=o(this._config.reference):"object"==typeof this._config.reference&&(e=this._config.reference);const t=this._getPopperConfig();this._popper=_i(e,this._menu,t)}_isShown(){return this._menu.classList.contains(Ni)}_getPlacement(){const e=this._parent;if(e.classList.contains("dropend"))return Vi;if(e.classList.contains("dropstart"))return zi;if(e.classList.contains("dropup-center"))return"top";if(e.classList.contains("dropdown-center"))return"bottom";const t="end"===getComputedStyle(this._menu).getPropertyValue("--bs-position").trim();return e.classList.contains("dropup")?t?Li:Pi:t?ji:Fi}_detectNavbar(){return null!==this._element.closest(".navbar")}_getOffset(){const{offset:e}=this._config;return"string"==typeof e?e.split(",").map(e=>Number.parseInt(e,10)):"function"==typeof e?t=>e(t,this._element):e}_getPopperConfig(){const e={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||"static"===this._config.display)&&(j.setDataAttribute(this._menu,"popper","static"),e.modifiers=[{name:"applyStyles",enabled:!1}]),{...e,...f(this._config.popperConfig,[e])}}_selectMenuItem({key:e,target:t}){const i=U.find(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",this._menu).filter(e=>a(e));i.length&&v(i,t,e===Si,!i.includes(t)).focus()}static jQueryInterface(e){return this.each(function(){const t=Bi.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===t[e])throw new TypeError(`No method named "${e}"`);t[e]()}})}static clearMenus(e){if(2===e.button||"keyup"===e.type&&"Tab"!==e.key)return;const t=U.find(Ai);for(const i of t){const t=Bi.getInstance(i);if(!t||!1===t._config.autoClose)continue;const s=e.composedPath(),l=s.includes(t._menu);if(s.includes(t._element)||"inside"===t._config.autoClose&&!l||"outside"===t._config.autoClose&&l)continue;if(t._menu.contains(e.target)&&("keyup"===e.type&&"Tab"===e.key||/input|select|option|textarea|form/i.test(e.target.tagName)))continue;const n={relatedTarget:t._element};"click"===e.type&&(n.clickEvent=e),t._completeHide(n)}}static dataApiKeydownHandler(e){const t=/input|textarea/i.test(e.target.tagName),i="Escape"===e.key,s=[yi,Si].includes(e.key);if(!s&&!i)return;if(t&&!i)return;e.preventDefault();const l=this.matches(Ei)?this:U.prev(this,Ei)[0]||U.next(this,Ei)[0]||U.findOne(Ei,e.delegateTarget.parentNode),n=Bi.getOrCreateInstance(l);if(s)return e.stopPropagation(),n.show(),void n._selectMenuItem(e);n._isShown()&&(e.stopPropagation(),n.hide(),l.focus())}}M.on(document,Oi,Ei,Bi.dataApiKeydownHandler),M.on(document,Oi,Mi,Bi.dataApiKeydownHandler),M.on(document,Ii,Bi.clearMenus),M.on(document,Ri,Bi.clearMenus),M.on(document,Ii,Ei,function(e){e.preventDefault(),Bi.getOrCreateInstance(this).toggle()}),g(Bi);const $i="backdrop",Wi="show",qi=`mousedown.bs.${$i}`,Gi={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},Ki={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class Qi extends V{constructor(e){super(),this._config=this._getConfig(e),this._isAppended=!1,this._element=null}static get Default(){return Gi}static get DefaultType(){return Ki}static get NAME(){return $i}show(e){if(!this._config.isVisible)return void f(e);this._append();const t=this._getElement();this._config.isAnimated&&c(t),t.classList.add(Wi),this._emulateAnimation(()=>{f(e)})}hide(e){this._config.isVisible?(this._getElement().classList.remove(Wi),this._emulateAnimation(()=>{this.dispose(),f(e)})):f(e)}dispose(){this._isAppended&&(M.off(this._element,qi),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const e=document.createElement("div");e.className=this._config.className,this._config.isAnimated&&e.classList.add("fade"),this._element=e}return this._element}_configAfterMerge(e){return e.rootElement=o(e.rootElement),e}_append(){if(this._isAppended)return;const e=this._getElement();this._config.rootElement.append(e),M.on(e,qi,()=>{f(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(e){_(e,this._getElement(),this._config.isAnimated)}}const Yi=".bs.focustrap",Ji=`focusin${Yi}`,Xi=`keydown.tab${Yi}`,Zi="backward",es={autofocus:!0,trapElement:null},ts={autofocus:"boolean",trapElement:"element"};class is extends V{constructor(e){super(),this._config=this._getConfig(e),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return es}static get DefaultType(){return ts}static get NAME(){return"focustrap"}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),M.off(document,Yi),M.on(document,Ji,e=>this._handleFocusin(e)),M.on(document,Xi,e=>this._handleKeydown(e)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,M.off(document,Yi))}_handleFocusin(e){const{trapElement:t}=this._config;if(e.target===document||e.target===t||t.contains(e.target))return;const i=U.focusableChildren(t);0===i.length?t.focus():this._lastTabNavDirection===Zi?i[i.length-1].focus():i[0].focus()}_handleKeydown(e){"Tab"===e.key&&(this._lastTabNavDirection=e.shiftKey?Zi:"forward")}}const ss=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",ls=".sticky-top",ns="padding-right",os="margin-right";class as{constructor(){this._element=document.body}getWidth(){const e=document.documentElement.clientWidth;return Math.abs(window.innerWidth-e)}hide(){const e=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,ns,t=>t+e),this._setElementAttributes(ss,ns,t=>t+e),this._setElementAttributes(ls,os,t=>t-e)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,ns),this._resetElementAttributes(ss,ns),this._resetElementAttributes(ls,os)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(e,t,i){const s=this.getWidth();this._applyManipulationCallback(e,e=>{if(e!==this._element&&window.innerWidth>e.clientWidth+s)return;this._saveInitialAttribute(e,t);const l=window.getComputedStyle(e).getPropertyValue(t);e.style.setProperty(t,`${i(Number.parseFloat(l))}px`)})}_saveInitialAttribute(e,t){const i=e.style.getPropertyValue(t);i&&j.setDataAttribute(e,t,i)}_resetElementAttributes(e,t){this._applyManipulationCallback(e,e=>{const i=j.getDataAttribute(e,t);null!==i?(j.removeDataAttribute(e,t),e.style.setProperty(t,i)):e.style.removeProperty(t)})}_applyManipulationCallback(e,t){if(n(e))t(e);else for(const i of U.find(e,this._element))t(i)}}const rs=".bs.modal",ds=`hide${rs}`,hs=`hidePrevented${rs}`,cs=`hidden${rs}`,us=`show${rs}`,ms=`shown${rs}`,ps=`resize${rs}`,gs=`click.dismiss${rs}`,fs=`mousedown.dismiss${rs}`,_s=`keydown.dismiss${rs}`,vs=`click${rs}.data-api`,bs="modal-open",Cs="show",ws="modal-static",ys={backdrop:!0,focus:!0,keyboard:!0},Ss={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class xs extends z{constructor(e,t){super(e,t),this._dialog=U.findOne(".modal-dialog",this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new as,this._addEventListeners()}static get Default(){return ys}static get DefaultType(){return Ss}static get NAME(){return"modal"}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){this._isShown||this._isTransitioning||M.trigger(this._element,us,{relatedTarget:e}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(bs),this._adjustDialog(),this._backdrop.show(()=>this._showElement(e)))}hide(){this._isShown&&!this._isTransitioning&&(M.trigger(this._element,ds).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(Cs),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated())))}dispose(){M.off(window,rs),M.off(this._dialog,rs),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new Qi({isVisible:Boolean(this._config.backdrop),isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new is({trapElement:this._element})}_showElement(e){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const t=U.findOne(".modal-body",this._dialog);t&&(t.scrollTop=0),c(this._element),this._element.classList.add(Cs),this._queueCallback(()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,M.trigger(this._element,ms,{relatedTarget:e})},this._dialog,this._isAnimated())}_addEventListeners(){M.on(this._element,_s,e=>{"Escape"===e.key&&(this._config.keyboard?this.hide():this._triggerBackdropTransition())}),M.on(window,ps,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),M.on(this._element,fs,e=>{M.one(this._element,gs,t=>{this._element===e.target&&this._element===t.target&&("static"!==this._config.backdrop?this._config.backdrop&&this.hide():this._triggerBackdropTransition())})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(bs),this._resetAdjustments(),this._scrollBar.reset(),M.trigger(this._element,cs)})}_isAnimated(){return this._element.classList.contains("fade")}_triggerBackdropTransition(){if(M.trigger(this._element,hs).defaultPrevented)return;const e=this._element.scrollHeight>document.documentElement.clientHeight,t=this._element.style.overflowY;"hidden"===t||this._element.classList.contains(ws)||(e||(this._element.style.overflowY="hidden"),this._element.classList.add(ws),this._queueCallback(()=>{this._element.classList.remove(ws),this._queueCallback(()=>{this._element.style.overflowY=t},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const e=this._element.scrollHeight>document.documentElement.clientHeight,t=this._scrollBar.getWidth(),i=t>0;if(i&&!e){const e=p()?"paddingLeft":"paddingRight";this._element.style[e]=`${t}px`}if(!i&&e){const e=p()?"paddingRight":"paddingLeft";this._element.style[e]=`${t}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(e,t){return this.each(function(){const i=xs.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===i[e])throw new TypeError(`No method named "${e}"`);i[e](t)}})}}M.on(document,vs,'[data-bs-toggle="modal"]',function(e){const t=U.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&e.preventDefault(),M.one(t,us,e=>{e.defaultPrevented||M.one(t,cs,()=>{a(this)&&this.focus()})});const i=U.findOne(".modal.show");i&&xs.getInstance(i).hide(),xs.getOrCreateInstance(t).toggle(this)}),B(xs),g(xs);const Ts=".bs.offcanvas",Ds=".data-api",ks=`load${Ts}${Ds}`,Is="show",Os="showing",Rs="hiding",Ns=".offcanvas.show",Es=`show${Ts}`,As=`shown${Ts}`,Ms=`hide${Ts}`,Ps=`hidePrevented${Ts}`,Ls=`hidden${Ts}`,Fs=`resize${Ts}`,js=`click${Ts}${Ds}`,Vs=`keydown.dismiss${Ts}`,zs={backdrop:!0,keyboard:!0,scroll:!1},Hs={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class Us extends z{constructor(e,t){super(e,t),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return zs}static get DefaultType(){return Hs}static get NAME(){return"offcanvas"}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){this._isShown||M.trigger(this._element,Es,{relatedTarget:e}).defaultPrevented||(this._isShown=!0,this._backdrop.show(),this._config.scroll||(new as).hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(Os),this._queueCallback(()=>{this._config.scroll&&!this._config.backdrop||this._focustrap.activate(),this._element.classList.add(Is),this._element.classList.remove(Os),M.trigger(this._element,As,{relatedTarget:e})},this._element,!0))}hide(){this._isShown&&(M.trigger(this._element,Ms).defaultPrevented||(this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(Rs),this._backdrop.hide(),this._queueCallback(()=>{this._element.classList.remove(Is,Rs),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||(new as).reset(),M.trigger(this._element,Ls)},this._element,!0)))}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const e=Boolean(this._config.backdrop);return new Qi({className:"offcanvas-backdrop",isVisible:e,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:e?()=>{"static"!==this._config.backdrop?this.hide():M.trigger(this._element,Ps)}:null})}_initializeFocusTrap(){return new is({trapElement:this._element})}_addEventListeners(){M.on(this._element,Vs,e=>{"Escape"===e.key&&(this._config.keyboard?this.hide():M.trigger(this._element,Ps))})}static jQueryInterface(e){return this.each(function(){const t=Us.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===t[e]||e.startsWith("_")||"constructor"===e)throw new TypeError(`No method named "${e}"`);t[e](this)}})}}M.on(document,js,'[data-bs-toggle="offcanvas"]',function(e){const t=U.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&e.preventDefault(),r(this))return;M.one(t,Ls,()=>{a(this)&&this.focus()});const i=U.findOne(Ns);i&&i!==t&&Us.getInstance(i).hide(),Us.getOrCreateInstance(t).toggle(this)}),M.on(window,ks,()=>{for(const e of U.find(Ns))Us.getOrCreateInstance(e).show()}),M.on(window,Fs,()=>{for(const e of U.find("[aria-modal][class*=show][class*=offcanvas-]"))"fixed"!==getComputedStyle(e).position&&Us.getOrCreateInstance(e).hide()}),B(Us),g(Us);const Bs={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},$s=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),Ws=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,qs=(e,t)=>{const i=e.nodeName.toLowerCase();return t.includes(i)?!$s.has(i)||Boolean(Ws.test(e.nodeValue)):t.filter(e=>e instanceof RegExp).some(e=>e.test(i))},Gs={allowList:Bs,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},Ks={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},Qs={entry:"(string|element|function|null)",selector:"(string|element)"};class Ys extends V{constructor(e){super(),this._config=this._getConfig(e)}static get Default(){return Gs}static get DefaultType(){return Ks}static get NAME(){return"TemplateFactory"}getContent(){return Object.values(this._config.content).map(e=>this._resolvePossibleFunction(e)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(e){return this._checkContent(e),this._config.content={...this._config.content,...e},this}toHtml(){const e=document.createElement("div");e.innerHTML=this._maybeSanitize(this._config.template);for(const[t,i]of Object.entries(this._config.content))this._setContent(e,i,t);const t=e.children[0],i=this._resolvePossibleFunction(this._config.extraClass);return i&&t.classList.add(...i.split(" ")),t}_typeCheckConfig(e){super._typeCheckConfig(e),this._checkContent(e.content)}_checkContent(e){for(const[t,i]of Object.entries(e))super._typeCheckConfig({selector:t,entry:i},Qs)}_setContent(e,t,i){const s=U.findOne(i,e);s&&((t=this._resolvePossibleFunction(t))?n(t)?this._putElementInTemplate(o(t),s):this._config.html?s.innerHTML=this._maybeSanitize(t):s.textContent=t:s.remove())}_maybeSanitize(e){return this._config.sanitize?function(e,t,i){if(!e.length)return e;if(i&&"function"==typeof i)return i(e);const s=(new window.DOMParser).parseFromString(e,"text/html"),l=[].concat(...s.body.querySelectorAll("*"));for(const e of l){const i=e.nodeName.toLowerCase();if(!Object.keys(t).includes(i)){e.remove();continue}const s=[].concat(...e.attributes),l=[].concat(t["*"]||[],t[i]||[]);for(const t of s)qs(t,l)||e.removeAttribute(t.nodeName)}return s.body.innerHTML}(e,this._config.allowList,this._config.sanitizeFn):e}_resolvePossibleFunction(e){return f(e,[this])}_putElementInTemplate(e,t){if(this._config.html)return t.innerHTML="",void t.append(e);t.textContent=e.textContent}}const Js=new Set(["sanitize","allowList","sanitizeFn"]),Xs="fade",Zs="show",el=".modal",tl="hide.bs.modal",il="hover",sl="focus",ll={AUTO:"auto",TOP:"top",RIGHT:p()?"left":"right",BOTTOM:"bottom",LEFT:p()?"right":"left"},nl={allowList:Bs,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},ol={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class al extends z{constructor(e,t){if(void 0===vi)throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(e,t),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return nl}static get DefaultType(){return ol}static get NAME(){return"tooltip"}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){this._isEnabled&&(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()?this._leave():this._enter())}dispose(){clearTimeout(this._timeout),M.off(this._element.closest(el),tl,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if("none"===this._element.style.display)throw new Error("Please use show on visible elements");if(!this._isWithContent()||!this._isEnabled)return;const e=M.trigger(this._element,this.constructor.eventName("show")),t=(d(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(e.defaultPrevented||!t)return;this._disposePopper();const i=this._getTipElement();this._element.setAttribute("aria-describedby",i.getAttribute("id"));const{container:s}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(s.append(i),M.trigger(this._element,this.constructor.eventName("inserted"))),this._popper=this._createPopper(i),i.classList.add(Zs),"ontouchstart"in document.documentElement)for(const e of[].concat(...document.body.children))M.on(e,"mouseover",h);this._queueCallback(()=>{M.trigger(this._element,this.constructor.eventName("shown")),!1===this._isHovered&&this._leave(),this._isHovered=!1},this.tip,this._isAnimated())}hide(){if(this._isShown()&&!M.trigger(this._element,this.constructor.eventName("hide")).defaultPrevented){if(this._getTipElement().classList.remove(Zs),"ontouchstart"in document.documentElement)for(const e of[].concat(...document.body.children))M.off(e,"mouseover",h);this._activeTrigger.click=!1,this._activeTrigger[sl]=!1,this._activeTrigger[il]=!1,this._isHovered=null,this._queueCallback(()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),M.trigger(this._element,this.constructor.eventName("hidden")))},this.tip,this._isAnimated())}}update(){this._popper&&this._popper.update()}_isWithContent(){return Boolean(this._getTitle())}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(e){const t=this._getTemplateFactory(e).toHtml();if(!t)return null;t.classList.remove(Xs,Zs),t.classList.add(`bs-${this.constructor.NAME}-auto`);const i=(e=>{do{e+=Math.floor(1e6*Math.random())}while(document.getElementById(e));return e})(this.constructor.NAME).toString();return t.setAttribute("id",i),this._isAnimated()&&t.classList.add(Xs),t}setContent(e){this._newContent=e,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(e){return this._templateFactory?this._templateFactory.changeContent(e):this._templateFactory=new Ys({...this._config,content:e,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{".tooltip-inner":this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(e){return this.constructor.getOrCreateInstance(e.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(Xs)}_isShown(){return this.tip&&this.tip.classList.contains(Zs)}_createPopper(e){const t=f(this._config.placement,[this,e,this._element]),i=ll[t.toUpperCase()];return _i(this._element,e,this._getPopperConfig(i))}_getOffset(){const{offset:e}=this._config;return"string"==typeof e?e.split(",").map(e=>Number.parseInt(e,10)):"function"==typeof e?t=>e(t,this._element):e}_resolvePossibleFunction(e){return f(e,[this._element])}_getPopperConfig(e){const t={placement:e,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:e=>{this._getTipElement().setAttribute("data-popper-placement",e.state.placement)}}]};return{...t,...f(this._config.popperConfig,[t])}}_setListeners(){const e=this._config.trigger.split(" ");for(const t of e)if("click"===t)M.on(this._element,this.constructor.eventName("click"),this._config.selector,e=>{this._initializeOnDelegatedTarget(e).toggle()});else if("manual"!==t){const e=t===il?this.constructor.eventName("mouseenter"):this.constructor.eventName("focusin"),i=t===il?this.constructor.eventName("mouseleave"):this.constructor.eventName("focusout");M.on(this._element,e,this._config.selector,e=>{const t=this._initializeOnDelegatedTarget(e);t._activeTrigger["focusin"===e.type?sl:il]=!0,t._enter()}),M.on(this._element,i,this._config.selector,e=>{const t=this._initializeOnDelegatedTarget(e);t._activeTrigger["focusout"===e.type?sl:il]=t._element.contains(e.relatedTarget),t._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},M.on(this._element.closest(el),tl,this._hideModalHandler)}_fixTitle(){const e=this._element.getAttribute("title");e&&(this._element.getAttribute("aria-label")||this._element.textContent.trim()||this._element.setAttribute("aria-label",e),this._element.setAttribute("data-bs-original-title",e),this._element.removeAttribute("title"))}_enter(){this._isShown()||this._isHovered?this._isHovered=!0:(this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show))}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(e,t){clearTimeout(this._timeout),this._timeout=setTimeout(e,t)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(e){const t=j.getDataAttributes(this._element);for(const e of Object.keys(t))Js.has(e)&&delete t[e];return e={...t,..."object"==typeof e&&e?e:{}},e=this._mergeConfigObj(e),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}_configAfterMerge(e){return e.container=!1===e.container?document.body:o(e.container),"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),"number"==typeof e.title&&(e.title=e.title.toString()),"number"==typeof e.content&&(e.content=e.content.toString()),e}_getDelegateConfig(){const e={};for(const[t,i]of Object.entries(this._config))this.constructor.Default[t]!==i&&(e[t]=i);return e.selector=!1,e.trigger="manual",e}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(e){return this.each(function(){const t=al.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===t[e])throw new TypeError(`No method named "${e}"`);t[e]()}})}}g(al);const rl={...al.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},dl={...al.DefaultType,content:"(null|string|element|function)"};class hl extends al{static get Default(){return rl}static get DefaultType(){return dl}static get NAME(){return"popover"}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{".popover-header":this._getTitle(),".popover-body":this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(e){return this.each(function(){const t=hl.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===t[e])throw new TypeError(`No method named "${e}"`);t[e]()}})}}g(hl);const cl=".bs.scrollspy",ul=`activate${cl}`,ml=`click${cl}`,pl=`load${cl}.data-api`,gl="active",fl="[href]",_l=".nav-link",vl=`${_l}, .nav-item > ${_l}, .list-group-item`,bl={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},Cl={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class wl extends z{constructor(e,t){super(e,t),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement="visible"===getComputedStyle(this._element).overflowY?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return bl}static get DefaultType(){return Cl}static get NAME(){return"scrollspy"}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const e of this._observableSections.values())this._observer.observe(e)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(e){return e.target=o(e.target)||document.body,e.rootMargin=e.offset?`${e.offset}px 0px -30%`:e.rootMargin,"string"==typeof e.threshold&&(e.threshold=e.threshold.split(",").map(e=>Number.parseFloat(e))),e}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(M.off(this._config.target,ml),M.on(this._config.target,ml,fl,e=>{const t=this._observableSections.get(e.target.hash);if(t){e.preventDefault();const i=this._rootElement||window,s=t.offsetTop-this._element.offsetTop;if(i.scrollTo)return void i.scrollTo({top:s,behavior:"smooth"});i.scrollTop=s}}))}_getNewObserver(){const e={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(e=>this._observerCallback(e),e)}_observerCallback(e){const t=e=>this._targetLinks.get(`#${e.target.id}`),i=e=>{this._previousScrollData.visibleEntryTop=e.target.offsetTop,this._process(t(e))},s=(this._rootElement||document.documentElement).scrollTop,l=s>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=s;for(const n of e){if(!n.isIntersecting){this._activeTarget=null,this._clearActiveClass(t(n));continue}const e=n.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(l&&e){if(i(n),!s)return}else l||e||i(n)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const e=U.find(fl,this._config.target);for(const t of e){if(!t.hash||r(t))continue;const e=U.findOne(decodeURI(t.hash),this._element);a(e)&&(this._targetLinks.set(decodeURI(t.hash),t),this._observableSections.set(t.hash,e))}}_process(e){this._activeTarget!==e&&(this._clearActiveClass(this._config.target),this._activeTarget=e,e.classList.add(gl),this._activateParents(e),M.trigger(this._element,ul,{relatedTarget:e}))}_activateParents(e){if(e.classList.contains("dropdown-item"))U.findOne(".dropdown-toggle",e.closest(".dropdown")).classList.add(gl);else for(const t of U.parents(e,".nav, .list-group"))for(const e of U.prev(t,vl))e.classList.add(gl)}_clearActiveClass(e){e.classList.remove(gl);const t=U.find(`${fl}.${gl}`,e);for(const e of t)e.classList.remove(gl)}static jQueryInterface(e){return this.each(function(){const t=wl.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===t[e]||e.startsWith("_")||"constructor"===e)throw new TypeError(`No method named "${e}"`);t[e]()}})}}M.on(window,pl,()=>{for(const e of U.find('[data-bs-spy="scroll"]'))wl.getOrCreateInstance(e)}),g(wl);const yl=".bs.tab",Sl=`hide${yl}`,xl=`hidden${yl}`,Tl=`show${yl}`,Dl=`shown${yl}`,kl=`click${yl}`,Il=`keydown${yl}`,Ol=`load${yl}`,Rl="ArrowLeft",Nl="ArrowRight",El="ArrowUp",Al="ArrowDown",Ml="Home",Pl="End",Ll="active",Fl="fade",jl="show",Vl=".dropdown-toggle",zl=`:not(${Vl})`,Hl='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',Ul=`.nav-link${zl}, .list-group-item${zl}, [role="tab"]${zl}, ${Hl}`,Bl=`.${Ll}[data-bs-toggle="tab"], .${Ll}[data-bs-toggle="pill"], .${Ll}[data-bs-toggle="list"]`;class $l extends z{constructor(e){super(e),this._parent=this._element.closest('.list-group, .nav, [role="tablist"]'),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),M.on(this._element,Il,e=>this._keydown(e)))}static get NAME(){return"tab"}show(){const e=this._element;if(this._elemIsActive(e))return;const t=this._getActiveElem(),i=t?M.trigger(t,Sl,{relatedTarget:e}):null;M.trigger(e,Tl,{relatedTarget:t}).defaultPrevented||i&&i.defaultPrevented||(this._deactivate(t,e),this._activate(e,t))}_activate(e,t){e&&(e.classList.add(Ll),this._activate(U.getElementFromSelector(e)),this._queueCallback(()=>{"tab"===e.getAttribute("role")?(e.removeAttribute("tabindex"),e.setAttribute("aria-selected",!0),this._toggleDropDown(e,!0),M.trigger(e,Dl,{relatedTarget:t})):e.classList.add(jl)},e,e.classList.contains(Fl)))}_deactivate(e,t){e&&(e.classList.remove(Ll),e.blur(),this._deactivate(U.getElementFromSelector(e)),this._queueCallback(()=>{"tab"===e.getAttribute("role")?(e.setAttribute("aria-selected",!1),e.setAttribute("tabindex","-1"),this._toggleDropDown(e,!1),M.trigger(e,xl,{relatedTarget:t})):e.classList.remove(jl)},e,e.classList.contains(Fl)))}_keydown(e){if(![Rl,Nl,El,Al,Ml,Pl].includes(e.key))return;e.stopPropagation(),e.preventDefault();const t=this._getChildren().filter(e=>!r(e));let i;if([Ml,Pl].includes(e.key))i=t[e.key===Ml?0:t.length-1];else{const s=[Nl,Al].includes(e.key);i=v(t,e.target,s,!0)}i&&(i.focus({preventScroll:!0}),$l.getOrCreateInstance(i).show())}_getChildren(){return U.find(Ul,this._parent)}_getActiveElem(){return this._getChildren().find(e=>this._elemIsActive(e))||null}_setInitialAttributes(e,t){this._setAttributeIfNotExists(e,"role","tablist");for(const e of t)this._setInitialAttributesOnChild(e)}_setInitialAttributesOnChild(e){e=this._getInnerElement(e);const t=this._elemIsActive(e),i=this._getOuterElement(e);e.setAttribute("aria-selected",t),i!==e&&this._setAttributeIfNotExists(i,"role","presentation"),t||e.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(e,"role","tab"),this._setInitialAttributesOnTargetPanel(e)}_setInitialAttributesOnTargetPanel(e){const t=U.getElementFromSelector(e);t&&(this._setAttributeIfNotExists(t,"role","tabpanel"),e.id&&this._setAttributeIfNotExists(t,"aria-labelledby",`${e.id}`))}_toggleDropDown(e,t){const i=this._getOuterElement(e);if(!i.classList.contains("dropdown"))return;const s=(e,s)=>{const l=U.findOne(e,i);l&&l.classList.toggle(s,t)};s(Vl,Ll),s(".dropdown-menu",jl),i.setAttribute("aria-expanded",t)}_setAttributeIfNotExists(e,t,i){e.hasAttribute(t)||e.setAttribute(t,i)}_elemIsActive(e){return e.classList.contains(Ll)}_getInnerElement(e){return e.matches(Ul)?e:U.findOne(Ul,e)}_getOuterElement(e){return e.closest(".nav-item, .list-group-item")||e}static jQueryInterface(e){return this.each(function(){const t=$l.getOrCreateInstance(this);if("string"==typeof e){if(void 0===t[e]||e.startsWith("_")||"constructor"===e)throw new TypeError(`No method named "${e}"`);t[e]()}})}}M.on(document,kl,Hl,function(e){["A","AREA"].includes(this.tagName)&&e.preventDefault(),r(this)||$l.getOrCreateInstance(this).show()}),M.on(window,Ol,()=>{for(const e of U.find(Bl))$l.getOrCreateInstance(e)}),g($l);const Wl=".bs.toast",ql=`mouseover${Wl}`,Gl=`mouseout${Wl}`,Kl=`focusin${Wl}`,Ql=`focusout${Wl}`,Yl=`hide${Wl}`,Jl=`hidden${Wl}`,Xl=`show${Wl}`,Zl=`shown${Wl}`,en="hide",tn="show",sn="showing",ln={animation:"boolean",autohide:"boolean",delay:"number"},nn={animation:!0,autohide:!0,delay:5e3};class on extends z{constructor(e,t){super(e,t),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return nn}static get DefaultType(){return ln}static get NAME(){return"toast"}show(){M.trigger(this._element,Xl).defaultPrevented||(this._clearTimeout(),this._config.animation&&this._element.classList.add("fade"),this._element.classList.remove(en),c(this._element),this._element.classList.add(tn,sn),this._queueCallback(()=>{this._element.classList.remove(sn),M.trigger(this._element,Zl),this._maybeScheduleHide()},this._element,this._config.animation))}hide(){this.isShown()&&(M.trigger(this._element,Yl).defaultPrevented||(this._element.classList.add(sn),this._queueCallback(()=>{this._element.classList.add(en),this._element.classList.remove(sn,tn),M.trigger(this._element,Jl)},this._element,this._config.animation)))}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(tn),super.dispose()}isShown(){return this._element.classList.contains(tn)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(e,t){switch(e.type){case"mouseover":case"mouseout":this._hasMouseInteraction=t;break;case"focusin":case"focusout":this._hasKeyboardInteraction=t}if(t)return void this._clearTimeout();const i=e.relatedTarget;this._element===i||this._element.contains(i)||this._maybeScheduleHide()}_setListeners(){M.on(this._element,ql,e=>this._onInteraction(e,!0)),M.on(this._element,Gl,e=>this._onInteraction(e,!1)),M.on(this._element,Kl,e=>this._onInteraction(e,!0)),M.on(this._element,Ql,e=>this._onInteraction(e,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(e){return this.each(function(){const t=on.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===t[e])throw new TypeError(`No method named "${e}"`);t[e](this)}})}}return B(on),g(on),{Alert:G,Button:Q,Carousel:ke,Collapse:He,Dropdown:Bi,Modal:xs,Offcanvas:Us,Popover:hl,ScrollSpy:wl,Tab:$l,Toast:on,Tooltip:al}}),function(e,t){void 0===e&&void 0!==window&&(e=window),"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof module&&module.exports?module.exports=t(require("jquery")):t(e.jQuery)}(this,function(e){!function(e){"use strict";var t,i,s,l,n=["sanitize","whiteList","sanitizeFn"],o=["background","cite","href","itemtype","longdesc","poster","src","xlink:href"],a=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:/?#]*(?:[/?#]|$))/gi,r=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+/]+=*$/i,d=["title","placeholder"];function h(t,i,s){if(s&&"function"==typeof s)return s(t);for(var l=Object.keys(i),n=0,d=t.length;n<d;n++)for(var h=t[n].querySelectorAll("*"),c=0,u=h.length;c<u;c++){var m=h[c],p=m.nodeName.toLowerCase();if(-1===l.indexOf(p))m.parentNode.removeChild(m);else for(var g=[].slice.call(m.attributes),f=[].concat(i["*"]||[],i[p]||[]),_=0,v=g.length;_<v;_++){var b=g[_];!function(t,i){var s=t.nodeName.toLowerCase();if(-1!==e.inArray(s,i))return-1===e.inArray(s,o)||Boolean(t.nodeValue.match(a)||t.nodeValue.match(r));for(var l=e(i).filter(function(e,t){return t instanceof RegExp}),n=0,d=l.length;n<d;n++)if(s.match(l[n]))return 1}(b,f)&&m.removeAttribute(b.nodeName)}}}function c(e){var t,i={};return d.forEach(function(s){(t=e.attr(s))&&(i[s]=t)}),!i.placeholder&&i.title&&(i.placeholder=i.title),i}if(!("classList"in document.createElement("_"))&&"Element"in(p=window)){var u="classList",m="prototype",p=p.Element[m],g=Object,f=function(){var t=e(this);return{add:function(e){return e=Array.prototype.slice.call(arguments).join(" "),t.addClass(e)},remove:function(e){return e=Array.prototype.slice.call(arguments).join(" "),t.removeClass(e)},toggle:function(e,i){return t.toggleClass(e,i)},contains:function(e){return t.hasClass(e)}}};if(g.defineProperty){var _={get:f,enumerable:!0,configurable:!0};try{g.defineProperty(p,u,_)}catch(m){void 0!==m.number&&-2146823252!==m.number||(_.enumerable=!1,g.defineProperty(p,u,_))}}else g[m].__defineGetter__&&p.__defineGetter__(u,f)}function v(e){if(null==this)throw new TypeError;var t=String(this);if(e&&"[object RegExp]"==l.call(e))throw new TypeError;var i=t.length,s=String(e),n=s.length,o=((e=(e=1<arguments.length?arguments[1]:void 0)?Number(e):0)!=e&&(e=0),Math.min(Math.max(e,0),i));if(i<n+o)return!1;for(var a=-1;++a<n;)if(t.charCodeAt(o+a)!=s.charCodeAt(a))return!1;return!0}function b(){var e=this.selectpicker.main.data,t=(e=this.options.source.data||this.options.source.search?Object.values(this.selectpicker.optionValuesDataMap):e).filter(function(e){return!(!e.selected||this.options.hideDisabled&&e.disabled)},this);if(this.options.source.data&&!this.multiple&&1<t.length){for(var i=0;i<t.length-1;i++)t[i].selected=!1;t=[t[t.length-1]]}return t}function C(e){for(var t,i=[],s=e||b.call(this),l=0,n=s.length;l<n;l++)(t=s[l]).disabled||i.push(void 0===t.value?t.text:t.value);return this.multiple?i:i.length?i[0]:null}(_=document.createElement("_")).classList.add("c1","c2"),_.classList.contains("c2")||(t=DOMTokenList.prototype.add,i=DOMTokenList.prototype.remove,DOMTokenList.prototype.add=function(){Array.prototype.forEach.call(arguments,t.bind(this))},DOMTokenList.prototype.remove=function(){Array.prototype.forEach.call(arguments,i.bind(this))}),_.classList.toggle("c3",!1),_.classList.contains("c3")&&(s=DOMTokenList.prototype.toggle,DOMTokenList.prototype.toggle=function(e,t){return 1 in arguments&&!this.contains(e)==!t?t:s.call(this,e)}),_=null,Object.values="function"==typeof Object.values?Object.values:function(e){return Object.keys(e).map(function(t){return e[t]})},String.prototype.startsWith||(l={}.toString,Object.defineProperty?Object.defineProperty(String.prototype,"startsWith",{value:v,configurable:!0,writable:!0}):String.prototype.startsWith=v);var w={useDefault:!1,_set:e.valHooks.select.set},y=(e.valHooks.select.set=function(t,i){return i&&!w.useDefault&&e(t).data("selected",!0),w._set.apply(this,arguments)},null),S=function(){try{return new Event("change"),!0}catch(e){return!1}}();function x(e,t,i,s){for(var l=["display","subtext","tokens"],n=!1,o=0;o<l.length;o++){var a=l[o],r=e[a];if(r&&(r=r.toString(),"display"===a&&(r=r.replace(/<[^>]+>/g,"")),r=(r=s?R(r):r).toUpperCase(),n="function"==typeof i?i(r,t):"contains"===i?0<=r.indexOf(t):r.startsWith(t)))break}return n}function T(e){return parseInt(e,10)||0}e.fn.triggerNative=function(e){var t,i=this[0];i.dispatchEvent&&(S?t=new Event(e,{bubbles:!0}):(t=document.createEvent("Event")).initEvent(e,!0,!1),i.dispatchEvent(t))};var D={"":"A","":"A","":"A","":"A","":"A","":"A","":"a","":"a","":"a","":"a","":"a","":"a","":"C","":"c","":"D","":"d","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"N","":"n","":"O","":"O","":"O","":"O","":"O","":"O","":"o","":"o","":"o","":"o","":"o","":"o","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"Y","":"y","":"y","":"Ae","":"ae","":"Th","":"th","":"ss","":"A","":"A","":"A","":"a","":"a","":"a","":"C","":"C","":"C","":"C","":"c","":"c","":"c","":"c","":"D","":"D","":"d","":"d","":"E","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"e","":"G","":"G","":"G","":"G","":"g","":"g","":"g","":"g","":"H","":"H","":"h","":"h","":"I","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"i","":"J","":"j","":"K","":"k","":"k","":"L","":"L","":"L","":"L","":"L","":"l","":"l","":"l","":"l","":"l","":"N","":"N","":"N","":"N","":"n","":"n","":"n","":"n","":"O","":"O","":"O","":"o","":"o","":"o","":"R","":"R","":"R","":"r","":"r","":"r","":"S","":"S","":"S","":"S","":"s","":"s","":"s","":"s","":"T","":"T","":"T","":"t","":"t","":"t","":"U","":"U","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"u","":"u","":"W","":"w","":"Y","":"y","":"Y","":"Z","":"Z","":"Z","":"z","":"z","":"z","":"IJ","":"ij","":"Oe","":"oe","":"'n","":"s"},k=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,I=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\u1ab0-\\u1aff\\u1dc0-\\u1dff]","g");function O(e){return D[e]}function R(e){return(e=e.toString())&&e.replace(k,O).replace(I,"")}N={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},g="(?:"+Object.keys(N).join("|")+")",E=RegExp(g),A=RegExp(g,"g");var N,E,A,M=function(e){return E.test(e=null==e?"":""+e)?e.replace(A,P):e};function P(e){return N[e]}var L={32:" ",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",65:"A",66:"B",67:"C",68:"D",69:"E",70:"F",71:"G",72:"H",73:"I",74:"J",75:"K",76:"L",77:"M",78:"N",79:"O",80:"P",81:"Q",82:"R",83:"S",84:"T",85:"U",86:"V",87:"W",88:"X",89:"Y",90:"Z",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9"},F=window.Dropdown||bootstrap.Dropdown;function j(){var t;try{t=e.fn.dropdown.Constructor.VERSION}catch(e){t=F.VERSION}return t}var V={success:!1,major:"3"};try{V.full=(j()||"").split(" ")[0].split("."),V.major=V.full[0],V.success=!0}catch(m){}var z=0,H=".bs.select",U={DISABLED:"disabled",DIVIDER:"divider",SHOW:"open",DROPUP:"dropup",MENU:"dropdown-menu",MENURIGHT:"dropdown-menu-right",MENULEFT:"dropdown-menu-left",BUTTONCLASS:"btn-default",POPOVERHEADER:"popover-title",ICONBASE:"glyphicon",TICKICON:"glyphicon-ok"},B={MENU:"."+U.MENU,DATA_TOGGLE:'data-toggle="dropdown"'},$={div:document.createElement("div"),span:document.createElement("span"),i:document.createElement("i"),subtext:document.createElement("small"),a:document.createElement("a"),li:document.createElement("li"),whitespace:document.createTextNode(""),fragment:document.createDocumentFragment(),option:document.createElement("option")},W=($.selectedOption=$.option.cloneNode(!1),$.selectedOption.setAttribute("selected",!0),$.noResults=$.li.cloneNode(!1),$.noResults.className="no-results",$.a.setAttribute("role","option"),$.a.className="dropdown-item",$.subtext.className="text-muted",$.text=$.span.cloneNode(!1),$.text.className="text",$.checkMark=$.span.cloneNode(!1),new RegExp("38|40")),q=new RegExp("^9$|27"),G={li:function(e,t,i){var s=$.li.cloneNode(!1);return e&&(1===e.nodeType||11===e.nodeType?s.appendChild(e):s.innerHTML=e),void 0!==t&&""!==t&&(s.className=t),null!=i&&s.classList.add("optgroup-"+i),s},a:function(e,t,i){var s=$.a.cloneNode(!0);return e&&(11===e.nodeType?s.appendChild(e):s.insertAdjacentHTML("beforeend",e)),void 0!==t&&""!==t&&s.classList.add.apply(s.classList,t.split(/\s+/)),i&&s.setAttribute("style",i),s},text:function(e,t){var i,s,l=$.text.cloneNode(!1);if(e.content?l.innerHTML=e.content:(l.textContent=e.text,e.icon&&(i=$.whitespace.cloneNode(!1),(s=(!0===t?$.i:$.span).cloneNode(!1)).className=this.options.iconBase+" "+e.icon,$.fragment.appendChild(s),$.fragment.appendChild(i)),e.subtext&&((s=$.subtext.cloneNode(!1)).textContent=e.subtext,l.appendChild(s))),!0===t)for(;0<l.childNodes.length;)$.fragment.appendChild(l.childNodes[0]);else $.fragment.appendChild(l);return $.fragment},label:function(e){var t,i,s=$.text.cloneNode(!1);return s.innerHTML=e.display,e.icon&&(t=$.whitespace.cloneNode(!1),(i=$.span.cloneNode(!1)).className=this.options.iconBase+" "+e.icon,$.fragment.appendChild(i),$.fragment.appendChild(t)),e.subtext&&((i=$.subtext.cloneNode(!1)).textContent=e.subtext,s.appendChild(i)),$.fragment.appendChild(s),$.fragment}},K={fromOption:function(e,t){var i;switch(t){case"divider":i="true"===e.getAttribute("data-divider");break;case"text":i=e.textContent;break;case"label":i=e.label;break;case"style":i=e.style.cssText;break;case"title":i=e.title;break;default:i=e.getAttribute("data-"+t.replace(/[A-Z]+(?![a-z])|[A-Z]/g,function(e,t){return(t?"-":"")+e.toLowerCase()}))}return i},fromDataSource:function(e,t){var i;switch(t){case"text":case"label":i=e.text||e.value||"";break;default:i=e[t]}return i}};function Q(e,t){e.length||($.noResults.innerHTML=this.options.noneResultsText.replace("{0}",'"'+M(t)+'"'),this.$menuInner[0].firstChild.appendChild($.noResults))}function Y(e){return!(e.hidden||this.options.hideDisabled&&e.disabled)}function J(t,i){var s=this;w.useDefault||(e.valHooks.select.set=w._set,w.useDefault=!0),this.$element=e(t),this.$newElement=null,this.$button=null,this.$menu=null,this.options=i,this.selectpicker={main:{data:[],optionQueue:$.fragment.cloneNode(!1),hasMore:!1},search:{data:[],hasMore:!1},current:{},view:{},optionValuesDataMap:{},isSearching:!1,keydown:{keyHistory:"",resetKeyHistory:{start:function(){return setTimeout(function(){s.selectpicker.keydown.keyHistory=""},800)}}}},this.sizeInfo={},"number"==typeof(t=this.options.windowPadding)&&(this.options.windowPadding=[t,t,t,t]),this.val=J.prototype.val,this.render=J.prototype.render,this.refresh=J.prototype.refresh,this.setStyle=J.prototype.setStyle,this.selectAll=J.prototype.selectAll,this.deselectAll=J.prototype.deselectAll,this.destroy=J.prototype.destroy,this.remove=J.prototype.remove,this.show=J.prototype.show,this.hide=J.prototype.hide,this.init()}function X(t){var i,s=arguments,l=t;if([].shift.apply(s),!V.success){try{V.full=(j()||"").split(" ")[0].split(".")}catch(t){J.BootstrapVersion?V.full=J.BootstrapVersion.split(" ")[0].split("."):(V.full=[V.major,"0","0"],console.warn("There was an issue retrieving Bootstrap's version. Ensure Bootstrap is being loaded before bootstrap-select and there is no namespace collision. If loading Bootstrap asynchronously, the version may need to be manually specified via $.fn.selectpicker.Constructor.BootstrapVersion.",t))}V.major=V.full[0],V.success=!0}if("4"<=V.major){var o=[];J.DEFAULTS.style===U.BUTTONCLASS&&o.push({name:"style",className:"BUTTONCLASS"}),J.DEFAULTS.iconBase===U.ICONBASE&&o.push({name:"iconBase",className:"ICONBASE"}),J.DEFAULTS.tickIcon===U.TICKICON&&o.push({name:"tickIcon",className:"TICKICON"}),U.DIVIDER="dropdown-divider",U.SHOW="show",U.BUTTONCLASS="btn-light",U.POPOVERHEADER="popover-header",U.ICONBASE="",U.TICKICON="bs-ok-default";for(var a=0;a<o.length;a++)t=o[a],J.DEFAULTS[t.name]=U[t.className]}"4"<V.major&&(B.DATA_TOGGLE='data-bs-toggle="dropdown"');var r=this.each(function(){var t=e(this);if(t.is("select")){var o=t.data("selectpicker"),a="object"==typeof l&&l;if(a.title&&(a.placeholder=a.title),o){if(a)for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(o.options[r]=a[r])}else{var d,h=t.data();for(d in h)Object.prototype.hasOwnProperty.call(h,d)&&-1!==e.inArray(d,n)&&delete h[d];var u=e.extend({},J.DEFAULTS,e.fn.selectpicker.defaults||{},c(t),h,a);u.template=e.extend({},J.DEFAULTS.template,e.fn.selectpicker.defaults?e.fn.selectpicker.defaults.template:{},h.template,a.template),u.source=e.extend({},J.DEFAULTS.source,e.fn.selectpicker.defaults?e.fn.selectpicker.defaults.source:{},a.source),t.data("selectpicker",o=new J(this,u))}"string"==typeof l&&(i=o[l]instanceof Function?o[l].apply(o,s):o.options[l])}});return void 0!==i?i:r}J.VERSION="1.14.0-beta3",J.DEFAULTS={noneSelectedText:"Nothing selected",noneResultsText:"No results matched {0}",countSelectedText:function(e,t){return 1==e?"{0} item selected":"{0} items selected"},maxOptionsText:function(e,t){return[1==e?"Limit reached ({n} item max)":"Limit reached ({n} items max)",1==t?"Group limit reached ({n} item max)":"Group limit reached ({n} items max)"]},selectAllText:"Select All",deselectAllText:"Deselect All",source:{pageSize:40},chunkSize:40,doneButton:!1,doneButtonText:"Close",multipleSeparator:", ",styleBase:"btn",style:U.BUTTONCLASS,size:"auto",title:null,placeholder:null,allowClear:!1,selectedTextFormat:"values",width:!1,container:!1,hideDisabled:!1,showSubtext:!1,showIcon:!0,showContent:!0,dropupAuto:!0,header:!1,liveSearch:!1,liveSearchPlaceholder:null,liveSearchNormalize:!1,liveSearchStyle:"contains",actionsBox:!1,iconBase:U.ICONBASE,tickIcon:U.TICKICON,showTick:!1,template:{caret:'<span class="caret"></span>'},maxOptions:!1,mobile:!1,selectOnTab:!0,dropdownAlignRight:!1,windowPadding:0,virtualScroll:600,display:!1,sanitize:!0,sanitizeFn:null,whiteList:{"*":["class","dir","id","lang","role","tabindex","style",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]}},J.prototype={constructor:J,init:function(){var t=this,i=this.$element.attr("id"),s=this.$element[0],l=s.form;z++,this.selectId="bs-select-"+z,s.classList.add("bs-select-hidden"),this.multiple=this.$element.prop("multiple"),this.autofocus=this.$element.prop("autofocus"),s.classList.contains("show-tick")&&(this.options.showTick=!0),this.$newElement=this.createDropdown(),this.$element.after(this.$newElement).prependTo(this.$newElement),l&&null===s.form&&(l.id||(l.id="form-"+this.selectId),s.setAttribute("form",l.id)),this.$button=this.$newElement.children("button"),this.options.allowClear&&(this.$clearButton=this.$button.children(".bs-select-clear-selected")),this.$menu=this.$newElement.children(B.MENU),this.$menuInner=this.$menu.children(".inner"),this.$searchbox=this.$menu.find("input"),s.classList.remove("bs-select-hidden"),this.fetchData(function(){t.render(!0),t.buildList(),requestAnimationFrame(function(){t.$element.trigger("loaded"+H)})}),!0===this.options.dropdownAlignRight&&this.$menu[0].classList.add(U.MENURIGHT),void 0!==i&&this.$button.attr("data-id",i),this.checkDisabled(),this.clickListener(),4<V.major&&(this.dropdown=new F(this.$button[0])),this.options.liveSearch?(this.liveSearchListener(),this.focusedParent=this.$searchbox[0]):this.focusedParent=this.$menuInner[0],this.setStyle(),this.setWidth(),this.options.container?this.selectPosition():this.$element.on("hide"+H,function(){var e,i;t.isVirtual()&&(i=(e=t.$menuInner[0]).firstChild.cloneNode(!1),e.replaceChild(i,e.firstChild),e.scrollTop=0)}),this.$menu.data("this",this),this.$newElement.data("this",this),this.options.mobile&&this.mobile(),this.$newElement.on({"hide.bs.dropdown":function(e){t.$element.trigger("hide"+H,e)},"hidden.bs.dropdown":function(e){t.$element.trigger("hidden"+H,e)},"show.bs.dropdown":function(e){t.$element.trigger("show"+H,e)},"shown.bs.dropdown":function(e){t.$element.trigger("shown"+H,e)}}),s.hasAttribute("required")&&this.$element.on("invalid"+H,function(){t.$button[0].classList.add("bs-invalid"),t.$element.on("shown"+H+".invalid",function(){t.$element.val(t.$element.val()).off("shown"+H+".invalid")}).on("rendered"+H,function(){this.validity.valid&&t.$button[0].classList.remove("bs-invalid"),t.$element.off("rendered"+H)}),t.$button.on("blur"+H,function(){t.$element.trigger("focus").trigger("blur"),t.$button.off("blur"+H)})}),l&&e(l).on("reset"+H,function(){requestAnimationFrame(function(){t.render()})})},createDropdown:function(){var t=this.multiple||this.options.showTick?" show-tick":"",i=this.multiple?' aria-multiselectable="true"':"",s="",l=this.autofocus?" autofocus":"";V.major<4&&this.$element.parent().hasClass("input-group")&&(s=" input-group-btn");var n="",o="",a="",r="",d="";return this.options.header&&(n='<div class="'+U.POPOVERHEADER+'"><button type="button" class="close" aria-hidden="true">&times;</button>'+this.options.header+"</div>"),this.options.liveSearch&&(o='<div class="bs-searchbox"><input type="search" class="form-control" autocomplete="off"'+(null===this.options.liveSearchPlaceholder?"":' placeholder="'+M(this.options.liveSearchPlaceholder)+'"')+' role="combobox" aria-label="Search" aria-controls="'+this.selectId+'" aria-autocomplete="list"></div>'),this.multiple&&this.options.actionsBox&&(a='<div class="bs-actionsbox"><div class="btn-group btn-group-sm"><button type="button" class="actions-btn bs-select-all btn '+U.BUTTONCLASS+'">'+this.options.selectAllText+'</button><button type="button" class="actions-btn bs-deselect-all btn '+U.BUTTONCLASS+'">'+this.options.deselectAllText+"</button></div></div>"),this.multiple&&this.options.doneButton&&(r='<div class="bs-donebutton"><div class="btn-group"><button type="button" class="btn btn-sm '+U.BUTTONCLASS+'">'+this.options.doneButtonText+"</button></div></div>"),this.options.allowClear&&(d='<span class="close bs-select-clear-selected" title="'+this.options.deselectAllText+'"><span>&times;</span>'),t='<div class="dropdown bootstrap-select'+t+s+'"><button type="button" tabindex="-1" class="'+this.options.styleBase+' dropdown-toggle" '+("static"===this.options.display?'data-display="static"':"")+B.DATA_TOGGLE+l+' role="combobox" aria-owns="'+this.selectId+'" aria-haspopup="listbox" aria-expanded="false"><div class="filter-option"><div class="filter-option-inner"><div class="filter-option-inner-inner">&nbsp;</div></div> </div>'+d+"</span>"+("4"<=V.major?"":'<span class="bs-caret">'+this.options.template.caret+"</span>")+'</button><div class="'+U.MENU+" "+("4"<=V.major?"":U.SHOW)+'">'+n+o+a+'<div class="inner '+U.SHOW+'" role="listbox" id="'+this.selectId+'" tabindex="-1" '+i+'><ul class="'+U.MENU+" inner "+("4"<=V.major?U.SHOW:"")+'" role="presentation"></ul></div>'+r+"</div></div>",e(t)},setPositionData:function(){this.selectpicker.view.canHighlight=[],this.selectpicker.view.size=0,this.selectpicker.view.firstHighlightIndex=!1;for(var e=0;e<this.selectpicker.current.data.length;e++){var t=this.selectpicker.current.data[e],i=!0;"divider"===t.type?(i=!1,t.height=this.sizeInfo.dividerHeight):"optgroup-label"===t.type?(i=!1,t.height=this.sizeInfo.dropdownHeaderHeight):t.height=this.sizeInfo.liHeight,t.disabled&&(i=!1),this.selectpicker.view.canHighlight.push(i),i&&(this.selectpicker.view.size++,t.posinset=this.selectpicker.view.size,!1===this.selectpicker.view.firstHighlightIndex&&(this.selectpicker.view.firstHighlightIndex=e)),t.position=(0===e?0:this.selectpicker.current.data[e-1].position)+t.height}},isVirtual:function(){return!1!==this.options.virtualScroll&&this.selectpicker.main.data.length>=this.options.virtualScroll||!0===this.options.virtualScroll},createView:function(t,i,s){var l=this,n=0;function o(e,i){var s,n=l.selectpicker.current.data.length,a=[],r=!0,d=l.isVirtual();l.selectpicker.view.scrollTop=e;for(var c,u=l.options.chunkSize,m=Math.ceil(n/u)||1,p=0;p<m;p++){var g=p===m-1?n:(p+1)*u;if(a[p]=[p*u+(p?1:0),g],!n)break;void 0===s&&e-1<=l.selectpicker.current.data[g-1].position-l.sizeInfo.menuInnerHeight&&(s=p)}if(void 0===s&&(s=0),w=[l.selectpicker.view.position0,l.selectpicker.view.position1],f=Math.max(0,s-1),v=Math.min(m-1,s+1),l.selectpicker.view.position0=!1!==d&&Math.max(0,a[f][0])||0,l.selectpicker.view.position1=!1===d?n:Math.min(n,a[v][1])||0,f=w[0]!==l.selectpicker.view.position0||w[1]!==l.selectpicker.view.position1,void 0!==l.activeElement&&(i&&(l.activeElement!==l.selectedElement&&l.defocusItem(l.activeElement),l.activeElement=void 0),l.activeElement!==l.selectedElement&&l.defocusItem(l.selectedElement)),void 0!==l.prevActiveElement&&l.prevActiveElement!==l.activeElement&&l.prevActiveElement!==l.selectedElement&&l.defocusItem(l.prevActiveElement),i||f||l.selectpicker.current.hasMore){if(v=l.selectpicker.view.visibleElements?l.selectpicker.view.visibleElements.slice():[],l.selectpicker.view.visibleElements=!1===d?l.selectpicker.current.elements:l.selectpicker.current.elements.slice(l.selectpicker.view.position0,l.selectpicker.view.position1),l.setOptionStatus(),(t||!1===d&&i)&&(w=v,c=l.selectpicker.view.visibleElements,r=!(w.length===c.length&&w.every(function(e,t){return e===c[t]}))),(i||!0===d)&&r){var f=l.$menuInner[0],_=document.createDocumentFragment(),v=f.firstChild.cloneNode(!1),b=l.selectpicker.view.visibleElements,C=[];f.replaceChild(v,f.firstChild);p=0;for(var w,y=b.length;p<y;p++){var S,x,T=b[p];l.options.sanitize&&(S=T.lastChild)&&(x=l.selectpicker.current.data[p+l.selectpicker.view.position0])&&x.content&&!x.sanitized&&(C.push(S),x.sanitized=!0),_.appendChild(T)}l.options.sanitize&&C.length&&h(C,l.options.whiteList,l.options.sanitizeFn),!0===d?(w=0===l.selectpicker.view.position0?0:l.selectpicker.current.data[l.selectpicker.view.position0-1].position,r=l.selectpicker.view.position1>n-1?0:l.selectpicker.current.data[n-1].position-l.selectpicker.current.data[l.selectpicker.view.position1-1].position,f.firstChild.style.marginTop=w+"px",f.firstChild.style.marginBottom=r+"px"):(f.firstChild.style.marginTop=0,f.firstChild.style.marginBottom=0),f.firstChild.appendChild(_),!0===d&&l.sizeInfo.hasScrollBar&&(v=f.firstChild.offsetWidth,i&&v<l.sizeInfo.menuInnerInnerWidth&&l.sizeInfo.totalMenuWidth>l.sizeInfo.selectWidth?f.firstChild.style.minWidth=l.sizeInfo.menuInnerInnerWidth+"px":v>l.sizeInfo.menuInnerInnerWidth&&(l.$menu[0].style.minWidth=0,(w=f.firstChild.offsetWidth)>l.sizeInfo.menuInnerInnerWidth&&(l.sizeInfo.menuInnerInnerWidth=w,f.firstChild.style.minWidth=l.sizeInfo.menuInnerInnerWidth+"px"),l.$menu[0].style.minWidth=""))}(!t&&l.options.source.data||t&&l.options.source.search)&&l.selectpicker.current.hasMore&&s===m-1&&0<e&&(r=Math.floor(s*l.options.chunkSize/l.options.source.pageSize)+2,l.fetchData(function(){l.render(),l.buildList(n,t),l.setPositionData(),o(e)},t?"search":"data",r,t?l.selectpicker.search.previousValue:void 0))}l.prevActiveElement=l.activeElement,l.options.liveSearch?t&&i&&(l.selectpicker.view.canHighlight[d=0]||(d=1+l.selectpicker.view.canHighlight.slice(1).indexOf(!0)),v=l.selectpicker.view.visibleElements[d],l.defocusItem(l.selectpicker.view.currentActive),l.activeElement=(l.selectpicker.current.data[d]||{}).element,l.focusItem(v)):l.$menuInner.trigger("focus")}this.selectpicker.isSearching=t,this.selectpicker.current=t?this.selectpicker.search:this.selectpicker.main,this.setPositionData(),i&&(s?n=this.$menuInner[0].scrollTop:l.multiple||"number"==typeof(s=((i=l.$element[0]).options[i.selectedIndex]||{}).liIndex)&&!1!==l.options.size&&(s=(i=l.selectpicker.main.data[s])&&i.position)&&(n=s-(l.sizeInfo.menuInnerHeight+l.sizeInfo.liHeight)/2)),o(n,!0),this.$menuInner.off("scroll.createView").on("scroll.createView",function(e,t){l.noScroll||o(this.scrollTop,t),l.noScroll=!1}),e(window).off("resize"+H+"."+this.selectId+".createView").on("resize"+H+"."+this.selectId+".createView",function(){l.$newElement.hasClass(U.SHOW)&&o(l.$menuInner[0].scrollTop)})},focusItem:function(e,t,i){var s;e&&(t=t||this.selectpicker.current.data[this.selectpicker.current.elements.indexOf(this.activeElement)],(s=e.firstChild)&&(s.setAttribute("aria-setsize",this.selectpicker.view.size),s.setAttribute("aria-posinset",t.posinset),!0!==i&&(this.focusedParent.setAttribute("aria-activedescendant",s.id),e.classList.add("active"),s.classList.add("active"))))},defocusItem:function(e){e&&(e.classList.remove("active"),e.firstChild&&e.firstChild.classList.remove("active"))},setPlaceholder:function(){var e,t,i,s,l,n,o,a=this,r=!1;return!this.options.placeholder&&!this.options.allowClear||this.multiple||(this.selectpicker.view.titleOption||(this.selectpicker.view.titleOption=document.createElement("option")),e=this.$element[0],t=!(r=!0),i=!this.selectpicker.view.titleOption.parentNode,s=e.selectedIndex,l=e.options[s],n=(n=e.querySelector("select > *:not(:disabled)"))?n.index:0,o=(o=window.performance&&window.performance.getEntriesByType("navigation"))&&o.length?"back_forward"!==o[0].type:2!==window.performance.navigation.type,i&&(this.selectpicker.view.titleOption.className="bs-title-option",this.selectpicker.view.titleOption.value="",t=!l||s===n&&!1===l.defaultSelected&&void 0===this.$element.data("selected")),!i&&0===this.selectpicker.view.titleOption.index||e.insertBefore(this.selectpicker.view.titleOption,e.firstChild),t&&o?e.selectedIndex=0:"complete"!==document.readyState&&window.addEventListener("pageshow",function(){a.selectpicker.view.displayedValue!==e.value&&a.render()})),r},fetchData:function(e,t,i,s){i=i||1,t=t||"data";var l,n=this,o=this.options.source[t];o?(this.options.virtualScroll=!0,"function"==typeof o?o.call(this,function(i,s,o){var a=n.selectpicker["search"===t?"search":"main"];a.hasMore=s,a.totalItems=o,l=n.buildData(i,t),e.call(n,l),n.$element.trigger("fetched"+H)},i,s):Array.isArray(o)&&(l=n.buildData(o,t),e.call(n,l))):(l=this.buildData(!1,t),e.call(n,l))},buildData:function(t,i){var s=this,l=!1===t?K.fromOption:K.fromDataSource,n=':not([hidden]):not([data-hidden="true"]):not([style*="display: none"])',o=[],a=this.selectpicker.main.data?this.selectpicker.main.data.length:0,r=0,d=this.setPlaceholder()&&!t?1:0,h=("search"===i&&(a=this.selectpicker.search.data.length),this.options.hideDisabled&&(n+=":not(:disabled)"),t?t.filter(Y,this):this.$element[0].querySelectorAll("select > *"+n));function c(e){var t=o[o.length-1];t&&"divider"===t.type&&(t.optID||e.optID)||((e=e||{}).type="divider",o.push(e))}function u(i,n){var r,d,h;(n=n||{}).divider=l(i,"divider"),!0===n.divider?c({optID:n.optID}):(r=o.length+a,d=(d=l(i,"style"))?M(d):"",h=(i.className||"")+(n.optgroupClass||""),n.optID&&(h="opt "+h),n.optionClass=h.trim(),n.inlineStyle=d,n.text=l(i,"text"),n.title=l(i,"title"),n.content=l(i,"content"),n.tokens=l(i,"tokens"),n.subtext=l(i,"subtext"),n.icon=l(i,"icon"),n.display=n.content||n.text,n.value=void 0===i.value?i.text:i.value,n.type="option",n.index=r,n.option=i.option||i,n.option.liIndex=r,n.selected=!!i.selected,n.disabled=n.disabled||!!i.disabled,!1!==t&&(s.selectpicker.optionValuesDataMap[n.value]?n=e.extend(s.selectpicker.optionValuesDataMap[n.value],n):s.selectpicker.optionValuesDataMap[n.value]=n),o.push(n))}function m(e,i){var s=i[e],a=!(e-1<d)&&i[e-1],h=(i=i[e+1],t?s.children.filter(Y,this):s.querySelectorAll("option"+n));if(h.length){var m,p,g={display:M(l(f,"label")),subtext:l(s,"subtext"),icon:l(s,"icon"),type:"optgroup-label",optgroupClass:" "+(s.className||""),optgroup:s};r++,a&&c({optID:r}),g.optID=r,o.push(g);for(var _=0,v=h.length;_<v;_++){var b=h[_];0===_&&(p=(m=o.length-1)+v),u(b,{headerIndex:m,lastIndex:p,optID:g.optID,optgroupClass:g.optgroupClass,disabled:s.disabled})}i&&c({optID:r})}}for(var p=h.length,g=d;g<p;g++){var f=h[g],_=f.children;_&&_.length?m.call(this,g,h):u.call(this,f,{})}switch(i){case"data":this.selectpicker.main.data||(this.selectpicker.main.data=[]),Array.prototype.push.apply(this.selectpicker.main.data,o),this.selectpicker.current.data=this.selectpicker.main.data;break;case"search":Array.prototype.push.apply(this.selectpicker.search.data,o)}return o},buildList:function(e,t){var i=this,s=(t?this.selectpicker.search:this.selectpicker.main).data,l=[],n=0;!i.options.showTick&&!i.multiple||$.checkMark.parentNode||($.checkMark.className=this.options.iconBase+" "+i.options.tickIcon+" check-mark",$.a.appendChild($.checkMark));for(var o=s.length,a=e||0;a<o;a++){var r,d=(c=r=h=d=void 0,l),h=s[a],c=0;switch(h.type){case"divider":r=G.li(!1,U.DIVIDER,h.optID?h.optID+"div":void 0);break;case"option":(r=G.li(G.a(G.text.call(i,h),h.optionClass,h.inlineStyle),"",h.optID)).firstChild&&(r.firstChild.id=i.selectId+"-"+h.index);break;case"optgroup-label":r=G.li(G.label.call(i,h),"dropdown-header"+h.optgroupClass,h.optID)}h.element?h.element.innerHTML=r.innerHTML:h.element=r,d.push(h.element),h.display&&(c+=h.display.length),h.subtext&&(c+=h.subtext.length),h.icon&&(c+=1),n<c&&(n=c,i.selectpicker.view.widestOption=d[d.length-1])}e?t?Array.prototype.push.apply(this.selectpicker.search.elements,l):(Array.prototype.push.apply(this.selectpicker.main.elements,l),this.selectpicker.current.elements=this.selectpicker.main.elements):t?this.selectpicker.search.elements=l:this.selectpicker.main.elements=this.selectpicker.current.elements=l},findLis:function(){return this.$menuInner.find(".inner > li")},render:function(e){var t=this,i=this.$element[0],s=this.setPlaceholder()&&0===i.selectedIndex,l=b.call(this),n=l.length,o=C.call(this,l),a=this.$button[0],r=a.querySelector(".filter-option-inner-inner"),d=document.createTextNode(this.options.multipleSeparator),c=$.fragment.cloneNode(!1),u=!1;if(this.options.source.data&&e&&(l.map(function e(i){i.selected?t.createOption(i,!0):i.children&&i.children.length&&i.children.map(e)}),i.appendChild(this.selectpicker.main.optionQueue),s=s&&0===i.selectedIndex),a.classList.toggle("bs-placeholder",t.multiple?!n:!o&&0!==o),t.multiple||1!==l.length||(t.selectpicker.view.displayedValue=o),"static"===this.options.selectedTextFormat)c=G.text.call(this,{text:this.options.placeholder},!0);else if(!1===(this.multiple&&-1!==this.options.selectedTextFormat.indexOf("count")&&0<n&&(1<(e=this.options.selectedTextFormat.split(">")).length&&n>e[1]||1===e.length&&2<=n))){if(!s){for(var m=0;m<n&&m<50;m++){var p=l[m],g={};p&&(this.multiple&&0<m&&c.appendChild(d.cloneNode(!1)),p.title?g.text=p.title:p.content&&t.options.showContent?(g.content=p.content.toString(),u=!0):(t.options.showIcon&&(g.icon=p.icon),t.options.showSubtext&&!t.multiple&&p.subtext&&(g.subtext=" "+p.subtext),g.text=p.text.trim()),c.appendChild(G.text.call(this,g,!0)))}49<n&&c.appendChild(document.createTextNode("..."))}}else i=':not([hidden]):not([data-hidden="true"]):not([data-divider="true"]):not([style*="display: none"])',o=(this.options.hideDisabled&&(i+=":not(:disabled)"),this.$element[0].querySelectorAll("select > option"+i+", optgroup"+i+" option"+i).length),e="function"==typeof this.options.countSelectedText?this.options.countSelectedText(n,o):this.options.countSelectedText,c=G.text.call(this,{text:e.replace("{0}",n.toString()).replace("{1}",o.toString())},!0);c.childNodes.length||(c=G.text.call(this,{text:this.options.placeholder||this.options.noneSelectedText},!0)),a.title=c.textContent.replace(/<[^>]*>?/g,"").trim(),this.options.sanitize&&u&&h([c],t.options.whiteList,t.options.sanitizeFn),r.innerHTML="",r.appendChild(c),V.major<4&&this.$newElement[0].classList.contains("bs3-has-addon")&&(s=a.querySelector(".filter-expand"),(i=r.cloneNode(!0)).className="filter-expand",s?a.replaceChild(i,s):a.appendChild(i)),this.$element.trigger("rendered"+H)},setStyle:function(e,t){var i=this.$button[0],s=this.$newElement[0],l=this.options.style.trim();this.$element.attr("class")&&this.$newElement.addClass(this.$element.attr("class").replace(/selectpicker|mobile-device|bs-select-hidden|validate\[.*\]/gi,"")),V.major<4&&(s.classList.add("bs3"),s.parentNode.classList&&s.parentNode.classList.contains("input-group")&&(s.previousElementSibling||s.nextElementSibling)&&(s.previousElementSibling||s.nextElementSibling).classList.contains("input-group-addon")&&s.classList.add("bs3-has-addon")),s=e?e.trim():l,"add"==t?s&&i.classList.add.apply(i.classList,s.split(" ")):"remove"==t?s&&i.classList.remove.apply(i.classList,s.split(" ")):(l&&i.classList.remove.apply(i.classList,l.split(" ")),s&&i.classList.add.apply(i.classList,s.split(" ")))},liHeight:function(t){if(t||!1!==this.options.size&&!Object.keys(this.sizeInfo).length){t=$.div.cloneNode(!1);var i,s=$.div.cloneNode(!1),l=$.div.cloneNode(!1),n=document.createElement("ul"),o=$.li.cloneNode(!1),a=$.li.cloneNode(!1),r=$.a.cloneNode(!1),d=$.span.cloneNode(!1),h=this.options.header&&0<this.$menu.find("."+U.POPOVERHEADER).length?this.$menu.find("."+U.POPOVERHEADER)[0].cloneNode(!0):null,c=this.options.liveSearch?$.div.cloneNode(!1):null,u=this.options.actionsBox&&this.multiple&&0<this.$menu.find(".bs-actionsbox").length?this.$menu.find(".bs-actionsbox")[0].cloneNode(!0):null,m=this.options.doneButton&&this.multiple&&0<this.$menu.find(".bs-donebutton").length?this.$menu.find(".bs-donebutton")[0].cloneNode(!0):null,p=this.$element[0].options[0];if(this.sizeInfo.selectWidth=this.$newElement[0].offsetWidth,d.className="text",r.className="dropdown-item "+(p?p.className:""),t.className=this.$menu[0].parentNode.className+" "+U.SHOW,t.style.width=0,"auto"===this.options.width&&(s.style.minWidth=0),s.className=U.MENU+" "+U.SHOW,l.className="inner "+U.SHOW,n.className=U.MENU+" inner "+("4"<=V.major?U.SHOW:""),o.className=U.DIVIDER,a.className="dropdown-header",d.appendChild(document.createTextNode("")),this.selectpicker.current.data.length)for(var g=0;g<this.selectpicker.current.data.length;g++){var f=this.selectpicker.current.data[g];if("option"===f.type&&"none"!==e(f.element.firstChild).css("display")){i=f.element;break}}else i=$.li.cloneNode(!1),r.appendChild(d),i.appendChild(r);a.appendChild(d.cloneNode(!0)),this.selectpicker.view.widestOption&&n.appendChild(this.selectpicker.view.widestOption.cloneNode(!0)),n.appendChild(i),n.appendChild(o),n.appendChild(a),h&&s.appendChild(h),c&&(p=document.createElement("input"),c.className="bs-searchbox",p.className="form-control",c.appendChild(p),s.appendChild(c)),u&&s.appendChild(u),l.appendChild(n),s.appendChild(l),m&&s.appendChild(m),t.appendChild(s),document.body.appendChild(t),r=i.offsetHeight,d=a?a.offsetHeight:0,p=h?h.offsetHeight:0,n=c?c.offsetHeight:0,a=u?u.offsetHeight:0,h=m?m.offsetHeight:0,c=e(o).outerHeight(!0),u=window.getComputedStyle(s),m=s.offsetWidth,u={vert:(o={vert:T(u.paddingTop)+T(u.paddingBottom)+T(u.borderTopWidth)+T(u.borderBottomWidth),horiz:T(u.paddingLeft)+T(u.paddingRight)+T(u.borderLeftWidth)+T(u.borderRightWidth)}).vert+T(u.marginTop)+T(u.marginBottom)+2,horiz:o.horiz+T(u.marginLeft)+T(u.marginRight)+2},l.style.overflowY="scroll",l=s.offsetWidth-m,document.body.removeChild(t),this.sizeInfo.liHeight=r,this.sizeInfo.dropdownHeaderHeight=d,this.sizeInfo.headerHeight=p,this.sizeInfo.searchHeight=n,this.sizeInfo.actionsHeight=a,this.sizeInfo.doneButtonHeight=h,this.sizeInfo.dividerHeight=c,this.sizeInfo.menuPadding=o,this.sizeInfo.menuExtras=u,this.sizeInfo.menuWidth=m,this.sizeInfo.menuInnerInnerWidth=m-o.horiz,this.sizeInfo.totalMenuWidth=this.sizeInfo.menuWidth,this.sizeInfo.scrollBarWidth=l,this.sizeInfo.selectHeight=this.$newElement[0].offsetHeight,this.setPositionData()}},getSelectPosition:function(){var t,i=e(window),s=this.$newElement.offset(),l=e(this.options.container);this.options.container&&l.length&&!l.is("body")?((t=l.offset()).top+=parseInt(l.css("borderTopWidth")),t.left+=parseInt(l.css("borderLeftWidth"))):t={top:0,left:0},l=this.options.windowPadding;this.sizeInfo.selectOffsetTop=s.top-t.top-i.scrollTop(),this.sizeInfo.selectOffsetBot=i.height()-this.sizeInfo.selectOffsetTop-this.sizeInfo.selectHeight-t.top-l[2],this.sizeInfo.selectOffsetLeft=s.left-t.left-i.scrollLeft(),this.sizeInfo.selectOffsetRight=i.width()-this.sizeInfo.selectOffsetLeft-this.sizeInfo.selectWidth-t.left-l[1],this.sizeInfo.selectOffsetTop-=l[0],this.sizeInfo.selectOffsetLeft-=l[3]},setMenuSize:function(e){this.getSelectPosition();var t,i,s,l,n,o,a=this.sizeInfo.selectWidth,r=this.sizeInfo.liHeight,d=this.sizeInfo.headerHeight,h=this.sizeInfo.searchHeight,c=this.sizeInfo.actionsHeight,u=this.sizeInfo.doneButtonHeight,m=this.sizeInfo.dividerHeight,p=this.sizeInfo.menuPadding,g=0;if(this.options.dropupAuto&&(o=r*this.selectpicker.current.data.length+p.vert,o=this.sizeInfo.selectOffsetTop-this.sizeInfo.selectOffsetBot>this.sizeInfo.menuExtras.vert&&o+this.sizeInfo.menuExtras.vert+50>this.sizeInfo.selectOffsetBot,!0===this.selectpicker.isSearching&&(o=this.selectpicker.dropup),this.$newElement.toggleClass(U.DROPUP,o),this.selectpicker.dropup=o),"auto"===this.options.size)o=3<this.selectpicker.current.data.length?3*this.sizeInfo.liHeight+this.sizeInfo.menuExtras.vert-2:0,i=this.sizeInfo.selectOffsetBot-this.sizeInfo.menuExtras.vert,s=o+d+h+c+u,n=Math.max(o-p.vert,0),t=(l=i=this.$newElement.hasClass(U.DROPUP)?this.sizeInfo.selectOffsetTop-this.sizeInfo.menuExtras.vert:i)-d-h-c-u-p.vert;else if(this.options.size&&"auto"!=this.options.size&&this.selectpicker.current.elements.length>this.options.size){for(var f=0;f<this.options.size;f++)"divider"===this.selectpicker.current.data[f].type&&g++;t=(i=r*this.options.size+g*m+p.vert)-p.vert,l=i+d+h+c+u,s=n=""}this.$menu.css({"max-height":l+"px",overflow:"hidden","min-height":s+"px"}),this.$menuInner.css({"max-height":t+"px",overflow:"hidden auto","min-height":n+"px"}),this.sizeInfo.menuInnerHeight=Math.max(t,1),this.selectpicker.current.data.length&&this.selectpicker.current.data[this.selectpicker.current.data.length-1].position>this.sizeInfo.menuInnerHeight&&(this.sizeInfo.hasScrollBar=!0,this.sizeInfo.totalMenuWidth=this.sizeInfo.menuWidth+this.sizeInfo.scrollBarWidth),"auto"===this.options.dropdownAlignRight&&this.$menu.toggleClass(U.MENURIGHT,this.sizeInfo.selectOffsetLeft>this.sizeInfo.selectOffsetRight&&this.sizeInfo.selectOffsetRight<this.sizeInfo.totalMenuWidth-a),this.dropdown&&this.dropdown._popper&&this.dropdown._popper.update()},setSize:function(t){var i,s;this.liHeight(t),this.options.header&&this.$menu.css("padding-top",0),!1!==this.options.size&&(i=this,s=e(window),this.setMenuSize(),this.options.liveSearch&&this.$searchbox.off("input.setMenuSize propertychange.setMenuSize").on("input.setMenuSize propertychange.setMenuSize",function(){return i.setMenuSize()}),"auto"===this.options.size?s.off("resize"+H+"."+this.selectId+".setMenuSize scroll"+H+"."+this.selectId+".setMenuSize").on("resize"+H+"."+this.selectId+".setMenuSize scroll"+H+"."+this.selectId+".setMenuSize",function(){return i.setMenuSize()}):this.options.size&&"auto"!=this.options.size&&this.selectpicker.current.elements.length>this.options.size&&s.off("resize"+H+"."+this.selectId+".setMenuSize scroll"+H+"."+this.selectId+".setMenuSize")),this.createView(!1,!0,t)},setWidth:function(){var e=this;"auto"===this.options.width?requestAnimationFrame(function(){e.$menu.css("min-width","0"),e.$element.on("loaded"+H,function(){e.liHeight(),e.setMenuSize();var t=e.$newElement.clone().appendTo("body"),i=t.css("width","auto").children("button").outerWidth();t.remove(),e.sizeInfo.selectWidth=Math.max(e.sizeInfo.totalMenuWidth,i),e.$newElement.css("width",e.sizeInfo.selectWidth+"px")})}):"fit"===this.options.width?(this.$menu.css("min-width",""),this.$newElement.css("width","").addClass("fit-width")):this.options.width?(this.$menu.css("min-width",""),this.$newElement.css("width",this.options.width)):(this.$menu.css("min-width",""),this.$newElement.css("width","")),this.$newElement.hasClass("fit-width")&&"fit"!==this.options.width&&this.$newElement[0].classList.remove("fit-width")},selectPosition:function(){function t(t){var a={},r=n.options.display||!!e.fn.dropdown.Constructor.Default&&e.fn.dropdown.Constructor.Default.display;n.$bsContainer.addClass(t.attr("class").replace(/form-control|fit-width/gi,"")).toggleClass(U.DROPUP,t.hasClass(U.DROPUP)),i=t.offset(),o.is("body")?s={top:0,left:0}:((s=o.offset()).top+=parseInt(o.css("borderTopWidth"))-o.scrollTop(),s.left+=parseInt(o.css("borderLeftWidth"))-o.scrollLeft()),l=t.hasClass(U.DROPUP)?0:t[0].offsetHeight,(V.major<4||"static"===r)&&(a.top=i.top-s.top+l,a.left=i.left-s.left),a.width=t[0].offsetWidth,n.$bsContainer.css(a)}this.$bsContainer=e('<div class="bs-container" />');var i,s,l,n=this,o=e(this.options.container);this.$button.on("click.bs.dropdown.data-api",function(){n.isDisabled()||(t(n.$newElement),n.$bsContainer.appendTo(n.options.container).toggleClass(U.SHOW,!n.$button.hasClass(U.SHOW)).append(n.$menu))}),e(window).off("resize"+H+"."+this.selectId+" scroll"+H+"."+this.selectId).on("resize"+H+"."+this.selectId+" scroll"+H+"."+this.selectId,function(){n.$newElement.hasClass(U.SHOW)&&t(n.$newElement)}),this.$element.on("hide"+H,function(){n.$menu.data("height",n.$menu.height()),n.$bsContainer.detach()})},createOption:function(e,t){var i,s=e.option||e;s&&1!==s.nodeType&&(i=(t?$.selectedOption:$.option).cloneNode(!0),void 0!==s.value&&(i.value=s.value),i.textContent=s.text,i.selected=!0,void 0!==s.liIndex?i.liIndex=s.liIndex:t||(i.liIndex=e.index),e.option=i,this.selectpicker.main.optionQueue.appendChild(i))},setOptionStatus:function(e){var t=this;if(t.noScroll=!1,t.selectpicker.view.visibleElements&&t.selectpicker.view.visibleElements.length){for(var i=0;i<t.selectpicker.view.visibleElements.length;i++){var s=t.selectpicker.current.data[i+t.selectpicker.view.position0];s.option&&(!0!==e&&t.setDisabled(s),t.setSelected(s))}this.options.source.data&&this.$element[0].appendChild(this.selectpicker.main.optionQueue)}},setSelected:function(e,t){t=void 0===t?e.selected:t;var i,s=e.element,l=void 0!==this.activeElement,n=this.activeElement===s||t&&!this.multiple&&!l;s&&(void 0!==t&&(e.selected=t,e.option&&(e.option.selected=t)),t&&this.options.source.data&&this.createOption(e,!1),i=s.firstChild,t&&(this.selectedElement=s),s.classList.toggle("selected",t),n?(this.focusItem(s,e),this.selectpicker.view.currentActive=s,this.activeElement=s):this.defocusItem(s),i&&(i.classList.toggle("selected",t),t?i.setAttribute("aria-selected",!0):this.multiple?i.setAttribute("aria-selected",!1):i.removeAttribute("aria-selected")),n||l||!t||void 0===this.prevActiveElement||(e=this.prevActiveElement,this.defocusItem(e)))},setDisabled:function(e){var t,i=e.disabled;(e=e.element)&&(t=e.firstChild,e.classList.toggle(U.DISABLED,i),t&&("4"<=V.major&&t.classList.toggle(U.DISABLED,i),i?(t.setAttribute("aria-disabled",i),t.setAttribute("tabindex",-1)):(t.removeAttribute("aria-disabled"),t.setAttribute("tabindex",0))))},isDisabled:function(){return this.$element[0].disabled},checkDisabled:function(){this.isDisabled()?(this.$newElement[0].classList.add(U.DISABLED),this.$button.addClass(U.DISABLED).attr("aria-disabled",!0)):this.$button[0].classList.contains(U.DISABLED)&&(this.$newElement[0].classList.remove(U.DISABLED),this.$button.removeClass(U.DISABLED).attr("aria-disabled",!1))},clickListener:function(){var t=this,i=e(document);function s(){(t.options.liveSearch?t.$searchbox:t.$menuInner).trigger("focus")}function l(){t.dropdown&&t.dropdown._popper&&t.dropdown._popper.state?s():requestAnimationFrame(l)}i.data("spaceSelect",!1),this.$button.on("keyup",function(e){/(32)/.test(e.keyCode.toString(10))&&i.data("spaceSelect")&&(e.preventDefault(),i.data("spaceSelect",!1))}),this.$newElement.on("show.bs.dropdown",function(){t.dropdown||"4"!==V.major||(t.dropdown=t.$button.data("bs.dropdown"),t.dropdown._menu=t.$menu[0])}),this.$button.on("click.bs.dropdown.data-api",function(e){var i,s,l;t.options.allowClear&&(i=e.target,s=t.$clearButton[0],(i=/MSIE|Trident/.test(window.navigator.userAgent)?document.elementFromPoint(e.clientX,e.clientY):i)!==s&&i.parentElement!==s||(e.stopImmediatePropagation(),t.multiple?t.deselectAll():(s=(i=t.$element[0]).value,e=i.selectedIndex,(l=!!(l=i.options[e])&&t.selectpicker.main.data[l.liIndex])&&t.setSelected(l,!1),i.selectedIndex=0,y=[e,!1,s],t.$element.triggerNative("change")),t.$newElement.hasClass(U.SHOW)&&(t.options.liveSearch&&t.$searchbox.trigger("focus"),t.createView(!1)))),t.$newElement.hasClass(U.SHOW)||t.setSize()}),this.$element.on("shown"+H,function(){t.$menuInner[0].scrollTop!==t.selectpicker.view.scrollTop&&(t.$menuInner[0].scrollTop=t.selectpicker.view.scrollTop),3<V.major?requestAnimationFrame(l):s()}),this.$menuInner.on("mouseenter","li a",function(e){var i=this.parentElement,s=t.isVirtual()?t.selectpicker.view.position0:0,l=Array.prototype.indexOf.call(i.parentElement.children,i);l=t.selectpicker.current.data[l+s];t.focusItem(i,l,!0)}),this.$menuInner.on("click","li a",function(i,s){var l=e(this),n=t.$element[0],o=t.isVirtual()?t.selectpicker.view.position0:0,a=t.selectpicker.current.data[l.parent().index()+o],r=(o=a.element,C.call(t)),d=n.selectedIndex,h=!!(h=n.options[d])&&t.selectpicker.main.data[h.liIndex],c=!0;if(t.multiple&&1!==t.options.maxOptions&&i.stopPropagation(),i.preventDefault(),!t.isDisabled()&&!l.parent().hasClass(U.DISABLED)){i=a.option,l=e(i);var u=i.selected,m=t.selectpicker.current.data.find(function(e){return e.optID===a.optID&&"optgroup-label"===e.type}),p=m?m.optgroup:void 0,g=(m=p instanceof Element?K.fromOption:K.fromDataSource,p&&p.children),f=parseInt(t.options.maxOptions);m=p&&parseInt(m(p,"maxOptions"))||!1;if((s=o===t.activeElement||s)||(t.prevActiveElement=t.activeElement,t.activeElement=void 0),t.multiple&&1!==f){if(t.setSelected(a,!u),t.focusedParent.focus(),!1!==f||!1!==m){o=f<b.call(t).length;var _=0;if(p&&p.children)for(var v=0;v<p.children.length;v++)p.children[v].selected&&_++;if(s=m<_,f&&o||m&&s)if(f&&1===f)n.selectedIndex=-1,t.setOptionStatus(!0);else if(m&&1===m){for(v=0;v<g.length;v++){var w=g[v];t.setSelected(t.selectpicker.current.data[w.liIndex],!1)}t.setSelected(a,!0)}else{var S=(u="function"==typeof(u="string"==typeof t.options.maxOptionsText?[t.options.maxOptionsText,t.options.maxOptionsText]:t.options.maxOptionsText)?u(f,m):u)[0].replace("{n}",f),x=u[1].replace("{n}",m),T=e('<div class="notify"></div>');u[2]&&(S=S.replace("{var}",u[2][1<f?0:1]),x=x.replace("{var}",u[2][1<m?0:1])),t.$menu.append(T),f&&o&&(T.append(e("<div>"+S+"</div>")),c=!1,t.$element.trigger("maxReached"+H)),m&&s&&(T.append(e("<div>"+x+"</div>")),c=!1,t.$element.trigger("maxReachedGrp"+H)),setTimeout(function(){t.setSelected(a,!1)},10),T[0].classList.add("fadeOut"),setTimeout(function(){T.remove()},1050)}}}else h&&t.setSelected(h,!1),t.setSelected(a,!0);t.options.source.data&&t.$element[0].appendChild(t.selectpicker.main.optionQueue),!t.multiple||t.multiple&&1===t.options.maxOptions?t.$button.trigger("focus"):t.options.liveSearch&&t.$searchbox.trigger("focus"),!c||!t.multiple&&d===n.selectedIndex||(y=[i.index,l.prop("selected"),r],t.$element.triggerNative("change"))}}),this.$menu.on("click","li."+U.DISABLED+" a, ."+U.POPOVERHEADER+", ."+U.POPOVERHEADER+" :not(.close)",function(i){i.currentTarget==this&&(i.preventDefault(),i.stopPropagation(),(t.options.liveSearch&&!e(i.target).hasClass("close")?t.$searchbox:t.$button).trigger("focus"))}),this.$menuInner.on("click",".divider, .dropdown-header",function(e){e.preventDefault(),e.stopPropagation(),(t.options.liveSearch?t.$searchbox:t.$button).trigger("focus")}),this.$menu.on("click","."+U.POPOVERHEADER+" .close",function(){t.$button.trigger("click")}),this.$searchbox.on("click",function(e){e.stopPropagation()}),this.$menu.on("click",".actions-btn",function(i){(t.options.liveSearch?t.$searchbox:t.$button).trigger("focus"),i.preventDefault(),i.stopPropagation(),e(this).hasClass("bs-select-all")?t.selectAll():t.deselectAll()}),this.$button.on("focus"+H,function(e){var i=t.$element[0].getAttribute("tabindex");void 0!==i&&e.originalEvent&&e.originalEvent.isTrusted&&(this.setAttribute("tabindex",i),t.$element[0].setAttribute("tabindex",-1),t.selectpicker.view.tabindex=i)}).on("blur"+H,function(e){void 0!==t.selectpicker.view.tabindex&&e.originalEvent&&e.originalEvent.isTrusted&&(t.$element[0].setAttribute("tabindex",t.selectpicker.view.tabindex),this.setAttribute("tabindex",-1),t.selectpicker.view.tabindex=void 0)}),this.$element.on("change"+H,function(){t.render(),t.$element.trigger("changed"+H,y),y=null}).on("focus"+H,function(){t.options.mobile||t.$button[0].focus()})},liveSearchListener:function(){var e=this;this.$button.on("click.bs.dropdown.data-api",function(){e.$searchbox.val()&&(e.$searchbox.val(""),e.selectpicker.search.previousValue=void 0)}),this.$searchbox.on("click.bs.dropdown.data-api focus.bs.dropdown.data-api touchend.bs.dropdown.data-api",function(e){e.stopPropagation()}),this.$searchbox.on("input propertychange",function(){var t=e.$searchbox[0].value;if(e.selectpicker.search.elements=[],e.selectpicker.search.data=[],t)if(e.selectpicker.search.previousValue=t,e.options.source.search)e.fetchData(function(i){e.render(),e.buildList(void 0,!0),e.noScroll=!0,e.$menuInner.scrollTop(0),e.createView(!0),Q.call(e,i,t)},"search",0,t);else{var i=[],s=t.toUpperCase(),l={},n=[],o=e._searchStyle(),a=e.options.liveSearchNormalize;a&&(s=R(s));for(var r=0;r<e.selectpicker.main.data.length;r++){var d=e.selectpicker.main.data[r];l[r]||(l[r]=x(d,s,o,a)),l[r]&&void 0!==d.headerIndex&&-1===n.indexOf(d.headerIndex)&&(0<d.headerIndex&&(l[d.headerIndex-1]=!0,n.push(d.headerIndex-1)),l[d.headerIndex]=!0,n.push(d.headerIndex),l[d.lastIndex+1]=!0),l[r]&&"optgroup-label"!==d.type&&n.push(r)}r=0;for(var h=n.length;r<h;r++){var c=n[r],u=n[r-1];d=e.selectpicker.main.data[c],u=e.selectpicker.main.data[u];("divider"!==d.type||"divider"===d.type&&u&&"divider"!==u.type&&h-1!==r)&&(e.selectpicker.search.data.push(d),i.push(e.selectpicker.main.elements[c]))}e.activeElement=void 0,e.noScroll=!0,e.$menuInner.scrollTop(0),e.selectpicker.search.elements=i,e.createView(!0),Q.call(e,i,t)}else e.selectpicker.search.previousValue&&(e.$menuInner.scrollTop(0),e.createView(!1))})},_searchStyle:function(){return this.options.liveSearchStyle||"contains"},val:function(e){var t=this.$element[0];if(void 0===e)return this.$element.val();var i=b.call(this),s=C.call(this,i);y=[null,null,s],(e=Array.isArray(e)?e:[e]).map(String);for(var l=0;l<i.length;l++){var n=i[l];n&&-1===e.indexOf(String(n.value))&&this.setSelected(n,!1)}return this.selectpicker.main.data.filter(function(t){return-1!==e.indexOf(String(t.value))&&(this.setSelected(t,!0),!0)},this),this.options.source.data&&t.appendChild(this.selectpicker.main.optionQueue),this.$element.trigger("changed"+H,y),this.$newElement.hasClass(U.SHOW)&&(this.multiple?this.setOptionStatus(!0):"number"==typeof(s=(t.options[t.selectedIndex]||{}).liIndex)&&this.setSelected(this.selectpicker.current.data[s],!0)),this.render(),y=null,this.$element},changeAll:function(e){if(this.multiple){void 0===e&&(e=!0);var t=this.$element[0],i=0,s=0,l=C.call(this);t.classList.add("bs-select-hidden");for(var n=0,o=this.selectpicker.current.data,a=o.length;n<a;n++){var r=o[n],d=r.option;d&&!r.disabled&&"divider"!==r.type&&(r.selected&&i++,d.selected=e,!0===(r.selected=e)&&s++)}t.classList.remove("bs-select-hidden"),i!==s&&(this.setOptionStatus(),y=[null,null,l],this.$element.triggerNative("change"))}},selectAll:function(){return this.changeAll(!0)},deselectAll:function(){return this.changeAll(!1)},toggle:function(e,t){var i=void 0===t;(e=e||window.event)&&e.stopPropagation(),!1===i&&(e=this.$newElement[0].classList.contains(U.SHOW),i=!0===t&&!1===e||!1===t&&!0===e),i&&this.$button.trigger("click.bs.dropdown.data-api")},open:function(e){this.toggle(e,!0)},close:function(e){this.toggle(e,!1)},keydown:function(t){var i,s,l,n,o=e(this),a=((h=o.hasClass("dropdown-toggle"))?o.closest(".dropdown"):o.closest(B.MENU)).data("this"),r=a.findLis(),d=!1,h=9===t.which&&!h&&!a.options.selectOnTab,c=W.test(t.which)||h,u=a.$menuInner[0].scrollTop,m=!0===a.isVirtual()?a.selectpicker.view.position0:0;if(!(112<=t.which&&t.which<=123))if(!(i=a.$menu.hasClass(U.SHOW))&&(c||48<=t.which&&t.which<=57||96<=t.which&&t.which<=105||65<=t.which&&t.which<=90)&&(a.$button.trigger("click.bs.dropdown.data-api"),a.options.liveSearch))a.$searchbox.trigger("focus");else{if(27===t.which&&i&&(t.preventDefault(),a.$button.trigger("click.bs.dropdown.data-api").trigger("focus")),c){if(!r.length)return;-1!==(c=(s=a.activeElement)?Array.prototype.indexOf.call(s.parentElement.children,s):-1)&&a.defocusItem(s),38===t.which?(-1!==c&&c--,c+m<0&&(c+=r.length),a.selectpicker.view.canHighlight[c+m]||-1===(c=a.selectpicker.view.canHighlight.slice(0,c+m).lastIndexOf(!0)-m)&&(c=r.length-1)):40!==t.which&&!h||(++c+m>=a.selectpicker.view.canHighlight.length&&(c=a.selectpicker.view.firstHighlightIndex),a.selectpicker.view.canHighlight[c+m]||(c=c+1+a.selectpicker.view.canHighlight.slice(c+m+1).indexOf(!0))),t.preventDefault();var p=m+c;38===t.which?0===m&&c===r.length-1?(a.$menuInner[0].scrollTop=a.$menuInner[0].scrollHeight,p=a.selectpicker.current.elements.length-1):(l=a.selectpicker.current.data[p])&&(d=(n=l.position-l.height)<u):40!==t.which&&!h||(c===a.selectpicker.view.firstHighlightIndex?(a.$menuInner[0].scrollTop=0,p=a.selectpicker.view.firstHighlightIndex):(l=a.selectpicker.current.data[p])&&(d=u<(n=l.position-a.sizeInfo.menuInnerHeight))),s=a.selectpicker.current.elements[p],a.activeElement=(a.selectpicker.current.data[p]||{}).element,a.focusItem(s),a.selectpicker.view.currentActive=s,d&&(a.$menuInner[0].scrollTop=n),(a.options.liveSearch?a.$searchbox:o).trigger("focus")}else if(!o.is("input")&&!q.test(t.which)||32===t.which&&a.selectpicker.keydown.keyHistory){var g,f=[];t.preventDefault(),a.selectpicker.keydown.keyHistory+=L[t.which],a.selectpicker.keydown.resetKeyHistory.cancel&&clearTimeout(a.selectpicker.keydown.resetKeyHistory.cancel),a.selectpicker.keydown.resetKeyHistory.cancel=a.selectpicker.keydown.resetKeyHistory.start(),g=a.selectpicker.keydown.keyHistory,/^(.)\1+$/.test(g)&&(g=g.charAt(0));for(var _=0;_<a.selectpicker.current.data.length;_++){var v=a.selectpicker.current.data[_];x(v,g,"startsWith",!0)&&a.selectpicker.view.canHighlight[_]&&f.push(v.element)}f.length&&(m=0,r.removeClass("active").find("a").removeClass("active"),1===g.length&&(-1===(m=f.indexOf(a.activeElement))||m===f.length-1?m=0:m++),h=f[m],d=0<u-(l=a.selectpicker.main.data[h]).position?(n=l.position-l.height,!0):(n=l.position-a.sizeInfo.menuInnerHeight,l.position>u+a.sizeInfo.menuInnerHeight),s=a.selectpicker.main.elements[h],a.activeElement=s,a.focusItem(s),s&&s.firstChild.focus(),d&&(a.$menuInner[0].scrollTop=n),o.trigger("focus"))}i&&(32===t.which&&!a.selectpicker.keydown.keyHistory||13===t.which||9===t.which&&a.options.selectOnTab)&&(32!==t.which&&t.preventDefault(),a.options.liveSearch&&32===t.which||(a.$menuInner.find(".active a").trigger("click",!0),o.trigger("focus"),a.options.liveSearch||(t.preventDefault(),e(document).data("spaceSelect",!0))))}},mobile:function(){this.options.mobile=!0,this.$element[0].classList.add("mobile-device")},refresh:function(){var t=this,i=e.extend({},this.options,c(this.$element),this.$element.data());this.options=i,this.options.source.data?(this.render(),this.buildList()):this.fetchData(function(){t.render(),t.buildList()}),this.checkDisabled(),this.setStyle(),this.setWidth(),this.setSize(!0),this.$element.trigger("refreshed"+H)},hide:function(){this.$newElement.hide()},show:function(){this.$newElement.show()},remove:function(){this.$newElement.remove(),this.$element.remove()},destroy:function(){this.$newElement.before(this.$element).remove(),(this.$bsContainer||this.$menu).remove(),this.selectpicker.view.titleOption&&this.selectpicker.view.titleOption.parentNode&&this.selectpicker.view.titleOption.parentNode.removeChild(this.selectpicker.view.titleOption),this.$element.off(H).removeData("selectpicker").removeClass("bs-select-hidden selectpicker mobile-device"),e(window).off(H+"."+this.selectId)}};var Z=e.fn.selectpicker;function ee(){return V.major<5?e.fn.dropdown?(e.fn.dropdown.Constructor._dataApiKeydownHandler||e.fn.dropdown.Constructor.prototype.keydown).apply(this,arguments):void 0:F.dataApiKeydownHandler}e.fn.selectpicker=X,e.fn.selectpicker.Constructor=J,e.fn.selectpicker.noConflict=function(){return e.fn.selectpicker=Z,this},e(document).off("keydown.bs.dropdown.data-api").on("keydown.bs.dropdown.data-api",":not(.bootstrap-select) > ["+B.DATA_TOGGLE+"]",ee).on("keydown.bs.dropdown.data-api",":not(.bootstrap-select) > .dropdown-menu",ee).on("keydown"+H,".bootstrap-select ["+B.DATA_TOGGLE+'], .bootstrap-select [role="listbox"], .bootstrap-select .bs-searchbox input',J.prototype.keydown).on("focusin.modal",".bootstrap-select ["+B.DATA_TOGGLE+'], .bootstrap-select [role="listbox"], .bootstrap-select .bs-searchbox input',function(e){e.stopPropagation()}),document.addEventListener("DOMContentLoaded",function(){e(".selectpicker").each(function(){var t=e(this);X.call(t,t.data())})})}(e)}),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}(function(e){e.extend(e.fn,{validate:function(t){if(this.length){var i=e.data(this[0],"validator");return i||(this.attr("novalidate","novalidate"),i=new e.validator(t,this[0]),e.data(this[0],"validator",i),i.settings.onsubmit&&(this.on("click.validate",":submit",function(t){i.settings.submitHandler&&(i.submitButton=t.target),e(this).hasClass("cancel")&&(i.cancelSubmit=!0),void 0!==e(this).attr("formnovalidate")&&(i.cancelSubmit=!0)}),this.on("submit.validate",function(t){function s(){var s,l;return!i.settings.submitHandler||(i.submitButton&&(s=e("<input type='hidden'/>").attr("name",i.submitButton.name).val(e(i.submitButton).val()).appendTo(i.currentForm)),l=i.settings.submitHandler.call(i,i.currentForm,t),i.submitButton&&s.remove(),void 0!==l&&l)}return i.settings.debug&&t.preventDefault(),i.cancelSubmit?(i.cancelSubmit=!1,s()):i.form()?i.pendingRequest?(i.formSubmitted=!0,!1):s():(i.focusInvalid(),!1)})),i)}t&&t.debug&&window.console&&console.warn("Nothing selected, can't validate, returning nothing.")},valid:function(){var t,i,s;return e(this[0]).is("form")?t=this.validate().form():(s=[],t=!0,i=e(this[0].form).validate(),this.each(function(){t=i.element(this)&&t,s=s.concat(i.errorList)}),i.errorList=s),t},rules:function(t,i){var s,l,n,o,a,r,d=this[0];if(t)switch(s=e.data(d.form,"validator").settings,l=s.rules,n=e.validator.staticRules(d),t){case"add":e.extend(n,e.validator.normalizeRule(i)),delete n.messages,l[d.name]=n,i.messages&&(s.messages[d.name]=e.extend(s.messages[d.name],i.messages));break;case"remove":return i?(r={},e.each(i.split(/\s/),function(t,i){r[i]=n[i],delete n[i],"required"===i&&e(d).removeAttr("aria-required")}),r):(delete l[d.name],n)}return(o=e.validator.normalizeRules(e.extend({},e.validator.classRules(d),e.validator.attributeRules(d),e.validator.dataRules(d),e.validator.staticRules(d)),d)).required&&(a=o.required,delete o.required,o=e.extend({required:a},o),e(d).attr("aria-required","true")),o.remote&&(a=o.remote,delete o.remote,o=e.extend(o,{remote:a})),o}}),e.extend(e.expr[":"],{blank:function(t){return!e.trim(""+e(t).val())},filled:function(t){return!!e.trim(""+e(t).val())},unchecked:function(t){return!e(t).prop("checked")}}),e.validator=function(t,i){this.settings=e.extend(!0,{},e.validator.defaults,t),this.currentForm=i,this.init()},e.validator.format=function(t,i){return 1===arguments.length?function(){var i=e.makeArray(arguments);return i.unshift(t),e.validator.format.apply(this,i)}:(arguments.length>2&&i.constructor!==Array&&(i=e.makeArray(arguments).slice(1)),i.constructor!==Array&&(i=[i]),e.each(i,function(e,i){t=t.replace(new RegExp("\\{"+e+"\\}","g"),function(){return i})}),t)},e.extend(e.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusCleanup:!1,focusInvalid:!0,errorContainer:e([]),errorLabelContainer:e([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(e){this.lastActive=e,this.settings.focusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,e,this.settings.errorClass,this.settings.validClass),this.hideThese(this.errorsFor(e)))},onfocusout:function(e){this.checkable(e)||!(e.name in this.submitted)&&this.optional(e)||this.element(e)},onkeyup:function(t,i){9===i.which&&""===this.elementValue(t)||-1!==e.inArray(i.keyCode,[16,17,18,20,35,36,37,38,39,40,45,144,225])||(t.name in this.submitted||t===this.lastElement)&&this.element(t)},onclick:function(e){e.name in this.submitted?this.element(e):e.parentNode.name in this.submitted&&this.element(e.parentNode)},highlight:function(t,i,s){"radio"===t.type?this.findByName(t.name).addClass(i).removeClass(s):e(t).addClass(i).removeClass(s)},unhighlight:function(t,i,s){"radio"===t.type?this.findByName(t.name).removeClass(i).addClass(s):e(t).removeClass(i).addClass(s)}},setDefaults:function(t){e.extend(e.validator.defaults,t)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date ( ISO ).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",maxlength:e.validator.format("Please enter no more than {0} characters."),minlength:e.validator.format("Please enter at least {0} characters."),rangelength:e.validator.format("Please enter a value between {0} and {1} characters long."),range:e.validator.format("Please enter a value between {0} and {1}."),max:e.validator.format("Please enter a value less than or equal to {0}."),min:e.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:!1,prototype:{init:function(){function t(t){var i=e.data(this.form,"validator"),s="on"+t.type.replace(/^validate/,""),l=i.settings;l[s]&&!e(this).is(l.ignore)&&l[s].call(i,this,t)}this.labelContainer=e(this.settings.errorLabelContainer),this.errorContext=this.labelContainer.length&&this.labelContainer||e(this.currentForm),this.containers=e(this.settings.errorContainer).add(this.settings.errorLabelContainer),this.submitted={},this.valueCache={},this.pendingRequest=0,this.pending={},this.invalid={},this.reset();var i,s=this.groups={};e.each(this.settings.groups,function(t,i){"string"==typeof i&&(i=i.split(/\s/)),e.each(i,function(e,i){s[i]=t})}),i=this.settings.rules,e.each(i,function(t,s){i[t]=e.validator.normalizeRule(s)}),e(this.currentForm).on("focusin.validate focusout.validate keyup.validate",":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'], [type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'], [type='radio'], [type='checkbox']",t).on("click.validate","select, option, [type='radio'], [type='checkbox']",t),this.settings.invalidHandler&&e(this.currentForm).on("invalid-form.validate",this.settings.invalidHandler),e(this.currentForm).find("[required], [data-rule-required], .required").attr("aria-required","true")},form:function(){return this.checkForm(),e.extend(this.submitted,this.errorMap),this.invalid=e.extend({},this.errorMap),this.valid()||e(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var e=0,t=this.currentElements=this.elements();t[e];e++)this.check(t[e]);return this.valid()},element:function(t){var i=this.clean(t),s=this.validationTargetFor(i),l=!0;return this.lastElement=s,void 0===s?delete this.invalid[i.name]:(this.prepareElement(s),this.currentElements=e(s),(l=!1!==this.check(s))?delete this.invalid[s.name]:this.invalid[s.name]=!0),e(t).attr("aria-invalid",!l),this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),l},showErrors:function(t){if(t){for(var i in e.extend(this.errorMap,t),this.errorList=[],t)this.errorList.push({message:t[i],element:this.findByName(i)[0]});this.successList=e.grep(this.successList,function(e){return!(e.name in t)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){e.fn.resetForm&&e(this.currentForm).resetForm(),this.submitted={},this.lastElement=null,this.prepareForm(),this.hideErrors();var t,i=this.elements().removeData("previousValue").removeAttr("aria-invalid");if(this.settings.unhighlight)for(t=0;i[t];t++)this.settings.unhighlight.call(this,i[t],this.settings.errorClass,"");else i.removeClass(this.settings.errorClass)},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(e){var t,i=0;for(t in e)i++;return i},hideErrors:function(){this.hideThese(this.toHide)},hideThese:function(e){e.not(this.containers).text(""),this.addWrapper(e).hide()},valid:function(){return 0===this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{e(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(e){}},findLastActive:function(){var t=this.lastActive;return t&&1===e.grep(this.errorList,function(e){return e.element.name===t.name}).length&&t},elements:function(){var t=this,i={};return e(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, :disabled").not(this.settings.ignore).filter(function(){return!this.name&&t.settings.debug&&window.console&&console.error("%o has no name assigned",this),!(this.name in i||!t.objectLength(e(this).rules()))&&(i[this.name]=!0,!0)})},clean:function(t){return e(t)[0]},errors:function(){var t=this.settings.errorClass.split(" ").join(".");return e(this.settings.errorElement+"."+t,this.errorContext)},reset:function(){this.successList=[],this.errorList=[],this.errorMap={},this.toShow=e([]),this.toHide=e([]),this.currentElements=e([])},prepareForm:function(){this.reset(),this.toHide=this.errors().add(this.containers)},prepareElement:function(e){this.reset(),this.toHide=this.errorsFor(e)},elementValue:function(t){var i,s=e(t),l=t.type;return"radio"===l||"checkbox"===l?this.findByName(t.name).filter(":checked").val():"number"===l&&void 0!==t.validity?!t.validity.badInput&&s.val():"string"==typeof(i=s.val())?i.replace(/\r/g,""):i},check:function(t){t=this.validationTargetFor(this.clean(t));var i,s,l,n=e(t).rules(),o=e.map(n,function(e,t){return t}).length,a=!1,r=this.elementValue(t);for(s in n){l={method:s,parameters:n[s]};try{if("dependency-mismatch"===(i=e.validator.methods[s].call(this,r,t,l.parameters))&&1===o){a=!0;continue}if(a=!1,"pending"===i)return void(this.toHide=this.toHide.not(this.errorsFor(t)));if(!i)return this.formatAndAdd(t,l),!1}catch(e){throw this.settings.debug&&window.console&&console.log("Exception occurred when checking element "+t.id+", check the '"+l.method+"' method.",e),e instanceof TypeError&&(e.message+=".  Exception occurred when checking element "+t.id+", check the '"+l.method+"' method."),e}}if(!a)return this.objectLength(n)&&this.successList.push(t),!0},customDataMessage:function(t,i){return e(t).data("msg"+i.charAt(0).toUpperCase()+i.substring(1).toLowerCase())||e(t).data("msg")},customMessage:function(e,t){var i=this.settings.messages[e];return i&&(i.constructor===String?i:i[t])},findDefined:function(){for(var e=0;e<arguments.length;e++)if(void 0!==arguments[e])return arguments[e]},defaultMessage:function(t,i){return this.findDefined(this.customMessage(t.name,i),this.customDataMessage(t,i),!this.settings.ignoreTitle&&t.title||void 0,e.validator.messages[i],"<strong>Warning: No message defined for "+t.name+"</strong>")},formatAndAdd:function(t,i){var s=this.defaultMessage(t,i.method),l=/\$?\{(\d+)\}/g;"function"==typeof s?s=s.call(this,i.parameters,t):l.test(s)&&(s=e.validator.format(s.replace(l,"{$1}"),i.parameters)),this.errorList.push({message:s,element:t,method:i.method}),this.errorMap[t.name]=s,this.submitted[t.name]=s},addWrapper:function(e){return this.settings.wrapper&&(e=e.add(e.parent(this.settings.wrapper))),e},defaultShowErrors:function(){var e,t,i;for(e=0;this.errorList[e];e++)i=this.errorList[e],this.settings.highlight&&this.settings.highlight.call(this,i.element,this.settings.errorClass,this.settings.validClass),this.showLabel(i.element,i.message);if(this.errorList.length&&(this.toShow=this.toShow.add(this.containers)),this.settings.success)for(e=0;this.successList[e];e++)this.showLabel(this.successList[e]);if(this.settings.unhighlight)for(e=0,t=this.validElements();t[e];e++)this.settings.unhighlight.call(this,t[e],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow),this.hideErrors(),this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return e(this.errorList).map(function(){return this.element})},showLabel:function(t,i){var s,l,n,o=this.errorsFor(t),a=this.idOrName(t),r=e(t).attr("aria-describedby");o.length?(o.removeClass(this.settings.validClass).addClass(this.settings.errorClass),o.html(i)):(s=o=e("<"+this.settings.errorElement+">").attr("id",a+"-error").addClass(this.settings.errorClass).html(i||""),this.settings.wrapper&&(s=o.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.length?this.labelContainer.append(s):this.settings.errorPlacement?this.settings.errorPlacement(s,e(t)):s.insertAfter(t),o.is("label")?o.attr("for",a):0===o.parents("label[for='"+a+"']").length&&(n=o.attr("id").replace(/(:|\.|\[|\]|\$)/g,"\\$1"),r?r.match(new RegExp("\\b"+n+"\\b"))||(r+=" "+n):r=n,e(t).attr("aria-describedby",r),(l=this.groups[t.name])&&e.each(this.groups,function(t,i){i===l&&e("[name='"+t+"']",this.currentForm).attr("aria-describedby",o.attr("id"))}))),!i&&this.settings.success&&(o.text(""),"string"==typeof this.settings.success?o.addClass(this.settings.success):this.settings.success(o,t)),this.toShow=this.toShow.add(o)},errorsFor:function(t){var i=this.idOrName(t),s=e(t).attr("aria-describedby"),l="label[for='"+i+"'], label[for='"+i+"'] *";return s&&(l=l+", #"+s.replace(/\s+/g,", #")),this.errors().filter(l)},idOrName:function(e){return this.groups[e.name]||(this.checkable(e)?e.name:e.id||e.name)},validationTargetFor:function(t){return this.checkable(t)&&(t=this.findByName(t.name)),e(t).not(this.settings.ignore)[0]},checkable:function(e){return/radio|checkbox/i.test(e.type)},findByName:function(t){return e(this.currentForm).find("[name='"+t+"']")},getLength:function(t,i){switch(i.nodeName.toLowerCase()){case"select":return e("option:selected",i).length;case"input":if(this.checkable(i))return this.findByName(i.name).filter(":checked").length}return t.length},depend:function(e,t){return!this.dependTypes[typeof e]||this.dependTypes[typeof e](e,t)},dependTypes:{boolean:function(e){return e},string:function(t,i){return!!e(t,i.form).length},function:function(e,t){return e(t)}},optional:function(t){var i=this.elementValue(t);return!e.validator.methods.required.call(this,i,t)&&"dependency-mismatch"},startRequest:function(e){this.pending[e.name]||(this.pendingRequest++,this.pending[e.name]=!0)},stopRequest:function(t,i){this.pendingRequest--,this.pendingRequest<0&&(this.pendingRequest=0),delete this.pending[t.name],i&&0===this.pendingRequest&&this.formSubmitted&&this.form()?(e(this.currentForm).submit(),this.formSubmitted=!1):!i&&0===this.pendingRequest&&this.formSubmitted&&(e(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(t){return e.data(t,"previousValue")||e.data(t,"previousValue",{old:null,valid:!0,message:this.defaultMessage(t,"remote")})},destroy:function(){this.resetForm(),e(this.currentForm).off(".validate").removeData("validator")}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},number:{number:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(t,i){t.constructor===String?this.classRuleSettings[t]=i:e.extend(this.classRuleSettings,t)},classRules:function(t){var i={},s=e(t).attr("class");return s&&e.each(s.split(" "),function(){this in e.validator.classRuleSettings&&e.extend(i,e.validator.classRuleSettings[this])}),i},normalizeAttributeRule:function(e,t,i,s){/min|max/.test(i)&&(null===t||/number|range|text/.test(t))&&(s=Number(s),isNaN(s)&&(s=void 0)),s||0===s?e[i]=s:t===i&&"range"!==t&&(e[i]=!0)},attributeRules:function(t){var i,s,l={},n=e(t),o=t.getAttribute("type");for(i in e.validator.methods)"required"===i?(""===(s=t.getAttribute(i))&&(s=!0),s=!!s):s=n.attr(i),this.normalizeAttributeRule(l,o,i,s);return l.maxlength&&/-1|2147483647|524288/.test(l.maxlength)&&delete l.maxlength,l},dataRules:function(t){var i,s,l={},n=e(t),o=t.getAttribute("type");for(i in e.validator.methods)s=n.data("rule"+i.charAt(0).toUpperCase()+i.substring(1).toLowerCase()),this.normalizeAttributeRule(l,o,i,s);return l},staticRules:function(t){var i={},s=e.data(t.form,"validator");return s.settings.rules&&(i=e.validator.normalizeRule(s.settings.rules[t.name])||{}),i},normalizeRules:function(t,i){return e.each(t,function(s,l){if(!1!==l){if(l.param||l.depends){var n=!0;switch(typeof l.depends){case"string":n=!!e(l.depends,i.form).length;break;case"function":n=l.depends.call(i,i)}n?t[s]=void 0===l.param||l.param:delete t[s]}}else delete t[s]}),e.each(t,function(s,l){t[s]=e.isFunction(l)?l(i):l}),e.each(["minlength","maxlength"],function(){t[this]&&(t[this]=Number(t[this]))}),e.each(["rangelength","range"],function(){var i;t[this]&&(e.isArray(t[this])?t[this]=[Number(t[this][0]),Number(t[this][1])]:"string"==typeof t[this]&&(i=t[this].replace(/[\[\]]/g,"").split(/[\s,]+/),t[this]=[Number(i[0]),Number(i[1])]))}),e.validator.autoCreateRanges&&(null!=t.min&&null!=t.max&&(t.range=[t.min,t.max],delete t.min,delete t.max),null!=t.minlength&&null!=t.maxlength&&(t.rangelength=[t.minlength,t.maxlength],delete t.minlength,delete t.maxlength)),t},normalizeRule:function(t){if("string"==typeof t){var i={};e.each(t.split(/\s/),function(){i[this]=!0}),t=i}return t},addMethod:function(t,i,s){e.validator.methods[t]=i,e.validator.messages[t]=void 0!==s?s:e.validator.messages[t],i.length<3&&e.validator.addClassRules(t,e.validator.normalizeRule(t))},methods:{required:function(t,i,s){if(!this.depend(s,i))return"dependency-mismatch";if("select"===i.nodeName.toLowerCase()){var l=e(i).val();return l&&l.length>0}return this.checkable(i)?this.getLength(t,i)>0:t.length>0},email:function(e,t){return this.optional(t)||/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(e)},url:function(e,t){return this.optional(t)||/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})).?)(?::\d{2,5})?(?:[/?#]\S*)?$/i.test(e)},date:function(e,t){return this.optional(t)||!/Invalid|NaN/.test(new Date(e).toString())},dateISO:function(e,t){return this.optional(t)||/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$/.test(e)},number:function(e,t){return this.optional(t)||/^(?:-?\d+|-?\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(e)},digits:function(e,t){return this.optional(t)||/^\d+$/.test(e)},creditcard:function(e,t){if(this.optional(t))return"dependency-mismatch";if(/[^0-9 \-]+/.test(e))return!1;var i,s,l=0,n=0,o=!1;if((e=e.replace(/\D/g,"")).length<13||e.length>19)return!1;for(i=e.length-1;i>=0;i--)s=e.charAt(i),n=parseInt(s,10),o&&(n*=2)>9&&(n-=9),l+=n,o=!o;return l%10==0},minlength:function(t,i,s){var l=e.isArray(t)?t.length:this.getLength(t,i);return this.optional(i)||l>=s},maxlength:function(t,i,s){var l=e.isArray(t)?t.length:this.getLength(t,i);return this.optional(i)||s>=l},rangelength:function(t,i,s){var l=e.isArray(t)?t.length:this.getLength(t,i);return this.optional(i)||l>=s[0]&&l<=s[1]},min:function(e,t,i){return this.optional(t)||e>=i},max:function(e,t,i){return this.optional(t)||i>=e},range:function(e,t,i){return this.optional(t)||e>=i[0]&&e<=i[1]},equalTo:function(t,i,s){var l=e(s);return this.settings.onfocusout&&l.off(".validate-equalTo").on("blur.validate-equalTo",function(){e(i).valid()}),t===l.val()},remote:function(t,i,s){if(this.optional(i))return"dependency-mismatch";var l,n,o=this.previousValue(i);return this.settings.messages[i.name]||(this.settings.messages[i.name]={}),o.originalMessage=this.settings.messages[i.name].remote,this.settings.messages[i.name].remote=o.message,s="string"==typeof s&&{url:s}||s,o.old===t?o.valid:(o.old=t,l=this,this.startRequest(i),(n={})[i.name]=t,e.ajax(e.extend(!0,{mode:"abort",port:"validate"+i.name,dataType:"json",data:n,context:l.currentForm,success:function(s){var n,a,r,d=!0===s||"true"===s;l.settings.messages[i.name].remote=o.originalMessage,d?(r=l.formSubmitted,l.prepareElement(i),l.formSubmitted=r,l.successList.push(i),delete l.invalid[i.name],l.showErrors()):(n={},a=s||l.defaultMessage(i,"remote"),n[i.name]=o.message=e.isFunction(a)?a(t):a,l.invalid[i.name]=!0,l.showErrors(n)),o.valid=d,l.stopRequest(i,d)}},s)),"pending")}}});var t,i={};e.ajaxPrefilter?e.ajaxPrefilter(function(e,t,s){var l=e.port;"abort"===e.mode&&(i[l]&&i[l].abort(),i[l]=s)}):(t=e.ajax,e.ajax=function(s){var l=("mode"in s?s:e.ajaxSettings).mode,n=("port"in s?s:e.ajaxSettings).port;return"abort"===l?(i[n]&&i[n].abort(),i[n]=t.apply(this,arguments),i[n]):t.apply(this,arguments)})});var tableRelationList=[],createRelationData=[],gridObj,selectedValues=[],selectedObject=[],objectSelected=[],searchedResult=[],selectedIndex=[],selectedJoinColumn,isJoinTableDialogBinded=!1,isExistingJoinTableDialogBinded=!1,isSafari=-1!=navigator.userAgent.indexOf("Safari")&&-1==navigator.userAgent.indexOf("Chrome"),treeobj,inputObj,count=0,onFirstChk=!0;window._temp=[];var importDatabaseQuerySchema={};function getFormData(){var e=$("#database-type").val(),t="",i="",s="",l="",n=!1;switch(e.toLowerCase()){case"mssql":t=$("#txt-login").val(),i=$("#txt-password-db").val(),s=$("#txt-dbname").val(),n=$("#secure-sql-connection").is(":checked");break;case"postgresql":t=$("#postgresql-login").val(),i=$("#postgresql-password-db").val(),s=$("#postgresql-dbname").val(),l=$("#postgresql-port").val(),n=$("#secure-postgresql-connection").is(":checked")}var o=1;return"windows"==$("#check-windows").val()&&(o=0),{ServerType:$("#database-type").val(),UserName:t,Password:i,DataBaseName:s,ServerName:"mssql"===e.toLowerCase()?$("#txt-servername").val():"postgresql"===e.toLowerCase()?$("#postgresql-servername").val():"",AuthenticationType:o,DSN:"",DatabasePassword:$("#client-password").val(),Port:l,SslEnabled:n}}function getTableRelation(e){var t;return $("#content-area").ejWaitingPopup("show"),$.ajax({type:"POST",url:getTableRelationUrl,data:{connection:JSON.stringify(getFormData()),schemaInfo:JSON.stringify(importDatabaseQuerySchema),targetField:e},async:!1,success:function(i){$("#content-area").ejWaitingPopup("hide"),i.length>0?1==i.length?t=i[0]:openSelectTableRelationPopup(i,e):openGetRelationPopup(e)}}),t}function openSelectTableRelationPopup(e,t){tableRelationList=e,selectedJoinColumn=t;var i="<tr><th></th><th>"+window.Server.App.LocalizationContent.LeftTable+"</th><th>"+window.Server.App.LocalizationContent.JoinType+"</th><th>"+window.Server.App.LocalizationContent.RightTable+"</th></tr>";if("mssql"==getFormData().ServerType.toLowerCase())for(var s=0;s<e.length;s++)i+=0==s?"<tr><td><input type='radio' value='"+s+"' name='relation' class='select-relation-chk' checked></td><td>"+e[s].LeftTableSchema+"."+e[s].LeftTableName+"."+e[s].LeftTableColumnName+"</td><td>"+e[s].Relationship+"</td><td>"+e[s].RightTableSchema+"."+e[s].RightTableName+"."+e[s].RightTableColumnName+"</td></tr>":"<tr><td><input type='radio' value='"+s+"' name='relation' class='select-relation-chk'></td><td>"+e[s].LeftTableSchema+"."+e[s].LeftTableName+"."+e[s].LeftTableColumnName+"</td><td>"+e[s].Relationship+"</td><td>"+e[s].RightTableSchema+"."+e[s].RightTableName+"."+e[s].RightTableColumnName+"</td></tr>";else for(s=0;s<e.length;s++)i+=0==s?"<tr><td><input type='radio' value='"+s+"' name='relation' class='select-relation-chk' checked></td><td>"+e[s].LeftTableName+"."+e[s].LeftTableColumnName+"</td><td>"+e[s].Relationship+"</td><td>"+e[s].RightTableName+"."+e[s].RightTableColumnName+"</td></tr>":"<tr><td><input type='radio' value='"+s+"' name='relation' class='select-relation-chk'></td><td>"+e[s].LeftTableName+"."+e[s].LeftTableColumnName+"</td><td>"+e[s].Relationship+"</td><td>"+e[s].RightTableName+"."+e[s].RightTableColumnName+"</td></tr>";$("table.relation-list").html(i),$(".select-relation-chk").ejRadioButton({size:"small"}),$(".select-relation").attr("data-field-name",t),$("#content-area").ejWaitingPopup("hide"),document.getElementById("select-existing-join").style.display="block";var l='<span class="dialog-header-with-icon"><span class ="dialog-header-title">'+window.Server.App.LocalizationContent.SelectRelation+"</span></span>";if(isExistingJoinTableDialogBinded){(n=document.getElementById("existing-join-table-dialog").ej2_instances)[0].header=l,n[0].show()}else{var n,o=document.createElement("div");o.setAttribute("id","existing-join-table-dialog"),document.getElementById("server-app-container").appendChild(o),(n=new ejs.popups.Dialog({showOnInit:!1,allowDraggable:!1,enableResize:!1,width:window.innerWidth>460?"760px":window.innerWidth-10,height:"auto",showHeader:!1,animationSettings:{effect:"Zoom"},isModal:!0,enableModal:!0,closeOnEscape:!0,header:l,showCloseIcon:!0,content:document.getElementById("select-existing-join"),buttons:[{buttonModel:{isPrimary:!0,cssClass:"app-btn-primary select-relation",content:window.Server.App.LocalizationContent.ApplyButton}}]})).appendTo(o),isExistingJoinTableDialogBinded=!0}ejs.popups.createSpinner({target:document.getElementById("existing-join-table-dialog")}),ejs.popups.setSpinner({type:"Material"})}function openGetRelationPopup(e){var t=[];selectedJoinColumn=e,t.push(importDatabaseQuerySchema.UserNameTable);var i="";switch(e){case"firstname":i=importDatabaseQuerySchema.FirstNameTable,null!=importDatabaseQuerySchema.EmailTable&&t.push(importDatabaseQuerySchema.EmailTable),null!=importDatabaseQuerySchema.LastNameTable&&t.push(importDatabaseQuerySchema.LastNameTable),null!=importDatabaseQuerySchema.IsActiveTable&&t.push(importDatabaseQuerySchema.IsActiveTable);break;case"email":i=importDatabaseQuerySchema.EmailTable,null!=importDatabaseQuerySchema.FirstNameTable&&t.push(importDatabaseQuerySchema.FirstNameTable),null!=importDatabaseQuerySchema.LastNameTable&&t.push(importDatabaseQuerySchema.LastNameTable),null!=importDatabaseQuerySchema.IsActiveTable&&t.push(importDatabaseQuerySchema.IsActiveTable);break;case"lastname":i=importDatabaseQuerySchema.LastNameTable,null!=importDatabaseQuerySchema.EmailTable&&t.push(importDatabaseQuerySchema.EmailTable),null!=importDatabaseQuerySchema.FirstNameTable&&t.push(importDatabaseQuerySchema.FirstNameTable),null!=importDatabaseQuerySchema.IsActiveTable&&t.push(importDatabaseQuerySchema.IsActiveTable);break;case"isactive":i=importDatabaseQuerySchema.IsActiveTable,null!=importDatabaseQuerySchema.EmailTable&&t.push(importDatabaseQuerySchema.EmailTable),null!=importDatabaseQuerySchema.FirstNameTable&&t.push(importDatabaseQuerySchema.FirstNameTable),null!=importDatabaseQuerySchema.LastNameTable&&t.push(importDatabaseQuerySchema.LastNameTable)}var s=[],l={};$.each(tableSchema,function(e,n){$.each(n.Tables,function(e,o){var a=o;a.Schema=n.Schema,-1!==jQuery.inArray(o.TableName,t)&&s.push(a),o.TableName==i&&(l=o)})}),createRelationData=s;for(var n,o="",a="",r="",d=0;d<s.length;d++)o+="<option value='"+s[d].TableName+"' data-schema='"+s[d].Schema+"'>"+s[d].TableName+"</option>";for(var h=s[0].Columns,c=0;c<h.length;c++)a+="<li>"+h[c].ColumnName+"</li>";n="<option value='"+l.TableName+"' data-schema='"+l.Schema+"'>"+l.TableName+"</option>";for(var u=0;u<l.Columns.length;u++)r+="<li>"+l.Columns[u].ColumnName+"</li>";$("#left-table-selection").html(o),$("#right-table-selection").html(n),$("#left-table-columnlist ul").html(a),$("#right-table-columnlist ul").html(r),$("#get-join-details").find(".selectpicker").selectpicker("destroy"),$("#get-join-details").find(".selectpicker").selectpicker(),$(".apply-relation").attr("data-field-name",e),validateApplyRelationFields(),document.getElementById("get-join-details").style.display="block";var m='<span class="dialog-header-with-icon"><span class ="dialog-header-title">'+window.Server.App.LocalizationContent.FormRelation+"</span></span>";if(isJoinTableDialogBinded){(p=document.getElementById("join-table-dialog").ej2_instances)[0].header=m,p[0].show()}else{var p,g=document.createElement("div");g.setAttribute("id","join-table-dialog"),document.getElementById("server-app-container").appendChild(g),(p=new ejs.popups.Dialog({showOnInit:!1,allowDraggable:!1,enableResize:!1,width:window.innerWidth>460?"600px":window.innerWidth-10,height:"auto",showHeader:!1,animationSettings:{effect:"Zoom"},isModal:!0,enableModal:!0,closeOnEscape:!0,header:m,showCloseIcon:!0,created:function(){const e=document.querySelector(".e-dlg-closeicon-btn");e&&e.classList.add("join-details-popup-close")},content:document.getElementById("get-join-details"),buttons:[{buttonModel:{isPrimary:!0,disabled:!0,cssClass:"app-btn-primary apply-relation",content:window.Server.App.LocalizationContent.ApplyButton}},{click:function(){closeJoinsPopup(),p.hide()},buttonModel:{cssClass:"app-btn-secondary",content:window.Server.App.LocalizationContent.CancelButton}}]})).appendTo(g),isJoinTableDialogBinded=!0}ejs.popups.createSpinner({target:document.getElementById("join-table-dialog")}),ejs.popups.setSpinner({type:"Material"})}function validateApplyRelationFields(){var e=$("#left-table-columnlist.column-list").find("li.selected"),t=$("#right-table-columnlist.column-list").find("li.selected");e.length>0&&t.length>0?$(".apply-relation").attr("disabled",!1):$(".apply-relation").attr("disabled",!0)}function validateApplyConnectionFields(){for(var e=$("#selected-schema-holder").find(".selected-schema-fields"),t=!0,i=0;i<e.length;i++)""==$(e[i]).html().trim()&&(t=!1);t?$(".selection-add-btn").addClass("hide"):$(".selection-add-btn").removeClass("hide");var s=$("#selected-schema-holder").find(".selected-schema-fields.mandatory");if(0==s.length)return $("#apply-connections").attr("disabled",!0),void $("#save-db-settings").prop("disabled",!0);for(i=0;i<s.length;i++)if(""==$(s[i]).html().trim())return $("#apply-connections").attr("disabled",!0),void $("#save-db-settings").prop("disabled",!0);$("#apply-connections").attr("disabled",!1),$("#save-db-settings").show(),$("#save-db-settings").prop("disabled",!1)}function refreshTemplate(e){$("#checkbox-header").change(headCheckboxOnChange)}function fnActionComplete(e){var t=$("#Grid").data("ejGrid");if($("#checkbox-header").prop("enabled",!1),$("#checkbox-header").change(headCheckboxOnChange),t.multiSelectCtrlRequest=!0,t.clearSelection(),"paging"==e.requestType||"sorting"==e.requestType||"refresh"==e.requestType||"filtering"==e.requestType||"searching"==e.requestType){if("filtering"!=e.requestType&&"searching"!=e.requestType||(objectSelected=[]),void 0!==t.model.currentViewData)for(var i=0;i<t.model.currentViewData.length;i++){var s=t.model.currentViewData[i],l=s.Index;if(-1!=jQuery.inArray(JSON.stringify(s),$.map(objectSelected,JSON.stringify))){var n=$($("#Grid .checkbox-row[data-checked-id='"+l+"']").closest("td").parent()).index();$("#Grid .checkbox-row#row-check"+l).prop("checked",!0),t.selectRows(n)}}var o=$.grep(searchedResult,function(e){return!0===e.IsDuplicated});0===searchedResult.length?$("#checkbox-header").prop("enabled",!1):$("#checkbox-header").prop("enabled",!0),null!=t.getRows()&&(searchedResult.length-o.length===objectSelected.length&&objectSelected.length>0?$("#checkbox-header").prop("enabled",!0):$("#checkbox-header").prop("enabled",!1))}enableimportbutton(),$('[data-bs-toggle="tooltip"]').tooltip(),showOrHideGridPager("#Grid")}function fnCreate(e){$("#checkbox-header").change(headCheckboxOnChange)}function setHeaderCheckedStatus(e){var t=$.grep(searchedResult,function(e){return!0===e.IsDuplicated});null!=e.getRows()&&(searchedResult.length-t.length===objectSelected.length&&objectSelected.length>0?$("#checkbox-header").prop("checked",!0):$("#checkbox-header").prop("checked",!1)),enableimportbutton()}function recordClick(e){if(gridObj=$("#Grid").data("ejGrid"),e.row.find(".checkbox-row").is(":checked"))gridObj.multiSelectCtrlRequest=!0,-1==jQuery.inArray(JSON.stringify(e.data),$.map(objectSelected,JSON.stringify))?objectSelected.push(e.data):(gridObj.selectRows(e.row.index()),selectedIndex.splice(t,1));else{gridObj.multiSelectCtrlRequest=!0,gridObj.selectRows(e.row.index());var t=jQuery.inArray(JSON.stringify(e.data),$.map(objectSelected,JSON.stringify));-1!=t&&(objectSelected.splice(t,1),gridObj.selectRows(e.row.index()),selectedIndex.splice(t,1))}setHeaderCheckedStatus(gridObj)}function fnOnUserGridActionBegin(e){var t=createLoader("Grid");this.element.ejWaitingPopup({template:$("#"+t)}),"refresh"!=e.requestType&&($(".grid-error-validation").css("display","none"),$(".empty-validation").css("display","none"),$(".grid-validation").css("display","none"))}function headCheckboxOnChange(e){if(gridObj=$("#Grid").data("ejGrid"),1==$("#checkbox-header").prop("checked")){$(".checkbox-row").prop("checked",!0),gridObj.multiSelectCtrlRequest=!0,gridObj.selectRows(0,$(".checkbox-row").length+$(".checkbox-row-disabled").length);for(var t=0;t<$(".checkbox-row-disabled").length;t++){var i=$(".checkbox-row-disabled"),s=$($(i[t]).closest("td").parent()).index();gridObj.selectRows(s)}objectSelected=[],objectSelected=$.extend(!0,objectSelected,searchedResult),isSafari&&$(".checkbox-header-label").addClass("check")}else $(".checkbox-row").prop("checked",!1),objectSelected=[],gridObj.clearSelection(),selectedIndex=[],isSafari&&$(".checkbox-header-label").removeClass("check");enableimportbutton()}function enableimportbutton(){gridObj=$("#Grid").data("ejGrid"),objectSelected.length>0?$("#import-selected").attr("disabled",!1):$("#import-selected").attr("disabled",!0)}function SaveSelectedUsers(){objectSelected.length>0&&(showWaitingPopup("content-area"),$.ajax({type:"POST",data:{selectedUsers:objectSelected},url:saveSelectedUsersUrl,success:function(e){if(hideWaitingPopup("content-area"),e.Status)if(e.IsUserLimitExceed)$("#limit-user").ejDialog("open"),e.UserLicense.UsersLeft>0?($(".importad-allowed-count").html(e.UserLicense.UsersLeft),$("#limit-import-ad .licensed-user-count").html(e.UserLicense.Users),$("#limit-import-ad").show()):($("#zero-user-acc .licensed-user-count").html(e.UserLicense.Users),$("#zero-user-acc").show());else{var t="";t+="<li class='list-unstyled'>"+e.Data.SuccessUserCount+" "+window.Server.App.LocalizationContent.UsersImportSuccess+"</li>",parseInt(e.Data.FailureUserCount)>0&&(t+="<li class='list-unstyled'>"+e.Data.FailureUserCount+" "+window.Server.App.LocalizationContent.IsDuplicateUser+" <br />("+window.Server.App.LocalizationContent.IsUserEmailExist+").</li>"),messageBox("su-user-1",window.Server.App.LocalizationContent.DatabaseImport,t,"success",function(){$("#change-selected-column").click();var e=$("#Grid").data("ejGrid");e.clearSelection(),objectSelected=[],e.refreshContent();var t=jQuery.Event("keypress",{keyCode:13});$("#search-database-users").trigger(t),parent.onCloseMessageBox()})}else null!=e.permissionDenied&&e.permissionDenied?WarningAlert(window.Server.App.LocalizationContent.DatabaseImport,window.Server.App.LocalizationContent.UserManagementWarningAlert,7e3):messageBox("su-user-1",window.Server.App.LocalizationContent.DatabaseImport,window.Server.App.LocalizationContent.InternalServerError,"success",function(){parent.onCloseMessageBox()})}}))}function searchTree(){var e=treeobj.element,t=$("#search-tree").val();if(t.length>0){for(var i=[],s=[],l=e.find("ul>li>div>a"),n=0;n<l.length;n++)-1!=$(l[n]).clone().children().remove().end().text().trim().toLowerCase().indexOf(t)?i.push(l[n]):s.push(l[n]);var o=e.find(i).closest("li").css("display","block");e.find(s).closest("li").css("display","none");for(var a=0;a<o.length;a++){var r=$(o[a]),d=r.parents("ul").closest("li").css("display","block");d.length>0&&(treeobj.expandNode(d),-1==treeobj.model.expandedNodes.indexOf($(treeobj._liList).index(d))&&window._temp.push(d));var h=r.children("ul");h.length>0&&0==h.children("li:visible").length&&(r.children("ul").children("li").css("display","block"),treeobj.expandNode(o[a]),-1==treeobj.model.expandedNodes.indexOf($(treeobj._liList).index(o[a]))&&window._temp.push(o[a]))}}else{e.find("ul>li").css("display","block");for(a=0;a<window._temp.length;a++)treeobj._collpaseNode(window._temp[a]);window._temp=[]}$("#tree-view li:visible").filter("[data-field-type='column']").removeClass("bottom-li"),$("#tree-view li:visible").filter("[data-field-type='column']").slice(-3).addClass("bottom-li"),$("#scroll-element-database").data("ejScroller").refresh()}function validateEmail(e,t){return/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)}function closeJoinsPopup(){var e=$(".selected-schema-fields").filter("[data-field='"+selectedJoinColumn+"']");switch($(e).html(""),$(".selected-schema-btn").filter("[data-field='"+selectedJoinColumn+"']").attr("disabled",!1),selectedJoinColumn){case"username":importDatabaseQuerySchema={};break;case"firstname":importDatabaseQuerySchema.FirstNameTable=void 0,importDatabaseQuerySchema.FirstNameColumn=void 0,importDatabaseQuerySchema.FirstNameTableRelation=void 0;break;case"email":importDatabaseQuerySchema.EmailTable=void 0,importDatabaseQuerySchema.EmailColumn=void 0,importDatabaseQuerySchema.EmailTableRelation=void 0;break;case"lastname":importDatabaseQuerySchema.LastNameTable=void 0,importDatabaseQuerySchema.LastNameColumn=void 0,importDatabaseQuerySchema.LastNameTableRelation=void 0;break;case"isactive":importDatabaseQuerySchema.IsActiveTable=void 0,importDatabaseQuerySchema.IsActiveColumn=void 0,importDatabaseQuerySchema.IsActiveTableRelation=void 0}validateApplyConnectionFields()}function extractXSRFTokenFromCookie(){var e=parent.document.cookie.split("; ").find(e=>e.startsWith("XSRF-TOKEN="));return e?e.split("=")[1]:null}function setXSRFRequestHeader(e){e.setRequestHeader("X-XSRF-TOKEN",extractXSRFTokenFromCookie())}function decodeHtmlAsString(e){var t=document.createElement("textarea");return t.innerHTML=e,t.value}function EscapeHtml(e){return e.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}$(function(){var e=createLoader("content-area");$("#content-area").ejWaitingPopup({template:$("#"+e)}),addPlacehoder(".connection-properties-form"),$.validator.addMethod("isRequired",function(e,t){return!isEmptyOrWhitespace(e)},window.Server.App.LocalizationContent.ItemNameValidator),$.validator.addMethod("hasWhiteSpace",function(e,t){return/\s/.test(e)},window.Server.App.LocalizationContent.HasSpace),$.validator.addMethod("isValidUser",function(e,t){return isValidUserName(e)},window.Server.App.LocalizationContent.IsValidUser),$.validator.addMethod("isValidadminPassword",function(e,t){return validateUserpassword(e)},window.Server.App.LocalizationContent.PasswordConditios),$("#sql-content-holder").validate({errorElement:"span",onkeyup:function(e,t){9!=t.keyCode&&(isKeyUp=!0,$(e).valid(),isKeyUp=!1)},onfocusout:function(e){$(e).valid()},rules:{servername:{isRequired:!0},username:{isRequired:!0},password:{required:!0}},highlight:function(e){$(e).closest(".txt-holder").addClass("has-error"),$(e).parent().find(">.validation-txt-errors").show(),$("#test-connection").prop("disabled",!0),$("#connect-database").addClass("connect-database-button").prop("disabled",!0)},unhighlight:function(e){$(e).closest(".txt-holder").removeClass("has-error"),$(e).parent().find(">.validation-txt-errors").hide()},errorPlacement:function(e,t){$(t).parent().find(">.validation-txt-errors").text(e.html())},messages:{servername:{isRequired:window.Server.App.LocalizationContent.ServerNamevalidator},username:{isRequired:window.Server.App.LocalizationContent.UserNameValidator},password:{required:window.Server.App.LocalizationContent.EnterPassword}}}),$("#postgresql-content-holder").validate({errorElement:"span",onkeyup:function(e,t){9!=t.keyCode&&(isKeyUp=!0,$(e).valid(),isKeyUp=!1)},onfocusout:function(e){$(e).valid()},rules:{servername:{isRequired:!0},port:{isRequired:!0},username:{isRequired:!0},password:{required:!0}},highlight:function(e){$(e).closest(".txt-holder").addClass("has-error"),$(e).parent().find(">.validation-txt-errors").show(),$("#test-connection").prop("disabled",!0),$("#connect-database").addClass("connect-database-button").prop("disabled",!0)},unhighlight:function(e){$(e).closest(".txt-holder").removeClass("has-error"),$(e).parent().find(">.validation-txt-errors").hide()},errorPlacement:function(e,t){$(t).parent().find(">.validation-txt-errors").text(e.html())},messages:{servername:{isRequired:window.Server.App.LocalizationContent.ServerNamevalidator},port:{isRequired:window.Server.App.LocalizationContent.PortValidator},username:{isRequired:window.Server.App.LocalizationContent.UserNameValidator},password:{required:window.Server.App.LocalizationContent.EnterPassword}}});var t=!0;$(document).ready(function(){$("#database-type").trigger("change"),t=!1,$(".database-select-loader-icon").hide()}),$("#database-type").on("change",function(){switch($(".validation-txt-errors").hide(),$(".validation-errors").html(""),$("#test-connection-validation").removeClass("failure").html(""),$(".has-error").removeClass("has-error"),$("#database-type").val().toLowerCase()){case"mssql":0==t?($(".txt-holder input[type='text'], .txt-holder input[type='password']").val(""),$("#txt-dbname").val(""),$("#txt-dbname").selectpicker("destroy"),$("#txt-dbname").selectpicker(),$(".content-display").hide(),$(".show-sql-content").show(),$("div.placeholder").remove(),$("#test-connection").prop("disabled",!0),$("#connect-database").addClass("connect-database-button").prop("disabled",!0),$("#secure-sql-connection").attr("checked",!1)):($(".content-display").hide(),$(".show-sql-content").show(),$("div.placeholder").remove());break;case"postgresql":0==t?($(".txt-holder input[type='text'], .txt-holder input[type='password']").val(""),$("#postgresql-dbname").val(""),$("#postgresql-dbname").selectpicker("destroy"),$("#postgresql-dbname").selectpicker(),$(".content-display").hide(),$(".show-postgresql-content").show(),$("div.placeholder").remove(),$("#test-connection").prop("disabled",!0),$("#connect-database").addClass("connect-database-button").prop("disabled",!0),$("#secure-postgresql-connection").attr("checked",!1)):($(".content-display").hide(),$(".show-postgresql-content").show(),$("div.placeholder").remove());break;case"oracle":0==t&&($(".data-base-fields input[type='text'], .data-base-fields input[type='password']").val(""),$("#database-name").val(""))}addPlacehoder(".connection-properties-form")}),$("#check-windows").on("click change",function(){var e="windows"==$("#check-windows").val(),t=$("#database-type").val();e&&"MSSQL"==t?($("#txt-login").val("").attr("disabled",!0),$("#txt-password-db").val("").attr("disabled",!0)):"MSSQL"==t&&($("#txt-login").attr("disabled",!1),$("#txt-password-db").attr("disabled",!1)),$(".has-error").removeClass("has-error"),$(".validation-txt-errors").hide()}),$("#test-connection").on("click",function(){$("#content-area").ejWaitingPopup("show"),$("#test-connection-validation").html(""),$(".has-error").removeClass("has-error"),$(".validation-txt-errors").html("");var e=getFormData(),t=!1;switch(e.ServerType.toLowerCase()){case"mssql":if(t=$("#sql-content-holder").valid(),""==$("#txt-dbname").val())return $("#txt-dbname").siblings(".validation-txt-errors").html(window.Server.App.LocalizationContent.DatabaseNameValidator),$("#txt-dbname").siblings(".validation-txt-errors").show(),void $("#content-area").ejWaitingPopup("hide");break;case"postgresql":if(t=$("#postgresql-content-holder").valid(),""==$("#postgresql-dbname").val())return $("#postgresql-dbname").siblings(".validation-txt-errors").html(window.Server.App.LocalizationContent.DatabaseNameValidator),$("#postgresql-dbname").siblings(".validation-txt-errors").show(),void $("#content-area").ejWaitingPopup("hide")}t?($(this).prop("disabled",!0),doAjaxPost("POST",testConnectionUrl,{data:JSON.stringify(e)},function(e){null!=e.Key&&e.Key?SuccessAlert(window.Server.App.LocalizationContent.TestConnection,window.Server.App.LocalizationContent.TestConnectionSuccess,7e3):null!=e.permissionDenied&&e.permissionDenied?WarningAlert(window.Server.App.LocalizationContent.DatabaseSettings,window.Server.App.LocalizationContent.PermissionWarningAlert,7e3):$("#test-connection-validation").addClass("failure").removeClass("success").html(e.Data),$("#content-area").ejWaitingPopup("hide"),$("#test-connection").prop("disabled",!1)})):$("#content-area").ejWaitingPopup("hide")}),$(document).on("click","button.dropdown-toggle.selectpicker",function(){var e=$("#"+$(this).attr("data-id"));if($(e).hasClass("database-name-select")&&"block"==$(this).siblings(".dropdown-menu").css("display")){$(".database-select-loader-icon").show(),$(e).html(""),$(e).selectpicker("destroy"),$(e).selectpicker(),$("#test-connection-validation").html(""),$(".has-error").removeClass("has-error"),$(".validation-txt-errors").html("");var t=getFormData(),i=!1;switch(t.ServerType.toLowerCase()){case"mssql":i=$("#sql-content-holder").valid();break;case"postgresql":i=$("#postgresql-content-holder").valid()}i?($(e).prop("disabled",!0),$(e).selectpicker("destroy"),$(e).selectpicker(),doAjaxPost("POST",getDatabaseUrl,{data:JSON.stringify(t)},function(t){if(null!=t.Key&&t.Key){for(var i="",s=0;s<t.Data.length;s++)i+="<option value='"+t.Data[s]+"'>"+t.Data[s]+"</option>";$(e).html(i),$(e).selectpicker("destroy"),$(e).selectpicker(),$("#test-connection-validation").addClass("success").removeClass("failure").html("")}else null!=t.permissionDenied&&t.permissionDenied?WarningAlert(window.Server.App.LocalizationContent.DatabaseSettings,window.Server.App.LocalizationContent.PermissionWarningAlert,7e3):$("#test-connection-validation").addClass("failure").removeClass("success").html(t.Data);$(".database-select-loader-icon").hide(),$(e).prop("disabled",!1),$(e).selectpicker("destroy"),$(e).selectpicker();for(var l=0;l<$(".connect-database-padding .btn-group .dropdown-menu .selectpicker li").length;l++){var n=$(".connect-database-padding .btn-group .dropdown-menu .selectpicker li").eq(l).find("a .text").text();$(".connect-database-padding .btn-group .dropdown-menu .selectpicker li ").eq(l).find("a").attr("title",n)}})):($(e).siblings(".bootstrap-select").find("button.selectpicker").click(),$(".database-select-loader-icon").hide())}}),$(".connect-database-padding #txt-dbname,#client-username,#postgresql-dbname").change(function(){$("#test-connection").prop("disabled",!1),$("#connect-database").addClass("connect-database-button").prop("disabled",!1)}),$(document).on("keypress","#search-database-users",function(e){if(13==e.keyCode){var t=$(this).val();showWaitingPopup("Grid"),doAjaxPost("POST",getSearchedResultUrl,{searchValue:t},function(e){if(e.Status){$("#join-query").html(e.Query),$("#import-selected").attr("disabled","disabled");var t=$("#Grid").data("ejGrid");searchedResult=$.grep(e.Data.Value,function(e){return 1!=e.IsDuplicated}),t.clearSelection(),objectSelected=[],t.option("dataSource",e.Data.Value),t.refreshContent(),e.Data.Success?$("#error-value").find("span").html(""):$("#error-value").find("span").html(e.Data.Message),hideWaitingPopup("Grid")}else parent.messageBox("su-user-1",window.Server.App.LocalizationContent.DatabaseImport,window.Server.App.LocalizationContent.DatabaseSearchFailed,"success",function(){$("#Grid_WaitingPopup").css("display","none"),parent.onCloseMessageBox()}),hideWaitingPopup("Grid")})}}),$("#connect-database").on("click",function(){$("#content-area").ejWaitingPopup("show"),addPlacehoder(".tree-view-search-holder"),$("#test-connection-validation").html(""),$(".has-error").removeClass("has-error"),$(".validation-txt-errors").html("");var e=getFormData(),t=!1;switch(e.ServerType.toLowerCase()){case"mssql":if(t=$("#sql-content-holder").valid(),""==$("#txt-dbname").val())return $("#txt-dbname").siblings(".validation-txt-errors").html(window.Server.App.LocalizationContent.DatabaseNameValidator),$("#txt-dbname").siblings(".validation-txt-errors").show(),void $("#content-area").ejWaitingPopup("hide");break;case"postgresql":if(t=$("#postgresql-content-holder").valid(),""==$("#postgresql-dbname").val())return $("#postgresql-dbname").siblings(".validation-txt-errors").html(window.Server.App.LocalizationContent.DatabaseNameValidator),$("#postgresql-dbname").siblings(".validation-txt-errors").show(),void $("#content-area").ejWaitingPopup("hide")}t?doAjaxPost("POST",testConnectionUrl,{data:JSON.stringify(e)},function(t){null!=t.Key&&t.Key?doAjaxPost("POST",connectDatabaseUrl,{data:JSON.stringify(e)},function(e){$("#selected-schema-container").show(),$("#apply-connections").attr("disabled",!0).show(),$("#connect-database").hide(),$("#change-connection").show(),$("#save-db-settings").show(),$("#save-db-settings").prop("disabled",!0),$(".connection-properties-form").hide(),null!=$("#tree-view").data("ejTreeView")&&$("#tree-view").data("ejTreeView").destroy(),$("#selected-schema-container").html(e),addPlacehoder(".tree-view-search-holder");var t=window.innerHeight-330-$("#selected-connect-properties").height()>$("#selected-schema-holder").height()?window.innerHeight-330-$("#selected-connect-properties").height():$("#selected-schema-holder").height();$("#schema-selection").css({height:t+"px"}),$("#tree-view").ejTreeView({nodeExpand:function(){$("#scroll-element-database").data("ejScroller").refresh(),$("#tree-view li:visible").filter("[data-field-type='column']").removeClass("bottom-li"),$("#tree-view li:visible").filter("[data-field-type='column']").slice(-3).addClass("bottom-li")},nodeCollapse:function(){$("#scroll-element-database").data("ejScroller").refresh(),$("#tree-view li:visible").filter("[data-field-type='column']").removeClass("bottom-li"),$("#tree-view li:visible").filter("[data-field-type='column']").slice(-3).addClass("bottom-li")},expandOn:"click"}),$("#tree-view li:visible").filter("[data-field-type='column']").slice(-3).addClass("bottom-li"),$("#scroll-element-database").ejScroller({height:t-25,scrollerSize:9,buttonSize:0}),$("#table-list-treeview").css({height:t+"px"}),$("#record-count").ejNumericTextbox({showSpinButton:!1,value:100,maxValue:1e3,minValue:1,width:60,showRoundedCorner:!0,focusOut:function(e){null==e.value&&$("#record-count").data("ejNumericTextbox").option("value",100)}}),treeobj=$("#tree-view").data("ejTreeView"),$(".selectpicker").selectpicker("destroy"),$(".selectpicker").selectpicker(),$("#content-area").ejWaitingPopup("hide")}):null!=t.permissionDenied&&t.permissionDenied?(WarningAlert(window.Server.App.LocalizationContent.DatabaseSettings,window.Server.App.LocalizationContent.PermissionWarningAlert,7e3),$("#content-area").ejWaitingPopup("hide")):($("#content-area").ejWaitingPopup("hide"),$("#test-connection-validation").addClass("failure").removeClass("success").html(t.Data))}):$("#content-area").ejWaitingPopup("hide")}),$(document).on("click","#save-db-settings",function(){$("#content-area").ejWaitingPopup("show"),doAjaxPost("POST",saveDbSettingsUrl,{connection:JSON.stringify(getFormData()),schemaInfo:JSON.stringify(importDatabaseQuerySchema),activeStatus:$("#txt-activestatus").val()},function(e){e.status?(SuccessAlert(window.Server.App.LocalizationContent.DatabaseSettings,window.Server.App.LocalizationContent.SettingsSuccessAlert,7e3),void 0!==e.redirectTo&&""!==e.redirectTo&&(window.location.href=e.redirectTo)):null!=e.permissionDenied&&e.permissionDenied?WarningAlert(window.Server.App.LocalizationContent.DatabaseSettings,window.Server.App.LocalizationContent.PermissionWarningAlert,7e3):WarningAlert(window.Server.App.LocalizationContent.DatabaseSettings,window.Server.App.LocalizationContent.SettingsWarningAlert,7e3),$("#save-db-settings").hide(),$("#save-db-settings").prop("disabled",!0),$("#change-connection").hide(),$("#connect-database").show(),$("#selected-schema-container").html("").hide(),$(".connection-properties-form").show(),objectSelected=[],importDatabaseQuerySchema={},$("#content-area").ejWaitingPopup("hide")})}),$(document).on("click","#apply-connections",function(){$("#content-area").ejWaitingPopup("show"),doAjaxPost("POST",getResultDataUrl,{connection:JSON.stringify(getFormData()),schemaInfo:JSON.stringify(importDatabaseQuerySchema),sortValue:$("#sort-value").val(),recordCount:$("#record-count").val()},function(e){$(".schema-selection").hide(),$("#apply-connections").hide(),$("#import-selected").show(),$("#selected-data-list").html(e),addPlacehoder(".search-user-holder"),gridData=ej.parseJSON(gridData),gridData.Success?$("#error-value").find("span").html(""):$("#error-value").find("span").html(gridData.Message),$("#import-selected").attr("disabled","disabled"),ej.support.stableSort=!1,GridLocalization(),searchedResult=$.grep(gridData.Value,function(e){return 1!=e.IsDuplicated}),$("#Grid").ejGrid({dataSource:gridData.Value,gridLines:ej.Grid.GridLines.None,allowPaging:!0,allowSorting:!0,allowSelection:!0,allowScrolling:!1,allowFiltering:!1,allowSearching:!0,locale:"en-us",filterSettings:{filterType:"menu"},pageSettings:{pageSize:20},selectionType:ej.Grid.SelectionType.Multiple,selectionSettings:{selectionMode:["row"]},templateRefresh:"refreshTemplate",actionComplete:"fnActionComplete",create:"fnCreate",recordClick:"recordClick",actionBegin:"fnOnUserGridActionBegin",enableAltRow:!1,rowDataBound:function(){$("input.checkbox-row-disabled").parents("tr").addClass("row-disabled")},dataBound:function(){$("#checkbox-header").change(headCheckboxOnChange),this.model.indexes={}},columns:[{headerTemplateID:"#checkbox-header-template",template:!0,templateID:"#checkbox-row-template",textAlign:ej.TextAlign.Center,width:10,allowFiltering:!1},{field:"UserName",cssClass:"user-name",headerText:window.Server.App.LocalizationContent.UserName,headerTemplateID:"#user-name-header",width:50,type:"string"},{field:"FirstName",cssClass:"first-name",headerText:window.Server.App.LocalizationContent.FirstName,headerTemplateID:"#first-name-header",width:60,type:"string"},{field:"LastName",cssClass:"last-name",headerText:window.Server.App.LocalizationContent.LastName,headerTemplateID:"#last-name-header",width:60,type:"string"},{field:"EmailId",cssClass:"email-id",headerText:window.Server.App.LocalizationContent.EailAddress,headerTemplateID:"#email-id-header",width:80,type:"string"},{field:"",width:10,templateID:"#user-detail-validation",allowFiltering:!1,textAlign:ej.TextAlign.Center}]}),$("#Grid").data("ejGrid").refreshContent(),$('[data-bs-toggle="tooltip"]').tooltip(),$("#content-area").ejWaitingPopup("hide")})}),$(document).on("click","#change-connection",function(){$("#save-db-settings").hide(),$("#save-db-settings").prop("disabled",!0),$("#change-connection").hide(),$("#connect-database").show(),$("#apply-connections").attr("disabled",!0).hide(),$("#selected-schema-container").html("").hide(),$(".connection-properties-form").show(),$("#import-selected").hide(),objectSelected=[],importDatabaseQuerySchema={}}),$(document).on("click","#change-selected-column",function(){$("#selected-data-list").html(""),$(".schema-selection").show(),$("#apply-connections").show(),$("#import-selected").hide(),objectSelected=[]}),$(document).on("change",".schema-tables",function(){for(var e=$(this).attr("data-field-name"),t=$(this).val(),i=tableSchema.filter(function(e){return e.TableName===t}),s=$(".schema-columns").filter("[data-field-name='"+e+"']"),l="",n=0;n<i[0].Columns.length;n++)l+="<option value='"+i[0].Columns[n].ColumnName+"'>"+i[0].Columns[n].ColumnName+"</option>";$(s).html(l),$(s).selectpicker("destroy"),$(s).selectpicker()}),$(document).on("keyup","#client-username",function(){regexIe8.test(userAgent)?""===$(this).val()?($("#rolename").prop("disabled",!0),$("#rolename").val(""),$("#rolename").next(".placeholder").removeClass("hide").addClass("show")):($("#rolename").prop({disabled:!1,readonly:!0}),$("#rolename").focus(this.blur),$("#rolename").val($(this).val().substring(0,25)+"_role"),$("#rolename").next(".placeholder").removeClass("show").addClass("hide")):-1!=userAgent.indexOf("Safari")&&-1==userAgent.indexOf("Chrome")?($("#rolename").val(""===$(this).val()?"":$(this).val().substring(0,25)+"_role"),$("#rolename").css("-webkit-text-fill-color","black")):$("#rolename").val(""===$(this).val()?"":$(this).val().substring(0,25)+"_role")}),$(document).on("click",".selected-schema-btn",function(e){var t=$(this).attr("data-field"),i=$(this).closest("[data-field-type='column']");if(console.log(i),1==i.length&&"column"==$(i).attr("data-field-type")){$(".selected-schema-btn-dialog").hide(),$("#tree-view .selection-add-btn").removeClass("show"),$(".selected-schema-btn").filter("[data-field='"+t+"']").attr("disabled",!0);var s=$(i).attr("data-schema-name"),l=$(i).attr("data-table-name"),n=$(i).attr("data-column-name"),o=$(i).attr("data-type"),a="<div data-table-name='"+l+"'><span>"+n+" ["+l+"]</span><span class='su su-close cancel-schema'></span></div>",r=$(".selected-schema-fields").filter("[data-field='"+t+"']");switch($(r).html(a),t){case"username":importDatabaseQuerySchema.UserNameSchema=s,importDatabaseQuerySchema.UserNameTable=l,importDatabaseQuerySchema.UserNameColumn=n;break;case"firstname":importDatabaseQuerySchema.FirstNameSchema=s,importDatabaseQuerySchema.FirstNameTable=l,importDatabaseQuerySchema.FirstNameColumn=n;break;case"email":importDatabaseQuerySchema.EmailSchema=s,importDatabaseQuerySchema.EmailTable=l,importDatabaseQuerySchema.EmailColumn=n;break;case"lastname":importDatabaseQuerySchema.LastNameSchema=s,importDatabaseQuerySchema.LastNameTable=l,importDatabaseQuerySchema.LastNameColumn=n;break;case"isactive":importDatabaseQuerySchema.IsActiveSchema=s,importDatabaseQuerySchema.IsActiveTable=l,importDatabaseQuerySchema.IsActiveColumn=n,importDatabaseQuerySchema.IsActiveDatabaseType=o}if("username"==t)$(".selected-schema-btn").filter("[data-field!='username']").attr("disabled",!1);else if(l==importDatabaseQuerySchema.UserNameTable||"firstname"==t&&(l==importDatabaseQuerySchema.EmailTable||l==importDatabaseQuerySchema.lastname||l==importDatabaseQuerySchema.IsActiveTable)||"email"==t&&(l==importDatabaseQuerySchema.FirstNameTable||l==importDatabaseQuerySchema.LastNameTable||l==importDatabaseQuerySchema.IsActiveTable)||"lastname"==t&&(l==importDatabaseQuerySchema.EmailTable||l==importDatabaseQuerySchema.FirstNameTable||l==importDatabaseQuerySchema.IsActiveTable)||"isactive"==t&&(l==importDatabaseQuerySchema.EmailTable||l==importDatabaseQuerySchema.FirstNameTable||l==importDatabaseQuerySchema.LastNameTable))var d=void 0;else d=getTableRelation(t);switch(t){case"firstname":importDatabaseQuerySchema.FirstNameTableRelation=d;break;case"email":importDatabaseQuerySchema.EmailTableRelation=d;break;case"lastname":importDatabaseQuerySchema.LastNameTableRelation=d;break;case"isactive":importDatabaseQuerySchema.IsActiveTableRelation=d}}validateApplyConnectionFields()}),$(document).on("click",".cancel-schema",function(e){var t=$(this).parents(".selected-schema-fields").attr("data-field");switch($(".selected-schema-btn").filter("[data-field='"+t+"']").attr("disabled",!1),"username"==t?($(".selected-schema-btn").filter("[data-field!='username']").attr("disabled",!0),$(".selected-schema-fields").html("")):$(this).parents(".selected-schema-fields").html(""),t){case"username":importDatabaseQuerySchema={};break;case"firstname":importDatabaseQuerySchema.FirstNameTable=void 0,importDatabaseQuerySchema.FirstNameColumn=void 0,importDatabaseQuerySchema.FirstNameTableRelation=void 0;break;case"email":importDatabaseQuerySchema.EmailTable=void 0,importDatabaseQuerySchema.EmailColumn=void 0,importDatabaseQuerySchema.EmailTableRelation=void 0;break;case"lastname":importDatabaseQuerySchema.LastNameTable=void 0,importDatabaseQuerySchema.LastNameColumn=void 0,importDatabaseQuerySchema.LastNameTableRelation=void 0;break;case"isactive":importDatabaseQuerySchema.IsActiveTable=void 0,importDatabaseQuerySchema.IsActiveColumn=void 0,importDatabaseQuerySchema.IsActiveTableRelation=void 0}validateApplyConnectionFields()}),$(document).on("click","#tree-view .selection-add-btn",function(e){$("#tree-view .selection-add-btn").removeClass("show"),$(".selected-schema-btn-dialog").hide(),$(this).siblings(".selected-schema-btn-dialog").show(),$(this).addClass("show")}),$(document).on("click",".select-relation",function(e){var t=$(this).attr("data-field-name"),i=tableRelationList[parseInt($("#select-existing-join input[type='radio']:checked").val())];switch(t){case"firstname":importDatabaseQuerySchema.FirstNameTableRelation=i;break;case"email":importDatabaseQuerySchema.EmailTableRelation=i;break;case"lastname":importDatabaseQuerySchema.LastNameTableRelation=i;break;case"isactive":importDatabaseQuerySchema.IsActiveTableRelation=i}tableRelationList=[],document.getElementById("existing-join-table-dialog").ej2_instances[0].hide()}),$(document).on("click",function(e){$(e.target).hasClass("selection-add-btn")||0==$(e.target).parents(".selected-schema-btn-dialog").length&&($(".selected-schema-btn-dialog").hide(),$("#tree-view .selection-add-btn").removeClass("show"))}),$(document).on("click",".column-list li",function(e){$(this).siblings("li").removeClass("selected"),$(this).addClass("selected"),validateApplyRelationFields()}),$(document).on("change","#left-table-selection",function(e){var t=$(this).val(),i=[];$.each(createRelationData,function(e,s){s.TableName==t&&(i=s.Columns)});for(var s="",l=0;l<i.length;l++)s+="<li>"+i[l].ColumnName+"</li>";$("#left-table-columnlist ul").html(s),validateApplyRelationFields()}),$(document).on("click",".apply-relation",function(e){var t=$(this).attr("data-field-name"),i=$("#join-type").val(),s={LeftTableSchema:"inner join"==i?$("#right-table-selection").find("option").filter("[value='"+$("#right-table-selection").val()+"']").attr("data-schema"):$("#left-table-selection").find("option").filter("[value='"+$("#left-table-selection").val()+"']").attr("data-schema"),RightTableSchema:"inner join"==i?$("#left-table-selection").find("option").filter("[value='"+$("#left-table-selection").val()+"']").attr("data-schema"):$("#right-table-selection").find("option").filter("[value='"+$("#right-table-selection").val()+"']").attr("data-schema"),LeftTableName:"inner join"==i?$("#right-table-selection").val():$("#left-table-selection").val(),RightTableName:"inner join"==i?$("#left-table-selection").val():$("#right-table-selection").val(),LeftTableColumnName:"inner join"==i?$("#right-table-columnlist.column-list").find("li.selected").text():$("#left-table-columnlist.column-list").find("li.selected").text(),RightTableColumnName:"inner join"==i?$("#left-table-columnlist.column-list").find("li.selected").text():$("#right-table-columnlist.column-list").find("li.selected").text(),LeftTable:"",LeftTableCondition:"",RightTable:"",RightTableCondition:"",Relationship:i};switch(t){case"firstname":importDatabaseQuerySchema.FirstNameTableRelation=s;break;case"email":importDatabaseQuerySchema.EmailTableRelation=s;break;case"lastname":importDatabaseQuerySchema.LastNameTableRelation=s;break;case"isactive":importDatabaseQuerySchema.IsActiveTableRelation=s}createRelationData=[],document.getElementById("join-table-dialog").ej2_instances[0].hide()}),$(document).on("click","#search-tree-close",function(e){$("#search-tree").val(""),$("#search-tree").siblings("span.close-icon").css("display","none"),$("#search-tree").siblings("span.su-search").css("display","block"),searchTree()}),$(document).on("keyup","#search-tree",function(e){13==e.keyCode&&searchTree()}),$(document).on("click","#import-selected",SaveSelectedUsers),$(document).on("click",".join-details-popup-close",closeJoinsPopup)}),$.ajaxSetup({beforeSend:function(e){setXSRFRequestHeader(e)}});
