/*!
*  filename: report-viewer-views-v2.min.js
*  version : unknown version
*  Copyright Syncfusion Inc. 2001 - 2013. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
function ajaxPostCall(n,t,i,r,u,f,e){if(embedConfig.IsEmbedCode){if(n=="GET"){var o=jQuery.param(i);t.api=t.api+"?"+o;i=null}return $.ajax({type:n,url:reportServerApiUrl+t.api,headers:{"Content-type":"application/json",Authorization:token},data:JSON.stringify(i),beforeSend:function(n){isNullOrWhitespace(r)||r(n)},success:function(n){isNullOrWhitespace(u)||u(n)},error:function(){isNullOrWhitespace(f)||f()},complete:function(n){isNullOrWhitespace(e)||e(n)}})}return $.ajax({type:n,url:t.web,data:i,beforeSend:function(n){embedConfig.IsEmbedReport||n.setRequestHeader("X-XSRF-TOKEN",extractXSRFTokenFromCookie());isNullOrWhitespace(r)||r(n)},success:function(n){isNullOrWhitespace(u)||u(n)},error:function(){isNullOrWhitespace(f)||f()},complete:function(n){isNullOrWhitespace(e)||e(n)}})}function isNullOrWhitespace(n){return n==null||n==undefined||$.trim(n)==""}function generateProfileAvatar(){$(".profile-pic-tag").each(function(){var u=$(this).attr("data-id"),t=$(this).attr("data-image-size"),l=t/3,a=$(this).attr("data-display-name"),v=$(this).attr("data-type"),e,o,f,s,h,n,c,i,r;if($(this).html(""),u!=0){if(e=["#b7fbff","#a9eec2","#ffe0a3","#ffa1ac","#8ed6ff","#bf9fee","#ffa0d2","#32dbc6","#d2c8c8","#e3e7f1"],v=="user"){for(o=u.match(/(\d+)/g),f=0,f=0;f<o.length;f++)s=o[0][0];$(this).css("background-color",e[s]);h=idpUrl+"/User/Avatar?id="+u;n=$('<img id="default-profile-image">');n.attr("src",h);n.attr("width",t);n.attr("height",t);n.css("position","absolute");n.css("top","0px");n.css("left","0px");n.css("border-radius","50%");n.appendTo($(this))}else c=u%10,$(this).css("background-color",e[c]);$(this).css("width",t);$(this).css("height",t);$(this).css("line-height",t+"px");i=a.trim().toUpperCase().split(/ /);r=$('<span id="first-letter">');i[1]==null?r.text(i[0][0]):r.text(i[0][0]+i[i.length-1][0]);r.css("font-size",l+"px");r.css("margin-left","2px");r.appendTo($(this))}})}function extractXSRFTokenFromCookie(){var n=document.cookie.split("; ").find(n=>n.startsWith("XSRF-TOKEN="));return n?n.split("=")[1]:null}function fnOnUserGridActionBegin(n){var u,r,t,f,i;if(isFirstRequest=!0,u=$("#userSearchKey").val(),this.model.query._params.push({key:"searchKey",value:u}),r=[],f=createLoader("UserGrid"),this.element.ejWaitingPopup({template:$("#"+f)}),n.model.filterSettings.filteredColumns.length>0){for(t=0;t<n.model.filterSettings.filteredColumns.length;t++)i=n.model.filterSettings.filteredColumns[t],r.push({PropertyName:i.field,FilterType:i.operator,FilterKey:i.value});this.model.query._params.push({key:"filterCollection",value:r})}}function createLoader(n,t){var i="",t,r;return typeof n=="string"?(t=n.indexOf(".")===0?".":"#",n=n.indexOf(".")===0?n.slice(1,n.length):n.indexOf("#")===0?n.slice(1,n.length):n,i=n+"-loader-icon",$("#"+i).length==0&&$(t+n).length!=0&&(r=$("<div class='loader-blue loader-icon' id='"+i+"'><svg class='circular'><circle class='path' cx='27' cy='27' r='20' fill='none' stroke-width='4' stroke-miterlimit='10'><\/circle><\/svg><\/div>"),$("body").append(r)),i):(n=t,t=n.indexOf(".")===0?".":"#",n=n.slice(1,n.length),i=n+"-loader-icon",$("#"+i).length==0&&$("#"+n).length!=0&&(r=$("<div class='loader-blue loader-icon' id='"+i+"'><svg class='circular'><circle class='path' cx='27' cy='27' r='20' fill='none' stroke-width='4' stroke-miterlimit='10'><\/circle><\/svg><\/div>"),$("body").append(r)),i)}function fnOnGroupGridActionBegin(n){var u,r,t,f,i;if(isFirstRequest=!0,u=$("#groupSearchKey").val(),this.model.query._params.push({key:"searchKey",value:u}),r=[],f=createLoader("GroupGrid"),this.element.ejWaitingPopup({template:$("#"+f)}),n.model.filterSettings.filteredColumns.length>0){for(t=0;t<n.model.filterSettings.filteredColumns.length;t++)i=n.model.filterSettings.filteredColumns[t],r.push({PropertyName:i.field,FilterType:i.operator,FilterKey:i.value});this.model.query._params.push({key:"filterCollection",value:r})}}function onPermissionDeleteDialogClose(){$("#permission_delete_confirmation").ejDialog("close")}function onPermissionDeleteDialogOpen(){$("#permission_delete_confirmation").ejDialog("open");$("#permission_delete_confirmation").focus()}function OpenDeleteDialog(n){$("#permission_delete_confirmation").ejDialog("open");var i=$(n).attr("data-itemviewid"),t=$(n).attr("data-item"),r=$(n).attr("data-id");$("#deletedItem").html(t);$("#delete_item_type").val(t);$("#delete_permission_id").val(i);$("#hiddendata-id").val(r)}function DeletePermission(){var i=$("#delete_permission_id").val(),n=$("#delete_item_type").val(),t=$("#hiddendata-id").val();$.ajax({type:"POST",url:DeleteItemViewPermissionUrl,data:{permission:i,deleteItem:n},beforeSend:function(){$("#permission_delete_confirmation_wrapper").ejWaitingPopup("show")},success:function(){$("#permission_delete_confirmation_wrapper").ejWaitingPopup("hide");onPermissionDeleteDialogClose();messageBox("su-delete",window.Server.App.LocalizationContent.RemoveAccess,window.Server.App.LocalizationContent.RemoveAccessSuccess,"success",function(){n.toLowerCase()=="group"?($("#GroupSearch option[value='"+t+"']").attr("selected",!1),$("#GroupSearch").selectpicker("refresh")):($("#UserSearch option[value='"+t+"']").attr("selected",!1),$("#UserSearch").selectpicker("refresh"));refreshUserGroupList();var i=$("#UserGrid").data("ejGrid"),r=$("#GroupGrid").data("ejGrid"),u=$(".ListItems.selected").attr("data-grid");i.refreshContent();r.refreshContent();u.toLowerCase()=="usergrid"?$("#GroupGrid_WaitingPopup").hide():$("#UserGrid_WaitingPopup").hide();onCloseMessageBox()})}})}function InitializeShareView(){var n,t;for($("#UserSearch").selectpicker("refresh"),n=0;n<$("#userSearch_container .btn-group .dropdown-menu .selectpicker li").length;n++)t=$("#userSearch_container .btn-group .dropdown-menu .selectpicker li").eq(n).find("a .text").text(),$("#userSearch_container .btn-group .dropdown-menu .selectpicker li ").eq(n).find("a").attr("title",t);for($("#GroupSearch").selectpicker("refresh"),n=0;n<$("#groupSearch_container .btn-group .dropdown-menu .selectpicker li").length;n++)t=$("#groupSearch_container .btn-group .dropdown-menu .selectpicker li").eq(n).find("a .text").text(),$("#groupSearch_container .btn-group .dropdown-menu .selectpicker li ").eq(n).find("a").attr("title",t);$("#userSearch_container").on("click",".bs-select-all-custom",function(n){$("#userSearch_container").addClass("valueChanged");$("#UserSearch").data("selectpicker").selectAll();$(this).removeClass("bs-select-all-custom").addClass("bs-deselect-all-custom");$($(this).children("span")[0]).text(window.Server.App.LocalizationContent.Clear);n.stopPropagation()});$("#groupSearch_container").on("click",".bs-select-all-custom",function(n){$("#groupSearch_container").addClass("valueChanged");$("#GroupSearch").data("selectpicker").selectAll();$(this).removeClass("bs-select-all-custom").addClass("bs-deselect-all-custom");$($(this).children("span")[0]).text(window.Server.App.LocalizationContent.Clear);n.stopPropagation()});$("#userSearch_container").on("click",".bs-deselect-all-custom",function(n){$("#userSearch_container").addClass("valueChanged");$("#UserSearch").data("selectpicker").deselectAll();$(this).removeClass("bs-deselect-all-custom").addClass("bs-select-all-custom");$($(this).children("span")[0]).text(window.Server.App.LocalizationContent.Select);$(".SelectedShareItems[data-searchtype='userSearch']").remove();n.stopPropagation()});$("#groupSearch_container").on("click",".bs-deselect-all-custom",function(n){$("#groupSearch_container").addClass("valueChanged");$("#GroupSearch").data("selectpicker").deselectAll();$(this).removeClass("bs-deselect-all-custom").addClass("bs-select-all-custom");$($(this).children("span")[0]).text(window.Server.App.LocalizationContent.Select);$(".SelectedShareItems[data-searchtype='groupSearch']").remove();n.stopPropagation()});$("#userSearch_container").on("click",".bootstrap-select li a",function(n){var i,r,t;$("#userSearch_container").addClass("valueChanged");i=$("#userSearch_container .bootstrap-select li.selected").length;r=$("#userSearch_container .bootstrap-select li").length;i==r&&($($("#userSearch_container div.bs-select-all-custom").children("span")[0]).text(window.Server.App.LocalizationContent.Clear),$("#userSearch_container div.bs-select-all-custom").removeClass("bs-select-all-custom").addClass("bs-deselect-all-custom"));$(this).parent().hasClass("selected")?t=$("#UserSearch").find("option")[parseInt($(this).parent().attr("data-original-index"))]:(t=$("#UserSearch").find("option")[parseInt($(this).parent().attr("data-original-index"))],$(".SelectedShareItems[id='"+$(t).val()+"']").remove(),$($("#userSearch_container .bs-deselect-all-custom").children("span")[0]).text(window.Server.App.LocalizationContent.Select),$("#userSearch_container .bs-deselect-all-custom").removeClass("bs-deselect-all-custom").addClass("bs-select-all-custom"));n.stopPropagation()});$("#groupSearch_container").on("click",".bootstrap-select .dropdown-menu .selectpicker li a",function(n){var i,r,t;$("#groupSearch_container").addClass("valueChanged");i=$("#groupSearch_container .bootstrap-select li.selected").length;r=$("#groupSearch_container .bootstrap-select li").length;i==r&&($($("#groupSearch_container div.bs-select-all-custom").children("span")[0]).text(window.Server.App.LocalizationContent.Clear),$("#groupSearch_container div.bs-select-all-custom").removeClass("bs-select-all-custom").addClass("bs-deselect-all-custom"));$(this).parent().hasClass("selected")?t=$("#GroupSearch").find("option")[parseInt($(this).parent().attr("data-original-index"))]:(t=$("#GroupSearch").find("option")[parseInt($(this).parent().attr("data-original-index"))],$(".SelectedShareItems").filter("[data-searchtype='groupSearch']").filter("#"+$(t).val()).remove(),$($("#groupSearch_container .bs-deselect-all-custom").children("span")[0]).text(window.Server.App.LocalizationContent.Select),$("#groupSearch_container .bs-deselect-all-custom").removeClass("bs-deselect-all-custom").addClass("bs-select-all-custom"));n.stopPropagation()});$("#groupSearch_container").click(function(){$("#groupSearch_container").addClass("valueChanged");var n=$("#groupSearch_container .bootstrap-select li.selected").length,t=$("#groupSearch_container .bootstrap-select li").length;n==t&&$($("#groupSearch_container div.bs-deselect-all-custom").children("span")[0]).text(window.Server.App.LocalizationContent.Clear)});$("#userSearch_container").click(function(){$("#userSearch_container").addClass("valueChanged");var n=$("#userSearch_container .bootstrap-select li.selected").length,t=$("#userSearch_container .bootstrap-select li").length;n==t&&$($("#userSearch_container div.bs-deselect-all-custom").children("span")[0]).text(window.Server.App.LocalizationContent.Clear)});$("#UserSearch option").length>0?$(".share-popup #userSearch_container .bs-deselect-all").after("<div class='bs-select-all-custom'><span>"+window.Server.App.LocalizationContent.Select+"<\/span><span class='bs-select-custom-tick glyphicon glyphicon-ok'><\/span><\/div>"):$(".share-popup #userSearch_container .bs-deselect-all").after("<span class='noResult'>"+window.Server.App.LocalizationContent.NoResult+"<\/span>");$("#GroupSearch option").length>0?$(".share-popup #groupSearch_container .bs-deselect-all").after("<div class='bs-select-all-custom'><span>"+window.Server.App.LocalizationContent.Select+"<\/span><span class='bs-select-custom-tick glyphicon glyphicon-ok'><\/span><\/div>"):$(".share-popup #groupSearch_container .bs-deselect-all").after("<span class='noResult'>"+window.Server.App.LocalizationContent.NoResult+"<\/span>");parent.$("#sharepopup_wrapper_WaitingPopup").css("display","none")}function refreshUserGroupList(){var i=parent.document.getElementById("viewShare_popup_iframe"),r=i.contentDocument||i.contentWindow.document,n,t;for($(r).find(".share-popup #userSearch_container .bs-deselect-all-custom,.share-popup #userSearch_container .bs-select-all-custom,.share-popup #userSearch_container .noResult").remove(),$(r).find(".share-popup #groupSearch_container .bs-deselect-all-custom,.share-popup #groupSearch_container .bs-select-all-custom,.share-popup #groupSearch_container .noResult").remove(),n=0;n<$("#userSearch_container .btn-group .dropdown-menu .selectpicker li").length;n++)t=$("#userSearch_container .btn-group .dropdown-menu .selectpicker li").eq(n).find("a .text").text(),$("#userSearch_container .btn-group .dropdown-menu .selectpicker li ").eq(n).find("a").attr("title",t);for(n=0;n<$("#groupSearch_container .btn-group .dropdown-menu .selectpicker li").length;n++)t=$("#groupSearch_container .btn-group .dropdown-menu .selectpicker li").eq(n).find("a .text").text(),$("#groupSearch_container .btn-group .dropdown-menu .selectpicker li ").eq(n).find("a").attr("title",t);$("#UserSearch option").length>0?$("#UserSearch option").length==$("#UserSearch option:selected").length?$(".share-popup #userSearch_container .bs-deselect-all").after("<div class='bs-deselect-all-custom'><span>"+window.Server.App.LocalizationContent.Clear+"<\/span><span class='bs-select-custom-tick glyphicon glyphicon-ok'><\/span><\/div>"):$(".share-popup #userSearch_container .bs-deselect-all").after("<div class='bs-select-all-custom'><span>"+window.Server.App.LocalizationContent.Select+"<\/span><span class='bs-select-custom-tick glyphicon glyphicon-ok'><\/span><\/div>"):$(".share-popup #userSearch_container .bs-deselect-all").after("<span class='noResult'>"+window.Server.App.LocalizationContent.NoResult+"<\/span>");$("#GroupSearch option").length>0?$("#GroupSearch option").length==$("#GroupSearch option:selected").length?$(".share-popup #groupSearch_container .bs-deselect-all").after("<div class='bs-deselect-all-custom'><span>"+window.Server.App.LocalizationContent.Clear+"<\/span><span class='bs-select-custom-tick glyphicon glyphicon-ok'><\/span><\/div>"):$(".share-popup #groupSearch_container .bs-deselect-all").after("<div class='bs-select-all-custom'><span>"+window.Server.App.LocalizationContent.Select+"<\/span><span class='bs-select-custom-tick glyphicon glyphicon-ok'><\/span><\/div>"):$(".share-popup #groupSearch_container .bs-deselect-all").after("<span class='noResult'>"+window.Server.App.LocalizationContent.NoResult+"<\/span>")}function onviewShareDialogClose(){var n=parent.document.getElementById("viewShare_popup_iframe"),t=n.contentDocument||n.contentWindow.document;t.documentElement.innerHTML="";parent.$("#viewShare_popup").ejDialog("close")}function ShareView(n){var t=$(window).width(),i=$(window).height(),r=$("#viewShare_popup").width(),u=$("#viewShare_popup").height(),f=(parseInt(t)-parseInt(r))/2,e=(parseInt(i)-parseInt(u))/2;$("#viewShare_popup").css({left:f,top:e});$("#viewShare_popup,.ViewShare_popup_shadow").css("display","block");$("#sharepopup_wrapper_WaitingPopup").css("display","block");$("#viewShare_popup_iframe").attr("src",itemViewShareIframeUrl+"?itemId="+n)}function ShareviewSubmitCancel(){var n=parent.document.getElementById("viewShare_popup_iframe"),t=n.contentDocument||n.contentWindow.document;t.documentElement.innerHTML="";parent.$("#viewShare_popup,.ViewShare_popup_shadow").css("display","none")}function openViews(){$('body [data-toggle="tooltip"]').tooltip("hide");containSaveFilter&&$("#saved-filter").show();$("#sync_report_viewer").toggleClass("sync_report_viewer");$(".view-heading").toggle();$("#report-views").toggle();var n=document.getElementById("report-views");n.style.display=="block"||n.style.display==""?($("#expand-collapse").css("background-color","transparent"),$("#expand-collapse").css("box-shadow","none"),$("#header-pane").removeClass("no-border"),$(".PopupClose").addClass(".show-view-panel")):($("#header-pane").addClass("no-border"),$(".PopupClose").removeClass(".show-view-panel"));$("#report-view-toogle").toggleClass("report-view-toogle");GetSavedFilter();refreshScroller()}function CloseReportView(){containSaveFilter&&$("#saved-filter").show();$(".view-heading").toggle();$("#report-views").toggle();$(".PopupClose").removeClass(".show-view-panel");$("#close-view .PopupClose").css("display","none");$("#expand-collapse").html('<span class="su su-sidebar-collapse"><\/span>');$("#expand-collapse").attr("data-original-title",window.Server.App.LocalizationContent.ReportViews);$("#report-view-toogle").toggleClass("report-view-toogle")}function filterView(n){var i,r,t;viewReportClickFlag?viewReportClickFlag=!1:(i="",r=parent.document.getElementById("sync_report_viewer"),reportviewerObj=parent.$("#sync_report_viewer").data("boldReportViewer"),t=reportviewerObj.getParameters(),t[0]!=null&&t[0].Name!="undefined"&&SavedViewHeight(),n.reportParameters!=undefined&&(n=n.reportParameters,unsavedFilters(n)));GetSavedFilter();refreshScroller()}function GetSavedFilter(){reportviewerObj=parent.$("#sync_report_viewer").data("boldReportViewer");var n={itemId:reportId,UserId:userId,UserName:userName,itemType:3};$("#report-view-toogle").ejWaitingPopup("show");parent.ajaxPostCall("POST",getSavedViewUrl,n,null,getViewsResult,errorViewResult,null)}function getViewsResult(n){var u,i,f,t;if($("#saved-filter").html(""),u='<div id="save-view-label"><label class="save-filter-head">'+window.Server.App.LocalizationContent.SavedViews+'<\/label><\/div><div id="saved-list" style="display: block"><div class="saved-list-content-div" style="float: left">',i=embedConfig.IsEmbedCode?n.ResponseContent:jQuery.parseJSON(n.Result),i.length>0){for(containSaveFilter=!0,$("#saved-filter").show(),t=0;t<i.length;t++){var r=i[t].ViewId,e=i[t].ViewName,o="";o=i[t].CanDelete&&i[t].CanShare&&!embedConfig.IsEmbedCode?'<div class="saved-opt"><span class="opt" viewid="'+r+'" itemId="'+reportId+'" viewname="'+i[t].ViewName+'"><span viewid="'+r+'" itemId="'+reportId+'" viewname="'+i[t].ViewName+'"  class = "delete su su-delete cursor-pointer" data-toggle="tooltip" data-original-title="'+window.Server.App.LocalizationContent.Delete+'" ><\/span><\/span><span class="opt" viewid="'+r+'" itemId="'+reportId+'" viewname="'+i[t].ViewName+'"><span  viewid="'+r+'" itemId="'+reportId+'" viewname="'+i[t].ViewName+'" class = "share su su-share  cursor-pointer" data-toggle="tooltip" data-original-title="'+window.Server.App.LocalizationContent.Share+'"><\/span><\/span><span class="opt" viewid="'+r+'" itemId="'+reportId+'" viewname="'+i[t].ViewName+'"><span  viewid="'+r+'" itemId="'+reportId+'" viewname="'+i[t].ViewName+'" class ="su su-link View-link-copy cursor-pointer" data-original-title="'+window.Server.App.LocalizationContent.LinkCopy+'" data-toggle="tooltip" data-placement="top" title=""><\/span><\/span><\/div>':i[t].CanDelete?'<div class="saved-opt"><span class="opt" viewid="'+r+'" itemId="'+reportId+'" viewname="'+i[t].ViewName+'"><span viewid="'+r+'" itemId="'+reportId+'" viewname="'+i[t].ViewName+'"  class = "delete su su-delete cursor-pointer" data-toggle="tooltip" data-original-title="'+window.Server.App.LocalizationContent.Delete+'" ><\/span><\/span><span class="opt" viewid="'+r+'" itemId="'+reportId+'" viewname="'+i[t].ViewName+'"><span  viewid="'+r+'" itemId="'+reportId+'" viewname="'+i[t].ViewName+'" class = "su su-link View-link-copy cursor-pointer" data-original-title="'+window.Server.App.LocalizationContent.LinkCopy+'" data-toggle="tooltip" data-placement="top" title=""><\/span><\/span><\/div>':i[t].CanShare&&!embedConfig.IsEmbedCode?'<div class="saved-opt"><span class="opt" viewid="'+r+'" itemId="'+reportId+'" viewname="'+i[t].ViewName+'"><span  viewid="'+r+'" itemId="'+reportId+'" viewname="'+i[t].ViewName+'" class = "share su su-share  cursor-pointer" data-toggle="tooltip" data-original-title="'+window.Server.App.LocalizationContent.Share+'"><\/span><\/span><span class="opt" viewid="'+r+'" itemId="'+reportId+'" viewname="'+i[t].ViewName+'"><span  viewid="'+r+'" itemId="'+reportId+'" viewname="'+i[t].ViewName+'" class = "su su-link View-link-copy cursor-pointer" data-original-title="'+window.Server.App.LocalizationContent.LinkCopy+'" data-toggle="tooltip" data-placement="top" title=""><\/span><\/span><\/div>':'<div class="saved-opt"><span class="opt" viewid="'+r+'" itemId="'+reportId+'" viewname="'+i[t].ViewName+'"><span  viewid="'+r+'" itemId="'+reportId+'" viewname="'+i[t].ViewName+'" class = "su su-link View-link-copy cursor-pointer" data-original-title="'+window.Server.App.LocalizationContent.LinkCopy+'" data-toggle="tooltip" data-placement="top" title=""><\/span><\/span><\/div>';pageurl.indexOf("/embed/")>-1&&(pageurl=pageurl.replace("/embed/","/"));u+='<li class="saved-view" viewid="'+r+'">'+o+'<label class="saved-filter cursor-pointer txt-overflow" viewid="'+r+'" itemId="'+reportId+'"><a class="view-link txt-overflow saved-filter-anchor" href="'+pageurl+"?viewname="+e+'" data-url="'+pageurl+"?viewname="+e+'" target="_blank" data-toggle="tooltip" data-original-title="'+i[t].ViewName+'">'+i[t].ViewName+"<\/a><\/label><\/li>"}if($("#saved-filter").append(u+"<\/div><\/div>"),$("#saved-filter").length==0)for(f=parent.$(".view-link").attr("data-url"),t=0;t<f.length;t++)parent.$(".view-link").eq(t).attr("href",parent.$(".view-link").eq(t).attr("data-url"));else for(f=$(".view-link").attr("data-url"),t=0;t<f.length;t++)$(".view-link").eq(t).attr("href",$(".view-link").eq(t).attr("data-url"));/Safari/.test(navigator.userAgent)&&/Apple Computer/.test(navigator.vendor)&&($(".View-link-copy").removeClass("su su-copy"),$(".View-link-copy").attr("data-original-title",""));$("#report-view-toogle").show();$('[data-toggle="tooltip"]').tooltip()}else containSaveFilter=!1,$("#saved-filter").show(),$("#saved-filter").append(u+'<span class="no-views" href="javascript:void(0);"><span>'+window.Server.App.LocalizationContent.NoSavedViews+"<\/span><\/span><\/div><\/div>"),reportviewerObj=$("#sync_report_viewer").data("boldReportViewer");embedConfig.IsEmbedCode&&$(".su-link").hide();$("#report-view-toogle").ejWaitingPopup("hide");SavedViewHeight();refreshScroller()}function errorViewResult(){SavedViewHeight();refreshScroller()}function SavedViewHeight(){if($("#save-view-label").css("display")!="none"){var n=parent.$("#viewModuleContainer").height()-60;return $("#saved-list").css("height",n),n}}function getFnObj(n){return typeof n=="function"?n:typeof n=="string"&&window[n]?n:void 0}function refreshScroller(){var t="",i,n,r;t=SavedViewHeight();$("#saved-list").length&&($("#saved-list").ejScroller({height:t,width:"100%",scrollerSize:6,buttonSize:0,enableTouchScroll:iframeUrl==parentUrl?parent.$("#is_mobile").val()!="false":$("#is_mobile").val()!="false"}),i=$("#saved-list").ejScroller("instance"),i.model.height=t,i.refresh(),$("#saved-list .e-scrollbar").show(),$("#saved-filter .e-vhandle").length&&(n=$("#saved-filter .e-vhandle"),n.css("display")=="none"||(r=n.height()+29,n.css("height",r))))}function viewReportClick(n){var r,f,t,u,i;for(viewReportClickFlag=!0,r="",$("#current-views-head").show(),reportviewerObj=parent.$("#sync_report_viewer").data("boldReportViewer"),f=reportviewerObj.getParameters(),t=0;t<n.parameters.length;t++)t>=1&&(r+="<hr/>"),u=n.parameters[t].name,r+="<li class='unsaved-filter'><div class='param-name'>"+u+"<\/div><div class='param-value' rel='tooltip' data-placement='left' data-original-title='"+n.parameters[t].labels+"'>"+appliedParametersForUI(n.parameters[t])+"<\/div><\/li>";if(saveQueryString=QueryStringFormation(n.parameters,!0),i="",$("#report-filter-query-name").val()!=undefined&&$("#report-filter-query-value").val()!=undefined&&parameterArray!=null&&valueArray!=null)for(t=0;t<parameterArray.length;t++)i+=parameterArray[t]+"="+valueArray[t]+"&";i=i.slice(0,-1);iframeUrl==parentUrl?parent.window.innerWidth>=1041&&parent.history.pushState!=undefined&&parent.history.pushState(i,"",parent.location.href):window.innerWidth>=1041&&history.pushState!=undefined&&history.pushState(i,"",location.href);$("[rel=tooltip]").tooltip({html:!0});refreshScroller()}function appliedParametersForUI(n){for(var i="",t=0;t<n.values.length;t++)i=viewReportClickFlag?n.labels:n.DataType=="DateTime"?n.values==undefined?n.Value:n.values[t]:n.Labels===null||n.Labels==="undefined"||n.Labels===""?n.Label:n.values[t];return i}function unsavedFilters(n){var r,t;if(reportviewerObj=parent.$("#sync_report_viewer").data("boldReportViewer"),r="",$("#unsaved-filter-head").show(),jQuery.each(n,function(t){if($.isNumeric(t)){t>=1&&(r+="<hr/>");var i=n[t].name==undefined?n[t].Name:n[t].name;r+="<li class='unsaved-filter'><div class='param-name'>"+i+"<\/div><div class='param-value'rel='tooltip' data-placement='left' data-original-title='"+n[t].values[t]+"'>"+appliedParametersForUI(n[t])+"<\/div><\/li>"}}),saveQueryString=initialQueryString=QueryStringFormation(n,isFirstRequest),t="",$("#report-filter-query-name").val()!=undefined&&$("#report-filter-query-value").val()!=undefined&&parameterArray!=null&&valueArray!=null)for(i=0;i<parameterArray.length;i++)t+=parameterArray[i]+"="+valueArray[i]+"&";t=t.slice(0,-1);iframeUrl==parentUrl?isFirstRequest&&parent.window.innerWidth>=1041&&parent.history.pushState!=undefined&&parent.history.pushState(t,"",parent.location.href):isFirstRequest&&window.innerWidth>=1041&&history.pushState!=undefined&&history.pushState(t,"",location.href);isFirstRequest=!1;$("#unsaved-filter-parameter").show();$("#unsaved-filter-parameter").html("");$("#unsaved-filter-parameter").append(r);$("#unsaved-filter,#unsaved-filter-parameter").show();$("#save-lable-section").show();$("[rel=tooltip]").tooltip({html:!0})}function onCloseMessageBox(){$("#messageBox").ejDialog("close")}function onMessageDialogClose(){$("#messageBox").find(".message-content").text("");$(".message-box-btn-holder").html("");$(".message-box-close").html("")}function messageBox(n,t,i,r,u,f,e,o,s){var l,c,h;if($("#messageBox").find(".message-content").text(""),$(".message-box-btn-holder").html(""),$(".message-box-close").html(""),$("#messageBox").find(".message-header").html("<span class='su "+n+"'><\/span> <span class='modal-title' data-toggle='tooltip' data-placement='bottom' data-container='body' title='"+t+"'  >"+t+"<\/h2>"),$("#messageBox").find(".message-content").html(i),r=="error")u!=undefined&&(c=$("<input type='button' class='critical-action-button app-btn-danger pull-right' value='"+window.Server.App.LocalizationContent.Yes+"'><\/input>"),c.bind("click",$.proxy(getFnObj(u),window))),f!=undefined?(l=$("<input type='button' class='secondary-button app-btn-secondary pull-right' value='"+window.Server.App.LocalizationContent.No+"'><\/input>"),l.bind("click",$.proxy(getFnObj(f),window)),h=$('<span class="su su-close"><\/span>'),h.bind("click",$.proxy(getFnObj(f),window))):(l=$("<input type='button' class='secondary-button app-btn-secondary pull-right' value='"+window.Server.App.LocalizationContent.No+"'><\/input>"),h=$('<span class="su su-close"><\/span>'),l.click(function(){onCloseMessageBox()}),h.click(function(){onCloseMessageBox()})),$(".message-box-close").html(h),$(".message-box-btn-holder").append(l,c),$("#messageBox").unbind("keydown");else{u!=undefined?(c=$("<input type='button' class='secondary-button app-btn-secondary' value='"+window.Server.App.LocalizationContent.Ok+"'><\/input>"),c.bind("click",$.proxy(getFnObj(u),window)),h=$('<span class="su su-close"><\/span>'),h.bind("click",$.proxy(getFnObj(u),window))):(c=$("<input type='button' class='secondary-button app-btn-secondary' value='"+window.Server.App.LocalizationContent.Ok+"'><\/input>"),h=$('<span class="su su-close"><\/span>'),c.click(function(){onCloseMessageBox()}),h.click(function(){onCloseMessageBox()}));$(".message-box-close").html(h);$(".message-box-btn-holder").append(c);$("#messageBox").on("keydown",function(n){switch(n.keyCode){case 13:case 27:c.click()}})}$('[data-toggle="tooltip"]').tooltip();$("#messageBox").ejDialog("open");$("#messageBox").focus();setTimeout(function(){var n=$("#messageBox").data("ejDialog");e!=undefined&&n.option("width",e);window.innerWidth>1040&&o==undefined&&(o=$("#messageBox").find(".modal-content").height()+135+"px");n.option("height",o);s!=undefined&&n.option("maxHeight",s)},50)}function QueryStringFormation(n,t){return reportviewerObj=parent.$("#sync_report_viewer").data("boldReportViewer"),parameterArray=[],valueArray=[],jQuery.each(n,function(i){var r,u;$.isNumeric(i)&&(r=n[i].IsMultiValue==undefined?n[i].values:n[i].IsMultiValue?n[i].Values:n[i].Value!=undefined?n[i].Value:n[i].Values,u=n[i].name==undefined?n[i].Name:n[i].name,t&&(parameterArray.push(u),valueArray.push(r)))}),t&&(parent.$("#report-filter-query-name").val(JSON.stringify(parameterArray)),parent.$("#report-filter-query-value").val(JSON.stringify(valueArray))),n.map(n=>JSON.stringify(n,(n,t)=>{if(n!=="dateTimeInfo"&&n!=="labels")return t})).join(",")}function SuccessAlert(n,t,i){window.top.$("#success-alert").css("display","table");window.top.$("#message-header").html(n);window.top.$("#message-content").html(t);setTimeout(function(){window.top.$("#success-alert").fadeOut()},i)}function WarningAlert(n,t,i){parent.$("#warning-alert").css("display","table");parent.$("#warning-alert #message-header").html(n);parent.$(" #warning-alert #message-content").html(t);i!=null&&i!=""&&setTimeout(function(){parent.$("#warning-alert").fadeOut()},i);$(document).on("click",".close-div",function(){parent.$("#warning-alert").fadeOut()})}function isUrlHasView(){const n=new URLSearchParams(window.location.search);return n.has("viewname")||n.has("viewid")?!0:!1}function getUrlVars(n){var t={},i=n.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(n,i,r){t[i]=r});return t}function extractXSRFTokenFromCookie(){var n=parent.document.cookie.split("; ").find(n=>n.startsWith("XSRF-TOKEN="));return n?n.split("=")[1]:null}function setXSRFRequestHeader(n){n.setRequestHeader("X-XSRF-TOKEN",extractXSRFTokenFromCookie())}function decodeHtmlAsString(n){var t=document.createElement("textarea");return t.innerHTML=n,t.value}var SettingsScopes={All:0,SiteSettings:1,ReportSettings:2,EmbedSettings:3,Connector:4,Email:5,Accounts:6,UserDirectorySettings:7,AuthenticationSettings:8,NotificationSettings:9,ManageLicense:10,SupportSettings:11,Subscription:12,Payments:13,CORSPolicySettings:14,Security:15},PermissionEntities={None:0,AllReports:1,ReportsInCategory:2,SpecificReports:3,AllCategories:4,SpecificCategory:5,AllDataSources:6,SpecificDataSource:7,AllFiles:8,SpecificFile:9,AllSchedules:10,SpecificSchedule:11,AllDashboards:12,DashboardsInCategory:13,SpecificDashboard:14,AllWidgets:15,SpecificWidget:16,AllDatasets:17,SpecificDataset:18,SpecificItemView:19,AllItemViews:20,SpecificSlideshow:21,AllSlideshow:22,SpecificSettings:23,AllSettings:24,SpecificGroup:25,UsersandGroups:26,SpecificPermissions:27,AllPermissions:28,AllGroups:29},ReportLayoutView={Card:1,Grid:2},parentUrl,iframeRefUrl,iframeUrl,filtered_Values,reportviewerObj,deletedViewId,containsFilter,viewReportClickFlag,sessionData,isSession;$(document).ready(function(){var n,t;$("#permission_delete_confirmation").ejDialog({width:window.innerWidth>410?"400px":window.innerWidth-10,showOnInit:!1,allowDraggable:!1,enableResize:!1,height:"187px",showHeader:!1,title:window.Server.App.LocalizationContent.Deleteuser,enableModal:!0,close:"onPermissionDeleteDialogClose",closeOnEscape:!0,open:"onPermissionDeleteDialogOpen"});$("#messageBox").ejDialog({width:window.innerWidth>460?"450px":window.innerWidth-10,showOnInit:!1,allowDraggable:!0,enableResize:!1,height:"auto",showHeader:!1,enableModal:!0,close:"onMessageDialogClose"});n=createLoader("permission_delete_confirmation_wrapper");$("#permission_delete_confirmation_wrapper").ejWaitingPopup({template:$("#"+n)});t=createLoader("MasterContainer");$("#MasterContainer").ejWaitingPopup({template:$("#"+t)});$(document).on("click","#SubscribersPanel .i-selected-cancel",function(){var n=$(this).parents(".SelectedShareItems").attr("id"),t=$(this).parents(".SelectedShareItems").attr("data-searchtype");t=="userSearch"?(currentElementIndex=$("#UserSearch").find("[value='"+n+"']").index(),$("#userSearch_container .bootstrap-select li").filter("[data-original-index='"+currentElementIndex+"']").find("a").click()):t=="groupSearch"&&(currentElementIndex=$("#GroupSearch").find("[value='"+n+"']").index(),$("#groupSearch_container .bootstrap-select li").filter("[data-original-index='"+currentElementIndex+"']").find("a").click())});$("#schedule_Submit").on("click",function(){var t=$("#UserSearch").val(),i=$("#GroupSearch").val(),r=$("#hiddenItemId").val(),n=$("#IsPublic").data("ejCheckBox").model.checked,u=$("#isPublicHiddenValue").val().toLowerCase();t!=null||i!=null||n==!0?($("#validationMessage").css("display","none"),$.ajax({type:"POST",url:addItemViewPermissionUrl,data:{shareList:JSON.stringify({UserList:t,GroupList:i,itemViewId:r,IsPublic:n})},beforeSend:function(){$("#MasterContainer").ejWaitingPopup("show")},success:function(){$("#MasterContainer").ejWaitingPopup("hide");messageBox("su-share",window.Server.App.LocalizationContent.ShareView,window.Server.App.LocalizationContent.ShareViewSuccess,"success",function(){$("#isPublicHiddenValue").val(n);refreshUserGroupList();var t=$("#UserGrid").data("ejGrid"),i=$("#GroupGrid").data("ejGrid"),r=$(".ListItems.selected").attr("data-grid");t.refreshContent();i.refreshContent();r.toLowerCase()=="usergrid"?$("#GroupGrid_WaitingPopup").hide():$("#UserGrid_WaitingPopup").hide();onCloseMessageBox()})}})):$("#validationMessage").css("display","block")});$(".ListItems").click(function(){var n=$(this).attr("data-grid");$(".ListItems").removeClass("selected");$(".ListItems[data-grid='"+n+"']").addClass("selected");$(".itemGrid").removeClass("active");$("#"+n).parent(".itemGrid").addClass("active");$(".ListItems").parent("li").removeClass("active");$(".selected").parent("li").addClass("active")});$(".scheduleEditPopup").on("click",function(){var n=parent.document.getElementById("viewShare_popup_iframe"),t=n.contentDocument||n.contentWindow.document;t.documentElement.innerHTML="";parent.$("#viewShare_popup,.ViewShare_popup_shadow").css("display","none")})});var containSaveFilter=!1,SaveFilterName="",CanUpdate=!1,initialQueryString="",saveQueryString="",parameterArray=[],valueArray=[],isFirstRequest=!0,parentRefUrl=window.location!=window.parent.location?"":document.location.href.replace(document.location.pathname+document.location.search,"");parentUrl=parentRefUrl==""?"":parentRefUrl.match(/:\/\/(.[^/]+)/)[1];iframeRefUrl=window.location.href;iframeUrl=iframeRefUrl.match(/:\/\/(.[^/]+)/)[1];$(document).ready(function(){var n=createLoader("report-view-toogle");$("#report-view-toogle").ejWaitingPopup({template:$("#"+n)});parent.initializeDeleteDialog();$('[data-toggle="tooltip"]').tooltip()});filtered_Values="";reportviewerObj=null;$(function(){$("#expand-collapse").html('<span class="su su-sidebar-collapse"><\/span>');$('[data-toggle="tooltip"]').tooltip()});$(document).on("click","#clear",function(){reportviewerObj=$("#sync_report_viewer").data("boldReportViewer");reportviewerObj.reload()});$(document).on("click",".view",function(){var n=$(this).attr("viewid");window.open(window.location.pathname+"?viewid="+n,"_blank")});$(document).on("click",".share",function(){var n=$(this).attr("viewid");$("#report-view-toogle").css("z-index","999");$.ajax({type:"POST",url:itemViewShareIframeUrl,data:{itemViewId:n,itemId:reportId},success:function(n){n.itemViewDetail!=null&&n.itemDetail!=null&&(parent.$("#sharePermissionPopup_iframe").show(),parent.document.getElementById("sharePermissionPopup_iframe").contentWindow.shareDashboardPermission(n.itemViewDetail,n.itemDetail))}})});$(document).on("click",".clear",function(){$("#filter_name").val("");reportviewerObj=$("#sync_report_viewer").data("boldReportViewer");reportviewerObj.reload();GetSavedFilter();$("#view-name").show();$("#save-section").hide();$("#unsaved-filter").show();$("#save-lable-section").show();$("#update-view").removeClass("pointer-events");$("#update-view").css("opacity",1)});$(document).on("click","#clear-txt",function(){$("#filter_name").val("");$("#save-lable-section").show();$("#save-section").hide()});deletedViewId="";$(document).on("click",".delete",function(n){var t=n.target.attributes.viewid.value,i=n.target.attributes.viewname.value;parent.onDeleteViewDialogOpen();parent.onDeleteViewClicked(t,i)});$(document).on("click",".View-link-copy",function(n){var u=ej.browserInfo(),i,t,r;$(n.target).parents().closest("li").length&&(i=$(n.target).parents().closest("li"),i.find(".view-link").length&&(t=document.createElement("textarea"),t.id="copyTextArea",t.innerText=window.location.origin+i.find(".view-link").attr("href"),document.querySelector("body").appendChild(t),r=document.getElementById("copyTextArea"),r.select(),/Safari/.test(navigator.userAgent)&&/Apple Computer/.test(navigator.vendor)?($(this).removeClass("su su-copy"),$(this).attr("data-original-title","")):(document.execCommand("copy"),$(this).attr("data-original-title",window.Server.App.LocalizationContent.Copysuccess).tooltip("show"),setTimeout(function(){$(".View-link-copy").attr("data-original-title",window.Server.App.LocalizationContent.LinkCopy);$(".View-link-copy").tooltip()},3e3)),document.querySelector("body").removeChild(t)))});containsFilter=!1;viewReportClickFlag=!1;sessionData=!1;isSession=!1;$(document).ready(function(){function n(){location.reload()}function t(){location.reload()}function i(){var n,t;$(".e-btn-icon.e-icon-dlg-close.e-icons").is(":visible")&&(n=$(".e-btn-icon.e-icon-dlg-close.e-icons:visible"),$.each(n,function(n,t){var i=$(t).parents(".e-dialog").attr("id"),r;(i!=undefined||i!=null)&&(r=document.getElementById(i).ej2_instances,r[0].hide())}));$(".popup-close").is(":visible")&&(t=$(".popup-close:visible"),$.each(t,function(n,t){var i=$(t).parents(".e-dialog").attr("id");(i!=undefined||i!=null)&&(eDialog=$("#"+i).data("ejDialog"),eDialog.close())}))}if(typeof canCheckSession!="undefined"&&(isSession=Boolean(canCheckSession)),isSession){setTimeout(function(){r()},18e4);function r(){$.ajax({type:"GET",url:isSessionActiveUrl,success:function(n){n.isactive?setTimeout(function(){r()},18e4):(i(),u())}})}function u(){var u,f,o,i,r,e,s,h;(typeof isViewerV2Enabled=="undefined"||isViewerV2Enabled)&&(typeof isDesignerV2Enabled=="undefined"||isDesignerV2Enabled)?(f="",o='<span class ="dialog-header-title">'+window.Server.App.LocalizationContent.SessionHeader+"<\/span>",sessionData||(i=document.createElement("div"),i.setAttribute("id","session-time-dialog"),r=document.getElementById("content-area"),r==null&&(e=document.createElement("div"),e.setAttribute("id","content-area"),document.body.appendChild(e),r=document.getElementById("content-area")),f=ejs.popups,r.appendChild(i),s=window.Server.App.LocalizationContent.SessionContent,h=new f.Dialog({showOnInit:!1,allowDraggable:!1,enableResize:!1,width:window.innerWidth>500?"470px":window.innerWidth-10,height:"auto",showHeader:!1,isModal:!0,enableModal:!0,closeOnEscape:!0,header:o,close:"closeDialog",showCloseIcon:!0,content:s,buttons:[{click:function(){n()},buttonModel:{cssClass:"app-btn-secondary",content:window.Server.App.LocalizationContent.OKButton}}],close:t}),h.appendTo(i),sessionData=!0)):(u=$("#messageBox").data("ejDialog"),u==undefined&&($("#messageBox").ejDialog({width:parent.window.innerWidth>460?"450px":parent.window.innerWidth-10,height:"150px",showOnInit:!1,allowDraggable:!0,enableResize:!1,showHeader:!1,enableModal:!0,close:"onMessageDialogClose"}),u=$("#messageBox").data("ejDialog")),messageBox("",window.Server.App.LocalizationContent.SessionHeader,window.Server.App.LocalizationContent.SessionContent,"success",n))}}});$.ajaxSetup({beforeSend:function(n){setXSRFRequestHeader(n)}})