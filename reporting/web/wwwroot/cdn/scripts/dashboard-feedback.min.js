/*!
*  filename: ej.core.min.js
*  version : 14.4.0.15
*  Copyright Syncfusion Inc. 2001 - 2016. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e()}(function(){window.ej=window.Syncfusion=window.Syncfusion||{},function(e,t,i){"use strict";var o,n,r,s;t.version="14.4.0.15",t.consts={NamespaceJoin:"-"},t.TextAlign={Center:"center",Justify:"justify",Left:"left",Right:"right"},t.Orientation={Horizontal:"horizontal",Vertical:"vertical"},t.serverTimezoneOffset=0,t.persistStateVersion=null,Object.prototype.hasOwnProperty||(Object.prototype.hasOwnProperty=function(e,t){return e[t]!==i}),String.format=function(){for(var e=arguments[0],t=0;t<arguments.length-1;t++)e=e.replace(new RegExp("\\{"+t+"\\}","gm"),arguments[t+1]);return e.replace(/\{[0-9]\}/g,"")},jQuery.uaMatch=function(e){e=e.toLowerCase();var t=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];return{browser:t[1]||"",version:t[2]||"0"}},t.defineClass=function(e,o,n,r){if(!e||!n)return i;for(var s=e.split("."),l=window,a=0;a<s.length-1;a++)t.isNullOrUndefined(l[s[a]])&&(l[s[a]]={}),l=l[s[a]];return(r||t.isNullOrUndefined(l[s[a]]))&&(o="function"==typeof o?o:function(){},l[s[a]]=o,l[s[a]].prototype=n),l[s[a]]},t.util={getNameSpace:function(e){var i=e.toLowerCase().split(".");return"ej"===i[0]&&(i[0]="e"),i.join(t.consts.NamespaceJoin)},getObject:function(e,o){var n,r,s;if(!o)return i;for(n=o,r=e.split("."),s=0;s<r.length&&!t.util.isNullOrUndefined(n);s++)n=n[r[s]];return n},createObject:function(e,o,n){for(var r,s=e.split("."),l=n||window,a=l,h=s.length,d=0;d<h;d++)r=s[d],d+1==h?a[r]=o===i?{}:o:t.isNullOrUndefined(a[r])&&(a[r]={}),a=a[r];return l},isNullOrUndefined:function(e){return e===i||null===e},print:function(i,o){var n,r,s=t.buildTag("div"),l=i.clone();s.append(l),o||(o=window.open("","print","height=452,width=1024,tabbar=no")),o.document.write("<!DOCTYPE html>"),n=e("head").find("link").add("style"),"msie"===t.browserInfo().name?(r="",n.each(function(t,i){"LINK"==i.tagName&&e(i).attr("href",i.href),r+=i.outerHTML}),o.document.write("<html><head></head><body>"+r+s[0].innerHTML+"</body></html>")):(r="",o.document.write("<html><head>"),n.each(function(t,i){"LINK"==i.tagName&&e(i).attr("href",i.href),r+=i.outerHTML}),o.document.writeln(r+"</head><body>"),o.document.writeln(s[0].innerHTML+"</body></html>")),o.document.close(),o.focus(),setTimeout(function(){t.isNullOrUndefined(o.window)||(o.print(),setTimeout(function(){o.close()},1e3))},1e3)},ieClearRemover:function(t){var i=e(t).height();t.style.paddingTop=parseFloat(i/2)+"px",t.style.paddingBottom=parseFloat(i/2)+"px",t.style.height="1px",t.style.lineHeight="1px"},sendAjaxRequest:function(t){e.ajax({type:t.type,cache:t.cache,url:t.url,dataType:t.dataType,data:t.data,contentType:t.contentType,async:t.async,success:t.successHandler,error:t.errorHandler,beforeSend:t.beforeSendHandler,complete:t.completeHandler})},buildTag:function(t,o,n,r){var s,l=/^[a-z]*[0-9a-z]+/gi.exec(t)[0],a=/#([_a-z]+[-_0-9a-z]+)/gi.exec(t);return a=a?a[a.length-1]:i,s=(s=/\.([a-z]+[-_0-9a-z ]+)/gi.exec(t))?s[s.length-1]:i,e(document.createElement(l)).attr(a?{id:a}:{}).addClass(s||"").css(n||{}).attr(r||{}).html(o||"")},_preventDefaultException:function(e,t){if(e)for(var i in t)if(t[i].test(e[i]))return!0;return!1},getMaxZindex:function(){var t=1;return((t=Math.max.apply(null,e.map(e("body *"),function(t){if("absolute"==e(t).css("position")||"fixed"==e(t).css("position"))return parseInt(e(t).css("z-index"))||1})))==i||null==t)&&(t=1),t},blockDefaultActions:function(e){e.cancelBubble=!0,e.returnValue=!1,e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation()},getDimension:function(t,i){var o,n,r,s=e(t).parents().andSelf().filter(":hidden");return s&&(n={visibility:"hidden",display:"block"},r=[],s.each(function(){var e={};for(var t in n)e[t]=this.style[t],this.style[t]=n[t];r.push(e)}),o=/(outer)/g.test(i)?e(t)[i](!0):e(t)[i](),s.each(function(e){var t=r[e];for(var i in n)this.style[i]=t[i]})),o},transitionEndEvent:function(){return{"":"transitionend",webkit:"webkitTransitionEnd",Moz:"transitionend",O:"otransitionend",ms:"MSTransitionEnd"}[t.userAgent()]},animationEndEvent:function(){return{"":"animationend",webkit:"webkitAnimationEnd",Moz:"animationend",O:"webkitAnimationEnd",ms:"animationend"}[t.userAgent()]},startEvent:function(){return t.isTouchDevice()||e.support.hasPointer?"touchstart":"mousedown"},endEvent:function(){return t.isTouchDevice()||e.support.hasPointer?"touchend":"mouseup"},moveEvent:function(){return t.isTouchDevice()||e.support.hasPointer?e.support.hasPointer&&!t.isMobile()?"ejtouchmove":"touchmove":"mousemove"},cancelEvent:function(){return t.isTouchDevice()||e.support.hasPointer?"touchcancel":"mousecancel"},tapEvent:function(){return t.isTouchDevice()||e.support.hasPointer?"tap":"click"},tapHoldEvent:function(){return t.isTouchDevice()||e.support.hasPointer?"taphold":"click"},isDevice:function(){return t.getBooleanVal(e("head"),"data-ej-forceset",!1)?t.getBooleanVal(e("head"),"data-ej-device",this._device()):this._device()},isPortrait:function(){var e=document.documentElement;return e&&e.clientWidth/e.clientHeight<1.1},isLowerResolution:function(){return window.innerWidth<=640&&t.isPortrait()&&t.isDevice()||window.innerWidth<=800&&!t.isDevice()||window.innerWidth<=800&&!t.isPortrait()&&t.isWindows()&&t.isDevice()||t.isMobile()},isIOSWebView:function(){return/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(navigator.userAgent)},isAndroidWebView:function(){return!("undefined"==typeof Android)},isWindowsWebView:function(){return-1!=location.href.indexOf("x-wmapp")},_device:function(){return/Android|BlackBerry|iPhone|iPad|iPod|IEMobile|kindle|windows\sce|palm|smartphone|iemobile|mobile|pad|xoom|sch-i800|playbook/i.test(navigator.userAgent.toLowerCase())},isMobile:function(){return/iphone|ipod|android|blackberry|opera|mini|windows\sce|palm|smartphone|iemobile/i.test(navigator.userAgent.toLowerCase())&&/mobile/i.test(navigator.userAgent.toLowerCase())||!0===t.getBooleanVal(e("head"),"data-ej-mobile",!1)},isTablet:function(){return/ipad|xoom|sch-i800|playbook|tablet|kindle/i.test(navigator.userAgent.toLowerCase())||!0===t.getBooleanVal(e("head"),"data-ej-tablet",!1)||!t.isMobile()&&t.isDevice()},isTouchDevice:function(){return("ontouchstart"in window||window.navigator.msPointerEnabled&&t.isMobile())&&this.isDevice()},getClearString:function(t){return e.trim(t.replace(/\s+/g," ").replace(/(\r\n|\n|\r)/gm,"").replace(new RegExp(">[\n\t ]+<","g"),"><"))},getBooleanVal:function(t,i,o){var n=e(t).attr(i);return null!=n?"true"==n.toLowerCase():o},_getSkewClass:function(e,t,i){var o=e.width(),n=e.height(),r=e.offset().left,s=e.offset().left+o,l=e.offset().top,a=e.offset().top+n,h=.3*o,d=.3*n;return t<r+h&&i<l+d?"e-m-skew-topleft":t>s-h&&i<l+d?"e-m-skew-topright":t>s-h&&i>a-d?"e-m-skew-bottomright":t<r+h&&i>a-d?"e-m-skew-bottomleft":t>r+h&&i<l+d&&t<s-h?"e-m-skew-top":t<r+h?"e-m-skew-left":t>s-h?"e-m-skew-right":i>a-d?"e-m-skew-bottom":"e-m-skew-center"},_removeSkewClass:function(t){e(t).removeClass("e-m-skew-top e-m-skew-bottom e-m-skew-left e-m-skew-right e-m-skew-topleft e-m-skew-topright e-m-skew-bottomleft e-m-skew-bottomright e-m-skew-center e-skew-top e-skew-bottom e-skew-left e-skew-right e-skew-topleft e-skew-topright e-skew-bottomleft e-skew-bottomright e-skew-center")},_getObjectKeys:function(e){var t,i=[];if(e=Object.prototype.toString.call(e)===Object.prototype.toString()?e:{},!Object.keys){for(t in e)e.hasOwnProperty(t)&&i.push(t);return i}if(Object.keys)return Object.keys(e)},_touchStartPoints:function(e,t){if(e){var i=e.touches?e.touches[0]:e;t._distX=0,t._distY=0,t._moved=!1,t._pointX=i.pageX,t._pointY=i.pageY}},_isTouchMoved:function(e,t){if(e){var i,o,n=e.touches?e.touches[0]:e,r=n.pageX-t._pointX,s=n.pageY-t._pointY;Date.now();return t._pointX=n.pageX,t._pointY=n.pageY,t._distX+=r,t._distY+=s,i=Math.abs(t._distX),o=Math.abs(t._distY),!(i<5&&o<5)}},listenEvents:function(e,i,o,n,r,s){for(var l=0;l<e.length;l++)t.listenTouchEvent(e[l],i[l],o[l],n,r,s)},listenTouchEvent:function(i,o,n,r,s,l){for(var a,h=r?"removeEventListener":"addEventListener",d=r?"off":"on",c=e(i),u=0;u<c.length;u++)switch(a=c[u],o){case"touchstart":t._bindEvent(a,h,o,n,"mousedown","MSPointerDown","pointerdown",l);break;case"touchmove":t._bindEvent(a,h,o,n,"mousemove","MSPointerMove","pointermove",l);break;case"touchend":t._bindEvent(a,h,o,n,"mouseup","MSPointerUp","pointerup",l);break;case"touchcancel":t._bindEvent(a,h,o,n,"mousecancel","MSPointerCancel","pointercancel",l);break;case"tap":case"taphold":case"ejtouchmove":case"click":e(a)[d](o,n);break;default:"msie"==t.browserInfo().name&&t.browserInfo().version<9?s._on(e(a),o,n):a[h](o,n,!0)}},_bindEvent:function(t,i,o,n,r,s,l){e.support.hasPointer?t[i](window.navigator.pointerEnabled?l:s,n,!0):t[i](o,n,!0)},_browser:function(){return/webkit/i.test(navigator.appVersion)?"webkit":/firefox/i.test(navigator.userAgent)?"Moz":/trident/i.test(navigator.userAgent)?"ms":"opera"in window?"O":""},styles:document.createElement("div").style,userAgent:function(){for(var e="webkitT,t,MozT,msT,OT".split(","),i=0,o=e.length;i<o;i++)if(e[i]+"ransform"in t.styles)return e[i].substr(0,e[i].length-1);return!1},addPrefix:function(e){return""===t.userAgent()?e:(e=e.charAt(0).toUpperCase()+e.substr(1),t.userAgent()+e)},destroyWidgets:function(t){e(t).find("[data-role *= ejm]").each(function(t,i){var o=e(i),n=o.data("ejWidgets");n&&o[n]("destroy")})},getAttrVal:function(t,i,o){var n=e(t).attr(i);return null!=n?n:o},getOffset:function(t){var i,o={},n=t.offset()||{left:0,top:0};return e.extend(!0,o,n),"static"!=e("body").css("position")&&(i=e("body").offset(),o.left-=i.left,o.top-=i.top),o},getZindexPartial:function(i,o){var n,r,s;if(!t.isNullOrUndefined(i)&&i.length>0)return n=i.parents(),r=e("body").children(),!t.isNullOrUndefined(i)&&i.length>0&&r.splice(r.index(o),1),e(r).each(function(e,t){n.push(t)}),s=Math.max.apply(s,e.map(n,function(t){if("static"!=e(t).css("position"))return parseInt(e(t).css("z-index"))||1})),!s||s<1e4?s=1e4:s+=1,s},isValidAttr:function(t,i){var o;return void 0!==(t=e(t)[0])[i]||(o=!1,e.each(t,function(e){if(e.toLowerCase()==i.toLowerCase())return o=!0,!1}),o)}},e.extend(t,t.util),t.widgetBase={droppables:{default:[]},resizables:{default:[]},_renderEjTemplate:function(i,o,n,r){var s=null;return("object"==typeof i||i.startsWith("#")||i.startsWith("."))&&(s=e(i).attr("type")),s&&(s=s.toLowerCase(),t.template[s])?t.template[s](this,i,o,n,r):t.template.render(this,i,o,n,r)},destroy:function(){var i,o,n,r;if(!this._trigger("destroy")){this.model.enablePersistence&&(this.persistState(),e(window).off("unload",this._persistHandler));try{this._destroy()}catch(e){}for(i=this.element.data("ejWidgets")||[],r=0;r<i.length;r++)i[r]==this.pluginName&&i.splice(r,1);for(i.length||this.element.removeData("ejWidgets");this._events&&(n=[],o=this._events.pop());){for(r=0;r<o[1].length;r++)e.isPlainObject(o[1][r])||n.push(o[1][r]);e.fn.off.apply(o[0],n)}this._events=null,this.element.removeClass(t.util.getNameSpace(this.sfType)).removeClass("e-js").removeData(this.pluginName),this.element=null,this.model=null}},_on:function(i){this._events||(this._events=[]);for(var o=[].splice.call(arguments,1,arguments.length-1),n={},r=o.length;n&&"function"!=typeof n;)n=o[--r];return o[r]=t.proxy(o[r],this),this._events.push([i,o,n,o[r]]),e.fn.on.apply(i,o),this},_off:function(t,i,o,n){var r,s,l,a,h=this._events;if(!h||!h.length)return this;for("function"==typeof o&&(r=n,n=o,o=r),s=i.match(/\S+/g)||[""],l=0;l<h.length;l++)if((a=h[l])[0].length&&(!n||a[2]===n)&&(a[1][0]===i||s[0])&&(!o||a[1][1]===o)&&e.inArray(t[0],a[0])>-1){e.fn.off.apply(t,n?[i,o,a[3]]:[i,o]),h.splice(l,1);break}return this},_trigger:function(i,o){var n,r,s,l,a=null,h={};return e.extend(h,o),i in this.model&&(a=this.model[i]),a&&("string"==typeof a&&(a=t.util.getObject(a,window)),e.isFunction(a)&&(r=t.event(i,this.model,o),n=a.call(this,r),(s=this.model._applyScope)&&s.call(),o&&e.extend(o,r),r.cancel||!t.isNullOrUndefined(n)))?!1===n||r.cancel:(l=Boolean(o),(o=o||{}).originalEventType=i,o.type=this.pluginName+i,r=e.Event(o.type,t.event(o.type,this.model,o)),this.element.trigger(r),l&&e.extend(o,r),t.isOnWebForms&&0==r.cancel&&this.model.serverEvents&&this.model.serverEvents.length&&t.raiseWebFormsServerEvents(i,o,h),r.cancel)},setModel:function(t,i){var n,r,s,l;if(!this._trigger("modelChange",{changes:t})){for(n in t){if(!i){if(this.model[n]===t[n]){delete t[n];continue}if(e.isPlainObject(t[n])&&(o(this.model[n],t[n]),e.isEmptyObject(t[n]))){delete t[n];continue}}if(this.dataTypes&&!0!==(r=this._isValidModelValue(n,this.dataTypes,t)))throw"setModel - Invalid input for property :"+n+" - "+r;this.model.notifyOnEachPropertyChanges&&this.model[n]!==t[n]&&(s={oldValue:this.model[n],newValue:t[n]},t[n]=this._trigger(n+"Change",s)?this.model[n]:s.newValue)}e.isEmptyObject(t)||(this._setFirst?((l=t.dataSource)&&delete t.dataSource,e.extend(!0,this.model,t),l&&(this.model.dataSource=l instanceof Array?l.slice():l,t.dataSource=this.model.dataSource),this._setModel&&this._setModel(t)):this._setModel&&!1===this._setModel(t)||e.extend(!0,this.model,t),"enablePersistence"in t&&this._setState(t.enablePersistence))}},option:function(o,n,r){if(!o)return this.model;if(e.isPlainObject(o))return this.setModel(o,r);if("string"==typeof o){o=o.replace(/^model\./,"");var s=t.getObject(o,this.model);if(n===i&&!r)return s;if("enablePersistence"===o)return this._setState(n);if(r&&n===t.extensions.modelGUID)return this._setModel(t.createObject(o,t.getObject(o,this.model),{}));if(r||t.getObject(o,this.model)!==n)return this.setModel(t.createObject(o,n,{}),r)}return i},_isValidModelValue:function(e,t,i){var o,n,r,s=t[e],l=i[e];if(!s)return!0;if("string"==typeof s){if("enum"==s&&(i[e]=l?l.toString().toLowerCase():l,s="string"),"array"===s){if("[object Array]"===Object.prototype.toString.call(l))return!0}else if("data"===s||"parent"===s||typeof l===s)return!0;return"Expected type - "+s}if(l instanceof Array){for(n=0;n<l.length;n++)if(!0!==(o=this._isValidModelValue(e,t,l[n])))return" ["+n+"] - "+o;return!0}for(r in l)if(!0!==(o=this._isValidModelValue(r,s,l)))return r+" : "+o;return!0},_returnFn:function(e,t){-1!=t.indexOf(".")?this._returnFn(e[t.split(".")[0]],t.split(".").slice(1).join(".")):e[t]=e[t].call(e.propName)},stringify:function(e){for(var i,o=this.observables,n=0;n<o.length;n++)i=t.getObject(o[n],e),t.isNullOrUndefined(i)||"function"!=typeof i||this._returnFn(e,o[n]);return JSON.stringify(e)},_setState:function(i){!0===i?(this._persistHandler=t.proxy(this.persistState,this),e(window).on("unload",this._persistHandler)):(this.deleteState(),e(window).off("unload",this._persistHandler))},_removeProp:function(e,i){t.isNullOrUndefined(e)||(-1!=i.indexOf(".")?this._removeProp(e[i.split(".")[0]],i.split(".").slice(1).join(".")):delete e[i])},persistState:function(){var e,i;if(this._ignoreOnPersist){for(e=l({},this.model),i=0;i<this._ignoreOnPersist.length;i++)this._removeProp(e,this._ignoreOnPersist[i]);e.ignoreOnPersist=this._ignoreOnPersist}else if(this._addToPersist){for(e={},i=0;i<this._addToPersist.length;i++)t.createObject(this._addToPersist[i],t.getObject(this._addToPersist[i],this.model),e);e.addToPersist=this._addToPersist}else e=l({},this.model);this._persistState&&(e.customPersists={},this._persistState(e.customPersists)),window.localStorage?(t.isNullOrUndefined(t.persistStateVersion)||null!=window.localStorage.getItem("persistKey")||window.localStorage.setItem("persistKey",t.persistStateVersion),window.localStorage.setItem("$ej$"+this.pluginName+this._id,JSON.stringify(e))):document.cookie&&(t.isNullOrUndefined(t.persistStateVersion)||null!=t.cookie.get("persistKey")||t.cookie.set("persistKey",t.persistStateVersion),t.cookie.set("$ej$"+this.pluginName+this._id,e))},deleteState:function(){window.localStorage?window.localStorage.removeItem("$ej$"+this.pluginName+this._id):document.cookie&&t.cookie.set("$ej$"+this.pluginName+this._id,model,new Date)},restoreState:function(i){var o,n,r=null;if(window.localStorage?r=window.localStorage.getItem("$ej$"+this.pluginName+this._id):document.cookie&&(r=t.cookie.get("$ej$"+this.pluginName+this._id)),r&&(o=JSON.parse(r),this._restoreState&&(this._restoreState(o.customPersists),delete o.customPersists),!1===t.isNullOrUndefined(o)&&(t.isNullOrUndefined(o.ignoreOnPersist)?t.isNullOrUndefined(o.addToPersist)||(this._addToPersist=o.addToPersist,delete o.addToPersist):(this._ignoreOnPersist=o.ignoreOnPersist,delete o.ignoreOnPersist))),t.isNullOrUndefined(o)||t.isNullOrUndefined(this._ignoreOnPersist))this.model=e.extend(!0,this.model,o);else{for(n in this._ignoreOnPersist)-1!==this._ignoreOnPersist[n].indexOf(".")?t.createObject(this._ignoreOnPersist[n],t.getObject(this._ignoreOnPersist[n],this.model),o):o[this._ignoreOnPersist[n]]=this.model[this._ignoreOnPersist[n]];this.model=o}!i&&r&&this._setModel&&this._setModel(this.model)},ignoreOnPersist:function(e){var t,o,n=[];if("object"==typeof e?n=e:"string"==typeof e&&n.push(e),this._addToPersist===i)for(this._ignoreOnPersist=this._ignoreOnPersist||[],t=0;t<n.length;t++)this._ignoreOnPersist.push(n[t]);else for(t=0;t<n.length;t++)o=this._addToPersist.indexOf(n[t]),this._addToPersist.splice(o,1)},addToPersist:function(t){var o,n,r=[];if("object"==typeof t?r=t:"string"==typeof t&&r.push(t),this._addToPersist===i)for(this._ignoreOnPersist=this._ignoreOnPersist||[],n=0;n<r.length;n++)o=this._ignoreOnPersist.indexOf(r[n]),this._ignoreOnPersist.splice(o,1);else for(n=0;n<r.length;n++)-1===e.inArray(r[n],this._addToPersist)&&this._addToPersist.push(r[n])},formatting:function(i,o,n){var r,s,l,a,h,d,c,u;if(i=i.replace(/%280/g,'"').replace(/&lt;/g,"<").replace(/&gt;/g,">"),n=t.preferredCulture(n)?n:"en-US",r=i,s=i.split("{0:"),h=i.split("}"),l=s[0],a=h[1],"string"==typeof o&&e.isNumeric(o)&&(o=Number(o)),-1!=i.indexOf("{0:"))return null!=(d=new RegExp("\\{0(:([^\\}]+))?\\}","gm").exec(i))&&null!=o?null!=l&&null!=a?l+t.format(o,d[2],n)+a:t.format(o,d[2],n):null!=o?o:"";if(r.startsWith("{")&&!r.startsWith("{0:")){var p=r.split(""),f=(o=(o||"")+"").split(""),m=/[0aA\*CN<>\?]/gm;for(c=0,u=0;c<p.length;c++)p[c]=m.test(p[c])?"{"+u+++"}":p[c];return String.format.apply(String,[p.join("")].concat(f)).replace("{","").replace("}","")}return null!=this.data&&null==this.data.Value?(e.each(this.data,function(e,t){r=r.replace(new RegExp("\\{"+e+"\\}","gm"),t)}),r):this.data.Value}},t.WidgetBase=function(){},o=function(t,i){for(var n in t)t[n]===i[n]&&delete i[n],e.isPlainObject(i[n])&&e.isPlainObject(t[n])&&o(t[n],i[n])},t.widget=function(o,r,h){var c,u,p;if("object"!=typeof o)p=h._rootCSS||t.getNameSpace(r),h=t.defineClass(r,function(i,s){var d,c,u,f,m,g,v,b,_,y;if(this.sfType=r,this.pluginName=o,this.instance=a,t.isNullOrUndefined(this._setFirst)&&(this._setFirst=!0),this["ob.values"]={},e.extend(this,t.widgetBase),this.dataTypes)for(d in s)if(!0!==(c=this._isValidModelValue(d,this.dataTypes,s)))throw"setModel - Invalid input for property :"+d+" - "+c;for((u=i.data("ejWidgets")||[]).push(o),i.data("ejWidgets",u),m=0;t.widget.observables&&this.observables&&m<this.observables.length;m++)(f=t.getObject(this.observables[m],s))&&t.createObject(this.observables[m],t.widget.observables.register(f,this.observables[m],this,i),s);if(this.element=i.jquery?i:e(i),this.model=l(!0,{},h.prototype.defaults,s),this.model.keyConfigs=l(this.keyConfigs),this.element.addClass(p+" e-js").data(o,this),this._id=i[0].id,this.element.attr("tabIndex")||this.element.attr("tabIndex",""),this.model.enablePersistence){if(window.localStorage&&!t.isNullOrUndefined(t.persistStateVersion)&&window.localStorage.getItem("persistKey")!=t.persistStateVersion)for(m in window.localStorage)-1!=m.indexOf("$ej$")&&window.localStorage.removeItem(m);else if(document.cookie&&!t.isNullOrUndefined(t.persistStateVersion)&&t.cookie.get("persistKey")!=t.persistStateVersion)for(g in document.cookie.split(/; */))-1!=g.indexOf("$ej$")&&t.cookie.set(g.split("=")[0],model,new Date);this._persistHandler=t.proxy(this.persistState,this),e(window).on("unload",this._persistHandler),this.restoreState(!0)}if(this._init(s),"object"==typeof this.model.keyConfigs&&!(this.model.keyConfigs instanceof Array)){for(b in v=!1,this.model.keyConfigs.focus&&this.element.attr("accesskey",this.model.keyConfigs.focus),this.model.keyConfigs)if("focus"!==b){v=!0;break}v&&this._keyPressed&&(_=i,y="keydown",this.keySettings&&(_=this.keySettings.getElement&&this.keySettings.getElement()||_,y=this.keySettings.event||y),this._on(_,y,function(e){if(this.model.keyConfigs){var t=n.getActionFromCode(this.model.keyConfigs,e.which,e.ctrlKey,e.shiftKey,e.altKey),i={code:e.which,ctrl:e.ctrlKey,alt:e.altKey,shift:e.shiftKey};t&&!1===this._keyPressed(t,e.target,i,e)&&e.preventDefault()}}))}this._trigger("create")},h),e.fn[o]=function(n){for(var l,a,c=n,u=0;u<this.length;u++){var f=e(this[u]),m=f.data(o),g=m&&f.hasClass(p),v=null;if(this.length>0&&e.isPlainObject(c)&&(n=t.copyObject({},c)),g){if(n)if(a=[].slice.call(arguments,1),this.length>0&&a[0]&&"option"===c&&e.isPlainObject(a[0])&&(a[0]=t.copyObject({},a[0])),e.isPlainObject(n))m.setModel(n);else if(0!==n.indexOf("_")&&!t.isNullOrUndefined(v=t.getObject(n,m))||0===n.indexOf("model.")){if(!v||!e.isFunction(v)){if(1==arguments.length)return v;m.option(n,arguments[1]);continue}if((l=v.apply(m,a))!==i)return l}else s(r+": function/property - "+n+" does not exist")}else!0!==h.prototype._requiresID||e(this[u]).attr("id")||f.attr("id",d("ejControl_")),n&&"object"!=typeof n?s(o+": methods/properties can be accessed only after plugin creation"):(h.prototype.defaults&&!t.isNullOrUndefined(t.setCulture)&&"locale"in h.prototype.defaults&&"ejChart"!=o&&(!n||"locale"in n?t.isNullOrUndefined(n)&&((n={}).locale=t.setCulture().name):n.locale=t.setCulture().name),new h(f,n))}return-1!=o.indexOf("ejm")&&t.widget.registerInstance(f,o,r,h.prototype),this},t.widget.register(o,r,h.prototype);else for(c in h=r,o)(u=o[c])instanceof Array&&(h._rootCSS=u[1],u=u[0]),t.widget(c,u,h),o[c]instanceof Array&&(h._rootCSS="")},e.extend(t.widget,function(){var e={},i=[];return{register:function(i,o,n){t.isNullOrUndefined(e[i])||s("ej.widget : The widget named "+i+" is trying to register twice."),e[i]={name:i,className:o,proto:n},t.widget.extensions&&t.widget.extensions.registerWidget(i)},registerInstance:function(e,t,o,n){i.push({element:e,pluginName:t,className:o,proto:n})},registeredWidgets:e,registeredInstances:i}}()),t.widget.destroyAll=function(e){var t,i,o,n;if(e&&e.length)for(t=0;t<e.length;t++)if((o=(i=e.eq(t).data()).ejWidgets)&&o.length)for(n=0;n<o.length;n++)i[o[n]]&&i[o[n]].destroy&&i[o[n]].destroy()},t.cookie={get:function(e){var t=RegExp(e+"=([^;]+)").exec(document.cookie);return t&&t.length>1?t[1]:i},set:function(e,t,i){"object"==typeof t&&(t=JSON.stringify(t)),t=escape(t)+(null==i?"":"; expires="+i.toUTCString()),document.cookie=e+"="+t}},n={getActionFromCode:function(e,t,i,o,r){var s,l,a;for(s in i=i||!1,o=o||!1,r=r||!1,e)if("focus"!==s)for(l=n.getKeyObject(e[s]),a=0;a<l.length;a++)if(t===l[a].code&&i==l[a].isCtrl&&o==l[a].isShift&&r==l[a].isAlt)return s;return null},getKeyObject:function(t){for(var i,o,r,s={isCtrl:!1,isShift:!1,isAlt:!1},l=e.extend(!0,{},s),a=t.split(","),h=[],d=0;d<a.length;d++){if(i=null,-1!=a[d].indexOf("+"))for(o=a[d].split("+"),r=0;r<o.length;r++)i=n.getResult(e.trim(o[r]),s);else i=n.getResult(e.trim(a[d]),e.extend(!0,{},l));h.push(i)}return h},getResult:function(e,t){return"ctrl"===e?t.isCtrl=!0:"shift"===e?t.isShift=!0:"alt"===e?t.isAlt=!0:t.code=parseInt(e,10),t}},t.getScrollableParents=function(t){return e(t).parentsUntil("html").filter(function(){return"visible"!=e(this).css("overflow")}).add(e(window))},t.browserInfo=function(){var i,o,n,r,s={},l=[],a={opera:/(opera|opr)(?:.*version|)[ \/]([\w.]+)/i,edge:/(edge)(?:.*version|)[ \/]([\w.]+)/i,webkit:/(chrome)[ \/]([\w.]+)/i,safari:/(webkit)[ \/]([\w.]+)/i,msie:/(msie|trident) ([\w.]+)/i,mozilla:/(mozilla)(?:.*? rv:([\w.]+)|)/i};for(i in a)if(a.hasOwnProperty(i)&&(l=navigator.userAgent.match(a[i]))){if(s.name="opr"==l[1].toLowerCase()?"opera":l[1].toLowerCase(),s.version=l[2],s.culture={},s.culture.name=s.culture.language=navigator.language||navigator.userLanguage,void 0!==t.globalize){for(o=t.preferredCulture().name,n=navigator.language||navigator.userLanguage?t.preferredCulture(navigator.language||navigator.userLanguage):t.preferredCulture("en-US"),r=0;navigator.languages&&r<navigator.languages.length&&(n=t.preferredCulture(navigator.languages[r])).language!=navigator.languages[r];r++);t.preferredCulture(o),e.extend(!0,s.culture,n)}!navigator.userAgent.match(/Trident\/7\./)||(s.name="msie");break}return s.isMSPointerEnabled="msie"==s.name&&s.version>9&&window.navigator.msPointerEnabled,s.pointerEnabled=window.navigator.pointerEnabled,s},t.eventType={mouseDown:"mousedown touchstart",mouseMove:"mousemove touchmove",mouseUp:"mouseup touchend",mouseLeave:"mouseleave touchcancel",click:"click touchend"},t.event=function(t,i,o){return e.extend(o||{},{type:t,model:i,cancel:!1})},t.proxy=function(e,t,i){return e&&"function"==typeof e?"on"in e&&t?i?e.on(t,i):e.on(t):function(){var o=i?[i]:[];return o.push.apply(o,arguments),e.apply(t||this,o)}:null},t.hasStyle=function(e){var t,i,o=document.documentElement.style;if(e in o)return!0;for(t=["ms","Moz","Webkit","O","Khtml"],e=e[0].toUpperCase()+e.slice(1),i=0;i<t.length;i++)if(t[i]+e in o)return!0;return!1},Array.prototype.indexOf=Array.prototype.indexOf||function(e){var t,i=this.length;if(0===i)return-1;for(t=0;t<i;t++)if(t in this&&this[t]===e)return t;return-1},String.prototype.startsWith=String.prototype.startsWith||function(e){return this.slice(0,e.length)===e};var l=t.copyObject=function(e,o){var n,r,s,a,h,d,c=2;for("boolean"!=typeof e&&(c=1),s=[].slice.call(arguments,c),1===c&&(o=e,e=i),a=0;a<s.length;a++)for(h in s[a])if(n=o[h],(r=s[a][h])!==i&&n!==r&&s[a]!==r&&o!==r)if(r instanceof Array)if(0===a&&e)for(o[h]=[],d=0;d<r.length;d++)l(!0,o[h],r);else o[h]=r.slice();else t.isPlainObject(r)?(o[h]=n||{},e?l(e,o[h],r):l(o[h],r)):o[h]=r;return o},a=function(){return this},h=0,d=function(e){return e+h++};t.template={},t.template.render=t.template["text/x-jsrender"]=function(t,i,o,n,r){"#"!==i.slice(0,1)&&(i=["<div>",i,"</div>"].join(""));var s={prop:r,index:n};return e(i).render(o,s)},t.isPlainObject=function(e){if(!e||t.DataManager!==i&&e instanceof t.DataManager||"object"!=typeof e||e.nodeType||jQuery.isWindow(e))return!1;try{if(e.constructor&&!e.constructor.prototype.hasOwnProperty("isPrototypeOf"))return!1}catch(e){return!1}var o,n=t.support.isOwnLast;for(o in e)if(n)break;return o===i||e.hasOwnProperty(o)},r=!1,t.util.valueFunction=function(e){return function(o,n){var s=t.getObject(e,this.model);if(!1===r&&(r=t.getObject("observables.getValue",t.widget)),o===i)return t.isNullOrUndefined(r)?"function"==typeof s?s.call(this):s:r(s,n);"function"==typeof s?(this["ob.values"][e]=o,s.call(this,o)):t.createObject(e,o,this.model)}},t.util.getVal=function(e){return"function"==typeof e?e():e},t.support={isOwnLast:function(){var e,t=function(){this.a=1};for(e in t.prototype.b=1,new t)return"b"===e}(),outerHTML:document.createElement("div").outerHTML!==i},s=t.throwError=function(e){try{throw new Error(e)}catch(e){throw e.message+"\n"+e.stack}},t.getRandomValue=function(e,o){var n,r;return e===i||o===i?t.throwError("Min and Max values are required for generating a random number"):("crypto"in window&&"getRandomValues"in crypto?(r=new Uint16Array(1),window.crypto.getRandomValues(r),n=r[0]%(o-e)+e):n=Math.random()*(o-e)+e,0|n)},t.extensions={},t.extensions.modelGUID="{0B1051BA-1CCB-42C2-A3B5-635389B92A50}"}(window.jQuery,window.Syncfusion),function(){$.fn.addEleAttrs=function(e){var t=$(this);$.each(e,function(e,i){i&&i.specified&&t.attr(i.name,i.value)})},$.fn.removeEleAttrs=function(e){return this.each(function(){var t=$(this),i=$(this.attributes).clone();$.each(i,function(i,o){o&&o.specified&&e.test(o.name)&&t.removeAttr(o.name)})})},$.fn.attrNotStartsWith=function(e){var t,o=[];for(this.each(function(){t=$(this.attributes).clone()}),i=0;i<t.length;i++){if(t[i]&&t[i].specified&&e.test(t[i].name))continue;o.push(t[i])}return o},$.fn.removeEleEmptyAttrs=function(){return this.each(function(){var e=$(this),t=$(this.attributes).clone();$.each(t,function(t,i){i&&i.specified&&""===i.value&&e.removeAttr(i.name)})})},$.extend($.support,{has3d:ej.addPrefix("perspective")in ej.styles,hasTouch:"ontouchstart"in window,hasPointer:navigator.msPointerEnabled,hasTransform:!1!==ej.userAgent(),pushstate:"pushState"in history&&"replaceState"in history,hasTransition:ej.addPrefix("transition")in ej.styles}),$.extend($.expr[":"],{attrNotStartsWith:function(e,t,i){for(var o=e.attributes,n=0;n<o.length;n++)if(0===o[n].nodeName.indexOf(i[3]))return!1;return!0}});var e=$.fn.andSelf||$.fn.addBack;$.fn.andSelf=$.fn.addBack=function(){return e.apply(this,arguments)}}()}),
/*!
*  filename: ej.draggable.min.js
*  version : 14.4.0.15
*  Copyright Syncfusion Inc. 2001 - 2016. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
function(e){"function"==typeof define&&define.amd?define(["./ej.core.min"],e):e()}(function(){var e,t;e=jQuery,(t=Syncfusion).widget("ejDraggable","ej.Draggable",{element:null,model:null,validTags:["div","span","a"],defaults:{scope:"default",handle:null,dragArea:null,clone:!1,distance:1,dragOnTaphold:!1,cursorAt:{top:-1,left:-2},dragStart:null,drag:null,dragStop:null,create:null,destroy:null,helper:function(){return e('<div class="e-drag-helper" />').html("draggable").appendTo(document.body)}},_init:function(){this.handler=function(){},this.resizables={},helpers={},this._wireEvents(),this._browser=t.browserInfo(),this._isIE8="msie"==this._browser.name&&"8.0"==this._browser.version,this._isIE9="msie"==this._browser.name&&"9.0"==this._browser.version,"msie"==this._browser.name&&this.element.addClass("e-pinch")},_setModel:function(e){for(var t in e)switch(t){case"dragArea":this.model.dragArea=e[t];break;case"dragOnTaphold":this.model.dragOnTaphold=e[t]}},_destroy:function(){e(document).off(t.eventType.mouseUp,this._destroyHandler).off(t.eventType.mouseUp,this._dragStopHandler).off(t.eventType.mouseMove,this._dragStartHandler).off(t.eventType.mouseMove,this._dragHandler).off("mouseleave",this._dragMouseOutHandler).off("selectstart",!1),t.widgetBase.droppables[this.scope]=null},_initialize:function(i){var o,n=i;i.preventDefault(),i=this._getCoordinate(i),this.target=e(n.currentTarget),this._initPosition={x:i.pageX,y:i.pageY},e(document).on(t.eventType.mouseMove,this._dragStartHandler).on(t.eventType.mouseUp,this._destroyHandler),this.model.clone||(o=this.element.offset(),this._relXposition=i.pageX-o.left,this._relYposition=i.pageY-o.top),e(document.documentElement).trigger(t.eventType.mouseDown,n)},_setDragArea:function(){var i,o,n,r,s,l,a,h=e(this.model.dragArea)[0];if(h){if(r=["left","right","bottom","top"],t.isNullOrUndefined(h.getBoundingClientRect)){for(i=e(this.model.dragArea).outerWidth(),o=e(this.model.dragArea).outerHeight(),a=0;a<r.length;a++)this["border-"+r[a]+"-width"]=0,this["padding-"+r[a]]=0;s=l=0}else{for(i=(n=h.getBoundingClientRect()).width?n.width:n.right-n.left,o=n.height?n.height:n.bottom-n.top,a=0;a<r.length;a++)this["border-"+r[a]+"-width"]=isNaN(parseFloat(e(e(this.model.dragArea)[0]).css("border-"+r[a]+"-width")))?0:parseFloat(e(e(this.model.dragArea)[0]).css("border-"+r[a]+"-width")),this["padding-"+r[a]]=isNaN(parseFloat(e(e(this.model.dragArea)[0]).css("padding-"+r[a])))?0:parseFloat(e(e(this.model.dragArea)[0]).css("padding-"+r[a]));s=e(this.model.dragArea).offset().top,l=e(this.model.dragArea).offset().left}this._left=t.isNullOrUndefined(e(this.model.dragArea).offset())?0+this["border-left-width"]+this["padding-left"]:l+this["border-left-width"]+this["padding-left"],this._top=t.isNullOrUndefined(e(this.model.dragArea).offset())?0+this["border-top-width"]+this["padding-top"]:s+this["border-top-width"]+this["padding-top"],this._right=l+i-[this["border-right-width"]+this["padding-right"]],this._bottom=s+o-[this["border-bottom-width"]+this["padding-bottom"]]}},_dragStart:function(i){var o,n,r,s,l,a=i;i=this._getCoordinate(i),this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0},this.offset=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},this.position=this._getMousePosition(a);var h=this._initPosition.x-i.pageX,d=this._initPosition.y-i.pageY;if(Math.sqrt(h*h+d*d)>=this.model.distance){if(!(o=this.model.helper({sender:a,element:this.target}))||t.isNullOrUndefined(o))return;if(n=this.model.handle=this.helper=o,this.model.dragStart&&(r=null,"touchmove"==a.type?(s=a.originalEvent.changedTouches[0],r=document.elementFromPoint(s.clientX,s.clientY)):r=a.originalEvent.target||a.target,this._trigger("dragStart",{event:a,element:this.element,target:r})))return this._destroy(),!1;this.model.dragArea?this._setDragArea():(this._left=this._top=this._right=this._bottom=0,this["border-top-width"]=this["border-left-width"]=0),l=n.offsetParent().offset(),e(document).off(t.eventType.mouseMove,this._dragStartHandler).off(t.eventType.mouseUp,this._destroyHandler).on(t.eventType.mouseMove,this._dragHandler).on(t.eventType.mouseUp,this._dragStopHandler).on("mouseleave",this._dragMouseOutHandler).on("selectstart",!1),t.widgetBase.droppables[this.model.scope]={draggable:this.element,helper:n.css({position:"absolute",left:this.position.left-l.left,top:this.position.top-l.top}),destroy:this._destroyHandler}}},_drag:function(i){var o,n,r,s,l,a,h,d,c;i.preventDefault(),this.position=this._getMousePosition(i),this.position.top<0&&(this.position.top=0),e(document).height()<this.position.top&&(this.position.top=e(document).height()),e(document).width()<this.position.left&&(this.position.left=e(document).width()),d=t.widgetBase.droppables[this.model.scope].helper,this.model.drag&&(l=null,"touchmove"==i.type?(a=i.originalEvent.changedTouches[0],l=document.elementFromPoint(a.clientX,a.clientY)):l=i.originalEvent.target||i.target,this._trigger("drag",{event:i,element:this.target,target:l})),h=this._checkTargetElement(i),t.isNullOrUndefined(h)?this._hoverTarget&&(i.target=i.toElement=this._hoverTarget,this._hoverTarget.object._out(i),this._hoverTarget=null):(i.target=i.toElement=h,h.object._over(i),this._hoverTarget=h),c=(d=t.widgetBase.droppables[this.model.scope].helper).offsetParent().offset(),r=t.isNullOrUndefined(i.pageX)?i.originalEvent.changedTouches[0].pageX:i.pageX,s=t.isNullOrUndefined(i.pageY)?i.originalEvent.changedTouches[0].pageY:i.pageY,this.model.dragArea?(this._pageX!=r&&(o=this._left>this.position.left?this._left:this._right<this.position.left+d.outerWidth(!0)?this._right-d.outerWidth(!0):this.position.left),this._pageY!=s&&(n=this._top>this.position.top?this._top:this._bottom<this.position.top+d.outerHeight(!0)?this._bottom-d.outerHeight(!0):this.position.top)):(o=this.position.left,n=this.position.top),(n<0||n-[c.top+this["border-top-width"]]<0)&&(n=[c.top+this["border-top-width"]]),(o<0||o-[c.left+this["border-left-width"]]<0)&&(o=[c.left+this["border-left-width"]]),d.css({left:o-[c.left+this["border-left-width"]],top:n-[c.top+this["border-top-width"]]}),this.position.left=o,this.position.top=n,this._pageX=r,this._pageY=s},_dragStop:function(e){var t,i;("mouseup"==e.type||"touchend"==e.type)&&this._destroy(e),this.model.dragStop&&(t=null,"touchend"==e.type?(i=e.originalEvent.changedTouches[0],t=document.elementFromPoint(i.clientX,i.clientY)):t=e.originalEvent.target||e.target,this._trigger("dragStop",{event:e,element:this.target,target:t})),this._dragEnd(e)},_dragEnd:function(e){var i=this._checkTargetElement(e);t.isNullOrUndefined(i)||(e.target=e.toElement=i,i.object._drop(e))},_dragMouseEnter:function(t){e(document).off("mouseenter",this._dragMouseEnterHandler),this._isIE9?this._dragManualStop(t):this._isIE8?0==t.button&&this._dragManualStop(t):0==t.buttons&&this._dragManualStop(t)},_dragManualStop:function(e){null!=this.model.dragStop&&this._trigger("dragStop",{event:e,element:this.target,target:e.originalEvent.target||e.target}),this._destroy(e)},_dragMouseOut:function(){e(document).on("mouseenter",this._dragMouseEnterHandler)},_checkTargetElement:function(e){var t=e.target;return this.helper&&this._contains(this.helper[0],t)?(this.helper.hide(),t=this._elementUnderCursor(e),this.helper.show(),this._withDropElement(t)):this._withDropElement(t)},_withDropElement:function(i){if(i&&(dropObj=e(i).data("ejDroppable"),t.isNullOrUndefined(dropObj)&&(dropObj=this._checkParentElement(e(i))),!t.isNullOrUndefined(dropObj)))return e.extend(i,{object:dropObj})},_checkParentElement:function(i){var o=e(i).closest(".e-droppable");if(o.length>0&&(dropObj=e(o).data("ejDroppable"),!t.isNullOrUndefined(dropObj)))return dropObj},_elementUnderCursor:function(e){return"touchmove"==e.type||"touchstart"==e.type||"touchend"==e.type||"taphold"==e.type?document.elementFromPoint(e.originalEvent.changedTouches[0].clientX,e.originalEvent.changedTouches[0].clientY):document.elementFromPoint(e.clientX,e.clientY)},_contains:function(t,i){try{return e.contains(t,i)||t==i}catch(e){return!1}},_wireEvents:function(){1==t.isDevice()&&1==this.model.dragOnTaphold?this._on(this.element,"taphold",this._initialize):this._on(this.element,t.eventType.mouseDown,this._initialize),this._dragStartHandler=e.proxy(this._dragStart,this),this._destroyHandler=e.proxy(this._destroy,this),this._dragStopHandler=e.proxy(this._dragStop,this),this._dragHandler=e.proxy(this._drag,this),this._dragMouseEnterHandler=e.proxy(this._dragMouseEnter,this),this._dragMouseOutHandler=e.proxy(this._dragMouseOut,this)},_getMousePosition:function(e){e=this._getCoordinate(e);var t=this.model.clone?e.pageX:e.pageX-this._relXposition,i=this.model.clone?e.pageY:e.pageY-this._relYposition;return{left:t-[this.margins.left+this.model.cursorAt.left],top:i-[this.margins.top+this.model.cursorAt.top]}},_getCoordinate:function(e){var i=e;return("touchmove"==e.type||"touchstart"==e.type||"touchend"==e.type||"taphold"==e.type&&"msie"!=t.browserInfo().name)&&(i=e.originalEvent.changedTouches[0]),i}}),function(e,t){t.widget("ejDroppable","ej.Droppable",{element:null,model:null,validTags:["div","span","a"],defaults:{accept:null,scope:"default",drop:null,over:null,out:null,create:null,destroy:null},_init:function(){this.model.accept?e(this.element).delegate(this.accept,"mouseup",e.proxy(this._drop,this)):e(this.element).on("mouseup",e.proxy(this._drop,this)),this._on(e(document),"touchend",this._drop),this._mouseOver=!1},_setModel:function(){},_destroy:function(){e(this.element).off("mouseup",e.proxy(this._drop,this))},_over:function(e){this._mouseOver||(this._trigger("over",e),this._mouseOver=!0)},_out:function(e){this._mouseOver&&(this._trigger("out",e),this._mouseOver=!1)},_drop:function(i){var o=t.widgetBase.droppables[this.model.scope],n=!t.isNullOrUndefined(o.helper)&&o.helper.is(":visible"),r=this._isDropArea(i);o&&!t.isNullOrUndefined(this.model.drop)&&n&&r.canDrop&&this.model.drop(e.extend(i,{dropTarget:r.target},!0),o)},_isDropArea:function(t){var i,o,n,r,s,l={canDrop:!0,target:e(t.target)};if("touchend"==t.type)for(i=t.originalEvent.changedTouches[0],o=document.elementFromPoint(i.clientX,i.clientY),l.canDrop=!1,n=e(o).parents(),r=0;r<this.element.length;r++){if(e(o).is(e(this.element[r])))l={canDrop:!0,target:e(o)};else for(s=0;s<n.length;s++)if(e(this.element[r]).is(e(n[s]))){l={canDrop:!0,target:e(o)};break}if(l.canDrop)break}return l}})}(jQuery,Syncfusion),function(e,t){t.widget("ejResizable","ej.resizable",{element:null,model:null,validTags:["div","span","a"],defaults:{scope:"default",handle:null,distance:1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,cursorAt:{top:1,left:1},resizeStart:null,resize:null,resizeStop:null,create:null,destroy:null,helper:function(){return e('<div class="e-resize-helper" />').html("resizable").appendTo(document.body)}},_init:function(){this.target=this.element,this._browser=t.browserInfo(),this._isIE8="msie"==this._browser.name&&"8.0"==this._browser.version,this._isIE9="msie"==this._browser.name&&"9.0"==this._browser.version,null!=this.handle?e(this.target).delegate(this.handle,t.eventType.mouseDown,e.proxy(this._mousedown,this)).delegate(this.handle,"resizestart",this._blockDefaultActions):e(this.target).on("mousedown",e.proxy(this._mousedown,this)),this._resizeStartHandler=e.proxy(this._resizeStart,this),this._destroyHandler=e.proxy(this._destroy,this),this._resizeStopHandler=e.proxy(this._resizeStop,this),this._resizeHandler=e.proxy(this._resize,this),this._resizeMouseEnterHandler=e.proxy(this._resizeMouseEnter,this)},_mouseover:function(i){e(i.target).hasClass("e-resizable")?(e(i.target).css({cursor:"se-resize"}),e(this.target).on(t.eventType.mouseDown,e.proxy(this._mousedown,this))):(e(this.target).off(t.eventType.mouseDown),e(this.target).css({cursor:""}))},_blockDefaultActions:function(e){e.cancelBubble=!0,e.returnValue=!1,e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation()},_setModel:function(){},_mousedown:function(i){var o=i;return i=this._getCoordinate(i),this.target=e(o.currentTarget),this._initPosition={x:i.pageX,y:i.pageY},this._pageX=i.pageX,this._pageY=i.pageY,e(document).on(t.eventType.mouseMove,this._resizeStartHandler).on(t.eventType.mouseUp,this._destroyHandler),e(document.documentElement).trigger(t.eventType.mouseDown,o),!1},_resizeStart:function(i){var o;if(e(i.target).hasClass("e-resizable")){i=this._getCoordinate(i);var n,r,s=this._initPosition.x-i.pageX,l=this._initPosition.y-i.pageY;if(Math.sqrt(s*s+l*l)>=this.model.distance){if(null!=this.model.resizeStart&&this._trigger("resizeStart",{event:i,element:this.target}))return;o=this.model.helper({element:this.target}),n=i.pageX-this._pageX+o.outerWidth(),r=i.pageY-this._pageY+o.outerHeight(),this._pageX=i.pageX,this._pageY=i.pageY,this.getElementPosition(o),e(document).off(t.eventType.mouseMove,this._resizeStartHandler).off(t.eventType.mouseUp,this._destroyHandler).on(t.eventType.mouseMove,this._resizeHandler).on(t.eventType.mouseUp,this._resizeStopHandler).on("mouseenter",this._resizeMouseEnterHandler).on("selectstart",!1),t.widgetBase.resizables[this.scope]={resizable:this.target,helper:o.css({width:n,height:r}),destroy:this._destroyHandler}}}},_resize:function(e){var i,o,n,r;e=this._getCoordinate(e),this.getElementPosition(t.widgetBase.resizables[this.scope].helper),r=this.model.helper({element:this.target}),i=e.pageX-this._pageX+r.outerWidth(),o=e.pageY-this._pageY+r.outerHeight(),this._pageX=e.pageX,this._pageY=e.pageY,i<this.model.minWidth&&(n=this.model.minWidth-i,i=this.model.minWidth,this._pageX=e.pageX+n),o<this.model.minHeight&&(n=this.model.minHeight-o,o=this.model.minHeight,this._pageY=e.pageY+n),null!=this.model.maxHeight&&o>this.model.maxHeight&&(n=o-this.model.maxHeight,o=this.model.maxHeight,this._pageY=e.pageY-n),null!=this.model.maxWidth&&i>this.model.maxWidth&&(n=i-this.model.maxWidth,i=this.model.maxWidth,this._pageX=e.pageX-n),t.widgetBase.resizables[this.scope].helper.css({width:i,height:o}),this._trigger("resize",{element:this.target})},_resizeStop:function(e){null!=this.model.resizeStop&&this._trigger("resizeStop",{element:this.target}),("mouseup"==e.type||"touchend"==e.type)&&this._destroy(e)},_resizeMouseEnter:function(e){this._isIE9?this._resizeManualStop(e):this._isIE8?0==e.button&&this._resizeManualStop(e):0==e.buttons&&this._resizeManualStop(e)},_resizeManualStop:function(e){null!=this.model.resizeStop&&this._trigger("resizeStop",{element:this.target}),this._destroy(e)},_destroy:function(){e(document).off(t.eventType.mouseUp,this._destroyHandler).off(t.eventType.mouseUp,this._resizeStopHandler).off(t.eventType.mouseMove,this._resizeStartHandler).off(t.eventType.mouseMove,this._resizeHandler).off("mouseenter",this._resizeMouseEnterHandler).off("selectstart",!1),t.widgetBase.resizables[this.scope]=null},getElementPosition:function(e){return null!=e&&e.length>0?{left:e[0].offsetLeft,top:e[0].offsetTop}:null},_getCoordinate:function(e){var t=e;return("touchmove"==e.type||"touchstart"==e.type||"touchend"==e.type)&&(t=e.originalEvent.changedTouches[0]),t}})}(jQuery,Syncfusion)}),
/*!
*  filename: ej.scroller.min.js
*  version : 14.4.0.15
*  Copyright Syncfusion Inc. 2001 - 2016. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
function(e){"function"==typeof define&&define.amd?define(["./ej.core.min"],e):e()}(function(){(function(e,t,i,o){"use strict";t.widget("ejScrollBar","ej.ScrollBar",{defaults:{orientation:"horizontal",viewportSize:0,height:18,width:18,smallChange:57,largeChange:57,value:0,maximum:0,minimum:0,buttonSize:18,infiniteScrolling:!1},validTags:["div"],type:"transclude",dataTypes:{buttonSize:"number",smallChange:"number",largeChange:"number"},observables:["value"],value:t.util.valueFunction("value"),_enabled:!0,content:function(){return this._content&&this._content.length||(this._content="horizontal"===this.model.orientation?this.element.find(".e-hhandle"):this.element.find(".e-vhandle")),this._content},_init:function(){this.element.addClass("e-widget"),this._ensureScrollers(),this.content(),this._setInitialValues()},_setInitialValues:function(){this.model.orientation===t.ScrollBar.Orientation.Horizontal?this.element.addClass("e-hscrollbar"):this.element.addClass("e-vscrollbar"),(0!==this.value()||0!==this.model.minimum)&&(this.value()<this.model.minimum&&this.value(this.model.minimum),this.scroll(this.value(),"none"))},_ensureScrollers:function(){e.fn.jquery;this.model.height&&this.element.height(this.model.height),this.model.width&&this.element.width(this.model.width),this._scrollData||(this._scrollData="vertical"===this.model.orientation?this._createScroller("Height","Y","Top","e-v"):this._createScroller("Width","X","Left","e-h"))},_setModel:function(e){for(var t in e){if("value"!==t){this.refresh();break}this.value()&&this.scroll(this.value(),"none")}},_createScroller:function(t,i,o,n){var r,s={};e.fn.jquery;return s.dimension=t,s.xy=i,s.position=o,s.css=n,s.uDimension=t,this._calculateLayout(s),this._createLayout(s),r=this[s.main].find(".e-button"),this._off(r,"mousedown")._on(r,"mousedown",{d:s,step:1},this._spaceMouseDown),this._off(this[s.scroll],"mousedown")._on(this[s.scroll],"mousedown",{d:s},this._spaceMouseDown),this._off(this[s.handler],"mousedown touchstart")._on(this[s.handler],"mousedown touchstart",{d:s},this._mouseDown),s},_createLayout:function(i){var o,n="<div class='"+i.css+"{0}' style='"+i.dimension+":{1}px'>{2}</div>",r=e.fn.jquery,s={};s[i.dimension]=i.modelDim,o=t.buildTag("div."+i.css+"scroll e-box",String.format(n,"up e-chevron-up_01 e-icon e-box e-button",i.buttonSize)+String.format(n,"handlespace",i.handleSpace,String.format(n,"handle e-box e-pinch",i.handle))+String.format(n,"down e-chevron-down_01 e-icon e-box e-button",i.buttonSize),s),this.element.append(o),this.element.find(".e-vhandle").addClass("e-v-line e-icon"),this.element.find(".e-hhandle").addClass("e-h-line e-icon"),"1.7.1"===r||"1.7.2"===r?i.uDimension.toLowerCase():i.uDimension,this[i.handler]=this.element.find("."+i.handler),this[i.handler].css("transition","none"),this[i.scroll]=this[i.handler].parent(),this[i.main]=this[i.scroll].parent(),this[i.main].find(".e-button")["outer"+i.uDimension](i.buttonSize)},_calculateLayout:function(e){var i,n;e.scrollDim="scroll"+e.dimension,e.lPosition=e.position.toLowerCase(),e.clientXy="page"+e.xy,e.scrollVal="scroll"+e.position,e.scrollOneStepBy=this.model.smallChange,e.modelDim=this.model[e.dimension=e.dimension.toLowerCase()],e.handler=e.css+"handle",e.buttonSize=this.model.buttonSize,e.main=e.css+"scroll",e.scroll=e.css+"ScrollSpace",e.handleSpace=e.modelDim-2*e.buttonSize,e.scrollable=this.model.maximum-this.model.minimum,i=this.model.height,"horizontal"===this.model.orientation&&(i=this.model.width),e.handle=this.model.viewportSize/(this.model.maximum-this.model.minimum+this.model.viewportSize)*(i-2*this.model.buttonSize),n=!t.isNullOrUndefined(this.model.elementHeight)&&"string"==typeof this.model.elementHeight&&-1!=this.model.elementHeight.indexOf("%"),e.handle<20&&!n&&(e.handle=20),e.onePx=e.scrollable/(e.handleSpace-e.handle),e.fromScroller=!1,e.up=!0,e.vInterval=o},_updateLayout:function(e){this.element.height(this.model.height),this.element.width(this.model.width);var t=this.element.find("."+e.css+"handle"),i=this.element.find("."+e.css+"handlespace"),n="width"==e.dimension?t.css("left"):t.css("top"),r="width"==e.dimension?i.outerWidth():i.outerHeight();n!==o&&"auto"!==n&&(r>=e.handle+parseFloat(n)||(this.model.enableRTL?t.css("width"===e.dimension?"left":"top",parseFloat(r)-e.handle):t.css("width"===e.dimension?"left":"top",parseFloat(r)-e.handle>0?parseFloat(r)-e.handle:0))),this.element.find("."+e.css+"scroll").css(e.dimension,e.modelDim+"px").find(".e-button").css(e.dimension,this.model.buttonSize).end().find("."+e.css+"handlespace").css(e.dimension,e.handleSpace+"px").find("."+e.css+"handle").css(e.dimension,e.handle+"px")},refresh:function(){this._ensureScrollers(),this.value()&&this.scroll(this.value(),"none"),this._scrollData&&(this._calculateLayout(this._scrollData),this._updateLayout(this._scrollData))},scroll:function(e,i,o,n){var r,s,l=this._scrollData;if(!o)if(this.model.orientation===t.ScrollBar.Orientation.Horizontal){if(this._trigger("scroll",{source:i||"custom",scrollData:this._scrollData,scrollLeft:e,originalEvent:n}))return}else if(this._trigger("scroll",{source:i||"custom",scrollData:this._scrollData,scrollTop:e,originalEvent:n}))return;!this._scrollData.enableRTL||"mousemove"!=n&&"touchmove"!=n||"msie"==t.browserInfo().name?!this._scrollData.enableRTL||"mousemove"!=n&&"touchmove"!=n||"msie"!=t.browserInfo().name?this.value(e):this.value(-1*e):this.value(-l.scrollable+e),this.content().length>0&&(this.model.orientation===t.ScrollBar.Orientation.Horizontal?(e=(r=this.element.find(".e-hhandlespace").width()-this.element.find(".e-hhandle").outerWidth())<(e-this.model.minimum)/this._scrollData.onePx?r:(e-this.model.minimum)/this._scrollData.onePx,this._scrollData.enableRTL&&("mousemove"==n||"touchmove"==n)&&"msie"!=t.browserInfo().name&&((e=r-e)>0&&(e*=-1)),this._scrollData.enableRTL&&("mousemove"==n||"touchmove"==n)&&"msie"==t.browserInfo().name&&(e=-e),this._scrollData.enableRTL&&e>0&&!this._scrollData._scrollleftflag&&(e=0),this._scrollData._scrollleftflag&&(e>0&&(e*=-1),this.value(e)),this.content()[0].style.left=e+"px",this._scrollData._scrollleftflag=!1):(e=(s=this.element.find(".e-vhandlespace").height()-this.element.find(".e-vhandle").outerHeight())<(e-this.model.minimum)/this._scrollData.onePx?s:(e-this.model.minimum)/this._scrollData.onePx,this.content()[0].style.top=e+"px"))},_changeTop:function(e,t,i){var o,n;return e.dimension,n=(o=this.value())+t,e.step=t,e.enableRTL&&t<0||t>0&&!e.enableRTL?e.enableRTL?n<-1*this.model.maximum&&(n=-1*this.model.maximum):n>this.model.maximum&&(n=this.model.maximum):e.enableRTL?n>this.model.minimum&&(n=this.model.minimum):n<this.model.minimum&&(n=this.model.minimum),(n!==o||this.model.infiniteScrolling)&&this.scroll(n,i),n!==o},_mouseUp:function(i){if(i.data){var o=i.data.d;clearInterval(o.vInterval),"touchend"==i.type&&e(i.target).removeClass("e-touch"),"mouseup"!==i.type&&"touchend"!==i.type&&(i.toElement||i.relatedTarget||i.target)||(this._prevY=this._d=this._data=null,this._off(e(document),"mousemove touchmove",this._mouseMove),e(document).off("mouseup touchend",t.proxy(this._mouseUp,this)),o.fromScroller=!1,this[o.scroll].off("mousemove"),this[o.handler].off("mousemove").css("transition",""),"thumb"!==i.data.source||t.isNullOrUndefined(this.model)||e.when(this.content()).done(t.proxy(function(){this._trigger("thumbEnd",{originalEvent:i,scrollData:o})},this))),o.up=!0}},_mouseDown:function(i){this._enabled&&(this._d=i,this._data=this._d.data.d,this._data.target=this._d.target,this._data.fromScroller=!0,this[this._data.handler].css("transition","none"),this._on(e(document),"mousemove touchmove",{d:this._data,source:"thumb"},this._mouseMove),this._trigger("thumbStart",{originalEvent:this._d,scrollData:this._data}),e(document).one("mouseup touchend",{d:this._data,source:"thumb"},t.proxy(this._mouseUp,this)),"touchstart"==i.type&&e(i.target).addClass("e-touch"))},_mouseCall:function(e){e.type="mouseup",this._mouseUp(e)},_mouseMove:function(i){var o,n,r=0,s=parseInt(this[this._data.handler].css(this._data.lPosition))||0;if(i.preventDefault(),t.isNullOrUndefined(i.target.tagName)){if(e(i.target).is(document))return void this._mouseCall(i)}else if("iframe"===i.target.tagName.toLowerCase())return void this._mouseCall(i);n="mousemove"==i.type?i[this._data.clientXy]:i.originalEvent.changedTouches[0][this._data.clientXy],this._prevY&&n!==this._prevY&&(r=n-this._prevY,this.model.infiniteScrolling?(s+=r,this._data.step=r,(this._data.enableRTL?s>0:s<0)&&(s=0),s*(this._data.enableRTL?-1:1)+this._data.handle>=this._data.handleSpace&&(s=(this._data.handleSpace-this._data.handle)*(this._data.enableRTL?-1:1)),o=Math.ceil(s*this._data.onePx),this.scroll(o,"thumb")):(o=r*this._data.onePx,this._changeTop(this._data,o,"thumb",this._d)),this._trigger("thumbMove",{originalEvent:i,scrollData:this._data})),this._prevY=n},_spaceMouseDown:function(i){var o,n,r;i.data&&this._enabled&&(o=i.data.d,1===i.which&&i.target!==this[o.handler][0])&&(n=i.data.step?this.model.smallChange:this.model.largeChange,r=i.data.top||this[o.handler].offset()[o.lPosition],i[o.clientXy]=i[o.clientXy]||0,i[o.clientXy]<r&&(n*=-1),o.target=i.target,this._changeTop(o,n,3===n?"track":"button",i),1!==i.data.step&&this[o.scroll].mousemove(function(){o.up=!0}),o.up=!1,o.vInterval=setInterval(t.proxy(function(){(n<0?r+n/o.onePx<i[o.clientXy]:r+o.handle+n/o.onePx>i[o.clientXy])&&(o.up=!0),o.up?clearInterval(o.vInterval):(this._changeTop(o,n,3===n?"track":"button",i),r=i.data&&i.data.top||this[o.handler].offset()[o.lPosition])},this),150),e(document).one("mouseup",{d:o},t.proxy(this._mouseUp,this)),e(document).mouseout({d:o},t.proxy(this._mouseUp,this)))},_remove:function(){this.model.orientation===t.ScrollBar.Orientation.Horizontal&&this.element.find(".e-hscroll").remove(),this.model.orientation===t.ScrollBar.Orientation.Vertical&&this.element.find(".e-vscroll").remove(),this._scrollData=null,this._content=null},_destroy:function(){this.element.remove()}}),t.ScrollBar.Orientation={Horizontal:"horizontal",Vertical:"vertical"}})(jQuery,Syncfusion,window),function(e,t,i,o){"use strict";t.widget("ejScroller","ej.Scroller",{_addToPersist:["scrollLeft","scrollTop"],defaults:{height:250,autoHide:!1,animationSpeed:600,width:0,scrollOneStepBy:57,buttonSize:18,scrollLeft:0,scrollTop:0,targetPane:null,scrollerSize:18,enablePersistence:!1,enableRTL:o,enableTouchScroll:!0,enabled:!0,create:null,destroy:null,wheelStart:null,wheelMove:null,wheelStop:null},validTags:["div"],type:"transclude",dataTypes:{buttonSize:"number",scrollOneStepBy:"number"},observables:["scrollTop","scrollLeft"],scrollTop:t.util.valueFunction("scrollTop"),scrollLeft:t.util.valueFunction("scrollLeft"),keyConfigs:{up:"38",down:"40",left:"37",right:"39",pageUp:"33",pageDown:"34",pageLeft:"ctrl+37",pageRight:"ctrl+39"},content:function(){return this._content&&this._content.length&&this._content[0].offsetParent||(this._content=this.element.children().first().addClass("e-content")),this._content},_setFirst:!0,_updateScroll:!1,_init:function(){t.isNullOrUndefined(this.content()[0])||(this._prevScrollWidth=this.content()[0].scrollWidth,this._prevScrollHeight=this.content()[0].scrollHeight,this.element.addClass("e-widget"),this.content(),this._browser=t.browserInfo().name,this._wheelStart=!0,this._eleHeight=this.model.height,this._eleWidth=this.model.width,this.model.enableRTL===o&&(this.model.enableRTL="rtl"===this.element.css("direction")),this._ensureScrollers(),this.model.enableRTL&&(this.element.addClass("e-rtl"),this._rtlScrollLeftValue=this.content().scrollLeft()),this._on(this.content(),"scroll",this._scroll),null!=this.model.targetPane&&this._on(this.content().find(this.model.targetPane),"scroll",this._scroll),this.scrollLeft()&&this._setScrollLeftValue(this.scrollLeft()),this.scrollTop()&&this.content().scrollTop(this.scrollTop()),this.model.autoHide&&this._autohide(),this.model.enabled?this.enable():this.disable(),this._setDimension(),(this._prevScrollWidth!==this.content()[0].scrollWidth||this._prevScrollHeight!==this.content()[0].scrollHeight)&&this.refresh()),this._addActionClass()},_addActionClass:function(){"msie"==this._browser&&(this.content().removeClass("e-pinch e-pan-x e-pan-y"),this._vScrollbar&&this._hScrollbar?this.content().addClass("e-pinch"):this._vScrollbar&&!this._hScrollbar?this.content().addClass("e-pan-x"):this._hScrollbar&&!this._vScrollbar&&this.content().addClass("e-pan-y"))},_setDimension:function(){t.isNullOrUndefined(this.model.height)||"string"!=typeof this.model.height||-1==this.model.height.indexOf("%")||(this._vScroll?this.model.height=this._convertPercentageToPixel(parseInt(this._eleHeight),this.element.parent().height()):e(this.content()[0]).height("")),t.isNullOrUndefined(this.model.width)||"string"!=typeof this.model.width||-1==this.model.width.indexOf("%")||(this._hScroll?this.model.width=this._convertPercentageToPixel(parseInt(this._eleWidth),this.element.parent().width()):e(this.content()[0]).width(""))},_setScrollLeftValue:function(e){this.model.enableRTL&&(e="mozilla"==t.browserInfo().name?e<0?e:-1*e:!t.isNullOrUndefined(this._rtlScrollLeftValue)&&("chrome"==t.browserInfo().name||this._rtlScrollLeftValue>0)?e<0?this._rtlScrollLeftValue+e:this._rtlScrollLeftValue-e:Math.abs(e)),this.content().scrollLeft(e)},_ensureScrollers:function(){var o,n,r,s,l,a=e.fn.jquery;this.model.height="string"==typeof this.model.height&&-1!=this.model.height.indexOf("px")?parseInt(this.model.height):this.model.height,this.model.width="string"==typeof this.model.width&&-1!=this.model.width.indexOf("px")?parseInt(this.model.width):this.model.width,this.model.height&&this.element.height(this.model.height),this.model.width&&this.element.width(this.model.width),this._off(this.content(),"mousedown touchstart"),this.content().length>0&&(this.isVScroll()?(this._vScrollbar||(this._vScrollbar=this._createScrollbar(t.ScrollBar.Orientation.Vertical,this.isHScroll())),this.model.enableTouchScroll&&this._on(this.content(),"mousedown touchstart",{d:this._vScrollbar._scrollData},this._mouseDownOnContent)):(this._vScrollbar=null,this.element.children(".e-vscrollbar").remove()),this.isHScroll()?(this._hScrollbar||(this._hScrollbar=this._createScrollbar(t.ScrollBar.Orientation.Horizontal,this.isVScroll())),this.model.enableTouchScroll&&this._on(this.content(),"mousedown touchstart",{d:this._hScrollbar._scrollData},this._mouseDownOnContent)):(this._hScrollbar=null,this.element.children(".e-hscrollbar").remove()),this._vScrollbar||this._hScrollbar||this.content().css({width:"auto",height:"auto"}),this.element.find(".e-hscroll").length>0||this._vScrollbar&&this.content().outerHeight(this.content().outerHeight()-1),this._hScroll=this.isHScroll(),this._vScroll=this.isVScroll(),this._hScroll||this._vScroll?(this.content().addClass("e-content"),"1.7.1"===a||"1.7.2"===a?(o="height",n="width"):(o="outerHeight",n="outerWidth"),s=(r=this._exactElementDimension(this.element)).height-(this.border_bottom+this.border_top+this.padding_bottom+this.padding_top),this.content()[o](s-(this._hScroll&&!this.model.autoHide?this.model.scrollerSize:0)),l=r.width-(this.border_left+this.border_right+this.padding_left+this.padding_right),this.content()[n](l-(this._vScroll&&!this.model.autoHide?this.model.scrollerSize:0)),isNaN(this._eleWidth)&&this._eleWidth.indexOf("%")>0&&isNaN(this._eleHeight)&&this._eleHeight.indexOf("%")>0&&e(i).on("resize",e.proxy(this._resetScroller,this))):this.content().removeClass("e-content"),this._setDimension(),this._parentHeight=e(this.element).parent().height(),this._parentWidth=e(this.element).parent().width())},_convertPercentageToPixel:function(e,t){return Math.floor(e*t/100)},isHScroll:function(){if(t.isNullOrUndefined(this.model.width)||"string"!=typeof this.model.width||-1==this.model.width.indexOf("%")){if(this.model.width>0){var i=this.content().find(this.model.targetPane);return null!=this.model.targetPane&&i.length?i[0].scrollWidth+i.siblings().width()>this.model.width:this.content()[0].scrollWidth>this.model.width||this.content()[0].scrollWidth==this.model.width&&e(this.content()[0]).find("> *").length>0&&e(this.content()[0]).find("> *")[0].scrollWidth>this.model.width}return!1}return this.content()[0].scrollWidth>this.element.width()},isVScroll:function(){return t.isNullOrUndefined(this.model.height)||"string"!=typeof this.model.height||-1==this.model.height.indexOf("%")?!!(this.model.height>0&&(this.content()[0].scrollHeight>this.model.height||this.isHScroll()&&(this.content()[0].scrollHeight==this.model.height||this.content()[0].scrollHeight>this.model.height-(this.model.scrollerSize-2)))):this.content()[0].scrollHeight>this.element.outerHeight()},_setModel:function(e){for(var i in e)if("enableRTL"===i)e[i]?(this.element.addClass("e-rtl"),this._rtlScrollLeftValue=this.content().scrollLeft(),t.isNullOrUndefined(this._hScrollbar)||(this._hScrollbar._scrollData.enableRTL=!0)):(this.element.removeClass("e-rtl"),t.isNullOrUndefined(this._hScrollbar)||(this._hScrollbar._scrollData.enableRTL=!1)),this._hScrollbar&&(this.element.find(".e-hhandle").css("left",0),this._hScrollbar.value(0));else if("scrollLeft"===i)(parseFloat(e[i])<0||!this._hScroll)&&(e[i]=0),this._externalCall=!0,this._hScrollbar&&(e[i]=parseFloat(e[i])>this._hScrollbar._scrollData.scrollable?this._hScrollbar._scrollData.scrollable:parseFloat(e[i])),this._setScrollLeftValue(parseFloat(e[i])),this.scrollLeft(e[i]),!this._hScrollbar||this._hScrollbar._scrollData._scrollleftflag&&this.model.enableRTL||this.scrollX(e[i]);else if("scrollTop"===i)this._vScrollbar&&(e[i]=parseFloat(e[i])>this._vScrollbar._scrollData.scrollable?this._vScrollbar._scrollData.scrollable:parseFloat(e[i])),(parseFloat(e[i])<0||!this._vScroll)&&(e[i]=0),this._externalCall=!0,this.content().scrollTop(parseFloat(e[i])),this.scrollTop(e[i]),this.scrollY(e[i]);else if("touchScroll"===i)this.model.enableTouchScroll?(this._vScrollbar&&this._on(this.content(),"mousedown touchstart",{d:this._vScrollbar._scrollData},this._mouseDownOnContent),this._hScrollbar&&this._on(this.content(),"mousedown touchstart",{d:this._hScrollbar._scrollData},this._mouseDownOnContent)):this._off(this.content(),"mousedown touchstart");else if("scrollOneStepBy"===i)this._vScrollbar&&(this._vScrollbar._scrollData.scrollOneStepBy=e[i],this._vScrollbar.model.smallChange=e[i]),this._hScrollbar&&(this._hScrollbar._scrollData.scrollOneStepBy=e[i],this._hScrollbar.model.smallChange=e[i]);else{if("buttonSize"!==i){"height"===i&&(this._eleHeight=e[i]),"width"===i&&(this._eleWidth=e[i]),this.refresh();break}this._vScrollbar&&(this._vScrollbar.model.buttonSize=this.model.buttonSize),this._hScrollbar&&(this._hScrollbar.model.buttonSize=this.model.buttonSize),this.refresh()}},_createScrollbar:function(i,o){var n,r,s,l,a,h,d,c=this,u=document.createElement("div");return i===t.ScrollBar.Orientation.Vertical?(r=this.model.scrollerSize,s=n=t.isNullOrUndefined(this.model.height)||"string"!=typeof this.model.height||-1==this.model.height.indexOf("%")?this.model.height-(o?this.model.scrollerSize:0):this.element.height()-(o?this.model.scrollerSize:0),l=this.content()[0].scrollHeight,a=this.scrollTop()):(r=n=this.model.width-(o?this.model.scrollerSize:0),s=this.model.scrollerSize,t.isNullOrUndefined(this.model.width)||"string"!=typeof this.model.width||-1==this.model.width.indexOf("%")?(h=this.content().find(this.model.targetPane),l=null!=this.model.targetPane&&h.length?h[0].scrollWidth+h.parent().width()-h.width():this.content()[0].scrollWidth):(r=n=this.element.width()-(o?this.model.scrollerSize:0),l=this.content()[0].scrollWidth),a=this.scrollLeft()),this.element.children(".e-hscrollbar").length>0?e(this.element.children(".e-hscrollbar")).before(u):this.element.append(u),e(u).ejScrollBar({elementHeight:c._eleHeight,elementWidth:c._eleWidth,buttonSize:c.model.buttonSize,orientation:i,viewportSize:n,height:s,width:r,maximum:l-n,value:a,smallChange:this.model.scrollOneStepBy,largeChange:3*this.model.scrollOneStepBy,scroll:t.proxy(this._scrollChanged,this),thumbEnd:t.proxy(this._thumbEnd,this),thumbStart:t.proxy(this._thumbStart,this),thumbMove:t.proxy(this._thumbMove,this)}),d=e(u).ejScrollBar("instance"),i!==t.ScrollBar.Orientation.Vertical&&o||this._off(this.element,"msie"==this._browser?"wheel mousewheel":"mousewheel DOMMouseScroll",this._mouseWheel)._on(this.element,"msie"==this._browser?"wheel mousewheel":"mousewheel DOMMouseScroll",{d:d._scrollData},this._mouseWheel),i===t.ScrollBar.Orientation.Horizontal?this._scrollXdata=d._scrollData:this._scrollYdata=d._scrollData,i===t.ScrollBar.Orientation.Horizontal&&this.model.enableRTL&&(d._scrollData.enableRTL=!0),d._enabled=this.model.enabled,d},_updateScrollbar:function(i,o){var n=i===t.ScrollBar.Orientation.Vertical?this._vScrollbar:this._hScrollbar;n&&(i===t.ScrollBar.Orientation.Vertical?(n.model.width=this.model.scrollerSize,n.model.height=n.model.viewportSize=this.model.height-(o?this.model.scrollerSize:0),n.model.maximum=this.content()[0].scrollHeight-n.model.viewportSize,n.model.value=this.scrollTop()):(n.model.width=n.model.viewportSize=this.model.width-(o?this.model.scrollerSize:0),n.model.height=this.model.scrollerSize,n.model.maximum=(null!=this.model.targetPane&&this.content().find(this.model.targetPane).length>0?this.content().find(this.model.targetPane)[0].scrollWidth+(this.content().width()-e(this.model.targetPane).outerWidth()):this.content()[0].scrollWidth)-n.model.viewportSize,this.model.enableRTL||(n.model.value=this.scrollLeft())))},_autohide:function(){this.model.autoHide?(this.element.addClass("e-autohide"),this._on(this.element,"mouseenter mouseleave touchstart touchend",this._scrollerHover),this.content().siblings(".e-scrollbar.e-js").hide()):(this.element.removeClass("e-autohide"),this._off(this.element,"mouseenter mouseleave touchstart touchend",this._scrollerHover),this.content().siblings(".e-scrollbar.e-js").show())},_scrollChanged:function(i){this._updateScroll=!0,i.scrollTop!==o?this.scrollY(i.scrollTop,!0,"",i.source):i.scrollLeft!==o&&this.scrollX(i.scrollLeft,!0,"",i.source),this._updateScroll=!1;var n=this;e.when(this.content()).done(t.proxy(function(){n._trigger("scrollEnd",{scrollData:i})}))},_bindBlurEvent:function(o,n){this._scrollEle=e(o).data("ejScrollBar"),this._event=n;this._listener=function(){this._scrollEle._off(e(document),"mousemove touchmove",this._scrollEle._mouseMove),e(document).off("mouseup touchend",t.proxy(this._scrollEle._mouseUp,this._scrollEle)),this._scrollEle._prevY=null,this._off(e(document),"mousemove touchmove",this._mouseMove),this._off(e(document),"mouseup touchend",this._mouseUp),this._off(e(i),"blur"),this._evtData.handler,this._scrollEle._trigger("thumbEnd",{originalEvent:this._event,scrollData:this._evtData})},this._on(e(i),"blur",this._listener)},_thumbStart:function(e){this._evtData=e.scrollData;var t=(e.scrollData.handler,this.element.find("."+e.scrollData.handler).closest(".e-scrollbar"));e.scrollData.handler,t=this.element.find("."+e.scrollData.handler).closest(".e-scrollbar");this._bindBlurEvent(t,e),this._trigger("thumbStart",e)},_thumbMove:function(e){this._trigger("thumbMove",e)},_thumbEnd:function(t){this._trigger("thumbEnd",t),this._off(e(i),"blur")},refresh:function(i){var o,n;i||this.element.find(">.e-content").removeAttr("style"),t.isNullOrUndefined(this._eleHeight)||"string"!=typeof this._eleHeight||-1==this._eleHeight.indexOf("%")||this._parentHeight==e(this.element).parent().height()||(o=(o=this._exactElementDimension(this.element.parent())).height-(this.border_bottom+this.border_top+this.padding_bottom+this.padding_top),this.model.height=this._convertPercentageToPixel(parseInt(this._eleHeight),o)),t.isNullOrUndefined(this._eleWidth)||"string"!=typeof this._eleWidth||-1==this._eleWidth.indexOf("%")||this._parentWidth==e(this.element).parent().width()||(o=(o=this._exactElementDimension(this.element.parent())).width-(this.border_left+this.border_right+this.padding_left+this.padding_right),this.model.width=this._convertPercentageToPixel(parseInt(this._eleWidth),o)),this._ensureScrollers(),n=this.scrollLeft(),this.model.enableRTL?(this.element.hasClass("e-rtl")||this.element.addClass("e-rtl"),this._rtlScrollLeftValue=this.content().scrollLeft(),n>0?this.content().scrollLeft(n):this._setScrollLeftValue(n)):this.content().scrollLeft(n),(this.scrollTop()&&null==this._vScrollbar||null!==this._vScrollbar&&null!=this._vScrollbar._scrollData&&!this._vScrollbar._scrollData.skipChange)&&this.content().scrollTop(this.scrollTop()),this._vScrollbar&&(this._vScrollbar._scrollData.dimension="Height",this._updateScrollbar(t.ScrollBar.Orientation.Vertical,this._hScroll),this._vScroll&&!this._vScrollbar._calculateLayout(this._vScrollbar._scrollData)&&this._vScrollbar._updateLayout(this._vScrollbar._scrollData)),this._hScrollbar&&(this._hScrollbar._scrollData.dimension="Width",this._updateScrollbar(t.ScrollBar.Orientation.Horizontal,this._vScroll),this._hScroll&&!this._hScrollbar._calculateLayout(this._hScrollbar._scrollData)&&this._hScrollbar._updateLayout(this._hScrollbar._scrollData)),"msie"==t.browserInfo().name&&"8.0"==t.browserInfo().version?this.element.find(".e-hhandle").css("left","0px"):null!=this.model.targetPane&&this._on(this.content().find(this.model.targetPane),"scroll",this._scroll),this._addActionClass(),this._autohide()},_exactElementDimension:function(e){var t,i,o,n=e.get(0).getBoundingClientRect(),r=["left","right","top","bottom"];for(t=n.width?n.width:n.right-n.left,i=n.height?n.height:n.bottom-n.top,o=0;o<r.length;o++)this["border_"+r[o]]=isNaN(parseFloat(e.css("border-"+r[o]+"-width")))?0:parseFloat(e.css("border-"+r[o]+"-width")),this["padding_"+r[o]]=isNaN(parseFloat(e.css("padding-"+r[o])))?0:parseFloat(e.css("padding-"+r[o]));return{width:t,height:i}},_keyPressed:function(e,i){if(this.model.enabled){if(-1!==["input","select","textarea"].indexOf(i.tagName.toLowerCase()))return!0;var o,n;if(-1!==["up","down","pageUp","pageDown"].indexOf(e))this._vScrollbar&&("msie"==t.browserInfo().name&&this.model.allowVirtualScrolling&&this._content.focus(),o=this._vScrollbar._scrollData),n="o";else{if(-1===["left","right","pageLeft","pageRight"].indexOf(e))return!0;this._hScrollbar&&(o=this._hScrollbar._scrollData),n="i"}return!o||!this._changeTop(o,(e.indexOf(n)<0?-1:1)*("p"!==e[0]?1:3)*o.scrollOneStepBy,"key")}},scrollY:function(e,i,o,n,r){if(""!==e){if(i){r={source:n||"custom",scrollData:this._vScrollbar?this._vScrollbar._scrollData:null,scrollTop:e,originalEvent:r};if(this._trigger("scroll",r))return;return e=r.scrollTop,this.scrollTop(e),void this.content().scrollTop(e)}(t.isNullOrUndefined(o)||""===o)&&(o=100),this._vScrollbar&&(e=parseFloat(e)>this._vScrollbar._scrollData.scrollable?this._vScrollbar._scrollData.scrollable:parseFloat(e)),this.scrollTop(e),this.content().stop().animate({scrollTop:e},o,"linear"),this._trigger("scroll",{source:n||"custom",scrollData:this._vScrollbar?this._vScrollbar._scrollData:null,scrollTop:e,originalEvent:r})}},scrollX:function(e,i,o,n,r){var s;if(""!==e){if(this._hScrollbar&&(e=parseFloat(e)>this._hScrollbar._scrollData.scrollable?this._hScrollbar._scrollData.scrollable:parseFloat(e)),this._externalCall=!0,s=t.browserInfo().name,this.model.enableRTL&&"mozilla"!=s&&(e<0&&(e=Math.abs(e)),null!=this.model.targetPane?this.content().find(this.model.targetPane)[0]:this.content()[0],"mousemove"!=r&&"touchmove"!=r&&"msie"!=s&&"msie"!=s&&(e=this._hScrollbar._scrollData.scrollable-e)),this.scrollLeft(e),i){if(this._trigger("scroll",{source:n||"custom",scrollData:this._hScrollbar?this._hScrollbar._scrollData:null,scrollLeft:e,originalEvent:r}))return;return void(null!=this.model.targetPane&&this.content().find(this.model.targetPane).length?this.content().find(this.model.targetPane).scrollLeft(e):this.content().scrollLeft(e))}(t.isNullOrUndefined(o)||""===o)&&(o=100),null!=this.model.targetPane&&this.content().find(this.model.targetPane).length?this.content().find(this.model.targetPane).stop().animate({scrollLeft:e},o,"linear"):this.content().stop().animate({scrollLeft:e},o,"linear"),this._trigger("scroll",{source:n||"custom",scrollData:this._hScrollbar?this._hScrollbar._scrollData:null,scrollLeft:e,originalEvent:r})}},enable:function(){var e=this.element.find(".e-vscrollbar,.e-hscrollbar,.e-vscroll,.e-hscroll,.e-vhandle,.e-hhandle,.e-vscroll .e-icon,.e-hscroll .e-icon");e.hasClass("e-disable")&&(e.removeClass("e-disable").attr({"aria-disabled":!1}),this.model.enabled=!0),this._vScrollbar&&(this._vScrollbar._enabled=this.model.enabled),this._hScrollbar&&(this._hScrollbar._enabled=this.model.enabled)},disable:function(){this.element.find(".e-vscrollbar,.e-hscrollbar,.e-vscroll,.e-hscroll,.e-vhandle,.e-hhandle,.e-vscroll .e-icon,.e-hscroll .e-icon").addClass("e-disable").attr({"aria-disabled":!0}),this.model.enabled=!1,this._vScrollbar&&(this._vScrollbar._enabled=this.model.enabled),this._hScrollbar&&(this._hScrollbar._enabled=this.model.enabled)},_changeTop:function(e,i,o,n){var r,s=null!=this.model.targetPane&&"height"!=e.dimension?this.content().find(this.model.targetPane)[e.scrollVal]():this.content()[e.scrollVal]();return"height"==e.dimension&&0==s&&(s=0!=this.scrollTop()?this.scrollTop():0),r=s+i,(e.enableRTL?r<e.scrollable:r>e.scrollable)&&(r=e.scrollable),(e.enableRTL?r>0:r<0)&&(r=0),r!==s&&(this["scroll"+e.xy](r,!0,"",o,n),"X"!==e.xy||t.isNullOrUndefined(this._hScrollbar)?t.isNullOrUndefined(this._vScrollbar)||this._vScrollbar.scroll(r,o,!0,n):this._hScrollbar.scroll(r,o,!0,n)),r!==s},_mouseWheel:function(t){var o;if((this._vScrollbar||t.shiftKey)&&t.data&&this.model.enabled){var n,r=0,s=t.data.d,l=t;if(t=t.originalEvent,this._wheelStart&&this._trigger("wheelStart",{originalEvent:t,scrollData:l.data.d}),this._wheelStart=!1,clearTimeout(e.data(this,"timer")),1!=this._wheelx&&(0==t.wheelDeltaX||0==t.wheelDeltaY)&&(this._wheelx=1),0==navigator.platform.indexOf("Mac")&&0==this._wheelx&&("webkit"==this._browser||"chrome"==this._browser))return!0;"mozilla"==this._browser?t.axis==t.HORIZONTAL_AXIS?s=this._scrollXdata:this._scrollYdata:"msie"==this._browser?("wheel"==t.type&&(r=t.deltaX/120),"mousewheel"==t.type&&t.shiftKey&&(s=this._scrollXdata,t.preventDefault?t.preventDefault():t.returnValue=!1)):this._wheelx&&0!=t.wheelDeltaX&&0==t.wheelDeltaY&&this._scrollXdata&&(s=this._scrollXdata),0==t.wheelDeltaX&&(this._wheelx=t.wheelDeltaX),t.wheelDelta?(r=0==navigator.platform.indexOf("Mac")?-t.wheelDelta/3:-t.wheelDelta/120,i.opera&&parseFloat(i.opera.version,10)<10&&(r=-r)):t.detail&&(r=t.detail/3),r&&(l.originalEvent&&(n=l.originalEvent.wheelDelta&&l.originalEvent.wheelDelta>0||l.originalEvent.detail&&l.originalEvent.detail<0?-1:1),this._changeTop(s,r*s.scrollOneStepBy,"wheel",t)?(t.preventDefault?t.preventDefault():l.preventDefault(),l.stopImmediatePropagation(),l.stopPropagation(),this._trigger("wheelMove",{originalEvent:t,scrollData:l.data.d,direction:n})):(this._trigger("scrollEnd",{originalEvent:t,scrollData:l}),this._wheelx=0),o=this,e.data(this,"timer",setTimeout(function(){o._wheelStart=!0,o._trigger("wheelStop",{originalEvent:t,scrollData:l.data.d,direction:n})},250)))}},_scrollerHover:function(e){"mouseenter"!=e.type&&"touchstart"!=e.type||this.content().siblings().is(":visible")?("mouseleave"==e.type||"touchend"==e.type)&&this.content().siblings().hide():this.content().siblings().css("display","block")},_mouseUp:function(o){if(o.data){var n=o.data.d;"mouseup"!==o.type&&"touchend"!==o.type&&(o.toElement||o.relatedTarget)||(this.content().css("cursor","default"),this._off(e(document),"mousemove touchmove"),this._off(e(document),"mouseup touchend",this._mouseUp),n.fromScroller=!1,!0!==this._mouseMoved||"thumb"!==o.data.source||t.isNullOrUndefined(this.model)||(e.when(this.content()).done(t.proxy(function(){this._trigger("thumbEnd",{originalEvent:o,scrollData:n})},this)),this._off(e(i),"blur"))),n.up=!0}},_mouseDownOnContent:function(n){var r,s;if(this._velocity=0,this.model.enabled&&(r=n.data.d,this._evtData=n.data,this._startX=n.clientX!=o?n.clientX:n.originalEvent.changedTouches[0][r.clientXy],this._startY=n.clientY!=o?n.clientY:n.originalEvent.changedTouches[0][r.clientXy],this._timeStart=n.timeStamp||Date.now(),r.handler,s=this.element.find("."+r.handler).closest(".e-scrollbar"),this._bindBlurEvent(s,n),!this._trigger("thumbStart",{originalEvent:n,scrollData:r}))&&(3!=n.which||2!=n.button)){r.fromScroller=!0;var l,a=null,h=1;this._document=e(document),this._window=e(i),this._mouseMove=function(e){var i,n,s;if(this._relDisX=(this._startx=e.clientX!=o?e.clientX:e.originalEvent.changedTouches[0][r.clientXy])-this._startX,this._relDisY=(this._starty=e.clientY!=o?e.clientY:e.originalEvent.changedTouches[0][r.clientXy])-this._startY,this._duration=(e.timeStamp||Date.now())-this._timeStart,this._velocityY=Math.abs(this._relDisY)/this._duration,this._velocityX=Math.abs(this._relDisX)/this._duration,e.preventDefault(),"iframe"===e.target.tagName.toLowerCase())return e.type="mouseup",void this._mouseUp(e);if(i="mousemove"==e.type?e[r.clientXy]:e.originalEvent.changedTouches[0][r.clientXy],a&&i!==a&&(this._mouseMoved=!0,n=i-a,s=this.model[r.scrollVal]-n,1==h&&Math.abs(n)>5&&(l=r.position,h=0),0==h&&(a=i),s>=0&&s<=r.scrollable&&l===r.position)){var d=this._velocityY>.5&&this._duration<50&&"Top"==r.position,c=this._velocityX>.5&&this._duration<50&&"Left"==r.position;(this._velocityY>.5||this._velocityX>.5)&&this._duration<50?d?(s=Math.abs(this._relDisY)+this._duration*this._velocityY,this._startY>this._starty?(s+=this.scrollTop())>r.scrollable&&(s=r.scrollable):s<this.scrollTop()&&(s=Math.abs(s-this.scrollTop())),this.scrollTop()<=r.scrollable&&this.scrollY(s,!1,this.model.animationSpeed,"thumb")):c&&(s=Math.abs(this._relDisX),this._startX>this._startx?(s+=this.scrollLeft())>r.scrollable&&(s=r.scrollable):(s-=this.scrollLeft(),((s=Math.abs(s))>r.scrollable||s>=this.scrollLeft())&&(s=0)),this.scrollLeft()<=r.scrollable&&this.scrollX(s,!1,this.model.animationSpeed,"thumb")):(this["scroll"+r.xy](s,!0,"","thumb",e.type),"X"===r.xy?this._hScrollbar.scroll(s,"thumb",!0,e.type):t.isNullOrUndefined(this._vScrollbar)||this._vScrollbar.scroll(s,"thumb",!0,e.type),this.content().css("cursor","pointer"),this._trigger("thumbMove",{originalEvent:e,scrollData:r}))}null==a&&(a=i)},this._on(e(document),"mousemove touchmove",{d:r,source:"thumb"},this._mouseMove),this._mouseMoved=!1,this._on(e(document),"mouseup touchend",{d:r,source:"thumb"},this._mouseUp)}},_scroll:function(e){for(var i,o,n=[this._vScrollbar?this._vScrollbar._scrollData:null,this._hScrollbar?this._hScrollbar._scrollData:null],r=0;r<2;r++)if((i=n[r])&&!i.skipChange){if(this._externalCall||("height"===i.dimension?this.scrollTop(e.target[i.scrollVal]):this.scrollLeft(e.target[i.scrollVal])),i.sTop=this.model&&null!=this.model.targetPane&&1==r&&this.content().find(this.model.targetPane).length?this.content().find(this.model.targetPane)[0][i.scrollVal]:"scrollTop"==i.scrollVal?this.scrollTop():this.scrollLeft(),this[i.scrollVal](i.sTop),i.fromScroller)return;1===r?(o=this.content()[0],this._rtlScrollLeftValue&&o.scrollWidth-o.clientWidth!=this._rtlScrollLeftValue&&(this._rtlScrollLeftValue=o.scrollWidth-o.clientWidth),i.sTop=this.model&&"mozilla"!=t.browserInfo().name&&this.model.enableRTL&&!this._hScrollbar._scrollData._scrollleftflag?0==this._rtlScrollLeftValue?-1*i.sTop:i.sTop-this._rtlScrollLeftValue:i.sTop,this._hScrollbar.scroll(i.sTop,"",!0)):this._vScrollbar.scroll(i.sTop,"",!0),(2==n.length&&1==r||1==n.length&&0==r)&&(this._externalScroller=!1)}},_changevHandlerPosition:function(e){var t=this._vScrollbar;t&&(e=null!=t._scrollData&&e>=t._scrollData.scrollable?t._scrollData.scrollable:e,null!=t&&e>=0&&e<=t._scrollData.scrollable&&t[t._scrollData.handler].css(t._scrollData.lPosition,e/t._scrollData.onePx+"px"))},_changehHandlerPosition:function(e){var t=this._hScrollbar;t&&(e=null!=t._scrollData&&e>=t._scrollData.scrollable?t._scrollData.scrollable:e,null!=t&&top>=0&&e<=t._scrollData.scrollable&&t[t._scrollData.handler].css(t._scrollData.lPosition,e/t._scrollData.onePx+"px"))},_destroy:function(){this.element.css({width:"",height:""}).find(".e-vscrollbar,.e-hscrollbar").remove(),this.content().removeClass("e-content").css({width:"",height:""})}})}(jQuery,Syncfusion,window)});var postmd,conciergeSupportMd,experience,subject,currentTime,updateCurrentTime,isConciergeRequestPopup,isUserAccess,isAdmin,updateMd,currentEjUploadId,currentMdeId,orgFileName,__extends=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)};function renderMde(e){return new EasyMDE({element:$(e)[0],status:!1,spellChecker:!1,autoDownloadFontAwesome:!1,toolbar:!1,previewRender:function(e){return customMarkdownParser(e)},minHeight:"130px"})}function setSendFeedbackCookie(e){postmd.value("");experience="",subject="",$(".sub-button").removeClass("button-bg-change"),$(".smiley-change").removeClass("smiley-select"),$("#general-feedback-popup").addClass("display-none"),$.ajax({type:"POST",url:feedbackCookieUrl,data:{cookieType:e}})}function openFeedbackWindow(){null!=$("#general-feedback-popup").data("ejDialog")?$("#general-feedback-popup").ejDialog("open"):$("#general-feedback-popup").ejDialog({width:"520px",height:"490px",showOnInit:!0,allowDraggable:!1,enableResize:!1,showHeader:!1,enableModal:!0,beforeOpen:function(){$("#general-feedback-popup").removeClass("display-none")},beforeClose:function(){$("#general-feedback-popup").addClass("display-none")}})}
/**
 * easymde v2.4.2
 * Copyright Jeroen Akkerman
 * @link https://github.com/ionaru/easy-markdown-editor
 * @license MIT
 */function resetValidationBoxSupport(){$("#attach-file").ejUploadbox("refresh"),$("#attach-file-textbox").closest("div").removeClass("has-error"),$("#attach-file-textbox").removeClass("validation-failed-text"),$("#attach-file-textbox").val(window.Server.App.LocalizationContent.BrowsePath)}function resetValidationBoxUpdate(){$("#reply-attach-file").ejUploadbox("refresh"),$("#reply-attach-file-textbox").closest("div").removeClass("has-error"),$("#reply-attach-file-textbox").removeClass("validation-failed-text"),$("#reply-attach-file-textbox").val(window.Server.App.LocalizationContent.BrowsePath)}function OnConciergeSupportOpen(){$("#concierge-support-subject").focus()}function OnConciergeSupportClose(){$("#concierge-support-popup_wrapper").ejWaitingPopup("hide")}function ValidateConciergeSupportRequest(e){var t=conciergeSupportMd.value().trim();$("#concierge-support-subject").val().trim().length>0&&t.length>0?$("#concierge-submit-button").removeAttr("disabled"):$("#concierge-submit-button").attr("disabled",!0)}function getConciergeUserAccess(e){$.ajax({type:"POST",url:checkConciergeUserAccess,success:function(t){t.Status&&($("#terms-info").appendTo("#concierge-support-checkbox"),isUserAccess=t.UserAccess,isAdmin=t.IsAdmin,t.UserAccess?(t.IsAdmin?("syncfusion"===appBranding?$(".concierge-support-access").html(window.Server.App.LocalizationContent.AlreadyHaveUserAccessAdmin_syncfusion+" <a class='app-hyperlink' href='"+conciergeSupportSettingsUrl+"' target='_blank'>"+window.Server.App.LocalizationContent.Here+".<a>"):$(".concierge-support-access").html(window.Server.App.LocalizationContent.AlreadyHaveUserAccessAdmin_boldbi+" <a class='app-hyperlink' href='"+conciergeSupportSettingsUrl+"' target='_blank'>"+window.Server.App.LocalizationContent.Here+".<a>"),$("#admin-access-message").hide()):("syncfusion"===appBranding?$(".concierge-support-access").html(window.Server.App.LocalizationContent.AlreadyHaveUserAccess_syncfusion):$(".concierge-support-access").html(window.Server.App.LocalizationContent.AlreadyHaveUserAccess_boldbi),$("#admin-access-message").text(window.Server.App.LocalizationContent.AlreadyHaveUserAccessManageAdmin).show()),$("#terms-info").appendTo("#concierge-support-checkbox label[for='concierge-access-checkbox']"),$(".concierge-support-access").addClass("hide-checkbox")):($(".concierge-support-access").html(window.Server.App.LocalizationContent.AllowUserAccess),t.IsAdmin?($("#concierge-access-checkbox").attr("disabled",!1),$("#admin-access-message").hide()):($("#concierge-access-checkbox").attr("disabled",!0),$("#admin-access-message").text(window.Server.App.LocalizationContent.AllowUserAccessCheckAdmin).show()),$("#terms-info").insertAfter("#concierge-support-checkbox label[for='concierge-access-checkbox']"),$(".concierge-support-access").removeClass("hide-checkbox"),$("#concierge-access-checkbox").removeAttr("checked")),$("#concierge-support-checkbox").show(),$(".conceirge-loader").css("display","none"),ValidateConciergeSupportRequest(e))}})}function renderMdeForSupport(e){return new EasyMDE({element:$(e)[0],status:!1,spellChecker:!1,autoDownloadFontAwesome:!1,placeholder:"Type your message or paste images here.",toolbar:!1,previewRender:function(e){return customMarkdownParser(e)},minHeight:"130px"})}function GetCurrentTime(){return currentTime=$.now()}function GetUpdateIncidentCurrentTime(){return updateCurrentTime=$.now()}function AppendFileDownloadPath(e){var t=e.match(/(?:\!\[\]\((.*?)\))/g),i=[];if(null!=t){for(var o=0;o<t.length;o++)i[o]=t[o].split(/[\(\\!\[\ \]\\)\s]+/),i[o]=$.grep(i[o],function(e){return e});for(var n="",r=0;r<i.length;r++)i[r]=i[r].toString(),-1!==i[r].indexOf("image-")&&""!=(n=supportFilePath+i[r])&&(i[r]="![]("+i[r]+")",n="![]("+n+")",e=e.replace(i[r],n))}return e}function addFileLink(){$("<input />").attr("type","hidden").attr("name","FileName").attr("value",$("#support-file-name-update").val()).appendTo("#incidentUpdateForm"),$("<input />").attr("type","hidden").attr("name","Link").attr("value",$("#support-file-path-update").val()).appendTo("#incidentUpdateForm")}function pasteImageReader(e){var t={DataUrl:e};$.ajax({type:"POST",url:supportImageUrl,data:t,success:function(e){if(""!==e&&-1!==e.indexOf("image-")){var t=" ![]("+e+")";"updateMde"===currentMdeId?updateMd.codemirror.replaceSelection(AppendFileDownloadPath(t)):conciergeSupportMd.codemirror.replaceSelection(t)}"updateMde"===currentMdeId?$("#reply").ejWaitingPopup("hide"):$("#concierge-support-popup_wrapper").ejWaitingPopup("hide")}})}function openSupportDialog(e,t){resetValidationBoxSupport(),isConciergeRequestPopup=e,null==conciergeSupportMd&&(conciergeSupportMd=renderMde("#concierge-support-message")),e?(getConciergeUserAccess(t),$("#concierge-support-popup #support-dialog-header").text(window.Server.App.LocalizationContent.RequestConciergeSupport),$("#concierge-support-popup #concierge-support-description-label").text(window.Server.App.LocalizationContent.ConciergeSupportDescription).show(),$("#concierge-support-checkbox").show(),$("#create-new-concierge").hide()):($("#concierge-support-popup #support-dialog-header").text(window.Server.App.LocalizationContent.SupportTitle),$("#concierge-support-popup #concierge-support-description-label").hide(),$("#create-new-concierge").show(),$("#concierge-support-checkbox").hide()),$("#concierge-support-popup").ejDialog("open"),$("#concierge-info").popover()}function renderMdeWithToolbar(e){var t=new EasyMDE({element:$(e)[0],status:!1,spellChecker:!1,placeholder:"Type your message or paste images here.",autoDownloadFontAwesome:!1,toolbar:[{name:"bold",action:EasyMDE.toggleBold,className:"su su-bold",title:window.Server.App.LocalizationContent.Bold},{name:"italic",action:EasyMDE.toggleItalic,className:"su su-italic",title:window.Server.App.LocalizationContent.Italic},{name:"heading",action:EasyMDE.toggleHeadingSmaller,className:"su su-header",title:window.Server.App.LocalizationContent.Heading},"|",{name:"quote",action:EasyMDE.toggleBlockquote,className:"su su-quote",title:window.Server.App.LocalizationContent.Quote},{name:"unordered-list",action:EasyMDE.toggleUnorderedList,className:"su su-list-ul",title:window.Server.App.LocalizationContent.Generic},{name:"ordered-list",action:EasyMDE.toggleOrderedList,className:"su su-list-ol",title:window.Server.App.LocalizationContent.Number},"|",{name:"link",action:EasyMDE.drawLink,className:"su su-link",title:window.Server.App.LocalizationContent.Link},{name:"image",action:EasyMDE.drawImage,className:"su su-image",title:window.Server.App.LocalizationContent.Image},{name:"preview",action:EasyMDE.togglePreview,className:"su su-preview no-disable",title:window.Server.App.LocalizationContent.Preview}],previewRender:function(e){return customMarkdownParser(e)}});return"comment-image-file"==$(".su-upload-image").attr("id")?$(".su-upload-image").attr("id","comment-image-edit-file"):$(".su-upload-image").attr("id","comment-image-file"),t}function customMarkdownParser(e){var t=[],i=[],o=[],n=/(?:\@\ (.*?))/g,r=new EasyMDE({element:$("#temp")[0],spellChecker:!1,autoDownloadFontAwesome:!1}),s=e;if(null!=(t=s.match(/(?:\@(.*?))/g))){t=jQuery.unique(t);for(var l=0;l<t.length;l++){var a=new RegExp(t[l],"g");s=s.replace(a,"<span class='cm-usercontainer'>"+t[l]+"</span>")}}if(null!=(i=s.match(n))){i=jQuery.unique(s.match(n));for(l=0;l<i.length;l++){a=new RegExp(i[l],"g");s=s.replace(a,"<span class='cm-groupcontainer'>"+i[l]+"</span>")}}if(null!=(o=s.match(/(@all)/g))){o=jQuery.unique(o);for(l=0;l<o.length;l++){a=new RegExp(o[l],"g");s=s.replace(o[l],"<span class='cm-allcontainer'>"+o[l]+"</span>")}}s=r.options.previewRender(s),$("#toRemoveCulture").html(s),splitter=window.location.href.split("/")[4]+"/";for(var h=$("#toRemoveCulture a"),d=0;d<h.length;d++)h[d].setAttribute("target","_blank"),h[d].href=h[d].href.split(splitter)[1];var c=$("#toRemoveCulture img");for(d=0;d<c.length;d++)c[d].setAttribute("target","_blank"),-1!==c[d].src.indexOf(splitter)&&(c[d].src=c[d].src.split(splitter)[1]);return s=$("#toRemoveCulture").html()}function extractXSRFTokenFromCookie(){var e=parent.document.cookie.split("; ").find(e=>e.startsWith("XSRF-TOKEN="));return e?e.split("=")[1]:null}function setXSRFRequestHeader(e){e.setRequestHeader("X-XSRF-TOKEN",extractXSRFTokenFromCookie())}function decodeHtmlAsString(e){var t=document.createElement("textarea");return t.innerHTML=e,t.value}function EscapeHtml(e){return e.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}!function(e){var t=function(t){function i(i,o){return t.call(this),this._rootCSS="e-tooltip",this._setFirst=!1,this.PluginName="ejTooltip",this.id="null",this.model=null,this.defaults={height:"auto",width:"auto",enabled:!0,content:null,containment:"body",target:null,title:null,closeMode:"none",autoCloseTimeout:4e3,position:{stem:{horizontal:"center",vertical:"bottom"},target:{horizontal:"center",vertical:"top"}},associate:"target",collision:"flipfit",showShadow:!1,cssClass:null,animation:{effect:"none",speed:0},isBalloon:!0,showRoundedCorner:!1,enableRTL:!1,allowKeyboardNavigation:!0,tip:{size:{width:20,height:10},adjust:{xValue:0,yValue:0}},trigger:"hover",create:null,click:null,destroy:null,hover:null,tracking:null,beforeOpen:null,beforeClose:null,open:null,close:null},this.dataTypes={enabled:"boolean",closeMode:"enum",autoCloseTimeout:"number",trigger:"enum",position:{stem:"data",target:"data"},associate:"enum",collision:"enum",showShadow:"boolean",animation:{effect:"enum",speed:"number"},isBalloon:"boolean",showRoundedCorner:"boolean",enableRTL:"boolean",allowKeyboardNavigation:"boolean",tip:{size:{width:"number",height:"number"},adjust:{xValue:"number",yValue:"number"}}},this.isTrack=!0,this._isCancel=!1,this._isHidden=!0,this.arrowValue={left:0,top:0,width:0,height:0,display:null},this.tooltipPos={width:0,height:0,left:0,top:0,bottom:0,right:0,position:"absolute"},this.targetPos={width:0,height:0,left:0,top:0,bottom:0,right:0,position:"absolute"},this.mouseTimer=null,this.positionTarget=null,this.positionTooltip=null,this.containerSize=null,this._createTitle=function(){this.tooltipTitle=ej.buildTag("div.e-def e-header"," ",{},{}),this.tooltipHeader=ej.buildTag("div"," ",{},{}),e(this.tooltipTitle).html(this.model.title).appendTo(this.tooltipHeader)},i&&(i.jquery||(i=e("#"+i)),i.length)?e(i).ejTooltip(o).data(this.PluginName):void 0}return __extends(i,t),i.prototype.setModel=function(e,t){this.setModel(e,t)},i.prototype.option=function(e,t){this.option(e,t)},i.prototype.triggerEvents=function(e,t){var i,o,n,r,s,l,a;switch(e){case"click":o=t,i=this._trigger(e,o);break;case"hover":n=t,i=this._trigger(e,n);break;case"tracking":r=t,i=this._trigger(e,r);break;case"beforeOpen":s=t,i=this._trigger(e,s);break;case"open":l=t,i=this._trigger(e,l);break;case"beforeClose":case"close":a=t,i=this._trigger(e,a)}return i},i.prototype.enable=function(){this.tooltip.hasClass("e-disable")&&(this.model.enabled=!0,this.tooltip.removeClass("e-disable"))},i.prototype.disable=function(){this.tooltip.hasClass("e-disable")||(this.model.enabled=!1,this.tooltip.addClass("e-disable"))},i.prototype.show=function(t,i){if(this.model.enabled){if(ej.isNullOrUndefined(t)){var o=null==this.model.target?this.element:e(this.element).find(this.model.target+":first");this._positionElement(o)}else this._positionElement(t);ej.isNullOrUndefined(i)?this._showTooltip():"string"==typeof i?e(this.tooltip).show(i):"function"==typeof i&&i.call.apply(this.tooltip)}},i.prototype.hide=function(t){this.model.enabled&&(ej.isNullOrUndefined(t)?this._hideTooltip():"string"==typeof t?e(this.tooltip).hide(t):"function"==typeof t&&t.call.apply(this.tooltip))},i.prototype._destroy=function(){this.mouseTimer&&clearTimeout(this.mouseTimer),this.timer&&clearTimeout(this.timer),e(this.tooltip).remove(),this.tooltip=null},i.prototype._setModel=function(t){var i,o;for(i in t)switch(i){case"height":this._setHeight(t[i]);break;case"width":this._setWidth(t[i]);break;case"enabled":this._enabled(t[i]);break;case"content":this._setContent(t[i]);break;case"title":this.model.title=t[i],null==this.model.title?(e(this.tooltipHeader).remove(),this.tooltipHeader=null,this.tooltipTitle=null,this.model.closeMode===ej.Tooltip.CloseMode.Sticky&&this._iconRender()):ej.isNullOrUndefined(this.tooltipHeader)?this._createHeader():e(this.tooltipTitle).html(this.model.title),this.tooltipPos.height=e(this.tooltip).outerHeight();break;case"associate":this.model.associate=t[i],this._wireMouseEvents(!1),this._wireMouseEvents(!0);break;case"position":this._setPosition(t[i]);break;case"collision":this.model.collision=t[i];break;case"closeMode":void 0!==t[i]&&(this.model.closeMode=t[i],this.model.closeMode==ej.Tooltip.CloseMode.Sticky?this._iconRender():(e(this.tooltipClose).remove(),this.tooltipClose=null),this.tooltipPos.height=e(this.tooltip).outerHeight());break;case"cssClass":this._setSkin(t[i]);break;case"showShadow":this._shadowEffect(t[i],this.model.position);break;case"isBalloon":ej.isNullOrUndefined(t[i])||(this.model.isBalloon=t[i],this.model.isBalloon?this._renderArrow():(e(this.tip).remove(),this.tip=null));break;case"animation":o=t[i],this.model.animation=e.extend(!0,this.model.animation,o),this.model.animation.effect!=ej.Tooltip.Effect.None?(this._off(e(this.tooltip),"mouseenter",this._onTooltipMouseEnter),this._off(e(this.tooltip),"mouseleave",this._onTooltipMouseLeave)):this.model.animation.effect==ej.Tooltip.Effect.None&&(this._on(e(this.tooltip),"mouseenter",this._onTooltipMouseEnter),this._on(e(this.tooltip),"mouseleave",this._onTooltipMouseLeave));break;case"enableRTL":this._setRTL(t[i]);break;case"target":this._wireTriggerEvents(!1),this.model.target=t[i],this._wireTriggerEvents(!0),this._renderTarget();break;case"trigger":this._setTrigger(t[i]);break;case"showRoundedCorner":this.model.showRoundedCorner=t[i],this._roundedCorner(t[i]);break;case"allowKeyboardNavigation":this.model.allowKeyboardNavigation=t[i],this.model.allowKeyboardNavigation?this._on(e(window),"keydown",this._keyDown):this._off(e(window),"keydown",this._keyDown)}},i.prototype._enabled=function(e){e?this.enable(e):this.disable(e),this.model.enabled=e},i.prototype._shadowEffect=function(t,i){this.model.showShadow=t;var o=null;if(e(this.tooltip).removeClass("e-tooltipShadowLeft e-tooltipShadowRight"),this.model.showShadow){if(this.model.isBalloon)switch(i.stem.horizontal){case"center":o="top"==i.stem.vertical?"e-tooltipShadowLeft":"bottom"==i.stem.vertical?"e-tooltipShadowRight":"e-tooltipShadowLeft";break;case"right":o="center"==i.target.horizontal&&"top"==i.stem.vertical?"e-tooltipShadowLeft":"e-tooltipShadowRight";break;case"left":o="center"==i.target.horizontal&&"bottom"==i.stem.vertical?"e-tooltipShadowRight":"e-tooltipShadowLeft"}else o="e-tooltipShadowLeft";e(this.tooltip).addClass(o)}},i.prototype._setContent=function(t){this.model.content=t,e(this.tooltipContent).html(this.model.content),this.tooltipPos.height=e(this.tooltip).outerHeight(),this.tooltipPos.width=e(this.tooltip).outerWidth()},i.prototype._setPosition=function(t){this.model.position.stem=e.extend(!0,this.model.position.stem,t.stem),this.model.position.target=e.extend(!0,this.model.position.target,t.target)},i.prototype._setTrigger=function(e){this._wireTriggerEvents(!1),this.model.trigger=e,this._wireTriggerEvents(!0)},i.prototype._init=function(){this.id=this.element[0].id,this.positionTarget=e.extend(!0,{},this.model.position.target),this.positionTooltip=e.extend(!0,{},this.model.position.stem),this.tipSize=e.extend(!0,{},this.model.tip.size),this._initialize(),this._render(),this.enable(this.model.enabled),this._wireEvents(!0)},i.prototype._initialize=function(){ej.isNullOrUndefined(this.model.target)?ej.isNullOrUndefined(this.model.content)&&!ej.isNullOrUndefined(this.element.attr("title"))&&(this.model.content=this.element.attr("title"),this.element.attr("data-content",this.model.content),this.element.removeAttr("title")):this._renderTarget()},i.prototype._wireEvents=function(t){var i=t?"_on":"_off";this._wireTriggerEvents(t),this.model.allowKeyboardNavigation&&this[i](e(window),"keydown",this._keyDown),null!=this.model.target?this[i](this.element,"scroll",this.model.target,this._hideTooltip):this[i](this.element,"scroll",this._hideTooltip),this[i](e(this.tooltip),"mouseenter",this._onTooltipMouseEnter),this[i](e(this.tooltip),"mouseleave",this._onTooltipMouseLeave),this[i](e(window),"resize",this._hideTooltip),this[i](e(window),"touchend",this._docTouchEndHandler)},i.prototype._wireTriggerEvents=function(e){var t,i=e?"_on":"_off";this.model.trigger==ej.Tooltip.Trigger.Focus?null!=this.model.target?this[i](this.element,"blur",this.model.target,this._hideTooltip):this[i](this.element,"blur",this._hideTooltip):null!=this.model.target?this[i](this.element,ej.isDevice()?"touchstart":"mouseleave",this.model.target,this._onMouseOut):this[i](this.element,ej.isDevice()?"touchstart":"mouseleave",this._onMouseOut),this._wireMouseEvents(e),t=this.model.trigger==ej.Tooltip.Trigger.Click?ej.isDevice()?"touchstart":"click":this.model.trigger==ej.Tooltip.Trigger.Focus?ej.isDevice()?"touchstart":"focus":ej.isDevice()?"touchstart":"mouseenter",null!=this.model.target?this[i](this.element,t,this.model.target,this._targetHover):this[i](this.element,t,this._targetHover)},i.prototype._wireMouseEvents=function(e){var t=e?"_on":"_off";(this.model.associate==ej.Tooltip.Associate.MouseEnter||this.model.associate==ej.Tooltip.Associate.MouseFollow)&&(null!=this.model.target?this[t](this.element,ej.isDevice()?"touchstart":"mousemove",this.model.target,this._tooltipMove):this[t](this.element,ej.isDevice()?"touchstart":"mousemove",this._tooltipMove))},i.prototype._render=function(){this.tooltip=ej.buildTag("div.e-tooltip-wrap e-widget","",{},{role:"tooltip","aria-readonly":"true","aria-hidden":"true","aria-describedby":this.id+"_content",id:this.id+"_Main"}),this.tooltipInter=ej.buildTag("div.e-tipContainer","",{},{}),this.tooltip.append(this.tooltipInter),this.model.isBalloon&&this._renderArrow(),e(this.model.containment).append(this.tooltip),this._setHeight(this.model.height),this._setWidth(this.model.width),this._createHeader(),this._tooltipContent(),this.model.cssClass&&this.tooltip.addClass(this.model.cssClass),this.model.showRoundedCorner&&this._roundedCorner(this.model.showRoundedCorner),this.model.enableRTL&&this._setRTL(this.model.enableRTL),e(this.tooltip).css({top:"auto",left:"auto"}),this.tooltipPos={width:e(this.tooltip).outerWidth(),height:e(this.tooltip).outerHeight(),left:e(this.tooltip).offset().left,top:e(this.tooltip).offset().top,position:"absolute"},ej.isNullOrUndefined(this.model.target)&&(this._containerCalc(this.element),this._positionElement(this.element))},i.prototype._containerCalc=function(t){ej.isNullOrUndefined(t)&&(t=this.element);var i=e(t).offset();this.containerSize={height:"body"==this.model.containment?e(window).innerHeight()||document.documentElement.clientHeight||document.body.clientHeight:e(this.model.containment).innerHeight(),width:"body"==this.model.containment?e(window).innerWidth()||document.documentElement.clientWidth||document.body.clientWidth:e(this.model.containment).innerWidth()},this.containerSize.left="body"!=this.model.containment&&"static"==e(this.model.containment).css("position")?e(this.model.containment).offset().left-e(this.model.containment).offsetParent().offset().left:0,this.containerSize.top="body"!=this.model.containment&&"static"==e(this.model.containment).css("position")?e(this.model.containment).offset().top-e(this.model.containment).offsetParent().offset().top:0,i.left-="body"!=this.model.containment?"static"==e(this.model.containment).css("position")?e(this.model.containment).offsetParent().offset().left:e(this.model.containment).offset().left:0,i.top-="body"!=this.model.containment?"static"==e(this.model.containment).css("position")?e(this.model.containment).offsetParent().offset().top:e(this.model.containment).offset().top:0,this.targetPos.left=i.left,this.targetPos.top=i.top},i.prototype._setHeight=function(t){this.model.height=t,!isNaN(+t)&&isFinite(t)?e(this.tooltip).css("height",t+"px"):e(this.tooltip).css("height",t),this.tooltipPos.height=e(this.tooltip).outerHeight()},i.prototype._setWidth=function(t){this.model.width=t,"auto"!=this.model.width&&(t=!isNaN(+t)&&isFinite(t)?t+"px":t,e(this.tooltip).css("max-width",t),e(this.tooltip).css("min-width","0px")),e(this.tooltip).css("width",t),this.tooltipPos.height=e(this.tooltip).outerHeight()},i.prototype._setRTL=function(e){this.model.enableRTL=e,e?this.tooltip.addClass("e-rtl"):this.tooltip.removeClass("e-rtl")},i.prototype._setSkin=function(e){this.model.cssClass!=e&&(this.tooltip.removeClass(this.model.cssClass).addClass(e),this.model.cssClass=e)},i.prototype._roundedCorner=function(){this.model.showRoundedCorner?this.tooltip.addClass("e-corner"):this.tooltip.removeClass("e-corner")},i.prototype._renderArrow=function(){ej.isNullOrUndefined(this.tip)&&(this.tip=ej.buildTag("div.e-arrowTip"," ",{id:this.id+"_eTip"},{}),e(this.tip).append("<div class='e-arrowTipOuter'></div>").append("<div class='e-arrowTipInner'></div>"),e(this.tip).insertBefore(this.tooltipInter))},i.prototype._adjustArrow=function(t){var i,o,n=e(this.tooltip).width(),r=e(this.tooltip).height(),s=t.stem,l=t.target,a={tipHeight:0,tipWidth:0};"right"==l.horizontal||"left"==l.horizontal?(i="left"==s.horizontal?-this.model.tip.size.height:"right"==s.horizontal?n:n/2-this.tipSize.width/2,o="center"!=s.horizontal?"top"==s.vertical?5:"center"==s.vertical?r/2-this.tipSize.width/2:r-5-this.tipSize.width:"top"==s.vertical?-this.tipSize.height:"bottom"==s.vertical?r:this.tooltipPos.height/2-this.tipSize.width/2,a=this._arrowBinding(t,"horizontal")):(o="top"==s.vertical?-this.tipSize.height:"bottom"==s.vertical?r:r/2-this.tipSize.width/2,i="center"==s.vertical?"left"==s.horizontal?-this.model.tip.size.height:n:"left"==s.horizontal?10:"center"==s.horizontal?this.tooltipPos.width/2-this.tipSize.width/2:n-10-this.tipSize.width,a=this._arrowBinding(t,"vertical")),this.arrowValue.left=i,this.arrowValue.top=o,e(this.tip).css({height:a.tipHeight+"px",width:a.tipWidth+"px",left:i+"px",top:o+"px",display:"center"==s.horizontal&&"center"==s.vertical?"none":"block"})},i.prototype._arrowBinding=function(t,i){var o,n,r=t.stem,s="horizontal"==i?"center"!=r.horizontal:"center"==r.vertical,l=e(this.tooltip).css("border-top-color"),a=e(this.tooltip).css("background-color"),h=this.model.tip.size.height,d=this.model.tip.size.height-1,c={"border-top":"none","border-bottom":"none","border-right":"none","border-left":"none"};return s?(o=this.model.tip.size.height,n=this.model.tip.size.width,e(this.tip).find(".e-arrowTipOuter").css(this._arrow(t,h,l,c,"horizontal")),e(this.tip).find(".e-arrowTipInner").css(this._arrow(t,d,a,c,"horizontal"))):(o=this.model.tip.size.width,n=this.model.tip.size.height,e(this.tip).find(".e-arrowTipOuter").css(this._arrow(t,h,l,c,"vertical")),e(this.tip).find(".e-arrowTipInner").css(this._arrow(t,d,a,c,"vertical"))),{tipHeight:n,tipWidth:o}},i.prototype._arrow=function(e,t,i,o,n){var r=e.stem,s="horizontal"==n&&"right"==r.horizontal?"0px":"1px",l="horizontal"==n?"1px":"bottom"==r.vertical?"0px":"1px";return o["border-top"]="horizontal"==n?t+"px solid transparent":"bottom"==r.vertical?t+"px solid "+i:"none",o["border-bottom"]="horizontal"==n?t+"px solid transparent":"top"==r.vertical?t+"px solid "+i:"none",o["border-right"]="horizontal"==n?"left"==r.horizontal?t+"px solid "+i:"none":t+"px solid transparent",o["border-left"]="horizontal"==n?"right"==r.horizontal?t+"px solid "+i:"none":t+"px solid transparent",t==this.model.tip.size.height-1&&(o.left=s,o.top=l),o},i.prototype._iconRender=function(){this.model.closeMode==ej.Tooltip.CloseMode.Sticky&&(ej.isNullOrUndefined(this.tooltipClose)||e(this.tooltipClose).remove(),this.tooltipClose=ej.buildTag("div .e-icon"," ",{},{id:"_closeIcon"}),null!=this.model.title?e(this.tooltipClose).insertAfter(this.tooltipTitle).addClass("e-close"):e(this.tooltipClose).insertBefore(this.tooltipInter).addClass("e-cross-circle"),this._on(e(this.tooltipClose),"click",this._hideTooltip))},i.prototype._renderTarget=function(){this.targetElement=e(this.element).find(this.model.target);for(var t=0;t<this.targetElement.length;t++)ej.isNullOrUndefined(e(this.targetElement[t]).attr("title"))||(this.targetElement[t].setAttribute("data-content",this.targetElement[t].title),this.targetElement[t].removeAttribute("title"))},i.prototype._tooltipContent=function(){this.tooltipContent=ej.buildTag("div.e-tipcontent e-def","",{},{id:this.id+"_content"}),e(this.tooltipContent).html(this.model.content).addClass("e-def"),null!=this.model.title?e(this.tooltipContent).insertAfter(this.tooltipHeader):e(this.tooltipContent).appendTo(this.tooltipInter)},i.prototype._positionElement=function(t){this.tooltipPos.width=e(this.tooltip).outerWidth(),this.tooltipPos.height=e(this.tooltip).outerHeight(),this.targetPos.width=e(t).outerWidth(),this.targetPos.height=e(t).outerHeight(),this._containerCalc(t),this.model.associate==ej.Tooltip.Associate.Window?this._browserPosition():this.model.associate==ej.Tooltip.Associate.Axis?this._axisPosition():this.model.associate==ej.Tooltip.Associate.Target&&this._tooltipPosition(this.model.position),this.model.collision!=ej.Tooltip.Collision.None&&this.model.associate==ej.Tooltip.Associate.Target&&this._calcCollision(this.model.position,t)},i.prototype._browserPosition=function(){if("body"==this.model.containment){this.containerSize={height:e(window).innerHeight()||document.documentElement.clientHeight||document.body.clientHeight,width:e(window).innerWidth()||document.documentElement.clientWidth||document.body.clientWidth};var t=e.extend(!0,{},this.model.position),i={position:"absolute",left:"auto",top:"auto",bottom:"auto",right:"auto"};ej.isNullOrUndefined(this.tip)||e(this.tip).css({display:"none"}),"right"==this.model.position.target.horizontal?i.right=0:i.left="left"==this.model.position.target.horizontal?0:this.containerSize.width/2-this.tooltipPos.width/2,"top"==this.model.position.target.vertical?i.top=0:"center"==this.model.position.target.vertical?i.top=this.containerSize.height/2-this.tooltipPos.height/2:i.bottom=0,this.model.showShadow&&this._shadowEffect(this.model.showShadow,t),e(this.tooltip).css(i)}},i.prototype._tooltipMove=function(e){if(this.model.closeMode==ej.Tooltip.CloseMode.None&&this.model.enabled){var t=this;if(this._isCancel)return;this.model.associate==ej.Tooltip.Associate.MouseFollow?this._mousePosition(e):this.model.associate==ej.Tooltip.Associate.MouseEnter&&(clearTimeout(this.mouseTimer),this.mouseTimer=setTimeout(function(){t.isTrack&&t._mousePosition(e)},300))}},i.prototype._mousePosition=function(t){var i,o,n;"touchstart"==t.type?(t.preventDefault(),i=t.touches[0].pageX,o=t.touches[0].pageY):"mousemove"==t.type&&(i=t.pageX,o=t.pageY),this.isCollision=!0,this._containerCalc(t.currentTarget);var r=0,s=0,l=0,a=e.extend(!0,{},this.model.position.stem),h=e.extend(!0,{},this.model.position),d={left:0,top:0},c={left:i,top:o},u={left:i,top:o},p=this.containerSize.left,f=this.containerSize.top,m="body"!=this.model.containment?i-e(this.model.containment).offset().left:i,g="body"!=this.model.containment?o-e(this.model.containment).offset().top:o;for(h.target.horizontal=h.target.vertical="center","body"!=this.model.containment&&(d="static"==e(this.model.containment).css("position")?e(this.model.containment).offsetParent().offset():e(this.model.containment).offset()),u.left-=d.left,u.top-=d.top;this.isCollision;)if(c=e.extend(!0,{},u),this.model.isBalloon&&("top"==a.vertical||"bottom"==a.vertical)?5+this.tipSize.height/2:0,n=this.model.isBalloon&&("right"==a.horizontal||"left"==a.horizontal)?10+this.tipSize.width/2:0,r=0!=this.model.tip.adjust.xValue?this.model.tip.adjust.xValue:7,s=0!=this.model.tip.adjust.yValue?this.model.tip.adjust.yValue:10,l=this.model.isBalloon?"center"!=a.horizontal||"center"!=a.vertical?this.model.tip.size.height:0:2,c.left+="right"==a.horizontal?-this.tooltipPos.width:"left"==a.horizontal?0:-this.tooltipPos.width/2,c.top+="bottom"==a.vertical?-this.tooltipPos.height:"top"==a.vertical?0:-this.tooltipPos.height/2,c.left+="center"!=a.vertical?"right"==a.horizontal?n:"left"==a.horizontal?-n:0:0,c.left+="center"==a.vertical?"right"==a.horizontal?-l:"left"==a.horizontal?+(l+r):0:0,c.top+="top"==a.vertical?+(l+s):"bottom"==a.vertical?-l:0,this.targetElement!=t.currentTarget&&(this.targetElement=t.currentTarget,(c.left<p||c.left+this.tooltipPos.width>p+this.containerSize.width)&&(this.positionTooltip.horizontal=m>=this.tooltipPos.width?"right":this.containerSize.width-m>=this.tooltipPos.width?"left":"center"),(c.top<f||c.top+this.tooltipPos.height>this.containerSize.height+f)&&(this.positionTooltip.vertical=g>=this.tooltipPos.height?"bottom":this.containerSize.height-g>=this.tooltipPos.height?"top":"center")),this.positionTooltip.horizontal!=a.horizontal||this.positionTooltip.vertical!=a.vertical)this.isCollision=!0,a=e.extend(!0,{},this.positionTooltip);else if(this.isCollision=!1,e(this.tooltip).css({top:c.top+"px",left:c.left+"px",position:"absolute",right:"auto",bottom:"auto"}),h.stem=e.extend(!0,{},this.positionTooltip),this.model.showShadow&&this._shadowEffect(this.model.showShadow,h),this.model.isBalloon&&this._adjustArrow(h),this._showTooltip(),this.model.associate==ej.Tooltip.Associate.MouseEnter&&(this.isTrack=!1),this.model.associate==ej.Tooltip.Associate.MouseFollow&&this.triggerEvents("tracking",{position:this.model.position,event:t}))return},i.prototype._axisPosition=function(){var t,i,o,n,r=e.extend(!0,{},this.model.position);"number"==typeof this.model.position.target.horizontal&&(t=this.model.position.target.horizontal.toString()),"number"==typeof this.model.position.target.vertical&&(i=this.model.position.target.vertical.toString()),o=parseInt(t),n=parseInt(i),ej.isNullOrUndefined(this.tip)||e(this.tip).css({display:"none"}),this.model.showShadow&&this._shadowEffect(this.model.showShadow,r),this.model.isBalloon&&this._adjustArrow(r),isFinite(o)&&isFinite(n)&&e(this.tooltip).css({top:n,left:o,position:"absolute"})},i.prototype._tooltipPosition=function(t){var i=e.extend(!0,{},t.stem),o=e.extend(!0,{},t.target),n=e.extend(!0,{},this.targetPos),r="top"===i.vertical||"bottom"===i.vertical?5+this.tipSize.width/2:0,s="right"===i.horizontal||"left"===i.horizontal?10+this.tipSize.width/2:0,l=this.model.isBalloon&&("center"!==i.horizontal||"center"!==i.vertical)?this.model.tip.size.height:0,a=0!=this.model.tip.adjust.xValue?this.model.tip.adjust.xValue:this.model.isBalloon?0:2,h=0!=this.model.tip.adjust.yValue?this.model.tip.adjust.yValue:this.model.isBalloon?0:2;n.left+="right"===o.horizontal?this.targetPos.width:"left"===o.horizontal?0:this.targetPos.width/2,n.top+="bottom"===o.vertical?this.targetPos.height:"top"===o.vertical?0:this.targetPos.height/2,n.left+="right"===i.horizontal?-this.tooltipPos.width:"left"===i.horizontal?0:-this.tooltipPos.width/2,n.top+="bottom"===i.vertical?-this.tooltipPos.height:"top"===i.vertical?0:-this.tooltipPos.height/2,n.left+="center"!==o.horizontal||"center"===i.vertical?"right"===i.horizontal?-l:"left"===i.horizontal?l:0:0,n.top+="center"===o.horizontal||"center"===i.horizontal?"bottom"===i.vertical?-l:"top"===i.vertical?l:0:0,n.left+="center"===o.horizontal&&"center"!==i.vertical?"right"===i.horizontal?s:"left"===i.horizontal?-s:0:0,n.top+="center"!==o.horizontal&&"center"!==i.horizontal?"top"===i.vertical?-r:"bottom"===i.vertical?r:0:0,n.left+="center"!==o.horizontal||"center"===i.vertical?"right"===i.horizontal?-a:"left"===i.horizontal?a:0:0,n.top+="center"===o.horizontal||"center"===i.horizontal?"bottom"===i.vertical?-h:"top"===i.vertical?h:0:0,this.tooltipPos.left=n.left,this.tooltipPos.top=n.top,this.model.collision===ej.Tooltip.Collision.None&&(this.model.isBalloon&&this._adjustArrow(t),this._shadowEffect(this.model.showShadow,t),e(this.tooltip).css({top:n.top+"px",left:n.left+"px",position:"absolute"}))},i.prototype._calcCollision=function(t,i){t=e.extend(!0,{},t);var o=e.extend(!0,{},t),n=this.model.tip.size.height,r=!0,s="body"!=this.model.containment?e(i).offset().left-e(this.model.containment).offset().left:e(i).offset().left,l="body"!=this.model.containment?e(i).offset().top-e(this.model.containment).offset().top:e(i).offset().top,a={topSpace:l,rightSpace:this.containerSize.width-(s+this.targetPos.width),bottomSpace:this.containerSize.height-(l+this.targetPos.height),leftSpace:s,centerRight:this.containerSize.width-(s+this.targetPos.width/2),centerLeft:s+this.targetPos.width/2,centerTop:l+this.targetPos.height/2,centerBottom:this.containerSize.height-(l+this.targetPos.height/2),tooltipWidth:this.tooltipPos.width+n,tooltipHeight:this.tooltipPos.height+n};if(this.model.collision===ej.Tooltip.Collision.Fit)this._collisionFit(t,a);else{for(;r;)(o=this._collisionFlip(o,a)).target.horizontal!=t.target.horizontal||o.target.vertical!=t.target.vertical||o.stem.horizontal!=t.stem.horizontal||o.stem.vertical!=t.stem.vertical?(this._tooltipPosition(o),t=e.extend(!0,{},o)):r=!1;r||(this.model.collision==ej.Tooltip.Collision.FlipFit?this._collisionFit(o,a):(this._adjustArrow(o),this._shadowEffect(this.model.showShadow,o),e(this.tooltip).css({top:this.tooltipPos.top+"px",left:this.tooltipPos.left+"px",position:"absolute"})))}},i.prototype._collisionFlip=function(t,i){var o=e.extend(!0,{},this.tooltipPos),n=e.extend(!0,{},t),r=e(this.model.containment).scrollLeft(),s=e(this.model.containment).scrollTop(),l=this.containerSize.left,a=this.containerSize.top;return(o.left+o.width>l+this.containerSize.width+r||o.left<l)&&("center"!=t.target.horizontal?n.target.horizontal=i.leftSpace>=i.tooltipWidth?"left":i.rightSpace>=i.tooltipWidth?"right":"center":n.stem.horizontal=i.centerLeft>=i.tooltipWidth?"right":i.centerRight>=i.tooltipWidth?"left":"center"),o.top<a&&(n.target.vertical=i.bottomSpace>=i.tooltipHeight?"bottom":"center"),o.top+o.height>this.containerSize.height+s+a&&(n.target.vertical=i.topSpace>=i.tooltipHeight?"top":"center"),(n.target.horizontal!=t.target.horizontal||n.target.vertical!=t.target.vertical)&&(n.stem.horizontal="center"==n.target.horizontal?i.centerLeft>=i.tooltipWidth?"right":i.centerRight>=i.tooltipWidth?"left":"center":"right"==n.target.horizontal?"left":"right"),(n.target.vertical!=t.target.vertical||n.target.horizontal!=t.target.horizontal)&&(n.stem.vertical="center"==n.target.vertical?i.centerTop>=i.tooltipHeight?"bottom":i.centerBottom>=i.tooltipHeight?"top":i.centerTop>i.centerBottom?"bottom":"top":"top"==n.target.vertical?"bottom":"top"),n},i.prototype._collisionFit=function(t,i){var o,n,r,s,l,a,h=e.extend(!0,{},this.tooltipPos),d=!1,c=!1,u=1,p=1,f=e(this.model.containment).scrollLeft();n="body"==this.model.containment?document.documentElement.scrollTop||document.body.scrollTop:e(this.model.containment).scrollTop(),r=this.containerSize.left,s=this.containerSize.top,(h.left<r||h.left+h.width>this.containerSize.width+f+r)&&(u=h.left<r?r:h.left+h.width>this.containerSize.width+f+r?h.left-(h.left+h.width-(this.containerSize.width+r)):1,d=!0),(h.top<s||h.top+h.height>this.containerSize.height+n+s)&&(p=h.top<s?s:h.top+h.height>this.containerSize.height+n+s?h.top-(h.top+h.height-(this.containerSize.height+s)):1,c=!0),e(this.tooltip).css({top:1!=p?p+"px":h.top+"px",left:1!=u?u+"px":h.left+"px",position:"absolute"}),this._adjustArrow(t),o={left:this.arrowValue.left,top:this.arrowValue.top,height:this.model.tip.size.height,width:this.model.tip.size.width,display:e(this.tip).css("display")},this.tooltipPos.top=p=1!=p?p:h.top,this.tooltipPos.left=u=1!=u?u:h.left,l=e(this.tooltip).width(),a=e(this.tooltip).height(),(d||c&&"none"!=o.display)&&(this.model.isBalloon&&(d&&(this.arrowValue.left=this._horizontalAdjustment(t,i)),c&&(this.arrowValue.top=this._verticalAdjustment(t,i))),this.arrowValue.left==-this.model.tip.size.height||this.arrowValue.left==l||this.arrowValue.top==-this.model.tip.size.height||this.arrowValue.top==a?e(this.tip).css({left:this.arrowValue.left+"px",top:this.arrowValue.top+"px",display:"block"}):e(this.tip).css({left:this.arrowValue.left+"px",top:this.arrowValue.top+"px",display:"none"})),this._shadowEffect(this.model.showShadow,t)},i.prototype._horizontalAdjustment=function(t,i){var o,n,r={left:this.arrowValue.left,top:this.arrowValue.top};return e(this.tooltip).css({display:"block"}),t.target.horizontal,o=this.model.tip.size.height,n="center"!=t.target.horizontal&&"left"==t.stem.horizontal?e(this.tip).offset().left:"center"!=t.target.horizontal&&"right"==t.stem.horizontal?e(this.tip).offset().left+o:e(this.tip).offset().left,e(this.tooltip).css({display:"none"}),n>i.leftSpace&&n+o<i.leftSpace+this.targetPos.width||(n>i.leftSpace+this.targetPos.width||n<i.leftSpace)&&(r.left=i.leftSpace+this.targetPos.width/2-parseInt(this.tooltipPos.left.toString())),r.left},i.prototype._verticalAdjustment=function(t,i){var o,n,r={left:this.arrowValue.left,top:this.arrowValue.top,height:this.model.tip.size.height,width:this.model.tip.size.width,display:this.arrowValue.display};return e(this.tooltip).css({display:"block"}),t.target.horizontal,o=this.model.tip.size.height,n="center"==t.target.horizontal&&"top"==t.stem.vertical?e(this.tip).offset().top:e(this.tip).offset().top+o,e(this.tooltip).css({display:"none"}),n>i.topSpace&&n<i.topSpace+this.targetPos.height||(n<i.topSpace||n+o>i.topSpace+this.targetPos.height)&&(r.top=i.topSpace+this.targetPos.height/2-parseInt(this.tooltipPos.top.toString())),r.top},i.prototype._createHeader=function(){null!=this.model.title&&(ej.isNullOrUndefined(this.tooltipTitle)&&this._createTitle(),ej.isNullOrUndefined(this.tooltipContent)?e(this.tooltipHeader).appendTo(this.tooltipInter).addClass("e-tooltipHeader"):e(this.tooltipHeader).insertBefore(this.tooltipContent).addClass("e-tooltipHeader")),this.model.closeMode==ej.Tooltip.CloseMode.Sticky&&this._iconRender()},i.prototype._hideTooltip=function(){var t;if(this._isHidden=!0,t=0!=this.model.animation.speed?this.model.animation.speed:this.model.animation.effect==ej.Tooltip.Effect.Slide?200:this.model.animation.effect==ej.Tooltip.Effect.Fade?800:0,1==this.model.enabled&&"block"==e(this.tooltip).css("display")){if(this.triggerEvents("beforeClose",{}))return;if(this.model.animation.effect==ej.Tooltip.Effect.Fade?e(this.tooltip).fadeOut(t):this.model.animation.effect==ej.Tooltip.Effect.Slide?e(this.tooltip).slideUp(t):e(this.tooltip).css({display:"none"}),"none"==e(this.tooltip).css("display")&&e(this.tooltip).attr("aria-hidden","true").removeClass("e-customAnimation"),this.triggerEvents("close",{}))return}},i.prototype._showTooltip=function(){var t,i,o,n,r,s;this._isHidden&&(t=0!=this.model.animation.speed?this.model.animation.speed:this.model.animation.effect==ej.Tooltip.Effect.Slide?200:this.model.animation.effect==ej.Tooltip.Effect.Fade?800:0,this._isHidden=!1,"none"==e(this.tooltip).css("display")&&1==this.model.enabled&&(this.model.animation.effect==ej.Tooltip.Effect.Fade?e(this.tooltip).fadeIn(t):this.model.animation.effect==ej.Tooltip.Effect.Slide?e(this.tooltip).slideDown(t):e(this.tooltip).css({display:"block"}),"block"==e(this.tooltip).css("display")&&(i=e(this.tooltip[0]).parents(),o=e("body").children(),e(o).each(function(e,t){i.push(t)}),n=e(this.model.target).parents(),e(n).each(function(e,t){i.push(t)}),!(r=Math.max.apply(r,e.map(i,function(t){if("static"!=e(t).css("position"))return parseInt(e(t).css("z-index"))||1})))||r<1e4?r=1e4:r+=1,e(this.tooltip).attr("aria-hidden","false").css({zIndex:r}),this.model.animation.effect==ej.Tooltip.Effect.None&&e(this.tooltip).addClass("e-customAnimation"),s=this._getScrollableParents(),this._on(s,"scroll",this._hideTooltip)),this.triggerEvents("open",{})))},i.prototype._getScrollableParents=function(){return e(this.element).parentsUntil("html").filter(function(){return"visible"!=e(this).css("overflow")}).add(e(window))},i.prototype._tooltipAuto=function(){var e=this;this.timer=setTimeout(function(){e._hideTooltip()},e.model.autoCloseTimeout)},i.prototype._beforeOpenTooltip=function(t){this.positionTooltip=e.extend(!0,{},this.model.position.stem),this.positionTarget=e.extend(!0,{},this.model.position.target),this.targetElement=this.element,ej.isNullOrUndefined(this.model.target)||ej.isNullOrUndefined(e(t.currentTarget).attr("data-content"))||(this.model.content=e(t.currentTarget).attr("data-content"),this._setContent(this.model.content))},i.prototype._targetHover=function(e){if(this.isTrack=!0,this.model.enabled)if(this._isHidden||("msie"==ej.browserInfo().name||"edge"==ej.browserInfo().name)&&this.model.associate==ej.Tooltip.Associate.MouseFollow){if(this.tooltip.stop(!0,!0),this.triggerEvents("beforeOpen",{event:e}))return void(this._isCancel=!0);this._isCancel=!1,this._beforeOpenTooltip(e),this.model.associate!=ej.Tooltip.Associate.MouseEnter&&this.model.associate!=ej.Tooltip.Associate.MouseFollow?(ej.isNullOrUndefined(this.model.target)?this._positionElement(this.element):this._positionElement(e.currentTarget),clearTimeout(this.timer),this._showTooltip(),this.model.closeMode==ej.Tooltip.CloseMode.Auto&&this._tooltipAuto(),"click"==e.type?this.triggerEvents("click",{event:e}):this.triggerEvents("hover",{event:e})):this.isTrack=!0}else ej.isNullOrUndefined(this.model.target)||this._positionElement(e.currentTarget)},i.prototype._onMouseOut=function(){this.model.enabled&&!this._isHidden&&(this.model.closeMode==ej.Tooltip.CloseMode.None&&this._hideTooltip(),clearTimeout(this.mouseTimer)),this.isTrack=!1},i.prototype._onTooltipMouseEnter=function(){this.model.enabled&&this.model.animation.effect==ej.Tooltip.Effect.None&&e(this.tooltip).css({display:"block"})},i.prototype._onTooltipMouseLeave=function(){this.model.enabled&&this.model.animation.effect==ej.Tooltip.Effect.None&&this.model.closeMode==ej.Tooltip.CloseMode.None&&e(this.tooltip).css({display:"none"})},i.prototype._docTouchEndHandler=function(t){e(t.target).closest(".e-tooltip").length||this.model.closeMode!=ej.Tooltip.CloseMode.None||this._hideTooltip()},i.prototype._keyDown=function(e){var t=e.keyCode?e.keyCode:e.which?e.which:e.charCode;if(this.model.enabled&&27===t)e.preventDefault(),this._hideTooltip()},i}(ej.WidgetBase);window.ej.widget("ejTooltip","ej.Tooltip",new t),window.ejTooltip=null}(jQuery),ej.Tooltip.CloseMode={Auto:"auto",None:"none",Sticky:"sticky"},ej.Tooltip.Effect={Slide:"slide",Fade:"fade",None:"none"},ej.Tooltip.Trigger={Hover:"hover",Click:"click",Focus:"focus"},ej.Tooltip.Collision={Flip:"flip",FlipFit:"flipfit",None:"none",Fit:"fit"},ej.Tooltip.Associate={Window:"window",MouseFollow:"mousefollow",MouseEnter:"mouseenter",Target:"target",Axis:"axis"},
/*!
*  filename: ej.dialog.min.js
*  version : 2.4.85
*  Copyright Syncfusion Inc. 2001 - 2020. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
function(e,t){t.widget("ejDialog","ej.Dialog",{_rootCSS:"e-dialog",element:null,_ignoreOnPersist:["drag","dragStart","dragStop","resizeStop","resizeStart","resize","beforeClose","beforeOpen","collapse","expand","close","open","destroy","create","ajaxSuccess","ajaxError","contentLoad","actionButtonClick","enableResize"],model:null,validTags:["div","span"],_setFirst:!1,angular:{terminal:!1},defaults:{showOnInit:!0,closeOnEscape:!0,closeIconTooltip:"close",enableAnimation:!0,allowDraggable:!0,backgroundScroll:!0,height:"auto",minHeight:120,minWidth:200,maxHeight:null,maxWidth:null,enableModal:!1,position:{X:"",Y:""},containment:null,enableResize:!0,htmlAttributes:{},showHeader:!0,showFooter:!1,contentType:null,contentUrl:null,ajaxSettings:{type:"GET",cache:!1,data:{},dataType:"html",contentType:"html",async:!0},title:"",width:400,zIndex:1e3,cssClass:"",enableRTL:!1,allowKeyboardNavigation:!0,showRoundedCorner:!1,actionButtons:["close"],animation:{show:{effect:"fade",duration:400},hide:{effect:"fade",duration:400}},tooltip:{close:"Close",collapse:"Collapse",restore:"Restore",maximize:"Maximize",minimize:"Minimize",expand:"Expand",unPin:"UnPin",pin:"Pin"},footerTemplateId:null,locale:"en-US",faviconCSS:null,content:null,target:null,enablePersistence:!1,enabled:!0,isResponsive:!1,actionButtonClick:null,beforeClose:null,close:null,expand:null,collapse:null,beforeOpen:null,open:null,drag:null,dragStart:null,dragStop:null,resize:null,resizeStart:null,resizeStop:null,contentLoad:null,ajaxSuccess:null,ajaxError:null,create:null,destroy:null,Close:null},dataTypes:{showOnInit:"boolean",closeOnEscape:"boolean",enableAnimation:"boolean",backgroundScroll:"boolean",position:"data",animation:"data",closeIconTooltip:"string",tooltip:"data",allowDraggable:"boolean",enableModal:"boolean",enableResize:"boolean",isResponsive:"boolean",showHeader:"boolean",showFooter:"boolean",title:"string",faviconCSS:"string",zIndex:"number",cssClass:"string",enablePersistence:"boolean",contentUrl:"string",contentType:"string",enableRTL:"boolean",enabled:"boolean",allowKeyboardNavigation:"boolean",showRoundedCorner:"boolean",locale:"string",htmlAttributes:"data",ajaxSettings:"data",actionButtons:"array",footerTemplateId:"string"},_setModel:function(i){var o,n;for(o in i)switch(o){case"closeIconTooltip":this._dialogClose.attr("title",i[o]);break;case"tooltip":this._tooltipText(i[o]);break;case"title":this.model.title=i[o],this._ejDialog.find("span.e-title").length<=0?this._addTitleText():this._ejDialog.find("span.e-title").html(i[o]),this._updateCaptionWidth();break;case"width":this.model.width=i[o],this._changeSize(),this._updateCaptionWidth(),i[o]=this.model.width;break;case"height":this.model.height=i[o],this._changeSize(),i[o]=this.model.height;break;case"position":this.model.position=i[o],this._dialogPosition();break;case"cssClass":this._changeSkin(i[o]);break;case"showRoundedCorner":this.model.showRoundedCorner=i[o],this._roundedCorner(i[o]);break;case"contentType":this.model.contentType=i[o],this._appendContent(i[o]);break;case"enabled":this.model.enabled=i[o],this._enabledAction(i[o]);break;case"contentUrl":this.model.contentUrl=i[o],this._appendContent(this.model.contentType);break;case"backgroundScroll":this.model.backgroundScroll=i[o],!this.model.backgroundScroll&&this.model.enableModal?e("body").addClass("e-dialog-modal"):e("body").removeClass("e-dialog-modal");break;case"content":case"target":this._ejDialog.appendTo(e(i[o])),this.model.target=this.model.content=i[o],this._dialogPosition();break;case"containment":this._setDragArea(i[o]),t.isNullOrUndefined(this._target)?this._ejDialog.appendTo(document.body):this._ejDialog.appendTo(this._target),this.model.position.X=this.model.position.Y="",this._dialogPosition(),this.model.containment=i[o]=this._target,this.model.enableModal&&this._createOverlay(),this._dialogTitlebar.ejDraggable({dragArea:this._target});break;case"locale":this.model.locale=i[o],this.localizedLabels=this._getLocalizedLabels(),this._setLocaleCulture(this.localizedLabels,!0),this._tooltipText(this.model.tooltip),this._ejDialog.find("span.e-title").length<=0?this._addTitleText():this._ejDialog.find("span.e-title").html(this.model.title),this._updateCaptionWidth();break;case"minHeight":this.model.minHeight=i[o],this._ejDialog.css("minHeight",i[o]),this._minMaxValidation(),this._resetScroller(),this._resizeDialog();break;case"minWidth":this.model.minWidth=i[o],this._ejDialog.css("minWidth",i[o]),this._minMaxValidation(),this._resetScroller(),this._resizeDialog();break;case"maxHeight":this.model.maxHeight=i[o],this._ejDialog.css("maxHeight",i[o]),this._minMaxValidation(),this._resetScroller(),this._resizeDialog();break;case"maxWidth":this.model.maxWidth=i[o],this._ejDialog.css("maxWidth",i[o]),this._minMaxValidation(),this._resetScroller(),this._resizeDialog();break;case"zIndex":this._ejDialog.css("z-index",i[o]);break;case"faviconCSS":this.model.faviconCSS=i[o],this._favIcon(),this._updateCaptionWidth();break;case"isResponsive":this.model.isResponsive=i[o],this.model.isResponsive?this._ejDialog.addClass("e-dialog-resize"):this._ejDialog.removeClass("e-dialog-resize"),this._wireResizing();break;case"allowDraggable":this.model.allowDraggable=i[o],i[o]?this._enableDrag():this._dialogTitlebar.removeClass("e-draggable");break;case"enableResize":this.model.enableResize=i[o],i[o]?this._enableResize():(this._ejDialog.removeClass("e-resizable"),this._ejDialog.find(".e-resize-handle").remove()),this._reRenderScroller();break;case"showHeader":this.model.showHeader=i[o],i[o]?(this._renderTitleBar(),this._iconsRender(this.model.actionButtons),this.model.faviconCSS&&(this._dialogFavIcon=!1,this._favIcon()),this._enableDrag(),this._maximize||this._updateScroller(t.isNullOrUndefined(this.contentDiv)?this._ejDialog.outerHeight(!0)-1-this._dialogTitlebar.outerHeight(!0):"0px"==this.contentDiv.css("border-width"),t.isNullOrUndefined(this.contentDiv)?this._ejDialog.width()-2:"0px"==this.contentDiv.css("border-width"))):(this._ejDialog.find(".e-titlebar").remove(),this._maximize?this.refresh():this._updateScroller(t.isNullOrUndefined(this.contentDiv)?this._ejDialog.outerHeight(!0)-1:"0px"==this.contentDiv.css("border-width"),t.isNullOrUndefined(this.contentDiv)?this._ejDialog.width()-2:"0px"==this.contentDiv.css("border-width"))),this._roundedCorner(this.model.showRoundedCorner),this.model.showFooter&&this._setContainerSize()._resetScroller();break;case"showFooter":this.model.showFooter=i[o],i[o]?(this._appendContent(),this._ejDialog.find(".e-resizable").remove()):this._ejDialog.find(".e-footerbar").remove(),this._enableResize()._enableDrag()._sizeInPercent(),this._reRenderScroller(),this._setContainerSize()._resetScroller(),this._roundedCorner(this.model.showRoundedCorner);break;case"footerTemplateId":this.model.footerTemplateId=i[o],this.model.showFooter&&(this._ejDialog.find(".e-footerbar").empty(),n=e("body").find("#"+this.model.footerTemplateId).html(),this._dialogFooterbar.append(n),this._enableResize());break;case"enableRTL":this.model.enableRTL=i[o],this.model.faviconCSS&&this._favIcon(),i[o]?(this._ejDialog.addClass("e-rtl"),this.iframe&&this.iframe.contents().find("body").css("direction","rtl"),this.scroller&&this._resetScroller()):(this._ejDialog.removeClass("e-rtl"),this.iframe&&this.iframe.contents().find("body").css("direction","ltr"),this.scroller&&this._resetScroller());break;case"actionButtons":t.isNullOrUndefined(this._dialogTitlebar)||(this._removeAllIcons(),this._iconsRender(i[o])),this.model.actionButtons=i[o],this._updateCaptionWidth();break;case"enableModal":this._enableModal(i[o]);break;case"htmlAttributes":this._addAttr(i[o])}},_destroy:function(){this._overLay&&this._overLay.remove(),this._cloneElement.appendTo(this._ejDialog.parent()),this._ejDialog.remove(),this.model.enableAnimation&&this._ejDialog.stop(),this._cloneElement.removeClass("e-dialog"),this.element=this._cloneElement,this._isOpen=!1,e(window).off("resize",e.proxy(this._reSizeHandler,this))},keyConfigs:[37,38,39,40],_init:function(){this._init=!0,this._widthPercent=null,this._heightPercent=null,this._windowSize={outerWidth:e(window).outerWidth(),outerHeight:e(window).outerHeight()},this._initSize={width:this.model.width,height:this.model.height},this._sizeType={width:isNaN(this.model.width)?this.model.width.match(/px|%|auto/g)[0]:null,height:isNaN(this.model.height)?this.model.height.match(/px|%|auto/g)[0]:null},this._isOpen=this._maximize=this._minimize=!1,this.localizedLabels=this._getLocalizedLabels(),this._setLocaleCulture(this.localizedLabels),this._setDimension(),this.model.close||(this.model.close=this.model.Close),this.model.target||(this.model.target=this.model.content),this._responsive(),this._renderControl(),this._wireEvents(),this.scrObj=this._ejDialog.closest(".e-dialog.e-js").data("ejDialog"),this.scrObj&&this.scrObj._resetScroller(),this.hidden=!1,this._init=!1,this._keyNavigation=!1},_responsive:function(){this.width=this.model.width,e(this.element).width(this.width),this.height=this.model.height,e(this.element).height(this.height),e(window).on("resize",e.proxy(this._resizeHandler,this))},_resizeHandler:function(){this._maximize&&(this.width=e(this._dialogTitlebar).outerWidth(),e(this.contentDiv).width(this.width),e(this.contentDiv).children().width(this.width),this.model.height=this.height=e(window).height(),this._ejDialog.css({height:this.height}),this.contentDiv.height(this._ejDialog.height()-e(this._dialogTitlebar).outerHeight()-e(this._dialogFooterbar).outerHeight()),this.element.height(this.contentDiv.height())),t.isNullOrUndefined(this.element)||this._collapsible||this._resetScroller()},_setLocaleCulture:function(e,t){this.defaults.closeIconTooltip===this.model.closeIconTooltip&&(this.model.closeIconTooltip=e.closeIconTooltip),t&&(this.model.tooltip=this.localizedLabels.tooltip,this.model.title=this.localizedLabels.title),JSON.stringify(this.model.tooltip)===JSON.stringify(this.defaults.tooltip)&&(this.model.tooltip=e.tooltip),this.model.title===this.defaults.title&&(this.model.title=e.title)},_setDragArea:function(i){t.isNullOrUndefined(i)?this._target=null:"string"==typeof i?("parent"==i&&(this._target=e(this.element).parent()),"document"==i.toLowerCase()&&(this._target=e(document)),"window"==i.toLowerCase()?this._target=e(window):e(i).length>0&&(this._target=e(i))):"object"==typeof i?i.length>0&&(this._target=i):this._target=null},_addAttr:function(t){var i=this;e.map(t,function(e,t){if("class"==t)i._ejDialog.addClass(e);else if("disabled"==t&&"disabled"==e)i.model.enabled=!1,i._enabledAction(!1);else if(i._ejDialog[0].hasAttribute("style")){var o=i._ejDialog[0].getAttribute("style")+e;i._ejDialog.attr(t,o)}})},_tooltipText:function(i){e.extend(this.model.tooltip,i),!t.isNullOrUndefined(this._dialogClose)&&this._dialogClose.hasClass("e-close")&&this._dialogClose.attr("title",this.model.tooltip.close),!t.isNullOrUndefined(this._dialogCollapsible)&&(i.collapse||i.expand)&&(this._dialogCollapsible.hasClass("e-arrowhead-up")&&this._dialogCollapsible.attr("title",this.model.tooltip.collapse),this._dialogCollapsible.hasClass("e-arrowhead-down")&&this._dialogCollapsible.attr("title",this.model.tooltip.expand)),!t.isNullOrUndefined(this._dialogMaximize)&&(i.maximize||i.restore)&&(this._dialogMaximize.hasClass("e-maximize")&&this._dialogMaximize.attr("title",this.model.tooltip.maximize),this._dialogMaximize.hasClass("e-restore")&&this._dialogMaximize.attr("title",this.model.tooltip.restore)),!t.isNullOrUndefined(this._dialogMinimize)&&(i.minimize||i.restore)&&(this._dialogMinimize.hasClass("e-minus")&&this._dialogMinimize.attr("title",this.model.tooltip.minimize),this._dialogMinimize.hasClass("e-restore")&&this._dialogMinimize.attr("title",this.model.tooltip.restore)),!t.isNullOrUndefined(this._dialogPin)&&(i.pin||i.unPin)&&(this._dialogPin.hasClass("e-unpin")&&this._dialogPin.attr("title",this.model.tooltip.pin),this._dialogPin.hasClass("e-pin")&&this._dialogPin.attr("title",this.model.tooltip.unPin))},_renderControl:function(){var i,o,n;this._cloneElement=this.element.clone(),this.element.attr("tabindex",0).attr({role:"dialog","aria-labelledby":this.element.prop("id")+"_title"}),this._ejDialog=t.buildTag("div.e-dialog e-widget e-box "+this.model.cssClass+" e-dialog-wrap e-shadow#"+(""==this.element.prop("id")?"":this.element.prop("id")+"_wrapper"),"",{display:"none",zIndex:this.model.zIndex},{tabindex:0}),this.model.isResponsive&&this._ejDialog.addClass("e-dialog-resize"),this.wrapper=this._ejDialog,this._addAttr(this.model.htmlAttributes),this._setDragArea(this.model.containment),t.isNullOrUndefined(this.model.containment)||t.isNullOrUndefined(this._target)?t.isNullOrUndefined(this.model.target)||(i=this.model.target):i=this._target,o=t.isNullOrUndefined(i)?document.body:i,(n=e(o).find("#"+this._id+"_wrapper").get(0))&&e(n).remove(),this._ejDialog.appendTo(o),this.model.enableRTL&&this._ejDialog.addClass("e-rtl"),this.model.showHeader&&(this._renderTitleBar(),this._iconsRender(this.model.actionButtons),this.model.faviconCSS&&this._favIcon()),this._appendContent(this.model.contentType),this._enableResize()._enableDrag()._setSize(),"auto"!=this.model.height&&this._sizeInPercent(),"ajax"!=this.model.contentType&&(this.model.showOnInit&&this.open()?this._setContainerSize()._resetScroller():this._setHiddenDialogSize()),this._roundedCorner(this.model.showRoundedCorner),this._enabledAction(this.model.enabled),"auto"==this._sizeType.width&&(this._maxWidth=this.model.width),"auto"==this._sizeType.height&&(this._maxHeight=this.model.height)},_setContainerSize:function(){if("auto"!=this.model.height){var t=this._ejDialog.outerHeight()-(this.model.showHeader?e(this._ejDialog.find("div.e-titlebar")).outerHeight(!0):0)+(this.model.showFooter?e(this._ejDialog.find("div.e-footerbar")).outerHeight(!0):0)-1;this.contentDiv.height(t),this.element.outerHeight(t)}return this},_changeSize:function(){this._initSize={width:this.model.width,height:this.model.height},this._sizeType.width=isNaN(this.model.width)?this.model.width.match(/px|%|auto/g):null,this._sizeType.height=isNaN(this.model.height)?this.model.height.match(/px|%|auto/g):null,this._setSize()._sizeInPercent()._setContainerSize()._resetScroller()},_enableDrag:function(){return this.model.allowDraggable&&this.model.showHeader&&(this._dialogTitlebar.addClass("e-draggable"),this._dragDialog()),this},_enableResize:function(){if(this.model.enableResize){this._ejDialog.addClass("e-resizable");var e=t.buildTag("div.e-icon e-resize-handle");this.model.showFooter?e.appendTo(this._dialogFooterbar):e.appendTo(this._ejDialog),this._resizeDialog()}return this},_changeSkin:function(e){this.model.cssClass!=e&&this._ejDialog.removeClass(this.model.cssClass).addClass(e)},_enableModal:function(e){e?this._isOpen&&this._createOverlay():this._overLay&&this._overLay.remove()},_enabledAction:function(e){e?(this._ejDialog.removeClass("e-disable"),this.wrapper.children(".e-disable-overlay").remove(),t.isNullOrUndefined(this.scroller)||this.scroller.enable()):(this._ejDialog.addClass("e-disable"),t.buildTag("div.e-disable-overlay").appendTo(this.wrapper),t.isNullOrUndefined(this.scroller)||this.scroller.disable())},_renderTitleBar:function(){this._elementTitle=this.element.attr("title"),"string"!=typeof this._elementTitle&&(this._elementTitle=""),this.model.title=this.model.title||this._elementTitle,this._dialogTitlebar=t.buildTag("div#"+this.element.prop("id")+"_title.e-titlebar e-header e-dialog").prependTo(this._ejDialog),this._addTitleText()},_renderFooterBar:function(){this._dialogFooterbar=t.buildTag("div#"+this.element.prop("id")+"_foot.e-footerbar e-dialog e-js").appendTo(this._ejDialog)},_addTitleText:function(){return this.model.title&&(this._titleText=t.buildTag("span.e-title",this.model.title).prependTo(this._dialogTitlebar)),this},_updateCaptionWidth:function(){var e=this.model.faviconCSS&&!t.isNullOrUndefined(this._dialogFavIcon)?this._dialogFavIcon.outerWidth():0;return this._titleText&&!t.isNullOrUndefined(this._dialogTitlebar)&&this._titleText.css("max-width",this._dialogTitlebar.width()-20-this._dialogTitlebar.find(".e-dialog-icon").width()*this._dialogTitlebar.find(".e-dialog-icon").length-e),this},_iconsRender:function(i){for(var o=0;o<i.length;o++)switch("msie"==t.browserInfo().name&&t.browserInfo().version<=8?e.trim(i[o]):i[o].trim()){case"close":this._closeIcon();break;case"collapse":case"collapsible":this._collapsibleIcon();break;case"maximize":this._maximizeIcon();break;case"minimize":this._minimizeIcon();break;case"pin":this._pinIcon();break;default:this._customIconsRender(i[o])}},_customIconsRender:function(e){this._customIcon=t.util.buildTag("div#"+this.element[0].id+"_"+e+"button.e-dialog-icon e-icon e-"+e,null,null).attr("tabIndex","0").attr("title",e),this._customIcon.appendTo(this._dialogTitlebar),this._on(this._customIcon,"touchstart click",this._iconClick)},_iconClick:function(t){if(!this.element.hasClass("e-disable")){var i={cancel:!1,buttonID:e(t.target).attr("id"),event:t.type,model:this.model,currentTarget:t.currentTarget.title};this._trigger("actionButtonClick",i)}},_removeAllIcons:function(){this._dialogTitlebar.find("div.e-dialog-icon").remove()},_appendContent:function(i){var o,n,r,s,l;this.contentDiv=t.isNullOrUndefined(this.contentDiv)?t.buildTag("div.e-dialog-scroller"):this.contentDiv,this.element.removeAttr("title").addClass("e-widget-content e-box"),o=this,t.isNullOrUndefined(this.model.contentUrl)||t.isNullOrUndefined(i)?(this.dialogIframeContent=this.element.children().find("iframe").contents()[0],t.isNullOrUndefined(this.dialogIframeContent)?this.element.show().appendTo(this.contentDiv):this.element.show().appendTo(this.contentDiv).find("iframe").append(this.dialogIframeContent.lastChild)):"ajax"==i?(this.model.ajaxSettings.url=this.model.contentUrl,this._sendAjaxOptions(this.element,this.model.ajaxSettings.url)):"iframe"==i?(this.element.children(".e-iframe").length>0?(this.iframe=this.element.find("iframe.e-iframe"),this.iframe.attr("src",this.model.contentUrl)):(this.iframe=t.buildTag("iframe.e-iframe","",{width:"100%",height:"100%"},{scrolling:"auto",frameborder:0,src:this.model.contentUrl}),this.element.appendTo(this.contentDiv).append(this.iframe).show()),this.model.enableRTL&&e(this.iframe).load(function(){o.iframe.contents().find("body").css("direction","rtl")}),this._trigger("contentLoad",{contentType:i,url:this.model.contentUrl})):"image"==i?(n=t.buildTag("img.e-images","","",{src:this.model.contentUrl}),this.element.append(n).show().appendTo(this.contentDiv),e(n).on("load",function(){o._dialogPosition()}),this._trigger("contentLoad",{contentType:i,url:this.model.contentUrl})):this.element.show().appendTo(this.contentDiv),this._ejDialog.find("div.e-resize-handle").length>0?0==this._ejDialog.find(".e-footerbar").length&&this.contentDiv.insertBefore(this._ejDialog.find("div.e-resize-handle")):(r=this.element.children().find("iframe").contents()[0],t.isNullOrUndefined(r)?0==this._ejDialog.find(".e-footerbar").length?this.contentDiv.appendTo(this._ejDialog):this.contentDiv.insertBefore(this._dialogFooterbar):(this.contentDiv.appendTo(this._ejDialog),s=e("#"+this.contentDiv.find("iframe").attr("id")),e(s[0].contentDocument.lastChild).remove(),s[0].contentDocument.appendChild(r),"mozilla"==t.browserInfo().name&&setTimeout(function(){e(s[0].contentDocument.lastChild).remove(),s[0].contentDocument.appendChild(r)},500))),this.model.showFooter&&0==this._ejDialog.find(".e-footerbar").length&&(this._renderFooterBar(),null!=this.model.footerTemplateId&&(l=e("body").find("#"+this.model.footerTemplateId).html(),this._dialogFooterbar.append(l)))},_roundedCorner:function(e){this._ejDialog[e?"addClass":"removeClass"]("e-corner"),this.contentDiv.removeClass("e-dialog-top e-dialog-bottom e-dialog-content"),this.model.showRoundedCorner&&(this.model.showHeader&&!this.model.showFooter?this.contentDiv.addClass("e-dialog-bottom"):!this.model.showHeader&&this.model.showFooter?this.contentDiv.addClass("e-dialog-top"):this.model.showHeader||this.model.showFooter||this.contentDiv.addClass("e-dialog-content"))},_reRenderScroller:function(){if(null!=this.scroller&&(this.scroller.refresh(!0),!this.model.enableRTL)){if(this.scroller._vScrollbar&&this.scroller._vScrollbar._scrollData&&this.model.enableResize){if(this.model.showFooter)var e=this.scroller._vScrollbar.element.find("> div.e-vscroll").height(),t=0,i=0;else e=this.scroller._vScrollbar.element.find("> div.e-vscroll").height(),t=2,i=this._ejDialog.find("div.e-resize-handle").outerHeight();Math.floor(this.contentDiv.outerHeight())===Math.floor(this.scroller._vScrollbar.model.height+1)&&(this.scroller._vScrollbar.model.height-=i+t,this.scroller._vScrollbar._scrollData.handle-=i,this.scroller._vScrollbar._scrollData.handleSpace-=i+t,this.scroller._vScrollbar._updateLayout(this.scroller._vScrollbar._scrollData),this.scroller._vScrollbar.element.find("> div.e-vscroll").height(e-i-t))}if((!this.scroller._vScrollbar||!this.scroller._vScrollbar._scrollData)&&this.scroller._hScrollbar&&this.scroller._hScrollbar._scrollData&&this.model.enableResize){if(this.model.showFooter){var o=this.scroller._hScrollbar.element.find("> div.e-hscroll").width();t=0,i=0}else o=this.scroller._hScrollbar.element.find("> div.e-hscroll").width(),t=2,i=this._ejDialog.find("div.e-resize-handle").outerWidth();this.scroller._hScrollbar.model.width-=i+t,this.scroller._hScrollbar._scrollData.handle-=i+t,this.scroller._hScrollbar._scrollData.handleSpace-=i+t,this.scroller._hScrollbar._updateLayout(this.scroller._hScrollbar._scrollData),this.scroller._hScrollbar.element.find("> div.e-hscroll").width(o-i-t)}}},_dialogMaxZindex:function(){var t,i,o,n=this.element.parents();return t=e("body").children(),e(t).each(function(e,t){n.push(t)}),i=e(this.model.target).children(),e(i).each(function(e,t){n.push(t)}),!(o=Math.max.apply(o,e.map(n,function(t){if("static"!=e(t).css("position"))return parseInt(e(t).css("z-index"))||1})))||o<1e4?o=1e4:o+=1,o},_setZindex:function(){var e=this._dialogMaxZindex();this.model.zIndex<=e&&this._ejDialog.css({zIndex:e+1})},_createOverlay:function(){var i,o=this._ejDialog.css("zIndex");t.isNullOrUndefined(this._overLay)||this._overLay.remove(),this.model.backgroundScroll||e("body").addClass("e-dialog-modal"),this._overLay=t.buildTag("div#"+this.element.attr("id")+"_overLay.e-overlay","",{zIndex:o-1}),e(this._overLay).addClass("e-widget"),t.isNullOrUndefined(this.model.containment)||t.isNullOrUndefined(this._target)?t.isNullOrUndefined(this.model.target)||(i=this.model.target):i=this._target,this._overLay.appendTo(t.isNullOrUndefined(i)?document.body:i);var n=t.isNullOrUndefined(this.model.containment)||t.isNullOrUndefined(this._target)?"fixed":"absolute",r=t.isNullOrUndefined(i)||"fixed"==n||"static"!=e(i).css("position").toLowerCase()?0:e(i).offset().left,s=t.isNullOrUndefined(i)||"fixed"==n||"static"!=e(i).css("position").toLowerCase()?0:e(i).offset().top;this._overLay.css({top:s,left:r,position:n})},_sendAjaxOptions:function(t,i){t.addClass("e-load");var o=this,n=this.model.title,r={success:function(e){try{o._ajaxSuccessHandler(e,t,i,n)}catch(e){}},error:function(e){try{o._ajaxErrorHandler({status:e.status,responseText:e.responseText,statusText:e.statusText},t,i,n)}catch(e){}},complete:function(){try{o._setContainerSize(),o._resetScroller(),o.model.showOnInit||o._setHiddenDialogSize()}catch(e){}}};e.extend(!0,r,this.model.ajaxSettings),this._sendAjaxRequest(r)},_setHiddenDialogSize:function(){this._isOpen||(this._ejDialog.css({display:"block",visibility:"hidden"}),this._setContainerSize()._resetScroller(),this._ejDialog.css({display:"none",visibility:""}))},_sendAjaxRequest:function(t){e.ajax({type:t.type,cache:t.cache,url:t.url,dataType:t.dataType,data:t.data,contentType:t.contentType,async:t.async,success:t.success,error:t.error,beforeSend:t.beforeSend,complete:t.complete})},_ajaxSuccessHandler:function(e,t,i){t.removeClass("e-load"),t.html(e).addClass("e-dialog-loaded").appendTo(this._ejDialog),t.appendTo(this.contentDiv),this._dialogPosition(),this.model.showOnInit&&this.open(),this._trigger("ajaxSuccess",{data:e,url:i})},_ajaxErrorHandler:function(e,t,i){t.addClass("e-dialog-loaded").appendTo(this.contentDiv),this._dialogPosition().open(),this._trigger("ajaxError",{data:e,url:i})},_closeIcon:function(){this._dialogClose=t.util.buildTag("div#"+this.element[0].id+"_closebutton.e-dialog-icon e-icon e-close",null,null).attr("tabIndex","0"),"close"==this.model.closeIconTooltip&&"Close"==this.model.tooltip.close?this._dialogClose.appendTo(this._dialogTitlebar).attr("title",this.model.tooltip.close):"close"!=this.model.closeIconTooltip&&"Close"==this.model.tooltip.close?this._dialogClose.appendTo(this._dialogTitlebar).attr("title",this.model.closeIconTooltip):("close"==this.model.closeIconTooltip&&this.model.tooltip.close,this._dialogClose.appendTo(this._dialogTitlebar).attr("title",this.model.tooltip.close)),this._on(this._dialogClose,"touchstart click",this._closeClick)},_collapsibleIcon:function(){this._dialogCollapsible=t.util.buildTag("div#"+this.element[0].id+"_collapsbutton.e-dialog-icon e-icon",null,null).attr("tabIndex","0"),this._collapsible?this._dialogCollapsible.appendTo(this._dialogTitlebar).attr("title",this.model.tooltip.expand).addClass("e-arrowhead-down").removeClass("e-arrowhead-up"):this._dialogCollapsible.appendTo(this._dialogTitlebar).attr("title",this.model.tooltip.collapse).addClass("e-arrowhead-up").removeClass("e-arrowhead-down"),this._on(this._dialogCollapsible,"touchstart click",this._collapsibleClick)},_maximizeIcon:function(){this._dialogMaximize=t.util.buildTag("div#"+this.element[0].id+"_maximizebutton.e-dialog-icon e-icon",null,null).attr("tabIndex","0"),this._maximize?this._dialogMaximize.appendTo(this._dialogTitlebar).attr("title",this.model.tooltip.restore).addClass("e-restore").removeClass("e-maximize"):this._dialogMaximize.appendTo(this._dialogTitlebar).attr("title",this.model.tooltip.maximize).addClass("e-maximize").removeClass("e-restore"),this._on(this._dialogMaximize,"touchstart click",this._maximizeClick)},_minimizeIcon:function(){this._dialogMinimize=t.util.buildTag("div#"+this.element[0].id+"_minimizebutton.e-dialog-icon e-icon",null,null).attr("tabIndex","0"),this._minimize?this._dialogMinimize.appendTo(this._dialogTitlebar).attr("title",this.model.tooltip.restore).addClass("e-restore").removeClass("e-minus"):this._dialogMinimize.appendTo(this._dialogTitlebar).attr("title",this.model.tooltip.minimize).addClass("e-minus").removeClass("e-restore"),this._on(this._dialogMinimize,"touchstart click",this._minimizeClick)},_pinIcon:function(){this._dialogPin=t.util.buildTag("div#"+this.element[0].id+"_pinbutton.e-dialog-icon e-icon",null,null).attr("tabIndex","0"),this._dialogPin.appendTo(this._dialogTitlebar).attr("title",this.dialogPin?this.model.tooltip.unPin:this.model.tooltip.pin).addClass(this.dialogPin?"e-pin":"e-unpin").removeClass(this.dialogPin?"e-unpin":"e-pin"),this._on(this._dialogPin,"touchstart click",this._pinClick)},_favIcon:function(){if(this._dialogFavIcon)e=this._dialogFavIcon.find("span").removeClass().addClass("e-dialog-custom");else{this._dialogFavIcon=t.util.buildTag("div.e-dialog-favicon","",{},{style:"float:"+(this.model.enableRTL?"right":"left")});var e=t.util.buildTag("span.e-dialog-custom","",{},{role:"presentation"});e.appendTo(this._dialogFavIcon),this._dialogFavIcon.appendTo(this._dialogTitlebar)}this.model.faviconCSS?e.addClass(this.model.faviconCSS):this._dialogFavIcon.remove(),this._dialogFavIcon.css("float",this.model.enableRTL?"right":"left")},_minMaxValidation:function(){var e=parseInt(this.model.minWidth),t=parseInt(this.model.minHeight),i=parseInt(this.model.maxWidth),o=parseInt(this.model.maxHeight),n=parseInt(this.model.width),r=parseInt(this.model.height),s=this._getParentObj();isNaN(this.model.minWidth)&&this.model.minWidth.indexOf("%")>0&&(e=this._convertPercentageToPixel(s.outerWidth(),e)),isNaN(this.model.minHeight)&&this.model.minHeight.indexOf("%")>0&&(t=this._convertPercentageToPixel(s.outerHeight(),t)),isNaN(this.model.maxWidth)&&this.model.maxWidth.indexOf("%")>0&&(i=this._convertPercentageToPixel(s.innerWidth(),i)),isNaN(this.model.maxHeight)&&this.model.maxHeight.indexOf("%")>0&&(o=this._convertPercentageToPixel(s.innerHeight(),o)),isNaN(this.model.width)&&this.model.width.indexOf("%")>0&&(n=this._convertPercentageToPixel(s.innerWidth(),n)),isNaN(this.model.height)&&this.model.height.indexOf("%")>0&&(r=this._convertPercentageToPixel(s.innerHeight(),r)),(i&&n>i||e&&n<e)&&(this.model.width=n>i?i:e),(o&&r>o||t&&r<t)&&(this.model.height=r>o?o:t)},_setSize:function(){var e=this.model;return this._minMaxValidation(),this._ejDialog.css({width:e.width,minWidth:e.minWidth,maxWidth:e.maxWidth}),this._ejDialog.css({height:e.height,minHeight:e.minHeight,maxHeight:e.maxHeight}),this._dialogPosition(),this},_resetScroller:function(){this.element.css({height:"auto","max-width":"","max-height":"",width:""});var i,o=this._ejDialog.outerHeight(!0)-(this.model.showHeader?e(this._ejDialog.find("div.e-titlebar")).outerHeight(!0):0)-(this.model.showFooter?e(this._ejDialog.find("div.e-footerbar")).outerHeight(!0):0),n={width:"0px"==this.contentDiv.css("border-width")||"0px"==this.contentDiv.css("border-left-width")?Math.round(this._ejDialog.width()):Math.round(this._ejDialog.width()-2),enableRTL:this.model.enableRTL,height:"0px"==this.contentDiv.css("border-width")?o:o-1,enableTouchScroll:!1};"auto"==this.model.height&&(this.element.height()<this.model.maxHeight||!this.model.maxHeight)&&!this._maximize&&(n.height="auto"),"auto"!=this.model.width||this._maximize||(n.width=this.model.width),this.contentDiv.ejScroller(n),this.scroller=this.contentDiv.data("ejScroller"),this._reRenderScroller(),this._padding=parseInt(e(this.element).css("padding-top"))+parseInt(e(this.element).css("padding-bottom")),"none"==e(this._ejDialog).css("display")&&(this.hidden=!0,this._ejDialog.css({display:"block"})),!t.isNullOrUndefined(this.contentDiv.height())&&this.contentDiv.height()>0&&(i=t.isNullOrUndefined(this.scroller)?this.contentDiv.outerHeight()-this._padding:!this.scroller._hScrollbar&&this.scroller._vScrollbar?this.contentDiv.outerHeight():this.scroller._hScrollbar?this.contentDiv.outerHeight()-this.scroller.model.buttonSize:this.contentDiv.outerHeight(),"auto"!=this.model.height&&"100%"!=this.model.height?this.element.css({height:i-1}):this.element.css("height",this.model.height),"auto"!=this.model.height&&"100%"!=this.model.height||this.scroller._vScrollbar||this.element.css({"min-height":this.model.minHeight-(this.model.showHeader?e(this._ejDialog.find("div.e-titlebar")).outerHeight(!0):0)}),this.scroller._vScrollbar||"auto"==this.model.width||"100%"==this.model.width?this.scroller._vScrollbar||this.element.css("width",this.model.width):this.element.outerWidth("0px"==this.contentDiv.css("border-width")||"0px"==this.contentDiv.css("border-left-width")?this._ejDialog.width():this._ejDialog.width()-2),this.element.css({"max-width":this.model.maxWidth,"max-height":this.model.maxHeight})),this.hidden&&this._ejDialog.css({display:"none"}),this.hidden=!1},_updateScroller:function(e,t){this.contentDiv.ejScroller({width:t,height:e,enableRTL:this.model.enableRTL,enableTouchScroll:!1}),this.scroller=this.contentDiv.data("ejScroller"),this._reRenderScroller(),this._changeSize()},_dragDialog:function(){var i=this;this._ejDialog.parents(".e-dialog-scroller");return this._dialogTitlebar.ejDraggable({handle:".e-titlebar",cursorAt:{top:0,left:0},dragArea:i._target,dragStart:function(e){return e.element.attr("aria-grabbed",!0),i._clickHandler(),!i.dialogPin&&i.model.allowDraggable&&i.model.enabled?i._trigger("dragStart",{event:e})?(e.cancel=!0,!1):void 0:(e.cancel=!0,!1)},drag:function(e){i._trigger("drag",{event:e})},dragStop:function(o){var n,r;i._ejDialog.focus(),o.element.attr("aria-grabbed",!1),i.element.find("> .e-draggable.e-titlebar")&&((n=e("#"+i.element.find("> .e-draggable.e-titlebar").attr("id")).data("ejDraggable"))&&n.option("cursorAt",i.element.offset())),r=this.helper.offsetParent().offset(),i._trigger("dragStop",{event:o}),i.model.position.X=t.isNullOrUndefined(this.position.left)?parseInt(this.helper.css("left")):this.position.left-[r.left+parseFloat(this.helper.offsetParent().css("border-left-width"))],i.model.position.Y=t.isNullOrUndefined(this.position.top)?parseInt(this.helper.css("top")):this.position.top-[r.top+parseFloat(this.helper.offsetParent().css("border-top-width"))],i._positionChanged=!0,i.dlgresized=!0},helper:function(){return e(i._ejDialog).addClass("dragClone")}}),this},_resizeDialog:function(){if(this.model.enableResize){var t,i=this,o=!1,n=parseInt(this.model.minWidth),r=parseInt(this.model.minHeight),s=parseInt(this.model.maxWidth),l=parseInt(this.model.maxHeight);return t=this._getParentObj(),isNaN(this.model.minWidth)&&this.model.minWidth.indexOf("%")>0&&(n=this._convertPercentageToPixel(t.outerWidth(),n)),isNaN(this.model.minHeight)&&this.model.minHeight.indexOf("%")>0&&(r=this._convertPercentageToPixel(t.outerHeight(),r)),isNaN(this.model.maxWidth)&&this.model.maxWidth.indexOf("%")>0&&(s=this._convertPercentageToPixel(t.innerWidth(),s)),isNaN(this.model.maxHeight)&&this.model.maxHeight.indexOf("%")>0&&(l=this._convertPercentageToPixel(t.innerHeight(),l)),this._ejDialog.find("div.e-resize-handle").ejResizable({minHeight:r,minWidth:n,maxHeight:l,maxWidth:s,handle:"e-widget-content",resizeStart:function(e){if(i.dlgresized=!0,!i.model.enabled)return!1;o||i._trigger("resizeStart",{event:e}),o=!0,i.model.position={X:i._ejDialog.css("left"),Y:i._ejDialog.css("top")},i._dialogPosition()},resize:function(t){i.dlgresized=!0;var o=e(t.element).parents("div.e-dialog-wrap");i.model.height=e(o).outerHeight(),i.model.width=e(o).outerWidth(),i._setSize(),i._setContainerSize(),i._resetScroller(),i._updateCaptionWidth(),i._trigger("resize",{event:t}),i._sizeType={width:"px",height:"px"},this.scrObj&&this.scrObj._resetScroller()},resizeStop:function(t){i.dlgresized=!0,i._ejDialog.focus(),i._sizeInPercent();var n=e(t.element).parents("div.e-dialog-wrap");i.model.height=e(n).outerHeight(),i.model.width=e(n).outerWidth(),i._setSize(),i._setContainerSize(),i._resetScroller(),o&&i._trigger("resizeStop",{event:t}),o=!1,i._setDimension()},helper:function(){return e(i._ejDialog)}}),this}},_dialogPosition:function(){if(this._ejDialog.parents("form").length>0&&t.isNullOrUndefined(this.model.containment)&&t.isNullOrUndefined(this.model.target)&&this._ejDialog.appendTo(this._ejDialog.parents("form")),""!=this.model.position.X||""!=this.model.position.Y)if(this._ejDialog.css("position","absolute"),t.isNullOrUndefined(this.model.target)&&t.isNullOrUndefined(this.model.containment))this._ejDialog.css("left",this.model.position.X),this._ejDialog.css("top",this.model.position.Y);else{var i=t.isNullOrUndefined(this.model.containment)?this.model.target:this.model.containment;this.dlgresized||this._keyNavigation?(this._ejDialog.css("left",this.model.position.X),this._ejDialog.css("top",this.model.position.Y)):(this._ejDialog.css("left",e(i).offset().left+parseInt(this.model.position.X)),this._ejDialog.css("top",e(i).offset().top+parseInt(this.model.position.Y)))}else this._centerPosition();return this},_centerPosition:function(){var i,o,n,r,s=0,l=0;t.isNullOrUndefined(this.model.target)&&(t.isNullOrUndefined(this._target)||e(this._target).is(e(document))||e(this._target).is(e(window)))?(r=document.documentElement,s=(e(window).outerWidth()>this._ejDialog.width()?(e(window).outerWidth()-this._ejDialog.outerWidth())/2:0)+(window.pageXOffset||r.scrollLeft),l=(e(window).outerHeight()>this._ejDialog.height()?(e(window).outerHeight()-this._ejDialog.outerHeight())/2:0)+(window.pageYOffset||r.scrollTop)):("static"==(i=t.isNullOrUndefined(this._target)?e(this.model.target):e(this._target)).css("position")&&(o=i.offsetParent().offset(),s=(n=i.offset()).left-o.left,l=n.top-o.top),i.outerWidth()>this._ejDialog.width()&&(s+=(i.outerWidth()-this._ejDialog.width())/2),i.outerHeight()>this._ejDialog.height()&&(l+=(i.outerHeight()-this._ejDialog.height())/2)),this._ejDialog.css({top:l,left:s}),this._ejDialog.css("position","absolute")},_closeClick:function(e){"touchstart"==e.type&&e.preventDefault(),this.model.enabled&&(e.stopPropagation(),this.close(e))},_collapsibleClick:function(t){this.model.enabled&&(e(t.target).hasClass("e-arrowhead-up")?this._actionCollapse(t):e(t.target).hasClass("e-arrowhead-down")&&this._actionExpand(t))},_actionCollapse:function(e){this._minimize||(this._dialogCollapsible&&this._dialogCollapsible.removeClass("e-arrowhead-up").addClass("e-arrowhead-down"),this._dialogCollapsible&&this._dialogCollapsible.attr("title",this.model.tooltip.expand),this._ejDialog.find("div.e-resize-handle").hide(),this._ejDialog.find(".e-widget-content").parent().slideUp("fast"),this.model.showFooter&&this._dialogFooterbar.slideUp("fast"),this._ejDialog.removeClass("e-shadow"),this._ejDialog.css("minHeight","0"),this._ejDialog.height("auto"),this._trigger("collapse",{isInteraction:!!e}),this._collapsible=!0)},_actionExpand:function(e){this._minimize||(this._dialogCollapsible&&this._dialogCollapsible.removeClass("e-arrowhead-down").addClass("e-arrowhead-up"),this._dialogCollapsible&&this._dialogCollapsible.attr("title",this.model.tooltip.collapse),this._ejDialog.addClass("e-shadow"),this._ejDialog.find(".e-widget-content").parent().slideDown("fast"),this.model.showFooter&&this._dialogFooterbar.slideDown("fast"),this._maximize?(this._ejDialog.css({width:"100%",height:"100%"}),this.element.css({width:"100%",height:"100%"}),this.contentDiv.css({width:"100%",height:"100%"})):this._ejDialog.height(this.model.height),this._ejDialog.find("div.e-resize-handle").show(),this._trigger("expand",{isInteraction:!!e}),this._collapsible=!1)},_maximizeClick:function(i){if(this.model.enabled){var o=e(i.target),n=this._dialogMaximize;o.hasClass("e-maximize")?(this._actionMaximize(),this._dialogTitlebar&&(this._dialogTitlebar.find(".e-restore").removeClass("e-restore").addClass("e-minus"),this._dialogMinimize&&this._dialogMinimize.attr("title",this.model.tooltip.minimize)),o.removeClass("e-maximize").addClass("e-restore"),this._dialogMaximize.attr("title",this.model.tooltip.restore),this._hideIcon(!0)):o.hasClass("e-restore")&&(this._actionRestore(),o.removeClass("e-restore").addClass("e-maximize"),this._dialogMaximize.attr("title",this.model.tooltip.maximize),!t.isNullOrUndefined(n)&&e(n).hasClass("e-arrowhead-down")&&(e(n).removeClass("e-arrowhead-down").addClass("e-arrowhead-up"),this._dialogMaximize.attr("title",this.model.tooltip.collapse)),this._hideIcon(!0))}this._resetScroller()},_actionMaximize:function(){this._ejDialog.css("top","0px").css("left","0px").css("overflow","hidden").css("position",this.model.containment||this.model.target?"absolute":"fixed"),this._ejDialog.css({width:"100%",height:"100%"}),this.element.css({width:"100%",height:"100%"}),this.contentDiv.css({width:"100%",height:"100%"}),this._maximize=!0,this._minimize=!1;var i=this;this._dialogCollapsible&&!t.isNullOrUndefined(this._dialogCollapsible.hasClass("e-arrowhead-down"))&&(this._dialogCollapsible.removeClass("e-arrowhead-down").addClass("e-arrowhead-up"),this._dialogCollapsible.attr("title",this.model.tooltip.collapse),this._collapseValue=!0),1==this._collapseValue&&this._ejDialog.find(".e-widget-content").parent().slideDown("fast",function(){i.refresh(),i._reRenderScroller()}),this._resetScroller(),e(this.contentDiv).is(":hidden")&&this.contentDiv.show()},_actionRestore:function(){this.element.height("").width(""),this.contentDiv.height("").width(""),this._restoreDialog(),this._maximize=this._minimize=!1},_minimizeClick:function(i){if(this.model.enabled){var o=e(i.target),n=this._dialogMinimize.hasClass("e-icon")&&this._dialogMinimize;o.hasClass("e-minus")?(this._maximize&&this._setSize(),this._actionMinimize()):o.hasClass("e-restore")&&(this._actionRestore(),o.removeClass("e-restore").addClass("e-minus"),this._dialogMinimize.attr("title",this.model.tooltip.minimize),!t.isNullOrUndefined(n)&&e(n).hasClass("e-arrowhead-down")&&(e(n).removeClass("e-arrowhead-down").addClass("e-arrowhead-up"),this._dialogMinimize.attr("title",this.model.tooltip.collapse)),this._hideIcon(!0))}},_actionMinimize:function(){var t;e(window).height(),this._ejDialog.height(),this.element.height();this._ejDialog.css("top","").css("bottom","0").css("left","0").css("position",this.model.containment||this.model.target?"absolute":"fixed"),this._ejDialog.css("minHeight","0"),this._dialogTitlebar?(this._dialogTitlebar.find(".e-restore").removeClass("e-restore").addClass("e-maximize"),this._dialogMaximize&&this._dialogMaximize.attr("title",this.model.tooltip.maximize),this._dialogTitlebar.find(".e-minus").removeClass("e-minus").addClass("e-restore"),this._dialogMinimize&&this._dialogMinimize.attr("title",this.model.tooltip.restore),this._isOpen?t=this._dialogTitlebar.outerHeight():(this._ejDialog.css({display:"block",visibility:"hidden"}),t=this._dialogTitlebar.outerHeight(),this._ejDialog.css({display:"none",visibility:""})),this._ejDialog.css("height",t+2),this._hideIcon(!1)):this._ejDialog.css("height",""),this.contentDiv.hide(),this.model.showFooter&&this._dialogFooterbar.hide(),this._maximize=!1,this._minimize=!0},_hideIcon:function(i){var o=this._dialogCollapsible?this._dialogCollapsible:null;i?(t.isNullOrUndefined(o)||e(o).parent(".e-dialog-icon").show(),this._ejDialog.find("div.e-resize-handle").show()):(t.isNullOrUndefined(o)||e(o).parent(".e-dialog-icon").hide(),this._ejDialog.find("div.e-resize-handle").hide())},_pinClick:function(t){if(this.model.enabled){var i=e(t.target);i.hasClass("e-unpin")?(this.dialogPin=!0,i.removeClass("e-unpin").addClass("e-pin"),this._dialogPin.attr("title",this.model.tooltip.unPin)):i.hasClass("e-pin")&&(this.dialogPin=!1,i.removeClass("e-pin").addClass("e-unpin"),this._dialogPin.attr("title",this.model.tooltip.pin))}},_restoreDialog:function(){this.contentDiv.show(),this.model.showFooter&&this._dialogFooterbar.show(),this._ejDialog.css({position:"absolute",bottom:""}).addClass("e-shadow"),this._setSize()._resetScroller(),this._dialogTitlebar&&(this._dialogTitlebar.find(".e-minus").parent().show(),this._dialogCollapsible&&(this._dialogCollapsible.removeClass("e-arrowhead-down").addClass("e-arrowhead-up"),this._dialogCollapsible.attr("title",this.model.tooltip.collapse)))},_clickHandler:function(){var e=this._dialogMaxZindex();parseInt(this._ejDialog.css("zIndex"))<e&&this._ejDialog.css({zIndex:e+1})},_mouseClick:function(t){t.currentTarget==this._id&&(e(t.target).hasClass("e-dialog")||e(t.target).hasClass("e-icon e-resize-handle"))&&(this._setZindex(),e(t.target).closest(".e-dialog.e-widget").focus())},_keyDown:function(t){var i;i=t.keyCode?t.keyCode:t.which?t.which:t.charCode,this.model.allowKeyboardNavigation&&this.model.enabled&&e(t.target).hasClass("e-dialog")&&e.inArray(i,this.keyConfigs)>-1&&this.model.allowDraggable&&!this.dialogPin&&(this._keyPressed(i,t.ctrlKey),t.preventDefault()),this.model.closeOnEscape&&27===i&&this.model.enabled&&(this.element.find(".e-js.e-dialog").first().is(":visible")||(this.close(t),t.preventDefault())),13===i&&this.model.enabled&&(e(t.target).hasClass("e-close")?this.close(t):(e(t.target).hasClass("e-arrowhead-up")||e(t.target).hasClass("e-arrowhead-down"))&&this._collapsibleClick(t),e(t.target).hasClass("e-maximize")||e(t.target).hasClass("e-restore")&&e(t.target).is(this._dialogMaximize)?this._maximizeClick(t):(e(t.target).hasClass("e-minus")||e(t.target).hasClass("e-restore")&&e(t.target).is(this._dialogMinimize))&&this._minimizeClick(t),(e(t.target).hasClass("e-pin")||e(t.target).hasClass("e-unpin"))&&this._pinClick(t)),9==i&&this.model.enableModal&&this._focusOnTab(t)},_focusOnTab:function(t){var i=this._ejDialog.find("a, button, :input, select, [tabindex]:not('-1')");i=e(i).find("a, button, :input, select, [tabindex]:not('')"),t.shiftKey?i[i.index(t.target)-1]||(t.preventDefault(),i.last().focus()):i[i.index(t.target)+1]||(t.preventDefault(),i[0].focus())},_keyPressed:function(e,t){switch(this._keyNavigation=!0,e){case 40:t?this._resizing("height",this._ejDialog.outerHeight()+3):this.option("position",{X:this._ejDialog.position().left,Y:this._ejDialog.position().top+3});break;case 39:t?this._resizing("width",this._ejDialog.outerWidth()+3):this.option("position",{X:this._ejDialog.position().left+3,Y:this._ejDialog.position().top});break;case 38:t?this._resizing("height",this._ejDialog.outerHeight()-3):this.option("position",{X:0==this._ejDialog.position().left?0:this._ejDialog.position().left,Y:this._ejDialog.position().top>3?this._ejDialog.position().top-3:0});break;case 37:t?this._resizing("width",this._ejDialog.outerWidth()-3):this.option("position",{X:this._ejDialog.position().left>3?this._ejDialog.position().left-3:0,Y:0==this._ejDialog.position().top?0:this._ejDialog.position().top})}},_resizing:function(e,t){this.model.enableResize&&this.option(e,t)},_sizeInPercent:function(){if(!this._enableWindowResize())return this;var e=this._getParentObj();return this._widthPercent="%"==this._sizeType.width?parseFloat(this.model.width):this._convertPixelToPercentage(e.outerWidth(),this._ejDialog.outerWidth()),this._heightPercent="%"==this._sizeType.height?parseFloat(this.model.height):this._convertPixelToPercentage(e.outerHeight(),this._ejDialog.outerHeight()),this._widthPercent>=100&&(this._widthPercent=100,this._ejDialog.outerWidth(e.outerWidth()),this.model.width=this._ejDialog.width()),this._heightPercent>=100&&(this._heightPercent=100,this._ejDialog.outerHeight(e.outerHeight()),this.model.height=this._ejDialog.height()),this},_getParentObj:function(){return t.isNullOrUndefined(this.model.containment)?t.isNullOrUndefined(this.model.target)?e(document):e(this.model.target):e(this.model.containment)},_convertPercentageToPixel:function(e,t){return Math.round(t*e/100)},_convertPixelToPercentage:function(e,t){return Math.round(t/e*100)},_reSizeHandler:function(){var t;this._maximize?this._resetScroller():(""!=this.model.position.X&&(""!=this.model.position.Y||this._minimize)||this._centerPosition(),t=this._getParentObj(),this._change=!1,this._windowSize.outerWidth!=e(window).outerWidth()?"%"==this._sizeType.width?this._percentageWidthDimension(t):this._pixelsWidthDimension(t):this._windowSize.outerHeight!=e(window).outerHeight()&&("%"==this._sizeType.height?this._percentageHeightDimension(t):this._pixelsHeightDimension(t)),this._change&&this._resizeContainer(t),this._windowSize={outerWidth:e(window).outerWidth(),outerHeight:e(window).outerHeight()},this._centerPosition())},_setDimension:function(){t.isNullOrUndefined(this.model.maxWidth)?t.isNullOrUndefined(this._sizeType.width)?this._maxWidth=+this.model.width:("px"==this._sizeType.width||"auto"==this._sizeType.width)&&(this._maxWidth=this.model.width):this._maxWidth=this.model.maxWidth,t.isNullOrUndefined(this.model.maxHeight)?t.isNullOrUndefined(this._sizeType.height)?this._maxHeight=+this.model.height:("px"==this._sizeType.height||"auto"==this._sizeType.height)&&(this._maxHeight=this.model.height):this._maxHeight=this.model.maxHeight},_percentageWidthDimension:function(e){this._ejDialog.outerWidth(this._convertPercentageToPixel(e.outerWidth(),this._widthPercent)),this._change=!0},_percentageHeightDimension:function(e){this._ejDialog.outerHeight(this._convertPercentageToPixel(e.outerHeight(),this._heightPercent)),this._change=!0},_pixelsWidthDimension:function(t){e(t).outerWidth()<=this._ejDialog.outerWidth()&&this._setWidth(t),e(t).outerHeight()<=this._ejDialog.outerHeight()&&!this.model.isResponsive&&this._setHeight(t),parseInt(this._ejDialog.css("width"))<parseInt(this._maxWidth)&&(parseInt(this._maxWidth)<e(t).outerWidth()?this._ejDialog.outerWidth(parseInt(this._maxWidth)):this._ejDialog.outerWidth(t.outerWidth()),this._change=!0)},_pixelsHeightDimension:function(t){e(t).outerHeight()<=this._ejDialog.outerHeight()&&!this.model.isResponsive&&this._setHeight(t),e(t).outerWidth()<=this._ejDialog.outerWidth()&&this._setWidth(t),parseInt(this._ejDialog.css("height"))<parseInt(this._maxHeight)&&(parseInt(this._maxHeight)<e(t).outerHeight()?this._ejDialog.outerWidth(parseInt(this._maxHeight)):this._ejDialog.outerHeight(t.outerHeight()),this._change=!0)},_setWidth:function(e){this._ejDialog.outerWidth(e.outerWidth()),this._change=!0},_setHeight:function(e){this._ejDialog.outerHeight(e.outerHeight()),this._change=!0},_resizeContainer:function(){this.contentDiv.width(this._ejDialog.width()),this.element.outerWidth(this.contentDiv.width());var i=this._ejDialog.height()-(this.model.showHeader?e(this._ejDialog.find("div.e-titlebar")).outerHeight(!0):0);this.contentDiv.height(t.isNullOrUndefined(this.contentDiv)?i-1:"0px"==this.contentDiv.css("border-width")),this.element.outerHeight(t.isNullOrUndefined(this.contentDiv)?i-1:"0px"==this.contentDiv.css("border-width")),this.scroller=this.contentDiv.ejScroller({width:!t.isNullOrUndefined(this.contentDiv)&&("0px"==this.contentDiv.css("border-width")?this._ejDialog.width():this._ejDialog.width()-2),height:!t.isNullOrUndefined(this.contentDiv)&&("0px"==this.contentDiv.css("border-width")?this.element.outerHeight():this.element.outerHeight()-2),rtl:this.model.rtl,enableTouchScroll:!1}),this.scroller=this.contentDiv.data("ejScroller"),this._reRenderScroller(),""==this.model.position.X||""==this.model.position.Y&&!this._minimize||this._positionChanged?this._centerPosition():this._ejDialog.css("height",this._dialogTitlebar.outerHeight()),this._updateCaptionWidth(),this._change=!1},_getLocalizedLabels:function(){return t.getLocalizedConstants(this.sfType,this.model.locale)},_enableWindowResize:function(){return!!(this.model.isResponsive||isNaN(this.model.width)&&this.model.width.indexOf("%")>0&&isNaN(this.model.height)&&this.model.height.indexOf("%")>0&&"auto"!=this.model.height)},_wireResizing:function(){e(window)[this._enableWindowResize()?"on":"off"]("resize",e.proxy(this._reSizeHandler,this))},_wireEvents:function(){this._on(this._ejDialog,"keydown",this._keyDown),this._on(this._ejDialog,"click",this._mouseClick),this._wireResizing()},refresh:function(){this._resetScroller()},open:function(){var i,o,n,r,s;return!!this._isOpen||1!=this._trigger("beforeOpen")&&(this.element.css("display","block"),this._setZindex(),this._minimize||this._maximize||this._init||this._dialogPosition(),i=this,o={},this._ejDialog.show(),this.model.enableAnimation&&(this._ejDialog.css({opacity:0}),"slide"==this.model.animation.show.effect?(r=this._ejDialog.css("left"),this._ejDialog.css({left:-this._ejDialog.width()}),o={left:r,opacity:1}):o={opacity:1}),this._ejDialog.animate(o,this.model.enableAnimation?Number(this.model.animation.show.duration):0,function(){i.model&&("none"==i._ejDialog.css("display")&&i._ejDialog.show(),i._ejDialog.eq(0).focus(),i._ejDialog.css({opacity:""}),i.contentDiv.find("a:visible:enabled, button:visible:enabled, :input:visible:enabled, select:visible:enabled, .e-input").first().focus(),i._trigger("open"),i._updateCaptionWidth(),i.model.enableModal&&!i.model.backgroundScroll&&(i._ejDialog.height()>e(window).height()&&i._ejDialog.css("height",e(window).height()),i.model.height=e(window).height(),i._overLay.css("position","fixed"),i.scroller.refresh(!0),i.refresh()),(i.model.maxHeight||i.model.maxWidth)&&(n=i._ejDialog.outerHeight(!0)-(i._dialogTitlebar?i._dialogTitlebar.outerHeight(!0):0),("auto"==i.model.height||"100%"==i.model.height)&&(n=i.model.height),i._updateScroller(t.isNullOrUndefined(this.contentDiv)?n-2:"0px"==this.contentDiv.css("border-width"),t.isNullOrUndefined(this.contentDiv)?i._ejDialog.width()-2:"0px"==this.contentDiv.css("border-width")),i.scroller.refresh()))}),1==this.model.enableModal&&this._createOverlay(),this._isOpen=!0,this.element.find("> .e-draggable.e-titlebar")&&((s=e("#"+this.element.find("> .e-draggable.e-titlebar").attr("id")).data("ejDraggable"))&&s.option("cursorAt",this.element.offset())),this)},close:function(t){var i,o,n;return!this._isOpen||!this.model.enabled||(i=!!t,1!=this._trigger("beforeClose",{event:t,isInteraction:i})&&(this._isOpen=!1,o=this,n={},this.model.enableAnimation&&(n="slide"==this.model.animation.hide.effect?{left:-this._ejDialog.width(),opacity:0}:{opacity:0}),this._ejDialog.animate(n,this.model.enableAnimation?Number(this.model.animation.hide.duration):0,function(){o._trigger("close",{event:t,isInteraction:i}),o._ejDialog.hide()}),this.model.enableModal&&(this._overLay&&this._overLay.remove(),this.model.backgroundScroll||e("body").removeClass("e-dialog-modal")),this))},isOpened:function(){return this.isOpen()},isOpen:function(){return this._isOpen},setTitle:function(e){return this.model.title=e,this._titleText.text(e),this._updateCaptionWidth(),this},setContent:function(e){return!!this.model.enabled&&(this.element.html(e),this._resetScroller(),this)},focus:function(){return this._setZindex(),this.element.focus(),this},minimize:function(){if(this.model.showHeader)return this._actionMinimize(),e(this.wrapper.find(".e-minus")[0]).parent().hide(),this},maximize:function(){if(this.model.showHeader)return this._actionMaximize(),e(this.wrapper.find(".e-maximize")[0]).removeClass("e-maximize").addClass("e-restore"),e(this.wrapper.find(".e-restore")[1]).removeClass("e-restore").addClass("e-minus"),this._dialogMaximize&&this._dialogMaximize.attr("title",this.model.tooltip.restore),this._dialogTitlebar&&this._dialogTitlebar.find(".e-minus").parent().show(),this._hideIcon(!0),this},restore:function(){if(this.model.showHeader){var t=this._minimize;return this._actionRestore(),e(this.wrapper.find(".e-restore")[0]).removeClass("e-restore").addClass(t?"e-minus":"e-maximize"),this._dialogMaximize&&this._dialogMaximize.attr("title",this.model.tooltip.maximize),this._hideIcon(!0),this}},pin:function(){if(this.model.showHeader)return this.dialogPin=!0,e(this.wrapper.find(".e-unpin")[0]).removeClass("e-unpin").addClass("e-pin"),this._dialogPin&&this._dialogPin.attr("title",this.model.tooltip.unPin),this},unpin:function(){if(this.model.showHeader)return this.dialogPin=!1,e(this.wrapper.find(".e-pin")[0]).removeClass("e-pin").addClass("e-unpin"),this._dialogPin&&this._dialogPin.attr("title",this.model.tooltip.pin),this},collapse:function(){if(this.model.showHeader)return this._actionCollapse(),this._collapseValue=!0,this},expand:function(){if(this.model.showHeader)return this._actionExpand(),this}}),t.Dialog.Locale=t.Dialog.Locale||{},t.Dialog.Locale.default=t.Dialog.Locale["en-US"]={tooltip:{close:"Close",collapse:"Collapse",restore:"Restore",maximize:"Maximize",minimize:"Minimize",expand:"Expand",unPin:"UnPin",pin:"Pin"},title:"",closeIconTooltip:"close"}}(jQuery,Syncfusion),
/*!
*  filename: ej.uploadbox.min.js
*  version : 14.4.0.15
*  Copyright Syncfusion Inc. 2001 - 2016. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
function(e){"function"==typeof define&&define.amd?define(["./../common/ej.core.min","./../common/ej.globalize.min","./../common/ej.scroller.min","./ej.tooltip.min","./../common/ej.draggable.min","./ej.dialog.min"],e):e()}(function(){var e,t,o;e=jQuery,(t=Syncfusion).widget("ejUploadbox","ej.Uploadbox",{element:null,_addToPersist:[""],model:null,validTags:["div","span"],_setFirst:!1,_rootCSS:"e-uploadbox",defaults:{buttonText:{browse:"Browse",upload:"Upload",cancel:"Cancel",close:"Close"},width:"100px",height:"35px",htmlAttributes:{},dialogPosition:{X:"",Y:""},dialogText:{title:"Upload Box",name:"Name",size:"Size",status:"Status"},customFileDetails:{title:!0,name:!0,size:!0,status:!0,action:!0},dialogAction:{modal:!1,closeOnComplete:!1,drag:!0,content:null},locale:"en-US",asyncUpload:!0,pushFile:null,enabled:!0,multipleFilesSelection:!0,autoUpload:!1,showFileDetails:!0,fileSize:31457280,extensionsAllow:"",extensionsDeny:"",saveUrl:"",removeUrl:"",uploadName:"",cssClass:"",dropAreaText:"Drop files or click to upload",allowDragAndDrop:!1,showBrowseButton:!0,showRoundedCorner:!0,dropAreaHeight:"100%",dropAreaWidth:"100%",enableRTL:!1,create:null,fileSelect:null,begin:null,beforeSend:null,cancel:null,inProgress:null,success:null,complete:null,remove:null,error:null,destroy:null},dataTypes:{buttonText:"data",dialogText:"data",disbled:"boolean",customFileDetails:"data",pushFile:"data",dialogAction:"data",multipleFilesSelection:"boolean",autoUpload:"boolean",showFileDetails:"boolean",allowDragAndDrop:"boolean",showBrowseButton:"boolean",showRoundedCorner:"boolean",fileSize:"number",extensionsAllow:"string",extensionsDeny:"string",saveUrl:"string",removeUrl:"string",cssClass:"string",enableRTL:"boolean",htmlAttributes:"data"},disable:function(){this._changeState(!1)},enable:function(){this._changeState(!0)},_changeState:function(t){t?e(this.control).removeClass("e-disable"):e(this.control).addClass("e-disable"),this.model.enabled=t,e(this._currentElement).find(".e-uploadinput")[0].disabled=!t,this.diaObj&&(this.diaObj.option("beforeClose",this._onBeforeClose),this.diaObj.setModel({enabled:t,allowDraggable:t}))},refresh:function(){this.diaObj&&(this.diaObj.isOpened()?this.diaObj.close():this._uploadFileListDelete())},_updateLocalConstant:function(){this._localizedLabels=t.getLocalizedConstants("ej.Uploadbox",this.model.locale)},_init:function(){this.s=t.browserInfo(),this._updateLocalConstant(),this._initialize(),this._wireEvents(),this.model.asyncUpload||this._initObjectsSyncUpload(),this._controlStatus(this.model.enabled),"en-US"==this.model.locale?this._buttonText(this.model.buttonText):this._setLocale(),this._roundedCorner(this.model.showRoundedCorner)},_setModel:function(e){for(var t in e){switch(t){case"buttonText":this._buttonText(e[t]);break;case"htmlAttributes":this._addAttr(e[t]);break;case"dialogText":this._dialogText(e[t]);break;case"cssClass":this._setSkin(e[t]);break;case"enableRTL":this._setRTL(e[t]);break;case"enabled":this._controlStatus(e[t]);break;case"locale":this.model.locale=e[t],this._updateLocalConstant(),this._setLocale();break;case"height":this.model.height=e[t],this._setHeight(this.model.height);break;case"width":this.model.width=e[t],this._setWidth(this.model.width);break;case"dialogPosition":this.model.dialogPosition=e[t],this._dialogPosition();break;case"allowDragAndDrop":this.model.allowDragAndDrop=e[t],this._dragAndDrop();break;case"dropAreaText":this.model.dropAreaText=e[t],this._dropAreaText(this.model.dropAreaText);break;case"showBrowseButton":this.model.showBrowseButton=e[t],this._hideBrowseButton(),this._refreshUploadDialogParent();break;case"showRoundedCorner":this._roundedCorner(e[t]);break;case"dropAreaHeight":this.model.dropAreaHeight=e[t],this._setSize();break;case"dropAreaWidth":this.model.dropAreaWidth=e[t],this._setSize();break;case"pushFile":this.model.pushFile=e[t],null!=this.model.pushFile&&"Xhr"==this.UploadType&&this.model.asyncUpload&&(this._files=this.model.pushFile),this._onXhrSelect();break;case"multipleFilesSelection":this.model.multipleFilesSelection=e[t],0==(-1!=navigator.userAgent.indexOf("Safari")&&-1==navigator.userAgent.indexOf("Chrome"))&&(this.model.multipleFilesSelection?this._currentElement.find(".e-uploadinput").attr("multiple","multiple"):this._currentElement.find(".e-uploadinput").removeAttr("multiple"));break;case"uploadName":this.model.uploadName=e[t],this.inputupload.attr("name",this.model.uploadName),this.refresh();break;case"autoUpload":this.model.autoUpload=e[t];break;case"showFileDetails":this.model.showFileDetails=e[t],this.refresh();break;case"fileSize":this.model.fileSize=e[t];break;case"extensionsAllow":this.model.extensionsAllow=e[t],this._currentElement.find(".e-uploadinput").attr("accept",e[t]);break;case"extensionsDeny":this.model.extensionsDeny=e[t];break;case"saveUrl":this.model.saveUrl=e[t];break;case"removeUrl":this.model.removeUrl=e[t]}this._currentElement=this.model.allowDragAndDrop&&!this.model.showBrowseButton?this.dragWrapper:this.element}},_controlStatus:function(e){1!=e?this.disable():this.enable()},_setRTL:function(e){e?this._currentElement.addClass("e-rtl"):this._currentElement.removeClass("e-rtl"),this.updialog&&this.updialog.ejDialog({enableRTL:e})},_getLocalizedLabels:function(e){var i,o="";return i="browse"==e||"upload"==e||"cancel"==e||"close"==e?"buttonText":"dialogText",this._localizedLabels[e]?o=this._localizedLabels[e]:this._localizedLabels[i][e]?o=this._localizedLabels[i][e]:t.Uploadbox.Locale["en-US"][e]?o=t.Uploadbox.Locale["en-US"][e]:t.Uploadbox.Locale["en-US"][i][e]&&(o=t.Uploadbox.Locale["en-US"][i][e]),o},_setLocale:function(){this._buttonText(this._localizedLabels.buttonText),this._dialogText(this._localizedLabels.dialogText),this._dropAreaText(this._localizedLabels.dropAreaText)},_buttonText:function(t){e.extend(this.model.buttonText,t),this.buttondiv.val(this.model.buttonText.browse),this.updialog&&(this.updialog.find(".e-action-container .e-uploadbtn").html(this.model.buttonText.upload),this.updialog.find(".e-action-container .e-uploadclosebtn").html(this.model.buttonText.cancel))},_dialogText:function(t){e.extend(this.model.dialogText,t),this.diaObj==o||this.diaObj.option("title",this.model.dialogText.title),this.updialog&&(this.updialog.find(".e-head-name").html(this.model.dialogText.name),this.updialog.find(".e-head-size").html(this.model.dialogText.size),this.updialog.find(".e-head-status").html(this.model.dialogText.status))},_destroy:function(){this._currentElement.hasClass("e-uploadbox")&&(this._currentElement.removeClass("e-uploadbox e-widget"),this._currentElement.empty(),e(this.dragWrapper).after(this._currentElement),this.element.css({width:"",height:""}),this._bindResizeHandler(!1),this.dragWrapper.remove())},_setSkin:function(e){this._currentElement.removeClass(this.model.cssClass),this._currentElement.addClass(e),this.diaObj&&this.diaObj.setModel({cssClass:this.model.cssClass}),this.model.allowDragAndDrop&&this.dragWrapper.addClass(e)},_initialize:function(){this.control=this.element[0],this.element.addClass("e-widget "+this.model.cssClass),this.innerdiv=t.buildTag("div.e-selectpart e-select e-box"),this.element.append(this.innerdiv),this.buttondiv=t.buildTag("input.e-inputbtn e-btn#"+this.control.id+"_SelectButton","",{},{type:"button","data-role":"none",value:this._getLocalizedLabels("browse")}),this.inputupload=t.buildTag("input.e-uploadinput","",{},{type:"file","data-role":"none",name:""!=this.model.uploadName?this.model.uploadName:this.control.id}).attr("accept",this.model.extensionsAllow),this.model.multipleFilesSelection&&0==(-1!=navigator.userAgent.indexOf("Safari")&&-1==navigator.userAgent.indexOf("Chrome"))&&this.inputupload.attr("multiple","multiple"),this.innerdiv.append(this.buttondiv),this.innerdiv.append(this.inputupload),this.model.allowDragAndDrop&&this._dragAndDrop(!0),this._Selector=this.buttondiv[0],this._currentElement=this.model.allowDragAndDrop&&!this.model.showBrowseButton?this.dragWrapper:this.element,this._setRTL(this.model.enableRTL),this._addAttr(this.model.htmlAttributes),this.Uploadframes=[],this.UploadForms=[],this._successFiles=[],this.UploadType=this._isXhrSupported()?"Xhr":"IFrame",""!=this.model.width&&this._setWidth(this.model.width),""!=this.model.height&&this._setHeight(this.model.height),this._hideBrowseButton()},_refreshUploadDialogParent:function(){this.diaObj&&this.diaObj.setModel({target:null!=this.model.dialogAction.content&&""!=this.model.dialogAction.content?this.model.dialogAction.content:!this.model.showBrowseButton&&this.model.allowDragAndDrop?"#"+this.control.id+"_dragWrapper":"#"+this.control.id})},_hideBrowseButton:function(){!this.model.showBrowseButton&&this.model.allowDragAndDrop?(this.element.addClass("e-browse-hide"),this._dropAreaSize()):this.element.hasClass("e-browse-hide")&&(this.element.removeClass("e-browse-hide"),this.element.width(this.model.width),this.element.height(this.model.height))},_setSize:function(){this.model.allowDragAndDrop&&(""!=this.model.dropAreaWidth&&this.dragWrapper.outerWidth(this.model.dropAreaWidth),""!=this.model.dropAreaHeight&&this.dragWrapper.outerHeight(this.model.dropAreaHeight),this.model.showBrowseButton||this._dropAreaSize())},_dropAreaSize:function(){""!=this.model.dropAreaWidth&&this.element.width(this.model.dropAreaWidth),""!=this.model.dropAreaHeight&&this.element.height(this.model.dropAreaHeight)},_addAttr:function(t){var i=this;e.map(t,function(e,t){"class"==t?i.element.addClass(e):"disabled"==t&&"disabled"==e?i.disable():i.element.attr(t,e)})},_dragAndDrop:function(){this.model.allowDragAndDrop?(this.dragWrapper=t.buildTag("div.e-drag-wrapper e-widget-wrapper e-upload-box "+this.model.cssClass+"#"+this.control.id+"_dragWrapper"),this.innerWrapper=t.buildTag("div.e-drag-container"),this._spanTag=t.buildTag("span.e-drag-text").html("en-US"==this.model.locale?this.model.dropAreaText:t.Uploadbox.Locale[this.model.locale].dropAreaText),this.innerWrapper.append(this._spanTag),this.innerWrapper.insertBefore(this.element),this.dragWrapper.insertBefore(this.element),this.innerWrapper.append(this.element),this.dragWrapper.append(this.innerWrapper),this._bindDragEvents(),this._refreshUploadDialogParent(),this._setSize()):(this._refreshUploadDialogParent(),this.element.insertBefore(this.dragWrapper),this.dragWrapper.remove(),this._unBindDragEvents()),this._hideBrowseButton()},_resizeHandler:function(){this.diaObj&&(e(window).width()>750?(e(this.updialog).closest(".e-dialog.e-uploadbox").removeClass("e-mobile-upload"),this.diaObj.setModel({width:this._getDialogContentWidth(),height:"auto"})):(e(this.updialog).closest(".e-dialog.e-uploadbox").addClass("e-mobile-upload"),this.diaObj.setModel({width:250,height:"auto"})),this.diaObj.scroller&&this.diaObj.scroller.setModel({height:"auto"}))},_getDialogContentWidth:function(){var e=0;return this.model.customFileDetails.name&&(e+=200),this.model.customFileDetails.size&&(e+=100),this.model.customFileDetails.status?e+=200:this.model.customFileDetails.action&&(e+=45),e+5},_dropAreaText:function(e){this.model.allowDragAndDrop&&this._spanTag.html(e)},_bindDragEvents:function(){this._on(this.dragWrapper,"dragover",this._onDragOverHandler),this._on(this.dragWrapper,"drop",this._onDropHandler)},_unBindDragEvents:function(){this._off(this.dragWrapper,"dragover",this._onDragOverHandler),this._off(this.dragWrapper,"drop",this._onDropHandler)},_setWidth:function(e){this.element.css("width",e)},_setHeight:function(e){this.element.height(e)},_dialogPosition:function(){if(this.diaObj){if((this.diaObj.model.content=="#"+this.control.id||this.diaObj.model.content=="#"+this.control.id+"_dragWrapper")&&""==this.model.dialogPosition.X&&""==this.model.dialogPosition.Y){var t=parseInt(this.diaObj.wrapper.css("left"))-(this.diaObj.wrapper.outerWidth()-e(this.diaObj.model.content).outerWidth())/2;this.model.dialogPosition.X=parseInt(t)>0?t:parseInt(this.diaObj.wrapper.css("left")),this.model.dialogPosition.Y=parseInt(this.diaObj.wrapper.css("top"))+e(this.diaObj.model.content).outerHeight()}""!=this.model.dialogPosition.X&&""!=this.model.dialogPosition.Y&&this.diaObj.setModel({position:this.model.dialogPosition})}},_roundedCorner:function(e){e?this.innerdiv.addClass("e-corner"):this.innerdiv.hasClass("e-corner")&&this.innerdiv.removeClass("e-corner")},_wireEvents:function(){this._on(this.element,"click",this._disableclickselect),this._on(this.element,"keydown",this._keydownselect),this._bindInputChangeEvent(),this._bindResizeHandler(!0)},_bindResizeHandler:function(t){t?e(window).on("resize",e.proxy(this._resizeHandler,this)):e(window).off("resize",e.proxy(this._resizeHandler,this))},_keydownselect:function(e){this.element.hasClass("e-disable")||13!=e.keyCode||this.diaObj&&this.diaObj.isOpened()||this.element.find(".e-uploadinput").click()},_onDropHandler:function(e){if("msie"===t.browserInfo().name&&"8.0"===t.browserInfo().version||"9.0"===t.browserInfo().version||this._currentElement.hasClass("e-disable"))return!1;e.stopPropagation(),e.preventDefault(),this._files=this._getAllFileInfo(e.originalEvent.dataTransfer.files),this._fileSelect(e)},_onDragOverHandler:function(e){if(this._currentElement.hasClass("e-disable"))return!1;e.stopPropagation(),e.preventDefault()},_disableclickselect:function(e){this._currentElement.hasClass("e-disable")&&e.preventDefault()},_bindInputChangeEvent:function(){this._on(this.inputupload,"change",this._inputValueChange)},_inputValueChange:function(t){return this._files=this._getInputFileInfo(e(t.target)),this._fileSelect(t)},_fileSelect:function(e){if(this._trigger("fileSelect",{files:this._files}))return this._resetFileInput(this._currentElement.find(".e-uploadinput")),!1;this._fileUpload(e)},_fileUpload:function(e){var t=this._isAllowed(this._files);this._files=t.files,this.model.asyncUpload?null!=t.files&&t.files.length>0&&("Xhr"==this.UploadType?this._onXhrSelect(e):this._onSelectIFrame(e),this._resetFileInput(this._currentElement.find(".e-uploadinput"))):t.status&&this._onSelectSyncUpload(e),this._renderTooltip()},__uploadButtonClick:function(t){this._currentElement.hasClass("e-disable")||(this._currentElement.find(".e-uploadbtn"),this._currentElement.find(".e-uploadbtn").hasClass("e-disable")?t.preventDefault():"Xhr"==this.UploadType?this._xhrOnUploadButtonClick(t):this._onUploadButtonClickIFrame(t),e(t.target).attr("disabled","disabled").addClass("e-disable"))},_actionClick:function(t){var i,o;this._currentElement.hasClass("e-disable")||(o=(i=e(t.target)).closest(".e-upload-file"),this._file=e(o).data("file"),i.hasClass("e-delete")?"Xhr"==this.UploadType?this._xhrOnRemove(t,o):this._onRemoveIFrame(t,o):i.hasClass("e-file-cancel")?(this._trigger("cancel",{fileStatus:this._file}),this.updialog.find(".e-file-cancel").hasClass("e-disable")?t.preventDefault():this.model.asyncUpload?(this._removeFile(e(o).data("file")),"Xhr"==this.UploadType?this._xhrOnCancel(t,o):this._onCancelIFrame(t,o)):this._onCancelSyncUpload(t,o)):i.hasClass("e-reload")&&("Xhr"==this.UploadType?this._xhrOnRetry(t,o):this._onRetryIFrame(t,o)))},_removeFileEntry:function(e){e.remove()},_removeFile:function(e){for(var t=[],i=0;i<this._files.length;i++)this._files[i]!=e&&t.push(this._files[i]);this._files=t},_isFileUpload:function(t){return!this.model.customFileDetails.action||e(t).find("div.e-icon").is(".e-file-cancel")},_isXhrSupported:function(){return!("msie"==this.s.name&&parseInt(this.s.version)<9||"safari"==this.s.name&&"chrome"==this.s.name&&"536"==this.s.version)&&"undefined"!=typeof FormData&&"undefined"!=typeof File},_getFileName:function(t){return e.map(this._getAllFileInfo(t),function(e){return e.name}).join(", ")},_getFileSize:function(t){var i=this;return e.map(this._getAllFileInfo(t),function(e){return i._formatSize(e.size)}).join(", ")},_pushFile:function(i,o){var n,r,s,l,a,h,d,c,u,p,f;for(h=e("<div class='e-head-content'></div>"),c=e("<div class='e-file-head e-head-name'>"+this._getLocalizedLabels("name")+"</div>"),u=e("<div class='e-file-head e-head-size'>"+this._getLocalizedLabels("size")+"</div>"),p=e("<div class='e-file-head e-head-status'>"+this._getLocalizedLabels("status")+"</div>"),this.model.customFileDetails.name&&e(c).appendTo(h),this.model.customFileDetails.size&&e(u).appendTo(h),this.model.customFileDetails.status&&e(p).appendTo(h),filedialog=this.updialog,filedialog&&0!=filedialog.length?this.model.showFileDetails&&(this.updialog&&this.updialog.find(".e-uploadbtn").removeAttr("disabled").removeClass("e-disable"),this.diaObj.open()):(this.updialog=t.buildTag("div.uploaddialog#"+this.element[0].id+"_dialog","",{},{title:this._getLocalizedLabels("title")}),this.model.allowDragAndDrop&&!this.model.showBrowseButton?(this.dragWrapper.append(this.updialog),DialogContentContainer="#"+this.control.id+"_dragWrapper"):(this.element.append(this.updialog),DialogContentContainer="#"+this.control.id)),n=this.updialog.find(".e-ul"),e(this.updialog.find(".e-head-content"))&&e(this.updialog.find(".e-head-content")).replaceWith(h),0==n.length&&(h.appendTo(this.updialog),n=t.buildTag("ul.e-ul").appendTo(this.updialog)),e(this.updialog).find(".e-file-upload").length>0&&e(this.updialog).find(".e-file-upload").remove(),fileListActions=t.buildTag("div.e-file-upload").appendTo(this.updialog).append(this.model.autoUpload||!this.model.asyncUpload?e(t.buildTag("div.e-action-container")).addClass("sync"):t.buildTag("div.e-action-container")),dialogActions=t.buildTag("button.e-uploadclosebtn e-btn e-select",this._getLocalizedLabels("cancel"),{},{type:"button","data-role":"none"}).appendTo(e(this.updialog).find(".e-action-container")),this.model.showRoundedCorner&&dialogActions.addClass("e-corner"),this._on(dialogActions,"click",this._dialogclose),this._on(dialogActions,"keydown",this._keydownDialogClose),f=null!=this.model.dialogAction.content&&""!=this.model.dialogAction.content?this.model.dialogAction.content:DialogContentContainer,this.updialog.ejDialog({showOnInit:!1,closeIconTooltip:this._getLocalizedLabels("closeToolTip"),minWidth:240,width:e(window).width()<750?250:this._getDialogContentWidth(),height:"auto",cssClass:"e-uploadbox "+this.model.cssClass,close:e.proxy(this._uploadFileListDelete,this),enableRTL:this.model.enableRTL,target:f,enableResize:!1,allowDraggable:this.model.dialogAction.drag,enableModal:!!this.model.asyncUpload&&this.model.dialogAction.modal,showHeader:this.model.customFileDetails.title,showRoundedCorner:this.model.showRoundedCorner}),e(window).width()<750?e(this.updialog).closest(".e-dialog.e-uploadbox").addClass("e-mobile-upload"):e(this.updialog).closest(".e-dialog.e-uploadbox").removeClass("e-mobile-upload"),this.diaObj=this.updialog.data("ejDialog"),""!=this.model.cssClass&&this.diaObj.setModel({cssClass:this.model.cssClass}),this._dialogPosition(),this.model.multipleFilesSelection||this.updialog.find(".e-ul>.e-upload-file").remove(),l=0;l<i.length;l++)r=e("<li class='e-upload-file'></li>").appendTo(n).data(o),addedlist=e("<div class='e-file-list'></div>"),addedfilename=e("<div class='e-file-progress e-file-view'><div class='e-file-name e-file-view'><span class='e-file-name-txt'>"+i[l].name+"</span></div>"),d="<div class='e-file-size e-file-view'><span class='e-file-name-txt'>"+this._formatSize(i[l].size)+"</span></div>",addedfilestatus=e("<div class='e-file-percentage e-file-view'><div class='e-file-progress-bar'><div class='e-file-progress-status'></div></div></div>"),addedfileaction=e("<div class='e-action-perform'><div class='e-icon e-file-view'></div></div>"),this.model.customFileDetails.name&&e(addedfilename).appendTo(addedlist),this.model.customFileDetails.size&&(0==this._getFileSize(i[l]).toString().toLowerCase().match("0.0kb").length||null!=i[l].size?e(d).appendTo(addedlist):e(this.updialog).find(".e-head-size").remove()),this.model.customFileDetails.status&&e(addedfilestatus).appendTo(addedlist),this.model.customFileDetails.action&&(e(addedfileaction).appendTo(addedlist),a="cancel",addedlist.find(".e-icon").remove().addClass(a.toString()),s=t.buildTag("div.e-icon e-file-cancel","",{},{"data-content":this._getLocalizedLabels("cancelToolTip")}),addedlist.find(".e-action-perform").append(s),this._on(s,"click",this._actionClick)),e(addedlist).appendTo(r);return this.model.showFileDetails&&this.diaObj.open(),this._buttonText(this.model.buttonText),this._dialogText(this.model.dialogText),r},_keydownDialogClose:function(e){this._currentElement.hasClass("e-disable")||13==e.keyCode&&this._dialogclose()},_pushFileDetails:function(i){var o,n,r,s,l,a,h,d,c,u,p,f,m;return r=e("<div class='e-head-content'></div>"),s=e("<div class='e-file-head e-head-name'>"+this._getLocalizedLabels("name")+"</div>"),l=e("<div class='e-file-head e-head-size'>"+this._getLocalizedLabels("size")+"</div>"),a=e("</div><div class='e-file-head e-head-status'>"+this._getLocalizedLabels("status")+"</div>"),this.model.customFileDetails.name&&e(s).appendTo(r),this.model.customFileDetails.size&&e(l).appendTo(r),this.model.customFileDetails.status&&e(a).appendTo(r),o=this,filedialog=this.updialog,filedialog&&0!=filedialog.length?this.model.showFileDetails&&(DialogContentContainer="#"+this.control.id,this.updialog&&this.updialog.find(".e-uploadbtn").removeAttr("disabled").removeClass("e-disable"),o.diaObj.open()):(this.updialog=t.buildTag("div.uploaddialog#"+this.element[0].id+"_dialog","",{},{title:this._getLocalizedLabels("title")}),this.model.allowDragAndDrop&&!this.model.showBrowseButton?(this.dragWrapper.append(this.updialog),DialogContentContainer="#"+this.control.id+"_dragWrapper"):(this.element.append(this.updialog),DialogContentContainer="#"+this.control.id)),p=this.updialog.find(".e-ul"),e(this.updialog.find(".e-head-content"))&&e(this.updialog.find(".e-head-content")).replaceWith(r),0==p.length&&(r.appendTo(this.updialog),p=t.buildTag("ul.e-ul").appendTo(this.updialog)),e(this.updialog).find(".e-file-upload").length>0&&e(this.updialog).find(".e-file-upload").remove(),fileListActions=t.buildTag("div.e-file-upload").appendTo(this.updialog).append(this.model.autoUpload||!this.model.asyncUpload?e(t.buildTag("div.e-action-container")).addClass("sync"):t.buildTag("div.e-action-container")),dialogActions=t.buildTag("button.e-uploadclosebtn e-btn e-select",this._getLocalizedLabels("cancel"),{},{type:"button","data-role":"none"}).appendTo(e(this.updialog).find(".e-action-container")),this.model.showRoundedCorner&&dialogActions.addClass("e-corner"),this._on(dialogActions,"click",this._dialogclose),this.model.multipleFilesSelection||this.updialog.find(".e-ul>.e-upload-file").remove(),f=e("<li class='e-upload-file'></li>").appendTo(p).data("file",i),n=e("<div class='e-file-list'></div>"),h=e("<div class='e-file-progress e-file-view'><div class='e-file-name e-file-view'><span class='e-file-name-txt'>"+i.name+"</span></div>"),c=e("<div class='e-file-size e-file-view'><span class='e-file-name-txt'>"+this._formatSize(0)+"\\"+this._formatSize(i.size)+"</span></div>"),d=e("<div class='e-file-percentage e-file-view'><div class='e-file-progress-bar'><div class='e-file-progress-status'></div></div></div>"),u=e("<div class='e-action-perform'><div class='e-icon e-file-view'></div></div></div>"),this.model.customFileDetails.name&&e(h).appendTo(n),this.model.customFileDetails.size&&e(c).appendTo(n),this.model.customFileDetails.status&&e(d).appendTo(n),this.model.customFileDetails.action&&e(u).appendTo(n),e(n).appendTo(f),m=null!=this.model.dialogAction.content&&""!=this.model.dialogAction.content?this.model.dialogAction.content:DialogContentContainer,this.updialog.ejDialog({showOnInit:!1,closeIconTooltip:this._getLocalizedLabels("closeToolTip"),minWidth:240,width:e(window).width()<750?250:this._getDialogContentWidth(),height:"auto",cssClass:"e-uploadbox "+this.model.cssClass,close:e.proxy(this._uploadFileListDelete,this),enableRTL:this.model.enableRTL,target:m,enableResize:!1,allowDraggable:this.model.dialogAction.drag,enableModal:!!this.model.asyncUpload&&this.model.dialogAction.modal,showHeader:this.model.customFileDetails.title,showRoundedCorner:this.model.showRoundedCorner}),e(window).width()<750?e(this.updialog).closest(".e-dialog.e-uploadbox").addClass("e-mobile-upload"):e(this.updialog).closest(".e-dialog.e-uploadbox").removeClass("e-mobile-upload"),o.diaObj=this.updialog.data("ejDialog"),""!=o.model.cssClass&&o.diaObj.setModel({cssClass:this.model.cssClass}),o._dialogPosition(),this.model.showFileDetails&&o.diaObj.open(),this._buttonText(this.model.buttonText),this._dialogText(this.model.dialogText),f},_setProgress:function(t,i,o){var n,r,s;this.model.customFileDetails.status&&e(t).find(".e-file-progress-status").width(i+"%"),this.model.customFileDetails.size&&(n=e(t).find(".e-file-size .e-file-name-txt"),r=this._formatSize(o.loaded),s=this._formatSize(o.total),n.html(r+"\\"+s))},_setAction:function(e,i){var o;this.model.customFileDetails.action&&(e.find(".e-action-perform .e-icon,.e-file-percentage .e-icon").remove().addClass(i.toString()),"cancel"==i?o=t.buildTag("div.e-icon e-file-cancel","",{},{"data-content":this._getLocalizedLabels("cancelToolTip")}):"remove"==i?o=t.buildTag("div.e-icon e-delete","",{},{"data-content":this._getLocalizedLabels("removeToolTip")}):"retry"==i&&(o=t.buildTag("div.e-icon e-reload","",{},{"data-content":this._getLocalizedLabels("retryToolTip")})),e.find(".e-action-perform").append(o),this._on(o,"click",this._actionClick))},_setStatus:function(e,i){if(this.model.customFileDetails.status){var o=t.buildTag("div");"success"==i&&(e.find(".file-status").addClass("e-file-status-success").html("Completed"),e.find(".e-file-percentage").html(""),o.addClass("e-icon e-checkmark").attr("data-content",this._getLocalizedLabels("completedToolTip")),e.find(".e-file-percentage").append(o)),"failed"==i&&(e.find(".file-status").addClass("e-file-status-failed").html("Failed"),e.find(".e-file-percentage").html(""),o.addClass("e-icon e-file-percentage-failed").attr("data-content",this._getLocalizedLabels("failedToolTip")),e.find(".e-file-percentage").append(o)),"progress"==i&&e.find(".file-status").addClass("file-status-inprogress").html("in progress"),"uploading"==i&&(e.find(".file-status").addClass("file-status-inprogress").html("uploading"),e.find(".e-file-percentage").html(""))}},_renderTooltip:function(){t.isNullOrUndefined(this.updialog)||(this.upTooltip=e(this.updialog).ejTooltip({target:".e-file-cancel, .e-delete, .e-reload, .e-checkmark, .e-close, .e-file-percentage-failed",content:" ",isBalloon:!1,showRoundedCorner:this.model.showRoundedCorner,enableRTL:this.model.enableRTL,position:{target:{horizontal:"center",vertical:"bottom"},stem:{horizontal:"left",vertical:"top"}}}).data("ejTooltip"),e(this.upTooltip.tooltip).css({"min-width":"auto"}))},_createInputandBind:function(){var e=t.buildTag("input","",{},{type:"file","data-role":"none"});e.attr("name",""!=this.model.uploadName?this.model.uploadName:this.control.id).attr("autocomplete","off").attr("class","e-uploadinput").attr("accept",this.model.extensionsAllow),this.model.multipleFilesSelection&&0==(-1!=navigator.userAgent.indexOf("Safari")&&-1==navigator.userAgent.indexOf("Chrome"))&&e.attr("multiple","multiple"),e.appendTo(this.element.find(".e-selectpart")),this.inputupload=e,this._bindInputChangeEvent()},_showUploadButton:function(){var i=this.updialog.find(".e-uploadbtn");0==i.length&&(i=t.buildTag("button.e-uploadbtn e-btn e-select",this._getLocalizedLabels("upload"),{},{type:"button","data-role":"none"}),this.model.showRoundedCorner&&i.addClass("e-corner"),this.updialog.find(".e-action-container").append(i),this._on(i,"click",this.__uploadButtonClick),this._on(i,"keydown",this._keydownUpload),e(i).focus()),this._buttonText(this.model.buttonText)},_keydownUpload:function(e){13==e.keyCode&&this.__uploadButtonClick(e)},_resetFileInput:function(e){var t=e.clone(!1,!1);this._on(t,"change",this._inputValueChange),e.replaceWith(t)},_isAllowed:function(t){var i,o,n,r,s,l,a=this,h=[],d=[],c=!0;return i=this.element.find(".e-uploadinput"),o=this,""!=this.model.extensionsAllow?(r=this.model.extensionsAllow.replace(/\s/g,"").toLowerCase().split(","),e(t).each(function(){-1==e.inArray(this.extension.toLowerCase(),r)?(n={action:"Files Processing",error:a._getLocalizedLabels("allowError").replace("#Extension",r.join(", ")),files:this},o._trigger("error",n),a._resetFileInput(i),c=!1):""!=this.extension&&h.push(this)})):""!=this.model.extensionsDeny?(l=this.model.extensionsDeny.replace(/\s/g,"").toLowerCase().split(","),e(t).each(function(){-1!=e.inArray(this.extension.toLowerCase(),l)?(n={action:"Files Processing",error:a._getLocalizedLabels("denyError").replace("#Extension",l.join(", ")),files:this},o._trigger("error",n),a._resetFileInput(i),c=!1):""!=this.extension&&h.push(this)})):e(t).each(function(){""!=this.extension&&h.push(this)}),""!=this.model.fileSize?(s=this.model.fileSize,e(h).each(function(){this.size>s?(n={action:"Files Processing",error:a._getLocalizedLabels("filedetail").replace("#fileSize",s),files:this},o._trigger("error",n),a._resetFileInput(i),c=!1):d.push(this)})):d=h,{files:d,status:c}},_fileListRemove:function(){fileList=this.updialog.find(".e-upload-file .e-delete"),0==fileList.length&&(this.updialog.find(".e-uploadbtn").attr("disabled","disabled").addClass("e-disable"),this.updialog.ejDialog("close"))},_uploadHide:function(){fileList=this.updialog.find(".e-upload-file .e-file-cancel"),0==fileList.length&&(this.updialog.find(".e-ul").empty(),this.updialog.find(".e-uploadbtn").attr("disabled","disabled").addClass("e-disable"),this.updialog.ejDialog("close"),this.upTooltip.hide())},_onBeforeClose:function(i){t.isNullOrUndefined(i.event)||(i.cancel=!!e(i.event.currentTarget).hasClass("e-disable"))},_dialogclose:function(t){if(!this._currentElement.hasClass("e-disable")){var i,o,n=this.updialog.find(".e-uploadclosebtn");o=this.updialog.find(".e-ul").children().first(),i=e(o).data("file"),n.hasClass("e-disable")?t.preventDefault():(this._uploadFileListDelete(),this.updialog.ejDialog("close")),this._trigger("cancel",{fileStatus:i})}},_uploadFileListDelete:function(){this.updialog.find(".e-ul").empty(),this._currentElement.find(".e-uploadinput").val(""),this._resetFileInput(this._currentElement.find(".e-uploadinput")),this.model.asyncUpload||this._formResetSyncUpload()},_onXhrSelect:function(){var t,i;this._xhrBeforeUpload(this._files),t=this,e.each(t._files,function(o,n){i=e(n).data("filelist"),t._setAction(i,"cancel"),t.model.autoUpload?t._xhrPerformUpload(n):t._showUploadButton()})},_xhrBeforeUpload:function(t){var i,o,n,r;return i=t,o=this,e.each(i,function(t,i){n=o._createFormObjectXhr(i),e(i).data("formobject",n),r=o._pushFileDetails(i),e(i).data("filelist",r)}),i},_xhrPerformUpload:function(t){var i,n,r,s,l;return s=new XMLHttpRequest,n=this,l={files:t},this._trigger("begin",l)?(e(t).data("xhr",s),void n._onRequestError(n,o,t)):(i=this.model.saveUrl,(r=e(t).data("formobject")).append((this.model.uploadName&&""!=this.model.uploadName?this.model.uploadName:this.control.id)+"_data",JSON.stringify(l.data)),e(t).data("xhr",s),s.addEventListener("load",function(e){n._onRequestSuccess(n,e,t)},!1),s.addEventListener("error",function(e){n._onRequestError(n,e,t)},!1),s.upload.addEventListener("progress",function(e){n._onRequestProgress(n,e,t)},!1),s.open("POST",i),l={files:t,xhr:s},this._trigger("beforeSend",l)?(e(t).data("xhr",s),void n._onRequestError(n,o,t)):void s.send(r))},_xhrOnUploadButtonClick:function(){var t;for(t=(this.model.showBrowseButton?this.diaObj.wrapper:this.dragWrapper).find(".e-ul li.e-upload-file"),i=0;i<t.length;i++)e(this),this._isFileUpload(t[i])&&this._xhrPerformUpload(e(t[i]).data("file"))},_xhrOnRemove:function(t,i){var o=e(i).find(".e-file-name").text().toString().split(","),n=this;e.ajax({url:this.model.removeUrl,type:"POST",data:"fileNames="+o,success:function(){e(i).remove(),n._fileListRemove(),n._trigger("remove",{fileStatus:n._file})}}),this.upTooltip.hide()},_xhrOnCancel:function(t,i){var o;o=e(i).data("file"),e(o).data("xhr")&&e(o).data("xhr").abort(),e(o).data("xhr",null),e(i).data("file",null),e(i).remove(),this._uploadHide()},_xhrOnRetry:function(t,i){if(!this._currentElement.hasClass("e-disable")){var o=e(i).data("file");this._xhrPerformUpload(o)}},_onRequestSuccess:function(t,i,o){var n=e(o).data("xhr");n.status>=200&&n.status<=299?t._onXhrUploadSuccess(t,i,o):t._onRequestError(t,i,o)},_onXhrUploadSuccess:function(t,i,o){var n,r,s,l,a;n=e(o).data("filelist"),r=e(o).data("xhr"),t.model.removeUrl?(t._setAction(n,"remove"),t._setStatus(n,"success")):(n.find(".e-action-perform .e-icon,.e-file-percentage .e-icon").remove(),t._setStatus(n,"success")),e(o).length>0&&(e(n).find(".e-file-progress-status").width("100%"),s=e(o)[0].size,l=this._formatSize(s),e(n).find(".e-file-size .e-file-name-txt").html(l+"\\"+l)),a={files:o,responseText:r.responseText,xhr:r,e:i},this.updialog.find(".e-file-upload .e-uploadclosebtn").html(this.model.buttonText.close).focus(),t._trigger("success",a),this._successFiles.push(o),t._files.length==this._successFiles.length&&(a={files:o,responseText:r.responseText,success:this._successFiles,xhr:r,e:i},t._trigger("complete",a),this._successFiles.length=0,this.model.dialogAction.closeOnComplete&&this._dialogclose())},_onRequestError:function(t,i,o){var n,r,s;n=e(o).data("filelist"),r=e(o).data("xhr"),t._setAction(n,"retry"),t._setStatus(n,"failed"),s={action:"File Processing",error:r.status?r.status+" "+r.statusText:"Unable to reach the server.",files:o,xhr:r,e:i},t._trigger("error",s)},_onRequestProgress:function(t,i,o){var n,r,s;n=Math.round(100*i.loaded/i.total),r=e(o).data("filelist"),t._setProgress(r,n,i),t._setStatus(r,"progress"),s={file:o,percentage:n,e:i},this._trigger("inProgress",s)},_createFormObjectXhr:function(e){var t=new FormData;return t.append(""!=this.model.uploadName?this.model.uploadName:this.control.id,e.rawFile),t},_getInputFileInfo:function(e){var t=e[0];return t.files?this._getAllFileInfo(t.files):[{name:this._GetName(t.value),extension:this._getFileExtensionType(t.value),size:this._getFileSizeinIE(t.value)}]},_getFileSizeinIE:function(e){var t,i;t=null,i=null;try{t=new ActiveXObject("Scripting.FileSystemObject")}catch(e){i=null}return t&&(i=t.getFile(e).size),i},_getFileExtensionType:function(e){return e.match&&e.match(/\.([^\.]+)$/)?e.match(/\.([^\.]+)$/)[0]:""},_getAllFileInfo:function(t){var i=this;return e.map(t,function(e){return i._getFileInfo(e||t)})},_GetName:function(e){var t=e.lastIndexOf("\\");return-1!=t?e.substr(t+1):e},_getFileInfo:function(e){var t=e.name||e.fileName||e;return{name:t,extension:this._getFileExtensionType(t),size:e.size||e.fileSize,rawFile:e}},_formatSize:function(e){var t=-1;if(!e)return"0.0KB";do{e/=1024,t++}while(e>99);return Math.max(e,0).toFixed(1)+["KB","MB","GB","TB","PB","EB"][t]},_onSelectIFrame:function(t){var i,o,n;i=e(t.target),o=this._getInputFileInfo(i),(n=this._beforeUploadIFrame(o)).data("iframe"),this.model.autoUpload?this._performUploadIFrame(n):this._showUploadButton(),this._off(this.inputupload,"change"),this._bindInputChangeEvent()},_onRemoveIFrame:function(t,i){var o,n,r;o=i.data("iframe"),n=e(i).data("file")[0].name,r=this,o?(this._removeFileEntry(i),this.model.removeUrl&&e.ajax({url:this.model.removeUrl,type:"POST",data:"fileNames="+n,success:function(){r._fileListRemove(),r._trigger("remove",{fileStatus:r._file})}})):(this._removeFileEntry(i),this._trigger("remove",{fileStatus:this._file}))},_onCancelIFrame:function(e,t){var i;this._trigger("cancel",{Status:t}),(i=t.data("iframe"))&&(this._removeFileEntry(t),void 0!==i.stop?i.stop():i.document&&(i.document.execCommand("Stop"),i.contentWindow.location.href=i.contentWindow.location.href),this._processServerResponse(i,"")),this._uploadHide()},_onRetryIFrame:function(e,t){this._performUploadIFrame(t)},_beforeUploadIFrame:function(e){var t,i,o;return t=this._createFrame(this.control.id+"_Iframe"+this.Uploadframes.length),this.Uploadframes.push(t),i=this._createForm(this.model.saveUrl,t[0].id),this._currentElement.find("input.e-uploadinput").removeClass("e-uploadinput").css("display","none").appendTo(i),this._createInputandBind(),o=this._pushFile(e,{iframe:t,form:i,file:e}),t.data({filelist:o}),this._setAction(o,"cancel"),o},_performUploadIFrame:function(t){var i,o,n,r;n={files:t},this._trigger("begin",n)?this._failureIframeUpload(t,"File upload has been denied"):(t.data("file"),this._setStatus(t,"uploading"),i=t.data("iframe"),o=t.data("form"),r=e("<input>").attr("name",(this.model.uploadName&&""!=this.model.uploadName?this.model.uploadName:this.control.id)+"_data").attr("type","hidden").val(JSON.stringify(n.data)),o.append(r),i.appendTo(document.body),o.appendTo(document.body),this._on(i,"load",this._removeFramesIFrame),o.submit())},_onUploadButtonClickIFrame:function(){var t,i;e(".e-ul li.e-upload-file",(t=this).updialog).each(function(){i=e(this),t._isFileUpload(i)&&t._performUploadIFrame(i)})},_removeFramesIFrame:function(t){var i,o,n;n=(i=e(t.target)).data("filelist");try{o=e.trim(i.context.contentDocument.body.innerText.replace(/\n|\r/g," "))}catch(t){o="Server Error trying to get server response: "+t}"Server Error"!=o.substring(0,12)&&0!=o.indexOf("HTTP Error")?(this._processServerResponse(i,o),this._setIframeProgress(n,100,t),this._setStatus(n,"progress"),this._successIframeUpload(n,o)):this._failureIframeUpload(n,o)},_setIframeProgress:function(t,i){e(t).find(".e-file-progress-status").width(i+"%")},_successIframeUpload:function(e,t){fileEntry=e.data("file"),this.model.removeUrl?(this._setAction(e,"remove"),this._setStatus(e,"success")):(e.find(".file-action").remove(),this._setStatus(e,"success")),args={files:fileEntry,responseText:t},this.updialog.find(".e-file-upload .e-uploadclosebtn").html(this.model.buttonText.close).focus(),this._trigger("success",args),this._successFiles.push(fileEntry),e.length==this._successFiles.length&&(args={files:fileEntry,responseText:t,success:this._successFiles},this._trigger("complete",args),this._successFiles.length=0,this.model.dialogAction.closeOnComplete&&this._dialogclose())},_failureIframeUpload:function(e,t){fileEntry=e.data("file"),this.model.saveUrl&&"File upload has been denied"!=t?(this._setAction(e,"retry"),this._setStatus(e,"failed")):(e.find(".file-action").remove(),this._setStatus(e,"failed")),args=0==t.indexOf("HTTP Error")?{files:fileEntry,responseText:t,status:t.match(/\d+/).toString()}:{files:fileEntry,responseText:t},this._trigger("error",args)},_processServerResponse:function(t){var i;i=e(document.body).find("form[target='"+e(t).attr("id")+"']"),setTimeout(function(){i.remove(),t.remove()},0)},_createDivBlock:function(e){return t.buildTag("div."+e)},_createForm:function(e,i){return t.buildTag("form","",{},{enctype:"multipart/form-data",method:"POST",action:e,target:i})},_createFrame:function(e){return t.buildTag("iframe#"+e,"",{display:"none"},{name:e})},_createInput:function(e){return t.buildTag("input","",{},{type:"file",name:e,"data-role":"none"})},_initObjectsSyncUpload:function(){this._currentElement.closest("form").attr("enctype","multipart/form-data").attr("encoding","multipart/form-data"),this._wireEventsSyncUpload()},_wireEventsSyncUpload:function(){var t=this._currentElement.closest("form")[0];this._on(e(t),"submit",this._formSubmitSyncUpload),this._on(e(t),"reset",this._formResetSyncUpload)},_onSelectSyncUpload:function(t){var i,o;i=e(t.target),o=e(".e-selectpart",this.control),this._currentElement.find("input.e-uploadinput").removeClass("e-uploadinput").css("display","none").appendTo(o),this._createInputandBind(),this._pushFile(this._files,{file:this._files,Input:i})},_onCancelSyncUpload:function(e,t){var i=t.data("Input");t.data("file",null),t.data("Input",null),t.remove(),i.remove(),this._uploadHide()},_formSubmitSyncUpload:function(){var t,i;(t=e(".e-uploadinput",this.control)).attr("name",""),i=""!=this.model.uploadName?this.model.uploadName:this.control.id,setTimeout(function(){t.attr("name",i)},0)},_formResetSyncUpload:function(){e(".e-selectpart",this.control).children('input[type="file"]').each(function(){e(this).hasClass("e-uploadinput")||e(this).remove()})}}),t.Uploadbox.Locale=t.Uploadbox.Locale||{},t.Uploadbox.Locale.default=t.Uploadbox.Locale["en-US"]={buttonText:{upload:"Upload",browse:"Browse",cancel:"Cancel",close:"Close"},dialogText:{title:"Upload Box",name:"Name",size:"Size",status:"Status"},dropAreaText:"Drop files or click to upload",filedetail:"The selected file size is too large.  Please select a file within #fileSize",denyError:"Files with #Extension extensions are not allowed.",allowError:"Only files with #Extension extensions are allowed.",cancelToolTip:"Cancel",removeToolTip:"Remove",retryToolTip:"Retry",completedToolTip:"Completed",failedToolTip:"Failed",closeToolTip:"Close"}}),$(document).ready(function(e){var t=createLoader("#body");$("#body").ejWaitingPopup({template:$("#"+t)}),postmd=renderMde("#general-feedbak-comment")}),$(document).on("click","#feedback-section, .feedback-button",function(){$("#do-not-show-button").addClass("display-none"),$("#show-later-button").addClass("display-none"),$("#cancel-button").removeClass("display-none"),$("#close-general-feedback").attr("data-feedback-close",!0),$("#submit-button").prop("disabled",!0),openFeedbackWindow()}),$(document).on("click",".sub-button",function(){$(".sub-button").removeClass("button-bg-change"),$(this).addClass("button-bg-change"),subject=$(this).val(),"sub1"==$(this).attr("id")?$(".sub-title-change").html("<span class='popup-label-sub'>"+window.Server.App.LocalizationContent.FeedbackSubjectProblem+"</span>"):"sub2"==$(this).attr("id")?$(".sub-title-change").html("<span class='popup-label-sub'>"+window.Server.App.LocalizationContent.FeedbackSubjectSuggestion+"</span>"):"sub3"==$(this).attr("id")?$(".sub-title-change").html("<span class='popup-label-sub'>"+window.Server.App.LocalizationContent.FeedbackSubjectCompliment+"</span>"):"sub4"==$(this).attr("id")&&$(".sub-title-change").html("<span class='popup-label-sub'>"+window.Server.App.LocalizationContent.FeedbackSubjectOther+"</span>")}),$(document).on("click",".smiley-change",function(){$(".smiley-change").addClass("smiley-select"),$(this).removeClass("smiley-select"),experience=$(this).attr("data-smiley-val"),$("#submit-button").prop("disabled",!1),$("#submit-button").removeClass("disable-cursor")}),$(document).on("click",".cookie-button",function(){var e=$(this).attr("data-cookie");$("#general-feedback-popup").ejDialog("close");postmd.value("");experience="",subject="",$(".sub-button").removeClass("button-bg-change"),$(".smiley-change").removeClass("smiley-select"),$("#general-feedback-popup").addClass("display-none"),"false"==$(this).attr("data-feedback-close")&&$.ajax({type:"POST",url:feedbackCookieUrl,data:{cookieType:e}})}),$(document).on("click","#submit-button",function(){var e=postmd.value(),t={FeedbackFormId:$("#feedback-form-id").val(),CanContact:$("#general-feedback").is(":checked"),Comments:e,Experience:experience,FeedbackSubject:subject},i=$(this).attr("data-cookie");$("body").ejWaitingPopup("show"),$.ajax({type:"POST",url:feedbackSendUrl,data:{feedback:JSON.stringify(t)},success:function(e){$("#body").ejWaitingPopup("hide"),e.Status?(SuccessAlert(window.Server.App.LocalizationContent.AddUserFeedback,window.Server.App.LocalizationContent.AddUserFeedbackSuccess,7e3),$("#general-feedback-popup").ejDialog("close"),setSendFeedbackCookie(i)):(WarningAlert(window.Server.App.LocalizationContent.FeedbackFailure,window.Server.App.LocalizationContent.AddUserFeedbackFailure,7e3),$("#general-feedback-popup").ejDialog("close"))},error:function(){WarningAlert(window.Server.App.LocalizationContent.FeedbackFailure,window.Server.App.LocalizationContent.AddUserFeedbackFailure,7e3),$("#body").ejWaitingPopup("hide")}})}),function(e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).EasyMDE=e()}(function(){return function e(t,i,o){function n(s,l){if(!i[s]){if(!t[s]){var a="function"==typeof require&&require;if(!l&&a)return a(s,!0);if(r)return r(s,!0);var h=new Error("Cannot find module '"+s+"'");throw h.code="MODULE_NOT_FOUND",h}var d=i[s]={exports:{}};t[s][0].call(d.exports,function(e){return n(t[s][1][e]||e)},d,d.exports,e,t,i,o)}return i[s].exports}for(var r="function"==typeof require&&require,s=0;s<o.length;s++)n(o[s]);return n}({1:[function(e,t,i){"use strict";i.byteLength=function(e){var t=a(e),i=t[0],o=t[1];return 3*(i+o)/4-o},i.toByteArray=function(e){for(var t,i=a(e),o=i[0],s=i[1],l=new r(3*(o+(u=s))/4-u),h=0,d=0<s?o-4:o,c=0;c<d;c+=4)t=n[e.charCodeAt(c)]<<18|n[e.charCodeAt(c+1)]<<12|n[e.charCodeAt(c+2)]<<6|n[e.charCodeAt(c+3)],l[h++]=t>>16&255,l[h++]=t>>8&255,l[h++]=255&t;var u;return 2===s&&(t=n[e.charCodeAt(c)]<<2|n[e.charCodeAt(c+1)]>>4,l[h++]=255&t),1===s&&(t=n[e.charCodeAt(c)]<<10|n[e.charCodeAt(c+1)]<<4|n[e.charCodeAt(c+2)]>>2,l[h++]=t>>8&255,l[h++]=255&t),l},i.fromByteArray=function(e){for(var t,i=e.length,n=i%3,r=[],s=0,l=i-n;s<l;s+=16383)r.push(h(e,s,l<s+16383?l:s+16383));return 1===n?(t=e[i-1],r.push(o[t>>2]+o[t<<4&63]+"==")):2===n&&(t=(e[i-2]<<8)+e[i-1],r.push(o[t>>10]+o[t>>4&63]+o[t<<2&63]+"=")),r.join("")};for(var o=[],n=[],r="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",l=0;l<64;++l)o[l]=s[l],n[s.charCodeAt(l)]=l;function a(e){var t=e.length;if(0<t%4)throw new Error("Invalid string. Length must be a multiple of 4");var i=e.indexOf("=");return-1===i&&(i=t),[i,i===t?0:4-i%4]}function h(e,t,i){for(var n,r,s=[],l=t;l<i;l+=3)n=(e[l]<<16&16711680)+(e[l+1]<<8&65280)+(255&e[l+2]),s.push(o[(r=n)>>18&63]+o[r>>12&63]+o[r>>6&63]+o[63&r]);return s.join("")}n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63},{}],2:[function(e,t,i){},{}],3:[function(e,t,i){"use strict";var o=e("base64-js"),n=e("ieee754");i.Buffer=l,i.SlowBuffer=function(e){return+e!=e&&(e=0),l.alloc(+e)},i.INSPECT_MAX_BYTES=50;var r=2147483647;function s(e){if(r<e)throw new RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return t.__proto__=l.prototype,t}function l(e,t,i){if("number"!=typeof e)return a(e,t,i);if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return d(e)}function a(e,t,i){if("string"==typeof e)return function(e,t){if("string"==typeof t&&""!==t||(t="utf8"),!l.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var i=0|p(e,t),o=s(i),n=o.write(e,t);return n!==i&&(o=o.slice(0,n)),o}(e,t);if(ArrayBuffer.isView(e))return c(e);if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(E(e,ArrayBuffer)||e&&E(e.buffer,ArrayBuffer))return function(e,t,i){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(i||0))throw new RangeError('"length" is outside of buffer bounds');var o;return(o=void 0===t&&void 0===i?new Uint8Array(e):void 0===i?new Uint8Array(e,t):new Uint8Array(e,t,i)).__proto__=l.prototype,o}(e,t,i);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var o=e.valueOf&&e.valueOf();if(null!=o&&o!==e)return l.from(o,t,i);var n=function(e){if(l.isBuffer(e)){var t=0|u(e.length),i=s(t);return 0===i.length||e.copy(i,0,0,t),i}return void 0!==e.length?"number"!=typeof e.length||N(e.length)?s(0):c(e):"Buffer"===e.type&&Array.isArray(e.data)?c(e.data):void 0}(e);if(n)return n;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return l.from(e[Symbol.toPrimitive]("string"),t,i);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function h(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function d(e){return h(e),s(e<0?0:0|u(e))}function c(e){for(var t=e.length<0?0:0|u(e.length),i=s(t),o=0;o<t;o+=1)i[o]=255&e[o];return i}function u(e){if(r<=e)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r.toString(16)+" bytes");return 0|e}function p(e,t){if(l.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||E(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var i=e.length,o=2<arguments.length&&!0===arguments[2];if(!o&&0===i)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return i;case"utf8":case"utf-8":return M(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*i;case"hex":return i>>>1;case"base64":return O(e).length;default:if(n)return o?-1:M(e).length;t=(""+t).toLowerCase(),n=!0}}function f(e,t,i){var o=e[t];e[t]=e[i],e[i]=o}function m(e,t,i,o,n){if(0===e.length)return-1;if("string"==typeof i?(o=i,i=0):2147483647<i?i=2147483647:i<-2147483648&&(i=-2147483648),N(i=+i)&&(i=n?0:e.length-1),i<0&&(i=e.length+i),i>=e.length){if(n)return-1;i=e.length-1}else if(i<0){if(!n)return-1;i=0}if("string"==typeof t&&(t=l.from(t,o)),l.isBuffer(t))return 0===t.length?-1:g(e,t,i,o,n);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?n?Uint8Array.prototype.indexOf.call(e,t,i):Uint8Array.prototype.lastIndexOf.call(e,t,i):g(e,[t],i,o,n);throw new TypeError("val must be string, number or Buffer")}function g(e,t,i,o,n){var r,s=1,l=e.length,a=t.length;if(void 0!==o&&("ucs2"===(o=String(o).toLowerCase())||"ucs-2"===o||"utf16le"===o||"utf-16le"===o)){if(e.length<2||t.length<2)return-1;l/=s=2,a/=2,i/=2}function h(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(n){var d=-1;for(r=i;r<l;r++)if(h(e,r)===h(t,-1===d?0:r-d)){if(-1===d&&(d=r),r-d+1===a)return d*s}else-1!==d&&(r-=r-d),d=-1}else for(l<i+a&&(i=l-a),r=i;0<=r;r--){for(var c=!0,u=0;u<a;u++)if(h(e,r+u)!==h(t,u)){c=!1;break}if(c)return r}return-1}function v(e,t,i,o){i=Number(i)||0;var n=e.length-i;o?n<(o=Number(o))&&(o=n):o=n;var r=t.length;r/2<o&&(o=r/2);for(var s=0;s<o;++s){var l=parseInt(t.substr(2*s,2),16);if(N(l))return s;e[i+s]=l}return s}function b(e,t,i,o){return j(function(e){for(var t=[],i=0;i<e.length;++i)t.push(255&e.charCodeAt(i));return t}(t),e,i,o)}function _(e,t,i){i=Math.min(e.length,i);for(var o=[],n=t;n<i;){var r,s,l,a,h=e[n],d=null,c=239<h?4:223<h?3:191<h?2:1;if(n+c<=i)switch(c){case 1:h<128&&(d=h);break;case 2:128==(192&(r=e[n+1]))&&127<(a=(31&h)<<6|63&r)&&(d=a);break;case 3:r=e[n+1],s=e[n+2],128==(192&r)&&128==(192&s)&&2047<(a=(15&h)<<12|(63&r)<<6|63&s)&&(a<55296||57343<a)&&(d=a);break;case 4:r=e[n+1],s=e[n+2],l=e[n+3],128==(192&r)&&128==(192&s)&&128==(192&l)&&65535<(a=(15&h)<<18|(63&r)<<12|(63&s)<<6|63&l)&&a<1114112&&(d=a)}null===d?(d=65533,c=1):65535<d&&(d-=65536,o.push(d>>>10&1023|55296),d=56320|1023&d),o.push(d),n+=c}return function(e){var t=e.length;if(t<=y)return String.fromCharCode.apply(String,e);for(var i="",o=0;o<t;)i+=String.fromCharCode.apply(String,e.slice(o,o+=y));return i}(o)}i.kMaxLength=r,(l.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()}catch(e){return!1}}())||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(l.prototype,"parent",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.buffer}}),Object.defineProperty(l.prototype,"offset",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&l[Symbol.species]===l&&Object.defineProperty(l,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),l.poolSize=8192,l.from=function(e,t,i){return a(e,t,i)},l.prototype.__proto__=Uint8Array.prototype,l.__proto__=Uint8Array,l.alloc=function(e,t,i){return n=t,r=i,h(o=e),o<=0?s(o):void 0!==n?"string"==typeof r?s(o).fill(n,r):s(o).fill(n):s(o);var o,n,r},l.allocUnsafe=function(e){return d(e)},l.allocUnsafeSlow=function(e){return d(e)},l.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==l.prototype},l.compare=function(e,t){if(E(e,Uint8Array)&&(e=l.from(e,e.offset,e.byteLength)),E(t,Uint8Array)&&(t=l.from(t,t.offset,t.byteLength)),!l.isBuffer(e)||!l.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var i=e.length,o=t.length,n=0,r=Math.min(i,o);n<r;++n)if(e[n]!==t[n]){i=e[n],o=t[n];break}return i<o?-1:o<i?1:0},l.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return l.alloc(0);var i;if(void 0===t)for(i=t=0;i<e.length;++i)t+=e[i].length;var o=l.allocUnsafe(t),n=0;for(i=0;i<e.length;++i){var r=e[i];if(E(r,Uint8Array)&&(r=l.from(r)),!l.isBuffer(r))throw new TypeError('"list" argument must be an Array of Buffers');r.copy(o,n),n+=r.length}return o},l.byteLength=p,l.prototype._isBuffer=!0,l.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)f(this,t,t+1);return this},l.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)f(this,t,t+3),f(this,t+1,t+2);return this},l.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)f(this,t,t+7),f(this,t+1,t+6),f(this,t+2,t+5),f(this,t+3,t+4);return this},l.prototype.toLocaleString=l.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?_(this,0,e):function(e,t,i){var n,r,s,l=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===i||i>this.length)&&(i=this.length),i<=0)return"";if((i>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return S(this,t,i);case"utf8":case"utf-8":return _(this,t,i);case"ascii":return w(this,t,i);case"latin1":case"binary":return x(this,t,i);case"base64":return n=this,s=i,0===(r=t)&&s===n.length?o.fromByteArray(n):o.fromByteArray(n.slice(r,s));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,t,i);default:if(l)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),l=!0}}.apply(this,arguments)},l.prototype.equals=function(e){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===l.compare(this,e)},l.prototype.inspect=function(){var e="",t=i.INSPECT_MAX_BYTES;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"},l.prototype.compare=function(e,t,i,o,n){if(E(e,Uint8Array)&&(e=l.from(e,e.offset,e.byteLength)),!l.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===i&&(i=e?e.length:0),void 0===o&&(o=0),void 0===n&&(n=this.length),t<0||i>e.length||o<0||n>this.length)throw new RangeError("out of range index");if(n<=o&&i<=t)return 0;if(n<=o)return-1;if(i<=t)return 1;if(this===e)return 0;for(var r=(n>>>=0)-(o>>>=0),s=(i>>>=0)-(t>>>=0),a=Math.min(r,s),h=this.slice(o,n),d=e.slice(t,i),c=0;c<a;++c)if(h[c]!==d[c]){r=h[c],s=d[c];break}return r<s?-1:s<r?1:0},l.prototype.includes=function(e,t,i){return-1!==this.indexOf(e,t,i)},l.prototype.indexOf=function(e,t,i){return m(this,e,t,i,!0)},l.prototype.lastIndexOf=function(e,t,i){return m(this,e,t,i,!1)},l.prototype.write=function(e,t,i,o){if(void 0===t)o="utf8",i=this.length,t=0;else if(void 0===i&&"string"==typeof t)o=t,i=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(i)?(i>>>=0,void 0===o&&(o="utf8")):(o=i,i=void 0)}var n=this.length-t;if((void 0===i||n<i)&&(i=n),0<e.length&&(i<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");o||(o="utf8");for(var r,s,l,a,h,d,c=!1;;)switch(o){case"hex":return v(this,e,t,i);case"utf8":case"utf-8":return h=t,d=i,j(M(e,this.length-h),this,h,d);case"ascii":case"latin1":case"binary":return b(this,e,t,i);case"base64":return l=t,a=i,j(O(e),this,l,a);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return r=t,s=i,j(function(e,t){for(var i,o,n,r=[],s=0;s<e.length&&!((t-=2)<0);++s)o=(i=e.charCodeAt(s))>>8,n=i%256,r.push(n),r.push(o);return r}(e,this.length-r),this,r,s);default:if(c)throw new TypeError("Unknown encoding: "+o);o=(""+o).toLowerCase(),c=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var y=4096;function w(e,t,i){var o="";i=Math.min(e.length,i);for(var n=t;n<i;++n)o+=String.fromCharCode(127&e[n]);return o}function x(e,t,i){var o="";i=Math.min(e.length,i);for(var n=t;n<i;++n)o+=String.fromCharCode(e[n]);return o}function S(e,t,i){var o,n=e.length;(!t||t<0)&&(t=0),(!i||i<0||n<i)&&(i=n);for(var r="",s=t;s<i;++s)r+=(o=e[s])<16?"0"+o.toString(16):o.toString(16);return r}function C(e,t,i){for(var o=e.slice(t,i),n="",r=0;r<o.length;r+=2)n+=String.fromCharCode(o[r]+256*o[r+1]);return n}function T(e,t,i){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(i<e+t)throw new RangeError("Trying to access beyond buffer length")}function k(e,t,i,o,n,r){if(!l.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(n<t||t<r)throw new RangeError('"value" argument is out of bounds');if(i+o>e.length)throw new RangeError("Index out of range")}function D(e,t,i,o,n,r){if(i+o>e.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("Index out of range")}function L(e,t,i,o,r){return t=+t,i>>>=0,r||D(e,0,i,4),n.write(e,t,i,o,23,4),i+4}function z(e,t,i,o,r){return t=+t,i>>>=0,r||D(e,0,i,8),n.write(e,t,i,o,52,8),i+8}l.prototype.slice=function(e,t){var i=this.length;(e=~~e)<0?(e+=i)<0&&(e=0):i<e&&(e=i),(t=void 0===t?i:~~t)<0?(t+=i)<0&&(t=0):i<t&&(t=i),t<e&&(t=e);var o=this.subarray(e,t);return o.__proto__=l.prototype,o},l.prototype.readUIntLE=function(e,t,i){e>>>=0,t>>>=0,i||T(e,t,this.length);for(var o=this[e],n=1,r=0;++r<t&&(n*=256);)o+=this[e+r]*n;return o},l.prototype.readUIntBE=function(e,t,i){e>>>=0,t>>>=0,i||T(e,t,this.length);for(var o=this[e+--t],n=1;0<t&&(n*=256);)o+=this[e+--t]*n;return o},l.prototype.readUInt8=function(e,t){return e>>>=0,t||T(e,1,this.length),this[e]},l.prototype.readUInt16LE=function(e,t){return e>>>=0,t||T(e,2,this.length),this[e]|this[e+1]<<8},l.prototype.readUInt16BE=function(e,t){return e>>>=0,t||T(e,2,this.length),this[e]<<8|this[e+1]},l.prototype.readUInt32LE=function(e,t){return e>>>=0,t||T(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},l.prototype.readUInt32BE=function(e,t){return e>>>=0,t||T(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},l.prototype.readIntLE=function(e,t,i){e>>>=0,t>>>=0,i||T(e,t,this.length);for(var o=this[e],n=1,r=0;++r<t&&(n*=256);)o+=this[e+r]*n;return(n*=128)<=o&&(o-=Math.pow(2,8*t)),o},l.prototype.readIntBE=function(e,t,i){e>>>=0,t>>>=0,i||T(e,t,this.length);for(var o=t,n=1,r=this[e+--o];0<o&&(n*=256);)r+=this[e+--o]*n;return(n*=128)<=r&&(r-=Math.pow(2,8*t)),r},l.prototype.readInt8=function(e,t){return e>>>=0,t||T(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},l.prototype.readInt16LE=function(e,t){e>>>=0,t||T(e,2,this.length);var i=this[e]|this[e+1]<<8;return 32768&i?4294901760|i:i},l.prototype.readInt16BE=function(e,t){e>>>=0,t||T(e,2,this.length);var i=this[e+1]|this[e]<<8;return 32768&i?4294901760|i:i},l.prototype.readInt32LE=function(e,t){return e>>>=0,t||T(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},l.prototype.readInt32BE=function(e,t){return e>>>=0,t||T(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},l.prototype.readFloatLE=function(e,t){return e>>>=0,t||T(e,4,this.length),n.read(this,e,!0,23,4)},l.prototype.readFloatBE=function(e,t){return e>>>=0,t||T(e,4,this.length),n.read(this,e,!1,23,4)},l.prototype.readDoubleLE=function(e,t){return e>>>=0,t||T(e,8,this.length),n.read(this,e,!0,52,8)},l.prototype.readDoubleBE=function(e,t){return e>>>=0,t||T(e,8,this.length),n.read(this,e,!1,52,8)},l.prototype.writeUIntLE=function(e,t,i,o){e=+e,t>>>=0,i>>>=0,o||k(this,e,t,i,Math.pow(2,8*i)-1,0);var n=1,r=0;for(this[t]=255&e;++r<i&&(n*=256);)this[t+r]=e/n&255;return t+i},l.prototype.writeUIntBE=function(e,t,i,o){e=+e,t>>>=0,i>>>=0,o||k(this,e,t,i,Math.pow(2,8*i)-1,0);var n=i-1,r=1;for(this[t+n]=255&e;0<=--n&&(r*=256);)this[t+n]=e/r&255;return t+i},l.prototype.writeUInt8=function(e,t,i){return e=+e,t>>>=0,i||k(this,e,t,1,255,0),this[t]=255&e,t+1},l.prototype.writeUInt16LE=function(e,t,i){return e=+e,t>>>=0,i||k(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},l.prototype.writeUInt16BE=function(e,t,i){return e=+e,t>>>=0,i||k(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},l.prototype.writeUInt32LE=function(e,t,i){return e=+e,t>>>=0,i||k(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},l.prototype.writeUInt32BE=function(e,t,i){return e=+e,t>>>=0,i||k(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},l.prototype.writeIntLE=function(e,t,i,o){if(e=+e,t>>>=0,!o){var n=Math.pow(2,8*i-1);k(this,e,t,i,n-1,-n)}var r=0,s=1,l=0;for(this[t]=255&e;++r<i&&(s*=256);)e<0&&0===l&&0!==this[t+r-1]&&(l=1),this[t+r]=(e/s|0)-l&255;return t+i},l.prototype.writeIntBE=function(e,t,i,o){if(e=+e,t>>>=0,!o){var n=Math.pow(2,8*i-1);k(this,e,t,i,n-1,-n)}var r=i-1,s=1,l=0;for(this[t+r]=255&e;0<=--r&&(s*=256);)e<0&&0===l&&0!==this[t+r+1]&&(l=1),this[t+r]=(e/s|0)-l&255;return t+i},l.prototype.writeInt8=function(e,t,i){return e=+e,t>>>=0,i||k(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},l.prototype.writeInt16LE=function(e,t,i){return e=+e,t>>>=0,i||k(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},l.prototype.writeInt16BE=function(e,t,i){return e=+e,t>>>=0,i||k(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},l.prototype.writeInt32LE=function(e,t,i){return e=+e,t>>>=0,i||k(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},l.prototype.writeInt32BE=function(e,t,i){return e=+e,t>>>=0,i||k(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},l.prototype.writeFloatLE=function(e,t,i){return L(this,e,t,!0,i)},l.prototype.writeFloatBE=function(e,t,i){return L(this,e,t,!1,i)},l.prototype.writeDoubleLE=function(e,t,i){return z(this,e,t,!0,i)},l.prototype.writeDoubleBE=function(e,t,i){return z(this,e,t,!1,i)},l.prototype.copy=function(e,t,i,o){if(!l.isBuffer(e))throw new TypeError("argument should be a Buffer");if(i||(i=0),o||0===o||(o=this.length),t>=e.length&&(t=e.length),t||(t=0),0<o&&o<i&&(o=i),o===i)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw new RangeError("Index out of range");if(o<0)throw new RangeError("sourceEnd out of bounds");o>this.length&&(o=this.length),e.length-t<o-i&&(o=e.length-t+i);var n=o-i;if(this===e&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(t,i,o);else if(this===e&&i<t&&t<o)for(var r=n-1;0<=r;--r)e[r+t]=this[r+i];else Uint8Array.prototype.set.call(e,this.subarray(i,o),t);return n},l.prototype.fill=function(e,t,i,o){if("string"==typeof e){if("string"==typeof t?(o=t,t=0,i=this.length):"string"==typeof i&&(o=i,i=this.length),void 0!==o&&"string"!=typeof o)throw new TypeError("encoding must be a string");if("string"==typeof o&&!l.isEncoding(o))throw new TypeError("Unknown encoding: "+o);if(1===e.length){var n=e.charCodeAt(0);("utf8"===o&&n<128||"latin1"===o)&&(e=n)}}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<i)throw new RangeError("Out of range index");if(i<=t)return this;var r;if(t>>>=0,i=void 0===i?this.length:i>>>0,e||(e=0),"number"==typeof e)for(r=t;r<i;++r)this[r]=e;else{var s=l.isBuffer(e)?e:l.from(e,o),a=s.length;if(0===a)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(r=0;r<i-t;++r)this[r+t]=s[r%a]}return this};var A=/[^+/0-9A-Za-z-_]/g;function M(e,t){var i;t=t||1/0;for(var o=e.length,n=null,r=[],s=0;s<o;++s){if(55295<(i=e.charCodeAt(s))&&i<57344){if(!n){if(56319<i){-1<(t-=3)&&r.push(239,191,189);continue}if(s+1===o){-1<(t-=3)&&r.push(239,191,189);continue}n=i;continue}if(i<56320){-1<(t-=3)&&r.push(239,191,189),n=i;continue}i=65536+(n-55296<<10|i-56320)}else n&&-1<(t-=3)&&r.push(239,191,189);if(n=null,i<128){if((t-=1)<0)break;r.push(i)}else if(i<2048){if((t-=2)<0)break;r.push(i>>6|192,63&i|128)}else if(i<65536){if((t-=3)<0)break;r.push(i>>12|224,i>>6&63|128,63&i|128)}else{if(!(i<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;r.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}}return r}function O(e){return o.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(A,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function j(e,t,i,o){for(var n=0;n<o&&!(n+i>=t.length||n>=e.length);++n)t[n+i]=e[n];return n}function E(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function N(e){return e!=e}},{"base64-js":1,ieee754:16}],4:[function(e,t,i){"use strict";var o=e("typo-js");function n(e){"function"==typeof(e=e||{}).codeMirrorInstance&&"function"==typeof e.codeMirrorInstance.defineMode?(String.prototype.includes||(String.prototype.includes=function(){return-1!==String.prototype.indexOf.apply(this,arguments)}),e.codeMirrorInstance.defineMode("spell-checker",function(t){if(!n.aff_loading){n.aff_loading=!0;var i=new XMLHttpRequest;i.open("GET","https://cdn.jsdelivr.net/codemirror.spell-checker/latest/en_US.aff",!0),i.onload=function(){4===i.readyState&&200===i.status&&(n.aff_data=i.responseText,2==++n.num_loaded&&(n.typo=new o("en_US",n.aff_data,n.dic_data,{platform:"any"})))},i.send(null)}if(!n.dic_loading){n.dic_loading=!0;var r=new XMLHttpRequest;r.open("GET","https://cdn.jsdelivr.net/codemirror.spell-checker/latest/en_US.dic",!0),r.onload=function(){4===r.readyState&&200===r.status&&(n.dic_data=r.responseText,2==++n.num_loaded&&(n.typo=new o("en_US",n.aff_data,n.dic_data,{platform:"any"})))},r.send(null)}var s='!"#$%&()*+,-./:;<=>?@[\\]^_`{|}~ ',l={token:function(e){var t=e.peek(),i="";if(s.includes(t))return e.next(),null;for(;null!=(t=e.peek())&&!s.includes(t);)i+=t,e.next();return n.typo&&!n.typo.check(i)?"spell-error":null}},a=e.codeMirrorInstance.getMode(t,t.backdrop||"text/plain");return e.codeMirrorInstance.overlayMode(a,l,!0)})):console.log("CodeMirror Spell Checker: You must provide an instance of CodeMirror via the option `codeMirrorInstance`")}n.num_loaded=0,n.aff_loading=!1,n.dic_loading=!1,n.aff_data="",n.dic_data="",t.exports=n},{"typo-js":18}],5:[function(e,t,i){!function(e){"use strict";e.defineOption("fullScreen",!1,function(t,i,o){var n,r;o==e.Init&&(o=!1),!o!=!i&&(i?(r=(n=t).getWrapperElement(),n.state.fullScreenRestore={scrollTop:window.pageYOffset,scrollLeft:window.pageXOffset,width:r.style.width,height:r.style.height},r.style.width="",r.style.height="auto",r.className+=" CodeMirror-fullscreen",document.documentElement.style.overflow="hidden",n.refresh()):function(e){var t=e.getWrapperElement();t.className=t.className.replace(/\s*CodeMirror-fullscreen\b/,""),document.documentElement.style.overflow="";var i=e.state.fullScreenRestore;t.style.width=i.width,t.style.height=i.height,window.scrollTo(i.scrollLeft,i.scrollTop),e.refresh()}(t))})}("object"==typeof i&&"object"==typeof t?e("../../lib/codemirror"):CodeMirror)},{"../../lib/codemirror":11}],6:[function(e,t,i){!function(e){function t(e){e.state.placeholder&&(e.state.placeholder.parentNode.removeChild(e.state.placeholder),e.state.placeholder=null)}function i(e){t(e);var i=e.state.placeholder=document.createElement("pre");i.style.cssText="height: 0; overflow: visible",i.style.direction=e.getOption("direction"),i.className="CodeMirror-placeholder";var o=e.getOption("placeholder");"string"==typeof o&&(o=document.createTextNode(o)),i.appendChild(o),e.display.lineSpace.insertBefore(i,e.display.lineSpace.firstChild)}function o(e){r(e)&&i(e)}function n(e){var o=e.getWrapperElement(),n=r(e);o.className=o.className.replace(" CodeMirror-empty","")+(n?" CodeMirror-empty":""),n?i(e):t(e)}function r(e){return 1===e.lineCount()&&""===e.getLine(0)}e.defineOption("placeholder","",function(i,r,s){var l=s&&s!=e.Init;if(r&&!l)i.on("blur",o),i.on("change",n),i.on("swapDoc",n),n(i);else if(!r&&l){i.off("blur",o),i.off("change",n),i.off("swapDoc",n),t(i);var a=i.getWrapperElement();a.className=a.className.replace(" CodeMirror-empty","")}r&&!i.hasFocus()&&o(i)})}("object"==typeof i&&"object"==typeof t?e("../../lib/codemirror"):CodeMirror)},{"../../lib/codemirror":11}],7:[function(e,t,i){!function(e){"use strict";var t=/^(\s*)(>[> ]*|[*+-] \[[x ]\]\s|[*+-]\s|(\d+)([.)]))(\s*)/,i=/^(\s*)(>[> ]*|[*+-] \[[x ]\]|[*+-]|(\d+)[.)])(\s*)$/,o=/[*+-]\s/;function n(e,i){var o=i.line,n=0,r=0,s=t.exec(e.getLine(o)),l=s[1];do{var a=o+(n+=1),h=e.getLine(a),d=t.exec(h);if(d){var c=d[1],u=parseInt(s[3],10)+n-r,p=parseInt(d[3],10),f=p;if(l!==c||isNaN(p)){if(l.length>c.length)return;if(l.length<c.length&&1===n)return;r+=1}else u===p&&(f=p+1),p<u&&(f=u+1),e.replaceRange(h.replace(t,c+f+d[4]+d[5]),{line:a,ch:0},{line:a,ch:h.length})}}while(d)}e.commands.newlineAndIndentContinueMarkdownList=function(r){if(r.getOption("disableInput"))return e.Pass;for(var s=r.listSelections(),l=[],a=0;a<s.length;a++){var h=s[a].head,d=r.getStateAfter(h.line),c=!1!==d.list,u=0!==d.quote,p=r.getLine(h.line),f=t.exec(p),m=/^\s*$/.test(p.slice(0,h.ch));if(!s[a].empty()||!c&&!u||!f||m)return void r.execCommand("newlineAndIndent");if(i.test(p))/>\s*$/.test(p)||r.replaceRange("",{line:h.line,ch:0},{line:h.line,ch:h.ch+1}),l[a]="\n";else{var g=f[1],v=f[5],b=!(o.test(f[2])||0<=f[2].indexOf(">")),_=b?parseInt(f[3],10)+1+f[4]:f[2].replace("x"," ");l[a]="\n"+g+_+v,b&&n(r,h)}}r.replaceSelections(l)}}("object"==typeof i&&"object"==typeof t?e("../../lib/codemirror"):CodeMirror)},{"../../lib/codemirror":11}],8:[function(e,t,i){!function(e){"use strict";e.overlayMode=function(t,i,o){return{startState:function(){return{base:e.startState(t),overlay:e.startState(i),basePos:0,baseCur:null,overlayPos:0,overlayCur:null,streamSeen:null}},copyState:function(o){return{base:e.copyState(t,o.base),overlay:e.copyState(i,o.overlay),basePos:o.basePos,baseCur:null,overlayPos:o.overlayPos,overlayCur:null}},token:function(e,n){return(e!=n.streamSeen||Math.min(n.basePos,n.overlayPos)<e.start)&&(n.streamSeen=e,n.basePos=n.overlayPos=e.start),e.start==n.basePos&&(n.baseCur=t.token(e,n.base),n.basePos=e.pos),e.start==n.overlayPos&&(e.pos=e.start,n.overlayCur=i.token(e,n.overlay),n.overlayPos=e.pos),e.pos=Math.min(n.basePos,n.overlayPos),null==n.overlayCur?n.baseCur:null!=n.baseCur&&n.overlay.combineTokens||o&&null==n.overlay.combineTokens?n.baseCur+" "+n.overlayCur:n.overlayCur},indent:t.indent&&function(e,i){return t.indent(e.base,i)},electricChars:t.electricChars,innerMode:function(e){return{state:e.base,mode:t}},blankLine:function(e){var n,r;return t.blankLine&&(n=t.blankLine(e.base)),i.blankLine&&(r=i.blankLine(e.overlay)),null==r?n:o&&null!=n?n+" "+r:r}}}}("object"==typeof i&&"object"==typeof t?e("../../lib/codemirror"):CodeMirror)},{"../../lib/codemirror":11}],9:[function(e,t,i){!function(e){"use strict";var t,i,o=e.Pos;function n(e,t){for(var i,o,n=null!=(o=(i=e).flags)?o:(i.ignoreCase?"i":"")+(i.global?"g":"")+(i.multiline?"m":""),r=n,s=0;s<t.length;s++)-1==r.indexOf(t.charAt(s))&&(r+=t.charAt(s));return n==r?e:new RegExp(e.source,r)}function r(e,t,i){t=n(t,"g");for(var r=i.line,s=i.ch,l=e.lastLine();r<=l;r++,s=0){t.lastIndex=s;var a=e.getLine(r),h=t.exec(a);if(h)return{from:o(r,h.index),to:o(r,h.index+h[0].length),match:h}}}function s(e,t){for(var i,o=0;;){t.lastIndex=o;var n=t.exec(e);if(!n)return i;if((o=(i=n).index+(i[0].length||1))==e.length)return i}}function l(e,t,i,o){if(e.length==t.length)return i;for(var n=0,r=i+Math.max(0,e.length-t.length);;){if(n==r)return n;var s=n+r>>1,l=o(e.slice(0,s)).length;if(l==i)return s;i<l?r=s:n=s+1}}function a(e,a,h,d){var c;this.atOccurrence=!1,this.doc=e,h=h?e.clipPos(h):o(0,0),this.pos={from:h,to:h},"object"==typeof d?c=d.caseFold:(c=d,d=null),"string"==typeof a?(null==c&&(c=!1),this.matches=function(n,r){return(n?function(e,n,r,s){if(!n.length)return null;var a=s?t:i,h=a(n).split(/\r|\n\r?/);e:for(var d=r.line,c=r.ch,u=e.firstLine()-1+h.length;u<=d;d--,c=-1){var p=e.getLine(d);-1<c&&(p=p.slice(0,c));var f=a(p);if(1==h.length){var m=f.lastIndexOf(h[0]);if(-1==m)continue e;return{from:o(d,l(p,f,m,a)),to:o(d,l(p,f,m+h[0].length,a))}}var g=h[h.length-1];if(f.slice(0,g.length)==g){var v=1;for(r=d-h.length+1;v<h.length-1;v++)if(a(e.getLine(r+v))!=h[v])continue e;var b=e.getLine(d+1-h.length),_=a(b);if(_.slice(_.length-h[0].length)==h[0])return{from:o(d+1-h.length,l(b,_,b.length-h[0].length,a)),to:o(d,l(p,f,g.length,a))}}}}:function(e,n,r,s){if(!n.length)return null;var a=s?t:i,h=a(n).split(/\r|\n\r?/);e:for(var d=r.line,c=r.ch,u=e.lastLine()+1-h.length;d<=u;d++,c=0){var p=e.getLine(d).slice(c),f=a(p);if(1==h.length){var m=f.indexOf(h[0]);if(-1==m)continue e;return r=l(p,f,m,a)+c,{from:o(d,l(p,f,m,a)+c),to:o(d,l(p,f,m+h[0].length,a)+c)}}var g=f.length-h[0].length;if(f.slice(g)==h[0]){for(var v=1;v<h.length-1;v++)if(a(e.getLine(d+v))!=h[v])continue e;var b=e.getLine(d+h.length-1),_=a(b),y=h[h.length-1];if(_.slice(0,y.length)==y)return{from:o(d,l(p,f,g,a)+c),to:o(d+h.length-1,l(b,_,y.length,a))}}}})(e,a,r,c)}):(a=n(a,"gm"),d&&!1===d.multiline?this.matches=function(t,i){return(t?function(e,t,i){t=n(t,"g");for(var r=i.line,l=i.ch,a=e.firstLine();a<=r;r--,l=-1){var h=e.getLine(r);-1<l&&(h=h.slice(0,l));var d=s(h,t);if(d)return{from:o(r,d.index),to:o(r,d.index+d[0].length),match:d}}}:r)(e,a,i)}:this.matches=function(t,i){return(t?function(e,t,i){t=n(t,"gm");for(var r,l=1,a=i.line,h=e.firstLine();h<=a;){for(var d=0;d<l;d++){var c=e.getLine(a--);r=null==r?c.slice(0,i.ch):c+"\n"+r}l*=2;var u=s(r,t);if(u){var p=r.slice(0,u.index).split("\n"),f=u[0].split("\n"),m=a+p.length,g=p[p.length-1].length;return{from:o(m,g),to:o(m+f.length-1,1==f.length?g+f[0].length:f[f.length-1].length),match:u}}}}:function(e,t,i){if(!/\\s|\\n|\n|\\W|\\D|\[\^/.test(t.source))return r(e,t,i);t=n(t,"gm");for(var s,l=1,a=i.line,h=e.lastLine();a<=h;){for(var d=0;d<l&&!(h<a);d++){var c=e.getLine(a++);s=null==s?c:s+"\n"+c}l*=2,t.lastIndex=i.ch;var u=t.exec(s);if(u){var p=s.slice(0,u.index).split("\n"),f=u[0].split("\n"),m=i.line+p.length-1,g=p[p.length-1].length;return{from:o(m,g),to:o(m+f.length-1,1==f.length?g+f[0].length:f[f.length-1].length),match:u}}}})(e,a,i)})}i=String.prototype.normalize?(t=function(e){return e.normalize("NFD").toLowerCase()},function(e){return e.normalize("NFD")}):(t=function(e){return e.toLowerCase()},function(e){return e}),a.prototype={findNext:function(){return this.find(!1)},findPrevious:function(){return this.find(!0)},find:function(t){for(var i=this.matches(t,this.doc.clipPos(t?this.pos.from:this.pos.to));i&&0==e.cmpPos(i.from,i.to);)t?i.from.ch?i.from=o(i.from.line,i.from.ch-1):i=i.from.line==this.doc.firstLine()?null:this.matches(t,this.doc.clipPos(o(i.from.line-1))):i.to.ch<this.doc.getLine(i.to.line).length?i.to=o(i.to.line,i.to.ch+1):i=i.to.line==this.doc.lastLine()?null:this.matches(t,o(i.to.line+1,0));if(i)return this.pos=i,this.atOccurrence=!0,this.pos.match||!0;var n=o(t?this.doc.firstLine():this.doc.lastLine()+1,0);return this.pos={from:n,to:n},this.atOccurrence=!1},from:function(){if(this.atOccurrence)return this.pos.from},to:function(){if(this.atOccurrence)return this.pos.to},replace:function(t,i){if(this.atOccurrence){var n=e.splitLines(t);this.doc.replaceRange(n,this.pos.from,this.pos.to,i),this.pos.to=o(this.pos.from.line+n.length-1,n[n.length-1].length+(1==n.length?this.pos.from.ch:0))}}},e.defineExtension("getSearchCursor",function(e,t,i){return new a(this.doc,e,t,i)}),e.defineDocExtension("getSearchCursor",function(e,t,i){return new a(this,e,t,i)}),e.defineExtension("selectMatches",function(t,i){for(var o=[],n=this.getSearchCursor(t,this.getCursor("from"),i);n.findNext()&&!(0<e.cmpPos(n.to(),this.getCursor("to")));)o.push({anchor:n.from(),head:n.to()});o.length&&this.setSelections(o,0)})}("object"==typeof i&&"object"==typeof t?e("../../lib/codemirror"):CodeMirror)},{"../../lib/codemirror":11}],10:[function(e,t,i){!function(e){"use strict";function t(e){e.state.markedSelection&&e.operation(function(){!function(e){if(!e.somethingSelected())return l(e);if(1<e.listSelections().length)return a(e);var t=e.getCursor("start"),i=e.getCursor("end"),n=e.state.markedSelection;if(!n.length)return s(e,t,i);var h=n[0].find(),d=n[n.length-1].find();if(!h||!d||i.line-t.line<=o||0<=r(t,d.to)||r(i,h.from)<=0)return a(e);for(;0<r(t,h.from);)n.shift().clear(),h=n[0].find();for(r(t,h.from)<0&&(h.to.line-t.line<o?(n.shift().clear(),s(e,t,h.to,0)):s(e,t,h.from,0));r(i,d.to)<0;)n.pop().clear(),d=n[n.length-1].find();0<r(i,d.to)&&(i.line-d.from.line<o?(n.pop().clear(),s(e,d.from,i)):s(e,d.to,i))}(e)})}function i(e){e.state.markedSelection&&e.state.markedSelection.length&&e.operation(function(){l(e)})}e.defineOption("styleSelectedText",!1,function(o,n,r){var s=r&&r!=e.Init;n&&!s?(o.state.markedSelection=[],o.state.markedSelectionStyle="string"==typeof n?n:"CodeMirror-selectedtext",a(o),o.on("cursorActivity",t),o.on("change",i)):!n&&s&&(o.off("cursorActivity",t),o.off("change",i),l(o),o.state.markedSelection=o.state.markedSelectionStyle=null)});var o=8,n=e.Pos,r=e.cmpPos;function s(e,t,i,s){if(0!=r(t,i))for(var l=e.state.markedSelection,a=e.state.markedSelectionStyle,h=t.line;;){var d=h==t.line?t:n(h,0),c=h+o,u=c>=i.line,p=u?i:n(c,0),f=e.markText(d,p,{className:a});if(null==s?l.push(f):l.splice(s++,0,f),u)break;h=c}}function l(e){for(var t=e.state.markedSelection,i=0;i<t.length;++i)t[i].clear();t.length=0}function a(e){l(e);for(var t=e.listSelections(),i=0;i<t.length;i++)s(e,t[i].from(),t[i].to())}}("object"==typeof i&&"object"==typeof t?e("../../lib/codemirror"):CodeMirror)},{"../../lib/codemirror":11}],11:[function(e,t,i){var o;o=function(){"use strict";var e=navigator.userAgent,t=navigator.platform,i=/gecko\/\d/i.test(e),o=/MSIE \d/.test(e),n=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(e),r=/Edge\/(\d+)/.exec(e),s=o||n||r,l=s&&(o?document.documentMode||6:+(r||n)[1]),a=!r&&/WebKit\//.test(e),h=a&&/Qt\/\d+\.\d+/.test(e),d=!r&&/Chrome\//.test(e),c=/Opera\//.test(e),u=/Apple Computer/.test(navigator.vendor),p=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(e),f=/PhantomJS/.test(e),m=!r&&/AppleWebKit/.test(e)&&/Mobile\/\w+/.test(e),g=/Android/.test(e),v=m||g||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(e),b=m||/Mac/.test(t),_=/\bCrOS\b/.test(e),y=/win/i.test(t),w=c&&e.match(/Version\/(\d*\.\d*)/);w&&(w=Number(w[1])),w&&15<=w&&(a=!(c=!1));var x=b&&(h||c&&(null==w||w<12.11)),S=i||s&&9<=l;function C(e){return new RegExp("(^|\\s)"+e+"(?:$|\\s)\\s*")}var T,k=function(e,t){var i=e.className,o=C(t).exec(i);if(o){var n=i.slice(o.index+o[0].length);e.className=i.slice(0,o.index)+(n?o[1]+n:"")}};function D(e){for(var t=e.childNodes.length;0<t;--t)e.removeChild(e.firstChild);return e}function L(e,t){return D(e).appendChild(t)}function z(e,t,i,o){var n=document.createElement(e);if(i&&(n.className=i),o&&(n.style.cssText=o),"string"==typeof t)n.appendChild(document.createTextNode(t));else if(t)for(var r=0;r<t.length;++r)n.appendChild(t[r]);return n}function A(e,t,i,o){var n=z(e,t,i,o);return n.setAttribute("role","presentation"),n}function M(e,t){if(3==t.nodeType&&(t=t.parentNode),e.contains)return e.contains(t);do{if(11==t.nodeType&&(t=t.host),t==e)return!0}while(t=t.parentNode)}function O(){var e;try{e=document.activeElement}catch(t){e=document.body||null}for(;e&&e.shadowRoot&&e.shadowRoot.activeElement;)e=e.shadowRoot.activeElement;return e}function j(e,t){var i=e.className;C(t).test(i)||(e.className+=(i?" ":"")+t)}function E(e,t){for(var i=e.split(" "),o=0;o<i.length;o++)i[o]&&!C(i[o]).test(t)&&(t+=" "+i[o]);return t}T=document.createRange?function(e,t,i,o){var n=document.createRange();return n.setEnd(o||e,i),n.setStart(e,t),n}:function(e,t,i){var o=document.body.createTextRange();try{o.moveToElementText(e.parentNode)}catch(e){return o}return o.collapse(!0),o.moveEnd("character",i),o.moveStart("character",t),o};var N=function(e){e.select()};function P(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t)}}function F(e,t,i){for(var o in t||(t={}),e)!e.hasOwnProperty(o)||!1===i&&t.hasOwnProperty(o)||(t[o]=e[o]);return t}function I(e,t,i,o,n){null==t&&-1==(t=e.search(/[^\s\u00a0]/))&&(t=e.length);for(var r=o||0,s=n||0;;){var l=e.indexOf("\t",r);if(l<0||t<=l)return s+(t-r);s+=l-r,s+=i-s%i,r=l+1}}m?N=function(e){e.selectionStart=0,e.selectionEnd=e.value.length}:s&&(N=function(e){try{e.select()}catch(e){}});var H=function(){this.id=null};function W(e,t){for(var i=0;i<e.length;++i)if(e[i]==t)return i;return-1}H.prototype.set=function(e,t){clearTimeout(this.id),this.id=setTimeout(t,e)};var R={toString:function(){return"CodeMirror.Pass"}},U={scroll:!1},B={origin:"*mouse"},$={origin:"+move"};function V(e,t,i){for(var o=0,n=0;;){var r=e.indexOf("\t",o);-1==r&&(r=e.length);var s=r-o;if(r==e.length||t<=n+s)return o+Math.min(s,t-n);if(n+=r-o,o=r+1,t<=(n+=i-n%i))return o}}var q=[""];function X(e){for(;q.length<=e;)q.push(Y(q)+" ");return q[e]}function Y(e){return e[e.length-1]}function G(e,t){for(var i=[],o=0;o<e.length;o++)i[o]=t(e[o],o);return i}function K(){}function Z(e,t){var i;return i=Object.create?Object.create(e):(K.prototype=e,new K),t&&F(t,i),i}var Q=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function J(e){return/\w/.test(e)||""<e&&(e.toUpperCase()!=e.toLowerCase()||Q.test(e))}function ee(e,t){return t?!!(-1<t.source.indexOf("\\w")&&J(e))||t.test(e):J(e)}function te(e){for(var t in e)if(e.hasOwnProperty(t)&&e[t])return!1;return!0}var ie=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function oe(e){return 768<=e.charCodeAt(0)&&ie.test(e)}function ne(e,t,i){for(;(i<0?0<t:t<e.length)&&oe(e.charAt(t));)t+=i;return t}function re(e,t,i){for(var o=i<t?-1:1;;){if(t==i)return t;var n=(t+i)/2,r=o<0?Math.ceil(n):Math.floor(n);if(r==t)return e(r)?t:i;e(r)?i=r:t=r+o}}function se(e,t){if((t-=e.first)<0||t>=e.size)throw new Error("There is no line "+(t+e.first)+" in the document.");for(var i=e;!i.lines;)for(var o=0;;++o){var n=i.children[o],r=n.chunkSize();if(t<r){i=n;break}t-=r}return i.lines[t]}function le(e,t,i){var o=[],n=t.line;return e.iter(t.line,i.line+1,function(e){var r=e.text;n==i.line&&(r=r.slice(0,i.ch)),n==t.line&&(r=r.slice(t.ch)),o.push(r),++n}),o}function ae(e,t,i){var o=[];return e.iter(t,i,function(e){o.push(e.text)}),o}function he(e,t){var i=t-e.height;if(i)for(var o=e;o;o=o.parent)o.height+=i}function de(e){if(null==e.parent)return null;for(var t=e.parent,i=W(t.lines,e),o=t.parent;o;o=(t=o).parent)for(var n=0;o.children[n]!=t;++n)i+=o.children[n].chunkSize();return i+t.first}function ce(e,t){var i=e.first;e:do{for(var o=0;o<e.children.length;++o){var n=e.children[o],r=n.height;if(t<r){e=n;continue e}t-=r,i+=n.chunkSize()}return i}while(!e.lines);for(var s=0;s<e.lines.length;++s){var l=e.lines[s].height;if(t<l)break;t-=l}return i+s}function ue(e,t){return t>=e.first&&t<e.first+e.size}function pe(e,t){return String(e.lineNumberFormatter(t+e.firstLineNumber))}function fe(e,t,i){if(void 0===i&&(i=null),!(this instanceof fe))return new fe(e,t,i);this.line=e,this.ch=t,this.sticky=i}function me(e,t){return e.line-t.line||e.ch-t.ch}function ge(e,t){return e.sticky==t.sticky&&0==me(e,t)}function ve(e){return fe(e.line,e.ch)}function be(e,t){return me(e,t)<0?t:e}function _e(e,t){return me(e,t)<0?e:t}function ye(e,t){return Math.max(e.first,Math.min(t,e.first+e.size-1))}function we(e,t){if(t.line<e.first)return fe(e.first,0);var i,o,n,r=e.first+e.size-1;return t.line>r?fe(r,se(e,r).text.length):(o=se(e,(i=t).line).text.length,null==(n=i.ch)||o<n?fe(i.line,o):n<0?fe(i.line,0):i)}function xe(e,t){for(var i=[],o=0;o<t.length;o++)i[o]=we(e,t[o]);return i}var Se=!1,Ce=!1;function Te(e,t,i){this.marker=e,this.from=t,this.to=i}function ke(e,t){if(e)for(var i=0;i<e.length;++i){var o=e[i];if(o.marker==t)return o}}function De(e,t){for(var i,o=0;o<e.length;++o)e[o]!=t&&(i||(i=[])).push(e[o]);return i}function Le(e,t){if(t.full)return null;var i=ue(e,t.from.line)&&se(e,t.from.line).markedSpans,o=ue(e,t.to.line)&&se(e,t.to.line).markedSpans;if(!i&&!o)return null;var n=t.from.ch,r=t.to.ch,s=0==me(t.from,t.to),l=function(e,t,i){var o;if(e)for(var n=0;n<e.length;++n){var r=e[n],s=r.marker;if(null==r.from||(s.inclusiveLeft?r.from<=t:r.from<t)||r.from==t&&"bookmark"==s.type&&(!i||!r.marker.insertLeft)){var l=null==r.to||(s.inclusiveRight?r.to>=t:r.to>t);(o||(o=[])).push(new Te(s,r.from,l?null:r.to))}}return o}(i,n,s),a=function(e,t,i){var o;if(e)for(var n=0;n<e.length;++n){var r=e[n],s=r.marker;if(null==r.to||(s.inclusiveRight?r.to>=t:r.to>t)||r.from==t&&"bookmark"==s.type&&(!i||r.marker.insertLeft)){var l=null==r.from||(s.inclusiveLeft?r.from<=t:r.from<t);(o||(o=[])).push(new Te(s,l?null:r.from-t,null==r.to?null:r.to-t))}}return o}(o,r,s),h=1==t.text.length,d=Y(t.text).length+(h?n:0);if(l)for(var c=0;c<l.length;++c){var u=l[c];if(null==u.to){var p=ke(a,u.marker);p?h&&(u.to=null==p.to?null:p.to+d):u.to=n}}if(a)for(var f=0;f<a.length;++f){var m=a[f];null!=m.to&&(m.to+=d),null==m.from?ke(l,m.marker)||(m.from=d,h&&(l||(l=[])).push(m)):(m.from+=d,h&&(l||(l=[])).push(m))}l&&(l=ze(l)),a&&a!=l&&(a=ze(a));var g=[l];if(!h){var v,b=t.text.length-2;if(0<b&&l)for(var _=0;_<l.length;++_)null==l[_].to&&(v||(v=[])).push(new Te(l[_].marker,null,null));for(var y=0;y<b;++y)g.push(v);g.push(a)}return g}function ze(e){for(var t=0;t<e.length;++t){var i=e[t];null!=i.from&&i.from==i.to&&!1!==i.marker.clearWhenEmpty&&e.splice(t--,1)}return e.length?e:null}function Ae(e){var t=e.markedSpans;if(t){for(var i=0;i<t.length;++i)t[i].marker.detachLine(e);e.markedSpans=null}}function Me(e,t){if(t){for(var i=0;i<t.length;++i)t[i].marker.attachLine(e);e.markedSpans=t}}function Oe(e){return e.inclusiveLeft?-1:0}function je(e){return e.inclusiveRight?1:0}function Ee(e,t){var i=e.lines.length-t.lines.length;if(0!=i)return i;var o=e.find(),n=t.find(),r=me(o.from,n.from)||Oe(e)-Oe(t);return r?-r:me(o.to,n.to)||je(e)-je(t)||t.id-e.id}function Ne(e,t){var i,o=Ce&&e.markedSpans;if(o)for(var n=void 0,r=0;r<o.length;++r)(n=o[r]).marker.collapsed&&null==(t?n.from:n.to)&&(!i||Ee(i,n.marker)<0)&&(i=n.marker);return i}function Pe(e){return Ne(e,!0)}function Fe(e){return Ne(e,!1)}function Ie(e,t){var i,o=Ce&&e.markedSpans;if(o)for(var n=0;n<o.length;++n){var r=o[n];r.marker.collapsed&&(null==r.from||r.from<t)&&(null==r.to||r.to>t)&&(!i||Ee(i,r.marker)<0)&&(i=r.marker)}return i}function He(e,t,i,o,n){var r=se(e,t),s=Ce&&r.markedSpans;if(s)for(var l=0;l<s.length;++l){var a=s[l];if(a.marker.collapsed){var h=a.marker.find(0),d=me(h.from,i)||Oe(a.marker)-Oe(n),c=me(h.to,o)||je(a.marker)-je(n);if(!(0<=d&&c<=0||d<=0&&0<=c)&&(d<=0&&(a.marker.inclusiveRight&&n.inclusiveLeft?0<=me(h.to,i):0<me(h.to,i))||0<=d&&(a.marker.inclusiveRight&&n.inclusiveLeft?me(h.from,o)<=0:me(h.from,o)<0)))return!0}}}function We(e){for(var t;t=Pe(e);)e=t.find(-1,!0).line;return e}function Re(e,t){var i=se(e,t),o=We(i);return i==o?t:de(o)}function Ue(e,t){if(t>e.lastLine())return t;var i,o=se(e,t);if(!Be(e,o))return t;for(;i=Fe(o);)o=i.find(1,!0).line;return de(o)+1}function Be(e,t){var i=Ce&&t.markedSpans;if(i)for(var o=void 0,n=0;n<i.length;++n)if((o=i[n]).marker.collapsed){if(null==o.from)return!0;if(!o.marker.widgetNode&&0==o.from&&o.marker.inclusiveLeft&&$e(e,t,o))return!0}}function $e(e,t,i){if(null==i.to){var o=i.marker.find(1,!0);return $e(e,o.line,ke(o.line.markedSpans,i.marker))}if(i.marker.inclusiveRight&&i.to==t.text.length)return!0;for(var n=void 0,r=0;r<t.markedSpans.length;++r)if((n=t.markedSpans[r]).marker.collapsed&&!n.marker.widgetNode&&n.from==i.to&&(null==n.to||n.to!=i.from)&&(n.marker.inclusiveLeft||i.marker.inclusiveRight)&&$e(e,t,n))return!0}function Ve(e){for(var t=0,i=(e=We(e)).parent,o=0;o<i.lines.length;++o){var n=i.lines[o];if(n==e)break;t+=n.height}for(var r=i.parent;r;r=(i=r).parent)for(var s=0;s<r.children.length;++s){var l=r.children[s];if(l==i)break;t+=l.height}return t}function qe(e){if(0==e.height)return 0;for(var t,i=e.text.length,o=e;t=Pe(o);){var n=t.find(0,!0);o=n.from.line,i+=n.from.ch-n.to.ch}for(o=e;t=Fe(o);){var r=t.find(0,!0);i-=o.text.length-r.from.ch,i+=(o=r.to.line).text.length-r.to.ch}return i}function Xe(e){var t=e.display,i=e.doc;t.maxLine=se(i,i.first),t.maxLineLength=qe(t.maxLine),t.maxLineChanged=!0,i.iter(function(e){var i=qe(e);i>t.maxLineLength&&(t.maxLineLength=i,t.maxLine=e)})}var Ye=null;function Ge(e,t,i){var o;Ye=null;for(var n=0;n<e.length;++n){var r=e[n];if(r.from<t&&r.to>t)return n;r.to==t&&(r.from!=r.to&&"before"==i?o=n:Ye=n),r.from==t&&(r.from!=r.to&&"before"!=i?o=n:Ye=n)}return null!=o?o:Ye}var Ke=function(){var e=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,t=/[stwN]/,i=/[LRr]/,o=/[Lb1n]/,n=/[1n]/;function r(e,t,i){this.level=e,this.from=t,this.to=i}return function(s,l){var a="ltr"==l?"L":"R";if(0==s.length||"ltr"==l&&!e.test(s))return!1;for(var h,d=s.length,c=[],u=0;u<d;++u)c.push((h=s.charCodeAt(u))<=247?"bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN".charAt(h):1424<=h&&h<=1524?"R":1536<=h&&h<=1785?"nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111".charAt(h-1536):1774<=h&&h<=2220?"r":8192<=h&&h<=8203?"w":8204==h?"b":"L");for(var p=0,f=a;p<d;++p){var m=c[p];"m"==m?c[p]=f:f=m}for(var g=0,v=a;g<d;++g){var b=c[g];"1"==b&&"r"==v?c[g]="n":i.test(b)&&"r"==(v=b)&&(c[g]="R")}for(var _=1,y=c[0];_<d-1;++_){var w=c[_];"+"==w&&"1"==y&&"1"==c[_+1]?c[_]="1":","!=w||y!=c[_+1]||"1"!=y&&"n"!=y||(c[_]=y),y=w}for(var x=0;x<d;++x){var S=c[x];if(","==S)c[x]="N";else if("%"==S){var C=void 0;for(C=x+1;C<d&&"%"==c[C];++C);for(var T=x&&"!"==c[x-1]||C<d&&"1"==c[C]?"1":"N",k=x;k<C;++k)c[k]=T;x=C-1}}for(var D=0,L=a;D<d;++D){var z=c[D];"L"==L&&"1"==z?c[D]="L":i.test(z)&&(L=z)}for(var A=0;A<d;++A)if(t.test(c[A])){var M=void 0;for(M=A+1;M<d&&t.test(c[M]);++M);for(var O="L"==(A?c[A-1]:a),j=O==("L"==(M<d?c[M]:a))?O?"L":"R":a,E=A;E<M;++E)c[E]=j;A=M-1}for(var N,P=[],F=0;F<d;)if(o.test(c[F])){var I=F;for(++F;F<d&&o.test(c[F]);++F);P.push(new r(0,I,F))}else{var H=F,W=P.length;for(++F;F<d&&"L"!=c[F];++F);for(var R=H;R<F;)if(n.test(c[R])){H<R&&P.splice(W,0,new r(1,H,R));var U=R;for(++R;R<F&&n.test(c[R]);++R);P.splice(W,0,new r(2,U,R)),H=R}else++R;H<F&&P.splice(W,0,new r(1,H,F))}return"ltr"==l&&(1==P[0].level&&(N=s.match(/^\s+/))&&(P[0].from=N[0].length,P.unshift(new r(0,0,N[0].length))),1==Y(P).level&&(N=s.match(/\s+$/))&&(Y(P).to-=N[0].length,P.push(new r(0,d-N[0].length,d)))),"rtl"==l?P.reverse():P}}();function Ze(e,t){var i=e.order;return null==i&&(i=e.order=Ke(e.text,t)),i}var Qe=[],Je=function(e,t,i){if(e.addEventListener)e.addEventListener(t,i,!1);else if(e.attachEvent)e.attachEvent("on"+t,i);else{var o=e._handlers||(e._handlers={});o[t]=(o[t]||Qe).concat(i)}};function et(e,t){return e._handlers&&e._handlers[t]||Qe}function tt(e,t,i){if(e.removeEventListener)e.removeEventListener(t,i,!1);else if(e.detachEvent)e.detachEvent("on"+t,i);else{var o=e._handlers,n=o&&o[t];if(n){var r=W(n,i);-1<r&&(o[t]=n.slice(0,r).concat(n.slice(r+1)))}}}function it(e,t){var i=et(e,t);if(i.length)for(var o=Array.prototype.slice.call(arguments,2),n=0;n<i.length;++n)i[n].apply(null,o)}function ot(e,t,i){return"string"==typeof t&&(t={type:t,preventDefault:function(){this.defaultPrevented=!0}}),it(e,i||t.type,e,t),ht(t)||t.codemirrorIgnore}function nt(e){var t=e._handlers&&e._handlers.cursorActivity;if(t)for(var i=e.curOp.cursorActivityHandlers||(e.curOp.cursorActivityHandlers=[]),o=0;o<t.length;++o)-1==W(i,t[o])&&i.push(t[o])}function rt(e,t){return 0<et(e,t).length}function st(e){e.prototype.on=function(e,t){Je(this,e,t)},e.prototype.off=function(e,t){tt(this,e,t)}}function lt(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function at(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}function ht(e){return null!=e.defaultPrevented?e.defaultPrevented:0==e.returnValue}function dt(e){lt(e),at(e)}function ct(e){return e.target||e.srcElement}function ut(e){var t=e.which;return null==t&&(1&e.button?t=1:2&e.button?t=3:4&e.button&&(t=2)),b&&e.ctrlKey&&1==t&&(t=3),t}var pt,ft,mt=function(){if(s&&l<9)return!1;var e=z("div");return"draggable"in e||"dragDrop"in e}();function gt(e){if(null==pt){var t=z("span","");L(e,z("span",[t,document.createTextNode("x")])),0!=e.firstChild.offsetHeight&&(pt=t.offsetWidth<=1&&2<t.offsetHeight&&!(s&&l<8))}var i=pt?z("span",""):z("span"," ",null,"display: inline-block; width: 1px; margin-right: -1px");return i.setAttribute("cm-text",""),i}function vt(e){if(null!=ft)return ft;var t=L(e,document.createTextNode("AA")),i=T(t,0,1).getBoundingClientRect(),o=T(t,1,2).getBoundingClientRect();return D(e),!(!i||i.left==i.right)&&(ft=o.right-i.right<3)}var bt,_t=3!="\n\nb".split(/\n/).length?function(e){for(var t=0,i=[],o=e.length;t<=o;){var n=e.indexOf("\n",t);-1==n&&(n=e.length);var r=e.slice(t,"\r"==e.charAt(n-1)?n-1:n),s=r.indexOf("\r");-1!=s?(i.push(r.slice(0,s)),t+=s+1):(i.push(r),t=n+1)}return i}:function(e){return e.split(/\r\n?|\n/)},yt=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch(e){return!1}}:function(e){var t;try{t=e.ownerDocument.selection.createRange()}catch(e){}return!(!t||t.parentElement()!=e)&&0!=t.compareEndPoints("StartToEnd",t)},wt="oncopy"in(bt=z("div"))||(bt.setAttribute("oncopy","return;"),"function"==typeof bt.oncopy),xt=null,St={},Ct={};function Tt(e){if("string"==typeof e&&Ct.hasOwnProperty(e))e=Ct[e];else if(e&&"string"==typeof e.name&&Ct.hasOwnProperty(e.name)){var t=Ct[e.name];"string"==typeof t&&(t={name:t}),(e=Z(t,e)).name=t.name}else{if("string"==typeof e&&/^[\w\-]+\/[\w\-]+\+xml$/.test(e))return Tt("application/xml");if("string"==typeof e&&/^[\w\-]+\/[\w\-]+\+json$/.test(e))return Tt("application/json")}return"string"==typeof e?{name:e}:e||{name:"null"}}function kt(e,t){t=Tt(t);var i=St[t.name];if(!i)return kt(e,"text/plain");var o=i(e,t);if(Dt.hasOwnProperty(t.name)){var n=Dt[t.name];for(var r in n)n.hasOwnProperty(r)&&(o.hasOwnProperty(r)&&(o["_"+r]=o[r]),o[r]=n[r])}if(o.name=t.name,t.helperType&&(o.helperType=t.helperType),t.modeProps)for(var s in t.modeProps)o[s]=t.modeProps[s];return o}var Dt={};function Lt(e,t){if(!0===t)return t;if(e.copyState)return e.copyState(t);var i={};for(var o in t){var n=t[o];n instanceof Array&&(n=n.concat([])),i[o]=n}return i}function zt(e,t){for(var i;e.innerMode&&(i=e.innerMode(t))&&i.mode!=e;)t=i.state,e=i.mode;return i||{mode:e,state:t}}function At(e,t,i){return!e.startState||e.startState(t,i)}var Mt=function(e,t,i){this.pos=this.start=0,this.string=e,this.tabSize=t||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=i};Mt.prototype.eol=function(){return this.pos>=this.string.length},Mt.prototype.sol=function(){return this.pos==this.lineStart},Mt.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},Mt.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},Mt.prototype.eat=function(e){var t=this.string.charAt(this.pos);if("string"==typeof e?t==e:t&&(e.test?e.test(t):e(t)))return++this.pos,t},Mt.prototype.eatWhile=function(e){for(var t=this.pos;this.eat(e););return this.pos>t},Mt.prototype.eatSpace=function(){for(var e=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e},Mt.prototype.skipToEnd=function(){this.pos=this.string.length},Mt.prototype.skipTo=function(e){var t=this.string.indexOf(e,this.pos);if(-1<t)return this.pos=t,!0},Mt.prototype.backUp=function(e){this.pos-=e},Mt.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=I(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?I(this.string,this.lineStart,this.tabSize):0)},Mt.prototype.indentation=function(){return I(this.string,null,this.tabSize)-(this.lineStart?I(this.string,this.lineStart,this.tabSize):0)},Mt.prototype.match=function(e,t,i){if("string"!=typeof e){var o=this.string.slice(this.pos).match(e);return o&&0<o.index?null:(o&&!1!==t&&(this.pos+=o[0].length),o)}var n=function(e){return i?e.toLowerCase():e};if(n(this.string.substr(this.pos,e.length))==n(e))return!1!==t&&(this.pos+=e.length),!0},Mt.prototype.current=function(){return this.string.slice(this.start,this.pos)},Mt.prototype.hideFirstChars=function(e,t){this.lineStart+=e;try{return t()}finally{this.lineStart-=e}},Mt.prototype.lookAhead=function(e){var t=this.lineOracle;return t&&t.lookAhead(e)},Mt.prototype.baseToken=function(){var e=this.lineOracle;return e&&e.baseToken(this.pos)};var Ot=function(e,t){this.state=e,this.lookAhead=t},jt=function(e,t,i,o){this.state=t,this.doc=e,this.line=i,this.maxLookAhead=o||0,this.baseTokens=null,this.baseTokenPos=1};function Et(e,t,i,o){var n=[e.state.modeGen],r={};Bt(e,t.text,e.doc.mode,i,function(e,t){return n.push(e,t)},r,o);for(var s=i.state,l=function(o){i.baseTokens=n;var l=e.state.overlays[o],a=1,h=0;i.state=!0,Bt(e,t.text,l.mode,i,function(e,t){for(var i=a;h<e;){var o=n[a];e<o&&n.splice(a,1,e,n[a+1],o),a+=2,h=Math.min(e,o)}if(t)if(l.opaque)n.splice(i,a-i,e,"overlay "+t),a=i+2;else for(;i<a;i+=2){var r=n[i+1];n[i+1]=(r?r+" ":"")+"overlay "+t}},r),i.state=s,i.baseTokens=null,i.baseTokenPos=1},a=0;a<e.state.overlays.length;++a)l(a);return{styles:n,classes:r.bgClass||r.textClass?r:null}}function Nt(e,t,i){if(!t.styles||t.styles[0]!=e.state.modeGen){var o=Pt(e,de(t)),n=t.text.length>e.options.maxHighlightLength&&Lt(e.doc.mode,o.state),r=Et(e,t,o);n&&(o.state=n),t.stateAfter=o.save(!n),t.styles=r.styles,r.classes?t.styleClasses=r.classes:t.styleClasses&&(t.styleClasses=null),i===e.doc.highlightFrontier&&(e.doc.modeFrontier=Math.max(e.doc.modeFrontier,++e.doc.highlightFrontier))}return t.styles}function Pt(e,t,i){var o=e.doc,n=e.display;if(!o.mode.startState)return new jt(o,!0,t);var r=function(e,t,i){for(var o,n,r=e.doc,s=i?-1:t-(e.doc.mode.innerMode?1e3:100),l=t;s<l;--l){if(l<=r.first)return r.first;var a=se(r,l-1),h=a.stateAfter;if(h&&(!i||l+(h instanceof Ot?h.lookAhead:0)<=r.modeFrontier))return l;var d=I(a.text,null,e.options.tabSize);(null==n||d<o)&&(n=l-1,o=d)}return n}(e,t,i),s=r>o.first&&se(o,r-1).stateAfter,l=s?jt.fromSaved(o,s,r):new jt(o,At(o.mode),r);return o.iter(r,t,function(i){Ft(e,i.text,l);var o=l.line;i.stateAfter=o==t-1||o%5==0||o>=n.viewFrom&&o<n.viewTo?l.save():null,l.nextLine()}),i&&(o.modeFrontier=l.line),l}function Ft(e,t,i,o){var n=e.doc.mode,r=new Mt(t,e.options.tabSize,i);for(r.start=r.pos=o||0,""==t&&It(n,i.state);!r.eol();)Ht(n,r,i.state),r.start=r.pos}function It(e,t){if(e.blankLine)return e.blankLine(t);if(e.innerMode){var i=zt(e,t);return i.mode.blankLine?i.mode.blankLine(i.state):void 0}}function Ht(e,t,i,o){for(var n=0;n<10;n++){o&&(o[0]=zt(e,i).mode);var r=e.token(t,i);if(t.pos>t.start)return r}throw new Error("Mode "+e.name+" failed to advance stream.")}jt.prototype.lookAhead=function(e){var t=this.doc.getLine(this.line+e);return null!=t&&e>this.maxLookAhead&&(this.maxLookAhead=e),t},jt.prototype.baseToken=function(e){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=e;)this.baseTokenPos+=2;var t=this.baseTokens[this.baseTokenPos+1];return{type:t&&t.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-e}},jt.prototype.nextLine=function(){this.line++,0<this.maxLookAhead&&this.maxLookAhead--},jt.fromSaved=function(e,t,i){return t instanceof Ot?new jt(e,Lt(e.mode,t.state),i,t.lookAhead):new jt(e,Lt(e.mode,t),i)},jt.prototype.save=function(e){var t=!1!==e?Lt(this.doc.mode,this.state):this.state;return 0<this.maxLookAhead?new Ot(t,this.maxLookAhead):t};var Wt=function(e,t,i){this.start=e.start,this.end=e.pos,this.string=e.current(),this.type=t||null,this.state=i};function Rt(e,t,i,o){var n,r,s=e.doc,l=s.mode,a=se(s,(t=we(s,t)).line),h=Pt(e,t.line,i),d=new Mt(a.text,e.options.tabSize,h);for(o&&(r=[]);(o||d.pos<t.ch)&&!d.eol();)d.start=d.pos,n=Ht(l,d,h.state),o&&r.push(new Wt(d,n,Lt(s.mode,h.state)));return o?r:new Wt(d,n,h.state)}function Ut(e,t){if(e)for(;;){var i=e.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!i)break;e=e.slice(0,i.index)+e.slice(i.index+i[0].length);var o=i[1]?"bgClass":"textClass";null==t[o]?t[o]=i[2]:new RegExp("(?:^|s)"+i[2]+"(?:$|s)").test(t[o])||(t[o]+=" "+i[2])}return e}function Bt(e,t,i,o,n,r,s){var l=i.flattenSpans;null==l&&(l=e.options.flattenSpans);var a,h=0,d=null,c=new Mt(t,e.options.tabSize,o),u=e.options.addModeClass&&[null];for(""==t&&Ut(It(i,o.state),r);!c.eol();){if(a=c.pos>e.options.maxHighlightLength?(l=!1,s&&Ft(e,t,o,c.pos),c.pos=t.length,null):Ut(Ht(i,c,o.state,u),r),u){var p=u[0].name;p&&(a="m-"+(a?p+" "+a:p))}if(!l||d!=a){for(;h<c.start;)n(h=Math.min(c.start,h+5e3),d);d=a}c.start=c.pos}for(;h<c.pos;){var f=Math.min(c.pos,h+5e3);n(f,d),h=f}}var $t=function(e,t,i){this.text=e,Me(this,t),this.height=i?i(this):1};$t.prototype.lineNo=function(){return de(this)},st($t);var Vt={},qt={};function Xt(e,t){if(!e||/^\s*$/.test(e))return null;var i=t.addModeClass?qt:Vt;return i[e]||(i[e]=e.replace(/\S+/g,"cm-$&"))}function Yt(e,t){var i=A("span",null,null,a?"padding-right: .1px":null),o={pre:A("pre",[i],"CodeMirror-line"),content:i,col:0,pos:0,cm:e,trailingSpace:!1,splitSpaces:e.getOption("lineWrapping")};t.measure={};for(var n=0;n<=(t.rest?t.rest.length:0);n++){var r=n?t.rest[n-1]:t.line,s=void 0;o.pos=0,o.addToken=Kt,vt(e.display.measure)&&(s=Ze(r,e.doc.direction))&&(o.addToken=Zt(o.addToken,s)),o.map=[],Jt(r,o,Nt(e,r,t!=e.display.externalMeasured&&de(r))),r.styleClasses&&(r.styleClasses.bgClass&&(o.bgClass=E(r.styleClasses.bgClass,o.bgClass||"")),r.styleClasses.textClass&&(o.textClass=E(r.styleClasses.textClass,o.textClass||""))),0==o.map.length&&o.map.push(0,0,o.content.appendChild(gt(e.display.measure))),0==n?(t.measure.map=o.map,t.measure.cache={}):((t.measure.maps||(t.measure.maps=[])).push(o.map),(t.measure.caches||(t.measure.caches=[])).push({}))}if(a){var l=o.content.lastChild;(/\bcm-tab\b/.test(l.className)||l.querySelector&&l.querySelector(".cm-tab"))&&(o.content.className="cm-tab-wrap-hack")}return it(e,"renderLine",e,t.line,o.pre),o.pre.className&&(o.textClass=E(o.pre.className,o.textClass||"")),o}function Gt(e){var t=z("span","","cm-invalidchar");return t.title="\\u"+e.charCodeAt(0).toString(16),t.setAttribute("aria-label",t.title),t}function Kt(e,t,i,o,n,r,a){if(t){var h,d=e.splitSpaces?function(e,t){if(1<e.length&&!/  /.test(e))return e;for(var i=t,o="",n=0;n<e.length;n++){var r=e.charAt(n);" "!=r||!i||n!=e.length-1&&32!=e.charCodeAt(n+1)||(r=" "),o+=r,i=" "==r}return o}(t,e.trailingSpace):t,c=e.cm.state.specialChars,u=!1;if(c.test(t)){h=document.createDocumentFragment();for(var p=0;;){c.lastIndex=p;var f=c.exec(t),m=f?f.index-p:t.length-p;if(m){var g=document.createTextNode(d.slice(p,p+m));s&&l<9?h.appendChild(z("span",[g])):h.appendChild(g),e.map.push(e.pos,e.pos+m,g),e.col+=m,e.pos+=m}if(!f)break;p+=m+1;var v=void 0;if("\t"==f[0]){var b=e.cm.options.tabSize,_=b-e.col%b;(v=h.appendChild(z("span",X(_),"cm-tab"))).setAttribute("role","presentation"),v.setAttribute("cm-text","\t"),e.col+=_}else"\r"==f[0]||"\n"==f[0]?(v=h.appendChild(z("span","\r"==f[0]?"":"","cm-invalidchar"))).setAttribute("cm-text",f[0]):((v=e.cm.options.specialCharPlaceholder(f[0])).setAttribute("cm-text",f[0]),s&&l<9?h.appendChild(z("span",[v])):h.appendChild(v)),e.col+=1;e.map.push(e.pos,e.pos+1,v),e.pos++}}else e.col+=t.length,h=document.createTextNode(d),e.map.push(e.pos,e.pos+t.length,h),s&&l<9&&(u=!0),e.pos+=t.length;if(e.trailingSpace=32==d.charCodeAt(t.length-1),i||o||n||u||a){var y=i||"";o&&(y+=o),n&&(y+=n);var w=z("span",[h],y,a);return r&&(w.title=r),e.content.appendChild(w)}e.content.appendChild(h)}}function Zt(e,t){return function(i,o,n,r,s,l,a){n=n?n+" cm-force-border":"cm-force-border";for(var h=i.pos,d=h+o.length;;){for(var c=void 0,u=0;u<t.length&&!((c=t[u]).to>h&&c.from<=h);u++);if(c.to>=d)return e(i,o,n,r,s,l,a);e(i,o.slice(0,c.to-h),n,r,null,l,a),r=null,o=o.slice(c.to-h),h=c.to}}}function Qt(e,t,i,o){var n=!o&&i.widgetNode;n&&e.map.push(e.pos,e.pos+t,n),!o&&e.cm.display.input.needsContentAttribute&&(n||(n=e.content.appendChild(document.createElement("span"))),n.setAttribute("cm-marker",i.id)),n&&(e.cm.display.input.setUneditable(n),e.content.appendChild(n)),e.pos+=t,e.trailingSpace=!1}function Jt(e,t,i){var o=e.markedSpans,n=e.text,r=0;if(o)for(var s,l,a,h,d,c,u,p=n.length,f=0,m=1,g="",v=0;;){if(v==f){a=h=d=c=l="",u=null,v=1/0;for(var b=[],_=void 0,y=0;y<o.length;++y){var w=o[y],x=w.marker;"bookmark"==x.type&&w.from==f&&x.widgetNode?b.push(x):w.from<=f&&(null==w.to||w.to>f||x.collapsed&&w.to==f&&w.from==f)?(null!=w.to&&w.to!=f&&v>w.to&&(v=w.to,h=""),x.className&&(a+=" "+x.className),x.css&&(l=(l?l+";":"")+x.css),x.startStyle&&w.from==f&&(d+=" "+x.startStyle),x.endStyle&&w.to==v&&(_||(_=[])).push(x.endStyle,w.to),x.title&&!c&&(c=x.title),x.collapsed&&(!u||Ee(u.marker,x)<0)&&(u=w)):w.from>f&&v>w.from&&(v=w.from)}if(_)for(var S=0;S<_.length;S+=2)_[S+1]==v&&(h+=" "+_[S]);if(!u||u.from==f)for(var C=0;C<b.length;++C)Qt(t,0,b[C]);if(u&&(u.from||0)==f){if(Qt(t,(null==u.to?p+1:u.to)-f,u.marker,null==u.from),null==u.to)return;u.to==f&&(u=!1)}}if(p<=f)break;for(var T=Math.min(p,v);;){if(g){var k=f+g.length;if(!u){var D=T<k?g.slice(0,T-f):g;t.addToken(t,D,s?s+a:a,d,f+D.length==v?h:"",c,l)}if(T<=k){g=g.slice(T-f),f=T;break}f=k,d=""}g=n.slice(r,r=i[m++]),s=Xt(i[m++],t.cm.options)}}else for(var L=1;L<i.length;L+=2)t.addToken(t,n.slice(r,r=i[L]),Xt(i[L+1],t.cm.options))}function ei(e,t,i){this.line=t,this.rest=function(e){for(var t,i;t=Fe(e);)e=t.find(1,!0).line,(i||(i=[])).push(e);return i}(t),this.size=this.rest?de(Y(this.rest))-i+1:1,this.node=this.text=null,this.hidden=Be(e,t)}function ti(e,t,i){for(var o,n=[],r=t;r<i;r=o){var s=new ei(e.doc,se(e.doc,r),r);o=r+s.size,n.push(s)}return n}var ii=null,oi=null;function ni(e,t){var i=et(e,t);if(i.length){var o,n=Array.prototype.slice.call(arguments,2);ii?o=ii.delayedCallbacks:oi?o=oi:(o=oi=[],setTimeout(ri,0));for(var r=function(e){o.push(function(){return i[e].apply(null,n)})},s=0;s<i.length;++s)r(s)}}function ri(){var e=oi;oi=null;for(var t=0;t<e.length;++t)e[t]()}function si(e,t,i,o){for(var n=0;n<t.changes.length;n++){var r=t.changes[n];"text"==r?(s=e,a=(l=t).text.className,h=ai(s,l),l.text==l.node&&(l.node=h.pre),l.text.parentNode.replaceChild(h.pre,l.text),l.text=h.pre,h.bgClass!=l.bgClass||h.textClass!=l.textClass?(l.bgClass=h.bgClass,l.textClass=h.textClass,hi(s,l)):a&&(l.text.className=a)):"gutter"==r?di(e,t,i,o):"class"==r?hi(e,t):"widget"==r&&ci(e,t,o)}var s,l,a,h;t.changes=null}function li(e){return e.node==e.text&&(e.node=z("div",null,null,"position: relative"),e.text.parentNode&&e.text.parentNode.replaceChild(e.node,e.text),e.node.appendChild(e.text),s&&l<8&&(e.node.style.zIndex=2)),e.node}function ai(e,t){var i=e.display.externalMeasured;return i&&i.line==t.line?(e.display.externalMeasured=null,t.measure=i.measure,i.built):Yt(e,t)}function hi(e,t){!function(e,t){var i=t.bgClass?t.bgClass+" "+(t.line.bgClass||""):t.line.bgClass;if(i&&(i+=" CodeMirror-linebackground"),t.background)i?t.background.className=i:(t.background.parentNode.removeChild(t.background),t.background=null);else if(i){var o=li(t);t.background=o.insertBefore(z("div",null,i),o.firstChild),e.display.input.setUneditable(t.background)}}(e,t),t.line.wrapClass?li(t).className=t.line.wrapClass:t.node!=t.text&&(t.node.className="");var i=t.textClass?t.textClass+" "+(t.line.textClass||""):t.line.textClass;t.text.className=i||""}function di(e,t,i,o){if(t.gutter&&(t.node.removeChild(t.gutter),t.gutter=null),t.gutterBackground&&(t.node.removeChild(t.gutterBackground),t.gutterBackground=null),t.line.gutterClass){var n=li(t);t.gutterBackground=z("div",null,"CodeMirror-gutter-background "+t.line.gutterClass,"left: "+(e.options.fixedGutter?o.fixedPos:-o.gutterTotalWidth)+"px; width: "+o.gutterTotalWidth+"px"),e.display.input.setUneditable(t.gutterBackground),n.insertBefore(t.gutterBackground,t.text)}var r=t.line.gutterMarkers;if(e.options.lineNumbers||r){var s=li(t),l=t.gutter=z("div",null,"CodeMirror-gutter-wrapper","left: "+(e.options.fixedGutter?o.fixedPos:-o.gutterTotalWidth)+"px");if(e.display.input.setUneditable(l),s.insertBefore(l,t.text),t.line.gutterClass&&(l.className+=" "+t.line.gutterClass),!e.options.lineNumbers||r&&r["CodeMirror-linenumbers"]||(t.lineNumber=l.appendChild(z("div",pe(e.options,i),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+o.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+e.display.lineNumInnerWidth+"px"))),r)for(var a=0;a<e.options.gutters.length;++a){var h=e.options.gutters[a],d=r.hasOwnProperty(h)&&r[h];d&&l.appendChild(z("div",[d],"CodeMirror-gutter-elt","left: "+o.gutterLeft[h]+"px; width: "+o.gutterWidth[h]+"px"))}}}function ci(e,t,i){t.alignable&&(t.alignable=null);for(var o=t.node.firstChild,n=void 0;o;o=n)n=o.nextSibling,"CodeMirror-linewidget"==o.className&&t.node.removeChild(o);ui(e,t,i)}function ui(e,t,i){if(pi(e,t.line,t,i,!0),t.rest)for(var o=0;o<t.rest.length;o++)pi(e,t.rest[o],t,i,!1)}function pi(e,t,i,o,n){if(t.widgets)for(var r=li(i),s=0,l=t.widgets;s<l.length;++s){var a=l[s],h=z("div",[a.node],"CodeMirror-linewidget");a.handleMouseEvents||h.setAttribute("cm-ignore-events","true"),fi(a,h,i,o),e.display.input.setUneditable(h),n&&a.above?r.insertBefore(h,i.gutter||i.text):r.appendChild(h),ni(a,"redraw")}}function fi(e,t,i,o){if(e.noHScroll){(i.alignable||(i.alignable=[])).push(t);var n=o.wrapperWidth;t.style.left=o.fixedPos+"px",e.coverGutter||(n-=o.gutterTotalWidth,t.style.paddingLeft=o.gutterTotalWidth+"px"),t.style.width=n+"px"}e.coverGutter&&(t.style.zIndex=5,t.style.position="relative",e.noHScroll||(t.style.marginLeft=-o.gutterTotalWidth+"px"))}function mi(e){if(null!=e.height)return e.height;var t=e.doc.cm;if(!t)return 0;if(!M(document.body,e.node)){var i="position: relative;";e.coverGutter&&(i+="margin-left: -"+t.display.gutters.offsetWidth+"px;"),e.noHScroll&&(i+="width: "+t.display.wrapper.clientWidth+"px;"),L(t.display.measure,z("div",[e.node],null,i))}return e.height=e.node.parentNode.offsetHeight}function gi(e,t){for(var i=ct(t);i!=e.wrapper;i=i.parentNode)if(!i||1==i.nodeType&&"true"==i.getAttribute("cm-ignore-events")||i.parentNode==e.sizer&&i!=e.mover)return!0}function vi(e){return e.lineSpace.offsetTop}function bi(e){return e.mover.offsetHeight-e.lineSpace.offsetHeight}function _i(e){if(e.cachedPaddingH)return e.cachedPaddingH;var t=L(e.measure,z("pre","x")),i=window.getComputedStyle?window.getComputedStyle(t):t.currentStyle,o={left:parseInt(i.paddingLeft),right:parseInt(i.paddingRight)};return isNaN(o.left)||isNaN(o.right)||(e.cachedPaddingH=o),o}function yi(e){return 30-e.display.nativeBarWidth}function wi(e){return e.display.scroller.clientWidth-yi(e)-e.display.barWidth}function xi(e){return e.display.scroller.clientHeight-yi(e)-e.display.barHeight}function Si(e,t,i){if(e.line==t)return{map:e.measure.map,cache:e.measure.cache};for(var o=0;o<e.rest.length;o++)if(e.rest[o]==t)return{map:e.measure.maps[o],cache:e.measure.caches[o]};for(var n=0;n<e.rest.length;n++)if(de(e.rest[n])>i)return{map:e.measure.maps[n],cache:e.measure.caches[n],before:!0}}function Ci(e,t,i,o){return Di(e,ki(e,t),i,o)}function Ti(e,t){if(t>=e.display.viewFrom&&t<e.display.viewTo)return e.display.view[io(e,t)];var i=e.display.externalMeasured;return i&&t>=i.lineN&&t<i.lineN+i.size?i:void 0}function ki(e,t){var i=de(t),o=Ti(e,i);o&&!o.text?o=null:o&&o.changes&&(si(e,o,i,Zi(e)),e.curOp.forceUpdate=!0),o||(o=function(e,t){var i=de(t=We(t)),o=e.display.externalMeasured=new ei(e.doc,t,i);o.lineN=i;var n=o.built=Yt(e,o);return o.text=n.pre,L(e.display.lineMeasure,n.pre),o}(e,t));var n=Si(o,t,i);return{line:t,view:o,rect:null,map:n.map,cache:n.cache,before:n.before,hasHeights:!1}}function Di(e,t,i,o,n){t.before&&(i=-1);var r,a=i+(o||"");return t.cache.hasOwnProperty(a)?r=t.cache[a]:(t.rect||(t.rect=t.view.text.getBoundingClientRect()),t.hasHeights||(function(e,t,i){var o=e.options.lineWrapping,n=o&&wi(e);if(!t.measure.heights||o&&t.measure.width!=n){var r=t.measure.heights=[];if(o){t.measure.width=n;for(var s=t.text.firstChild.getClientRects(),l=0;l<s.length-1;l++){var a=s[l],h=s[l+1];2<Math.abs(a.bottom-h.bottom)&&r.push((a.bottom+h.top)/2-i.top)}}r.push(i.bottom-i.top)}}(e,t.view,t.rect),t.hasHeights=!0),(r=function(e,t,i,o){var n,r=Ai(t.map,i,o),a=r.node,h=r.start,d=r.end,c=r.collapse;if(3==a.nodeType){for(var u=0;u<4;u++){for(;h&&oe(t.line.text.charAt(r.coverStart+h));)--h;for(;r.coverStart+d<r.coverEnd&&oe(t.line.text.charAt(r.coverStart+d));)++d;if((n=s&&l<9&&0==h&&d==r.coverEnd-r.coverStart?a.parentNode.getBoundingClientRect():Mi(T(a,h,d).getClientRects(),o)).left||n.right||0==h)break;d=h,h-=1,c="right"}s&&l<11&&(n=function(e,t){if(!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI||!function(e){if(null!=xt)return xt;var t=L(e,z("span","x")),i=t.getBoundingClientRect(),o=T(t,0,1).getBoundingClientRect();return xt=1<Math.abs(i.left-o.left)}(e))return t;var i=screen.logicalXDPI/screen.deviceXDPI,o=screen.logicalYDPI/screen.deviceYDPI;return{left:t.left*i,right:t.right*i,top:t.top*o,bottom:t.bottom*o}}(e.display.measure,n))}else{var p;0<h&&(c=o="right"),n=e.options.lineWrapping&&1<(p=a.getClientRects()).length?p["right"==o?p.length-1:0]:a.getBoundingClientRect()}if(s&&l<9&&!h&&(!n||!n.left&&!n.right)){var f=a.parentNode.getClientRects()[0];n=f?{left:f.left,right:f.left+Ki(e.display),top:f.top,bottom:f.bottom}:zi}for(var m=n.top-t.rect.top,g=n.bottom-t.rect.top,v=(m+g)/2,b=t.view.measure.heights,_=0;_<b.length-1&&!(v<b[_]);_++);var y=_?b[_-1]:0,w=b[_],x={left:("right"==c?n.right:n.left)-t.rect.left,right:("left"==c?n.left:n.right)-t.rect.left,top:y,bottom:w};return n.left||n.right||(x.bogus=!0),e.options.singleCursorHeightPerLine||(x.rtop=m,x.rbottom=g),x}(e,t,i,o)).bogus||(t.cache[a]=r)),{left:r.left,right:r.right,top:n?r.rtop:r.top,bottom:n?r.rbottom:r.bottom}}var Li,zi={left:0,right:0,top:0,bottom:0};function Ai(e,t,i){for(var o,n,r,s,l,a,h=0;h<e.length;h+=3)if(l=e[h],a=e[h+1],t<l?(n=0,r=1,s="left"):t<a?r=1+(n=t-l):(h==e.length-3||t==a&&e[h+3]>t)&&(n=(r=a-l)-1,a<=t&&(s="right")),null!=n){if(o=e[h+2],l==a&&i==(o.insertLeft?"left":"right")&&(s=i),"left"==i&&0==n)for(;h&&e[h-2]==e[h-3]&&e[h-1].insertLeft;)o=e[2+(h-=3)],s="left";if("right"==i&&n==a-l)for(;h<e.length-3&&e[h+3]==e[h+4]&&!e[h+5].insertLeft;)o=e[(h+=3)+2],s="right";break}return{node:o,start:n,end:r,collapse:s,coverStart:l,coverEnd:a}}function Mi(e,t){var i=zi;if("left"==t)for(var o=0;o<e.length&&(i=e[o]).left==i.right;o++);else for(var n=e.length-1;0<=n&&(i=e[n]).left==i.right;n--);return i}function Oi(e){if(e.measure&&(e.measure.cache={},e.measure.heights=null,e.rest))for(var t=0;t<e.rest.length;t++)e.measure.caches[t]={}}function ji(e){e.display.externalMeasure=null,D(e.display.lineMeasure);for(var t=0;t<e.display.view.length;t++)Oi(e.display.view[t])}function Ei(e){ji(e),e.display.cachedCharWidth=e.display.cachedTextHeight=e.display.cachedPaddingH=null,e.options.lineWrapping||(e.display.maxLineChanged=!0),e.display.lineNumChars=null}function Ni(){return d&&g?-(document.body.getBoundingClientRect().left-parseInt(getComputedStyle(document.body).marginLeft)):window.pageXOffset||(document.documentElement||document.body).scrollLeft}function Pi(){return d&&g?-(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop)):window.pageYOffset||(document.documentElement||document.body).scrollTop}function Fi(e){var t=0;if(e.widgets)for(var i=0;i<e.widgets.length;++i)e.widgets[i].above&&(t+=mi(e.widgets[i]));return t}function Ii(e,t,i,o,n){if(!n){var r=Fi(t);i.top+=r,i.bottom+=r}if("line"==o)return i;o||(o="local");var s=Ve(t);if("local"==o?s+=vi(e.display):s-=e.display.viewOffset,"page"==o||"window"==o){var l=e.display.lineSpace.getBoundingClientRect();s+=l.top+("window"==o?0:Pi());var a=l.left+("window"==o?0:Ni());i.left+=a,i.right+=a}return i.top+=s,i.bottom+=s,i}function Hi(e,t,i){if("div"==i)return t;var o=t.left,n=t.top;if("page"==i)o-=Ni(),n-=Pi();else if("local"==i||!i){var r=e.display.sizer.getBoundingClientRect();o+=r.left,n+=r.top}var s=e.display.lineSpace.getBoundingClientRect();return{left:o-s.left,top:n-s.top}}function Wi(e,t,i,o,n){return o||(o=se(e.doc,t.line)),Ii(e,o,Ci(e,o,t.ch,n),i)}function Ri(e,t,i,o,n,r){function s(t,s){var l=Di(e,n,t,s?"right":"left",r);return s?l.left=l.right:l.right=l.left,Ii(e,o,l,i)}o=o||se(e.doc,t.line),n||(n=ki(e,o));var l=Ze(o,e.doc.direction),a=t.ch,h=t.sticky;if(a>=o.text.length?(a=o.text.length,h="before"):a<=0&&(a=0,h="after"),!l)return s("before"==h?a-1:a,"before"==h);function d(e,t,i){return s(i?e-1:e,1==l[t].level!=i)}var c=Ge(l,a,h),u=Ye,p=d(a,c,"before"==h);return null!=u&&(p.other=d(a,u,"before"!=h)),p}function Ui(e,t){var i=0;t=we(e.doc,t),e.options.lineWrapping||(i=Ki(e.display)*t.ch);var o=se(e.doc,t.line),n=Ve(o)+vi(e.display);return{left:i,right:i,top:n,bottom:n+o.height}}function Bi(e,t,i,o,n){var r=fe(e,t,i);return r.xRel=n,o&&(r.outside=!0),r}function $i(e,t,i){var o=e.doc;if((i+=e.display.viewOffset)<0)return Bi(o.first,0,null,!0,-1);var n=ce(o,i),r=o.first+o.size-1;if(r<n)return Bi(o.first+o.size-1,se(o,r).text.length,null,!0,1);t<0&&(t=0);for(var s=se(o,n);;){var l=Yi(e,s,n,t,i),a=Ie(s,l.ch+(0<l.xRel?1:0));if(!a)return l;var h=a.find(1);if(h.line==n)return h;s=se(o,n=h.line)}}function Vi(e,t,i,o){o-=Fi(t);var n=t.text.length,r=re(function(t){return Di(e,i,t-1).bottom<=o},n,0);return{begin:r,end:n=re(function(t){return Di(e,i,t).top>o},r,n)}}function qi(e,t,i,o){return i||(i=ki(e,t)),Vi(e,t,i,Ii(e,t,Di(e,i,o),"line").top)}function Xi(e,t,i,o){return!(e.bottom<=i)&&(e.top>i||(o?e.left:e.right)>t)}function Yi(e,t,i,o,n){n-=Ve(t);var r=ki(e,t),s=Fi(t),l=0,a=t.text.length,h=!0,d=Ze(t,e.doc.direction);if(d){var c=(e.options.lineWrapping?function(e,t,i,o,n,r,s){var l=Vi(e,t,o,s),a=l.begin,h=l.end;/\s/.test(t.text.charAt(h-1))&&h--;for(var d=null,c=null,u=0;u<n.length;u++){var p=n[u];if(!(p.from>=h||p.to<=a)){var f=Di(e,o,1!=p.level?Math.min(h,p.to)-1:Math.max(a,p.from)).right,m=f<r?r-f+1e9:f-r;(!d||m<c)&&(d=p,c=m)}}return d||(d=n[n.length-1]),d.from<a&&(d={from:a,to:d.to,level:d.level}),d.to>h&&(d={from:d.from,to:h,level:d.level}),d}:function(e,t,i,o,n,r,s){var l=re(function(l){var a=n[l],h=1!=a.level;return Xi(Ri(e,fe(i,h?a.to:a.from,h?"before":"after"),"line",t,o),r,s,!0)},0,n.length-1),a=n[l];if(0<l){var h=1!=a.level,d=Ri(e,fe(i,h?a.from:a.to,h?"after":"before"),"line",t,o);Xi(d,r,s,!0)&&d.top>s&&(a=n[l-1])}return a})(e,t,i,r,d,o,n);l=(h=1!=c.level)?c.from:c.to-1,a=h?c.to:c.from-1}var u,p,f=null,m=null,g=re(function(t){var i=Di(e,r,t);return i.top+=s,i.bottom+=s,!!Xi(i,o,n,!1)&&(i.top<=n&&i.left<=o&&(f=t,m=i),!0)},l,a),v=!1;if(m){var b=o-m.left<m.right-o,_=b==h;g=f+(_?0:1),p=_?"after":"before",u=b?m.left:m.right}else{h||g!=a&&g!=l||g++,p=0==g?"after":g==t.text.length?"before":Di(e,r,g-(h?1:0)).bottom+s<=n==h?"after":"before";var y=Ri(e,fe(i,g,p),"line",t,r);u=y.left,v=n<y.top||n>=y.bottom}return Bi(i,g=ne(t.text,g,1),p,v,o-u)}function Gi(e){if(null!=e.cachedTextHeight)return e.cachedTextHeight;if(null==Li){Li=z("pre");for(var t=0;t<49;++t)Li.appendChild(document.createTextNode("x")),Li.appendChild(z("br"));Li.appendChild(document.createTextNode("x"))}L(e.measure,Li);var i=Li.offsetHeight/50;return 3<i&&(e.cachedTextHeight=i),D(e.measure),i||1}function Ki(e){if(null!=e.cachedCharWidth)return e.cachedCharWidth;var t=z("span","xxxxxxxxxx"),i=z("pre",[t]);L(e.measure,i);var o=t.getBoundingClientRect(),n=(o.right-o.left)/10;return 2<n&&(e.cachedCharWidth=n),n||10}function Zi(e){for(var t=e.display,i={},o={},n=t.gutters.clientLeft,r=t.gutters.firstChild,s=0;r;r=r.nextSibling,++s)i[e.options.gutters[s]]=r.offsetLeft+r.clientLeft+n,o[e.options.gutters[s]]=r.clientWidth;return{fixedPos:Qi(t),gutterTotalWidth:t.gutters.offsetWidth,gutterLeft:i,gutterWidth:o,wrapperWidth:t.wrapper.clientWidth}}function Qi(e){return e.scroller.getBoundingClientRect().left-e.sizer.getBoundingClientRect().left}function Ji(e){var t=Gi(e.display),i=e.options.lineWrapping,o=i&&Math.max(5,e.display.scroller.clientWidth/Ki(e.display)-3);return function(n){if(Be(e.doc,n))return 0;var r=0;if(n.widgets)for(var s=0;s<n.widgets.length;s++)n.widgets[s].height&&(r+=n.widgets[s].height);return i?r+(Math.ceil(n.text.length/o)||1)*t:r+t}}function eo(e){var t=e.doc,i=Ji(e);t.iter(function(e){var t=i(e);t!=e.height&&he(e,t)})}function to(e,t,i,o){var n=e.display;if(!i&&"true"==ct(t).getAttribute("cm-not-content"))return null;var r,s,l=n.lineSpace.getBoundingClientRect();try{r=t.clientX-l.left,s=t.clientY-l.top}catch(t){return null}var a,h=$i(e,r,s);if(o&&1==h.xRel&&(a=se(e.doc,h.line).text).length==h.ch){var d=I(a,a.length,e.options.tabSize)-a.length;h=fe(h.line,Math.max(0,Math.round((r-_i(e.display).left)/Ki(e.display))-d))}return h}function io(e,t){if(t>=e.display.viewTo)return null;if((t-=e.display.viewFrom)<0)return null;for(var i=e.display.view,o=0;o<i.length;o++)if((t-=i[o].size)<0)return o}function oo(e){e.display.input.showSelection(e.display.input.prepareSelection())}function no(e,t){void 0===t&&(t=!0);for(var i=e.doc,o={},n=o.cursors=document.createDocumentFragment(),r=o.selection=document.createDocumentFragment(),s=0;s<i.sel.ranges.length;s++)if(t||s!=i.sel.primIndex){var l=i.sel.ranges[s];if(!(l.from().line>=e.display.viewTo||l.to().line<e.display.viewFrom)){var a=l.empty();(a||e.options.showCursorWhenSelecting)&&ro(e,l.head,n),a||lo(e,l,r)}}return o}function ro(e,t,i){var o=Ri(e,t,"div",null,null,!e.options.singleCursorHeightPerLine),n=i.appendChild(z("div"," ","CodeMirror-cursor"));if(n.style.left=o.left+"px",n.style.top=o.top+"px",n.style.height=Math.max(0,o.bottom-o.top)*e.options.cursorHeight+"px",o.other){var r=i.appendChild(z("div"," ","CodeMirror-cursor CodeMirror-secondarycursor"));r.style.display="",r.style.left=o.other.left+"px",r.style.top=o.other.top+"px",r.style.height=.85*(o.other.bottom-o.other.top)+"px"}}function so(e,t){return e.top-t.top||e.left-t.left}function lo(e,t,i){var o=e.display,n=e.doc,r=document.createDocumentFragment(),s=_i(e.display),l=s.left,a=Math.max(o.sizerWidth,wi(e)-o.sizer.offsetLeft)-s.right,h="ltr"==n.direction;function d(e,t,i,o){t<0&&(t=0),t=Math.round(t),o=Math.round(o),r.appendChild(z("div",null,"CodeMirror-selected","position: absolute; left: "+e+"px;\n                             top: "+t+"px; width: "+(null==i?a-e:i)+"px;\n                             height: "+(o-t)+"px"))}function c(t,i,o){var r,s,c=se(n,t),u=c.text.length;function p(i,o){return Wi(e,fe(t,i),"div",c,o)}function f(t,i,o){var n=qi(e,c,null,t),r="ltr"==i==("after"==o)?"left":"right";return p("after"==o?n.begin:n.end-(/\s/.test(c.text.charAt(n.end-1))?2:1),r)[r]}var m=Ze(c,n.direction);return function(e,t,i,o){if(!e)return o(t,i,"ltr",0);for(var n=!1,r=0;r<e.length;++r){var s=e[r];(s.from<i&&s.to>t||t==i&&s.to==t)&&(o(Math.max(s.from,t),Math.min(s.to,i),1==s.level?"rtl":"ltr",r),n=!0)}n||o(t,i,"ltr")}(m,i||0,null==o?u:o,function(e,t,n,c){var g="ltr"==n,v=p(e,g?"left":"right"),b=p(t-1,g?"right":"left"),_=null==i&&0==e,y=null==o&&t==u,w=0==c,x=!m||c==m.length-1;if(b.top-v.top<=3){var S=(h?y:_)&&x,C=(h?_:y)&&w?l:(g?v:b).left,T=S?a:(g?b:v).right;d(C,v.top,T-C,v.bottom)}else{var k,D,L,z;z=g?(k=h&&_&&w?l:v.left,D=h?a:f(e,n,"before"),L=h?l:f(t,n,"after"),h&&y&&x?a:b.right):(k=h?f(e,n,"before"):l,D=!h&&_&&w?a:v.right,L=!h&&y&&x?l:b.left,h?f(t,n,"after"):a),d(k,v.top,D-k,v.bottom),v.bottom<b.top&&d(l,v.bottom,null,b.top),d(L,b.top,z-L,b.bottom)}(!r||so(v,r)<0)&&(r=v),so(b,r)<0&&(r=b),(!s||so(v,s)<0)&&(s=v),so(b,s)<0&&(s=b)}),{start:r,end:s}}var u=t.from(),p=t.to();if(u.line==p.line)c(u.line,u.ch,p.ch);else{var f=se(n,u.line),m=se(n,p.line),g=We(f)==We(m),v=c(u.line,u.ch,g?f.text.length+1:null).end,b=c(p.line,g?0:null,p.ch).start;g&&(v.top<b.top-2?(d(v.right,v.top,null,v.bottom),d(l,b.top,b.left,b.bottom)):d(v.right,v.top,b.left-v.right,v.bottom)),v.bottom<b.top&&d(l,v.bottom,null,b.top)}i.appendChild(r)}function ao(e){if(e.state.focused){var t=e.display;clearInterval(t.blinker);var i=!0;t.cursorDiv.style.visibility="",0<e.options.cursorBlinkRate?t.blinker=setInterval(function(){return t.cursorDiv.style.visibility=(i=!i)?"":"hidden"},e.options.cursorBlinkRate):e.options.cursorBlinkRate<0&&(t.cursorDiv.style.visibility="hidden")}}function ho(e){e.state.focused||(e.display.input.focus(),uo(e))}function co(e){e.state.delayingBlurEvent=!0,setTimeout(function(){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1,po(e))},100)}function uo(e,t){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1),"nocursor"!=e.options.readOnly&&(e.state.focused||(it(e,"focus",e,t),e.state.focused=!0,j(e.display.wrapper,"CodeMirror-focused"),e.curOp||e.display.selForContextMenu==e.doc.sel||(e.display.input.reset(),a&&setTimeout(function(){return e.display.input.reset(!0)},20)),e.display.input.receivedFocus()),ao(e))}function po(e,t){e.state.delayingBlurEvent||(e.state.focused&&(it(e,"blur",e,t),e.state.focused=!1,k(e.display.wrapper,"CodeMirror-focused")),clearInterval(e.display.blinker),setTimeout(function(){e.state.focused||(e.display.shift=!1)},150))}function fo(e){for(var t=e.display,i=t.lineDiv.offsetTop,o=0;o<t.view.length;o++){var n=t.view[o],r=void 0;if(!n.hidden){if(s&&l<8){var a=n.node.offsetTop+n.node.offsetHeight;r=a-i,i=a}else{var h=n.node.getBoundingClientRect();r=h.bottom-h.top}var d=n.line.height-r;if(r<2&&(r=Gi(t)),(.005<d||d<-.005)&&(he(n.line,r),mo(n.line),n.rest))for(var c=0;c<n.rest.length;c++)mo(n.rest[c])}}}function mo(e){if(e.widgets)for(var t=0;t<e.widgets.length;++t){var i=e.widgets[t],o=i.node.parentNode;o&&(i.height=o.offsetHeight)}}function go(e,t,i){var o=i&&null!=i.top?Math.max(0,i.top):e.scroller.scrollTop;o=Math.floor(o-vi(e));var n=i&&null!=i.bottom?i.bottom:o+e.wrapper.clientHeight,r=ce(t,o),s=ce(t,n);if(i&&i.ensure){var l=i.ensure.from.line,a=i.ensure.to.line;l<r?s=ce(t,Ve(se(t,r=l))+e.wrapper.clientHeight):Math.min(a,t.lastLine())>=s&&(r=ce(t,Ve(se(t,a))-e.wrapper.clientHeight),s=a)}return{from:r,to:Math.max(s,r+1)}}function vo(e){var t=e.display,i=t.view;if(t.alignWidgets||t.gutters.firstChild&&e.options.fixedGutter){for(var o=Qi(t)-t.scroller.scrollLeft+e.doc.scrollLeft,n=t.gutters.offsetWidth,r=o+"px",s=0;s<i.length;s++)if(!i[s].hidden){e.options.fixedGutter&&(i[s].gutter&&(i[s].gutter.style.left=r),i[s].gutterBackground&&(i[s].gutterBackground.style.left=r));var l=i[s].alignable;if(l)for(var a=0;a<l.length;a++)l[a].style.left=r}e.options.fixedGutter&&(t.gutters.style.left=o+n+"px")}}function bo(e){if(!e.options.lineNumbers)return!1;var t=e.doc,i=pe(e.options,t.first+t.size-1),o=e.display;if(i.length==o.lineNumChars)return!1;var n=o.measure.appendChild(z("div",[z("div",i)],"CodeMirror-linenumber CodeMirror-gutter-elt")),r=n.firstChild.offsetWidth,s=n.offsetWidth-r;return o.lineGutter.style.width="",o.lineNumInnerWidth=Math.max(r,o.lineGutter.offsetWidth-s)+1,o.lineNumWidth=o.lineNumInnerWidth+s,o.lineNumChars=o.lineNumInnerWidth?i.length:-1,o.lineGutter.style.width=o.lineNumWidth+"px",tn(e),!0}function _o(e,t){var i=e.display,o=Gi(e.display);t.top<0&&(t.top=0);var n=e.curOp&&null!=e.curOp.scrollTop?e.curOp.scrollTop:i.scroller.scrollTop,r=xi(e),s={};t.bottom-t.top>r&&(t.bottom=t.top+r);var l=e.doc.height+bi(i),a=t.top<o,h=t.bottom>l-o;if(t.top<n)s.scrollTop=a?0:t.top;else if(t.bottom>n+r){var d=Math.min(t.top,(h?l:t.bottom)-r);d!=n&&(s.scrollTop=d)}var c=e.curOp&&null!=e.curOp.scrollLeft?e.curOp.scrollLeft:i.scroller.scrollLeft,u=wi(e)-(e.options.fixedGutter?i.gutters.offsetWidth:0),p=t.right-t.left>u;return p&&(t.right=t.left+u),t.left<10?s.scrollLeft=0:t.left<c?s.scrollLeft=Math.max(0,t.left-(p?0:10)):t.right>u+c-3&&(s.scrollLeft=t.right+(p?0:10)-u),s}function yo(e,t){null!=t&&(So(e),e.curOp.scrollTop=(null==e.curOp.scrollTop?e.doc.scrollTop:e.curOp.scrollTop)+t)}function wo(e){So(e);var t=e.getCursor();e.curOp.scrollToPos={from:t,to:t,margin:e.options.cursorScrollMargin}}function xo(e,t,i){null==t&&null==i||So(e),null!=t&&(e.curOp.scrollLeft=t),null!=i&&(e.curOp.scrollTop=i)}function So(e){var t=e.curOp.scrollToPos;t&&(e.curOp.scrollToPos=null,Co(e,Ui(e,t.from),Ui(e,t.to),t.margin))}function Co(e,t,i,o){var n=_o(e,{left:Math.min(t.left,i.left),top:Math.min(t.top,i.top)-o,right:Math.max(t.right,i.right),bottom:Math.max(t.bottom,i.bottom)+o});xo(e,n.scrollLeft,n.scrollTop)}function To(e,t){Math.abs(e.doc.scrollTop-t)<2||(i||en(e,{top:t}),ko(e,t,!0),i&&en(e),Go(e,100))}function ko(e,t,i){t=Math.min(e.display.scroller.scrollHeight-e.display.scroller.clientHeight,t),(e.display.scroller.scrollTop!=t||i)&&(e.doc.scrollTop=t,e.display.scrollbars.setScrollTop(t),e.display.scroller.scrollTop!=t&&(e.display.scroller.scrollTop=t))}function Do(e,t,i,o){t=Math.min(t,e.display.scroller.scrollWidth-e.display.scroller.clientWidth),(i?t==e.doc.scrollLeft:Math.abs(e.doc.scrollLeft-t)<2)&&!o||(e.doc.scrollLeft=t,vo(e),e.display.scroller.scrollLeft!=t&&(e.display.scroller.scrollLeft=t),e.display.scrollbars.setScrollLeft(t))}function Lo(e){var t=e.display,i=t.gutters.offsetWidth,o=Math.round(e.doc.height+bi(e.display));return{clientHeight:t.scroller.clientHeight,viewHeight:t.wrapper.clientHeight,scrollWidth:t.scroller.scrollWidth,clientWidth:t.scroller.clientWidth,viewWidth:t.wrapper.clientWidth,barLeft:e.options.fixedGutter?i:0,docHeight:o,scrollHeight:o+yi(e)+t.barHeight,nativeBarWidth:t.nativeBarWidth,gutterWidth:i}}var zo=function(e,t,i){this.cm=i;var o=this.vert=z("div",[z("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),n=this.horiz=z("div",[z("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");o.tabIndex=n.tabIndex=-1,e(o),e(n),Je(o,"scroll",function(){o.clientHeight&&t(o.scrollTop,"vertical")}),Je(n,"scroll",function(){n.clientWidth&&t(n.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,s&&l<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};zo.prototype.update=function(e){var t=e.scrollWidth>e.clientWidth+1,i=e.scrollHeight>e.clientHeight+1,o=e.nativeBarWidth;if(i){this.vert.style.display="block",this.vert.style.bottom=t?o+"px":"0";var n=e.viewHeight-(t?o:0);this.vert.firstChild.style.height=Math.max(0,e.scrollHeight-e.clientHeight+n)+"px"}else this.vert.style.display="",this.vert.firstChild.style.height="0";if(t){this.horiz.style.display="block",this.horiz.style.right=i?o+"px":"0",this.horiz.style.left=e.barLeft+"px";var r=e.viewWidth-e.barLeft-(i?o:0);this.horiz.firstChild.style.width=Math.max(0,e.scrollWidth-e.clientWidth+r)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&0<e.clientHeight&&(0==o&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:i?o:0,bottom:t?o:0}},zo.prototype.setScrollLeft=function(e){this.horiz.scrollLeft!=e&&(this.horiz.scrollLeft=e),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},zo.prototype.setScrollTop=function(e){this.vert.scrollTop!=e&&(this.vert.scrollTop=e),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},zo.prototype.zeroWidthHack=function(){var e=b&&!p?"12px":"18px";this.horiz.style.height=this.vert.style.width=e,this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none",this.disableHoriz=new H,this.disableVert=new H},zo.prototype.enableZeroWidthBar=function(e,t,i){e.style.pointerEvents="auto",t.set(1e3,function o(){var n=e.getBoundingClientRect();("vert"==i?document.elementFromPoint(n.right-1,(n.top+n.bottom)/2):document.elementFromPoint((n.right+n.left)/2,n.bottom-1))!=e?e.style.pointerEvents="none":t.set(1e3,o)})},zo.prototype.clear=function(){var e=this.horiz.parentNode;e.removeChild(this.horiz),e.removeChild(this.vert)};var Ao=function(){};function Mo(e,t){t||(t=Lo(e));var i=e.display.barWidth,o=e.display.barHeight;Oo(e,t);for(var n=0;n<4&&i!=e.display.barWidth||o!=e.display.barHeight;n++)i!=e.display.barWidth&&e.options.lineWrapping&&fo(e),Oo(e,Lo(e)),i=e.display.barWidth,o=e.display.barHeight}function Oo(e,t){var i=e.display,o=i.scrollbars.update(t);i.sizer.style.paddingRight=(i.barWidth=o.right)+"px",i.sizer.style.paddingBottom=(i.barHeight=o.bottom)+"px",i.heightForcer.style.borderBottom=o.bottom+"px solid transparent",o.right&&o.bottom?(i.scrollbarFiller.style.display="block",i.scrollbarFiller.style.height=o.bottom+"px",i.scrollbarFiller.style.width=o.right+"px"):i.scrollbarFiller.style.display="",o.bottom&&e.options.coverGutterNextToScrollbar&&e.options.fixedGutter?(i.gutterFiller.style.display="block",i.gutterFiller.style.height=o.bottom+"px",i.gutterFiller.style.width=t.gutterWidth+"px"):i.gutterFiller.style.display=""}Ao.prototype.update=function(){return{bottom:0,right:0}},Ao.prototype.setScrollLeft=function(){},Ao.prototype.setScrollTop=function(){},Ao.prototype.clear=function(){};var jo={native:zo,null:Ao};function Eo(e){e.display.scrollbars&&(e.display.scrollbars.clear(),e.display.scrollbars.addClass&&k(e.display.wrapper,e.display.scrollbars.addClass)),e.display.scrollbars=new jo[e.options.scrollbarStyle](function(t){e.display.wrapper.insertBefore(t,e.display.scrollbarFiller),Je(t,"mousedown",function(){e.state.focused&&setTimeout(function(){return e.display.input.focus()},0)}),t.setAttribute("cm-not-content","true")},function(t,i){"horizontal"==i?Do(e,t):To(e,t)},e),e.display.scrollbars.addClass&&j(e.display.wrapper,e.display.scrollbars.addClass)}var No=0;function Po(e){var t;e.curOp={cm:e,viewChanged:!1,startHeight:e.doc.height,forceUpdate:!1,updateInput:null,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++No},t=e.curOp,ii?ii.ops.push(t):t.ownsGroup=ii={ops:[t],delayedCallbacks:[]}}function Fo(e){var t=e.curOp;t&&function(){var e=t.ownsGroup;if(e)try{!function(e){var t=e.delayedCallbacks,i=0;do{for(;i<t.length;i++)t[i].call(null);for(var o=0;o<e.ops.length;o++){var n=e.ops[o];if(n.cursorActivityHandlers)for(;n.cursorActivityCalled<n.cursorActivityHandlers.length;)n.cursorActivityHandlers[n.cursorActivityCalled++].call(null,n.cm)}}while(i<t.length)}(e)}finally{ii=null,function(e){for(var t=0;t<e.ops.length;t++)e.ops[t].cm.curOp=null;!function(e){for(var t=e.ops,i=0;i<t.length;i++)void 0,r=void 0,l=(s=(o=t[i]).cm).display,!(r=(n=s).display).scrollbarsClipped&&r.scroller.offsetWidth&&(r.nativeBarWidth=r.scroller.offsetWidth-r.scroller.clientWidth,r.heightForcer.style.height=yi(n)+"px",r.sizer.style.marginBottom=-r.nativeBarWidth+"px",r.sizer.style.borderRightWidth=yi(n)+"px",r.scrollbarsClipped=!0),o.updateMaxLine&&Xe(s),o.mustUpdate=o.viewChanged||o.forceUpdate||null!=o.scrollTop||o.scrollToPos&&(o.scrollToPos.from.line<l.viewFrom||o.scrollToPos.to.line>=l.viewTo)||l.maxLineChanged&&s.options.lineWrapping,o.update=o.mustUpdate&&new Zo(s,o.mustUpdate&&{top:o.scrollTop,ensure:o.scrollToPos},o.forceUpdate);for(var o,n,r,s,l,a,h,d,c,u=0;u<t.length;u++)(a=t[u]).updatedDisplay=a.mustUpdate&&Qo(a.cm,a.update);for(var p=0;p<t.length;p++)d=void 0,c=void 0,c=(d=(h=t[p]).cm).display,h.updatedDisplay&&fo(d),h.barMeasure=Lo(d),c.maxLineChanged&&!d.options.lineWrapping&&(h.adjustWidthTo=Ci(d,c.maxLine,c.maxLine.text.length).left+3,d.display.sizerWidth=h.adjustWidthTo,h.barMeasure.scrollWidth=Math.max(c.scroller.clientWidth,c.sizer.offsetLeft+h.adjustWidthTo+yi(d)+d.display.barWidth),h.maxScrollLeft=Math.max(0,c.sizer.offsetLeft+h.adjustWidthTo-wi(d))),(h.updatedDisplay||h.selectionChanged)&&(h.preparedSelection=c.input.prepareSelection());for(var f=0;f<t.length;f++)Io(t[f]);for(var m=0;m<t.length;m++)Ho(t[m])}(e)}(e)}}()}function Io(e){var t=e.cm;null!=e.adjustWidthTo&&(t.display.sizer.style.minWidth=e.adjustWidthTo+"px",e.maxScrollLeft<t.doc.scrollLeft&&Do(t,Math.min(t.display.scroller.scrollLeft,e.maxScrollLeft),!0),t.display.maxLineChanged=!1);var i=e.focus&&e.focus==O();e.preparedSelection&&t.display.input.showSelection(e.preparedSelection,i),(e.updatedDisplay||e.startHeight!=t.doc.height)&&Mo(t,e.barMeasure),e.updatedDisplay&&on(t,e.barMeasure),e.selectionChanged&&ao(t),t.state.focused&&e.updateInput&&t.display.input.reset(e.typing),i&&ho(e.cm)}function Ho(e){var t=e.cm,i=t.display,o=t.doc;e.updatedDisplay&&Jo(t,e.update),null==i.wheelStartX||null==e.scrollTop&&null==e.scrollLeft&&!e.scrollToPos||(i.wheelStartX=i.wheelStartY=null),null!=e.scrollTop&&ko(t,e.scrollTop,e.forceScroll),null!=e.scrollLeft&&Do(t,e.scrollLeft,!0,!0),e.scrollToPos&&function(e,t){if(!ot(e,"scrollCursorIntoView")){var i=e.display,o=i.sizer.getBoundingClientRect(),n=null;if(t.top+o.top<0?n=!0:t.bottom+o.top>(window.innerHeight||document.documentElement.clientHeight)&&(n=!1),null!=n&&!f){var r=z("div","",null,"position: absolute;\n                         top: "+(t.top-i.viewOffset-vi(e.display))+"px;\n                         height: "+(t.bottom-t.top+yi(e)+i.barHeight)+"px;\n                         left: "+t.left+"px; width: "+Math.max(2,t.right-t.left)+"px;");e.display.lineSpace.appendChild(r),r.scrollIntoView(n),e.display.lineSpace.removeChild(r)}}}(t,function(e,t,i,o){var n;null==o&&(o=0),e.options.lineWrapping||t!=i||(i="before"==(t=t.ch?fe(t.line,"before"==t.sticky?t.ch-1:t.ch,"after"):t).sticky?fe(t.line,t.ch+1,"before"):t);for(var r=0;r<5;r++){var s=!1,l=Ri(e,t),a=i&&i!=t?Ri(e,i):l,h=_o(e,n={left:Math.min(l.left,a.left),top:Math.min(l.top,a.top)-o,right:Math.max(l.left,a.left),bottom:Math.max(l.bottom,a.bottom)+o}),d=e.doc.scrollTop,c=e.doc.scrollLeft;if(null!=h.scrollTop&&(To(e,h.scrollTop),1<Math.abs(e.doc.scrollTop-d)&&(s=!0)),null!=h.scrollLeft&&(Do(e,h.scrollLeft),1<Math.abs(e.doc.scrollLeft-c)&&(s=!0)),!s)break}return n}(t,we(o,e.scrollToPos.from),we(o,e.scrollToPos.to),e.scrollToPos.margin));var n=e.maybeHiddenMarkers,r=e.maybeUnhiddenMarkers;if(n)for(var s=0;s<n.length;++s)n[s].lines.length||it(n[s],"hide");if(r)for(var l=0;l<r.length;++l)r[l].lines.length&&it(r[l],"unhide");i.wrapper.offsetHeight&&(o.scrollTop=t.display.scroller.scrollTop),e.changeObjs&&it(t,"changes",t,e.changeObjs),e.update&&e.update.finish()}function Wo(e,t){if(e.curOp)return t();Po(e);try{return t()}finally{Fo(e)}}function Ro(e,t){return function(){if(e.curOp)return t.apply(e,arguments);Po(e);try{return t.apply(e,arguments)}finally{Fo(e)}}}function Uo(e){return function(){if(this.curOp)return e.apply(this,arguments);Po(this);try{return e.apply(this,arguments)}finally{Fo(this)}}}function Bo(e){return function(){var t=this.cm;if(!t||t.curOp)return e.apply(this,arguments);Po(t);try{return e.apply(this,arguments)}finally{Fo(t)}}}function $o(e,t,i,o){null==t&&(t=e.doc.first),null==i&&(i=e.doc.first+e.doc.size),o||(o=0);var n=e.display;if(o&&i<n.viewTo&&(null==n.updateLineNumbers||n.updateLineNumbers>t)&&(n.updateLineNumbers=t),e.curOp.viewChanged=!0,t>=n.viewTo)Ce&&Re(e.doc,t)<n.viewTo&&qo(e);else if(i<=n.viewFrom)Ce&&Ue(e.doc,i+o)>n.viewFrom?qo(e):(n.viewFrom+=o,n.viewTo+=o);else if(t<=n.viewFrom&&i>=n.viewTo)qo(e);else if(t<=n.viewFrom){var r=Xo(e,i,i+o,1);r?(n.view=n.view.slice(r.index),n.viewFrom=r.lineN,n.viewTo+=o):qo(e)}else if(i>=n.viewTo){var s=Xo(e,t,t,-1);s?(n.view=n.view.slice(0,s.index),n.viewTo=s.lineN):qo(e)}else{var l=Xo(e,t,t,-1),a=Xo(e,i,i+o,1);l&&a?(n.view=n.view.slice(0,l.index).concat(ti(e,l.lineN,a.lineN)).concat(n.view.slice(a.index)),n.viewTo+=o):qo(e)}var h=n.externalMeasured;h&&(i<h.lineN?h.lineN+=o:t<h.lineN+h.size&&(n.externalMeasured=null))}function Vo(e,t,i){e.curOp.viewChanged=!0;var o=e.display,n=e.display.externalMeasured;if(n&&t>=n.lineN&&t<n.lineN+n.size&&(o.externalMeasured=null),!(t<o.viewFrom||t>=o.viewTo)){var r=o.view[io(e,t)];if(null!=r.node){var s=r.changes||(r.changes=[]);-1==W(s,i)&&s.push(i)}}}function qo(e){e.display.viewFrom=e.display.viewTo=e.doc.first,e.display.view=[],e.display.viewOffset=0}function Xo(e,t,i,o){var n,r=io(e,t),s=e.display.view;if(!Ce||i==e.doc.first+e.doc.size)return{index:r,lineN:i};for(var l=e.display.viewFrom,a=0;a<r;a++)l+=s[a].size;if(l!=t){if(0<o){if(r==s.length-1)return null;n=l+s[r].size-t,r++}else n=l-t;t+=n,i+=n}for(;Re(e.doc,i)!=i;){if(r==(o<0?0:s.length-1))return null;i+=o*s[r-(o<0?1:0)].size,r+=o}return{index:r,lineN:i}}function Yo(e){for(var t=e.display.view,i=0,o=0;o<t.length;o++){var n=t[o];n.hidden||n.node&&!n.changes||++i}return i}function Go(e,t){e.doc.highlightFrontier<e.display.viewTo&&e.state.highlight.set(t,P(Ko,e))}function Ko(e){var t=e.doc;if(!(t.highlightFrontier>=e.display.viewTo)){var i=+new Date+e.options.workTime,o=Pt(e,t.highlightFrontier),n=[];t.iter(o.line,Math.min(t.first+t.size,e.display.viewTo+500),function(r){if(o.line>=e.display.viewFrom){var s=r.styles,l=r.text.length>e.options.maxHighlightLength?Lt(t.mode,o.state):null,a=Et(e,r,o,!0);l&&(o.state=l),r.styles=a.styles;var h=r.styleClasses,d=a.classes;d?r.styleClasses=d:h&&(r.styleClasses=null);for(var c=!s||s.length!=r.styles.length||h!=d&&(!h||!d||h.bgClass!=d.bgClass||h.textClass!=d.textClass),u=0;!c&&u<s.length;++u)c=s[u]!=r.styles[u];c&&n.push(o.line),r.stateAfter=o.save(),o.nextLine()}else r.text.length<=e.options.maxHighlightLength&&Ft(e,r.text,o),r.stateAfter=o.line%5==0?o.save():null,o.nextLine();if(+new Date>i)return Go(e,e.options.workDelay),!0}),t.highlightFrontier=o.line,t.modeFrontier=Math.max(t.modeFrontier,o.line),n.length&&Wo(e,function(){for(var t=0;t<n.length;t++)Vo(e,n[t],"text")})}}var Zo=function(e,t,i){var o=e.display;this.viewport=t,this.visible=go(o,e.doc,t),this.editorIsHidden=!o.wrapper.offsetWidth,this.wrapperHeight=o.wrapper.clientHeight,this.wrapperWidth=o.wrapper.clientWidth,this.oldDisplayWidth=wi(e),this.force=i,this.dims=Zi(e),this.events=[]};function Qo(e,t){var i=e.display,o=e.doc;if(t.editorIsHidden)return qo(e),!1;if(!t.force&&t.visible.from>=i.viewFrom&&t.visible.to<=i.viewTo&&(null==i.updateLineNumbers||i.updateLineNumbers>=i.viewTo)&&i.renderedView==i.view&&0==Yo(e))return!1;bo(e)&&(qo(e),t.dims=Zi(e));var n=o.first+o.size,r=Math.max(t.visible.from-e.options.viewportMargin,o.first),s=Math.min(n,t.visible.to+e.options.viewportMargin);i.viewFrom<r&&r-i.viewFrom<20&&(r=Math.max(o.first,i.viewFrom)),i.viewTo>s&&i.viewTo-s<20&&(s=Math.min(n,i.viewTo)),Ce&&(r=Re(e.doc,r),s=Ue(e.doc,s));var l,h,d,c,u=r!=i.viewFrom||s!=i.viewTo||i.lastWrapHeight!=t.wrapperHeight||i.lastWrapWidth!=t.wrapperWidth;h=r,d=s,0==(c=(l=e).display).view.length||h>=c.viewTo||d<=c.viewFrom?(c.view=ti(l,h,d),c.viewFrom=h):(c.viewFrom>h?c.view=ti(l,h,c.viewFrom).concat(c.view):c.viewFrom<h&&(c.view=c.view.slice(io(l,h))),c.viewFrom=h,c.viewTo<d?c.view=c.view.concat(ti(l,c.viewTo,d)):c.viewTo>d&&(c.view=c.view.slice(0,io(l,d)))),c.viewTo=d,i.viewOffset=Ve(se(e.doc,i.viewFrom)),e.display.mover.style.top=i.viewOffset+"px";var p=Yo(e);if(!u&&0==p&&!t.force&&i.renderedView==i.view&&(null==i.updateLineNumbers||i.updateLineNumbers>=i.viewTo))return!1;var f=function(e){if(e.hasFocus())return null;var t=O();if(!t||!M(e.display.lineDiv,t))return null;var i={activeElt:t};if(window.getSelection){var o=window.getSelection();o.anchorNode&&o.extend&&M(e.display.lineDiv,o.anchorNode)&&(i.anchorNode=o.anchorNode,i.anchorOffset=o.anchorOffset,i.focusNode=o.focusNode,i.focusOffset=o.focusOffset)}return i}(e);return 4<p&&(i.lineDiv.style.display="none"),function(e,t,i){var o,n,r,s,l,h=e.display,d=e.options.lineNumbers,c=h.lineDiv,u=c.firstChild;function p(t){var i=t.nextSibling;return a&&b&&e.display.currentWheelTarget==t?t.style.display="none":t.parentNode.removeChild(t),i}for(var f=h.view,m=h.viewFrom,g=0;g<f.length;g++){var v=f[g];if(v.hidden);else if(v.node&&v.node.parentNode==c){for(;u!=v.node;)u=p(u);var _=d&&null!=t&&t<=m&&v.lineNumber;v.changes&&(-1<W(v.changes,"gutter")&&(_=!1),si(e,v,m,i)),_&&(D(v.lineNumber),v.lineNumber.appendChild(document.createTextNode(pe(e.options,m)))),u=v.node.nextSibling}else{var y=(r=m,s=i,l=ai(o=e,n=v),n.text=n.node=l.pre,l.bgClass&&(n.bgClass=l.bgClass),l.textClass&&(n.textClass=l.textClass),hi(o,n),di(o,n,r,s),ui(o,n,s),n.node);c.insertBefore(y,u)}m+=v.size}for(;u;)u=p(u)}(e,i.updateLineNumbers,t.dims),4<p&&(i.lineDiv.style.display=""),i.renderedView=i.view,function(e){if(e&&e.activeElt&&e.activeElt!=O()&&(e.activeElt.focus(),e.anchorNode&&M(document.body,e.anchorNode)&&M(document.body,e.focusNode))){var t=window.getSelection(),i=document.createRange();i.setEnd(e.anchorNode,e.anchorOffset),i.collapse(!1),t.removeAllRanges(),t.addRange(i),t.extend(e.focusNode,e.focusOffset)}}(f),D(i.cursorDiv),D(i.selectionDiv),i.gutters.style.height=i.sizer.style.minHeight=0,u&&(i.lastWrapHeight=t.wrapperHeight,i.lastWrapWidth=t.wrapperWidth,Go(e,400)),!(i.updateLineNumbers=null)}function Jo(e,t){for(var i=t.viewport,o=!0;(o&&e.options.lineWrapping&&t.oldDisplayWidth!=wi(e)||(i&&null!=i.top&&(i={top:Math.min(e.doc.height+bi(e.display)-xi(e),i.top)}),t.visible=go(e.display,e.doc,i),!(t.visible.from>=e.display.viewFrom&&t.visible.to<=e.display.viewTo)))&&Qo(e,t);o=!1){fo(e);var n=Lo(e);oo(e),Mo(e,n),on(e,n),t.force=!1}t.signal(e,"update",e),e.display.viewFrom==e.display.reportedViewFrom&&e.display.viewTo==e.display.reportedViewTo||(t.signal(e,"viewportChange",e,e.display.viewFrom,e.display.viewTo),e.display.reportedViewFrom=e.display.viewFrom,e.display.reportedViewTo=e.display.viewTo)}function en(e,t){var i=new Zo(e,t);if(Qo(e,i)){fo(e),Jo(e,i);var o=Lo(e);oo(e),Mo(e,o),on(e,o),i.finish()}}function tn(e){var t=e.display.gutters.offsetWidth;e.display.sizer.style.marginLeft=t+"px"}function on(e,t){e.display.sizer.style.minHeight=t.docHeight+"px",e.display.heightForcer.style.top=t.docHeight+"px",e.display.gutters.style.height=t.docHeight+e.display.barHeight+yi(e)+"px"}function nn(e){var t=e.display.gutters,i=e.options.gutters;D(t);for(var o=0;o<i.length;++o){var n=i[o],r=t.appendChild(z("div",null,"CodeMirror-gutter "+n));"CodeMirror-linenumbers"==n&&((e.display.lineGutter=r).style.width=(e.display.lineNumWidth||1)+"px")}t.style.display=o?"":"none",tn(e)}function rn(e){var t=W(e.gutters,"CodeMirror-linenumbers");-1==t&&e.lineNumbers?e.gutters=e.gutters.concat(["CodeMirror-linenumbers"]):-1<t&&!e.lineNumbers&&(e.gutters=e.gutters.slice(0),e.gutters.splice(t,1))}Zo.prototype.signal=function(e,t){rt(e,t)&&this.events.push(arguments)},Zo.prototype.finish=function(){for(var e=0;e<this.events.length;e++)it.apply(null,this.events[e])};var sn=0,ln=null;function an(e){var t=e.wheelDeltaX,i=e.wheelDeltaY;return null==t&&e.detail&&e.axis==e.HORIZONTAL_AXIS&&(t=e.detail),null==i&&e.detail&&e.axis==e.VERTICAL_AXIS?i=e.detail:null==i&&(i=e.wheelDelta),{x:t,y:i}}function hn(e,t){var o=an(t),n=o.x,r=o.y,s=e.display,l=s.scroller,h=l.scrollWidth>l.clientWidth,d=l.scrollHeight>l.clientHeight;if(n&&h||r&&d){if(r&&b&&a)e:for(var u=t.target,p=s.view;u!=l;u=u.parentNode)for(var f=0;f<p.length;f++)if(p[f].node==u){e.display.currentWheelTarget=u;break e}if(n&&!i&&!c&&null!=ln)return r&&d&&To(e,Math.max(0,l.scrollTop+r*ln)),Do(e,Math.max(0,l.scrollLeft+n*ln)),(!r||r&&d)&&lt(t),void(s.wheelStartX=null);if(r&&null!=ln){var m=r*ln,g=e.doc.scrollTop,v=g+s.wrapper.clientHeight;m<0?g=Math.max(0,g+m-50):v=Math.min(e.doc.height,v+m+50),en(e,{top:g,bottom:v})}sn<20&&(null==s.wheelStartX?(s.wheelStartX=l.scrollLeft,s.wheelStartY=l.scrollTop,s.wheelDX=n,s.wheelDY=r,setTimeout(function(){if(null!=s.wheelStartX){var e=l.scrollLeft-s.wheelStartX,t=l.scrollTop-s.wheelStartY,i=t&&s.wheelDY&&t/s.wheelDY||e&&s.wheelDX&&e/s.wheelDX;s.wheelStartX=s.wheelStartY=null,i&&(ln=(ln*sn+i)/(sn+1),++sn)}},200)):(s.wheelDX+=n,s.wheelDY+=r))}}s?ln=-.53:i?ln=15:d?ln=-.7:u&&(ln=-1/3);var dn=function(e,t){this.ranges=e,this.primIndex=t};dn.prototype.primary=function(){return this.ranges[this.primIndex]},dn.prototype.equals=function(e){if(e==this)return!0;if(e.primIndex!=this.primIndex||e.ranges.length!=this.ranges.length)return!1;for(var t=0;t<this.ranges.length;t++){var i=this.ranges[t],o=e.ranges[t];if(!ge(i.anchor,o.anchor)||!ge(i.head,o.head))return!1}return!0},dn.prototype.deepCopy=function(){for(var e=[],t=0;t<this.ranges.length;t++)e[t]=new cn(ve(this.ranges[t].anchor),ve(this.ranges[t].head));return new dn(e,this.primIndex)},dn.prototype.somethingSelected=function(){for(var e=0;e<this.ranges.length;e++)if(!this.ranges[e].empty())return!0;return!1},dn.prototype.contains=function(e,t){t||(t=e);for(var i=0;i<this.ranges.length;i++){var o=this.ranges[i];if(0<=me(t,o.from())&&me(e,o.to())<=0)return i}return-1};var cn=function(e,t){this.anchor=e,this.head=t};function un(e,t,i){var o=e&&e.options.selectionsMayTouch,n=t[i];t.sort(function(e,t){return me(e.from(),t.from())}),i=W(t,n);for(var r=1;r<t.length;r++){var s=t[r],l=t[r-1],a=me(l.to(),s.from());if(o&&!s.empty()?0<a:0<=a){var h=_e(l.from(),s.from()),d=be(l.to(),s.to()),c=l.empty()?s.from()==s.head:l.from()==l.head;r<=i&&--i,t.splice(--r,2,new cn(c?d:h,c?h:d))}}return new dn(t,i)}function pn(e,t){return new dn([new cn(e,t||e)],0)}function fn(e){return e.text?fe(e.from.line+e.text.length-1,Y(e.text).length+(1==e.text.length?e.from.ch:0)):e.to}function mn(e,t){if(me(e,t.from)<0)return e;if(me(e,t.to)<=0)return fn(t);var i=e.line+t.text.length-(t.to.line-t.from.line)-1,o=e.ch;return e.line==t.to.line&&(o+=fn(t).ch-t.to.ch),fe(i,o)}function gn(e,t){for(var i=[],o=0;o<e.sel.ranges.length;o++){var n=e.sel.ranges[o];i.push(new cn(mn(n.anchor,t),mn(n.head,t)))}return un(e.cm,i,e.sel.primIndex)}function vn(e,t,i){return e.line==t.line?fe(i.line,e.ch-t.ch+i.ch):fe(i.line+(e.line-t.line),e.ch)}function bn(e){e.doc.mode=kt(e.options,e.doc.modeOption),_n(e)}function _n(e){e.doc.iter(function(e){e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null)}),e.doc.modeFrontier=e.doc.highlightFrontier=e.doc.first,Go(e,100),e.state.modeGen++,e.curOp&&$o(e)}function yn(e,t){return 0==t.from.ch&&0==t.to.ch&&""==Y(t.text)&&(!e.cm||e.cm.options.wholeLineUpdateBefore)}function wn(e,t,i,o){function n(e){return i?i[e]:null}function r(e,i,n){!function(e,t,i,o){e.text=t,e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null),null!=e.order&&(e.order=null),Ae(e),Me(e,i);var n=o?o(e):1;n!=e.height&&he(e,n)}(e,i,n,o),ni(e,"change",e,t)}function s(e,t){for(var i=[],r=e;r<t;++r)i.push(new $t(h[r],n(r),o));return i}var l=t.from,a=t.to,h=t.text,d=se(e,l.line),c=se(e,a.line),u=Y(h),p=n(h.length-1),f=a.line-l.line;if(t.full)e.insert(0,s(0,h.length)),e.remove(h.length,e.size-h.length);else if(yn(e,t)){var m=s(0,h.length-1);r(c,c.text,p),f&&e.remove(l.line,f),m.length&&e.insert(l.line,m)}else if(d==c)if(1==h.length)r(d,d.text.slice(0,l.ch)+u+d.text.slice(a.ch),p);else{var g=s(1,h.length-1);g.push(new $t(u+d.text.slice(a.ch),p,o)),r(d,d.text.slice(0,l.ch)+h[0],n(0)),e.insert(l.line+1,g)}else if(1==h.length)r(d,d.text.slice(0,l.ch)+h[0]+c.text.slice(a.ch),n(0)),e.remove(l.line+1,f);else{r(d,d.text.slice(0,l.ch)+h[0],n(0)),r(c,u+c.text.slice(a.ch),p);var v=s(1,h.length-1);1<f&&e.remove(l.line+1,f-1),e.insert(l.line+1,v)}ni(e,"change",e,t)}function xn(e,t,i){!function e(o,n,r){if(o.linked)for(var s=0;s<o.linked.length;++s){var l=o.linked[s];if(l.doc!=n){var a=r&&l.sharedHist;i&&!a||(t(l.doc,a),e(l.doc,o,a))}}}(e,null,!0)}function Sn(e,t){if(t.cm)throw new Error("This document is already in use.");eo((e.doc=t).cm=e),bn(e),Cn(e),e.options.lineWrapping||Xe(e),e.options.mode=t.modeOption,$o(e)}function Cn(e){("rtl"==e.doc.direction?j:k)(e.display.lineDiv,"CodeMirror-rtl")}function Tn(e){this.done=[],this.undone=[],this.undoDepth=1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=e||1}function kn(e,t){var i={from:ve(t.from),to:fn(t),text:le(e,t.from,t.to)};return An(e,i,t.from.line,t.to.line+1),xn(e,function(e){return An(e,i,t.from.line,t.to.line+1)},!0),i}function Dn(e){for(;e.length&&Y(e).ranges;)e.pop()}function Ln(e,t,i,o){var n=e.history;n.undone.length=0;var r,s,l,a=+new Date;if((n.lastOp==o||n.lastOrigin==t.origin&&t.origin&&("+"==t.origin.charAt(0)&&n.lastModTime>a-(e.cm?e.cm.options.historyEventDelay:500)||"*"==t.origin.charAt(0)))&&(r=(l=n).lastOp==o?(Dn(l.done),Y(l.done)):l.done.length&&!Y(l.done).ranges?Y(l.done):1<l.done.length&&!l.done[l.done.length-2].ranges?(l.done.pop(),Y(l.done)):void 0))s=Y(r.changes),0==me(t.from,t.to)&&0==me(t.from,s.to)?s.to=fn(t):r.changes.push(kn(e,t));else{var h=Y(n.done);for(h&&h.ranges||zn(e.sel,n.done),r={changes:[kn(e,t)],generation:n.generation},n.done.push(r);n.done.length>n.undoDepth;)n.done.shift(),n.done[0].ranges||n.done.shift()}n.done.push(i),n.generation=++n.maxGeneration,n.lastModTime=n.lastSelTime=a,n.lastOp=n.lastSelOp=o,n.lastOrigin=n.lastSelOrigin=t.origin,s||it(e,"historyAdded")}function zn(e,t){var i=Y(t);i&&i.ranges&&i.equals(e)||t.push(e)}function An(e,t,i,o){var n=t["spans_"+e.id],r=0;e.iter(Math.max(e.first,i),Math.min(e.first+e.size,o),function(i){i.markedSpans&&((n||(n=t["spans_"+e.id]={}))[r]=i.markedSpans),++r})}function Mn(e){if(!e)return null;for(var t,i=0;i<e.length;++i)e[i].marker.explicitlyCleared?t||(t=e.slice(0,i)):t&&t.push(e[i]);return t?t.length?t:null:e}function On(e,t){var i=function(t,i){var o=i["spans_"+e.id];if(!o)return null;for(var n=[],r=0;r<i.text.length;++r)n.push(Mn(o[r]));return n}(0,t),o=Le(e,t);if(!i)return o;if(!o)return i;for(var n=0;n<i.length;++n){var r=i[n],s=o[n];if(r&&s)e:for(var l=0;l<s.length;++l){for(var a=s[l],h=0;h<r.length;++h)if(r[h].marker==a.marker)continue e;r.push(a)}else s&&(i[n]=s)}return i}function jn(e,t,i){for(var o=[],n=0;n<e.length;++n){var r=e[n];if(r.ranges)o.push(i?dn.prototype.deepCopy.call(r):r);else{var s=r.changes,l=[];o.push({changes:l});for(var a=0;a<s.length;++a){var h=s[a],d=void 0;if(l.push({from:h.from,to:h.to,text:h.text}),t)for(var c in h)(d=c.match(/^spans_(\d+)$/))&&-1<W(t,Number(d[1]))&&(Y(l)[c]=h[c],delete h[c])}}}return o}function En(e,t,i,o){if(o){var n=e.anchor;if(i){var r=me(t,n)<0;r!=me(i,n)<0?(n=t,t=i):r!=me(t,i)<0&&(t=i)}return new cn(n,t)}return new cn(i||t,t)}function Nn(e,t,i,o,n){null==n&&(n=e.cm&&(e.cm.display.shift||e.extend)),Wn(e,new dn([En(e.sel.primary(),t,i,n)],0),o)}function Pn(e,t,i){for(var o=[],n=e.cm&&(e.cm.display.shift||e.extend),r=0;r<e.sel.ranges.length;r++)o[r]=En(e.sel.ranges[r],t[r],null,n);Wn(e,un(e.cm,o,e.sel.primIndex),i)}function Fn(e,t,i,o){var n=e.sel.ranges.slice(0);n[t]=i,Wn(e,un(e.cm,n,e.sel.primIndex),o)}function In(e,t,i,o){Wn(e,pn(t,i),o)}function Hn(e,t,i){var o=e.history.done,n=Y(o);n&&n.ranges?Rn(e,o[o.length-1]=t,i):Wn(e,t,i)}function Wn(e,t,i){var o,n,r,s,l,a,h,d,c,u,p;Rn(e,t,i),o=e,n=e.sel,r=e.cm?e.cm.curOp.id:NaN,s=i,u=o.history,p=s&&s.origin,r==u.lastSelOp||p&&u.lastSelOrigin==p&&(u.lastModTime==u.lastSelTime&&u.lastOrigin==p||(l=o,a=p,h=Y(u.done),d=n,"*"==(c=a.charAt(0))||"+"==c&&h.ranges.length==d.ranges.length&&h.somethingSelected()==d.somethingSelected()&&new Date-l.history.lastSelTime<=(l.cm?l.cm.options.historyEventDelay:500)))?u.done[u.done.length-1]=n:zn(n,u.done),u.lastSelTime=+new Date,u.lastSelOrigin=p,u.lastSelOp=r,s&&!1!==s.clearRedo&&Dn(u.undone)}function Rn(e,t,i){var o,n,r,s;(rt(e,"beforeSelectionChange")||e.cm&&rt(e.cm,"beforeSelectionChange"))&&(o=e,r=i,s={ranges:(n=t).ranges,update:function(e){this.ranges=[];for(var t=0;t<e.length;t++)this.ranges[t]=new cn(we(o,e[t].anchor),we(o,e[t].head))},origin:r&&r.origin},it(o,"beforeSelectionChange",o,s),o.cm&&it(o.cm,"beforeSelectionChange",o.cm,s),t=s.ranges!=n.ranges?un(o.cm,s.ranges,s.ranges.length-1):n),Un(e,$n(e,t,i&&i.bias||(me(t.primary().head,e.sel.primary().head)<0?-1:1),!0)),i&&!1===i.scroll||!e.cm||wo(e.cm)}function Un(e,t){t.equals(e.sel)||(e.sel=t,e.cm&&(e.cm.curOp.updateInput=e.cm.curOp.selectionChanged=!0,nt(e.cm)),ni(e,"cursorActivity",e))}function Bn(e){Un(e,$n(e,e.sel,null,!1))}function $n(e,t,i,o){for(var n,r=0;r<t.ranges.length;r++){var s=t.ranges[r],l=t.ranges.length==e.sel.ranges.length&&e.sel.ranges[r],a=qn(e,s.anchor,l&&l.anchor,i,o),h=qn(e,s.head,l&&l.head,i,o);(n||a!=s.anchor||h!=s.head)&&(n||(n=t.ranges.slice(0,r)),n[r]=new cn(a,h))}return n?un(e.cm,n,t.primIndex):t}function Vn(e,t,i,o,n){var r=se(e,t.line);if(r.markedSpans)for(var s=0;s<r.markedSpans.length;++s){var l=r.markedSpans[s],a=l.marker;if((null==l.from||(a.inclusiveLeft?l.from<=t.ch:l.from<t.ch))&&(null==l.to||(a.inclusiveRight?l.to>=t.ch:l.to>t.ch))){if(n&&(it(a,"beforeCursorEnter"),a.explicitlyCleared)){if(r.markedSpans){--s;continue}break}if(!a.atomic)continue;if(i){var h=a.find(o<0?1:-1),d=void 0;if((o<0?a.inclusiveRight:a.inclusiveLeft)&&(h=Xn(e,h,-o,h&&h.line==t.line?r:null)),h&&h.line==t.line&&(d=me(h,i))&&(o<0?d<0:0<d))return Vn(e,h,t,o,n)}var c=a.find(o<0?-1:1);return(o<0?a.inclusiveLeft:a.inclusiveRight)&&(c=Xn(e,c,o,c.line==t.line?r:null)),c?Vn(e,c,t,o,n):null}}return t}function qn(e,t,i,o,n){var r=o||1;return Vn(e,t,i,r,n)||!n&&Vn(e,t,i,r,!0)||Vn(e,t,i,-r,n)||!n&&Vn(e,t,i,-r,!0)||(e.cantEdit=!0,fe(e.first,0))}function Xn(e,t,i,o){return i<0&&0==t.ch?t.line>e.first?we(e,fe(t.line-1)):null:0<i&&t.ch==(o||se(e,t.line)).text.length?t.line<e.first+e.size-1?fe(t.line+1,0):null:new fe(t.line,t.ch+i)}function Yn(e){e.setSelection(fe(e.firstLine(),0),fe(e.lastLine()),U)}function Gn(e,t,i){var o={canceled:!1,from:t.from,to:t.to,text:t.text,origin:t.origin,cancel:function(){return o.canceled=!0}};return i&&(o.update=function(t,i,n,r){t&&(o.from=we(e,t)),i&&(o.to=we(e,i)),n&&(o.text=n),void 0!==r&&(o.origin=r)}),it(e,"beforeChange",e,o),e.cm&&it(e.cm,"beforeChange",e.cm,o),o.canceled?null:{from:o.from,to:o.to,text:o.text,origin:o.origin}}function Kn(e,t,i){if(e.cm){if(!e.cm.curOp)return Ro(e.cm,Kn)(e,t,i);if(e.cm.state.suppressEdits)return}if(!(rt(e,"beforeChange")||e.cm&&rt(e.cm,"beforeChange"))||(t=Gn(e,t,!0))){var o=Se&&!i&&function(e,t,i){var o=null;if(e.iter(t.line,i.line+1,function(e){if(e.markedSpans)for(var t=0;t<e.markedSpans.length;++t){var i=e.markedSpans[t].marker;!i.readOnly||o&&-1!=W(o,i)||(o||(o=[])).push(i)}}),!o)return null;for(var n=[{from:t,to:i}],r=0;r<o.length;++r)for(var s=o[r],l=s.find(0),a=0;a<n.length;++a){var h=n[a];if(!(me(h.to,l.from)<0||0<me(h.from,l.to))){var d=[a,1],c=me(h.from,l.from),u=me(h.to,l.to);(c<0||!s.inclusiveLeft&&!c)&&d.push({from:h.from,to:l.from}),(0<u||!s.inclusiveRight&&!u)&&d.push({from:l.to,to:h.to}),n.splice.apply(n,d),a+=d.length-3}}return n}(e,t.from,t.to);if(o)for(var n=o.length-1;0<=n;--n)Zn(e,{from:o[n].from,to:o[n].to,text:n?[""]:t.text,origin:t.origin});else Zn(e,t)}}function Zn(e,t){if(1!=t.text.length||""!=t.text[0]||0!=me(t.from,t.to)){var i=gn(e,t);Ln(e,t,i,e.cm?e.cm.curOp.id:NaN),er(e,t,i,Le(e,t));var o=[];xn(e,function(e,i){i||-1!=W(o,e.history)||(nr(e.history,t),o.push(e.history)),er(e,t,null,Le(e,t))})}}function Qn(e,t,i){var o=e.cm&&e.cm.state.suppressEdits;if(!o||i){for(var n,r=e.history,s=e.sel,l="undo"==t?r.done:r.undone,a="undo"==t?r.undone:r.done,h=0;h<l.length&&(n=l[h],i?!n.ranges||n.equals(e.sel):n.ranges);h++);if(h!=l.length){for(r.lastOrigin=r.lastSelOrigin=null;;){if(!(n=l.pop()).ranges){if(o)return void l.push(n);break}if(zn(n,a),i&&!n.equals(e.sel))return void Wn(e,n,{clearRedo:!1});s=n}var d=[];zn(s,a),a.push({changes:d,generation:r.generation}),r.generation=n.generation||++r.maxGeneration;for(var c=rt(e,"beforeChange")||e.cm&&rt(e.cm,"beforeChange"),u=function(i){var o=n.changes[i];if(o.origin=t,c&&!Gn(e,o,!1))return l.length=0,{};d.push(kn(e,o));var r=i?gn(e,o):Y(l);er(e,o,r,On(e,o)),!i&&e.cm&&e.cm.scrollIntoView({from:o.from,to:fn(o)});var s=[];xn(e,function(e,t){t||-1!=W(s,e.history)||(nr(e.history,o),s.push(e.history)),er(e,o,null,On(e,o))})},p=n.changes.length-1;0<=p;--p){var f=u(p);if(f)return f.v}}}}function Jn(e,t){if(0!=t&&(e.first+=t,e.sel=new dn(G(e.sel.ranges,function(e){return new cn(fe(e.anchor.line+t,e.anchor.ch),fe(e.head.line+t,e.head.ch))}),e.sel.primIndex),e.cm)){$o(e.cm,e.first,e.first-t,t);for(var i=e.cm.display,o=i.viewFrom;o<i.viewTo;o++)Vo(e.cm,o,"gutter")}}function er(e,t,i,o){if(e.cm&&!e.cm.curOp)return Ro(e.cm,er)(e,t,i,o);if(t.to.line<e.first)Jn(e,t.text.length-1-(t.to.line-t.from.line));else if(!(t.from.line>e.lastLine())){if(t.from.line<e.first){var n=t.text.length-1-(e.first-t.from.line);Jn(e,n),t={from:fe(e.first,0),to:fe(t.to.line+n,t.to.ch),text:[Y(t.text)],origin:t.origin}}var r=e.lastLine();t.to.line>r&&(t={from:t.from,to:fe(r,se(e,r).text.length),text:[t.text[0]],origin:t.origin}),t.removed=le(e,t.from,t.to),i||(i=gn(e,t)),e.cm?function(e,t,i){var o=e.doc,n=e.display,r=t.from,s=t.to,l=!1,a=r.line;e.options.lineWrapping||(a=de(We(se(o,r.line))),o.iter(a,s.line+1,function(e){if(e==n.maxLine)return l=!0})),-1<o.sel.contains(t.from,t.to)&&nt(e),wn(o,t,i,Ji(e)),e.options.lineWrapping||(o.iter(a,r.line+t.text.length,function(e){var t=qe(e);t>n.maxLineLength&&(n.maxLine=e,n.maxLineLength=t,n.maxLineChanged=!0,l=!1)}),l&&(e.curOp.updateMaxLine=!0)),function(e,t){if(e.modeFrontier=Math.min(e.modeFrontier,t),!(e.highlightFrontier<t-10)){for(var i=e.first,o=t-1;i<o;o--){var n=se(e,o).stateAfter;if(n&&(!(n instanceof Ot)||o+n.lookAhead<t)){i=o+1;break}}e.highlightFrontier=Math.min(e.highlightFrontier,i)}}(o,r.line),Go(e,400);var h=t.text.length-(s.line-r.line)-1;t.full?$o(e):r.line!=s.line||1!=t.text.length||yn(e.doc,t)?$o(e,r.line,s.line+1,h):Vo(e,r.line,"text");var d=rt(e,"changes"),c=rt(e,"change");if(c||d){var u={from:r,to:s,text:t.text,removed:t.removed,origin:t.origin};c&&ni(e,"change",e,u),d&&(e.curOp.changeObjs||(e.curOp.changeObjs=[])).push(u)}e.display.selForContextMenu=null}(e.cm,t,o):wn(e,t,o),Rn(e,i,U)}}function tr(e,t,i,o,n){var r;o||(o=i),me(o,i)<0&&(i=(r=[o,i])[0],o=r[1]),"string"==typeof t&&(t=e.splitLines(t)),Kn(e,{from:i,to:o,text:t,origin:n})}function ir(e,t,i,o){i<e.line?e.line+=o:t<e.line&&(e.line=t,e.ch=0)}function or(e,t,i,o){for(var n=0;n<e.length;++n){var r=e[n],s=!0;if(r.ranges){r.copied||((r=e[n]=r.deepCopy()).copied=!0);for(var l=0;l<r.ranges.length;l++)ir(r.ranges[l].anchor,t,i,o),ir(r.ranges[l].head,t,i,o)}else{for(var a=0;a<r.changes.length;++a){var h=r.changes[a];if(i<h.from.line)h.from=fe(h.from.line+o,h.from.ch),h.to=fe(h.to.line+o,h.to.ch);else if(t<=h.to.line){s=!1;break}}s||(e.splice(0,n+1),n=0)}}}function nr(e,t){var i=t.from.line,o=t.to.line,n=t.text.length-(o-i)-1;or(e.done,i,o,n),or(e.undone,i,o,n)}function rr(e,t,i,o){var n=t,r=t;return"number"==typeof t?r=se(e,ye(e,t)):n=de(t),null==n?null:(o(r,n)&&e.cm&&Vo(e.cm,n,i),r)}function sr(e){this.lines=e,this.parent=null;for(var t=0,i=0;i<e.length;++i)e[i].parent=this,t+=e[i].height;this.height=t}function lr(e){this.children=e;for(var t=0,i=0,o=0;o<e.length;++o){var n=e[o];t+=n.chunkSize(),i+=n.height,n.parent=this}this.size=t,this.height=i,this.parent=null}cn.prototype.from=function(){return _e(this.anchor,this.head)},cn.prototype.to=function(){return be(this.anchor,this.head)},cn.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch},sr.prototype={chunkSize:function(){return this.lines.length},removeInner:function(e,t){for(var i,o=e,n=e+t;o<n;++o){var r=this.lines[o];this.height-=r.height,(i=r).parent=null,Ae(i),ni(r,"delete")}this.lines.splice(e,t)},collapse:function(e){e.push.apply(e,this.lines)},insertInner:function(e,t,i){this.height+=i,this.lines=this.lines.slice(0,e).concat(t).concat(this.lines.slice(e));for(var o=0;o<t.length;++o)t[o].parent=this},iterN:function(e,t,i){for(var o=e+t;e<o;++e)if(i(this.lines[e]))return!0}},lr.prototype={chunkSize:function(){return this.size},removeInner:function(e,t){this.size-=t;for(var i=0;i<this.children.length;++i){var o=this.children[i],n=o.chunkSize();if(e<n){var r=Math.min(t,n-e),s=o.height;if(o.removeInner(e,r),this.height-=s-o.height,n==r&&(this.children.splice(i--,1),o.parent=null),0==(t-=r))break;e=0}else e-=n}if(this.size-t<25&&(1<this.children.length||!(this.children[0]instanceof sr))){var l=[];this.collapse(l),this.children=[new sr(l)],this.children[0].parent=this}},collapse:function(e){for(var t=0;t<this.children.length;++t)this.children[t].collapse(e)},insertInner:function(e,t,i){this.size+=t.length,this.height+=i;for(var o=0;o<this.children.length;++o){var n=this.children[o],r=n.chunkSize();if(e<=r){if(n.insertInner(e,t,i),n.lines&&50<n.lines.length){for(var s=n.lines.length%25+25,l=s;l<n.lines.length;){var a=new sr(n.lines.slice(l,l+=25));n.height-=a.height,this.children.splice(++o,0,a),a.parent=this}n.lines=n.lines.slice(0,s),this.maybeSpill()}break}e-=r}},maybeSpill:function(){if(!(this.children.length<=10)){var e=this;do{var t=new lr(e.children.splice(e.children.length-5,5));if(e.parent){e.size-=t.size,e.height-=t.height;var i=W(e.parent.children,e);e.parent.children.splice(i+1,0,t)}else{var o=new lr(e.children);(o.parent=e).children=[o,t],e=o}t.parent=e.parent}while(10<e.children.length);e.parent.maybeSpill()}},iterN:function(e,t,i){for(var o=0;o<this.children.length;++o){var n=this.children[o],r=n.chunkSize();if(e<r){var s=Math.min(t,r-e);if(n.iterN(e,s,i))return!0;if(0==(t-=s))break;e=0}else e-=r}}};var ar=function(e,t,i){if(i)for(var o in i)i.hasOwnProperty(o)&&(this[o]=i[o]);this.doc=e,this.node=t};function hr(e,t,i){Ve(t)<(e.curOp&&e.curOp.scrollTop||e.doc.scrollTop)&&yo(e,i)}ar.prototype.clear=function(){var e=this.doc.cm,t=this.line.widgets,i=this.line,o=de(i);if(null!=o&&t){for(var n=0;n<t.length;++n)t[n]==this&&t.splice(n--,1);t.length||(i.widgets=null);var r=mi(this);he(i,Math.max(0,i.height-r)),e&&(Wo(e,function(){hr(e,i,-r),Vo(e,o,"widget")}),ni(e,"lineWidgetCleared",e,this,o))}},ar.prototype.changed=function(){var e=this,t=this.height,i=this.doc.cm,o=this.line;this.height=null;var n=mi(this)-t;n&&(Be(this.doc,o)||he(o,o.height+n),i&&Wo(i,function(){i.curOp.forceUpdate=!0,hr(i,o,n),ni(i,"lineWidgetChanged",i,e,de(o))}))},st(ar);var dr=0,cr=function(e,t){this.lines=[],this.type=t,this.doc=e,this.id=++dr};function ur(e,t,i,o,n){if(o&&o.shared)return function(e,t,i,o,n){(o=F(o)).shared=!1;var r=[ur(e,t,i,o,n)],s=r[0],l=o.widgetNode;return xn(e,function(e){l&&(o.widgetNode=l.cloneNode(!0)),r.push(ur(e,we(e,t),we(e,i),o,n));for(var a=0;a<e.linked.length;++a)if(e.linked[a].isParent)return;s=Y(r)}),new pr(r,s)}(e,t,i,o,n);if(e.cm&&!e.cm.curOp)return Ro(e.cm,ur)(e,t,i,o,n);var r=new cr(e,n),s=me(t,i);if(o&&F(o,r,!1),0<s||0==s&&!1!==r.clearWhenEmpty)return r;if(r.replacedWith&&(r.collapsed=!0,r.widgetNode=A("span",[r.replacedWith],"CodeMirror-widget"),o.handleMouseEvents||r.widgetNode.setAttribute("cm-ignore-events","true"),o.insertLeft&&(r.widgetNode.insertLeft=!0)),r.collapsed){if(He(e,t.line,t,i,r)||t.line!=i.line&&He(e,i.line,t,i,r))throw new Error("Inserting collapsed marker partially overlapping an existing one");Ce=!0}r.addToHistory&&Ln(e,{from:t,to:i,origin:"markText"},e.sel,NaN);var l,a=t.line,h=e.cm;if(e.iter(a,i.line+1,function(e){var o,n;h&&r.collapsed&&!h.options.lineWrapping&&We(e)==h.display.maxLine&&(l=!0),r.collapsed&&a!=t.line&&he(e,0),o=e,n=new Te(r,a==t.line?t.ch:null,a==i.line?i.ch:null),o.markedSpans=o.markedSpans?o.markedSpans.concat([n]):[n],n.marker.attachLine(o),++a}),r.collapsed&&e.iter(t.line,i.line+1,function(t){Be(e,t)&&he(t,0)}),r.clearOnEnter&&Je(r,"beforeCursorEnter",function(){return r.clear()}),r.readOnly&&(Se=!0,(e.history.done.length||e.history.undone.length)&&e.clearHistory()),r.collapsed&&(r.id=++dr,r.atomic=!0),h){if(l&&(h.curOp.updateMaxLine=!0),r.collapsed)$o(h,t.line,i.line+1);else if(r.className||r.title||r.startStyle||r.endStyle||r.css)for(var d=t.line;d<=i.line;d++)Vo(h,d,"text");r.atomic&&Bn(h.doc),ni(h,"markerAdded",h,r)}return r}cr.prototype.clear=function(){var e=this;if(!this.explicitlyCleared){var t=this.doc.cm,i=t&&!t.curOp;if(i&&Po(t),rt(this,"clear")){var o=this.find();o&&ni(this,"clear",o.from,o.to)}for(var n=null,r=null,s=0;s<this.lines.length;++s){var l=e.lines[s],a=ke(l.markedSpans,e);t&&!e.collapsed?Vo(t,de(l),"text"):t&&(null!=a.to&&(r=de(l)),null!=a.from&&(n=de(l))),l.markedSpans=De(l.markedSpans,a),null==a.from&&e.collapsed&&!Be(e.doc,l)&&t&&he(l,Gi(t.display))}if(t&&this.collapsed&&!t.options.lineWrapping)for(var h=0;h<this.lines.length;++h){var d=We(e.lines[h]),c=qe(d);c>t.display.maxLineLength&&(t.display.maxLine=d,t.display.maxLineLength=c,t.display.maxLineChanged=!0)}null!=n&&t&&this.collapsed&&$o(t,n,r+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,t&&Bn(t.doc)),t&&ni(t,"markerCleared",t,this,n,r),i&&Fo(t),this.parent&&this.parent.clear()}},cr.prototype.find=function(e,t){var i,o;null==e&&"bookmark"==this.type&&(e=1);for(var n=0;n<this.lines.length;++n){var r=this.lines[n],s=ke(r.markedSpans,this);if(null!=s.from&&(i=fe(t?r:de(r),s.from),-1==e))return i;if(null!=s.to&&(o=fe(t?r:de(r),s.to),1==e))return o}return i&&{from:i,to:o}},cr.prototype.changed=function(){var e=this,t=this.find(-1,!0),i=this,o=this.doc.cm;t&&o&&Wo(o,function(){var n=t.line,r=de(t.line),s=Ti(o,r);if(s&&(Oi(s),o.curOp.selectionChanged=o.curOp.forceUpdate=!0),o.curOp.updateMaxLine=!0,!Be(i.doc,n)&&null!=i.height){var l=i.height;i.height=null;var a=mi(i)-l;a&&he(n,n.height+a)}ni(o,"markerChanged",o,e)})},cr.prototype.attachLine=function(e){if(!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;t.maybeHiddenMarkers&&-1!=W(t.maybeHiddenMarkers,this)||(t.maybeUnhiddenMarkers||(t.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(e)},cr.prototype.detachLine=function(e){if(this.lines.splice(W(this.lines,e),1),!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(t.maybeHiddenMarkers||(t.maybeHiddenMarkers=[])).push(this)}},st(cr);var pr=function(e,t){this.markers=e,this.primary=t;for(var i=0;i<e.length;++i)e[i].parent=this};function fr(e){return e.findMarks(fe(e.first,0),e.clipPos(fe(e.lastLine())),function(e){return e.parent})}function mr(e){for(var t=function(t){var i=e[t],o=[i.primary.doc];xn(i.primary.doc,function(e){return o.push(e)});for(var n=0;n<i.markers.length;n++){var r=i.markers[n];-1==W(o,r.doc)&&(r.parent=null,i.markers.splice(n--,1))}},i=0;i<e.length;i++)t(i)}pr.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var e=0;e<this.markers.length;++e)this.markers[e].clear();ni(this,"clear")}},pr.prototype.find=function(e,t){return this.primary.find(e,t)},st(pr);var gr=0,vr=function(e,t,i,o,n){if(!(this instanceof vr))return new vr(e,t,i,o,n);null==i&&(i=0),lr.call(this,[new sr([new $t("",null)])]),this.first=i,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=i;var r=fe(i,0);this.sel=pn(r),this.history=new Tn(null),this.id=++gr,this.modeOption=t,this.lineSep=o,this.direction="rtl"==n?"rtl":"ltr",this.extend=!1,"string"==typeof e&&(e=this.splitLines(e)),wn(this,{from:r,to:r,text:e}),Wn(this,pn(r),U)};vr.prototype=Z(lr.prototype,{constructor:vr,iter:function(e,t,i){i?this.iterN(e-this.first,t-e,i):this.iterN(this.first,this.first+this.size,e)},insert:function(e,t){for(var i=0,o=0;o<t.length;++o)i+=t[o].height;this.insertInner(e-this.first,t,i)},remove:function(e,t){this.removeInner(e-this.first,t)},getValue:function(e){var t=ae(this,this.first,this.first+this.size);return!1===e?t:t.join(e||this.lineSeparator())},setValue:Bo(function(e){var t=fe(this.first,0),i=this.first+this.size-1;Kn(this,{from:t,to:fe(i,se(this,i).text.length),text:this.splitLines(e),origin:"setValue",full:!0},!0),this.cm&&xo(this.cm,0,0),Wn(this,pn(t),U)}),replaceRange:function(e,t,i,o){tr(this,e,t=we(this,t),i=i?we(this,i):t,o)},getRange:function(e,t,i){var o=le(this,we(this,e),we(this,t));return!1===i?o:o.join(i||this.lineSeparator())},getLine:function(e){var t=this.getLineHandle(e);return t&&t.text},getLineHandle:function(e){if(ue(this,e))return se(this,e)},getLineNumber:function(e){return de(e)},getLineHandleVisualStart:function(e){return"number"==typeof e&&(e=se(this,e)),We(e)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(e){return we(this,e)},getCursor:function(e){var t=this.sel.primary();return null==e||"head"==e?t.head:"anchor"==e?t.anchor:"end"==e||"to"==e||!1===e?t.to():t.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:Bo(function(e,t,i){In(this,we(this,"number"==typeof e?fe(e,t||0):e),null,i)}),setSelection:Bo(function(e,t,i){In(this,we(this,e),we(this,t||e),i)}),extendSelection:Bo(function(e,t,i){Nn(this,we(this,e),t&&we(this,t),i)}),extendSelections:Bo(function(e,t){Pn(this,xe(this,e),t)}),extendSelectionsBy:Bo(function(e,t){Pn(this,xe(this,G(this.sel.ranges,e)),t)}),setSelections:Bo(function(e,t,i){if(e.length){for(var o=[],n=0;n<e.length;n++)o[n]=new cn(we(this,e[n].anchor),we(this,e[n].head));null==t&&(t=Math.min(e.length-1,this.sel.primIndex)),Wn(this,un(this.cm,o,t),i)}}),addSelection:Bo(function(e,t,i){var o=this.sel.ranges.slice(0);o.push(new cn(we(this,e),we(this,t||e))),Wn(this,un(this.cm,o,o.length-1),i)}),getSelection:function(e){for(var t,i=this.sel.ranges,o=0;o<i.length;o++){var n=le(this,i[o].from(),i[o].to());t=t?t.concat(n):n}return!1===e?t:t.join(e||this.lineSeparator())},getSelections:function(e){for(var t=[],i=this.sel.ranges,o=0;o<i.length;o++){var n=le(this,i[o].from(),i[o].to());!1!==e&&(n=n.join(e||this.lineSeparator())),t[o]=n}return t},replaceSelection:function(e,t,i){for(var o=[],n=0;n<this.sel.ranges.length;n++)o[n]=e;this.replaceSelections(o,t,i||"+input")},replaceSelections:Bo(function(e,t,i){for(var o=[],n=this.sel,r=0;r<n.ranges.length;r++){var s=n.ranges[r];o[r]={from:s.from(),to:s.to(),text:this.splitLines(e[r]),origin:i}}for(var l=t&&"end"!=t&&function(e,t,i){for(var o=[],n=fe(e.first,0),r=n,s=0;s<t.length;s++){var l=t[s],a=vn(l.from,n,r),h=vn(fn(l),n,r);if(n=l.to,r=h,"around"==i){var d=e.sel.ranges[s],c=me(d.head,d.anchor)<0;o[s]=new cn(c?h:a,c?a:h)}else o[s]=new cn(a,a)}return new dn(o,e.sel.primIndex)}(this,o,t),a=o.length-1;0<=a;a--)Kn(this,o[a]);l?Hn(this,l):this.cm&&wo(this.cm)}),undo:Bo(function(){Qn(this,"undo")}),redo:Bo(function(){Qn(this,"redo")}),undoSelection:Bo(function(){Qn(this,"undo",!0)}),redoSelection:Bo(function(){Qn(this,"redo",!0)}),setExtending:function(e){this.extend=e},getExtending:function(){return this.extend},historySize:function(){for(var e=this.history,t=0,i=0,o=0;o<e.done.length;o++)e.done[o].ranges||++t;for(var n=0;n<e.undone.length;n++)e.undone[n].ranges||++i;return{undo:t,redo:i}},clearHistory:function(){this.history=new Tn(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(e){return e&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(e){return this.history.generation==(e||this.cleanGeneration)},getHistory:function(){return{done:jn(this.history.done),undone:jn(this.history.undone)}},setHistory:function(e){var t=this.history=new Tn(this.history.maxGeneration);t.done=jn(e.done.slice(0),null,!0),t.undone=jn(e.undone.slice(0),null,!0)},setGutterMarker:Bo(function(e,t,i){return rr(this,e,"gutter",function(e){var o=e.gutterMarkers||(e.gutterMarkers={});return!(o[t]=i)&&te(o)&&(e.gutterMarkers=null),!0})}),clearGutter:Bo(function(e){var t=this;this.iter(function(i){i.gutterMarkers&&i.gutterMarkers[e]&&rr(t,i,"gutter",function(){return i.gutterMarkers[e]=null,te(i.gutterMarkers)&&(i.gutterMarkers=null),!0})})}),lineInfo:function(e){var t;if("number"==typeof e){if(!ue(this,e))return null;if(!(e=se(this,t=e)))return null}else if(null==(t=de(e)))return null;return{line:t,handle:e,text:e.text,gutterMarkers:e.gutterMarkers,textClass:e.textClass,bgClass:e.bgClass,wrapClass:e.wrapClass,widgets:e.widgets}},addLineClass:Bo(function(e,t,i){return rr(this,e,"gutter"==t?"gutter":"class",function(e){var o="text"==t?"textClass":"background"==t?"bgClass":"gutter"==t?"gutterClass":"wrapClass";if(e[o]){if(C(i).test(e[o]))return!1;e[o]+=" "+i}else e[o]=i;return!0})}),removeLineClass:Bo(function(e,t,i){return rr(this,e,"gutter"==t?"gutter":"class",function(e){var o="text"==t?"textClass":"background"==t?"bgClass":"gutter"==t?"gutterClass":"wrapClass",n=e[o];if(!n)return!1;if(null==i)e[o]=null;else{var r=n.match(C(i));if(!r)return!1;var s=r.index+r[0].length;e[o]=n.slice(0,r.index)+(r.index&&s!=n.length?" ":"")+n.slice(s)||null}return!0})}),addLineWidget:Bo(function(e,t,i){return n=e,r=new ar(o=this,t,i),(s=o.cm)&&r.noHScroll&&(s.display.alignWidgets=!0),rr(o,n,"widget",function(e){var t=e.widgets||(e.widgets=[]);if(null==r.insertAt?t.push(r):t.splice(Math.min(t.length-1,Math.max(0,r.insertAt)),0,r),r.line=e,s&&!Be(o,e)){var i=Ve(e)<o.scrollTop;he(e,e.height+mi(r)),i&&yo(s,r.height),s.curOp.forceUpdate=!0}return!0}),s&&ni(s,"lineWidgetAdded",s,r,"number"==typeof n?n:de(n)),r;var o,n,r,s}),removeLineWidget:function(e){e.clear()},markText:function(e,t,i){return ur(this,we(this,e),we(this,t),i,i&&i.type||"range")},setBookmark:function(e,t){var i={replacedWith:t&&(null==t.nodeType?t.widget:t),insertLeft:t&&t.insertLeft,clearWhenEmpty:!1,shared:t&&t.shared,handleMouseEvents:t&&t.handleMouseEvents};return ur(this,e=we(this,e),e,i,"bookmark")},findMarksAt:function(e){var t=[],i=se(this,(e=we(this,e)).line).markedSpans;if(i)for(var o=0;o<i.length;++o){var n=i[o];(null==n.from||n.from<=e.ch)&&(null==n.to||n.to>=e.ch)&&t.push(n.marker.parent||n.marker)}return t},findMarks:function(e,t,i){e=we(this,e),t=we(this,t);var o=[],n=e.line;return this.iter(e.line,t.line+1,function(r){var s=r.markedSpans;if(s)for(var l=0;l<s.length;l++){var a=s[l];null!=a.to&&n==e.line&&e.ch>=a.to||null==a.from&&n!=e.line||null!=a.from&&n==t.line&&a.from>=t.ch||i&&!i(a.marker)||o.push(a.marker.parent||a.marker)}++n}),o},getAllMarks:function(){var e=[];return this.iter(function(t){var i=t.markedSpans;if(i)for(var o=0;o<i.length;++o)null!=i[o].from&&e.push(i[o].marker)}),e},posFromIndex:function(e){var t,i=this.first,o=this.lineSeparator().length;return this.iter(function(n){var r=n.text.length+o;if(e<r)return t=e,!0;e-=r,++i}),we(this,fe(i,t))},indexFromPos:function(e){var t=(e=we(this,e)).ch;if(e.line<this.first||e.ch<0)return 0;var i=this.lineSeparator().length;return this.iter(this.first,e.line,function(e){t+=e.text.length+i}),t},copy:function(e){var t=new vr(ae(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return t.scrollTop=this.scrollTop,t.scrollLeft=this.scrollLeft,t.sel=this.sel,t.extend=!1,e&&(t.history.undoDepth=this.history.undoDepth,t.setHistory(this.getHistory())),t},linkedDoc:function(e){e||(e={});var t=this.first,i=this.first+this.size;null!=e.from&&e.from>t&&(t=e.from),null!=e.to&&e.to<i&&(i=e.to);var o=new vr(ae(this,t,i),e.mode||this.modeOption,t,this.lineSep,this.direction);return e.sharedHist&&(o.history=this.history),(this.linked||(this.linked=[])).push({doc:o,sharedHist:e.sharedHist}),o.linked=[{doc:this,isParent:!0,sharedHist:e.sharedHist}],function(e,t){for(var i=0;i<t.length;i++){var o=t[i],n=o.find(),r=e.clipPos(n.from),s=e.clipPos(n.to);if(me(r,s)){var l=ur(e,r,s,o.primary,o.primary.type);o.markers.push(l),l.parent=o}}}(o,fr(this)),o},unlinkDoc:function(e){if(e instanceof cs&&(e=e.doc),this.linked)for(var t=0;t<this.linked.length;++t)if(this.linked[t].doc==e){this.linked.splice(t,1),e.unlinkDoc(this),mr(fr(this));break}if(e.history==this.history){var i=[e.id];xn(e,function(e){return i.push(e.id)},!0),e.history=new Tn(null),e.history.done=jn(this.history.done,i),e.history.undone=jn(this.history.undone,i)}},iterLinkedDocs:function(e){xn(this,e)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(e){return this.lineSep?e.split(this.lineSep):_t(e)},lineSeparator:function(){return this.lineSep||"\n"},setDirection:Bo(function(e){var t;"rtl"!=e&&(e="ltr"),e!=this.direction&&(this.direction=e,this.iter(function(e){return e.order=null}),this.cm&&Wo(t=this.cm,function(){Cn(t),$o(t)}))})}),vr.prototype.eachLine=vr.prototype.iter;var br=0;function _r(e){var t=this;if(yr(t),!ot(t,e)&&!gi(t.display,e)){lt(e),s&&(br=+new Date);var i=to(t,e,!0),o=e.dataTransfer.files;if(i&&!t.isReadOnly())if(o&&o.length&&window.FileReader&&window.File)for(var n=o.length,r=Array(n),l=0,a=function(e,o){if(!t.options.allowDropFileTypes||-1!=W(t.options.allowDropFileTypes,e.type)){var s=new FileReader;s.onload=Ro(t,function(){var e=s.result;if(/[\x00-\x08\x0e-\x1f]{2}/.test(e)&&(e=""),r[o]=e,++l==n){var a={from:i=we(t.doc,i),to:i,text:t.doc.splitLines(r.join(t.doc.lineSeparator())),origin:"paste"};Kn(t.doc,a),Hn(t.doc,pn(i,fn(a)))}}),s.readAsText(e)}},h=0;h<n;++h)a(o[h],h);else{if(t.state.draggingText&&-1<t.doc.sel.contains(i))return t.state.draggingText(e),void setTimeout(function(){return t.display.input.focus()},20);try{var d=e.dataTransfer.getData("Text");if(d){var c;if(t.state.draggingText&&!t.state.draggingText.copy&&(c=t.listSelections()),Rn(t.doc,pn(i,i)),c)for(var u=0;u<c.length;++u)tr(t.doc,"",c[u].anchor,c[u].head,"drag");t.replaceSelection(d,"around","paste"),t.display.input.focus()}}catch(e){}}}}function yr(e){e.display.dragCursor&&(e.display.lineSpace.removeChild(e.display.dragCursor),e.display.dragCursor=null)}function wr(e){if(document.getElementsByClassName)for(var t=document.getElementsByClassName("CodeMirror"),i=0;i<t.length;i++){var o=t[i].CodeMirror;o&&e(o)}}var xr=!1;function Sr(e){var t=e.display;t.cachedCharWidth=t.cachedTextHeight=t.cachedPaddingH=null,t.scrollbarsClipped=!1,e.setSize()}for(var Cr={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",127:"Delete",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},Tr=0;Tr<10;Tr++)Cr[Tr+48]=Cr[Tr+96]=String(Tr);for(var kr=65;kr<=90;kr++)Cr[kr]=String.fromCharCode(kr);for(var Dr=1;Dr<=12;Dr++)Cr[Dr+111]=Cr[Dr+63235]="F"+Dr;var Lr={};function zr(e){var t,i,o,n,r=e.split(/-(?!$)/);e=r[r.length-1];for(var s=0;s<r.length-1;s++){var l=r[s];if(/^(cmd|meta|m)$/i.test(l))n=!0;else if(/^a(lt)?$/i.test(l))t=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else{if(!/^s(hift)?$/i.test(l))throw new Error("Unrecognized modifier name: "+l);o=!0}}return t&&(e="Alt-"+e),i&&(e="Ctrl-"+e),n&&(e="Cmd-"+e),o&&(e="Shift-"+e),e}function Ar(e,t,i,o){var n=(t=Er(t)).call?t.call(e,o):t[e];if(!1===n)return"nothing";if("..."===n)return"multi";if(null!=n&&i(n))return"handled";if(t.fallthrough){if("[object Array]"!=Object.prototype.toString.call(t.fallthrough))return Ar(e,t.fallthrough,i,o);for(var r=0;r<t.fallthrough.length;r++){var s=Ar(e,t.fallthrough[r],i,o);if(s)return s}}}function Mr(e){var t="string"==typeof e?e:Cr[e.keyCode];return"Ctrl"==t||"Alt"==t||"Shift"==t||"Mod"==t}function Or(e,t,i){var o=e;return t.altKey&&"Alt"!=o&&(e="Alt-"+e),(x?t.metaKey:t.ctrlKey)&&"Ctrl"!=o&&(e="Ctrl-"+e),(x?t.ctrlKey:t.metaKey)&&"Cmd"!=o&&(e="Cmd-"+e),!i&&t.shiftKey&&"Shift"!=o&&(e="Shift-"+e),e}function jr(e,t){if(c&&34==e.keyCode&&e.char)return!1;var i=Cr[e.keyCode];return null!=i&&!e.altGraphKey&&(3==e.keyCode&&e.code&&(i=e.code),Or(i,e,t))}function Er(e){return"string"==typeof e?Lr[e]:e}function Nr(e,t){for(var i=e.doc.sel.ranges,o=[],n=0;n<i.length;n++){for(var r=t(i[n]);o.length&&me(r.from,Y(o).to)<=0;){var s=o.pop();if(me(s.from,r.from)<0){r.from=s.from;break}}o.push(r)}Wo(e,function(){for(var t=o.length-1;0<=t;t--)tr(e.doc,"",o[t].from,o[t].to,"+delete");wo(e)})}function Pr(e,t,i){var o=ne(e.text,t+i,i);return o<0||o>e.text.length?null:o}function Fr(e,t,i){var o=Pr(e,t.ch,i);return null==o?null:new fe(t.line,o,i<0?"after":"before")}function Ir(e,t,i,o,n){if(e){var r=Ze(i,t.doc.direction);if(r){var s,l=n<0?Y(r):r[0],a=n<0==(1==l.level)?"after":"before";if(0<l.level||"rtl"==t.doc.direction){var h=ki(t,i);s=n<0?i.text.length-1:0;var d=Di(t,h,s).top;s=re(function(e){return Di(t,h,e).top==d},n<0==(1==l.level)?l.from:l.to-1,s),"before"==a&&(s=Pr(i,s,1))}else s=n<0?l.to:l.from;return new fe(o,s,a)}}return new fe(o,n<0?i.text.length:0,n<0?"before":"after")}Lr.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},Lr.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},Lr.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},Lr.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},Lr.default=b?Lr.macDefault:Lr.pcDefault;var Hr={selectAll:Yn,singleSelection:function(e){return e.setSelection(e.getCursor("anchor"),e.getCursor("head"),U)},killLine:function(e){return Nr(e,function(t){if(t.empty()){var i=se(e.doc,t.head.line).text.length;return t.head.ch==i&&t.head.line<e.lastLine()?{from:t.head,to:fe(t.head.line+1,0)}:{from:t.head,to:fe(t.head.line,i)}}return{from:t.from(),to:t.to()}})},deleteLine:function(e){return Nr(e,function(t){return{from:fe(t.from().line,0),to:we(e.doc,fe(t.to().line+1,0))}})},delLineLeft:function(e){return Nr(e,function(e){return{from:fe(e.from().line,0),to:e.from()}})},delWrappedLineLeft:function(e){return Nr(e,function(t){var i=e.charCoords(t.head,"div").top+5;return{from:e.coordsChar({left:0,top:i},"div"),to:t.from()}})},delWrappedLineRight:function(e){return Nr(e,function(t){var i=e.charCoords(t.head,"div").top+5,o=e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:i},"div");return{from:t.from(),to:o}})},undo:function(e){return e.undo()},redo:function(e){return e.redo()},undoSelection:function(e){return e.undoSelection()},redoSelection:function(e){return e.redoSelection()},goDocStart:function(e){return e.extendSelection(fe(e.firstLine(),0))},goDocEnd:function(e){return e.extendSelection(fe(e.lastLine()))},goLineStart:function(e){return e.extendSelectionsBy(function(t){return Wr(e,t.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(e){return e.extendSelectionsBy(function(t){return Rr(e,t.head)},{origin:"+move",bias:1})},goLineEnd:function(e){return e.extendSelectionsBy(function(t){return i=e,o=t.head.line,(r=function(e){for(var t;t=Fe(e);)e=t.find(1,!0).line;return e}(n=se(i.doc,o)))!=n&&(o=de(r)),Ir(!0,i,n,o,-1);var i,o,n,r},{origin:"+move",bias:-1})},goLineRight:function(e){return e.extendSelectionsBy(function(t){var i=e.cursorCoords(t.head,"div").top+5;return e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:i},"div")},$)},goLineLeft:function(e){return e.extendSelectionsBy(function(t){var i=e.cursorCoords(t.head,"div").top+5;return e.coordsChar({left:0,top:i},"div")},$)},goLineLeftSmart:function(e){return e.extendSelectionsBy(function(t){var i=e.cursorCoords(t.head,"div").top+5,o=e.coordsChar({left:0,top:i},"div");return o.ch<e.getLine(o.line).search(/\S/)?Rr(e,t.head):o},$)},goLineUp:function(e){return e.moveV(-1,"line")},goLineDown:function(e){return e.moveV(1,"line")},goPageUp:function(e){return e.moveV(-1,"page")},goPageDown:function(e){return e.moveV(1,"page")},goCharLeft:function(e){return e.moveH(-1,"char")},goCharRight:function(e){return e.moveH(1,"char")},goColumnLeft:function(e){return e.moveH(-1,"column")},goColumnRight:function(e){return e.moveH(1,"column")},goWordLeft:function(e){return e.moveH(-1,"word")},goGroupRight:function(e){return e.moveH(1,"group")},goGroupLeft:function(e){return e.moveH(-1,"group")},goWordRight:function(e){return e.moveH(1,"word")},delCharBefore:function(e){return e.deleteH(-1,"char")},delCharAfter:function(e){return e.deleteH(1,"char")},delWordBefore:function(e){return e.deleteH(-1,"word")},delWordAfter:function(e){return e.deleteH(1,"word")},delGroupBefore:function(e){return e.deleteH(-1,"group")},delGroupAfter:function(e){return e.deleteH(1,"group")},indentAuto:function(e){return e.indentSelection("smart")},indentMore:function(e){return e.indentSelection("add")},indentLess:function(e){return e.indentSelection("subtract")},insertTab:function(e){return e.replaceSelection("\t")},insertSoftTab:function(e){for(var t=[],i=e.listSelections(),o=e.options.tabSize,n=0;n<i.length;n++){var r=i[n].from(),s=I(e.getLine(r.line),r.ch,o);t.push(X(o-s%o))}e.replaceSelections(t)},defaultTab:function(e){e.somethingSelected()?e.indentSelection("add"):e.execCommand("insertTab")},transposeChars:function(e){return Wo(e,function(){for(var t=e.listSelections(),i=[],o=0;o<t.length;o++)if(t[o].empty()){var n=t[o].head,r=se(e.doc,n.line).text;if(r)if(n.ch==r.length&&(n=new fe(n.line,n.ch-1)),0<n.ch)n=new fe(n.line,n.ch+1),e.replaceRange(r.charAt(n.ch-1)+r.charAt(n.ch-2),fe(n.line,n.ch-2),n,"+transpose");else if(n.line>e.doc.first){var s=se(e.doc,n.line-1).text;s&&(n=new fe(n.line,1),e.replaceRange(r.charAt(0)+e.doc.lineSeparator()+s.charAt(s.length-1),fe(n.line-1,s.length-1),n,"+transpose"))}i.push(new cn(n,n))}e.setSelections(i)})},newlineAndIndent:function(e){return Wo(e,function(){for(var t=e.listSelections(),i=t.length-1;0<=i;i--)e.replaceRange(e.doc.lineSeparator(),t[i].anchor,t[i].head,"+input");t=e.listSelections();for(var o=0;o<t.length;o++)e.indentLine(t[o].from().line,null,!0);wo(e)})},openLine:function(e){return e.replaceSelection("\n","start")},toggleOverwrite:function(e){return e.toggleOverwrite()}};function Wr(e,t){var i=se(e.doc,t),o=We(i);return o!=i&&(t=de(o)),Ir(!0,e,o,t,1)}function Rr(e,t){var i=Wr(e,t.line),o=se(e.doc,i.line),n=Ze(o,e.doc.direction);if(n&&0!=n[0].level)return i;var r=Math.max(0,o.text.search(/\S/)),s=t.line==i.line&&t.ch<=r&&t.ch;return fe(i.line,s?0:r,i.sticky)}function Ur(e,t,i){if("string"==typeof t&&!(t=Hr[t]))return!1;e.display.input.ensurePolled();var o=e.display.shift,n=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),i&&(e.display.shift=!1),n=t(e)!=R}finally{e.display.shift=o,e.state.suppressEdits=!1}return n}var Br=new H;function $r(e,t,i,o){var n=e.state.keySeq;if(n){if(Mr(t))return"handled";if(/\'$/.test(t)?e.state.keySeq=null:Br.set(50,function(){e.state.keySeq==n&&(e.state.keySeq=null,e.display.input.reset())}),Vr(e,n+" "+t,i,o))return!0}return Vr(e,t,i,o)}function Vr(e,t,i,o){var n=function(e,t,i){for(var o=0;o<e.state.keyMaps.length;o++){var n=Ar(t,e.state.keyMaps[o],i,e);if(n)return n}return e.options.extraKeys&&Ar(t,e.options.extraKeys,i,e)||Ar(t,e.options.keyMap,i,e)}(e,t,o);return"multi"==n&&(e.state.keySeq=t),"handled"==n&&ni(e,"keyHandled",e,t,i),"handled"!=n&&"multi"!=n||(lt(i),ao(e)),!!n}function qr(e,t){var i=jr(t,!0);return!!i&&(t.shiftKey&&!e.state.keySeq?$r(e,"Shift-"+i,t,function(t){return Ur(e,t,!0)})||$r(e,i,t,function(t){if("string"==typeof t?/^go[A-Z]/.test(t):t.motion)return Ur(e,t)}):$r(e,i,t,function(t){return Ur(e,t)}))}var Xr=null;function Yr(e){if(this.curOp.focus=O(),!ot(this,e)){s&&l<11&&27==e.keyCode&&(e.returnValue=!1);var t=e.keyCode;this.display.shift=16==t||e.shiftKey;var i=qr(this,e);c&&(Xr=i?t:null,!i&&88==t&&!wt&&(b?e.metaKey:e.ctrlKey)&&this.replaceSelection("",null,"cut")),18!=t||/\bCodeMirror-crosshair\b/.test(this.display.lineDiv.className)||function(e){var t=e.display.lineDiv;function i(e){18!=e.keyCode&&e.altKey||(k(t,"CodeMirror-crosshair"),tt(document,"keyup",i),tt(document,"mouseover",i))}j(t,"CodeMirror-crosshair"),Je(document,"keyup",i),Je(document,"mouseover",i)}(this)}}function Gr(e){16==e.keyCode&&(this.doc.sel.shift=!1),ot(this,e)}function Kr(e){if(!(gi(this.display,e)||ot(this,e)||e.ctrlKey&&!e.altKey||b&&e.metaKey)){var t=e.keyCode,i=e.charCode;if(c&&t==Xr)return Xr=null,void lt(e);if(!c||e.which&&!(e.which<10)||!qr(this,e)){var o,n=String.fromCharCode(null==i?t:i);"\b"!=n&&($r(o=this,"'"+n+"'",e,function(e){return Ur(o,e,!0)})||this.display.input.onKeyPress(e))}}}var Zr,Qr,Jr=function(e,t,i){this.time=e,this.pos=t,this.button=i};function es(e){var t,i,o,n,r=this,h=r.display;if(!(ot(r,e)||h.activeTouch&&h.input.supportsTouch()))if(h.input.ensurePolled(),h.shift=e.shiftKey,gi(h,e))a||(h.scroller.draggable=!1,setTimeout(function(){return h.scroller.draggable=!0},100));else if(!os(r,e)){var d,c,u,p=to(r,e),f=ut(e),m=p?(d=p,c=f,u=+new Date,Qr&&Qr.compare(u,d,c)?(Zr=Qr=null,"triple"):Zr&&Zr.compare(u,d,c)?(Qr=new Jr(u,d,c),Zr=null,"double"):(Zr=new Jr(u,d,c),Qr=null,"single")):"single";window.focus(),1==f&&r.state.selectingText&&r.state.selectingText(e),p&&(i=p,n="Click","double"==m?n="Double"+n:"triple"==m&&(n="Triple"+n),$r(t=r,Or(n=(1==f?"Left":2==f?"Middle":"Right")+n,o=e),o,function(e){if("string"==typeof e&&(e=Hr[e]),!e)return!1;var o=!1;try{t.isReadOnly()&&(t.state.suppressEdits=!0),o=e(t,i)!=R}finally{t.state.suppressEdits=!1}return o}))||(1==f?p?function(e,t,i,o){s?setTimeout(P(ho,e),0):e.curOp.focus=O();var n,r,h,d,c,u,p,f,m,g,v=function(e,t,i){var o=e.getOption("configureMouse"),n=o?o(e,t,i):{};if(null==n.unit){var r=_?i.shiftKey&&i.metaKey:i.altKey;n.unit=r?"rectangle":"single"==t?"char":"double"==t?"word":"line"}return(null==n.extend||e.doc.extend)&&(n.extend=e.doc.extend||i.shiftKey),null==n.addNew&&(n.addNew=b?i.metaKey:i.ctrlKey),null==n.moveOnDrag&&(n.moveOnDrag=!(b?i.altKey:i.ctrlKey)),n}(e,i,o),y=e.doc.sel;e.options.dragDrop&&mt&&!e.isReadOnly()&&"single"==i&&-1<(n=y.contains(t))&&(me((n=y.ranges[n]).from(),t)<0||0<t.xRel)&&(0<me(n.to(),t)||t.xRel<0)?(h=o,d=t,c=v,u=(r=e).display,p=!1,f=Ro(r,function(e){a&&(u.scroller.draggable=!1),r.state.draggingText=!1,tt(u.wrapper.ownerDocument,"mouseup",f),tt(u.wrapper.ownerDocument,"mousemove",m),tt(u.scroller,"dragstart",g),tt(u.scroller,"drop",f),p||(lt(e),c.addNew||Nn(r.doc,d,null,null,c.extend),a||s&&9==l?setTimeout(function(){u.wrapper.ownerDocument.body.focus(),u.input.focus()},20):u.input.focus())}),m=function(e){p=p||10<=Math.abs(h.clientX-e.clientX)+Math.abs(h.clientY-e.clientY)},g=function(){return p=!0},a&&(u.scroller.draggable=!0),(r.state.draggingText=f).copy=!c.moveOnDrag,u.scroller.dragDrop&&u.scroller.dragDrop(),Je(u.wrapper.ownerDocument,"mouseup",f),Je(u.wrapper.ownerDocument,"mousemove",m),Je(u.scroller,"dragstart",g),Je(u.scroller,"drop",f),co(r),setTimeout(function(){return u.input.focus()},20)):function(e,t,i,o){var n=e.display,r=e.doc;lt(t);var s,l,a=r.sel,h=a.ranges;if(o.addNew&&!o.extend?(l=r.sel.contains(i),s=-1<l?h[l]:new cn(i,i)):(s=r.sel.primary(),l=r.sel.primIndex),"rectangle"==o.unit)o.addNew||(s=new cn(i,i)),i=to(e,t,!0,!0),l=-1;else{var d=ts(e,i,o.unit);s=o.extend?En(s,d.anchor,d.head,o.extend):d}o.addNew?-1==l?(l=h.length,Wn(r,un(e,h.concat([s]),l),{scroll:!1,origin:"*mouse"})):1<h.length&&h[l].empty()&&"char"==o.unit&&!o.extend?(Wn(r,un(e,h.slice(0,l).concat(h.slice(l+1)),0),{scroll:!1,origin:"*mouse"}),a=r.sel):Fn(r,l,s,B):(Wn(r,new dn([s],l=0),B),a=r.sel);var c=i,u=n.wrapper.getBoundingClientRect(),p=0;function f(t){e.state.selectingText=!1,p=1/0,lt(t),n.input.focus(),tt(n.wrapper.ownerDocument,"mousemove",m),tt(n.wrapper.ownerDocument,"mouseup",g),r.history.lastSelOrigin=null}var m=Ro(e,function(t){0!==t.buttons&&ut(t)?function t(h){var d=++p,f=to(e,h,!0,"rectangle"==o.unit);if(f)if(0!=me(f,c)){e.curOp.focus=O(),function(t){if(0!=me(c,t))if(c=t,"rectangle"==o.unit){for(var n=[],h=e.options.tabSize,d=I(se(r,i.line).text,i.ch,h),u=I(se(r,t.line).text,t.ch,h),p=Math.min(d,u),f=Math.max(d,u),m=Math.min(i.line,t.line),g=Math.min(e.lastLine(),Math.max(i.line,t.line));m<=g;m++){var v=se(r,m).text,b=V(v,p,h);p==f?n.push(new cn(fe(m,b),fe(m,b))):v.length>b&&n.push(new cn(fe(m,b),fe(m,V(v,f,h))))}n.length||n.push(new cn(i,i)),Wn(r,un(e,a.ranges.slice(0,l).concat(n),l),{origin:"*mouse",scroll:!1}),e.scrollIntoView(t)}else{var _,y=s,w=ts(e,t,o.unit),x=y.anchor;x=0<me(w.anchor,x)?(_=w.head,_e(y.from(),w.anchor)):(_=w.anchor,be(y.to(),w.head));var S=a.ranges.slice(0);S[l]=function(e,t){var i=t.anchor,o=t.head,n=se(e.doc,i.line);if(0==me(i,o)&&i.sticky==o.sticky)return t;var r=Ze(n);if(!r)return t;var s=Ge(r,i.ch,i.sticky),l=r[s];if(l.from!=i.ch&&l.to!=i.ch)return t;var a,h=s+(l.from==i.ch==(1!=l.level)?0:1);if(0==h||h==r.length)return t;if(o.line!=i.line)a=0<(o.line-i.line)*("ltr"==e.doc.direction?1:-1);else{var d=Ge(r,o.ch,o.sticky),c=d-s||(o.ch-i.ch)*(1==l.level?-1:1);a=d==h-1||d==h?c<0:0<c}var u=r[h+(a?-1:0)],p=a==(1==u.level),f=p?u.from:u.to,m=p?"after":"before";return i.ch==f&&i.sticky==m?t:new cn(new fe(i.line,f,m),o)}(e,new cn(we(r,x),_)),Wn(r,un(e,S,l),B)}}(f);var m=go(n,r);(f.line>=m.to||f.line<m.from)&&setTimeout(Ro(e,function(){p==d&&t(h)}),150)}else{var g=h.clientY<u.top?-20:h.clientY>u.bottom?20:0;g&&setTimeout(Ro(e,function(){p==d&&(n.scroller.scrollTop+=g,t(h))}),50)}}(t):f(t)}),g=Ro(e,f);e.state.selectingText=g,Je(n.wrapper.ownerDocument,"mousemove",m),Je(n.wrapper.ownerDocument,"mouseup",g)}(e,o,t,v)}(r,p,m,e):ct(e)==h.scroller&&lt(e):2==f?(p&&Nn(r.doc,p),setTimeout(function(){return h.input.focus()},20)):3==f&&(S?r.display.input.onContextMenu(e):co(r)))}}function ts(e,t,i){if("char"==i)return new cn(t,t);if("word"==i)return e.findWordAt(t);if("line"==i)return new cn(fe(t.line,0),we(e.doc,fe(t.line+1,0)));var o=i(e,t);return new cn(o.from,o.to)}function is(e,t,i,o){var n,r;if(t.touches)n=t.touches[0].clientX,r=t.touches[0].clientY;else try{n=t.clientX,r=t.clientY}catch(t){return!1}if(n>=Math.floor(e.display.gutters.getBoundingClientRect().right))return!1;o&&lt(t);var s=e.display,l=s.lineDiv.getBoundingClientRect();if(r>l.bottom||!rt(e,i))return ht(t);r-=l.top-s.viewOffset;for(var a=0;a<e.options.gutters.length;++a){var h=s.gutters.childNodes[a];if(h&&h.getBoundingClientRect().right>=n)return it(e,i,e,ce(e.doc,r),e.options.gutters[a],t),ht(t)}}function os(e,t){return is(e,t,"gutterClick",!0)}function ns(e){e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+e.options.theme.replace(/(^|\s)\s*/g," cm-s-"),Ei(e)}Jr.prototype.compare=function(e,t,i){return this.time+400>e&&0==me(t,this.pos)&&i==this.button};var rs={toString:function(){return"CodeMirror.Init"}},ss={},ls={};function as(e){nn(e),$o(e),vo(e)}function hs(e,t,i){if(!t!=!(i&&i!=rs)){var o=e.display.dragFunctions,n=t?Je:tt;n(e.display.scroller,"dragstart",o.start),n(e.display.scroller,"dragenter",o.enter),n(e.display.scroller,"dragover",o.over),n(e.display.scroller,"dragleave",o.leave),n(e.display.scroller,"drop",o.drop)}}function ds(e){e.options.lineWrapping?(j(e.display.wrapper,"CodeMirror-wrap"),e.display.sizer.style.minWidth="",e.display.sizerWidth=null):(k(e.display.wrapper,"CodeMirror-wrap"),Xe(e)),eo(e),$o(e),Ei(e),setTimeout(function(){return Mo(e)},100)}function cs(e,t){var o=this;if(!(this instanceof cs))return new cs(e,t);this.options=t=t?F(t):{},F(ss,t,!1),rn(t);var n=t.value;"string"==typeof n?n=new vr(n,t.mode,null,t.lineSeparator,t.direction):t.mode&&(n.modeOption=t.mode),this.doc=n;var r=new cs.inputStyles[t.inputStyle](this),h=this.display=new function(e,t,o){var n=this;this.input=o,n.scrollbarFiller=z("div",null,"CodeMirror-scrollbar-filler"),n.scrollbarFiller.setAttribute("cm-not-content","true"),n.gutterFiller=z("div",null,"CodeMirror-gutter-filler"),n.gutterFiller.setAttribute("cm-not-content","true"),n.lineDiv=A("div",null,"CodeMirror-code"),n.selectionDiv=z("div",null,null,"position: relative; z-index: 1"),n.cursorDiv=z("div",null,"CodeMirror-cursors"),n.measure=z("div",null,"CodeMirror-measure"),n.lineMeasure=z("div",null,"CodeMirror-measure"),n.lineSpace=A("div",[n.measure,n.lineMeasure,n.selectionDiv,n.cursorDiv,n.lineDiv],null,"position: relative; outline: none");var r=A("div",[n.lineSpace],"CodeMirror-lines");n.mover=z("div",[r],null,"position: relative"),n.sizer=z("div",[n.mover],"CodeMirror-sizer"),n.sizerWidth=null,n.heightForcer=z("div",null,null,"position: absolute; height: 30px; width: 1px;"),n.gutters=z("div",null,"CodeMirror-gutters"),n.lineGutter=null,n.scroller=z("div",[n.sizer,n.heightForcer,n.gutters],"CodeMirror-scroll"),n.scroller.setAttribute("tabIndex","-1"),n.wrapper=z("div",[n.scrollbarFiller,n.gutterFiller,n.scroller],"CodeMirror"),s&&l<8&&(n.gutters.style.zIndex=-1,n.scroller.style.paddingRight=0),a||i&&v||(n.scroller.draggable=!0),e&&(e.appendChild?e.appendChild(n.wrapper):e(n.wrapper)),n.viewFrom=n.viewTo=t.first,n.reportedViewFrom=n.reportedViewTo=t.first,n.view=[],n.renderedView=null,n.externalMeasured=null,n.viewOffset=0,n.lastWrapHeight=n.lastWrapWidth=0,n.updateLineNumbers=null,n.nativeBarWidth=n.barHeight=n.barWidth=0,n.scrollbarsClipped=!1,n.lineNumWidth=n.lineNumInnerWidth=n.lineNumChars=null,n.alignWidgets=!1,n.cachedCharWidth=n.cachedTextHeight=n.cachedPaddingH=null,n.maxLine=null,n.maxLineLength=0,n.maxLineChanged=!1,n.wheelDX=n.wheelDY=n.wheelStartX=n.wheelStartY=null,n.shift=!1,n.selForContextMenu=null,n.activeTouch=null,o.init(n)}(e,n,r);for(var d in nn(h.wrapper.CodeMirror=this),ns(this),t.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),Eo(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:!1,cutIncoming:!1,selectingText:!1,draggingText:!1,highlight:new H,keySeq:null,specialChars:null},t.autofocus&&!v&&h.input.focus(),s&&l<11&&setTimeout(function(){return o.display.input.reset(!0)},20),function(e){var t=e.display;Je(t.scroller,"mousedown",Ro(e,es)),Je(t.scroller,"dblclick",s&&l<11?Ro(e,function(t){if(!ot(e,t)){var i=to(e,t);if(i&&!os(e,t)&&!gi(e.display,t)){lt(t);var o=e.findWordAt(i);Nn(e.doc,o.anchor,o.head)}}}):function(t){return ot(e,t)||lt(t)}),Je(t.scroller,"contextmenu",function(t){return o=t,void(gi((i=e).display,o)||(r=o,rt(n=i,"gutterContextMenu")&&is(n,r,"gutterContextMenu",!1))||ot(i,o,"contextmenu")||S||i.display.input.onContextMenu(o));var i,o,n,r});var i,o={end:0};function n(){t.activeTouch&&(i=setTimeout(function(){return t.activeTouch=null},1e3),(o=t.activeTouch).end=+new Date)}function r(e,t){if(null==t.left)return!0;var i=t.left-e.left,o=t.top-e.top;return 400<i*i+o*o}Je(t.scroller,"touchstart",function(n){if(!ot(e,n)&&!function(e){if(1!=e.touches.length)return!1;var t=e.touches[0];return t.radiusX<=1&&t.radiusY<=1}(n)&&!os(e,n)){t.input.ensurePolled(),clearTimeout(i);var r=+new Date;t.activeTouch={start:r,moved:!1,prev:r-o.end<=300?o:null},1==n.touches.length&&(t.activeTouch.left=n.touches[0].pageX,t.activeTouch.top=n.touches[0].pageY)}}),Je(t.scroller,"touchmove",function(){t.activeTouch&&(t.activeTouch.moved=!0)}),Je(t.scroller,"touchend",function(i){var o=t.activeTouch;if(o&&!gi(t,i)&&null!=o.left&&!o.moved&&new Date-o.start<300){var s,l=e.coordsChar(t.activeTouch,"page");s=!o.prev||r(o,o.prev)?new cn(l,l):!o.prev.prev||r(o,o.prev.prev)?e.findWordAt(l):new cn(fe(l.line,0),we(e.doc,fe(l.line+1,0))),e.setSelection(s.anchor,s.head),e.focus(),lt(i)}n()}),Je(t.scroller,"touchcancel",n),Je(t.scroller,"scroll",function(){t.scroller.clientHeight&&(To(e,t.scroller.scrollTop),Do(e,t.scroller.scrollLeft,!0),it(e,"scroll",e))}),Je(t.scroller,"mousewheel",function(t){return hn(e,t)}),Je(t.scroller,"DOMMouseScroll",function(t){return hn(e,t)}),Je(t.wrapper,"scroll",function(){return t.wrapper.scrollTop=t.wrapper.scrollLeft=0}),t.dragFunctions={enter:function(t){ot(e,t)||dt(t)},over:function(t){ot(e,t)||(function(e){var i=to(e,t);if(i){var o=document.createDocumentFragment();ro(e,i,o),e.display.dragCursor||(e.display.dragCursor=z("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),e.display.lineSpace.insertBefore(e.display.dragCursor,e.display.cursorDiv)),L(e.display.dragCursor,o)}}(e),dt(t))},start:function(t){return function(e,t){if(s&&(!e.state.draggingText||+new Date-br<100))dt(t);else if(!ot(e,t)&&!gi(e.display,t)&&(t.dataTransfer.setData("Text",e.getSelection()),t.dataTransfer.effectAllowed="copyMove",t.dataTransfer.setDragImage&&!u)){var i=z("img",null,null,"position: fixed; left: 0; top: 0;");i.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",c&&(i.width=i.height=1,e.display.wrapper.appendChild(i),i._top=i.offsetTop),t.dataTransfer.setDragImage(i,0,0),c&&i.parentNode.removeChild(i)}}(e,t)},drop:Ro(e,_r),leave:function(t){ot(e,t)||yr(e)}};var a=t.input.getField();Je(a,"keyup",function(t){return Gr.call(e,t)}),Je(a,"keydown",Ro(e,Yr)),Je(a,"keypress",Ro(e,Kr)),Je(a,"focus",function(t){return uo(e,t)}),Je(a,"blur",function(t){return po(e,t)})}(this),function(){var e;xr||(Je(window,"resize",function(){null==e&&(e=setTimeout(function(){e=null,wr(Sr)},100))}),Je(window,"blur",function(){return wr(po)}),xr=!0)}(),Po(this),this.curOp.forceUpdate=!0,Sn(this,n),t.autofocus&&!v||this.hasFocus()?setTimeout(P(uo,this),20):po(this),ls)ls.hasOwnProperty(d)&&ls[d](o,t[d],rs);bo(this),t.finishInit&&t.finishInit(this);for(var p=0;p<us.length;++p)us[p](o);Fo(this),a&&t.lineWrapping&&"optimizelegibility"==getComputedStyle(h.lineDiv).textRendering&&(h.lineDiv.style.textRendering="auto")}cs.defaults=ss,cs.optionHandlers=ls;var us=[];function ps(e,t,i,o){var n,r=e.doc;null==i&&(i="add"),"smart"==i&&(r.mode.indent?n=Pt(e,t).state:i="prev");var s=e.options.tabSize,l=se(r,t),a=I(l.text,null,s);l.stateAfter&&(l.stateAfter=null);var h,d=l.text.match(/^\s*/)[0];if(o||/\S/.test(l.text)){if("smart"==i&&((h=r.mode.indent(n,l.text.slice(d.length),l.text))==R||150<h)){if(!o)return;i="prev"}}else h=0,i="not";"prev"==i?h=t>r.first?I(se(r,t-1).text,null,s):0:"add"==i?h=a+e.options.indentUnit:"subtract"==i?h=a-e.options.indentUnit:"number"==typeof i&&(h=a+i),h=Math.max(0,h);var c="",u=0;if(e.options.indentWithTabs)for(var p=Math.floor(h/s);p;--p)u+=s,c+="\t";if(u<h&&(c+=X(h-u)),c!=d)return tr(r,c,fe(t,0),fe(t,d.length),"+input"),!(l.stateAfter=null);for(var f=0;f<r.sel.ranges.length;f++){var m=r.sel.ranges[f];if(m.head.line==t&&m.head.ch<d.length){var g=fe(t,d.length);Fn(r,f,new cn(g,g));break}}}cs.defineInitHook=function(e){return us.push(e)};var fs=null;function ms(e){fs=e}function gs(e,t,i,o,n){var r=e.doc;e.display.shift=!1,o||(o=r.sel);var s,l=e.state.pasteIncoming||"paste"==n,a=_t(t),h=null;if(l&&1<o.ranges.length)if(fs&&fs.text.join("\n")==t){if(o.ranges.length%fs.text.length==0){h=[];for(var d=0;d<fs.text.length;d++)h.push(r.splitLines(fs.text[d]))}}else a.length==o.ranges.length&&e.options.pasteLinesPerSelection&&(h=G(a,function(e){return[e]}));for(var c=o.ranges.length-1;0<=c;c--){var u=o.ranges[c],p=u.from(),f=u.to();u.empty()&&(i&&0<i?p=fe(p.line,p.ch-i):e.state.overwrite&&!l?f=fe(f.line,Math.min(se(r,f.line).text.length,f.ch+Y(a).length)):l&&fs&&fs.lineWise&&fs.text.join("\n")==t&&(p=f=fe(p.line,0))),s=e.curOp.updateInput;var m={from:p,to:f,text:h?h[c%h.length]:a,origin:n||(l?"paste":e.state.cutIncoming?"cut":"+input")};Kn(e.doc,m),ni(e,"inputRead",e,m)}t&&!l&&bs(e,t),wo(e),e.curOp.updateInput=s,e.curOp.typing=!0,e.state.pasteIncoming=e.state.cutIncoming=!1}function vs(e,t){var i=e.clipboardData&&e.clipboardData.getData("Text");if(i)return e.preventDefault(),t.isReadOnly()||t.options.disableInput||Wo(t,function(){return gs(t,i,0,null,"paste")}),!0}function bs(e,t){if(e.options.electricChars&&e.options.smartIndent)for(var i=e.doc.sel,o=i.ranges.length-1;0<=o;o--){var n=i.ranges[o];if(!(100<n.head.ch||o&&i.ranges[o-1].head.line==n.head.line)){var r=e.getModeAt(n.head),s=!1;if(r.electricChars){for(var l=0;l<r.electricChars.length;l++)if(-1<t.indexOf(r.electricChars.charAt(l))){s=ps(e,n.head.line,"smart");break}}else r.electricInput&&r.electricInput.test(se(e.doc,n.head.line).text.slice(0,n.head.ch))&&(s=ps(e,n.head.line,"smart"));s&&ni(e,"electricInput",e,n.head.line)}}}function _s(e){for(var t=[],i=[],o=0;o<e.doc.sel.ranges.length;o++){var n=e.doc.sel.ranges[o].head.line,r={anchor:fe(n,0),head:fe(n+1,0)};i.push(r),t.push(e.getRange(r.anchor,r.head))}return{text:t,ranges:i}}function ys(e,t){e.setAttribute("autocorrect","off"),e.setAttribute("autocapitalize","off"),e.setAttribute("spellcheck",!!t)}function ws(){var e=z("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; outline: none"),t=z("div",[e],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return a?e.style.width="1000px":e.setAttribute("wrap","off"),m&&(e.style.border="1px solid black"),ys(e),t}function xs(e,t,i,o,n){var r=t,s=i,l=se(e,t.line);function a(o){var r,s;if(null==(r=n?function(e,t,i,o){var n=Ze(t,e.doc.direction);if(!n)return Fr(t,i,o);i.ch>=t.text.length?(i.ch=t.text.length,i.sticky="before"):i.ch<=0&&(i.ch=0,i.sticky="after");var r=Ge(n,i.ch,i.sticky),s=n[r];if("ltr"==e.doc.direction&&s.level%2==0&&(0<o?s.to>i.ch:s.from<i.ch))return Fr(t,i,o);var l,a=function(e,i){return Pr(t,e instanceof fe?e.ch:e,i)},h=function(i){return e.options.lineWrapping?(l=l||ki(e,t),qi(e,t,l,i)):{begin:0,end:t.text.length}},d=h("before"==i.sticky?a(i,-1):i.ch);if("rtl"==e.doc.direction||1==s.level){var c=1==s.level==o<0,u=a(i,c?1:-1);if(null!=u&&(c?u<=s.to&&u<=d.end:u>=s.from&&u>=d.begin)){var p=c?"before":"after";return new fe(i.line,u,p)}}var f=function(e,t,o){for(var r=function(e,t){return t?new fe(i.line,a(e,1),"before"):new fe(i.line,e,"after")};0<=e&&e<n.length;e+=t){var s=n[e],l=0<t==(1!=s.level),h=l?o.begin:a(o.end,-1);if(s.from<=h&&h<s.to)return r(h,l);if(h=l?s.from:a(s.to,-1),o.begin<=h&&h<o.end)return r(h,l)}},m=f(r+o,o,d);if(m)return m;var g=0<o?d.end:a(d.begin,-1);return null==g||0<o&&g==t.text.length||!(m=f(0<o?0:n.length-1,o,h(g)))?null:m}(e.cm,l,t,i):Fr(l,t,i))){if(o||(s=t.line+i)<e.first||s>=e.first+e.size||(t=new fe(s,t.ch,t.sticky),!(l=se(e,s))))return!1;t=Ir(n,e.cm,l,t.line,i)}else t=r;return!0}if("char"==o)a();else if("column"==o)a(!0);else if("word"==o||"group"==o)for(var h=null,d="group"==o,c=e.cm&&e.cm.getHelper(t,"wordChars"),u=!0;!(i<0)||a(!u);u=!1){var p=l.text.charAt(t.ch)||"\n",f=ee(p,c)?"w":d&&"\n"==p?"n":!d||/\s/.test(p)?null:"p";if(!d||u||f||(f="s"),h&&h!=f){i<0&&(i=1,a(),t.sticky="after");break}if(f&&(h=f),0<i&&!a(!u))break}var m=qn(e,t,r,s,!0);return ge(r,m)&&(m.hitSide=!0),m}function Ss(e,t,i,o){var n,r,s=e.doc,l=t.left;if("page"==o){var a=Math.min(e.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),h=Math.max(a-.5*Gi(e.display),3);n=(0<i?t.bottom:t.top)+i*h}else"line"==o&&(n=0<i?t.bottom+3:t.top-3);for(;(r=$i(e,l,n)).outside;){if(i<0?n<=0:n>=s.height){r.hitSide=!0;break}n+=5*i}return r}var Cs=function(e){this.cm=e,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new H,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};function Ts(e,t){var i=Ti(e,t.line);if(!i||i.hidden)return null;var o=se(e.doc,t.line),n=Si(i,o,t.line),r=Ze(o,e.doc.direction),s="left";r&&(s=Ge(r,t.ch)%2?"right":"left");var l=Ai(n.map,t.ch,s);return l.offset="right"==l.collapse?l.end:l.start,l}function ks(e,t){return t&&(e.bad=!0),e}function Ds(e,t,i){var o;if(t==e.display.lineDiv){if(!(o=e.display.lineDiv.childNodes[i]))return ks(e.clipPos(fe(e.display.viewTo-1)),!0);t=null,i=0}else for(o=t;;o=o.parentNode){if(!o||o==e.display.lineDiv)return null;if(o.parentNode&&o.parentNode==e.display.lineDiv)break}for(var n=0;n<e.display.view.length;n++){var r=e.display.view[n];if(r.node==o)return Ls(r,t,i)}}function Ls(e,t,i){var o=e.text.firstChild,n=!1;if(!t||!M(o,t))return ks(fe(de(e.line),0),!0);if(t==o&&(n=!0,t=o.childNodes[i],i=0,!t)){var r=e.rest?Y(e.rest):e.line;return ks(fe(de(r),r.text.length),n)}var s=3==t.nodeType?t:null,l=t;for(s||1!=t.childNodes.length||3!=t.firstChild.nodeType||(s=t.firstChild,i&&(i=s.nodeValue.length));l.parentNode!=o;)l=l.parentNode;var a=e.measure,h=a.maps;function d(t,i,o){for(var n=-1;n<(h?h.length:0);n++)for(var r=n<0?a.map:h[n],s=0;s<r.length;s+=3){var l=r[s+2];if(l==t||l==i){var d=de(n<0?e.line:e.rest[n]),c=r[s]+o;return(o<0||l!=t)&&(c=r[s+(o?1:0)]),fe(d,c)}}}var c=d(s,l,i);if(c)return ks(c,n);for(var u=l.nextSibling,p=s?s.nodeValue.length-i:0;u;u=u.nextSibling){if(c=d(u,u.firstChild,0))return ks(fe(c.line,c.ch-p),n);p+=u.textContent.length}for(var f=l.previousSibling,m=i;f;f=f.previousSibling){if(c=d(f,f.firstChild,-1))return ks(fe(c.line,c.ch+m),n);m+=f.textContent.length}}Cs.prototype.init=function(e){var t=this,i=this,o=i.cm,n=i.div=e.lineDiv;function r(e){if(!ot(o,e)){if(o.somethingSelected())ms({lineWise:!1,text:o.getSelections()}),"cut"==e.type&&o.replaceSelection("",null,"cut");else{if(!o.options.lineWiseCopyCut)return;var t=_s(o);ms({lineWise:!0,text:t.text}),"cut"==e.type&&o.operation(function(){o.setSelections(t.ranges,0,U),o.replaceSelection("",null,"cut")})}if(e.clipboardData){e.clipboardData.clearData();var r=fs.text.join("\n");if(e.clipboardData.setData("Text",r),e.clipboardData.getData("Text")==r)return void e.preventDefault()}var s=ws(),l=s.firstChild;o.display.lineSpace.insertBefore(s,o.display.lineSpace.firstChild),l.value=fs.text.join("\n");var a=document.activeElement;N(l),setTimeout(function(){o.display.lineSpace.removeChild(s),a.focus(),a==n&&i.showPrimarySelection()},50)}}ys(n,o.options.spellcheck),Je(n,"paste",function(e){ot(o,e)||vs(e,o)||l<=11&&setTimeout(Ro(o,function(){return t.updateFromDOM()}),20)}),Je(n,"compositionstart",function(e){t.composing={data:e.data,done:!1}}),Je(n,"compositionupdate",function(e){t.composing||(t.composing={data:e.data,done:!1})}),Je(n,"compositionend",function(e){t.composing&&(e.data!=t.composing.data&&t.readFromDOMSoon(),t.composing.done=!0)}),Je(n,"touchstart",function(){return i.forceCompositionEnd()}),Je(n,"input",function(){t.composing||t.readFromDOMSoon()}),Je(n,"copy",r),Je(n,"cut",r)},Cs.prototype.prepareSelection=function(){var e=no(this.cm,!1);return e.focus=this.cm.state.focused,e},Cs.prototype.showSelection=function(e,t){e&&this.cm.display.view.length&&((e.focus||t)&&this.showPrimarySelection(),this.showMultipleSelections(e))},Cs.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},Cs.prototype.showPrimarySelection=function(){var e=this.getSelection(),t=this.cm,o=t.doc.sel.primary(),n=o.from(),r=o.to();if(t.display.viewTo==t.display.viewFrom||n.line>=t.display.viewTo||r.line<t.display.viewFrom)e.removeAllRanges();else{var s=Ds(t,e.anchorNode,e.anchorOffset),l=Ds(t,e.focusNode,e.focusOffset);if(!s||s.bad||!l||l.bad||0!=me(_e(s,l),n)||0!=me(be(s,l),r)){var a=t.display.view,h=n.line>=t.display.viewFrom&&Ts(t,n)||{node:a[0].measure.map[2],offset:0},d=r.line<t.display.viewTo&&Ts(t,r);if(!d){var c=a[a.length-1].measure,u=c.maps?c.maps[c.maps.length-1]:c.map;d={node:u[u.length-1],offset:u[u.length-2]-u[u.length-3]}}if(h&&d){var p,f=e.rangeCount&&e.getRangeAt(0);try{p=T(h.node,h.offset,d.offset,d.node)}catch(e){}p&&(!i&&t.state.focused?(e.collapse(h.node,h.offset),p.collapsed||(e.removeAllRanges(),e.addRange(p))):(e.removeAllRanges(),e.addRange(p)),f&&null==e.anchorNode?e.addRange(f):i&&this.startGracePeriod()),this.rememberSelection()}else e.removeAllRanges()}}},Cs.prototype.startGracePeriod=function(){var e=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){e.gracePeriod=!1,e.selectionChanged()&&e.cm.operation(function(){return e.cm.curOp.selectionChanged=!0})},20)},Cs.prototype.showMultipleSelections=function(e){L(this.cm.display.cursorDiv,e.cursors),L(this.cm.display.selectionDiv,e.selection)},Cs.prototype.rememberSelection=function(){var e=this.getSelection();this.lastAnchorNode=e.anchorNode,this.lastAnchorOffset=e.anchorOffset,this.lastFocusNode=e.focusNode,this.lastFocusOffset=e.focusOffset},Cs.prototype.selectionInEditor=function(){var e=this.getSelection();if(!e.rangeCount)return!1;var t=e.getRangeAt(0).commonAncestorContainer;return M(this.div,t)},Cs.prototype.focus=function(){"nocursor"!=this.cm.options.readOnly&&(this.selectionInEditor()||this.showSelection(this.prepareSelection(),!0),this.div.focus())},Cs.prototype.blur=function(){this.div.blur()},Cs.prototype.getField=function(){return this.div},Cs.prototype.supportsTouch=function(){return!0},Cs.prototype.receivedFocus=function(){var e=this;this.selectionInEditor()?this.pollSelection():Wo(this.cm,function(){return e.cm.curOp.selectionChanged=!0}),this.polling.set(this.cm.options.pollInterval,function t(){e.cm.state.focused&&(e.pollSelection(),e.polling.set(e.cm.options.pollInterval,t))})},Cs.prototype.selectionChanged=function(){var e=this.getSelection();return e.anchorNode!=this.lastAnchorNode||e.anchorOffset!=this.lastAnchorOffset||e.focusNode!=this.lastFocusNode||e.focusOffset!=this.lastFocusOffset},Cs.prototype.pollSelection=function(){if(null==this.readDOMTimeout&&!this.gracePeriod&&this.selectionChanged()){var e=this.getSelection(),t=this.cm;if(g&&d&&this.cm.options.gutters.length&&function(){for(var t=e.anchorNode;t;t=t.parentNode)if(/CodeMirror-gutter-wrapper/.test(t.className))return!0;return!1}())return this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),void this.focus();if(!this.composing){this.rememberSelection();var i=Ds(t,e.anchorNode,e.anchorOffset),o=Ds(t,e.focusNode,e.focusOffset);i&&o&&Wo(t,function(){Wn(t.doc,pn(i,o),U),(i.bad||o.bad)&&(t.curOp.selectionChanged=!0)})}}},Cs.prototype.pollContent=function(){null!=this.readDOMTimeout&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var e,t,i,o=this.cm,n=o.display,r=o.doc.sel.primary(),s=r.from(),l=r.to();if(0==s.ch&&s.line>o.firstLine()&&(s=fe(s.line-1,se(o.doc,s.line-1).length)),l.ch==se(o.doc,l.line).text.length&&l.line<o.lastLine()&&(l=fe(l.line+1,0)),s.line<n.viewFrom||l.line>n.viewTo-1)return!1;i=s.line==n.viewFrom||0==(e=io(o,s.line))?(t=de(n.view[0].line),n.view[0].node):(t=de(n.view[e].line),n.view[e-1].node.nextSibling);var a,h,d=io(o,l.line);if(h=d==n.view.length-1?(a=n.viewTo-1,n.lineDiv.lastChild):(a=de(n.view[d+1].line)-1,n.view[d+1].node.previousSibling),!i)return!1;for(var c=o.doc.splitLines(function(e,t,i,o,n){var r="",s=!1,l=e.doc.lineSeparator(),a=!1;function h(){s&&(r+=l,a&&(r+=l),s=a=!1)}function d(e){e&&(h(),r+=e)}function c(t){if(1==t.nodeType){var i=t.getAttribute("cm-text");if(i)return void d(i);var r,u=t.getAttribute("cm-marker");if(u){var p=e.findMarks(fe(o,0),fe(n+1,0),(g=+u,function(e){return e.id==g}));return void(p.length&&(r=p[0].find(0))&&d(le(e.doc,r.from,r.to).join(l)))}if("false"==t.getAttribute("contenteditable"))return;var f=/^(pre|div|p|li|table|br)$/i.test(t.nodeName);if(!/^br$/i.test(t.nodeName)&&0==t.textContent.length)return;f&&h();for(var m=0;m<t.childNodes.length;m++)c(t.childNodes[m]);/^(pre|p)$/i.test(t.nodeName)&&(a=!0),f&&(s=!0)}else 3==t.nodeType&&d(t.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "));var g}for(;c(t),t!=i;)t=t.nextSibling,a=!1;return r}(o,i,h,t,a)),u=le(o.doc,fe(t,0),fe(a,se(o.doc,a).text.length));1<c.length&&1<u.length;)if(Y(c)==Y(u))c.pop(),u.pop(),a--;else{if(c[0]!=u[0])break;c.shift(),u.shift(),t++}for(var p=0,f=0,m=c[0],g=u[0],v=Math.min(m.length,g.length);p<v&&m.charCodeAt(p)==g.charCodeAt(p);)++p;for(var b=Y(c),_=Y(u),y=Math.min(b.length-(1==c.length?p:0),_.length-(1==u.length?p:0));f<y&&b.charCodeAt(b.length-f-1)==_.charCodeAt(_.length-f-1);)++f;if(1==c.length&&1==u.length&&t==s.line)for(;p&&p>s.ch&&b.charCodeAt(b.length-f-1)==_.charCodeAt(_.length-f-1);)p--,f++;c[c.length-1]=b.slice(0,b.length-f).replace(/^\u200b+/,""),c[0]=c[0].slice(p).replace(/\u200b+$/,"");var w=fe(t,p),x=fe(a,u.length?Y(u).length-f:0);return 1<c.length||c[0]||me(w,x)?(tr(o.doc,c,w,x,"+input"),!0):void 0},Cs.prototype.ensurePolled=function(){this.forceCompositionEnd()},Cs.prototype.reset=function(){this.forceCompositionEnd()},Cs.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},Cs.prototype.readFromDOMSoon=function(){var e=this;null==this.readDOMTimeout&&(this.readDOMTimeout=setTimeout(function(){if(e.readDOMTimeout=null,e.composing){if(!e.composing.done)return;e.composing=null}e.updateFromDOM()},80))},Cs.prototype.updateFromDOM=function(){var e=this;!this.cm.isReadOnly()&&this.pollContent()||Wo(this.cm,function(){return $o(e.cm)})},Cs.prototype.setUneditable=function(e){e.contentEditable="false"},Cs.prototype.onKeyPress=function(e){0==e.charCode||this.composing||(e.preventDefault(),this.cm.isReadOnly()||Ro(this.cm,gs)(this.cm,String.fromCharCode(null==e.charCode?e.keyCode:e.charCode),0))},Cs.prototype.readOnlyChanged=function(e){this.div.contentEditable=String("nocursor"!=e)},Cs.prototype.onContextMenu=function(){},Cs.prototype.resetPosition=function(){},Cs.prototype.needsContentAttribute=!0;var zs,As,Ms,Os=function(e){this.cm=e,this.prevInput="",this.pollingFast=!1,this.polling=new H,this.hasSelection=!1,this.composing=null};Os.prototype.init=function(e){var t=this,i=this,o=this.cm;this.createField(e);var n=this.textarea;function r(e){if(!ot(o,e)){if(o.somethingSelected())ms({lineWise:!1,text:o.getSelections()});else{if(!o.options.lineWiseCopyCut)return;var t=_s(o);ms({lineWise:!0,text:t.text}),"cut"==e.type?o.setSelections(t.ranges,null,U):(i.prevInput="",n.value=t.text.join("\n"),N(n))}"cut"==e.type&&(o.state.cutIncoming=!0)}}e.wrapper.insertBefore(this.wrapper,e.wrapper.firstChild),m&&(n.style.width="0px"),Je(n,"input",function(){s&&9<=l&&t.hasSelection&&(t.hasSelection=null),i.poll()}),Je(n,"paste",function(e){ot(o,e)||vs(e,o)||(o.state.pasteIncoming=!0,i.fastPoll())}),Je(n,"cut",r),Je(n,"copy",r),Je(e.scroller,"paste",function(t){gi(e,t)||ot(o,t)||(o.state.pasteIncoming=!0,i.focus())}),Je(e.lineSpace,"selectstart",function(t){gi(e,t)||lt(t)}),Je(n,"compositionstart",function(){var e=o.getCursor("from");i.composing&&i.composing.range.clear(),i.composing={start:e,range:o.markText(e,o.getCursor("to"),{className:"CodeMirror-composing"})}}),Je(n,"compositionend",function(){i.composing&&(i.poll(),i.composing.range.clear(),i.composing=null)})},Os.prototype.createField=function(e){this.wrapper=ws(),this.textarea=this.wrapper.firstChild},Os.prototype.prepareSelection=function(){var e=this.cm,t=e.display,i=e.doc,o=no(e);if(e.options.moveInputWithCursor){var n=Ri(e,i.sel.primary().head,"div"),r=t.wrapper.getBoundingClientRect(),s=t.lineDiv.getBoundingClientRect();o.teTop=Math.max(0,Math.min(t.wrapper.clientHeight-10,n.top+s.top-r.top)),o.teLeft=Math.max(0,Math.min(t.wrapper.clientWidth-10,n.left+s.left-r.left))}return o},Os.prototype.showSelection=function(e){var t=this.cm.display;L(t.cursorDiv,e.cursors),L(t.selectionDiv,e.selection),null!=e.teTop&&(this.wrapper.style.top=e.teTop+"px",this.wrapper.style.left=e.teLeft+"px")},Os.prototype.reset=function(e){if(!this.contextMenuPending&&!this.composing){var t=this.cm;if(t.somethingSelected()){this.prevInput="";var i=t.getSelection();this.textarea.value=i,t.state.focused&&N(this.textarea),s&&9<=l&&(this.hasSelection=i)}else e||(this.prevInput=this.textarea.value="",s&&9<=l&&(this.hasSelection=null))}},Os.prototype.getField=function(){return this.textarea},Os.prototype.supportsTouch=function(){return!1},Os.prototype.focus=function(){if("nocursor"!=this.cm.options.readOnly&&(!v||O()!=this.textarea))try{this.textarea.focus()}catch(e){}},Os.prototype.blur=function(){this.textarea.blur()},Os.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},Os.prototype.receivedFocus=function(){this.slowPoll()},Os.prototype.slowPoll=function(){var e=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){e.poll(),e.cm.state.focused&&e.slowPoll()})},Os.prototype.fastPoll=function(){var e=!1,t=this;t.pollingFast=!0,t.polling.set(20,function i(){t.poll()||e?(t.pollingFast=!1,t.slowPoll()):(e=!0,t.polling.set(60,i))})},Os.prototype.poll=function(){var e=this,t=this.cm,i=this.textarea,o=this.prevInput;if(this.contextMenuPending||!t.state.focused||yt(i)&&!o&&!this.composing||t.isReadOnly()||t.options.disableInput||t.state.keySeq)return!1;var n=i.value;if(n==o&&!t.somethingSelected())return!1;if(s&&9<=l&&this.hasSelection===n||b&&/[\uf700-\uf7ff]/.test(n))return t.display.input.reset(),!1;if(t.doc.sel==t.display.selForContextMenu){var r=n.charCodeAt(0);if(8203!=r||o||(o=""),8666==r)return this.reset(),this.cm.execCommand("undo")}for(var a=0,h=Math.min(o.length,n.length);a<h&&o.charCodeAt(a)==n.charCodeAt(a);)++a;return Wo(t,function(){gs(t,n.slice(a),o.length-a,null,e.composing?"*compose":null),1e3<n.length||-1<n.indexOf("\n")?i.value=e.prevInput="":e.prevInput=n,e.composing&&(e.composing.range.clear(),e.composing.range=t.markText(e.composing.start,t.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},Os.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},Os.prototype.onKeyPress=function(){s&&9<=l&&(this.hasSelection=null),this.fastPoll()},Os.prototype.onContextMenu=function(e){var t=this,i=t.cm,o=i.display,n=t.textarea,r=to(i,e),h=o.scroller.scrollTop;if(r&&!c){i.options.resetSelectionOnContextMenu&&-1==i.doc.sel.contains(r)&&Ro(i,Wn)(i.doc,pn(r),U);var d=n.style.cssText,u=t.wrapper.style.cssText;t.wrapper.style.cssText="position: absolute";var p,f=t.wrapper.getBoundingClientRect();if(n.style.cssText="position: absolute; width: 30px; height: 30px;\n      top: "+(e.clientY-f.top-5)+"px; left: "+(e.clientX-f.left-5)+"px;\n      z-index: 1000; background: "+(s?"rgba(255, 255, 255, .05)":"transparent")+";\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",a&&(p=window.scrollY),o.input.focus(),a&&window.scrollTo(null,p),o.input.reset(),i.somethingSelected()||(n.value=t.prevInput=" "),t.contextMenuPending=!0,o.selForContextMenu=i.doc.sel,clearTimeout(o.detectingSelectAll),s&&9<=l&&g(),S){dt(e);var m=function(){tt(window,"mouseup",m),setTimeout(v,20)};Je(window,"mouseup",m)}else setTimeout(v,50)}function g(){if(null!=n.selectionStart){var e=i.somethingSelected(),r=""+(e?n.value:"");n.value="",n.value=r,t.prevInput=e?"":"",n.selectionStart=1,n.selectionEnd=r.length,o.selForContextMenu=i.doc.sel}}function v(){if(t.contextMenuPending=!1,t.wrapper.style.cssText=u,n.style.cssText=d,s&&l<9&&o.scrollbars.setScrollTop(o.scroller.scrollTop=h),null!=n.selectionStart){(!s||s&&l<9)&&g();var e=0,r=function(){o.selForContextMenu==i.doc.sel&&0==n.selectionStart&&0<n.selectionEnd&&""==t.prevInput?Ro(i,Yn)(i):e++<10?o.detectingSelectAll=setTimeout(r,500):(o.selForContextMenu=null,o.input.reset())};o.detectingSelectAll=setTimeout(r,200)}}},Os.prototype.readOnlyChanged=function(e){e||this.reset(),this.textarea.disabled="nocursor"==e},Os.prototype.setUneditable=function(){},Os.prototype.needsContentAttribute=!1,function(e){var t=e.optionHandlers;function i(i,o,n,r){e.defaults[i]=o,n&&(t[i]=r?function(e,t,i){i!=rs&&n(e,t,i)}:n)}e.defineOption=i,e.Init=rs,i("value","",function(e,t){return e.setValue(t)},!0),i("mode",null,function(e,t){e.doc.modeOption=t,bn(e)},!0),i("indentUnit",2,bn,!0),i("indentWithTabs",!1),i("smartIndent",!0),i("tabSize",4,function(e){_n(e),Ei(e),$o(e)},!0),i("lineSeparator",null,function(e,t){if(e.doc.lineSep=t){var i=[],o=e.doc.first;e.doc.iter(function(e){for(var n=0;;){var r=e.text.indexOf(t,n);if(-1==r)break;n=r+t.length,i.push(fe(o,r))}o++});for(var n=i.length-1;0<=n;n--)tr(e.doc,t,i[n],fe(i[n].line,i[n].ch+t.length))}}),i("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b-\u200f\u2028\u2029\ufeff]/g,function(e,t,i){e.state.specialChars=new RegExp(t.source+(t.test("\t")?"":"|\t"),"g"),i!=rs&&e.refresh()}),i("specialCharPlaceholder",Gt,function(e){return e.refresh()},!0),i("electricChars",!0),i("inputStyle",v?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),i("spellcheck",!1,function(e,t){return e.getInputField().spellcheck=t},!0),i("rtlMoveVisually",!y),i("wholeLineUpdateBefore",!0),i("theme","default",function(e){ns(e),as(e)},!0),i("keyMap","default",function(e,t,i){var o=Er(t),n=i!=rs&&Er(i);n&&n.detach&&n.detach(e,o),o.attach&&o.attach(e,n||null)}),i("extraKeys",null),i("configureMouse",null),i("lineWrapping",!1,ds,!0),i("gutters",[],function(e){rn(e.options),as(e)},!0),i("fixedGutter",!0,function(e,t){e.display.gutters.style.left=t?Qi(e.display)+"px":"0",e.refresh()},!0),i("coverGutterNextToScrollbar",!1,function(e){return Mo(e)},!0),i("scrollbarStyle","native",function(e){Eo(e),Mo(e),e.display.scrollbars.setScrollTop(e.doc.scrollTop),e.display.scrollbars.setScrollLeft(e.doc.scrollLeft)},!0),i("lineNumbers",!1,function(e){rn(e.options),as(e)},!0),i("firstLineNumber",1,as,!0),i("lineNumberFormatter",function(e){return e},as,!0),i("showCursorWhenSelecting",!1,oo,!0),i("resetSelectionOnContextMenu",!0),i("lineWiseCopyCut",!0),i("pasteLinesPerSelection",!0),i("selectionsMayTouch",!1),i("readOnly",!1,function(e,t){"nocursor"==t&&(po(e),e.display.input.blur()),e.display.input.readOnlyChanged(t)}),i("disableInput",!1,function(e,t){t||e.display.input.reset()},!0),i("dragDrop",!0,hs),i("allowDropFileTypes",null),i("cursorBlinkRate",530),i("cursorScrollMargin",0),i("cursorHeight",1,oo,!0),i("singleCursorHeightPerLine",!0,oo,!0),i("workTime",100),i("workDelay",100),i("flattenSpans",!0,_n,!0),i("addModeClass",!1,_n,!0),i("pollInterval",100),i("undoDepth",200,function(e,t){return e.doc.history.undoDepth=t}),i("historyEventDelay",1250),i("viewportMargin",10,function(e){return e.refresh()},!0),i("maxHighlightLength",1e4,_n,!0),i("moveInputWithCursor",!0,function(e,t){t||e.display.input.resetPosition()}),i("tabindex",null,function(e,t){return e.display.input.getField().tabIndex=t||""}),i("autofocus",null),i("direction","ltr",function(e,t){return e.doc.setDirection(t)},!0),i("phrases",null)}(cs),As=(zs=cs).optionHandlers,Ms=zs.helpers={},zs.prototype={constructor:zs,focus:function(){window.focus(),this.display.input.focus()},setOption:function(e,t){var i=this.options,o=i[e];i[e]==t&&"mode"!=e||(i[e]=t,As.hasOwnProperty(e)&&Ro(this,As[e])(this,t,o),it(this,"optionChange",this,e))},getOption:function(e){return this.options[e]},getDoc:function(){return this.doc},addKeyMap:function(e,t){this.state.keyMaps[t?"push":"unshift"](Er(e))},removeKeyMap:function(e){for(var t=this.state.keyMaps,i=0;i<t.length;++i)if(t[i]==e||t[i].name==e)return t.splice(i,1),!0},addOverlay:Uo(function(e,t){var i=e.token?e:zs.getMode(this.options,e);if(i.startState)throw new Error("Overlays may not be stateful.");!function(e,t,i){for(var o=0,n=i(t);o<e.length&&i(e[o])<=n;)o++;e.splice(o,0,t)}(this.state.overlays,{mode:i,modeSpec:e,opaque:t&&t.opaque,priority:t&&t.priority||0},function(e){return e.priority}),this.state.modeGen++,$o(this)}),removeOverlay:Uo(function(e){for(var t=this.state.overlays,i=0;i<t.length;++i){var o=t[i].modeSpec;if(o==e||"string"==typeof e&&o.name==e)return t.splice(i,1),this.state.modeGen++,void $o(this)}}),indentLine:Uo(function(e,t,i){"string"!=typeof t&&"number"!=typeof t&&(t=null==t?this.options.smartIndent?"smart":"prev":t?"add":"subtract"),ue(this.doc,e)&&ps(this,e,t,i)}),indentSelection:Uo(function(e){for(var t=this.doc.sel.ranges,i=-1,o=0;o<t.length;o++){var n=t[o];if(n.empty())n.head.line>i&&(ps(this,n.head.line,e,!0),i=n.head.line,o==this.doc.sel.primIndex&&wo(this));else{var r=n.from(),s=n.to(),l=Math.max(i,r.line);i=Math.min(this.lastLine(),s.line-(s.ch?0:1))+1;for(var a=l;a<i;++a)ps(this,a,e);var h=this.doc.sel.ranges;0==r.ch&&t.length==h.length&&0<h[o].from().ch&&Fn(this.doc,o,new cn(r,h[o].to()),U)}}}),getTokenAt:function(e,t){return Rt(this,e,t)},getLineTokens:function(e,t){return Rt(this,fe(e),t,!0)},getTokenTypeAt:function(e){e=we(this.doc,e);var t,i=Nt(this,se(this.doc,e.line)),o=0,n=(i.length-1)/2,r=e.ch;if(0==r)t=i[2];else for(;;){var s=o+n>>1;if((s?i[2*s-1]:0)>=r)n=s;else{if(!(i[2*s+1]<r)){t=i[2*s+2];break}o=s+1}}var l=t?t.indexOf("overlay "):-1;return l<0?t:0==l?null:t.slice(0,l-1)},getModeAt:function(e){var t=this.doc.mode;return t.innerMode?zs.innerMode(t,this.getTokenAt(e).state).mode:t},getHelper:function(e,t){return this.getHelpers(e,t)[0]},getHelpers:function(e,t){var i=[];if(!Ms.hasOwnProperty(t))return i;var o=Ms[t],n=this.getModeAt(e);if("string"==typeof n[t])o[n[t]]&&i.push(o[n[t]]);else if(n[t])for(var r=0;r<n[t].length;r++){var s=o[n[t][r]];s&&i.push(s)}else n.helperType&&o[n.helperType]?i.push(o[n.helperType]):o[n.name]&&i.push(o[n.name]);for(var l=0;l<o._global.length;l++){var a=o._global[l];a.pred(n,this)&&-1==W(i,a.val)&&i.push(a.val)}return i},getStateAfter:function(e,t){var i=this.doc;return Pt(this,(e=ye(i,null==e?i.first+i.size-1:e))+1,t).state},cursorCoords:function(e,t){var i=this.doc.sel.primary();return Ri(this,null==e?i.head:"object"==typeof e?we(this.doc,e):e?i.from():i.to(),t||"page")},charCoords:function(e,t){return Wi(this,we(this.doc,e),t||"page")},coordsChar:function(e,t){return $i(this,(e=Hi(this,e,t||"page")).left,e.top)},lineAtHeight:function(e,t){return e=Hi(this,{top:e,left:0},t||"page").top,ce(this.doc,e+this.display.viewOffset)},heightAtLine:function(e,t,i){var o,n=!1;if("number"==typeof e){var r=this.doc.first+this.doc.size-1;e<this.doc.first?e=this.doc.first:r<e&&(e=r,n=!0),o=se(this.doc,e)}else o=e;return Ii(this,o,{top:0,left:0},t||"page",i||n).top+(n?this.doc.height-Ve(o):0)},defaultTextHeight:function(){return Gi(this.display)},defaultCharWidth:function(){return Ki(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(e,t,i,o,n){var r,s=this.display,l=(e=Ri(this,we(this.doc,e))).bottom,a=e.left;if(t.style.position="absolute",t.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(t),s.sizer.appendChild(t),"over"==o)l=e.top;else if("above"==o||"near"==o){var h=Math.max(s.wrapper.clientHeight,this.doc.height),d=Math.max(s.sizer.clientWidth,s.lineSpace.clientWidth);("above"==o||e.bottom+t.offsetHeight>h)&&e.top>t.offsetHeight?l=e.top-t.offsetHeight:e.bottom+t.offsetHeight<=h&&(l=e.bottom),a+t.offsetWidth>d&&(a=d-t.offsetWidth)}t.style.top=l+"px",t.style.left=t.style.right="","right"==n?(a=s.sizer.clientWidth-t.offsetWidth,t.style.right="0px"):("left"==n?a=0:"middle"==n&&(a=(s.sizer.clientWidth-t.offsetWidth)/2),t.style.left=a+"px"),i&&(null!=(r=_o(this,{left:a,top:l,right:a+t.offsetWidth,bottom:l+t.offsetHeight})).scrollTop&&To(this,r.scrollTop),null!=r.scrollLeft&&Do(this,r.scrollLeft))},triggerOnKeyDown:Uo(Yr),triggerOnKeyPress:Uo(Kr),triggerOnKeyUp:Gr,triggerOnMouseDown:Uo(es),execCommand:function(e){if(Hr.hasOwnProperty(e))return Hr[e].call(null,this)},triggerElectric:Uo(function(e){bs(this,e)}),findPosH:function(e,t,i,o){var n=1;t<0&&(n=-1,t=-t);for(var r=we(this.doc,e),s=0;s<t&&!(r=xs(this.doc,r,n,i,o)).hitSide;++s);return r},moveH:Uo(function(e,t){var i=this;this.extendSelectionsBy(function(o){return i.display.shift||i.doc.extend||o.empty()?xs(i.doc,o.head,e,t,i.options.rtlMoveVisually):e<0?o.from():o.to()},$)}),deleteH:Uo(function(e,t){var i=this.doc.sel,o=this.doc;i.somethingSelected()?o.replaceSelection("",null,"+delete"):Nr(this,function(i){var n=xs(o,i.head,e,t,!1);return e<0?{from:n,to:i.head}:{from:i.head,to:n}})}),findPosV:function(e,t,i,o){var n=1,r=o;t<0&&(n=-1,t=-t);for(var s=we(this.doc,e),l=0;l<t;++l){var a=Ri(this,s,"div");if(null==r?r=a.left:a.left=r,(s=Ss(this,a,n,i)).hitSide)break}return s},moveV:Uo(function(e,t){var i=this,o=this.doc,n=[],r=!this.display.shift&&!o.extend&&o.sel.somethingSelected();if(o.extendSelectionsBy(function(s){if(r)return e<0?s.from():s.to();var l=Ri(i,s.head,"div");null!=s.goalColumn&&(l.left=s.goalColumn),n.push(l.left);var a=Ss(i,l,e,t);return"page"==t&&s==o.sel.primary()&&yo(i,Wi(i,a,"div").top-l.top),a},$),n.length)for(var s=0;s<o.sel.ranges.length;s++)o.sel.ranges[s].goalColumn=n[s]}),findWordAt:function(e){var t=se(this.doc,e.line).text,i=e.ch,o=e.ch;if(t){var n=this.getHelper(e,"wordChars");"before"!=e.sticky&&o!=t.length||!i?++o:--i;for(var r=t.charAt(i),s=ee(r,n)?function(e){return ee(e,n)}:/\s/.test(r)?function(e){return/\s/.test(e)}:function(e){return!/\s/.test(e)&&!ee(e)};0<i&&s(t.charAt(i-1));)--i;for(;o<t.length&&s(t.charAt(o));)++o}return new cn(fe(e.line,i),fe(e.line,o))},toggleOverwrite:function(e){null!=e&&e==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?j(this.display.cursorDiv,"CodeMirror-overwrite"):k(this.display.cursorDiv,"CodeMirror-overwrite"),it(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==O()},isReadOnly:function(){return!(!this.options.readOnly&&!this.doc.cantEdit)},scrollTo:Uo(function(e,t){xo(this,e,t)}),getScrollInfo:function(){var e=this.display.scroller;return{left:e.scrollLeft,top:e.scrollTop,height:e.scrollHeight-yi(this)-this.display.barHeight,width:e.scrollWidth-yi(this)-this.display.barWidth,clientHeight:xi(this),clientWidth:wi(this)}},scrollIntoView:Uo(function(e,t){var i;null==e?(e={from:this.doc.sel.primary().head,to:null},null==t&&(t=this.options.cursorScrollMargin)):"number"==typeof e?e={from:fe(e,0),to:null}:null==e.from&&(e={from:e,to:null}),e.to||(e.to=e.from),e.margin=t||0,null!=e.from.line?(i=e,So(this),this.curOp.scrollToPos=i):Co(this,e.from,e.to,e.margin)}),setSize:Uo(function(e,t){var i=this,o=function(e){return"number"==typeof e||/^\d+$/.test(String(e))?e+"px":e};null!=e&&(this.display.wrapper.style.width=o(e)),null!=t&&(this.display.wrapper.style.height=o(t)),this.options.lineWrapping&&ji(this);var n=this.display.viewFrom;this.doc.iter(n,this.display.viewTo,function(e){if(e.widgets)for(var t=0;t<e.widgets.length;t++)if(e.widgets[t].noHScroll){Vo(i,n,"widget");break}++n}),this.curOp.forceUpdate=!0,it(this,"refresh",this)}),operation:function(e){return Wo(this,e)},startOperation:function(){return Po(this)},endOperation:function(){return Fo(this)},refresh:Uo(function(){var e=this.display.cachedTextHeight;$o(this),this.curOp.forceUpdate=!0,Ei(this),xo(this,this.doc.scrollLeft,this.doc.scrollTop),tn(this),(null==e||.5<Math.abs(e-Gi(this.display)))&&eo(this),it(this,"refresh",this)}),swapDoc:Uo(function(e){var t=this.doc;return t.cm=null,Sn(this,e),Ei(this),this.display.input.reset(),xo(this,e.scrollLeft,e.scrollTop),this.curOp.forceScroll=!0,ni(this,"swapDoc",this,t),t}),phrase:function(e){var t=this.options.phrases;return t&&Object.prototype.hasOwnProperty.call(t,e)?t[e]:e},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},st(zs),zs.registerHelper=function(e,t,i){Ms.hasOwnProperty(e)||(Ms[e]=zs[e]={_global:[]}),Ms[e][t]=i},zs.registerGlobalHelper=function(e,t,i,o){zs.registerHelper(e,t,o),Ms[e]._global.push({pred:i,val:o})};var js,Es="iter insert remove copy getEditor constructor".split(" ");for(var Ns in vr.prototype)vr.prototype.hasOwnProperty(Ns)&&W(Es,Ns)<0&&(cs.prototype[Ns]=function(e){return function(){return e.apply(this.doc,arguments)}}(vr.prototype[Ns]));return st(vr),cs.inputStyles={textarea:Os,contenteditable:Cs},cs.defineMode=function(e){cs.defaults.mode||"null"==e||(cs.defaults.mode=e),function(e,t){2<arguments.length&&(t.dependencies=Array.prototype.slice.call(arguments,2)),St[e]=t}.apply(this,arguments)},cs.defineMIME=function(e,t){Ct[e]=t},cs.defineMode("null",function(){return{token:function(e){return e.skipToEnd()}}}),cs.defineMIME("text/plain","null"),cs.defineExtension=function(e,t){cs.prototype[e]=t},cs.defineDocExtension=function(e,t){vr.prototype[e]=t},cs.fromTextArea=function(e,t){if((t=t?F(t):{}).value=e.value,!t.tabindex&&e.tabIndex&&(t.tabindex=e.tabIndex),!t.placeholder&&e.placeholder&&(t.placeholder=e.placeholder),null==t.autofocus){var i=O();t.autofocus=i==e||null!=e.getAttribute("autofocus")&&i==document.body}function o(){e.value=l.getValue()}var n;if(e.form&&(Je(e.form,"submit",o),!t.leaveSubmitMethodAlone)){var r=e.form;n=r.submit;try{var s=r.submit=function(){o(),r.submit=n,r.submit(),r.submit=s}}catch(t){}}t.finishInit=function(t){t.save=o,t.getTextArea=function(){return e},t.toTextArea=function(){t.toTextArea=isNaN,o(),e.parentNode.removeChild(t.getWrapperElement()),e.style.display="",e.form&&(tt(e.form,"submit",o),"function"==typeof e.form.submit&&(e.form.submit=n))}},e.style.display="none";var l=cs(function(t){return e.parentNode.insertBefore(t,e.nextSibling)},t);return l},(js=cs).off=tt,js.on=Je,js.wheelEventPixels=function(e){var t=an(e);return t.x*=ln,t.y*=ln,t},js.Doc=vr,js.splitLines=_t,js.countColumn=I,js.findColumn=V,js.isWordChar=J,js.Pass=R,js.signal=it,js.Line=$t,js.changeEnd=fn,js.scrollbarModel=jo,js.Pos=fe,js.cmpPos=me,js.modes=St,js.mimeModes=Ct,js.resolveMode=Tt,js.getMode=kt,js.modeExtensions=Dt,js.extendMode=function(e,t){F(t,Dt.hasOwnProperty(e)?Dt[e]:Dt[e]={})},js.copyState=Lt,js.startState=At,js.innerMode=zt,js.commands=Hr,js.keyMap=Lr,js.keyName=jr,js.isModifierKey=Mr,js.lookupKey=Ar,js.normalizeKeyMap=function(e){var t={};for(var i in e)if(e.hasOwnProperty(i)){var o=e[i];if(/^(name|fallthrough|(de|at)tach)$/.test(i))continue;if("..."==o){delete e[i];continue}for(var n=G(i.split(" "),zr),r=0;r<n.length;r++){var s,l=void 0;s=r==n.length-1?(l=n.join(" "),o):(l=n.slice(0,r+1).join(" "),"...");var a=t[l];if(a){if(a!=s)throw new Error("Inconsistent bindings for "+l)}else t[l]=s}delete e[i]}for(var h in t)e[h]=t[h];return e},js.StringStream=Mt,js.SharedTextMarker=pr,js.TextMarker=cr,js.LineWidget=ar,js.e_preventDefault=lt,js.e_stopPropagation=at,js.e_stop=dt,js.addClass=j,js.contains=M,js.rmClass=k,js.keyNames=Cr,cs.version="5.41.0",cs},"object"==typeof i&&void 0!==t?t.exports=o():this.CodeMirror=o()},{}],12:[function(e,t,i){var o;o=function(e){"use strict";var t=/^((?:(?:aaas?|about|acap|adiumxtra|af[ps]|aim|apt|attachment|aw|beshare|bitcoin|bolo|callto|cap|chrome(?:-extension)?|cid|coap|com-eventbrite-attendee|content|crid|cvs|data|dav|dict|dlna-(?:playcontainer|playsingle)|dns|doi|dtn|dvb|ed2k|facetime|feed|file|finger|fish|ftp|geo|gg|git|gizmoproject|go|gopher|gtalk|h323|hcp|https?|iax|icap|icon|im|imap|info|ipn|ipp|irc[6s]?|iris(?:\.beep|\.lwz|\.xpc|\.xpcs)?|itms|jar|javascript|jms|keyparc|lastfm|ldaps?|magnet|mailto|maps|market|message|mid|mms|ms-help|msnim|msrps?|mtqp|mumble|mupdate|mvn|news|nfs|nih?|nntp|notes|oid|opaquelocktoken|palm|paparazzi|platform|pop|pres|proxy|psyc|query|res(?:ource)?|rmi|rsync|rtmp|rtsp|secondlife|service|session|sftp|sgn|shttp|sieve|sips?|skype|sm[bs]|snmp|soap\.beeps?|soldat|spotify|ssh|steam|svn|tag|teamspeak|tel(?:net)?|tftp|things|thismessage|tip|tn3270|tv|udp|unreal|urn|ut2004|vemmi|ventrilo|view-source|webcal|wss?|wtai|wyciwyg|xcon(?:-userid)?|xfire|xmlrpc\.beeps?|xmpp|xri|ymsgr|z39\.50[rs]?):(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]|\([^\s()<>]*\))+(?:\([^\s()<>]*\)|[^\s`*!()\[\]{};:'".,<>?]))/i;e.defineMode("gfm",function(i,o){var n=/(?:\@(.*?))/,r=/(?:\@\ (.*?))/,s=/(^|\s)(@all)(\s|$)/,l=0,a={startState:function(){return{code:!1,codeBlock:!1,ateSpace:!1}},copyState:function(e){return{code:e.code,codeBlock:e.codeBlock,ateSpace:e.ateSpace}},token:function(e,i){if(e.match(n))return"usercontainer";if(e.match(r))return"groupcontainer";if(e.match(s))return"allcontainer";if(i.combineTokens=null,i.codeBlock)return e.match(/^```+/)?i.codeBlock=!1:e.skipToEnd(),null;if(e.sol()&&(i.code=!1),e.sol()&&e.match(/^```+/))return e.skipToEnd(),i.codeBlock=!0,null;if("`"===e.peek()){e.next();var a=e.pos;e.eatWhile("`");var h=1+e.pos-a;return i.code?h===l&&(i.code=!1):(l=h,i.code=!0),null}if(i.code)return e.next(),null;if(e.eatSpace())return i.ateSpace=!0,null;if((e.sol()||i.ateSpace)&&(i.ateSpace=!1)!==o.gitHubSpice){if(e.match(/^(?:[a-zA-Z0-9\-_]+\/)?(?:[a-zA-Z0-9\-_]+@)?(?=.{0,6}\d)(?:[a-f0-9]{7,40}\b)/))return i.combineTokens=!0,"link";if(e.match(/^(?:[a-zA-Z0-9\-_]+\/)?(?:[a-zA-Z0-9\-_]+)?#[0-9]+\b/))return i.combineTokens=!0,"link"}return e.match(t)&&"]("!=e.string.slice(e.start-2,e.start)&&(0==e.start||/\W/.test(e.string.charAt(e.start-1)))?(i.combineTokens=!0,"link"):(e.next(),null)},blankLine:function(e){return e.code=!1,null}},h={taskLists:!0,strikethrough:!0,emoji:!0};for(var d in o)h[d]=o[d];return h.name="markdown",e.overlayMode(e.getMode(i,h),a)},"markdown"),e.defineMIME("text/x-gfm","gfm")},"object"==typeof i&&"object"==typeof t?o(e("../../lib/codemirror"),e("../markdown/markdown"),e("../../addon/mode/overlay")):o(CodeMirror)},{"../../addon/mode/overlay":8,"../../lib/codemirror":11,"../markdown/markdown":13}],13:[function(e,t,i){var o;o=function(e){"use strict";e.defineMode("markdown",function(t,i){var o=e.getMode(t,"text/html"),n="null"==o.name;void 0===i.highlightFormatting&&(i.highlightFormatting=!1),void 0===i.maxBlockquoteDepth&&(i.maxBlockquoteDepth=0),void 0===i.taskLists&&(i.taskLists=!1),void 0===i.strikethrough&&(i.strikethrough=!1),void 0===i.emoji&&(i.emoji=!1),void 0===i.fencedCodeBlockHighlighting&&(i.fencedCodeBlockHighlighting=!0),void 0===i.xml&&(i.xml=!0),void 0===i.tokenTypeOverrides&&(i.tokenTypeOverrides={});var r={header:"header",code:"comment",quote:"quote",list1:"variable-2",list2:"variable-3",list3:"keyword",hr:"hr",image:"image",imageAltText:"image-alt-text",imageMarker:"image-marker",formatting:"formatting",linkInline:"link",linkEmail:"link",linkText:"link",linkHref:"string",em:"em",strong:"strong",strikethrough:"strikethrough",emoji:"builtin"};for(var s in r)r.hasOwnProperty(s)&&i.tokenTypeOverrides[s]&&(r[s]=i.tokenTypeOverrides[s]);var l=/^([*\-_])(?:\s*\1){2,}\s*$/,a=/^(?:[*\-+]|^[0-9]+([.)]))\s+/,h=/^\[(x| )\](?=\s)/i,d=i.allowAtxHeaderWithoutSpace?/^(#+)/:/^(#+)(?: |$)/,c=/^ *(?:\={1,}|-{1,})\s*$/,u=/^[^#!\[\]*_\\<>` "'(~:]+/,p=/^(~~~+|```+)[ \t]*([\w+#-]*)[^\n`]*$/,f=/^\s*\[[^\]]+?\]:.*$/,m=/[!"#$%&'()*+,\-.\/:;<=>?@\[\\\]^_`{|}~\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E42\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC9\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDF3C-\uDF3E]|\uD809[\uDC70-\uDC74]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]/;function g(e,t,i){return t.f=t.inline=i,i(e,t)}function v(e,t,i){return t.f=t.block=i,i(e,t)}function b(t){if(t.linkTitle=!1,t.linkHref=!1,t.linkText=!1,t.em=!1,t.strong=!1,t.strikethrough=!1,t.quote=0,t.indentedCode=!1,t.f==y){var i=n;if(!i){var r=e.innerMode(o,t.htmlState);i="xml"==r.mode.name&&null===r.state.tagStart&&!r.state.context&&r.state.tokenize.isInText}i&&(t.f=C,t.block=_,t.htmlState=null)}return t.trailingSpace=0,t.trailingSpaceNewLine=!1,t.prevLine=t.thisLine,t.thisLine={stream:null},null}function _(o,n){var s,u=o.column()===n.indentation,m=!(s=n.prevLine.stream)||!/\S/.test(s.string),v=n.indentedCode,b=n.prevLine.hr,_=!1!==n.list,y=(n.listStack[n.listStack.length-1]||0)+3;n.indentedCode=!1;var S=n.indentation;if(null===n.indentationDiff&&(n.indentationDiff=n.indentation,_)){for(n.em=!1,n.strong=!1,n.code=!1,n.strikethrough=!1,n.list=null;S<n.listStack[n.listStack.length-1];)n.listStack.pop(),n.listStack.length?n.indentation=n.listStack[n.listStack.length-1]:n.list=!1;!1!==n.list&&(n.indentationDiff=S-n.listStack[n.listStack.length-1])}var C=!(m||b||n.prevLine.header||_&&v||n.prevLine.fencedCodeEnd),T=(!1===n.list||b||m)&&n.indentation<=y&&o.match(l),k=null;if(4<=n.indentationDiff&&(v||n.prevLine.fencedCodeEnd||n.prevLine.header||m))return o.skipToEnd(),n.indentedCode=!0,r.code;if(o.eatSpace())return null;if(u&&n.indentation<=y&&(k=o.match(d))&&k[1].length<=6)return n.quote=0,n.header=k[1].length,n.thisLine.header=!0,i.highlightFormatting&&(n.formatting="header"),n.f=n.inline,x(n);if(n.indentation<=y&&o.eat(">"))return n.quote=u?1:n.quote+1,i.highlightFormatting&&(n.formatting="quote"),o.eatSpace(),x(n);if(!T&&!n.setext&&u&&n.indentation<=y&&(k=o.match(a))){var D=k[1]?"ol":"ul";return n.indentation=S+o.current().length,n.list=!0,n.quote=0,n.listStack.push(n.indentation),i.taskLists&&o.match(h,!1)&&(n.taskList=!0),n.f=n.inline,i.highlightFormatting&&(n.formatting=["list","list-"+D]),x(n)}return u&&n.indentation<=y&&(k=o.match(p,!0))?(n.quote=0,n.fencedEndRE=new RegExp(k[1]+"+ *$"),n.localMode=i.fencedCodeBlockHighlighting&&function(i){if(e.findModeByName){var o=e.findModeByName(i);o&&(i=o.mime||o.mimes[0])}var n=e.getMode(t,i);return"null"==n.name?null:n}(k[2]),n.localMode&&(n.localState=e.startState(n.localMode)),n.f=n.block=w,i.highlightFormatting&&(n.formatting="code-block"),n.code=-1,x(n)):n.setext||!(C&&_||n.quote||!1!==n.list||n.code||T||f.test(o.string))&&(k=o.lookAhead(1))&&(k=k.match(c))?(n.setext?(n.header=n.setext,n.setext=0,o.skipToEnd(),i.highlightFormatting&&(n.formatting="header")):(n.header="="==k[0].charAt(0)?1:2,n.setext=n.header),n.thisLine.header=!0,n.f=n.inline,x(n)):T?(o.skipToEnd(),n.hr=!0,n.thisLine.hr=!0,r.hr):"["===o.peek()?g(o,n,L):g(o,n,n.inline)}function y(t,i){var r=o.token(t,i.htmlState);if(!n){var s=e.innerMode(o,i.htmlState);("xml"==s.mode.name&&null===s.state.tagStart&&!s.state.context&&s.state.tokenize.isInText||i.md_inside&&-1<t.current().indexOf(">"))&&(i.f=C,i.block=_,i.htmlState=null)}return r}function w(e,t){var o,n=t.listStack[t.listStack.length-1]||0,s=t.indentation<n,l=n+3;return t.fencedEndRE&&t.indentation<=l&&(s||e.match(t.fencedEndRE))?(i.highlightFormatting&&(t.formatting="code-block"),s||(o=x(t)),t.localMode=t.localState=null,t.block=_,t.f=C,t.fencedEndRE=null,t.code=0,t.thisLine.fencedCodeEnd=!0,s?v(e,t,t.block):o):t.localMode?t.localMode.token(e,t.localState):(e.skipToEnd(),r.code)}function x(e){var t=[];if(e.formatting){t.push(r.formatting),"string"==typeof e.formatting&&(e.formatting=[e.formatting]);for(var o=0;o<e.formatting.length;o++)t.push(r.formatting+"-"+e.formatting[o]),"header"===e.formatting[o]&&t.push(r.formatting+"-"+e.formatting[o]+"-"+e.header),"quote"===e.formatting[o]&&(!i.maxBlockquoteDepth||i.maxBlockquoteDepth>=e.quote?t.push(r.formatting+"-"+e.formatting[o]+"-"+e.quote):t.push("error"))}if(e.taskOpen)return t.push("meta"),t.length?t.join(" "):null;if(e.taskClosed)return t.push("property"),t.length?t.join(" "):null;if(e.linkHref?t.push(r.linkHref,"url"):(e.strong&&t.push(r.strong),e.em&&t.push(r.em),e.strikethrough&&t.push(r.strikethrough),e.emoji&&t.push(r.emoji),e.linkText&&t.push(r.linkText),e.code&&t.push(r.code),e.image&&t.push(r.image),e.imageAltText&&t.push(r.imageAltText,"link"),e.imageMarker&&t.push(r.imageMarker)),e.header&&t.push(r.header,r.header+"-"+e.header),e.quote&&(t.push(r.quote),!i.maxBlockquoteDepth||i.maxBlockquoteDepth>=e.quote?t.push(r.quote+"-"+e.quote):t.push(r.quote+"-"+i.maxBlockquoteDepth)),!1!==e.list){var n=(e.listStack.length-1)%3;n?1===n?t.push(r.list2):t.push(r.list3):t.push(r.list1)}return e.trailingSpaceNewLine?t.push("trailing-space-new-line"):e.trailingSpace&&t.push("trailing-space-"+(e.trailingSpace%2?"a":"b")),t.length?t.join(" "):null}function S(e,t){if(e.match(u,!0))return x(t)}function C(t,n){var s=n.text(t,n);if(void 0!==s)return s;if(n.list)return n.list=null,x(n);if(n.taskList)return" "===t.match(h,!0)[1]?n.taskOpen=!0:n.taskClosed=!0,i.highlightFormatting&&(n.formatting="task"),n.taskList=!1,x(n);if(n.taskOpen=!1,n.taskClosed=!1,n.header&&t.match(/^#+$/,!0))return i.highlightFormatting&&(n.formatting="header"),x(n);var l=t.next();if(n.linkTitle){n.linkTitle=!1;var a=l;"("===l&&(a=")");var d="^\\s*(?:[^"+(a=(a+"").replace(/([.?*+^\[\]\\(){}|-])/g,"\\$1"))+"\\\\]+|\\\\\\\\|\\\\.)"+a;if(t.match(new RegExp(d),!0))return r.linkHref}if("`"===l){var c=n.formatting;i.highlightFormatting&&(n.formatting="code"),t.eatWhile("`");var u=t.current().length;if(0!=n.code||n.quote&&1!=u){if(u!=n.code)return n.formatting=c,x(n);var p=x(n);return n.code=0,p}return n.code=u,x(n)}if(n.code)return x(n);if("\\"===l&&(t.next(),i.highlightFormatting)){var f=x(n),g=r.formatting+"-escape";return f?f+" "+g:g}if("!"===l&&t.match(/\[[^\]]*\] ?(?:\(|\[)/,!1))return n.imageMarker=!0,n.image=!0,i.highlightFormatting&&(n.formatting="image"),x(n);if("["===l&&n.imageMarker&&t.match(/[^\]]*\](\(.*?\)| ?\[.*?\])/,!1))return n.imageMarker=!1,n.imageAltText=!0,i.highlightFormatting&&(n.formatting="image"),x(n);if("]"===l&&n.imageAltText)return i.highlightFormatting&&(n.formatting="image"),f=x(n),n.imageAltText=!1,n.image=!1,n.inline=n.f=k,f;if("["===l&&!n.image)return n.linkText&&t.match(/^.*?\]/)||(n.linkText=!0,i.highlightFormatting&&(n.formatting="link")),x(n);if("]"===l&&n.linkText)return i.highlightFormatting&&(n.formatting="link"),f=x(n),n.linkText=!1,n.inline=n.f=t.match(/\(.*?\)| ?\[.*?\]/,!1)?k:C,f;if("<"===l&&t.match(/^(https?|ftps?):\/\/(?:[^\\>]|\\.)+>/,!1))return n.f=n.inline=T,i.highlightFormatting&&(n.formatting="link"),(f=x(n))?f+=" ":f="",f+r.linkInline;if("<"===l&&t.match(/^[^> \\]+@(?:[^\\>]|\\.)+>/,!1))return n.f=n.inline=T,i.highlightFormatting&&(n.formatting="link"),(f=x(n))?f+=" ":f="",f+r.linkEmail;if(i.xml&&"<"===l&&t.match(/^(!--|\?|!\[CDATA\[|[a-z][a-z0-9-]*(?:\s+[a-z_:.\-]+(?:\s*=\s*[^>]+)?)*\s*(?:>|$))/i,!1)){var b=t.string.indexOf(">",t.pos);if(-1!=b){var _=t.string.substring(t.start,b);/markdown\s*=\s*('|"){0,1}1('|"){0,1}/.test(_)&&(n.md_inside=!0)}return t.backUp(1),n.htmlState=e.startState(o),v(t,n,y)}if(i.xml&&"<"===l&&t.match(/^\/\w*?>/))return n.md_inside=!1,"tag";if("*"===l||"_"===l){for(var w=1,S=1==t.pos?" ":t.string.charAt(t.pos-2);w<3&&t.eat(l);)w++;var D=t.peek()||" ",L=!/\s/.test(D)&&(!m.test(D)||/\s/.test(S)||m.test(S)),z=!/\s/.test(S)&&(!m.test(S)||/\s/.test(D)||m.test(D)),A=null,M=null;if(w%2&&(n.em||!L||"*"!==l&&z&&!m.test(S)?n.em!=l||!z||"*"!==l&&L&&!m.test(D)||(A=!1):A=!0),1<w&&(n.strong||!L||"*"!==l&&z&&!m.test(S)?n.strong!=l||!z||"*"!==l&&L&&!m.test(D)||(M=!1):M=!0),null!=M||null!=A)return i.highlightFormatting&&(n.formatting=null==A?"strong":null==M?"em":"strong em"),!0===A&&(n.em=l),!0===M&&(n.strong=l),p=x(n),!1===A&&(n.em=!1),!1===M&&(n.strong=!1),p}else if(" "===l&&(t.eat("*")||t.eat("_"))){if(" "===t.peek())return x(n);t.backUp(1)}if(i.strikethrough)if("~"===l&&t.eatWhile(l)){if(n.strikethrough)return i.highlightFormatting&&(n.formatting="strikethrough"),p=x(n),n.strikethrough=!1,p;if(t.match(/^[^\s]/,!1))return n.strikethrough=!0,i.highlightFormatting&&(n.formatting="strikethrough"),x(n)}else if(" "===l&&t.match(/^~~/,!0)){if(" "===t.peek())return x(n);t.backUp(2)}if(i.emoji&&":"===l&&t.match(/^(?:[a-z_\d+][a-z_\d+-]*|\-[a-z_\d+][a-z_\d+-]*):/)){n.emoji=!0,i.highlightFormatting&&(n.formatting="emoji");var O=x(n);return n.emoji=!1,O}return" "===l&&(t.match(/^ +$/,!1)?n.trailingSpace++:n.trailingSpace&&(n.trailingSpaceNewLine=!0)),x(n)}function T(e,t){if(">"!==e.next())return e.match(/^[^>]+/,!0),r.linkInline;t.f=t.inline=C,i.highlightFormatting&&(t.formatting="link");var o=x(t);return o?o+=" ":o="",o+r.linkInline}function k(e,t){if(e.eatSpace())return null;var o,n=e.next();return"("===n||"["===n?(t.f=t.inline=(o="("===n?")":"]",function(e,t){if(e.next()!==o)return e.match(D[o]),t.linkHref=!0,x(t);t.f=t.inline=C,i.highlightFormatting&&(t.formatting="link-string");var n=x(t);return t.linkHref=!1,n}),i.highlightFormatting&&(t.formatting="link-string"),t.linkHref=!0,x(t)):"error"}var D={")":/^(?:[^\\\(\)]|\\.|\((?:[^\\\(\)]|\\.)*\))*?(?=\))/,"]":/^(?:[^\\\[\]]|\\.|\[(?:[^\\\[\]]|\\.)*\])*?(?=\])/};function L(e,t){return e.match(/^([^\]\\]|\\.)*\]:/,!1)?(t.f=z,e.next(),i.highlightFormatting&&(t.formatting="link"),t.linkText=!0,x(t)):g(e,t,C)}function z(e,t){if(e.match(/^\]:/,!0)){t.f=t.inline=A,i.highlightFormatting&&(t.formatting="link");var o=x(t);return t.linkText=!1,o}return e.match(/^([^\]\\]|\\.)+/,!0),r.linkText}function A(e,t){return e.eatSpace()?null:(e.match(/^[^\s]+/,!0),void 0===e.peek()?t.linkTitle=!0:e.match(/^(?:\s+(?:"(?:[^"\\]|\\\\|\\.)+"|'(?:[^'\\]|\\\\|\\.)+'|\((?:[^)\\]|\\\\|\\.)+\)))?/,!0),t.f=t.inline=C,r.linkHref+" url")}var M={startState:function(){return{f:_,prevLine:{stream:null},thisLine:{stream:null},block:_,htmlState:null,indentation:0,inline:C,text:S,formatting:!1,linkText:!1,linkHref:!1,linkTitle:!1,code:0,em:!1,strong:!1,header:0,setext:0,hr:!1,taskList:!1,list:!1,listStack:[],quote:0,trailingSpace:0,trailingSpaceNewLine:!1,strikethrough:!1,emoji:!1,fencedEndRE:null}},copyState:function(t){return{f:t.f,prevLine:t.prevLine,thisLine:t.thisLine,block:t.block,htmlState:t.htmlState&&e.copyState(o,t.htmlState),indentation:t.indentation,localMode:t.localMode,localState:t.localMode?e.copyState(t.localMode,t.localState):null,inline:t.inline,text:t.text,formatting:!1,linkText:t.linkText,linkTitle:t.linkTitle,linkHref:t.linkHref,code:t.code,em:t.em,strong:t.strong,strikethrough:t.strikethrough,emoji:t.emoji,header:t.header,setext:t.setext,hr:t.hr,taskList:t.taskList,list:t.list,listStack:t.listStack.slice(0),quote:t.quote,indentedCode:t.indentedCode,trailingSpace:t.trailingSpace,trailingSpaceNewLine:t.trailingSpaceNewLine,md_inside:t.md_inside,fencedEndRE:t.fencedEndRE}},token:function(e,t){if(t.formatting=!1,e!=t.thisLine.stream){if(t.header=0,t.hr=!1,e.match(/^\s*$/,!0))return b(t),null;if(t.prevLine=t.thisLine,t.thisLine={stream:e},t.taskList=!1,t.trailingSpace=0,t.trailingSpaceNewLine=!1,!t.localState&&(t.f=t.block,t.f!=y)){var i=e.match(/^\s*/,!0)[0].replace(/\t/g,"    ").length;if(t.indentation=i,t.indentationDiff=null,0<i)return null}}return t.f(e,t)},innerMode:function(e){return e.block==y?{state:e.htmlState,mode:o}:e.localState?{state:e.localState,mode:e.localMode}:{state:e,mode:M}},indent:function(t,i,n){return t.block==y&&o.indent?o.indent(t.htmlState,i,n):t.localState&&t.localMode.indent?t.localMode.indent(t.localState,i,n):e.Pass},blankLine:b,getType:x,blockCommentStart:"\x3c!--",blockCommentEnd:"--\x3e",closeBrackets:"()[]{}''\"\"``",fold:"markdown"};return M},"xml"),e.defineMIME("text/markdown","markdown"),e.defineMIME("text/x-markdown","markdown")},"object"==typeof i&&"object"==typeof t?o(e("../../lib/codemirror"),e("../xml/xml"),e("../meta")):o(CodeMirror)},{"../../lib/codemirror":11,"../meta":14,"../xml/xml":15}],14:[function(e,t,i){!function(e){"use strict";e.modeInfo=[{name:"APL",mime:"text/apl",mode:"apl",ext:["dyalog","apl"]},{name:"PGP",mimes:["application/pgp","application/pgp-encrypted","application/pgp-keys","application/pgp-signature"],mode:"asciiarmor",ext:["asc","pgp","sig"]},{name:"ASN.1",mime:"text/x-ttcn-asn",mode:"asn.1",ext:["asn","asn1"]},{name:"Asterisk",mime:"text/x-asterisk",mode:"asterisk",file:/^extensions\.conf$/i},{name:"Brainfuck",mime:"text/x-brainfuck",mode:"brainfuck",ext:["b","bf"]},{name:"C",mime:"text/x-csrc",mode:"clike",ext:["c","h","ino"]},{name:"C++",mime:"text/x-c++src",mode:"clike",ext:["cpp","c++","cc","cxx","hpp","h++","hh","hxx"],alias:["cpp"]},{name:"Cobol",mime:"text/x-cobol",mode:"cobol",ext:["cob","cpy"]},{name:"C#",mime:"text/x-csharp",mode:"clike",ext:["cs"],alias:["csharp"]},{name:"Clojure",mime:"text/x-clojure",mode:"clojure",ext:["clj","cljc","cljx"]},{name:"ClojureScript",mime:"text/x-clojurescript",mode:"clojure",ext:["cljs"]},{name:"Closure Stylesheets (GSS)",mime:"text/x-gss",mode:"css",ext:["gss"]},{name:"CMake",mime:"text/x-cmake",mode:"cmake",ext:["cmake","cmake.in"],file:/^CMakeLists.txt$/},{name:"CoffeeScript",mimes:["application/vnd.coffeescript","text/coffeescript","text/x-coffeescript"],mode:"coffeescript",ext:["coffee"],alias:["coffee","coffee-script"]},{name:"Common Lisp",mime:"text/x-common-lisp",mode:"commonlisp",ext:["cl","lisp","el"],alias:["lisp"]},{name:"Cypher",mime:"application/x-cypher-query",mode:"cypher",ext:["cyp","cypher"]},{name:"Cython",mime:"text/x-cython",mode:"python",ext:["pyx","pxd","pxi"]},{name:"Crystal",mime:"text/x-crystal",mode:"crystal",ext:["cr"]},{name:"CSS",mime:"text/css",mode:"css",ext:["css"]},{name:"CQL",mime:"text/x-cassandra",mode:"sql",ext:["cql"]},{name:"D",mime:"text/x-d",mode:"d",ext:["d"]},{name:"Dart",mimes:["application/dart","text/x-dart"],mode:"dart",ext:["dart"]},{name:"diff",mime:"text/x-diff",mode:"diff",ext:["diff","patch"]},{name:"Django",mime:"text/x-django",mode:"django"},{name:"Dockerfile",mime:"text/x-dockerfile",mode:"dockerfile",file:/^Dockerfile$/},{name:"DTD",mime:"application/xml-dtd",mode:"dtd",ext:["dtd"]},{name:"Dylan",mime:"text/x-dylan",mode:"dylan",ext:["dylan","dyl","intr"]},{name:"EBNF",mime:"text/x-ebnf",mode:"ebnf"},{name:"ECL",mime:"text/x-ecl",mode:"ecl",ext:["ecl"]},{name:"edn",mime:"application/edn",mode:"clojure",ext:["edn"]},{name:"Eiffel",mime:"text/x-eiffel",mode:"eiffel",ext:["e"]},{name:"Elm",mime:"text/x-elm",mode:"elm",ext:["elm"]},{name:"Embedded Javascript",mime:"application/x-ejs",mode:"htmlembedded",ext:["ejs"]},{name:"Embedded Ruby",mime:"application/x-erb",mode:"htmlembedded",ext:["erb"]},{name:"Erlang",mime:"text/x-erlang",mode:"erlang",ext:["erl"]},{name:"Esper",mime:"text/x-esper",mode:"sql"},{name:"Factor",mime:"text/x-factor",mode:"factor",ext:["factor"]},{name:"FCL",mime:"text/x-fcl",mode:"fcl"},{name:"Forth",mime:"text/x-forth",mode:"forth",ext:["forth","fth","4th"]},{name:"Fortran",mime:"text/x-fortran",mode:"fortran",ext:["f","for","f77","f90"]},{name:"F#",mime:"text/x-fsharp",mode:"mllike",ext:["fs"],alias:["fsharp"]},{name:"Gas",mime:"text/x-gas",mode:"gas",ext:["s"]},{name:"Gherkin",mime:"text/x-feature",mode:"gherkin",ext:["feature"]},{name:"GitHub Flavored Markdown",mime:"text/x-gfm",mode:"gfm",file:/^(readme|contributing|history).md$/i},{name:"Go",mime:"text/x-go",mode:"go",ext:["go"]},{name:"Groovy",mime:"text/x-groovy",mode:"groovy",ext:["groovy","gradle"],file:/^Jenkinsfile$/},{name:"HAML",mime:"text/x-haml",mode:"haml",ext:["haml"]},{name:"Haskell",mime:"text/x-haskell",mode:"haskell",ext:["hs"]},{name:"Haskell (Literate)",mime:"text/x-literate-haskell",mode:"haskell-literate",ext:["lhs"]},{name:"Haxe",mime:"text/x-haxe",mode:"haxe",ext:["hx"]},{name:"HXML",mime:"text/x-hxml",mode:"haxe",ext:["hxml"]},{name:"ASP.NET",mime:"application/x-aspx",mode:"htmlembedded",ext:["aspx"],alias:["asp","aspx"]},{name:"HTML",mime:"text/html",mode:"htmlmixed",ext:["html","htm","handlebars","hbs"],alias:["xhtml"]},{name:"HTTP",mime:"message/http",mode:"http"},{name:"IDL",mime:"text/x-idl",mode:"idl",ext:["pro"]},{name:"Pug",mime:"text/x-pug",mode:"pug",ext:["jade","pug"],alias:["jade"]},{name:"Java",mime:"text/x-java",mode:"clike",ext:["java"]},{name:"Java Server Pages",mime:"application/x-jsp",mode:"htmlembedded",ext:["jsp"],alias:["jsp"]},{name:"JavaScript",mimes:["text/javascript","text/ecmascript","application/javascript","application/x-javascript","application/ecmascript"],mode:"javascript",ext:["js"],alias:["ecmascript","js","node"]},{name:"JSON",mimes:["application/json","application/x-json"],mode:"javascript",ext:["json","map"],alias:["json5"]},{name:"JSON-LD",mime:"application/ld+json",mode:"javascript",ext:["jsonld"],alias:["jsonld"]},{name:"JSX",mime:"text/jsx",mode:"jsx",ext:["jsx"]},{name:"Jinja2",mime:"null",mode:"jinja2",ext:["j2","jinja","jinja2"]},{name:"Julia",mime:"text/x-julia",mode:"julia",ext:["jl"]},{name:"Kotlin",mime:"text/x-kotlin",mode:"clike",ext:["kt"]},{name:"LESS",mime:"text/x-less",mode:"css",ext:["less"]},{name:"LiveScript",mime:"text/x-livescript",mode:"livescript",ext:["ls"],alias:["ls"]},{name:"Lua",mime:"text/x-lua",mode:"lua",ext:["lua"]},{name:"Markdown",mime:"text/x-markdown",mode:"markdown",ext:["markdown","md","mkd"]},{name:"mIRC",mime:"text/mirc",mode:"mirc"},{name:"MariaDB SQL",mime:"text/x-mariadb",mode:"sql"},{name:"Mathematica",mime:"text/x-mathematica",mode:"mathematica",ext:["m","nb"]},{name:"Modelica",mime:"text/x-modelica",mode:"modelica",ext:["mo"]},{name:"MUMPS",mime:"text/x-mumps",mode:"mumps",ext:["mps"]},{name:"MS SQL",mime:"text/x-mssql",mode:"sql"},{name:"mbox",mime:"application/mbox",mode:"mbox",ext:["mbox"]},{name:"MySQL",mime:"text/x-mysql",mode:"sql"},{name:"Nginx",mime:"text/x-nginx-conf",mode:"nginx",file:/nginx.*\.conf$/i},{name:"NSIS",mime:"text/x-nsis",mode:"nsis",ext:["nsh","nsi"]},{name:"NTriples",mimes:["application/n-triples","application/n-quads","text/n-triples"],mode:"ntriples",ext:["nt","nq"]},{name:"Objective-C",mime:"text/x-objectivec",mode:"clike",ext:["m","mm"],alias:["objective-c","objc"]},{name:"OCaml",mime:"text/x-ocaml",mode:"mllike",ext:["ml","mli","mll","mly"]},{name:"Octave",mime:"text/x-octave",mode:"octave",ext:["m"]},{name:"Oz",mime:"text/x-oz",mode:"oz",ext:["oz"]},{name:"Pascal",mime:"text/x-pascal",mode:"pascal",ext:["p","pas"]},{name:"PEG.js",mime:"null",mode:"pegjs",ext:["jsonld"]},{name:"Perl",mime:"text/x-perl",mode:"perl",ext:["pl","pm"]},{name:"PHP",mimes:["text/x-php","application/x-httpd-php","application/x-httpd-php-open"],mode:"php",ext:["php","php3","php4","php5","php7","phtml"]},{name:"Pig",mime:"text/x-pig",mode:"pig",ext:["pig"]},{name:"Plain Text",mime:"text/plain",mode:"null",ext:["txt","text","conf","def","list","log"]},{name:"PLSQL",mime:"text/x-plsql",mode:"sql",ext:["pls"]},{name:"PowerShell",mime:"application/x-powershell",mode:"powershell",ext:["ps1","psd1","psm1"]},{name:"Properties files",mime:"text/x-properties",mode:"properties",ext:["properties","ini","in"],alias:["ini","properties"]},{name:"ProtoBuf",mime:"text/x-protobuf",mode:"protobuf",ext:["proto"]},{name:"Python",mime:"text/x-python",mode:"python",ext:["BUILD","bzl","py","pyw"],file:/^(BUCK|BUILD)$/},{name:"Puppet",mime:"text/x-puppet",mode:"puppet",ext:["pp"]},{name:"Q",mime:"text/x-q",mode:"q",ext:["q"]},{name:"R",mime:"text/x-rsrc",mode:"r",ext:["r","R"],alias:["rscript"]},{name:"reStructuredText",mime:"text/x-rst",mode:"rst",ext:["rst"],alias:["rst"]},{name:"RPM Changes",mime:"text/x-rpm-changes",mode:"rpm"},{name:"RPM Spec",mime:"text/x-rpm-spec",mode:"rpm",ext:["spec"]},{name:"Ruby",mime:"text/x-ruby",mode:"ruby",ext:["rb"],alias:["jruby","macruby","rake","rb","rbx"]},{name:"Rust",mime:"text/x-rustsrc",mode:"rust",ext:["rs"]},{name:"SAS",mime:"text/x-sas",mode:"sas",ext:["sas"]},{name:"Sass",mime:"text/x-sass",mode:"sass",ext:["sass"]},{name:"Scala",mime:"text/x-scala",mode:"clike",ext:["scala"]},{name:"Scheme",mime:"text/x-scheme",mode:"scheme",ext:["scm","ss"]},{name:"SCSS",mime:"text/x-scss",mode:"css",ext:["scss"]},{name:"Shell",mimes:["text/x-sh","application/x-sh"],mode:"shell",ext:["sh","ksh","bash"],alias:["bash","sh","zsh"],file:/^PKGBUILD$/},{name:"Sieve",mime:"application/sieve",mode:"sieve",ext:["siv","sieve"]},{name:"Slim",mimes:["text/x-slim","application/x-slim"],mode:"slim",ext:["slim"]},{name:"Smalltalk",mime:"text/x-stsrc",mode:"smalltalk",ext:["st"]},{name:"Smarty",mime:"text/x-smarty",mode:"smarty",ext:["tpl"]},{name:"Solr",mime:"text/x-solr",mode:"solr"},{name:"SML",mime:"text/x-sml",mode:"mllike",ext:["sml","sig","fun","smackspec"]},{name:"Soy",mime:"text/x-soy",mode:"soy",ext:["soy"],alias:["closure template"]},{name:"SPARQL",mime:"application/sparql-query",mode:"sparql",ext:["rq","sparql"],alias:["sparul"]},{name:"Spreadsheet",mime:"text/x-spreadsheet",mode:"spreadsheet",alias:["excel","formula"]},{name:"SQL",mime:"text/x-sql",mode:"sql",ext:["sql"]},{name:"SQLite",mime:"text/x-sqlite",mode:"sql"},{name:"Squirrel",mime:"text/x-squirrel",mode:"clike",ext:["nut"]},{name:"Stylus",mime:"text/x-styl",mode:"stylus",ext:["styl"]},{name:"Swift",mime:"text/x-swift",mode:"swift",ext:["swift"]},{name:"sTeX",mime:"text/x-stex",mode:"stex"},{name:"LaTeX",mime:"text/x-latex",mode:"stex",ext:["text","ltx","tex"],alias:["tex"]},{name:"SystemVerilog",mime:"text/x-systemverilog",mode:"verilog",ext:["v","sv","svh"]},{name:"Tcl",mime:"text/x-tcl",mode:"tcl",ext:["tcl"]},{name:"Textile",mime:"text/x-textile",mode:"textile",ext:["textile"]},{name:"TiddlyWiki ",mime:"text/x-tiddlywiki",mode:"tiddlywiki"},{name:"Tiki wiki",mime:"text/tiki",mode:"tiki"},{name:"TOML",mime:"text/x-toml",mode:"toml",ext:["toml"]},{name:"Tornado",mime:"text/x-tornado",mode:"tornado"},{name:"troff",mime:"text/troff",mode:"troff",ext:["1","2","3","4","5","6","7","8","9"]},{name:"TTCN",mime:"text/x-ttcn",mode:"ttcn",ext:["ttcn","ttcn3","ttcnpp"]},{name:"TTCN_CFG",mime:"text/x-ttcn-cfg",mode:"ttcn-cfg",ext:["cfg"]},{name:"Turtle",mime:"text/turtle",mode:"turtle",ext:["ttl"]},{name:"TypeScript",mime:"application/typescript",mode:"javascript",ext:["ts"],alias:["ts"]},{name:"TypeScript-JSX",mime:"text/typescript-jsx",mode:"jsx",ext:["tsx"],alias:["tsx"]},{name:"Twig",mime:"text/x-twig",mode:"twig"},{name:"Web IDL",mime:"text/x-webidl",mode:"webidl",ext:["webidl"]},{name:"VB.NET",mime:"text/x-vb",mode:"vb",ext:["vb"]},{name:"VBScript",mime:"text/vbscript",mode:"vbscript",ext:["vbs"]},{name:"Velocity",mime:"text/velocity",mode:"velocity",ext:["vtl"]},{name:"Verilog",mime:"text/x-verilog",mode:"verilog",ext:["v"]},{name:"VHDL",mime:"text/x-vhdl",mode:"vhdl",ext:["vhd","vhdl"]},{name:"Vue.js Component",mimes:["script/x-vue","text/x-vue"],mode:"vue",ext:["vue"]},{name:"XML",mimes:["application/xml","text/xml"],mode:"xml",ext:["xml","xsl","xsd","svg"],alias:["rss","wsdl","xsd"]},{name:"XQuery",mime:"application/xquery",mode:"xquery",ext:["xy","xquery"]},{name:"Yacas",mime:"text/x-yacas",mode:"yacas",ext:["ys"]},{name:"YAML",mimes:["text/x-yaml","text/yaml"],mode:"yaml",ext:["yaml","yml"],alias:["yml"]},{name:"Z80",mime:"text/x-z80",mode:"z80",ext:["z80"]},{name:"mscgen",mime:"text/x-mscgen",mode:"mscgen",ext:["mscgen","mscin","msc"]},{name:"xu",mime:"text/x-xu",mode:"mscgen",ext:["xu"]},{name:"msgenny",mime:"text/x-msgenny",mode:"mscgen",ext:["msgenny"]}];for(var t=0;t<e.modeInfo.length;t++){var i=e.modeInfo[t];i.mimes&&(i.mime=i.mimes[0])}e.findModeByMIME=function(t){t=t.toLowerCase();for(var i=0;i<e.modeInfo.length;i++){var o=e.modeInfo[i];if(o.mime==t)return o;if(o.mimes)for(var n=0;n<o.mimes.length;n++)if(o.mimes[n]==t)return o}return/\+xml$/.test(t)?e.findModeByMIME("application/xml"):/\+json$/.test(t)?e.findModeByMIME("application/json"):void 0},e.findModeByExtension=function(t){for(var i=0;i<e.modeInfo.length;i++){var o=e.modeInfo[i];if(o.ext)for(var n=0;n<o.ext.length;n++)if(o.ext[n]==t)return o}},e.findModeByFileName=function(t){for(var i=0;i<e.modeInfo.length;i++){var o=e.modeInfo[i];if(o.file&&o.file.test(t))return o}var n=t.lastIndexOf("."),r=-1<n&&t.substring(n+1,t.length);if(r)return e.findModeByExtension(r)},e.findModeByName=function(t){t=t.toLowerCase();for(var i=0;i<e.modeInfo.length;i++){var o=e.modeInfo[i];if(o.name.toLowerCase()==t)return o;if(o.alias)for(var n=0;n<o.alias.length;n++)if(o.alias[n].toLowerCase()==t)return o}}}("object"==typeof i&&"object"==typeof t?e("../lib/codemirror"):CodeMirror)},{"../lib/codemirror":11}],15:[function(e,t,i){!function(e){"use strict";var t={autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0,caseFold:!0},i={autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1,allowMissingTagName:!1,caseFold:!1};e.defineMode("xml",function(o,n){var r,s,l=o.indentUnit,a={},h=n.htmlMode?t:i;for(var d in h)a[d]=h[d];for(var d in n)a[d]=n[d];function c(e,t){function i(i){return(t.tokenize=i)(e,t)}var o=e.next();return"<"==o?e.eat("!")?e.eat("[")?e.match("CDATA[")?i(p("atom","]]>")):null:e.match("--")?i(p("comment","--\x3e")):e.match("DOCTYPE",!0,!0)?(e.eatWhile(/[\w\._\-]/),i(function e(t){return function(i,o){for(var n;null!=(n=i.next());){if("<"==n)return o.tokenize=e(t+1),o.tokenize(i,o);if(">"==n){if(1!=t)return o.tokenize=e(t-1),o.tokenize(i,o);o.tokenize=c;break}}return"meta"}}(1))):null:e.eat("?")?(e.eatWhile(/[\w\._\-]/),t.tokenize=p("meta","?>"),"meta"):(r=e.eat("/")?"closeTag":"openTag",t.tokenize=u,"tag bracket"):"&"!=o?(e.eatWhile(/[^&<]/),null):(e.eat("#")?e.eat("x")?e.eatWhile(/[a-fA-F\d]/)&&e.eat(";"):e.eatWhile(/[\d]/)&&e.eat(";"):e.eatWhile(/[\w\.\-:]/)&&e.eat(";"))?"atom":"error"}function u(e,t){var i=e.next();if(">"==i||"/"==i&&e.eat(">"))return t.tokenize=c,r=">"==i?"endTag":"selfcloseTag","tag bracket";if("="==i)return r="equals",null;if("<"!=i)return/[\'\"]/.test(i)?(t.tokenize=(o=i,(n=function(e,t){for(;!e.eol();)if(e.next()==o){t.tokenize=u;break}return"string"}).isInAttribute=!0,n),t.stringStartCol=e.column(),t.tokenize(e,t)):(e.match(/^[^\s\u00a0=<>\"\']*[^\s\u00a0=<>\"\'\/]/),"word");t.tokenize=c,t.state=g,t.tagName=t.tagStart=null;var o,n,s=t.tokenize(e,t);return s?s+" tag error":"tag error"}function p(e,t){return function(i,o){for(;!i.eol();){if(i.match(t)){o.tokenize=c;break}i.next()}return e}}function f(e){e.context&&(e.context=e.context.prev)}function m(e,t){for(var i;;){if(!e.context)return;if(i=e.context.tagName,!a.contextGrabbers.hasOwnProperty(i)||!a.contextGrabbers[i].hasOwnProperty(t))return;f(e)}}function g(e,t,i){return"openTag"==e?(i.tagStart=t.column(),v):"closeTag"==e?b:g}function v(e,t,i){return"word"==e?(i.tagName=t.current(),s="tag",w):a.allowMissingTagName&&"endTag"==e?(s="tag bracket",w(e,t,i)):(s="error",v)}function b(e,t,i){if("word"!=e)return a.allowMissingTagName&&"endTag"==e?(s="tag bracket",_(e,t,i)):(s="error",y);var o=t.current();return i.context&&i.context.tagName!=o&&a.implicitlyClosed.hasOwnProperty(i.context.tagName)&&f(i),i.context&&i.context.tagName==o||!1===a.matchClosing?(s="tag",_):(s="tag error",y)}function _(e,t,i){return"endTag"!=e?(s="error",_):(f(i),g)}function y(e,t,i){return s="error",_(e,0,i)}function w(e,t,i){if("word"==e)return s="attribute",x;if("endTag"!=e&&"selfcloseTag"!=e)return s="error",w;var o=i.tagName,n=i.tagStart;return i.tagName=i.tagStart=null,"selfcloseTag"==e||a.autoSelfClosers.hasOwnProperty(o)?m(i,o):(m(i,o),i.context=new function(e,t,i){this.prev=e.context,this.tagName=t,this.indent=e.indented,this.startOfLine=i,(a.doNotIndent.hasOwnProperty(t)||e.context&&e.context.noIndent)&&(this.noIndent=!0)}(i,o,n==i.indented)),g}function x(e,t,i){return"equals"==e?S:(a.allowMissing||(s="error"),w(e,0,i))}function S(e,t,i){return"string"==e?C:"word"==e&&a.allowUnquoted?(s="string",w):(s="error",w(e,0,i))}function C(e,t,i){return"string"==e?C:w(e,0,i)}return c.isInText=!0,{startState:function(e){var t={tokenize:c,state:g,indented:e||0,tagName:null,tagStart:null,context:null};return null!=e&&(t.baseIndent=e),t},token:function(e,t){if(!t.tagName&&e.sol()&&(t.indented=e.indentation()),e.eatSpace())return null;r=null;var i=t.tokenize(e,t);return(i||r)&&"comment"!=i&&(s=null,t.state=t.state(r||i,e,t),s&&(i="error"==s?i+" error":s)),i},indent:function(t,i,o){var n=t.context;if(t.tokenize.isInAttribute)return t.tagStart==t.indented?t.stringStartCol+1:t.indented+l;if(n&&n.noIndent)return e.Pass;if(t.tokenize!=u&&t.tokenize!=c)return o?o.match(/^(\s*)/)[0].length:0;if(t.tagName)return!1!==a.multilineTagIndentPastTag?t.tagStart+t.tagName.length+2:t.tagStart+l*(a.multilineTagIndentFactor||1);if(a.alignCDATA&&/<!\[CDATA\[/.test(i))return 0;var r=i&&/^<(\/)?([\w_:\.-]*)/.exec(i);if(r&&r[1])for(;n;){if(n.tagName==r[2]){n=n.prev;break}if(!a.implicitlyClosed.hasOwnProperty(n.tagName))break;n=n.prev}else if(r)for(;n;){var s=a.contextGrabbers[n.tagName];if(!s||!s.hasOwnProperty(r[2]))break;n=n.prev}for(;n&&n.prev&&!n.startOfLine;)n=n.prev;return n?n.indent+l:t.baseIndent||0},electricInput:/<\/[\s\w:]+>$/,blockCommentStart:"\x3c!--",blockCommentEnd:"--\x3e",configuration:a.htmlMode?"html":"xml",helperType:a.htmlMode?"html":"xml",skipAttribute:function(e){e.state==S&&(e.state=w)}}}),e.defineMIME("text/xml","xml"),e.defineMIME("application/xml","xml"),e.mimeModes.hasOwnProperty("text/html")||e.defineMIME("text/html",{name:"xml",htmlMode:!0})}("object"==typeof i&&"object"==typeof t?e("../../lib/codemirror"):CodeMirror)},{"../../lib/codemirror":11}],16:[function(e,t,i){i.read=function(e,t,i,o,n){var r,s,l=8*n-o-1,a=(1<<l)-1,h=a>>1,d=-7,c=i?n-1:0,u=i?-1:1,p=e[t+c];for(c+=u,r=p&(1<<-d)-1,p>>=-d,d+=l;0<d;r=256*r+e[t+c],c+=u,d-=8);for(s=r&(1<<-d)-1,r>>=-d,d+=o;0<d;s=256*s+e[t+c],c+=u,d-=8);if(0===r)r=1-h;else{if(r===a)return s?NaN:1/0*(p?-1:1);s+=Math.pow(2,o),r-=h}return(p?-1:1)*s*Math.pow(2,r-o)},i.write=function(e,t,i,o,n,r){var s,l,a,h=8*r-n-1,d=(1<<h)-1,c=d>>1,u=23===n?Math.pow(2,-24)-Math.pow(2,-77):0,p=o?0:r-1,f=o?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(l=isNaN(t)?1:0,s=d):(s=Math.floor(Math.log(t)/Math.LN2),t*(a=Math.pow(2,-s))<1&&(s--,a*=2),2<=(t+=1<=s+c?u/a:u*Math.pow(2,1-c))*a&&(s++,a/=2),d<=s+c?(l=0,s=d):1<=s+c?(l=(t*a-1)*Math.pow(2,n),s+=c):(l=t*Math.pow(2,c-1)*Math.pow(2,n),s=0));8<=n;e[i+p]=255&l,p+=f,l/=256,n-=8);for(s=s<<n|l,h+=n;0<h;e[i+p]=255&s,p+=f,s/=256,h-=8);e[i+p-f]|=128*m}},{}],17:[function(e,t,i){(function(e){!function(e){"use strict";var o={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:g,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *(?:#+ *)?(?:\n+|$)/,nptable:g,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( *)(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:"^ {0,3}(?:<(script|pre|style)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?\\?>\\n*|<![A-Z][\\s\\S]*?>\\n*|<!\\[CDATA\\[[\\s\\S]*?\\]\\]>\\n*|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:\\n{2,}|$)|<(?!script|pre|style)([a-z][\\w-]*)(?:attribute)*? */?>(?=\\h*\\n)[\\s\\S]*?(?:\\n{2,}|$)|</(?!script|pre|style)[a-z][\\w-]*\\s*>(?=\\h*\\n)[\\s\\S]*?(?:\\n{2,}|$))",def:/^ {0,3}\[(label)\]: *\n? *<?([^\s>]+)>?(?:(?: +\n? *| *\n *)(title))? *(?:\n+|$)/,table:g,lheading:/^([^\n]+)\n *(=|-){2,} *(?:\n+|$)/,paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading| {0,3}>|<\/?(?:tag)(?: +|\n|\/?>)|<(?:script|pre|style|!--))[^\n]+)*)/,text:/^[^\n]+/};function n(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||y.defaults,this.rules=o.normal,this.options.pedantic?this.rules=o.pedantic:this.options.gfm&&(this.options.tables?this.rules=o.tables:this.rules=o.gfm)}o._label=/(?!\s*\])(?:\\[\[\]]|[^\[\]])+/,o._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/,o.def=u(o.def).replace("label",o._label).replace("title",o._title).getRegex(),o.bullet=/(?:[*+-]|\d+\.)/,o.item=/^( *)(bull) [^\n]*(?:\n(?!\1bull )[^\n]*)*/,o.item=u(o.item,"gm").replace(/bull/g,o.bullet).getRegex(),o.list=u(o.list).replace(/bull/g,o.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+o.def.source+")").getRegex(),o._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",o._comment=/<!--(?!-?>)[\s\S]*?-->/,o.html=u(o.html,"i").replace("comment",o._comment).replace("tag",o._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),o.paragraph=u(o.paragraph).replace("hr",o.hr).replace("heading",o.heading).replace("lheading",o.lheading).replace("tag",o._tag).getRegex(),o.blockquote=u(o.blockquote).replace("paragraph",o.paragraph).getRegex(),o.normal=v({},o),o.gfm=v({},o.normal,{fences:/^ *(`{3,}|~{3,})[ \.]*(\S+)? *\n([\s\S]*?)\n? *\1 *(?:\n+|$)/,paragraph:/^/,heading:/^ *(#{1,6}) +([^\n]+?) *#* *(?:\n+|$)/}),o.gfm.paragraph=u(o.paragraph).replace("(?!","(?!"+o.gfm.fences.source.replace("\\1","\\2")+"|"+o.list.source.replace("\\1","\\3")+"|").getRegex(),o.tables=v({},o.gfm,{nptable:/^ *([^|\n ].*\|.*)\n *([-:]+ *\|[-| :]*)(?:\n((?:.*[^>\n ].*(?:\n|$))*)\n*|$)/,table:/^ *\|(.+)\n *\|?( *[-:]+[-| :]*)(?:\n((?: *[^>\n ].*(?:\n|$))*)\n*|$)/}),o.pedantic=v({},o.normal,{html:u("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",o._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/}),n.rules=o,n.lex=function(e,t){return new n(t).lex(e)},n.prototype.lex=function(e){return e=e.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    ").replace(/\u00a0/g," ").replace(/\u2424/g,"\n"),this.token(e,!0)},n.prototype.token=function(e,t){var i,n,r,s,l,a,h,d,c,u,p,f,m,g,v,y;for(e=e.replace(/^ +$/gm,"");e;)if((r=this.rules.newline.exec(e))&&(e=e.substring(r[0].length),1<r[0].length&&this.tokens.push({type:"space"})),r=this.rules.code.exec(e))e=e.substring(r[0].length),r=r[0].replace(/^ {4}/gm,""),this.tokens.push({type:"code",text:this.options.pedantic?r:_(r,"\n")});else if(r=this.rules.fences.exec(e))e=e.substring(r[0].length),this.tokens.push({type:"code",lang:r[2],text:r[3]||""});else if(r=this.rules.heading.exec(e))e=e.substring(r[0].length),this.tokens.push({type:"heading",depth:r[1].length,text:r[2]});else if(t&&(r=this.rules.nptable.exec(e))&&(a={type:"table",header:b(r[1].replace(/^ *| *\| *$/g,"")),align:r[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:r[3]?r[3].replace(/\n$/,"").split("\n"):[]}).header.length===a.align.length){for(e=e.substring(r[0].length),p=0;p<a.align.length;p++)/^ *-+: *$/.test(a.align[p])?a.align[p]="right":/^ *:-+: *$/.test(a.align[p])?a.align[p]="center":/^ *:-+ *$/.test(a.align[p])?a.align[p]="left":a.align[p]=null;for(p=0;p<a.cells.length;p++)a.cells[p]=b(a.cells[p],a.header.length);this.tokens.push(a)}else if(r=this.rules.hr.exec(e))e=e.substring(r[0].length),this.tokens.push({type:"hr"});else if(r=this.rules.blockquote.exec(e))e=e.substring(r[0].length),this.tokens.push({type:"blockquote_start"}),r=r[0].replace(/^ *> ?/gm,""),this.token(r,t),this.tokens.push({type:"blockquote_end"});else if(r=this.rules.list.exec(e)){for(e=e.substring(r[0].length),h={type:"list_start",ordered:g=1<(s=r[2]).length,start:g?+s:"",loose:!1},this.tokens.push(h),i=!(d=[]),m=(r=r[0].match(this.rules.item)).length,p=0;p<m;p++)u=(a=r[p]).length,~(a=a.replace(/^ *([*+-]|\d+\.) +/,"")).indexOf("\n ")&&(u-=a.length,a=this.options.pedantic?a.replace(/^ {1,4}/gm,""):a.replace(new RegExp("^ {1,"+u+"}","gm"),"")),this.options.smartLists&&p!==m-1&&(s===(l=o.bullet.exec(r[p+1])[0])||1<s.length&&1<l.length||(e=r.slice(p+1).join("\n")+e,p=m-1)),n=i||/\n\n(?!\s*$)/.test(a),p!==m-1&&(i="\n"===a.charAt(a.length-1),n||(n=i)),n&&(h.loose=!0),y=void 0,(v=/^\[[ xX]\] /.test(a))&&(y=" "!==a[1],a=a.replace(/^\[[ xX]\] +/,"")),c={type:"list_item_start",task:v,checked:y,loose:n},d.push(c),this.tokens.push(c),this.token(a,!1),this.tokens.push({type:"list_item_end"});if(h.loose)for(m=d.length,p=0;p<m;p++)d[p].loose=!0;this.tokens.push({type:"list_end"})}else if(r=this.rules.html.exec(e))e=e.substring(r[0].length),this.tokens.push({type:this.options.sanitize?"paragraph":"html",pre:!this.options.sanitizer&&("pre"===r[1]||"script"===r[1]||"style"===r[1]),text:r[0]});else if(t&&(r=this.rules.def.exec(e)))e=e.substring(r[0].length),r[3]&&(r[3]=r[3].substring(1,r[3].length-1)),f=r[1].toLowerCase().replace(/\s+/g," "),this.tokens.links[f]||(this.tokens.links[f]={href:r[2],title:r[3]});else if(t&&(r=this.rules.table.exec(e))&&(a={type:"table",header:b(r[1].replace(/^ *| *\| *$/g,"")),align:r[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:r[3]?r[3].replace(/(?: *\| *)?\n$/,"").split("\n"):[]}).header.length===a.align.length){for(e=e.substring(r[0].length),p=0;p<a.align.length;p++)/^ *-+: *$/.test(a.align[p])?a.align[p]="right":/^ *:-+: *$/.test(a.align[p])?a.align[p]="center":/^ *:-+ *$/.test(a.align[p])?a.align[p]="left":a.align[p]=null;for(p=0;p<a.cells.length;p++)a.cells[p]=b(a.cells[p].replace(/^ *\| *| *\| *$/g,""),a.header.length);this.tokens.push(a)}else if(r=this.rules.lheading.exec(e))e=e.substring(r[0].length),this.tokens.push({type:"heading",depth:"="===r[2]?1:2,text:r[1]});else if(t&&(r=this.rules.paragraph.exec(e)))e=e.substring(r[0].length),this.tokens.push({type:"paragraph",text:"\n"===r[1].charAt(r[1].length-1)?r[1].slice(0,-1):r[1]});else if(r=this.rules.text.exec(e))e=e.substring(r[0].length),this.tokens.push({type:"text",text:r[0]});else if(e)throw new Error("Infinite loop on byte: "+e.charCodeAt(0));return this.tokens};var r={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:g,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(href(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(?!\s*\])((?:\\[\[\]]?|[^\[\]\\])+)\]/,nolink:/^!?\[(?!\s*\])((?:\[[^\[\]]*\]|\\[\[\]]|[^\[\]])*)\](?:\[\])?/,strong:/^__([^\s])__(?!_)|^\*\*([^\s])\*\*(?!\*)|^__([^\s][\s\S]*?[^\s])__(?!_)|^\*\*([^\s][\s\S]*?[^\s])\*\*(?!\*)/,em:/^_([^\s_])_(?!_)|^\*([^\s*"<\[])\*(?!\*)|^_([^\s][\s\S]*?[^\s_])_(?!_)|^_([^\s_][\s\S]*?[^\s])_(?!_)|^\*([^\s"<\[][\s\S]*?[^\s*])\*(?!\*)|^\*([^\s*"<\[][\s\S]*?[^\s])\*(?!\*)/,code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:g,text:/^(`+|[^`])[\s\S]*?(?=[\\<!\[`*]|\b_| {2,}\n|$)/};function s(e,t){if(this.options=t||y.defaults,this.links=e,this.rules=r.normal,this.renderer=this.options.renderer||new l,this.renderer.options=this.options,!this.links)throw new Error("Tokens array requires a `links` property.");this.options.pedantic?this.rules=r.pedantic:this.options.gfm&&(this.options.breaks?this.rules=r.breaks:this.rules=r.gfm)}function l(e){this.options=e||y.defaults}function a(){}function h(e){this.tokens=[],this.token=null,this.options=e||y.defaults,this.options.renderer=this.options.renderer||new l,this.renderer=this.options.renderer,this.renderer.options=this.options}function d(e,t){if(t){if(d.escapeTest.test(e))return e.replace(d.escapeReplace,function(e){return d.replacements[e]})}else if(d.escapeTestNoEncode.test(e))return e.replace(d.escapeReplaceNoEncode,function(e){return d.replacements[e]});return e}function c(e){return e.replace(/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi,function(e,t){return"colon"===(t=t.toLowerCase())?":":"#"===t.charAt(0)?"x"===t.charAt(1)?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""})}function u(e,t){return e=e.source||e,t=t||"",{replace:function(t,i){return i=(i=i.source||i).replace(/(^|[^\[])\^/g,"$1"),e=e.replace(t,i),this},getRegex:function(){return new RegExp(e,t)}}}function p(e,t){return f[" "+e]||(/^[^:]+:\/*[^/]*$/.test(e)?f[" "+e]=e+"/":f[" "+e]=_(e,"/",!0)),e=f[" "+e],"//"===t.slice(0,2)?e.replace(/:[\s\S]*/,":")+t:"/"===t.charAt(0)?e.replace(/(:\/*[^/]*)[\s\S]*/,"$1")+t:e+t}r._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,r._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,r._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,r.autolink=u(r.autolink).replace("scheme",r._scheme).replace("email",r._email).getRegex(),r._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,r.tag=u(r.tag).replace("comment",o._comment).replace("attribute",r._attribute).getRegex(),r._label=/(?:\[[^\[\]]*\]|\\[\[\]]?|`[^`]*`|[^\[\]\\])*?/,r._href=/\s*(<(?:\\[<>]?|[^\s<>\\])*>|(?:\\[()]?|\([^\s\x00-\x1f\\]*\)|[^\s\x00-\x1f()\\])*?)/,r._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,r.link=u(r.link).replace("label",r._label).replace("href",r._href).replace("title",r._title).getRegex(),r.reflink=u(r.reflink).replace("label",r._label).getRegex(),r.normal=v({},r),r.pedantic=v({},r.normal,{strong:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/,link:u(/^!?\[(label)\]\((.*?)\)/).replace("label",r._label).getRegex(),reflink:u(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",r._label).getRegex()}),r.gfm=v({},r.normal,{escape:u(r.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^~+(?=\S)([\s\S]*?\S)~+/,text:u(r.text).replace("]|","~]|").replace("|$","|https?://|ftp://|www\\.|[a-zA-Z0-9.!#$%&'*+/=?^_`{\\|}~-]+@|$").getRegex()}),r.gfm.url=u(r.gfm.url).replace("email",r.gfm._extended_email).getRegex(),r.breaks=v({},r.gfm,{br:u(r.br).replace("{2,}","*").getRegex(),text:u(r.gfm.text).replace("{2,}","*").getRegex()}),s.rules=r,s.output=function(e,t,i){return new s(t,i).output(e)},s.prototype.output=function(e){for(var t,i,o,n,r,l,a="";e;)if(r=this.rules.escape.exec(e))e=e.substring(r[0].length),a+=r[1];else if(r=this.rules.autolink.exec(e))e=e.substring(r[0].length),o="@"===r[2]?"mailto:"+(i=d(this.mangle(r[1]))):i=d(r[1]),a+=this.renderer.link(o,null,i);else if(this.inLink||!(r=this.rules.url.exec(e))){if(r=this.rules.tag.exec(e))!this.inLink&&/^<a /i.test(r[0])?this.inLink=!0:this.inLink&&/^<\/a>/i.test(r[0])&&(this.inLink=!1),!this.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(r[0])?this.inRawBlock=!0:this.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(r[0])&&(this.inRawBlock=!1),e=e.substring(r[0].length),a+=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(r[0]):d(r[0]):r[0];else if(r=this.rules.link.exec(e))e=e.substring(r[0].length),this.inLink=!0,o=r[2],n=this.options.pedantic?(t=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(o))?(o=t[1],t[3]):"":r[3]?r[3].slice(1,-1):"",o=o.trim().replace(/^<([\s\S]*)>$/,"$1"),a+=this.outputLink(r,{href:s.escapes(o),title:s.escapes(n)}),this.inLink=!1;else if((r=this.rules.reflink.exec(e))||(r=this.rules.nolink.exec(e))){if(e=e.substring(r[0].length),t=(r[2]||r[1]).replace(/\s+/g," "),!(t=this.links[t.toLowerCase()])||!t.href){a+=r[0].charAt(0),e=r[0].substring(1)+e;continue}this.inLink=!0,a+=this.outputLink(r,t),this.inLink=!1}else if(r=this.rules.strong.exec(e))e=e.substring(r[0].length),a+=this.renderer.strong(this.output(r[4]||r[3]||r[2]||r[1]));else if(r=this.rules.em.exec(e))e=e.substring(r[0].length),a+=this.renderer.em(this.output(r[6]||r[5]||r[4]||r[3]||r[2]||r[1]));else if(r=this.rules.code.exec(e))e=e.substring(r[0].length),a+=this.renderer.codespan(d(r[2].trim(),!0));else if(r=this.rules.br.exec(e))e=e.substring(r[0].length),a+=this.renderer.br();else if(r=this.rules.del.exec(e))e=e.substring(r[0].length),a+=this.renderer.del(this.output(r[1]));else if(r=this.rules.text.exec(e))e=e.substring(r[0].length),this.inRawBlock?a+=this.renderer.text(r[0]):a+=this.renderer.text(d(this.smartypants(r[0])));else if(e)throw new Error("Infinite loop on byte: "+e.charCodeAt(0))}else{if("@"===r[2])o="mailto:"+(i=d(r[0]));else{for(;l=r[0],r[0]=this.rules._backpedal.exec(r[0])[0],l!==r[0];);i=d(r[0]),o="www."===r[1]?"http://"+i:i}e=e.substring(r[0].length),a+=this.renderer.link(o,null,i)}return a},s.escapes=function(e){return e?e.replace(s.rules._escapes,"$1"):e},s.prototype.outputLink=function(e,t){var i=t.href,o=t.title?d(t.title):null;return"!"!==e[0].charAt(0)?this.renderer.link(i,o,this.output(e[1])):this.renderer.image(i,o,d(e[1]))},s.prototype.smartypants=function(e){return this.options.smartypants?e.replace(/---/g,"").replace(/--/g,"").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1").replace(/'/g,"").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1").replace(/"/g,"").replace(/\.{3}/g,""):e},s.prototype.mangle=function(e){if(!this.options.mangle)return e;for(var t,i="",o=e.length,n=0;n<o;n++)t=e.charCodeAt(n),.5<Math.random()&&(t="x"+t.toString(16)),i+="&#"+t+";";return i},l.prototype.code=function(e,t,i){if(this.options.highlight){var o=this.options.highlight(e,t);null!=o&&o!==e&&(i=!0,e=o)}return t?'<pre><code class="'+this.options.langPrefix+d(t,!0)+'">'+(i?e:d(e,!0))+"</code></pre>\n":"<pre><code>"+(i?e:d(e,!0))+"</code></pre>"},l.prototype.blockquote=function(e){return"<blockquote>\n"+e+"</blockquote>\n"},l.prototype.html=function(e){return e},l.prototype.heading=function(e,t,i){return this.options.headerIds?"<h"+t+' id="'+this.options.headerPrefix+i.toLowerCase().replace(/[^\w]+/g,"-")+'">'+e+"</h"+t+">\n":"<h"+t+">"+e+"</h"+t+">\n"},l.prototype.hr=function(){return this.options.xhtml?"<hr/>\n":"<hr>\n"},l.prototype.list=function(e,t,i){var o=t?"ol":"ul";return"<"+o+(t&&1!==i?' start="'+i+'"':"")+">\n"+e+"</"+o+">\n"},l.prototype.listitem=function(e){return"<li>"+e+"</li>\n"},l.prototype.checkbox=function(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "},l.prototype.paragraph=function(e){return"<p>"+e+"</p>\n"},l.prototype.table=function(e,t){return t&&(t="<tbody>"+t+"</tbody>"),"<table>\n<thead>\n"+e+"</thead>\n"+t+"</table>\n"},l.prototype.tablerow=function(e){return"<tr>\n"+e+"</tr>\n"},l.prototype.tablecell=function(e,t){var i=t.header?"th":"td";return(t.align?"<"+i+' align="'+t.align+'">':"<"+i+">")+e+"</"+i+">\n"},l.prototype.strong=function(e){return"<strong>"+e+"</strong>"},l.prototype.em=function(e){return"<em>"+e+"</em>"},l.prototype.codespan=function(e){return"<code>"+e+"</code>"},l.prototype.br=function(){return this.options.xhtml?"<br/>":"<br>"},l.prototype.del=function(e){return"<del>"+e+"</del>"},l.prototype.link=function(e,t,i){if(this.options.sanitize){try{var o=decodeURIComponent(c(e)).replace(/[^\w:]/g,"").toLowerCase()}catch(e){return i}if(0===o.indexOf("javascript:")||0===o.indexOf("vbscript:")||0===o.indexOf("data:"))return i}this.options.baseUrl&&!m.test(e)&&(e=p(this.options.baseUrl,e));try{e=encodeURI(e).replace(/%25/g,"%")}catch(e){return i}var n='<a href="'+d(e)+'"';return t&&(n+=' title="'+t+'"'),n+">"+i+"</a>"},l.prototype.image=function(e,t,i){this.options.baseUrl&&!m.test(e)&&(e=p(this.options.baseUrl,e));var o='<img src="'+e+'" alt="'+i+'"';return t&&(o+=' title="'+t+'"'),o+(this.options.xhtml?"/>":">")},l.prototype.text=function(e){return e},a.prototype.strong=a.prototype.em=a.prototype.codespan=a.prototype.del=a.prototype.text=function(e){return e},a.prototype.link=a.prototype.image=function(e,t,i){return""+i},a.prototype.br=function(){return""},h.parse=function(e,t){return new h(t).parse(e)},h.prototype.parse=function(e){this.inline=new s(e.links,this.options),this.inlineText=new s(e.links,v({},this.options,{renderer:new a})),this.tokens=e.reverse();for(var t="";this.next();)t+=this.tok();return t},h.prototype.next=function(){return this.token=this.tokens.pop()},h.prototype.peek=function(){return this.tokens[this.tokens.length-1]||0},h.prototype.parseText=function(){for(var e=this.token.text;"text"===this.peek().type;)e+="\n"+this.next().text;return this.inline.output(e)},h.prototype.tok=function(){switch(this.token.type){case"space":return"";case"hr":return this.renderer.hr();case"heading":return this.renderer.heading(this.inline.output(this.token.text),this.token.depth,c(this.inlineText.output(this.token.text)));case"code":return this.renderer.code(this.token.text,this.token.lang,this.token.escaped);case"table":var e,t,i,o,n="",r="";for(i="",e=0;e<this.token.header.length;e++)i+=this.renderer.tablecell(this.inline.output(this.token.header[e]),{header:!0,align:this.token.align[e]});for(n+=this.renderer.tablerow(i),e=0;e<this.token.cells.length;e++){for(t=this.token.cells[e],i="",o=0;o<t.length;o++)i+=this.renderer.tablecell(this.inline.output(t[o]),{header:!1,align:this.token.align[o]});r+=this.renderer.tablerow(i)}return this.renderer.table(n,r);case"blockquote_start":for(r="";"blockquote_end"!==this.next().type;)r+=this.tok();return this.renderer.blockquote(r);case"list_start":r="";for(var s=this.token.ordered,l=this.token.start;"list_end"!==this.next().type;)r+=this.tok();return this.renderer.list(r,s,l);case"list_item_start":r="";var a=this.token.loose;for(this.token.task&&(r+=this.renderer.checkbox(this.token.checked));"list_item_end"!==this.next().type;)r+=a||"text"!==this.token.type?this.tok():this.parseText();return this.renderer.listitem(r);case"html":return this.renderer.html(this.token.text);case"paragraph":return this.renderer.paragraph(this.inline.output(this.token.text));case"text":return this.renderer.paragraph(this.parseText())}},d.escapeTest=/[&<>"']/,d.escapeReplace=/[&<>"']/g,d.replacements={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},d.escapeTestNoEncode=/[<>"']|&(?!#?\w+;)/,d.escapeReplaceNoEncode=/[<>"']|&(?!#?\w+;)/g;var f={},m=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function g(){}function v(e){for(var t,i,o=1;o<arguments.length;o++)for(i in t=arguments[o])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}function b(e,t){var i=e.replace(/\|/g,function(e,t,i){for(var o=!1,n=t;0<=--n&&"\\"===i[n];)o=!o;return o?"|":" |"}).split(/ \|/),o=0;if(i.length>t)i.splice(t);else for(;i.length<t;)i.push("");for(;o<i.length;o++)i[o]=i[o].trim().replace(/\\\|/g,"|");return i}function _(e,t,i){if(0===e.length)return"";for(var o=0;o<e.length;){var n=e.charAt(e.length-o-1);if(n!==t||i){if(n===t||!i)break;o++}else o++}return e.substr(0,e.length-o)}function y(e,t,i){if(null==e)throw new Error("marked(): input parameter is undefined or null");if("string"!=typeof e)throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected");if(i||"function"==typeof t){i||(i=t,t=null);var o,r,s=(t=v({},y.defaults,t||{})).highlight,l=0;try{o=n.lex(e,t)}catch(e){return i(e)}r=o.length;var a=function(e){if(e)return t.highlight=s,i(e);var n;try{n=h.parse(o,t)}catch(n){e=n}return t.highlight=s,e?i(e):i(null,n)};if(!s||s.length<3)return a();if(delete t.highlight,!r)return a();for(;l<o.length;l++)!function(e){"code"!==e.type?--r||a():s(e.text,e.lang,function(t,i){return t?a(t):null==i||i===e.text?--r||a():(e.text=i,e.escaped=!0,void(--r||a()))})}(o[l])}else try{return t&&(t=v({},y.defaults,t)),h.parse(n.lex(e,t),t)}catch(e){if(e.message+="\nPlease report this to https://github.com/markedjs/marked.",(t||y.defaults).silent)return"<p>An error occurred:</p><pre>"+d(e.message+"",!0)+"</pre>";throw e}}g.exec=g,y.options=y.setOptions=function(e){return v(y.defaults,e),y},y.getDefaults=function(){return{baseUrl:null,breaks:!1,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:new l,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tables:!0,xhtml:!1}},y.defaults=y.getDefaults(),y.Parser=h,y.parser=h.parse,y.Renderer=l,y.TextRenderer=a,y.Lexer=n,y.lexer=n.lex,y.InlineLexer=s,y.inlineLexer=s.output,y.parse=y,void 0!==t&&"object"==typeof i?t.exports=y:e.marked=y}(this||("undefined"!=typeof window?window:e))}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],18:[function(e,t,i){(function(i,o){var n;!function(){"use strict";(n=function(e,t,i,n){n=n||{},this.dictionary=null,this.rules={},this.dictionaryTable={},this.compoundRules=[],this.compoundRuleCodes={},this.replacementTable=[],this.flags=n.flags||{},this.memoized={},this.loaded=!1;var r,s,l,a,h,d=this;function c(e,t){var i=d._readFile(e,null,n.asyncLoad);n.asyncLoad?i.then(function(e){t(e)}):t(i)}function u(e){t=e,i&&f()}function p(e){i=e,t&&f()}function f(){for(d.rules=d._parseAFF(t),d.compoundRuleCodes={},s=0,a=d.compoundRules.length;s<a;s++){var e=d.compoundRules[s];for(l=0,h=e.length;l<h;l++)d.compoundRuleCodes[e[l]]=[]}for(s in"ONLYINCOMPOUND"in d.flags&&(d.compoundRuleCodes[d.flags.ONLYINCOMPOUND]=[]),d.dictionaryTable=d._parseDIC(i),d.compoundRuleCodes)0===d.compoundRuleCodes[s].length&&delete d.compoundRuleCodes[s];for(s=0,a=d.compoundRules.length;s<a;s++){var o=d.compoundRules[s],r="";for(l=0,h=o.length;l<h;l++){var c=o[l];c in d.compoundRuleCodes?r+="("+d.compoundRuleCodes[c].join("|")+")":r+=c}d.compoundRules[s]=new RegExp(r,"i")}d.loaded=!0,n.asyncLoad&&n.loadedCallback&&n.loadedCallback(d)}return e&&(d.dictionary=e,t&&i?f():"undefined"!=typeof window&&"chrome"in window&&"extension"in window.chrome&&"getURL"in window.chrome.extension?(r=n.dictionaryPath?n.dictionaryPath:"typo/dictionaries",t||c(chrome.extension.getURL(r+"/"+e+"/"+e+".aff"),u),i||c(chrome.extension.getURL(r+"/"+e+"/"+e+".dic"),p)):(r=n.dictionaryPath?n.dictionaryPath:void 0!==o?o+"/dictionaries":"./dictionaries",t||c(r+"/"+e+"/"+e+".aff",u),i||c(r+"/"+e+"/"+e+".dic",p))),this}).prototype={load:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);return this},_readFile:function(t,o,n){if(o=o||"utf8","undefined"!=typeof XMLHttpRequest){var r,s=new XMLHttpRequest;return s.open("GET",t,n),n&&(r=new Promise(function(e,t){s.onload=function(){200===s.status?e(s.responseText):t(s.statusText)},s.onerror=function(){t(s.statusText)}})),s.overrideMimeType&&s.overrideMimeType("text/plain; charset="+o),s.send(null),n?r:s.responseText}if(void 0!==e){var l=e("fs");try{if(l.existsSync(t)){var a=l.statSync(t),h=l.openSync(t,"r"),d=new i(a.size);return l.readSync(h,d,0,d.length,null),d.toString(o,0,d.length)}console.log("Path "+t+" does not exist.")}catch(t){return console.log(t),""}}},_parseAFF:function(e){var t,i,o,n,r,s,l,a={},h=(e=this._removeAffixComments(e)).split("\n");for(n=0,s=h.length;n<s;n++){var d=(t=h[n]).split(/\s+/),c=d[0];if("PFX"==c||"SFX"==c){var u=d[1],p=d[2],f=[];for(l=(r=n+1)+(i=parseInt(d[3],10));r<l;r++){var m=(o=h[r].split(/\s+/))[2],g=o[3].split("/"),v=g[0];"0"===v&&(v="");var b=this.parseRuleCodes(g[1]),_=o[4],y={};y.add=v,0<b.length&&(y.continuationClasses=b),"."!==_&&(y.match="SFX"===c?new RegExp(_+"$"):new RegExp("^"+_)),"0"!=m&&(y.remove="SFX"===c?new RegExp(m+"$"):m),f.push(y)}a[u]={type:c,combineable:"Y"==p,entries:f},n+=i}else if("COMPOUNDRULE"===c){for(l=(r=n+1)+(i=parseInt(d[1],10));r<l;r++)o=(t=h[r]).split(/\s+/),this.compoundRules.push(o[1]);n+=i}else"REP"===c?3===(o=t.split(/\s+/)).length&&this.replacementTable.push([o[1],o[2]]):this.flags[c]=d[1]}return a},_removeAffixComments:function(e){return(e=(e=(e=e.replace(/^\s*#.*$/gm,"")).replace(/^\s\s*/m,"").replace(/\s\s*$/m,"")).replace(/\n{2,}/g,"\n")).replace(/^\s\s*/,"").replace(/\s\s*$/,"")},_parseDIC:function(e){var t=(e=this._removeDicComments(e)).split("\n"),i={};function o(e,t){i.hasOwnProperty(e)||(i[e]=null),0<t.length&&(null===i[e]&&(i[e]=[]),i[e].push(t))}for(var n=1,r=t.length;n<r;n++){var s=t[n].split("/",2),l=s[0];if(1<s.length){var a=this.parseRuleCodes(s[1]);"NEEDAFFIX"in this.flags&&-1!=a.indexOf(this.flags.NEEDAFFIX)||o(l,a);for(var h=0,d=a.length;h<d;h++){var c=a[h],u=this.rules[c];if(u)for(var p=this._applyRule(l,u),f=0,m=p.length;f<m;f++){var g=p[f];if(o(g,[]),u.combineable)for(var v=h+1;v<d;v++){var b=a[v],_=this.rules[b];if(_&&_.combineable&&u.type!=_.type)for(var y=this._applyRule(g,_),w=0,x=y.length;w<x;w++)o(y[w],[])}}c in this.compoundRuleCodes&&this.compoundRuleCodes[c].push(l)}}else o(l.trim(),[])}return i},_removeDicComments:function(e){return e.replace(/^\t.*$/gm,"")},parseRuleCodes:function(e){if(!e)return[];if(!("FLAG"in this.flags))return e.split("");if("long"!==this.flags.FLAG)return"num"===this.flags.FLAG?e.split(","):void 0;for(var t=[],i=0,o=e.length;i<o;i+=2)t.push(e.substr(i,2));return t},_applyRule:function(e,t){for(var i=t.entries,o=[],n=0,r=i.length;n<r;n++){var s=i[n];if(!s.match||e.match(s.match)){var l=e;if(s.remove&&(l=l.replace(s.remove,"")),"SFX"===t.type?l+=s.add:l=s.add+l,o.push(l),"continuationClasses"in s)for(var a=0,h=s.continuationClasses.length;a<h;a++){var d=this.rules[s.continuationClasses[a]];d&&(o=o.concat(this._applyRule(l,d)))}}}return o},check:function(e){if(!this.loaded)throw"Dictionary not loaded.";var t=e.replace(/^\s\s*/,"").replace(/\s\s*$/,"");if(this.checkExact(t))return!0;if(t.toUpperCase()===t){var i=t[0]+t.substring(1).toLowerCase();if(this.hasFlag(i,"KEEPCASE"))return!1;if(this.checkExact(i))return!0}var o=t.toLowerCase();if(o!==t){if(this.hasFlag(o,"KEEPCASE"))return!1;if(this.checkExact(o))return!0}return!1},checkExact:function(e){if(!this.loaded)throw"Dictionary not loaded.";var t,i,o=this.dictionaryTable[e];if(void 0===o){if("COMPOUNDMIN"in this.flags&&e.length>=this.flags.COMPOUNDMIN)for(t=0,i=this.compoundRules.length;t<i;t++)if(e.match(this.compoundRules[t]))return!0}else{if(null===o)return!0;if("object"==typeof o)for(t=0,i=o.length;t<i;t++)if(!this.hasFlag(e,"ONLYINCOMPOUND",o[t]))return!0}return!1},hasFlag:function(e,t,i){if(!this.loaded)throw"Dictionary not loaded.";return!(!(t in this.flags)||(void 0===i&&(i=Array.prototype.concat.apply([],this.dictionaryTable[e])),!i||-1===i.indexOf(this.flags[t])))},alphabet:"",suggest:function(e,t){if(!this.loaded)throw"Dictionary not loaded.";if(t=t||5,this.memoized.hasOwnProperty(e)){var i=this.memoized[e].limit;if(t<=i||this.memoized[e].suggestions.length<i)return this.memoized[e].suggestions.slice(0,t)}if(this.check(e))return[];for(var o=0,n=this.replacementTable.length;o<n;o++){var r=this.replacementTable[o];if(-1!==e.indexOf(r[0])){var s=e.replace(r[0],r[1]);if(this.check(s))return[s]}}var l=this;function a(e){var t,i,o,n,r,s,a=[];for(t=0,n=e.length;t<n;t++){var h=e[t];for(i=0,r=h.length+1;i<r;i++){var d=[h.substring(0,i),h.substring(i)];if(d[1]&&a.push(d[0]+d[1].substring(1)),1<d[1].length&&d[1][1]!==d[1][0]&&a.push(d[0]+d[1][1]+d[1][0]+d[1].substring(2)),d[1])for(o=0,s=l.alphabet.length;o<s;o++)l.alphabet[o]!=d[1].substring(0,1)&&a.push(d[0]+l.alphabet[o]+d[1].substring(1));if(d[1])for(o=0,s=l.alphabet.length;o<s;o++)a.push(d[0]+l.alphabet[o]+d[1])}}return a}return l.alphabet="abcdefghijklmnopqrstuvwxyz",this.memoized[e]={suggestions:function(e){var i,o,n=a([e]),r=a(n),s=function(e){for(var t=[],i=0,o=e.length;i<o;i++)l.check(e[i])&&t.push(e[i]);return t}(n.concat(r)),h={};for(i=0,o=s.length;i<o;i++)s[i]in h?h[s[i]]+=1:h[s[i]]=1;var d=[];for(i in h)h.hasOwnProperty(i)&&d.push([i,h[i]]);d.sort(function(e,t){return e[1]<t[1]?-1:1}).reverse();var c=[],u="lowercase";for(e.toUpperCase()===e?u="uppercase":e.substr(0,1).toUpperCase()+e.substr(1).toLowerCase()===e&&(u="capitalized"),i=0,o=Math.min(t,d.length);i<o;i++)"uppercase"===u?d[i][0]=d[i][0].toUpperCase():"capitalized"===u&&(d[i][0]=d[i][0].substr(0,1).toUpperCase()+d[i][0].substr(1)),l.hasFlag(d[i][0],"NOSUGGEST")||c.push(d[i][0]);return c}(e),limit:t},this.memoized[e].suggestions}}}(),void 0!==t&&(t.exports=n)}).call(this,e("buffer").Buffer,"/node_modules/typo-js")},{buffer:3,fs:2}],19:[function(e,t,i){var o=e("codemirror");o.commands.tabAndIndentMarkdownList=function(e){var t=e.listSelections()[0].head;if(!1!==e.getStateAfter(t.line).list)e.execCommand("indentMore");else if(e.options.indentWithTabs)e.execCommand("insertTab");else{var i=Array(e.options.tabSize+1).join(" ");e.replaceSelection(i)}},o.commands.shiftTabAndUnindentMarkdownList=function(e){var t=e.listSelections()[0].head;if(!1!==e.getStateAfter(t.line).list)e.execCommand("indentLess");else if(e.options.indentWithTabs)e.execCommand("insertTab");else{var i=Array(e.options.tabSize+1).join(" ");e.replaceSelection(i)}}},{codemirror:11}],20:[function(e,t,i){"use strict";var o=e("codemirror");e("codemirror/addon/edit/continuelist.js"),e("./codemirror/tablist"),e("codemirror/addon/display/fullscreen.js"),e("codemirror/mode/markdown/markdown.js"),e("codemirror/addon/mode/overlay.js"),e("codemirror/addon/display/placeholder.js"),e("codemirror/addon/selection/mark-selection.js"),e("codemirror/addon/search/searchcursor.js"),e("codemirror/mode/gfm/gfm.js"),e("codemirror/mode/xml/xml.js");var n=e("codemirror-spell-checker"),r=e("marked"),s=/Mac/.test(navigator.platform),l=new RegExp(/(<a.*?https?:\/\/.*?[^a]>)+?/g),a={toggleBold:v,toggleItalic:b,drawLink:A,toggleHeadingSmaller:x,toggleHeadingBigger:S,drawImage:M,toggleBlockquote:w,toggleOrderedList:L,toggleUnorderedList:D,toggleCodeBlock:y,togglePreview:F,toggleStrikethrough:_,toggleHeading1:C,toggleHeading2:T,toggleHeading3:k,cleanBlock:z,drawTable:O,drawHorizontalRule:j,undo:E,redo:N,toggleSideBySide:P,toggleFullScreen:g},h={toggleBold:"Cmd-B",toggleItalic:"Cmd-I",drawLink:"Cmd-K",toggleHeadingSmaller:"Cmd-H",toggleHeadingBigger:"Shift-Cmd-H",cleanBlock:"Cmd-E",drawImage:"Cmd-Alt-I",toggleBlockquote:"Cmd-'",toggleOrderedList:"Cmd-Alt-L",toggleUnorderedList:"Cmd-L",toggleCodeBlock:"Cmd-Alt-C",togglePreview:"Cmd-P",toggleSideBySide:"F9",toggleFullScreen:"F11"},d=function(e){for(var t in a)if(a[t]===e)return t;return null},c=function(){var e,t=!1;return e=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(e.substr(0,4)))&&(t=!0),t};function u(e){return s?e.replace("Ctrl","Cmd"):e.replace("Cmd","Ctrl")}function p(e,t,i){var o,n,r,l,a="uploadImage"===(e=e||{}).name?document.createElement("a"):document.createElement("button");a.className=e.name,t=null==t||t,e.title&&t&&(a.title=(n=i,l=e.title,(o=e.action)&&n[r=d(o)]&&(l+=" ("+u(n[r])+")"),l),s&&(a.title=a.title.replace("Ctrl",""),a.title=a.title.replace("Alt",""))),e.noDisable&&a.classList.add("no-disable"),e.noMobile&&a.classList.add("no-mobile"),a.tabIndex=-1;var h=document.createElement("i");return h.className=e.className,a.appendChild(h),a}function f(e,t){t=t||e.getCursor("start");var i=e.getTokenAt(t);if(!i.type)return{};for(var o,n,r=i.type.split(" "),s={},l=0;l<r.length;l++)"strong"===(o=r[l])?s.bold=!0:"variable-2"===o?(n=e.getLine(t.line),/^\s*\d+\.\s/.test(n)?s["ordered-list"]=!0:s["unordered-list"]=!0):"atom"===o?s.quote=!0:"em"===o?s.italic=!0:"quote"===o?s.quote=!0:"strikethrough"===o?s.strikethrough=!0:"comment"===o?s.code=!0:"link"===o?s.link=!0:"tag"===o?s.image=!0:o.match(/^header(-[1-6])?$/)&&(s[o.replace("header","heading")]=!0);return s}var m="";function g(e){var t=e.codemirror;t.setOption("fullScreen",!t.getOption("fullScreen")),t.getOption("fullScreen")?(m=document.body.style.overflow,document.body.style.overflow="hidden"):document.body.style.overflow=m;var i=t.getWrapperElement();if(/fullscreen/.test(i.previousSibling.className)?i.previousSibling.className=i.previousSibling.className.replace(/\s*fullscreen\b/,""):i.previousSibling.className+=" fullscreen",e.toolbarElements&&e.toolbarElements.fullscreen){var o=e.toolbarElements.fullscreen;/active/.test(o.className)?o.className=o.className.replace(/\s*active\s*/g,""):o.className+=" active"}var n=t.getWrapperElement().nextSibling;/editor-preview-active-side/.test(n.className)&&P(e),e.options.onToggleFullScreen&&e.options.onToggleFullScreen(t.getOption("fullScreen")||!1)}function v(e){R(e,"bold",e.options.blockStyles.bold)}function b(e){R(e,"italic",e.options.blockStyles.italic)}function _(e){R(e,"strikethrough","~~")}function y(e){var t=e.options.blockStyles.code;function i(e){if("object"!=typeof e)throw"fencing_line() takes a 'line' object (not a line number, or line text).  Got: "+typeof e+": "+e;return e.styles&&e.styles[2]&&-1!==e.styles[2].indexOf("formatting-code-block")}function o(e){return e.state.base.base||e.state.base}function n(e,t,n,r,s){n=n||e.getLineHandle(t),r=r||e.getTokenAt({line:t,ch:1}),s=s||!!n.text&&e.getTokenAt({line:t,ch:n.text.length-1});var l=r.type?r.type.split(" "):[];return s&&o(s).indentedCode?"indented":-1!==l.indexOf("comment")&&(o(r).fencedChars||o(s).fencedChars||i(n)?"fenced":"single")}var r,s,l,a,h,d,c,u,p,f,m,g,v=e.codemirror,b=v.getCursor("start"),_=v.getCursor("end"),y=v.getTokenAt({line:b.line,ch:b.ch||1}),w=v.getLineHandle(b.line),x=n(v,b.line,w,y);if("single"===x){var S=w.text.slice(0,b.ch).replace("`",""),C=w.text.slice(b.ch).replace("`","");v.replaceRange(S+C,{line:b.line,ch:0},{line:b.line,ch:99999999999999}),b.ch--,b!==_&&_.ch--,v.setSelection(b,_),v.focus()}else if("fenced"===x)if(b.line!==_.line||b.ch!==_.ch){for(r=b.line;0<=r&&!i(w=v.getLineHandle(r));r--);var T,k,D,L,z=o(v.getTokenAt({line:r,ch:1})).fencedChars;k=i(v.getLineHandle(b.line))?(T="",b.line):i(v.getLineHandle(b.line-1))?(T="",b.line-1):(T=z+"\n",b.line),i(v.getLineHandle(_.line))?(D="",L=_.line,0===_.ch&&(L+=1)):(D=0!==_.ch&&i(v.getLineHandle(_.line+1))?"":z+"\n",L=_.line+1),0===_.ch&&(L-=1),v.operation(function(){v.replaceRange(D,{line:L,ch:0},{line:L+(D?0:1),ch:0}),v.replaceRange(T,{line:k,ch:0},{line:k+(T?0:1),ch:0})}),v.setSelection({line:k+(T?1:0),ch:0},{line:L+(T?1:-1),ch:0}),v.focus()}else{var A=b.line;if(i(v.getLineHandle(b.line))&&(A="fenced"===n(v,b.line+1)?(r=b.line,b.line+1):(s=b.line,b.line-1)),void 0===r)for(r=A;0<=r&&!i(w=v.getLineHandle(r));r--);if(void 0===s)for(l=v.lineCount(),s=A;s<l&&!i(w=v.getLineHandle(s));s++);v.operation(function(){v.replaceRange("",{line:r,ch:0},{line:r+1,ch:0}),v.replaceRange("",{line:s-1,ch:0},{line:s,ch:0})}),v.focus()}else if("indented"===x){if(b.line!==_.line||b.ch!==_.ch)r=b.line,s=_.line,0===_.ch&&s--;else{for(r=b.line;0<=r;r--)if(!(w=v.getLineHandle(r)).text.match(/^\s*$/)&&"indented"!==n(v,r,w)){r+=1;break}for(l=v.lineCount(),s=b.line;s<l;s++)if(!(w=v.getLineHandle(s)).text.match(/^\s*$/)&&"indented"!==n(v,s,w)){s-=1;break}}var M=v.getLineHandle(s+1),O=M&&v.getTokenAt({line:s+1,ch:M.text.length-1});O&&o(O).indentedCode&&v.replaceRange("\n",{line:s+1,ch:0});for(var j=r;j<=s;j++)v.indentLine(j,"subtract");v.focus()}else{var E=b.line===_.line&&b.ch===_.ch&&0===b.ch,N=b.line!==_.line;E||N?(a=v,d=_,c=t,u=(h=b).line+1,p=d.line+1,m=c+"\n",g="\n"+c,(f=h.line!==d.line)&&p++,f&&0===d.ch&&(g=c+"\n",p--),I(a,!1,[m,g]),a.setSelection({line:u,ch:0},{line:p,ch:0})):I(v,!1,["`","`"])}}function w(e){W(e.codemirror,"quote")}function x(e){H(e.codemirror,"smaller")}function S(e){H(e.codemirror,"bigger")}function C(e){H(e.codemirror,void 0,1)}function T(e){H(e.codemirror,void 0,2)}function k(e){H(e.codemirror,void 0,3)}function D(e){W(e.codemirror,"unordered-list")}function L(e){W(e.codemirror,"ordered-list")}function z(e){!function(e){if(!/editor-preview-active/.test(e.getWrapperElement().lastChild.className))for(var t,i=e.getCursor("start"),o=e.getCursor("end"),n=i.line;n<=o.line;n++)t=(t=e.getLine(n)).replace(/^[ ]*([# ]+|\*|-|[> ]+|[0-9]+(.|\)))[ ]*/,""),e.replaceRange(t,{line:n,ch:0},{line:n,ch:99999999999999})}(e.codemirror)}function A(e){var t=e.codemirror,i=f(t),o=e.options,n="https://";if(o.promptURLs&&!(n=prompt(o.promptTexts.link)))return!1;I(t,i.link,o.insertTexts.link,n)}function M(e){var t=e.codemirror,i=f(t),o=e.options,n="https://";if(o.promptURLs&&!(n=prompt(o.promptTexts.image)))return!1;I(t,i.image,o.insertTexts.image,n)}function O(e){var t=e.codemirror,i=f(t),o=e.options;I(t,i.table,o.insertTexts.table)}function j(e){var t=e.codemirror,i=f(t),o=e.options;I(t,i.image,o.insertTexts.horizontalRule)}function E(e){var t=e.codemirror;t.undo(),t.focus()}function N(e){var t=e.codemirror;t.redo(),t.focus()}function P(e){var t=e.codemirror,i=t.getWrapperElement(),o=i.nextSibling,n=e.toolbarElements&&e.toolbarElements["side-by-side"],r=!1;/editor-preview-active-side/.test(o.className)?(o.className=o.className.replace(/\s*editor-preview-active-side\s*/g,""),n&&(n.className=n.className.replace(/\s*active\s*/g,"")),i.className=i.className.replace(/\s*CodeMirror-sided\s*/g," ")):(setTimeout(function(){t.getOption("fullScreen")||g(e),o.className+=" editor-preview-active-side"},1),n&&(n.className+=" active"),i.className+=" CodeMirror-sided",r=!0);var s=i.lastChild;if(/editor-preview-active/.test(s.className)){s.className=s.className.replace(/\s*editor-preview-active\s*/g,"");var l=e.toolbarElements.preview,a=i.previousSibling;l.className=l.className.replace(/\s*active\s*/g,""),a.className=a.className.replace(/\s*disabled-for-preview*/g,"")}t.sideBySideRenderingFunction||(t.sideBySideRenderingFunction=function(){o.innerHTML=e.options.previewRender(e.value(),o)}),r?(o.innerHTML=e.options.previewRender(e.value(),o),t.on("update",t.sideBySideRenderingFunction)):t.off("update",t.sideBySideRenderingFunction),t.refresh()}function F(e){var t=e.codemirror,i=t.getWrapperElement(),o=i.previousSibling,n=!!e.options.toolbar&&e.toolbarElements.preview,r=i.lastChild;r&&/editor-preview/.test(r.className)||((r=document.createElement("div")).className="editor-preview",i.appendChild(r)),/editor-preview-active/.test(r.className)?(r.className=r.className.replace(/\s*editor-preview-active\s*/g,""),n&&(n.className=n.className.replace(/\s*active\s*/g,""),o.className=o.className.replace(/\s*disabled-for-preview*/g,""))):(setTimeout(function(){r.className+=" editor-preview-active"},1),n&&(n.className+=" active",o.className+=" disabled-for-preview")),r.innerHTML=e.options.previewRender(e.value(),r);var s=t.getWrapperElement().nextSibling;/editor-preview-active-side/.test(s.className)&&P(e)}function I(e,t,i,o){if(!/editor-preview-active/.test(e.getWrapperElement().lastChild.className)){var n,r=i[0],s=i[1],l={},a={};"function"!=typeof Object.assign&&"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(e,t){if(null==e)throw new TypeError("Cannot convert undefined or null to object");var i=Object(e);if(null===t)return i;for(var o=1;o<arguments.length;o++){var n=arguments[o];if(null!=n)for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=n[r])}return i},writable:!0,configurable:!0}),Object.assign(l,e.getCursor("start")),Object.assign(a,e.getCursor("end")),o&&(s=s.replace("#url#",o)),t?(r=(n=e.getLine(l.line)).slice(0,l.ch),s=n.slice(l.ch),e.replaceRange(r+s,{line:l.line,ch:0})):(n=e.getSelection(),e.replaceSelection(r+n+s),l.ch+=r.length,l!==a&&(a.ch+=r.length)),e.setSelection(l,a),e.focus()}}function H(e,t,i){if(!/editor-preview-active/.test(e.getWrapperElement().lastChild.className)){for(var o,n,r,s=e.getCursor("start"),l=e.getCursor("end"),a=s.line;a<=l.line;a++)o=a,n=void 0,r=(n=e.getLine(o)).search(/[^#]/),n=void 0!==t?r<=0?"bigger"==t?"###### "+n:"# "+n:6==r&&"smaller"==t?n.substr(7):1==r&&"bigger"==t?n.substr(2):"bigger"==t?n.substr(1):"#"+n:1==i?r<=0?"# "+n:r==i?n.substr(r+1):"# "+n.substr(r+1):2==i?r<=0?"## "+n:r==i?n.substr(r+1):"## "+n.substr(r+1):r<=0?"### "+n:r==i?n.substr(r+1):"### "+n.substr(r+1),e.replaceRange(n,{line:o,ch:0},{line:o,ch:99999999999999});e.focus()}}function W(e,t){if(!/editor-preview-active/.test(e.getWrapperElement().lastChild.className)){for(var i=/^(\s*)(\*|-|\+|\d*\.)(\s+)/,o=/^\s*/,n=f(e),r=e.getCursor("start"),s=e.getCursor("end"),l={quote:/^(\s*)>\s+/,"unordered-list":i,"ordered-list":i},a=1,h=r.line;h<=s.line;h++)!function(r){var s,h,d,c,u=e.getLine(r);if(n[t])u=u.replace(l[t],"$1");else{var p=i.exec(u),f=(c=a,{quote:">","unordered-list":"*","ordered-list":"%%i."}[t].replace("%%i",c));u=null!==p?(s=t,h=p[2],d=new RegExp({quote:">","unordered-list":"*","ordered-list":"d+."}[s]),h&&d.test(h)&&(f=""),p[1]+f+p[3]+u.replace(o,"").replace(l[t],"$1")):f+" "+u,a+=1}e.replaceRange(u,{line:r,ch:0},{line:r,ch:99999999999999})}(h);e.focus()}}function R(e,t,i,o){if(!/editor-preview-active/.test(e.codemirror.getWrapperElement().lastChild.className)){o=void 0===o?i:o;var n,r=e.codemirror,s=f(r),l=i,a=o,h=r.getCursor("start"),d=r.getCursor("end");s[t]?(l=(n=r.getLine(h.line)).slice(0,h.ch),a=n.slice(h.ch),"bold"==t?(l=l.replace(/(\*\*|__)(?![\s\S]*(\*\*|__))/,""),a=a.replace(/(\*\*|__)/,"")):"italic"==t?(l=l.replace(/(\*|_)(?![\s\S]*(\*|_))/,""),a=a.replace(/(\*|_)/,"")):"strikethrough"==t&&(l=l.replace(/(\*\*|~~)(?![\s\S]*(\*\*|~~))/,""),a=a.replace(/(\*\*|~~)/,"")),r.replaceRange(l+a,{line:h.line,ch:0},{line:h.line,ch:99999999999999}),"bold"==t||"strikethrough"==t?(h.ch-=2,h!==d&&(d.ch-=2)):"italic"==t&&(h.ch-=1,h!==d&&(d.ch-=1))):(n=r.getSelection(),"bold"==t?n=(n=n.split("**").join("")).split("__").join(""):"italic"==t?n=(n=n.split("*").join("")).split("_").join(""):"strikethrough"==t&&(n=n.split("~~").join("")),r.replaceSelection(l+n+a),h.ch+=i.length,d.ch=h.ch+n.length),r.setSelection(h,d),r.focus()}}function U(e,t){for(var i in t)t.hasOwnProperty(i)&&(t[i]instanceof Array?e[i]=t[i].concat(e[i]instanceof Array?e[i]:[]):null!==t[i]&&"object"==typeof t[i]&&t[i].constructor===Object?e[i]=U(e[i]||{},t[i]):e[i]=t[i]);return e}function B(e){for(var t=1;t<arguments.length;t++)e=U(e,arguments[t]);return e}function $(e){var t=e.match(/[a-zA-Z0-9_\u0392-\u03c9\u0410-\u04F9]+|[\u4E00-\u9FFF\u3400-\u4dbf\uf900-\ufaff\u3040-\u309f\uac00-\ud7af]+/g),i=0;if(null===t)return i;for(var o=0;o<t.length;o++)19968<=t[o].charCodeAt(0)?i+=t[o].length:i+=1;return i}var V={bold:{name:"bold",action:v,className:"fa fa-bold",title:"Bold",default:!0},italic:{name:"italic",action:b,className:"fa fa-italic",title:"Italic",default:!0},strikethrough:{name:"strikethrough",action:_,className:"fa fa-strikethrough",title:"Strikethrough"},heading:{name:"heading",action:x,className:"fa fa-header fa-heading",title:"Heading",default:!0},"heading-smaller":{name:"heading-smaller",action:x,className:"fa fa-header fa-heading header-smaller",title:"Smaller Heading"},"heading-bigger":{name:"heading-bigger",action:S,className:"fa fa-header fa-heading header-bigger",title:"Bigger Heading"},"heading-1":{name:"heading-1",action:C,className:"fa fa-header fa-heading header-1",title:"Big Heading"},"heading-2":{name:"heading-2",action:T,className:"fa fa-header fa-heading header-2",title:"Medium Heading"},"heading-3":{name:"heading-3",action:k,className:"fa fa-header fa-heading header-3",title:"Small Heading"},"separator-1":{name:"separator-1"},code:{name:"code",action:y,className:"fa fa-code",title:"Code"},quote:{name:"quote",action:w,className:"fa fa-quote-left",title:"Quote",default:!0},"unordered-list":{name:"unordered-list",action:D,className:"fa fa-list-ul",title:"Generic List",default:!0},"ordered-list":{name:"ordered-list",action:L,className:"fa fa-list-ol",title:"Numbered List",default:!0},"clean-block":{name:"clean-block",action:z,className:"fa fa-eraser fa-clean-block",title:"Clean block"},"separator-2":{name:"separator-2"},link:{name:"link",action:A,className:"fa fa-link",title:"Create Link",default:!0},image:{name:"image",action:M,className:"fa fa-image",title:"Insert Image",default:!0},table:{name:"table",action:O,className:"fa fa-table",title:"Insert Table"},"horizontal-rule":{name:"horizontal-rule",action:j,className:"fa fa-minus",title:"Insert Horizontal Line"},"separator-3":{name:"separator-3"},preview:{name:"preview",action:F,className:"fa fa-eye",noDisable:!0,title:"Toggle Preview",default:!0},"side-by-side":{name:"side-by-side",action:P,className:"fa fa-columns",noDisable:!0,noMobile:!0,title:"Toggle Side by Side",default:!0},fullscreen:{name:"fullscreen",action:g,className:"fa fa-arrows-alt",noDisable:!0,noMobile:!0,title:"Toggle Fullscreen",default:!0},"separator-4":{name:"separator-4"},guide:{name:"guide",action:"https://simplemde.com/markdown-guide",className:"fa fa-question-circle",noDisable:!0,title:"Markdown Guide",default:!0},"separator-5":{name:"separator-5"},undo:{name:"undo",action:E,className:"fa fa-undo",noDisable:!0,title:"Undo"},redo:{name:"redo",action:N,className:"fa fa-repeat fa-redo",noDisable:!0,title:"Redo"}},q={link:["[","](#url#)"],image:["![](","#url#)"],table:["","\n\n| Column 1 | Column 2 | Column 3 |\n| -------- | -------- | -------- |\n| Text     | Text     | Text     |\n\n"],horizontalRule:["","\n\n-----\n\n"]},X={link:"URL for the link:",image:"URL of the image:"},Y={bold:"**",code:"```",italic:"*"};function G(e){(e=e||{}).parent=this;var t=!0;if(!1===e.autoDownloadFontAwesome&&(t=!1),!0!==e.autoDownloadFontAwesome)for(var i=document.styleSheets,o=0;o<i.length;o++)i[o].href&&-1<i[o].href.indexOf("//maxcdn.bootstrapcdn.com/font-awesome/")&&(t=!1);if(t){var n=document.createElement("link");n.rel="stylesheet",n.href="https://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css",document.getElementsByTagName("head")[0].appendChild(n)}if(e.element)this.element=e.element;else if(null===e.element)return void console.log("EasyMDE: Error. No element was found.");if(void 0===e.toolbar)for(var r in e.toolbar=[],V)V.hasOwnProperty(r)&&(-1!=r.indexOf("separator-")&&e.toolbar.push("|"),(!0===V[r].default||e.showIcons&&e.showIcons.constructor===Array&&-1!=e.showIcons.indexOf(r))&&e.toolbar.push(r));e.hasOwnProperty("status")||(e.status=["autosave","lines","words","cursor"]),e.previewRender||(e.previewRender=function(e){return this.parent.markdown(e)}),e.parsingConfig=B({highlightFormatting:!0},e.parsingConfig||{}),e.insertTexts=B({},q,e.insertTexts||{}),e.promptTexts=B({},X,e.promptTexts||{}),e.blockStyles=B({},Y,e.blockStyles||{}),e.shortcuts=B({},h,e.shortcuts||{}),e.minHeight=e.minHeight||"300px",null!=e.autosave&&null!=e.autosave.unique_id&&""!=e.autosave.unique_id&&(e.autosave.uniqueId=e.autosave.unique_id),this.options=e,this.render(),!e.initialValue||this.options.autosave&&!0===this.options.autosave.foundSavedValue||this.value(e.initialValue)}function K(){if("object"!=typeof localStorage)return!1;try{localStorage.setItem("smde_localStorage",1),localStorage.removeItem("smde_localStorage")}catch(e){return!1}return!0}G.prototype.markdown=function(e){if(r){var t;if(t=this.options&&this.options.renderingConfig&&this.options.renderingConfig.markedOptions?this.options.renderingConfig.markedOptions:{},this.options&&this.options.renderingConfig&&!1===this.options.renderingConfig.singleLineBreaks?t.breaks=!1:t.breaks=!0,this.options&&this.options.renderingConfig&&!0===this.options.renderingConfig.codeSyntaxHighlighting){var i=this.options.renderingConfig.hljs||window.hljs;i&&(t.highlight=function(e){return i.highlightAuto(e).value})}return r.setOptions(t),function(e){for(var t;null!==(t=l.exec(e));){var i=t[0];if(-1===i.indexOf("target=")){var o=i.replace(/>$/,' target="_blank">');e=e.replace(i,o)}}return e}(r(e))}},G.prototype.render=function(e){if(e||(e=this.element||document.getElementsByTagName("textarea")[0]),!this._rendered||this._rendered!==e){this.element=e;var t,i,r=this.options,s=this,l={};for(var h in r.shortcuts)null!==r.shortcuts[h]&&null!==a[h]&&function(e){l[u(r.shortcuts[e])]=function(){a[e](s)}}(h);if(l.Enter="newlineAndIndentContinueMarkdownList",l.Tab="tabAndIndentMarkdownList",l["Shift-Tab"]="shiftTabAndUnindentMarkdownList",l.Esc=function(e){e.getOption("fullScreen")&&g(s)},document.addEventListener("keydown",function(e){27==(e=e||window.event).keyCode&&s.codemirror.getOption("fullScreen")&&g(s)},!1),!1!==r.spellChecker?(t="spell-checker",(i=r.parsingConfig).name="gfm",i.gitHubSpice=!1,n({codeMirrorInstance:o})):((t=r.parsingConfig).name="gfm",t.gitHubSpice=!1),this.codemirror=o.fromTextArea(e,{mode:t,backdrop:i,theme:null!=r.theme?r.theme:"easymde",tabSize:null!=r.tabSize?r.tabSize:2,indentUnit:null!=r.tabSize?r.tabSize:2,indentWithTabs:!1!==r.indentWithTabs,lineNumbers:!1,autofocus:!0===r.autofocus,extraKeys:l,lineWrapping:!1!==r.lineWrapping,allowDropFileTypes:["text/plain"],placeholder:r.placeholder||e.getAttribute("placeholder")||"",styleSelectedText:null!=r.styleSelectedText?r.styleSelectedText:!c(),configureMouse:function(e,t,i){return{addNew:!1}}}),this.codemirror.getScrollerElement().style.minHeight=r.minHeight,!0===r.forceSync){var d=this.codemirror;d.on("change",function(){d.save()})}!(this.gui={})!==r.toolbar&&(this.gui.toolbar=this.createToolbar()),!1!==r.status&&(this.gui.statusbar=this.createStatusbar()),null!=r.autosave&&!0===r.autosave.enabled&&this.autosave(),this.gui.sideBySide=this.createSideBySide(),this._rendered=this.element;var p=this.codemirror;setTimeout(function(){p.refresh()}.bind(p),0)}},G.prototype.autosave=function(){if(K()){var e=this;if(null==this.options.autosave.uniqueId||""==this.options.autosave.uniqueId)return void console.log("EasyMDE: You must set a uniqueId to use the autosave feature");!0!==this.options.autosave.binded&&(null!=e.element.form&&null!=e.element.form&&e.element.form.addEventListener("submit",function(){clearTimeout(e.autosaveTimeoutId),e.autosaveTimeoutId=void 0,localStorage.removeItem("smde_"+e.options.autosave.uniqueId),setTimeout(function(){e.autosave()},e.options.autosave.delay||1e4)}),this.options.autosave.binded=!0),!0!==this.options.autosave.loaded&&("string"==typeof localStorage.getItem("smde_"+this.options.autosave.uniqueId)&&""!=localStorage.getItem("smde_"+this.options.autosave.uniqueId)&&(this.codemirror.setValue(localStorage.getItem("smde_"+this.options.autosave.uniqueId)),this.options.autosave.foundSavedValue=!0),this.options.autosave.loaded=!0),localStorage.setItem("smde_"+this.options.autosave.uniqueId,e.value());var t=document.getElementById("autosaved");if(null!=t&&null!=t&&""!=t){var i=new Date,o=i.getHours(),n=i.getMinutes(),r="am",s=o;12<=s&&(s=o-12,r="pm"),0==s&&(s=12),n=n<10?"0"+n:n,t.innerHTML="Autosaved: "+s+":"+n+" "+r}this.autosaveTimeoutId=setTimeout(function(){e.autosave()},this.options.autosave.delay||1e4)}else console.log("EasyMDE: localStorage not available, cannot autosave")},G.prototype.clearAutosavedValue=function(){if(K()){if(null==this.options.autosave||null==this.options.autosave.uniqueId||""==this.options.autosave.uniqueId)return void console.log("EasyMDE: You must set a uniqueId to clear the autosave value");localStorage.removeItem("smde_"+this.options.autosave.uniqueId)}else console.log("EasyMDE: localStorage not available, cannot autosave")},G.prototype.createSideBySide=function(){var e=this.codemirror,t=e.getWrapperElement(),i=t.nextSibling;if(i&&/editor-preview-side/.test(i.className)||((i=document.createElement("div")).className="editor-preview-side",t.parentNode.insertBefore(i,t.nextSibling)),!1===this.options.syncSideBySidePreviewScroll)return i;var o=!1,n=!1;return e.on("scroll",function(e){if(o)o=!1;else{n=!0;var t=e.getScrollInfo().height-e.getScrollInfo().clientHeight,r=parseFloat(e.getScrollInfo().top)/t,s=(i.scrollHeight-i.clientHeight)*r;i.scrollTop=s}}),i.onscroll=function(){if(n)n=!1;else{o=!0;var t=i.scrollHeight-i.clientHeight,r=parseFloat(i.scrollTop)/t,s=(e.getScrollInfo().height-e.getScrollInfo().clientHeight)*r;e.scrollTo(0,s)}},i},G.prototype.createToolbar=function(e){if((e=e||this.options.toolbar)&&0!==e.length){var t;for(t=0;t<e.length;t++)null!=V[e[t]]&&(e[t]=V[e[t]]);var i=document.createElement("div");i.className="editor-toolbar";var o=this,n={};for(o.toolbar=e,t=0;t<e.length;t++)if(("guide"!=e[t].name||!1!==o.options.toolbarGuideIcon)&&!(o.options.hideIcons&&-1!=o.options.hideIcons.indexOf(e[t].name)||("fullscreen"==e[t].name||"side-by-side"==e[t].name)&&c())){if("|"===e[t]){for(var r=!1,s=t+1;s<e.length;s++)"|"===e[s]||o.options.hideIcons&&-1!=o.options.hideIcons.indexOf(e[s].name)||(r=!0);if(!r)continue}!function(e){var t,r;t="|"===e?((r=document.createElement("i")).className="separator",r.innerHTML="|",r):p(e,o.options.toolbarTips,o.options.shortcuts),e.action&&("function"==typeof e.action?t.onclick=function(t){t.preventDefault(),e.action(o)}:"string"==typeof e.action&&(t.onclick=function(t){t.preventDefault(),window.open(e.action,"_blank")})),n[e.name||e]=t,i.appendChild(t)}(e[t])}o.toolbarElements=n;var l=this.codemirror;l.on("cursorActivity",function(){var e,t,i=f(l);for(var o in n)t=void 0,t=n[e=o],i[e]?t.className+=" active":"fullscreen"!=e&&"side-by-side"!=e&&(t.className=t.className.replace(/\s*active\s*/g,""))});var a=l.getWrapperElement();return a.parentNode.insertBefore(i,a),i}},G.prototype.createStatusbar=function(e){e=e||this.options.status;var t=this.options,i=this.codemirror;if(e&&0!==e.length){var o,n,r,s=[];for(o=0;o<e.length;o++)if(r=n=void 0,"object"==typeof e[o])s.push({className:e[o].className,defaultValue:e[o].defaultValue,onUpdate:e[o].onUpdate});else{var l=e[o];"words"===l?(r=function(e){e.innerHTML=$(i.getValue())},n=function(e){e.innerHTML=$(i.getValue())}):"lines"===l?(r=function(e){e.innerHTML=i.lineCount()},n=function(e){e.innerHTML=i.lineCount()}):"cursor"===l?(r=function(e){e.innerHTML="0:0"},n=function(e){var t=i.getCursor();e.innerHTML=t.line+":"+t.ch}):"autosave"===l&&(r=function(e){null!=t.autosave&&!0===t.autosave.enabled&&e.setAttribute("id","autosaved")}),s.push({className:l,defaultValue:r,onUpdate:n})}var a=document.createElement("div");for(a.className="editor-statusbar",o=0;o<s.length;o++){var h=s[o],d=document.createElement("span");d.className=h.className,"function"==typeof h.defaultValue&&h.defaultValue(d),"function"==typeof h.onUpdate&&this.codemirror.on("update",function(e,t){return function(){t.onUpdate(e)}}(d,h)),a.appendChild(d)}var c=this.codemirror.getWrapperElement();return c.parentNode.insertBefore(a,c.nextSibling),a}},G.prototype.value=function(e){var t=this.codemirror;if(void 0===e)return t.getValue();if(t.getDoc().setValue(e),this.isPreviewActive()){var i=t.getWrapperElement().lastChild;i.innerHTML=this.options.previewRender(e,i)}return this},G.toggleBold=v,G.toggleItalic=b,G.toggleStrikethrough=_,G.toggleBlockquote=w,G.toggleHeadingSmaller=x,G.toggleHeadingBigger=S,G.toggleHeading1=C,G.toggleHeading2=T,G.toggleHeading3=k,G.toggleCodeBlock=y,G.toggleUnorderedList=D,G.toggleOrderedList=L,G.cleanBlock=z,G.drawLink=A,G.drawImage=M,G.drawTable=O,G.drawHorizontalRule=j,G.undo=E,G.redo=N,G.togglePreview=F,G.toggleSideBySide=P,G.toggleFullScreen=g,G.prototype.toggleBold=function(){v(this)},G.prototype.toggleItalic=function(){b(this)},G.prototype.toggleStrikethrough=function(){_(this)},G.prototype.toggleBlockquote=function(){w(this)},G.prototype.toggleHeadingSmaller=function(){x(this)},G.prototype.toggleHeadingBigger=function(){S(this)},G.prototype.toggleHeading1=function(){C(this)},G.prototype.toggleHeading2=function(){T(this)},G.prototype.toggleHeading3=function(){k(this)},G.prototype.toggleCodeBlock=function(){y(this)},G.prototype.toggleUnorderedList=function(){D(this)},G.prototype.toggleOrderedList=function(){L(this)},G.prototype.cleanBlock=function(){z(this)},G.prototype.drawLink=function(){A(this)},G.prototype.drawImage=function(){M(this)},G.prototype.drawTable=function(){O(this)},G.prototype.drawHorizontalRule=function(){j(this)},G.prototype.undo=function(){E(this)},G.prototype.redo=function(){N(this)},G.prototype.togglePreview=function(){F(this)},G.prototype.toggleSideBySide=function(){P(this)},G.prototype.toggleFullScreen=function(){g(this)},G.prototype.isPreviewActive=function(){var e=this.codemirror.getWrapperElement().lastChild;return/editor-preview-active/.test(e.className)},G.prototype.isSideBySideActive=function(){var e=this.codemirror.getWrapperElement().nextSibling;return/editor-preview-active-side/.test(e.className)},G.prototype.isFullscreenActive=function(){return this.codemirror.getOption("fullScreen")},G.prototype.getState=function(){return f(this.codemirror)},G.prototype.toTextArea=function(){var e=this.codemirror,t=e.getWrapperElement();t.parentNode&&(this.gui.toolbar&&t.parentNode.removeChild(this.gui.toolbar),this.gui.statusbar&&t.parentNode.removeChild(this.gui.statusbar),this.gui.sideBySide&&t.parentNode.removeChild(this.gui.sideBySide)),e.toTextArea(),this.autosaveTimeoutId&&(clearTimeout(this.autosaveTimeoutId),this.autosaveTimeoutId=void 0,this.clearAutosavedValue())},t.exports=G},{"./codemirror/tablist":19,codemirror:11,"codemirror-spell-checker":4,"codemirror/addon/display/fullscreen.js":5,"codemirror/addon/display/placeholder.js":6,"codemirror/addon/edit/continuelist.js":7,"codemirror/addon/mode/overlay.js":8,"codemirror/addon/search/searchcursor.js":9,"codemirror/addon/selection/mark-selection.js":10,"codemirror/mode/gfm/gfm.js":12,"codemirror/mode/markdown/markdown.js":13,"codemirror/mode/xml/xml.js":15,marked:17}]},{},[20])(20)}),$(document).ready(function(e){generateProfileAvatar(),$("#concierge-support-popup").ejDialog({width:"520px",height:"auto",showOnInit:!1,allowDraggable:!1,enableResize:!1,showHeader:!1,enableModal:!0,open:"OnConciergeSupportOpen",close:"OnConciergeSupportClose"});var t=createLoader("concierge-support-popup_wrapper");$("#concierge-support-popup_wrapper").ejWaitingPopup({template:$("#"+t)});var i=createLoader("reply");$("#reply").ejWaitingPopup({template:$("#"+i)}),conciergeSupportMd=renderMdeForSupport("#concierge-support-message"),currentMdeId="concierge-support-message",conciergeSupportMd.codemirror.on("keyHandled",function(e){ValidateConciergeSupportRequest(e)}),conciergeSupportMd.codemirror.on("change",function(e){ValidateConciergeSupportRequest(e)}),$(".form-group > .CodeMirror").on("keypress","textarea",function(e){ValidateConciergeSupportRequest(e)}),$("#concierge-submit-button").on("click",function(){var e=isConciergeRequestPopup||$("#is-concierge-request").is(":checked"),t=conciergeSupportMd.value().trim(),i=$("#items").data("ejGrid"),o={Title:$("#concierge-support-subject").val().trim(),Message:AppendFileDownloadPath(t),IsConciergeSupport:e,AllowAccess:isAdmin?isUserAccess||$("#concierge-access-checkbox").is(":checked"):isUserAccess,Attachments:[{FileName:$("#support-file-name").val(),Link:$("#support-file-path").val()}]};$("#concierge-support-popup_wrapper").ejWaitingPopup("show"),$.ajax({type:"POST",url:conciergeSupportUrl,data:{support:JSON.stringify(o)},success:function(t){$("#concierge-support-popup_wrapper").ejWaitingPopup("hide"),t.Status?(SuccessAlert(e?window.Server.App.LocalizationContent.RequestConciergeSupport:window.Server.App.LocalizationContent.SupportTitle,e?window.Server.App.LocalizationContent.AddConciergeSupportSuccess:window.Server.App.LocalizationContent.AddSupportSuccess,7e3),$("#concierge-support-subject").val(""),conciergeSupportMd.value(""),$("#is-concierge-request, #concierge-access-checkbox").removeAttr("checked"),$("#concierge-support-checkbox, #admin-access-message").hide(),$("#concierge-submit-button").attr("disabled",!0),$("#attach-file-textbox").val(window.Server.App.LocalizationContent.BrowsePath),$("#support-file-path").val(""),$("#support-file-name").val(""),$("#concierge-support-popup").ejDialog("close"),$("#tickets-container").length>0&&i.refreshContent()):WarningAlert(e?window.Server.App.LocalizationContent.RequestConciergeSupport:window.Server.App.LocalizationContent.SupportTitle,e?window.Server.App.LocalizationContent.AddConciergeSupportFailure:window.Server.App.LocalizationContent.AddSupportFailure,0)},error:function(){WarningAlert(window.Server.App.LocalizationContent.RequestConciergeSupport,window.Server.App.LocalizationContent.AddConciergeSupportFailure,0),$("#concierge-support-popup_wrapper").ejWaitingPopup("hide")}})}),$("#attach-file").ejUploadbox({saveUrl:fileUploadUrl+"?imageType=supportfile&&timeStamp="+GetCurrentTime(),autoUpload:!0,showFileDetails:!1,buttonText:{browse:".  .  ."},extensionsAllow:".Zip,.Rar,.Zipx,.7z",height:26,fileSize:3e7,multipleFilesSelection:!1,beforeSend:function(e){setXSRFRequestHeader(e.xhr)},begin:function(){$("#concierge-support-popup_wrapper").ejWaitingPopup("show")},fileSelect:function(e){currentTime=GetCurrentTime(),e.model.saveUrl=fileUploadUrl+"?imageType=supportfile&&timeStamp="+currentTime,fileExtension=e.files[0].extension.toLowerCase(),orgFileName=e.files[0].name.split(".").slice(0,-1).join("."),fileName=orgFileName.replace(/[^a-z0-9\s]/gi,"").replace(/[_\s]/g,"")},error:function(e){".zip"!==fileExtension&&".rar"!==fileExtension&&".zipx"!==fileExtension&&".7z"!==fileExtension?$("#attach-file-textbox").addClass("validation-failed-text").val(window.Server.App.LocalizationContent.InValidFileFormat):$("#attach-file-textbox").addClass("validation-failed-text").val(window.Server.App.LocalizationContent.FileSizeInvalid),$("#attach-file-textbox").closest("div").addClass("has-error"),$("#attach-file-textbox").parent().find(".e-box").addClass("upload-error-border")},complete:function(e){var t=fileName+"_"+currentTime+fileExtension;$("#support-file-path").val(supportFilePath+t),$("#support-file-name").val(orgFileName),$("#attach-file-textbox").removeClass("validation-failed-text").val(orgFileName+fileExtension),$("#attach-file-textbox").closest("div").removeClass("has-error"),$("#attach-file-textbox").parent().find(".e-box").removeClass("upload-error-border"),$("#concierge-support-popup_wrapper").ejWaitingPopup("hide"),currentTime=null}}),$("#reply-attach-file").ejUploadbox({saveUrl:fileUploadUrl+"?imageType=supportfile&&timeStamp="+GetUpdateIncidentCurrentTime(),autoUpload:!0,showFileDetails:!1,buttonText:{browse:".  .  ."},extensionsAllow:".Zip,.Rar,.Zipx,.7z",height:26,fileSize:3e7,multipleFilesSelection:!1,beforeSend:function(e){setXSRFRequestHeader(e.xhr)},begin:function(){$(".sm-loader").css("display","block"),$("#update-close").removeClass("btn-danger"),$("#update-close").attr("disabled","disabled"),$("#update-confirm").attr("disabled","disabled")},fileSelect:function(e){updateCurrentTime=GetUpdateIncidentCurrentTime(),e.model.saveUrl=fileUploadUrl+"?imageType=supportfile&&timeStamp="+updateCurrentTime,fileExtension=e.files[0].extension.toLowerCase(),orgFileName=e.files[0].name.split(".").slice(0,-1).join("."),fileName=orgFileName.replace(/[^a-z0-9\s]/gi,"").replace(/[_\s]/g,"")},error:function(e){".zip"!==fileExtension&&".rar"!==fileExtension&&".zipx"!==fileExtension&&".7z"!==fileExtension?$("#reply-attach-file-textbox").addClass("validation-failed-text").val(window.Server.App.LocalizationContent.InValidFileFormat):$("#reply-attach-file-textbox").addClass("validation-failed-text").val(window.Server.App.LocalizationContent.FileSizeInvalid),$("#reply-attach-file-textbox").closest("div").addClass("has-error"),$("#reply-attach-file-textbox").parent().find(".e-box").addClass("upload-error-border")},complete:function(e){var t=fileName+"_"+updateCurrentTime+fileExtension;$(".sm-loader").css("display","none"),$("#support-file-path-update").val(supportFilePath+t),$("#support-file-name-update").val(orgFileName),$("#reply-attach-file-textbox").removeClass("validation-failed-text").val(orgFileName+fileExtension),$("#reply-attach-file-textbox").closest("div").removeClass("has-error"),$("#reply-attach-file-textbox").parent().find(".e-box").removeClass("upload-error-border"),""!==updateMd.codemirror.getValue()&&($("#update-close").addClass("btn-danger"),$("#update-close").removeAttr("disabled"),$("#update-confirm").removeAttr("disabled")),updateCurrentTime=null}}),$(".support-message").on("focus","textarea",function(){$("textarea").pastableTextarea()}),$(".reply-message").on("focus","textarea",function(e){currentMdeId="updateMde",$("textarea").pastableTextarea()}),$("#attach-file-textbox").show(),$("#is-concierge-request").on("change",function(e){$("#concierge-submit-button").attr("disabled",!0),$(".conceirge-loader").css("display","inline-block"),$("#is-concierge-request").is(":checked")?getConciergeUserAccess(e):($("#concierge-support-checkbox").hide(),$(".conceirge-loader").css("display","none"),ValidateConciergeSupportRequest(e))}),$("#reply-button").on("click",function(){$("#reply-button").css("display","none"),$("#reply").css("display","block"),null==updateMd&&(updateMd=renderMdeWithToolbar("#updateMde"),currentMdeId="updateMde",updateMd.codemirror.on("change",function(e){var t=updateMd.codemirror.getValue();$("#updateMde").val(t),""==t.trim()?($("#update-close").removeClass("btn-danger"),$("#update-close").attr("disabled","disabled"),$("#update-confirm").attr("disabled","disabled")):($("#update-close").addClass("btn-danger"),$("#update-close").removeAttr("disabled"),$("#update-confirm").removeAttr("disabled"))})),updateMd.isPreviewActive()&&updateMd.togglePreview(),resetValidationBoxUpdate()}),$("#update-cancel").on("click",function(){updateMd.codemirror.setValue(""),$("#reply-button").css("display","block"),$("#reply").css("display","none"),$("#reply-attach-file-textbox").val(window.Server.App.LocalizationContent.BrowsePath),$("#support-file-path").val(""),$("#support-file-name").val(""),resetValidationBoxUpdate()}),$("#update-close").on("click",function(){$("<input />").attr("type","hidden").attr("name","is-close-request").attr("value","true").appendTo("#incidentUpdateForm"),$("#reply").ejWaitingPopup("show"),$("#update-close").removeClass("btn-danger"),addFileLink()}),$("#update-confirm").on("click",function(){$("#reply").ejWaitingPopup("show"),$("#update-close").removeClass("btn-danger"),addFileLink()})}),$("#incidentUpdateForm").submit(function(e){$("#update-close").attr("disabled","disabled"),$("#update-confirm").attr("disabled","disabled")}),$(document).on("click touchend",".request-concierge-support",function(e){$("#concierge-support-popup").show(),openSupportDialog(!0,e),currentMdeId="concierge-support-message"}),$("#close-concierge-support, #concierge-cancel-button").on("click",function(){$("#concierge-support-subject").val(""),conciergeSupportMd.value(""),$("#is-concierge-request, #concierge-access-checkbox").removeAttr("checked"),$("#concierge-support-checkbox, #admin-access-message").hide(),$("#attach-file-textbox").val(window.Server.App.LocalizationContent.BrowsePath),$("#support-file-path").val(""),$("#support-file-name").val(""),$("#concierge-submit-button").attr("disabled",!0),$("#concierge-support-popup").ejDialog("close"),resetValidationBoxSupport()}),$("#concierge-support-subject").on("keyup",function(e){ValidateConciergeSupportRequest(e)}),$(document).on("click","#attach-file-textbox, #reply-attach-file-textbox",function(e){"attach-file-textbox"==e.target.id?($("#attach-file").children().find(".e-uploadinput").trigger("click"),$("#attach-file").focus(),currentEjUploadId="attach-file"):($("#reply-attach-file").children().find(".e-uploadinput").trigger("click"),$("#reply-attach-file").focus(),currentEjUploadId="reply-attach-file")}),$(document).on("click",".e-uploadinput",function(e){currentEjUploadId=$(this).parent().parent().attr("id")}),$.fn.pastableTextarea=function(){var e,t,i;for(t=0,i=this.length;t<i;t++)(e=this[t])._pastable||$(e).is(":not(textarea, input:text)")||(Paste.mountTextarea(e),e._pastable=!0);return this},createHiddenEditable=function(){return $(document.createElement("div")).attr("contenteditable",!0).attr("aria-hidden",!0).attr("tabindex",-1).css({width:1,height:1,position:"fixed",left:-100,overflow:"hidden"})},isFocusable=function(e,t){var i,o,n,r,s,l;return r=void 0,s=void 0,n=void 0,o=void 0,i=void 0,"area"===(l=e.nodeName.toLowerCase())?(s=(r=e.parentNode).name,!(!e.href||!s||"map"!==r.nodeName.toLowerCase())&&((n=$("img[usemap='#"+s+"']")).length>0&&n.is(":visible"))):(/^(input|select|textarea|button|object)$/.test(l)?(o=!e.disabled)&&(i=$(e).closest("fieldset")[0])&&(o=!i.disabled):o="a"===l&&e.href||t,(o=o||$(e).is("[contenteditable]"))&&$(e).is(":visible"))},Paste=function(){function e(e,t){var i;this._container=e,this._target=t,this._container=$(this._container),this._target=$(this._target).addClass("pastable"),this._container.on("paste",(i=this,function(e){var t,o,n,r,s,l,a,h,d,c,u,p,f;if("updateMde"===currentMdeId?$("#reply").ejWaitingPopup("show"):$("#concierge-support-popup_wrapper").ejWaitingPopup("show"),i._paste_event_fired=!0,null!=(null!=(d=e.originalEvent)?d.clipboardData:void 0))if((t=e.originalEvent.clipboardData).items)for(r=0,l=(c=t.items).length;r<l;r++){if((n=c[r]).type.match(/^image\//)){(h=new FileReader).onload=function(e){return i._handleImage(e.target.result)},h.readAsDataURL(n.getAsFile()),e.preventDefault();break}"text/plain"===n.type&&n.getAsString(function(e){setTimeout(function(){return"updateMde"===currentMdeId?$("#reply").ejWaitingPopup("hide"):$("#concierge-support-popup_wrapper").ejWaitingPopup("hide"),i._target.trigger("pasteText",{text:e})},1)})}else-1!==Array.prototype.indexOf.call(t.types,"text/plain")&&(f=t.getData("Text"),setTimeout(function(){return"updateMde"===currentMdeId?$("#reply").ejWaitingPopup("hide"):$("#concierge-support-popup_wrapper").ejWaitingPopup("hide"),i._target.trigger("pasteText",{text:f})},1)),i._checkImagesInContainer(function(e){return i._handleImage(e)});if(t=window.clipboardData)if(null!=(u=f=t.getData("Text"))?u.length:void 0)setTimeout(function(){return"updateMde"===currentMdeId?$("#reply").ejWaitingPopup("hide"):$("#concierge-support-popup_wrapper").ejWaitingPopup("hide"),i._target.trigger("pasteText",{text:f}),i._target.trigger("_pasteCheckContainerDone")},1);else{for(s=0,a=(p=t.files).length;s<a;s++)o=p[s],i._handleImage(URL.createObjectURL(o));i._checkImagesInContainer(function(e){})}return setTimeout(function(){"updateMde"===currentMdeId?$("#reply").ejWaitingPopup("hide"):$("#concierge-support-popup_wrapper").ejWaitingPopup("hide")},1e3),null}))}return e.prototype._target=null,e.prototype._container=null,e.mountNonInputable=function(t){var i;return i=new e(createHiddenEditable().appendTo(t),t),$(t).on("click",function(e){if(!isFocusable(e.target,!1))return i._container.focus()}),i._container.on("focus",function(){return $(t).addClass("pastable-focus")}),i._container.on("blur",function(){return $(t).removeClass("pastable-focus")})},e.mountTextarea=function(t){var i,o;return DataTransfer.prototype.__lookupGetter__("items")?this.mountContenteditable(t):(o=new e(createHiddenEditable().insertBefore(t),t),i=!1,$(t).on("keyup",function(e){var t;return 17!==(t=e.keyCode)&&224!==t||(i=!1),null}),$(t).on("keydown",function(e){var n;return 17!==(n=e.keyCode)&&224!==n||(i=!0),null!=e.ctrlKey&&null!=e.metaKey&&(i=e.ctrlKey||e.metaKey),i&&86===e.keyCode&&(o._textarea_focus_stolen=!0,o._container.focus(),o._paste_event_fired=!1,setTimeout(function(){if(!o._paste_event_fired)return $(t).focus(),o._textarea_focus_stolen=!1},1)),null}),$(t).on("paste",function(){}),$(t).on("focus",function(){if(!o._textarea_focus_stolen)return $(t).addClass("pastable-focus")}),$(t).on("blur",function(){if(!o._textarea_focus_stolen)return $(t).removeClass("pastable-focus")}),$(o._target).on("_pasteCheckContainerDone",function(){return $(t).focus(),o._textarea_focus_stolen=!1}),$(o._target).on("pasteText",function(e,i){var o=i.text;return cursorPos.codemirror.replaceSelection(o),"updateMde"===currentMdeId?$("#reply").ejWaitingPopup("hide"):$("#concierge-support-popup_wrapper").ejWaitingPopup("hide"),$(t).trigger("change")}))},e.mountContenteditable=function(t){return new e(t,t),$(t).on("focus",("updateMde"===currentMdeId?$("#reply").ejWaitingPopup("hide"):$("#concierge-support-popup_wrapper").ejWaitingPopup("hide"),function(){return $(t).addClass("pastable-focus")})),$(t).on("blur",function(){return"updateMde"===currentMdeId?$("#reply").ejWaitingPopup("hide"):$("#concierge-support-popup_wrapper").ejWaitingPopup("hide"),$(t).removeClass("pastable-focus")})},e.prototype._handleImage=function(e){var t;return(t=new Image).crossOrigin="anonymous",t.onload=function(){var e;(e=document.createElement("canvas")).width=t.width,e.height=t.height,e.getContext("2d").drawImage(t,0,0,e.width,e.height);try{pasteImageReader(e.toDataURL("image/png"))}catch(e){"updateMde"===currentMdeId?$("#reply").ejWaitingPopup("hide"):$("#concierge-support-popup_wrapper").ejWaitingPopup("hide")}},t.onerror=void 0,t.src=e},e.prototype._checkImagesInContainer=function(e){var t,i,o,n,r,s;for(r=Math.floor(1e3*Math.random()),i=0,o=(n=this._container.find("img")).length;i<o;i++)(t=n[i])["_paste_marked_"+r]=!0;return setTimeout((s=this,function(){var i,o,n;for(0==(n=s._container.find("img")).length&&("updateMde"===currentMdeId?$("#reply").ejWaitingPopup("hide"):$("#concierge-support-popup_wrapper").ejWaitingPopup("hide")),i=0,o=n.length;i<o;i++)(t=n[i])["_paste_marked_"+r]||(e(t.src),$(t).remove());return s._target.trigger("_pasteCheckContainerDone")}),1)},e}(),$.ajaxSetup({beforeSend:function(e){setXSRFRequestHeader(e)}});
