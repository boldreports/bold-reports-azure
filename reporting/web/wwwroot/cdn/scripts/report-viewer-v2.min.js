/*!
*  filename: report-viewer-v2.min.js
*  version : unknown version
*  Copyright Syncfusion Inc. 2001 - 2013. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
function SuccessAlert(n,t,i){window.top.$("#success-alert").css("display","table");window.top.$("#message-header").html(n);window.top.$("#message-content").html(t);setTimeout(function(){window.top.$("#success-alert").fadeOut()},i)}function WarningAlert(n,t,i){parent.$("#warning-alert").css("display","table");parent.$("#warning-alert #message-header").html(n);parent.$(" #warning-alert #message-content").html(t);i!=null&&i!=""&&setTimeout(function(){parent.$("#warning-alert").fadeOut()},i);$(document).on("click",".close-div",function(){parent.$("#warning-alert").fadeOut()})}function isUrlHasView(){const n=new URLSearchParams(window.location.search);return n.has("viewname")||n.has("viewid")?!0:!1}function getUrlVars(n){var t={},i=n.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(n,i,r){t[i]=r});return t}function canOpenComments(){var n=getUrlVars(window.location.href.split("#")[0]).comment;typeof n!="undefined"&&$("#comment_Type").attr("data-item-type").toLowerCase()==="report"&&($("#is_mobile").val()==="true"?window.innerWidth<410&&$("#sync_report_viewer").hide():$("#sync_report_viewer_toolbar_comments").trigger("click"))}function onRenderingAction(n){if((isUserAuthenticatedInCurrentTenant||embedConfig.HasViews&&!reportItemDetail.IsPublic)&&n.parameterBlock&&n.reportParameters&&ej.isNullOrUndefined($("#"+this._id+"_viewReportSaveAs").data("ejButton"))){var t=ej.buildTag("input.e-reportviewer-viewreportbutton e-btn e-rptviewer-viewreport-btn","",{},{type:"button",value:window.Server.App.LocalizationContent.SaveAs,id:this._id+"_viewReportSaveAs","data-role":"none","aria-label":"Save As",title:window.Server.App.LocalizationContent.SaveViewAs}),i=ej.buildTag("input.e-reportviewer-viewreportbutton e-btn e-rptviewer-viewreport-btn","",{},{type:"button",value:window.Server.App.LocalizationContent.SaveButton,id:this._id+"_viewReportSave","data-role":"none","aria-label":"Save"});t.ejButton({click:function(n){var t=$("#sync_report_viewer").data("boldReportViewer"),i=t._getParameterJsonEJ2(t._reportParametersModel,!0);i&&saveView(QueryStringFormation(i,!0),n.target.value)},cssClass:"e-accent",height:32,htmlAttributes:isUrlHasView()?{style:"display : inline-block"}:{style:"display : none"},showRoundedCorner:!0});i.ejButton({click:function(n){var t=$("#sync_report_viewer").data("boldReportViewer"),i=t._getParameterJsonEJ2(t._reportParametersModel,!0);i&&saveView(QueryStringFormation(i,!0),n.target.value)},cssClass:canHideSaveViewBtn?"e-accent displayNone":"e-accent",enabled:!isUrlHasView(),height:32,htmlAttributes:isUrlHasView()?{style:"color: var(--grey-600) !important",title:window.Server.App.LocalizationContent.UpdateView}:{title:window.Server.App.LocalizationContent.SaveView},showRoundedCorner:!0});$("#sync_report_viewer_viewReportBlock").append(t).append(i)}}function onParameterValueChange(){var r=$("#sync_report_viewer").data("boldReportViewer"),u=r._getParameterJsonEJ2(r._reportParametersModel,!1),n=$("#"+this._id+"_viewReportSave"),t=$("#"+this._id+"_viewReportSaveAs"),i=n.data("ejButton"),f,e;u?(f=QueryStringFormation(u,!0),e=f==initialQueryString?!1:!0,isUrlHasView()?(t.css({display:"inline-block"}),e?(i.enable(),n.attr({style:"color: var(--lighten-blue-grey) !important"})):(i.disable(),n.attr({style:"color: var(--grey-600) !important"}))):(t.css({display:"none"}),n.attr({style:"color: var(--lighten-blue-grey) !important"}))):(n.attr({style:"color: var(--lighten-blue-grey) !important"}),i.enable(),t.css({display:isUrlHasView()?"inline-block":"none"}))}function filterViews(n){var i=$("#sync_report_viewer").data("boldReportViewer"),t=i.getParameters();t[0]!=null&&t[0].Name!="undefined"?((isUserAuthenticatedInCurrentTenant||embedConfig.HasViews&&!reportItemDetail.IsPublic)&&setTimeout(function(){document.getElementById("viewModuleContainer_iframe").contentWindow.filterView(n)},800),n.reportParameters!=undefined&&(initialQueryString=QueryStringFormation(n.reportParameters,!1))):$("#sync_report_viewer_toolbar_views_div").hide();canOpenComments()}function deleteViewResult(n){const t=$(this).attr("viewId");onDeleteItemDialogClose();(embedConfig.IsEmbedCode?n.Status:n.Result.Status)?(SuccessAlert(window.Server.App.LocalizationContent.DeleteView,window.Server.App.LocalizationContent.ViewDeleteSuccess,7e3),t==deletedViewId?window.location.href=window.location.origin+window.location.pathname:document.getElementById("viewModuleContainer_iframe").contentWindow.GetSavedFilter()):WarningAlert(window.Server.App.LocalizationContent.DeleteView,window.Server.App.LocalizationContent.TryAgain,7e3);$("#delete-div_wrapper").ejWaitingPopup("hide")}function deleteViewErrorResult(){$("#delete-div_wrapper").ejWaitingPopup("hide");onDeleteItemDialogClose();WarningAlert(window.Server.App.LocalizationContent.DeleteView,window.Server.App.LocalizationContent.InternalServerError,7e3)}function initializeDeleteDialog(){$("#delete-div").ejDialog({width:window.innerWidth>460?"450":window.innerWidth-10,showOnInit:!1,allowDraggable:!1,enableResize:!1,height:"auto",title:"Delete View",showHeader:!1,enableModal:!0,closeOnEscape:!0,close:"onDeleteItemDialogClose",open:"onDeleteItemDialogOpen"});var n=createLoader("delete-div_wrapper");$("#delete-div_wrapper").ejWaitingPopup({template:$("#"+n)})}function createViewsIframeForViewerV2(){var n=$("<iframe id='viewModuleContainer_iframe' src='"+viewsPageUrl+"'><\/iframe>");$("#viewModuleContainer").append(n)}function saveView(n,t){saveQueryString=n;const i=new URLSearchParams(window.location.search);if((i.has("viewname")||i.has("viewid"))&&t==="Save")updateView(viewId);else{customMessageBox("su su-filter",window.Server.App.LocalizationContent.AddView,"<span>"+window.Server.App.LocalizationContent.ViewName+'<\/span><input placeholder="'+window.Server.App.LocalizationContent.ViewPlaceHolder+'" id="view-name-filter-pane" class="view-name-filter-pane"><span id="validate-view-name" class="validation-message text"><\/span>',"error",function(){var n=$("#view-name-filter-pane").val();n!=""&&(SaveFilterName=n,$("#messageBox_wrapper").ejWaitingPopup("show"),AddView())});var r=createLoader("messageBox_wrapper");$("#messageBox_wrapper").ejWaitingPopup({template:$("#"+r)})}}function AddView(){var r=$("#sync_report_viewer").data("boldReportViewer"),i=saveQueryString!=""?saveQueryString:QueryStringFormation([],!1),n=document.getElementById("messageBox_wrapper"),t;(n.style.display=="block"||n.style.display=="")&&$("#messageBox_wrapper").ejWaitingPopup("show");t={name:"Datas",ItemViewName:SaveFilterName,QueryString:i,itemId:reportId,UserId:userId,UserName:userName,itemType:reportItemDetail.ItemType};ajaxPostCall("POST",addViewUrl,t,null,saveViewResult,errorSaveView,null)}function saveViewResult(n){var r=saveQueryString!=""?saveQueryString:QueryStringFormation([],!1),t,i;initialQueryString=r;$("#messageBox_wrapper").ejWaitingPopup("hide");n.Status?(onCloseMessageBox(),SuccessAlert(window.Server.App.LocalizationContent.AddView,window.Server.App.LocalizationContent.AddViewSuccess,7e3),t=n.ItemsView[0].ViewId,viewId=t,updateViewNameInUrl(),updateParameterPanelBtn(),$("#update-view").attr("viewid",t),$("#save-section").hide(),$("#save-lable-section label").html(""),link='<a class="saved-view-link txt-overflow" href="'+pageurl+"?viewname="+SaveFilterName+'" target="_blank" data-toggle="tooltip" data-original-title="'+SaveFilterName+'">'+SaveFilterName+"<\/a>",$("#save-lable-section label").append(link),$("#save-lable-section").show(),$("#new-save").hide(),$("#saved-filter-update").show(),$("#update-view").addClass("pointer-events"),$("#update-view").css("opacity",.5),$("#saved-filter-Saveas").hide(),canHideSaveViewBtn&&($("#sync_report_viewer_viewReportSave").removeClass("displayNone"),i=$("#sync_report_viewer").data("boldReportViewer"),i._setParameterPanelHeight(),canHideSaveViewBtn=!1)):($(".app-critical-action-button ").prop("disabled",!0),$("#validate-view-name").html(window.Server.App.LocalizationContent.ViewAlreadyExists),$("#validate-view-name").css("display","block"),$("#view-name-filter-pane").addClass("has-error"))}function errorSaveView(){$("#messageBox_wrapper").ejWaitingPopup("hide");onCloseMessageBox();WarningAlert(window.Server.App.LocalizationContent.AddView,window.Server.App.LocalizationContent.InternalServerError,7e3)}function updateParameterPanelBtn(){var n=$("#sync_report_viewer_viewReportSave"),t=$("#sync_report_viewer_viewReportSaveAs"),i;isUrlHasView()?(n.attr({style:"color: var(--grey-600) !important",title:"Update View"}),n.data("ejButton").model.enabled=!1,t.css({display:"inline-block"})):(t.css({display:"none"}),n.css({display:"inline-block"}),n.attr({style:"color: var(--lighten-blue-grey) !important",title:"Save View"}));i=$("#sync_report_viewer").data("boldReportViewer");i._setParameterPanelHeight()}function updateView(n){var t=saveQueryString!=""?saveQueryString:QueryStringFormation([],!1),i={itemId:reportId,QueryString:t,itemViewId:n,UserId:userId,UserName:userName,itemType:reportItemDetail.ItemType};ajaxPostCall("POST",updateViewUrl,i,null,saveUpdateView,errorSaveUpdateView,null)}function saveUpdateView(n){var t=saveQueryString!=""?saveQueryString:QueryStringFormation([],!1);onCloseMessageBox();(embedConfig.IsEmbedCode?n.Status:n.Result.Status)?(initialQueryString=t,$("#update-view").addClass("pointer-events"),$("#update-view").css("opacity",.5),SuccessAlert(window.Server.App.LocalizationContent.UpdateView,window.Server.App.LocalizationContent.UpdateViewSuccess,7e3)):($("#save-section").hide(),WarningAlert(window.Server.App.LocalizationContent.UpdateView,window.Server.App.LocalizationContent.InternalServerError,7e3));updateParameterPanelBtn()}function errorSaveUpdateView(){onCloseMessageBox();WarningAlert(window.Server.App.LocalizationContent.UpdateView,window.Server.App.LocalizationContent.InternalServerError,7e3)}function updateViewNameInUrl(){var n=new URLSearchParams(window.location.search);n.set("viewname",SaveFilterName);history.pushState({},"","?"+n.toString())}function QueryStringFormation(n,t){return reportviewerObj=$("#sync_report_viewer").data("boldReportViewer"),parameterArray=[],valueArray=[],jQuery.each(n,function(i){var r,u;$.isNumeric(i)&&(r=n[i].IsMultiValue==undefined?n[i].values:n[i].IsMultiValue?n[i].Values:n[i].Value!=undefined?n[i].Value:n[i].Values,u=n[i].name==undefined?n[i].Name:n[i].name,t&&(parameterArray.push(u),valueArray.push(r)))}),t&&($("#report-filter-query-name").val(JSON.stringify(parameterArray)),$("#report-filter-query-value").val(JSON.stringify(valueArray))),n.map(n=>JSON.stringify(n,(n,t)=>{if(n!=="dateTimeInfo"&&n!=="labels")return t})).join(",")}function customMessageBox(n,t,i,r,u,f,e,o,s,h){var a,l,c,v;if($("#messageBox").find(".message-content").text(""),$(".message-box-btn-holder").html(""),$(".message-box-close").html(""),$("#messageBox").find(".message-header").html("<span class='su "+n+"'><\/span> <span class='modal-title' data-toggle='tooltip' data-placement='bottom' data-container='body' title='"+t+"'  >"+t+"<\/h2>"),$("#messageBox").find(".message-content").html(i),$("#messageBox").find(".message-content").removeClass("text-left"),r=="error")u!=undefined&&(l=$("<input type='button' class='app-button app-critical-action-button app-btn-primary pull-right' value='"+window.Server.App.LocalizationContent.SaveButton+"'><\/input>"),l.bind("click",$.proxy(getFnObj(u),window))),f!=undefined?(a=$("<input type='button' class='app-button app-secondary-button app-btn-secondary pull-right' tabindex='-1' value='"+window.Server.App.LocalizationContent.CancelButton+"'><\/input>"),a.bind("click",$.proxy(getFnObj(f),window)),c=$('<span class="su su-close"><\/span>'),c.bind("click",$.proxy(getFnObj(f),window))):(a=$("<input type='button' class='app-button app-secondary-button app-btn-secondary pull-right' tabindex='-1' value='"+window.Server.App.LocalizationContent.CancelButton+"'><\/input>"),c=$('<span class="su su-close"><\/span>'),a.click(function(){onCloseMessageBox()}),c.click(function(){onCloseMessageBox()})),$(".message-box-close").html(c),$(".message-box-btn-holder").append(a,l),$("#messageBox").unbind("keydown");else{u!=undefined?(l=$("<input type='button' class='app-button app-secondary-button app-btn-secondary' tabindex='-1' value='"+window.Server.App.LocalizationContent.OKButton+"'><\/input>"),l.bind("click",$.proxy(getFnObj(u),window)),c=$('<span class="su su-close"><\/span>'),c.bind("click",$.proxy(getFnObj(u),window))):(l=$("<input type='button' class='app-button app-secondary-button app-btn-secondary' tabindex='-1' value='"+window.Server.App.LocalizationContent.OKButton+"'><\/input>"),c=$('<span class="su su-close"><\/span>'),l.click(function(){onCloseMessageBox()}),c.click(function(){onCloseMessageBox()}));$(".message-box-close").html(c);$(".message-box-btn-holder").append(l);$("#messageBox").on("keydown",function(n){switch(n.keyCode){case 13:case 27:l.click()}})}$("#messageBox").ejDialog("open");$("#messageBox").focus();v=$("#messageBox").data("ejDialog");setTimeout(function(){e!=undefined&&v.option("width",e);window.innerWidth>1040&&o==undefined&&(o=$("#messageBox").find(".modal-content").height()+135+"px");v.option("height",o);s!=undefined&&v.option("maxHeight",s)},50);h!=null&&h!=undefined&&v.option("cssClass",h)}function getFnObj(n){return typeof n=="function"?n:typeof n=="string"&&window[n]?n:void 0}function onCloseMessageBox(){$("#messageBox").ejDialog("close")}function onDeleteViewDialogOpen(){$("#delete-div").ejDialog("open");$("#delete-msg").show();$("#delete-div").focus()}function onDeleteViewClicked(n,t){$("#delete_item").attr("viewid",n);$("#delete_item_name").html(t);$("#delete-content").show();$(".validationArea").show();$(".deleteItem").removeClass("centerAlign");$("#delete-confirmation").hide();$("#delete-error").hide();$(".successArea").hide()}function onDeleteItemDialogClose(){$("#delete-div").ejDialog("close")}function messageBox(n,t,i,r,u,f,e,o,s){var l,c,h;if($("#messageBox").find(".message-content").text(""),$(".message-box-btn-holder").html(""),$(".message-box-close").html(""),$("#messageBox").find(".message-header").html("<span class='su "+n+"'><\/span> <span class='modal-title' data-toggle='tooltip' data-placement='bottom' data-container='body' title='"+t+"'  >"+t+"<\/h2>"),$("#messageBox").find(".message-content").html(i),r=="error")u!=undefined&&(c=$("<input type='button' class='critical-action-button app-btn-danger pull-right' value='"+window.Server.App.LocalizationContent.Yes+"'><\/input>"),c.bind("click",$.proxy(getFnObj(u),window))),f!=undefined?(l=$("<input type='button' class='secondary-button app-btn-secondary pull-right' value='"+window.Server.App.LocalizationContent.No+"'><\/input>"),l.bind("click",$.proxy(getFnObj(f),window)),h=$('<span class="su su-close"><\/span>'),h.bind("click",$.proxy(getFnObj(f),window))):(l=$("<input type='button' class='secondary-button app-btn-secondary pull-right' value='"+window.Server.App.LocalizationContent.No+"'><\/input>"),h=$('<span class="su su-close"><\/span>'),l.click(function(){onCloseMessageBox()}),h.click(function(){onCloseMessageBox()})),$(".message-box-close").html(h),$(".message-box-btn-holder").append(l,c),$("#messageBox").unbind("keydown");else{u!=undefined?(c=$("<input type='button' class='secondary-button app-btn-secondary' value='"+window.Server.App.LocalizationContent.Ok+"'><\/input>"),c.bind("click",$.proxy(getFnObj(u),window)),h=$('<span class="su su-close"><\/span>'),h.bind("click",$.proxy(getFnObj(u),window))):(c=$("<input type='button' class='secondary-button app-btn-secondary' value='"+window.Server.App.LocalizationContent.Ok+"'><\/input>"),h=$('<span class="su su-close"><\/span>'),c.click(function(){onCloseMessageBox()}),h.click(function(){onCloseMessageBox()}));$(".message-box-close").html(h);$(".message-box-btn-holder").append(c);$("#messageBox").on("keydown",function(n){switch(n.keyCode){case 13:case 27:c.click()}})}$("#messageBox").ejDialog("open");$("#messageBox").focus();setTimeout(function(){var n=$("#messageBox").data("ejDialog");e!=undefined&&n.option("width",e);window.innerWidth>1040&&o==undefined&&(o=$("#messageBox").find(".modal-content").height()+135+"px");n.option("height",o);s!=undefined&&n.option("maxHeight",s)},50)}function ShareView(n){var i=$(window).width(),r=$(window).height(),u=$("#viewShare_popup").width(),f=$("#viewShare_popup").height(),e=(parseInt(i)-parseInt(u))/2,t=(parseInt(r)-parseInt(f))/2;t<0&&(t=0);$("#viewShare_popup").css({left:e,top:t});$("#viewShare_popup,.ViewShare_popup_shadow").css("display","block");$("#sharepopup_wrapper_WaitingPopup").css("display","block");$("#viewShare_popup_iframe").attr("src",itemViewShareIframeUrl+"?itemId="+n.viewId)}function ResizePopup(){var t=$(window).width(),i=$(window).height(),r=$("#viewShare_popup").width(),u=$("#viewShare_popup").height(),f=(parseInt(t)-parseInt(r))/2,n=(parseInt(i)-parseInt(u))/2;n<0&&(n=0);$("#viewShare_popup").css({left:f,top:n})}function openDashboardComment(){var n=$("#dashboard_Comment").attr("data-item-id"),t;if($("#commentModuleContainer").toggleClass("displayNone"),$("#commentModuleContainer").hasClass("displayNone"))closeDashboardComment();else if(t=document.getElementById("commentModuleContainer_iframe").contentWindow,typeof t.GetAllComments=="function")t.GetAllComments(n,"report",n,"1");else $("#commentModuleContainer_iframe").on("load",function(){t.GetAllComments(n,"report",n,"1")})}function closeDashboardComment(){$("#commentImage_popup").data("ejDialog")!==undefined&&$("#commentImage_popup").ejDialog("close");$("#commentModuleContainer").addClass("displayNone");$("#delete_popup_iframe").addClass("displayNone");$("#is_mobile").val()==="true"&&($("#sync_report_viewer").show(),$("#server-mobile-navbar .server-comment").hasClass("active")&&($("#server-mobile-navbar a.active").removeClass("active"),$("#server-mobile-navbar .su-nav-dashboard").addClass("active")))}function openComments(){if(isViewerV2Enabled)typeof canCreateComments!="undefined"&&canCreateComments&&$("#commentModuleContainer_iframe").length==0&&createCommentsIframeForViewerV2(),enableViews=="true"&&($("#viewModuleContainer_iframe").length==0&&createViewsIframeForViewerV2(),embedConfig.IsEmbedCode||appendSharePermissionDialog());else{var n=getUrlVars(window.location.href.split("#")[0]).comment;typeof n!="undefined"&&$("#comment_Type").attr("data-item-type").toLowerCase()==="report"?$("#is_mobile").val()==="true"?window.innerWidth<410&&$("#sync_report_viewer").hide():$("#sync_report_viewer_toolbar_com").trigger("click"):$("#commentModuleContainer iframe").attr("src",commentPageUrl+"?itemId="+$("#commentModuleContainer_iframe").attr("data-item-id")+"&userId="+userId)}}function updatefavorite(){var t=$("#favorite_Item").attr("data-item-id"),i=$("#favorite_Item").attr("data-parent-id"),r=$("#favorite_Item").attr("data-favorite-value").toLowerCase(),n=r==="true"?!1:!0;$.ajax({type:"POST",url:favoriteItemUrl,data:{itemId:t,favoriteValue:n,parentId:i},success:function(t){t.Success?($("#favorite_Item").attr("data-favorite-value",n),$("#sync_report_viewer").data("boldReportViewer").toggleFavoriteIcon()):($("#delete_popup_iframe").removeClass("displayNone"),frames[1].messageBox("",window.Server.App.LocalizationContent.MarkFavoriteError,window.Server.App.LocalizationContent.InternalServerError,"success",function(){$("#delete_popup_iframe").addClass("displayNone")}))}})}function createCommentsIframeForViewerV2(){var n=commentPageUrl+"?itemId="+reportId+"&userId="+userId,t=$("<iframe id='commentModuleContainer_iframe' data-item-id='"+reportId+"' src='"+n+"'><\/iframe>                       <div class='loader-blue loader-icon' id='comment-module-container-loader-icon'>                       <svg class='circular'><circle class='path' cx='27' cy='27' r='20' fill='none' stroke-width='4' stroke-miterlimit='10'><\/circle><\/svg>                       <\/div>");$("#commentModuleContainer").append(t);$("#commentModuleContainer").toggleClass("displayNone")}function appendSharePermissionDialog(){$("#sharePermissionPopup_iframe").attr("src",sharePermissionDialogUrl)}function ajaxPostCall(n,t,i,r,u,f,e){if(embedConfig.IsEmbedCode){if(n=="GET"){var o=jQuery.param(i);t.api=t.api+"?"+o;i=null}return $.ajax({type:n,url:reportServerApiUrl+t.api,headers:{"Content-type":"application/json",Authorization:token},data:JSON.stringify(i),beforeSend:function(n){isNullOrWhitespace(r)||r(n)},success:function(n){isNullOrWhitespace(u)||u(n)},error:function(){isNullOrWhitespace(f)||f()},complete:function(n){isNullOrWhitespace(e)||e(n)}})}return $.ajax({type:n,url:t.web,data:i,beforeSend:function(n){embedConfig.IsEmbedReport||n.setRequestHeader("X-XSRF-TOKEN",extractXSRFTokenFromCookie());isNullOrWhitespace(r)||r(n)},success:function(n){isNullOrWhitespace(u)||u(n)},error:function(){isNullOrWhitespace(f)||f()},complete:function(n){isNullOrWhitespace(e)||e(n)}})}function isNullOrWhitespace(n){return n==null||n==undefined||$.trim(n)==""}function generateProfileAvatar(){$(".profile-pic-tag").each(function(){var u=$(this).attr("data-id"),t=$(this).attr("data-image-size"),l=t/3,a=$(this).attr("data-display-name"),v=$(this).attr("data-type"),e,o,f,s,h,n,c,i,r;if($(this).html(""),u!=0){if(e=["#b7fbff","#a9eec2","#ffe0a3","#ffa1ac","#8ed6ff","#bf9fee","#ffa0d2","#32dbc6","#d2c8c8","#e3e7f1"],v=="user"){for(o=u.match(/(\d+)/g),f=0,f=0;f<o.length;f++)s=o[0][0];$(this).css("background-color",e[s]);h=idpUrl+"/User/Avatar?id="+u;n=$('<img id="default-profile-image">');n.attr("src",h);n.attr("width",t);n.attr("height",t);n.css("position","absolute");n.css("top","0px");n.css("left","0px");n.css("border-radius","50%");n.appendTo($(this))}else c=u%10,$(this).css("background-color",e[c]);$(this).css("width",t);$(this).css("height",t);$(this).css("line-height",t+"px");i=a.trim().toUpperCase().split(/ /);r=$('<span id="first-letter">');i[1]==null?r.text(i[0][0]):r.text(i[0][0]+i[i.length-1][0]);r.css("font-size",l+"px");r.css("margin-left","2px");r.appendTo($(this))}})}function extractXSRFTokenFromCookie(){var n=document.cookie.split("; ").find(n=>n.startsWith("XSRF-TOKEN="));return n?n.split("=")[1]:null}function fnOnUserGridActionBegin(n){var u,r,t,f,i;if(isFirstRequest=!0,u=$("#userSearchKey").val(),this.model.query._params.push({key:"searchKey",value:u}),r=[],f=createLoader("UserGrid"),this.element.ejWaitingPopup({template:$("#"+f)}),n.model.filterSettings.filteredColumns.length>0){for(t=0;t<n.model.filterSettings.filteredColumns.length;t++)i=n.model.filterSettings.filteredColumns[t],r.push({PropertyName:i.field,FilterType:i.operator,FilterKey:i.value});this.model.query._params.push({key:"filterCollection",value:r})}}function createLoader(n,t){var i="",t,r;return typeof n=="string"?(t=n.indexOf(".")===0?".":"#",n=n.indexOf(".")===0?n.slice(1,n.length):n.indexOf("#")===0?n.slice(1,n.length):n,i=n+"-loader-icon",$("#"+i).length==0&&$(t+n).length!=0&&(r=$("<div class='loader-blue loader-icon' id='"+i+"'><svg class='circular'><circle class='path' cx='27' cy='27' r='20' fill='none' stroke-width='4' stroke-miterlimit='10'><\/circle><\/svg><\/div>"),$("body").append(r)),i):(n=t,t=n.indexOf(".")===0?".":"#",n=n.slice(1,n.length),i=n+"-loader-icon",$("#"+i).length==0&&$("#"+n).length!=0&&(r=$("<div class='loader-blue loader-icon' id='"+i+"'><svg class='circular'><circle class='path' cx='27' cy='27' r='20' fill='none' stroke-width='4' stroke-miterlimit='10'><\/circle><\/svg><\/div>"),$("body").append(r)),i)}function fnOnGroupGridActionBegin(n){var u,r,t,f,i;if(isFirstRequest=!0,u=$("#groupSearchKey").val(),this.model.query._params.push({key:"searchKey",value:u}),r=[],f=createLoader("GroupGrid"),this.element.ejWaitingPopup({template:$("#"+f)}),n.model.filterSettings.filteredColumns.length>0){for(t=0;t<n.model.filterSettings.filteredColumns.length;t++)i=n.model.filterSettings.filteredColumns[t],r.push({PropertyName:i.field,FilterType:i.operator,FilterKey:i.value});this.model.query._params.push({key:"filterCollection",value:r})}}function onPermissionDeleteDialogClose(){$("#permission_delete_confirmation").ejDialog("close")}function onPermissionDeleteDialogOpen(){$("#permission_delete_confirmation").ejDialog("open");$("#permission_delete_confirmation").focus()}function OpenDeleteDialog(n){$("#permission_delete_confirmation").ejDialog("open");var i=$(n).attr("data-itemviewid"),t=$(n).attr("data-item"),r=$(n).attr("data-id");$("#deletedItem").html(t);$("#delete_item_type").val(t);$("#delete_permission_id").val(i);$("#hiddendata-id").val(r)}function DeletePermission(){var i=$("#delete_permission_id").val(),n=$("#delete_item_type").val(),t=$("#hiddendata-id").val();$.ajax({type:"POST",url:DeleteItemViewPermissionUrl,data:{permission:i,deleteItem:n},beforeSend:function(){$("#permission_delete_confirmation_wrapper").ejWaitingPopup("show")},success:function(){$("#permission_delete_confirmation_wrapper").ejWaitingPopup("hide");onPermissionDeleteDialogClose();messageBox("su-delete",window.Server.App.LocalizationContent.RemoveAccess,window.Server.App.LocalizationContent.RemoveAccessSuccess,"success",function(){n.toLowerCase()=="group"?($("#GroupSearch option[value='"+t+"']").attr("selected",!1),$("#GroupSearch").selectpicker("refresh")):($("#UserSearch option[value='"+t+"']").attr("selected",!1),$("#UserSearch").selectpicker("refresh"));refreshUserGroupList();var i=$("#UserGrid").data("ejGrid"),r=$("#GroupGrid").data("ejGrid"),u=$(".ListItems.selected").attr("data-grid");i.refreshContent();r.refreshContent();u.toLowerCase()=="usergrid"?$("#GroupGrid_WaitingPopup").hide():$("#UserGrid_WaitingPopup").hide();onCloseMessageBox()})}})}function InitializeShareView(){var n,t;for($("#UserSearch").selectpicker("refresh"),n=0;n<$("#userSearch_container .btn-group .dropdown-menu .selectpicker li").length;n++)t=$("#userSearch_container .btn-group .dropdown-menu .selectpicker li").eq(n).find("a .text").text(),$("#userSearch_container .btn-group .dropdown-menu .selectpicker li ").eq(n).find("a").attr("title",t);for($("#GroupSearch").selectpicker("refresh"),n=0;n<$("#groupSearch_container .btn-group .dropdown-menu .selectpicker li").length;n++)t=$("#groupSearch_container .btn-group .dropdown-menu .selectpicker li").eq(n).find("a .text").text(),$("#groupSearch_container .btn-group .dropdown-menu .selectpicker li ").eq(n).find("a").attr("title",t);$("#userSearch_container").on("click",".bs-select-all-custom",function(n){$("#userSearch_container").addClass("valueChanged");$("#UserSearch").data("selectpicker").selectAll();$(this).removeClass("bs-select-all-custom").addClass("bs-deselect-all-custom");$($(this).children("span")[0]).text(window.Server.App.LocalizationContent.Clear);n.stopPropagation()});$("#groupSearch_container").on("click",".bs-select-all-custom",function(n){$("#groupSearch_container").addClass("valueChanged");$("#GroupSearch").data("selectpicker").selectAll();$(this).removeClass("bs-select-all-custom").addClass("bs-deselect-all-custom");$($(this).children("span")[0]).text(window.Server.App.LocalizationContent.Clear);n.stopPropagation()});$("#userSearch_container").on("click",".bs-deselect-all-custom",function(n){$("#userSearch_container").addClass("valueChanged");$("#UserSearch").data("selectpicker").deselectAll();$(this).removeClass("bs-deselect-all-custom").addClass("bs-select-all-custom");$($(this).children("span")[0]).text(window.Server.App.LocalizationContent.Select);$(".SelectedShareItems[data-searchtype='userSearch']").remove();n.stopPropagation()});$("#groupSearch_container").on("click",".bs-deselect-all-custom",function(n){$("#groupSearch_container").addClass("valueChanged");$("#GroupSearch").data("selectpicker").deselectAll();$(this).removeClass("bs-deselect-all-custom").addClass("bs-select-all-custom");$($(this).children("span")[0]).text(window.Server.App.LocalizationContent.Select);$(".SelectedShareItems[data-searchtype='groupSearch']").remove();n.stopPropagation()});$("#userSearch_container").on("click",".bootstrap-select li a",function(n){var i,r,t;$("#userSearch_container").addClass("valueChanged");i=$("#userSearch_container .bootstrap-select li.selected").length;r=$("#userSearch_container .bootstrap-select li").length;i==r&&($($("#userSearch_container div.bs-select-all-custom").children("span")[0]).text(window.Server.App.LocalizationContent.Clear),$("#userSearch_container div.bs-select-all-custom").removeClass("bs-select-all-custom").addClass("bs-deselect-all-custom"));$(this).parent().hasClass("selected")?t=$("#UserSearch").find("option")[parseInt($(this).parent().attr("data-original-index"))]:(t=$("#UserSearch").find("option")[parseInt($(this).parent().attr("data-original-index"))],$(".SelectedShareItems[id='"+$(t).val()+"']").remove(),$($("#userSearch_container .bs-deselect-all-custom").children("span")[0]).text(window.Server.App.LocalizationContent.Select),$("#userSearch_container .bs-deselect-all-custom").removeClass("bs-deselect-all-custom").addClass("bs-select-all-custom"));n.stopPropagation()});$("#groupSearch_container").on("click",".bootstrap-select .dropdown-menu .selectpicker li a",function(n){var i,r,t;$("#groupSearch_container").addClass("valueChanged");i=$("#groupSearch_container .bootstrap-select li.selected").length;r=$("#groupSearch_container .bootstrap-select li").length;i==r&&($($("#groupSearch_container div.bs-select-all-custom").children("span")[0]).text(window.Server.App.LocalizationContent.Clear),$("#groupSearch_container div.bs-select-all-custom").removeClass("bs-select-all-custom").addClass("bs-deselect-all-custom"));$(this).parent().hasClass("selected")?t=$("#GroupSearch").find("option")[parseInt($(this).parent().attr("data-original-index"))]:(t=$("#GroupSearch").find("option")[parseInt($(this).parent().attr("data-original-index"))],$(".SelectedShareItems").filter("[data-searchtype='groupSearch']").filter("#"+$(t).val()).remove(),$($("#groupSearch_container .bs-deselect-all-custom").children("span")[0]).text(window.Server.App.LocalizationContent.Select),$("#groupSearch_container .bs-deselect-all-custom").removeClass("bs-deselect-all-custom").addClass("bs-select-all-custom"));n.stopPropagation()});$("#groupSearch_container").click(function(){$("#groupSearch_container").addClass("valueChanged");var n=$("#groupSearch_container .bootstrap-select li.selected").length,t=$("#groupSearch_container .bootstrap-select li").length;n==t&&$($("#groupSearch_container div.bs-deselect-all-custom").children("span")[0]).text(window.Server.App.LocalizationContent.Clear)});$("#userSearch_container").click(function(){$("#userSearch_container").addClass("valueChanged");var n=$("#userSearch_container .bootstrap-select li.selected").length,t=$("#userSearch_container .bootstrap-select li").length;n==t&&$($("#userSearch_container div.bs-deselect-all-custom").children("span")[0]).text(window.Server.App.LocalizationContent.Clear)});$("#UserSearch option").length>0?$(".share-popup #userSearch_container .bs-deselect-all").after("<div class='bs-select-all-custom'><span>"+window.Server.App.LocalizationContent.Select+"<\/span><span class='bs-select-custom-tick glyphicon glyphicon-ok'><\/span><\/div>"):$(".share-popup #userSearch_container .bs-deselect-all").after("<span class='noResult'>"+window.Server.App.LocalizationContent.NoResult+"<\/span>");$("#GroupSearch option").length>0?$(".share-popup #groupSearch_container .bs-deselect-all").after("<div class='bs-select-all-custom'><span>"+window.Server.App.LocalizationContent.Select+"<\/span><span class='bs-select-custom-tick glyphicon glyphicon-ok'><\/span><\/div>"):$(".share-popup #groupSearch_container .bs-deselect-all").after("<span class='noResult'>"+window.Server.App.LocalizationContent.NoResult+"<\/span>");parent.$("#sharepopup_wrapper_WaitingPopup").css("display","none")}function refreshUserGroupList(){var i=parent.document.getElementById("viewShare_popup_iframe"),r=i.contentDocument||i.contentWindow.document,n,t;for($(r).find(".share-popup #userSearch_container .bs-deselect-all-custom,.share-popup #userSearch_container .bs-select-all-custom,.share-popup #userSearch_container .noResult").remove(),$(r).find(".share-popup #groupSearch_container .bs-deselect-all-custom,.share-popup #groupSearch_container .bs-select-all-custom,.share-popup #groupSearch_container .noResult").remove(),n=0;n<$("#userSearch_container .btn-group .dropdown-menu .selectpicker li").length;n++)t=$("#userSearch_container .btn-group .dropdown-menu .selectpicker li").eq(n).find("a .text").text(),$("#userSearch_container .btn-group .dropdown-menu .selectpicker li ").eq(n).find("a").attr("title",t);for(n=0;n<$("#groupSearch_container .btn-group .dropdown-menu .selectpicker li").length;n++)t=$("#groupSearch_container .btn-group .dropdown-menu .selectpicker li").eq(n).find("a .text").text(),$("#groupSearch_container .btn-group .dropdown-menu .selectpicker li ").eq(n).find("a").attr("title",t);$("#UserSearch option").length>0?$("#UserSearch option").length==$("#UserSearch option:selected").length?$(".share-popup #userSearch_container .bs-deselect-all").after("<div class='bs-deselect-all-custom'><span>"+window.Server.App.LocalizationContent.Clear+"<\/span><span class='bs-select-custom-tick glyphicon glyphicon-ok'><\/span><\/div>"):$(".share-popup #userSearch_container .bs-deselect-all").after("<div class='bs-select-all-custom'><span>"+window.Server.App.LocalizationContent.Select+"<\/span><span class='bs-select-custom-tick glyphicon glyphicon-ok'><\/span><\/div>"):$(".share-popup #userSearch_container .bs-deselect-all").after("<span class='noResult'>"+window.Server.App.LocalizationContent.NoResult+"<\/span>");$("#GroupSearch option").length>0?$("#GroupSearch option").length==$("#GroupSearch option:selected").length?$(".share-popup #groupSearch_container .bs-deselect-all").after("<div class='bs-deselect-all-custom'><span>"+window.Server.App.LocalizationContent.Clear+"<\/span><span class='bs-select-custom-tick glyphicon glyphicon-ok'><\/span><\/div>"):$(".share-popup #groupSearch_container .bs-deselect-all").after("<div class='bs-select-all-custom'><span>"+window.Server.App.LocalizationContent.Select+"<\/span><span class='bs-select-custom-tick glyphicon glyphicon-ok'><\/span><\/div>"):$(".share-popup #groupSearch_container .bs-deselect-all").after("<span class='noResult'>"+window.Server.App.LocalizationContent.NoResult+"<\/span>")}function onviewShareDialogClose(){var n=parent.document.getElementById("viewShare_popup_iframe"),t=n.contentDocument||n.contentWindow.document;t.documentElement.innerHTML="";parent.$("#viewShare_popup").ejDialog("close")}function ShareView(n){var t=$(window).width(),i=$(window).height(),r=$("#viewShare_popup").width(),u=$("#viewShare_popup").height(),f=(parseInt(t)-parseInt(r))/2,e=(parseInt(i)-parseInt(u))/2;$("#viewShare_popup").css({left:f,top:e});$("#viewShare_popup,.ViewShare_popup_shadow").css("display","block");$("#sharepopup_wrapper_WaitingPopup").css("display","block");$("#viewShare_popup_iframe").attr("src",itemViewShareIframeUrl+"?itemId="+n)}function ShareviewSubmitCancel(){var n=parent.document.getElementById("viewShare_popup_iframe"),t=n.contentDocument||n.contentWindow.document;t.documentElement.innerHTML="";parent.$("#viewShare_popup,.ViewShare_popup_shadow").css("display","none")}function reportViewer(){$(document.body).bind("submit",$.proxy(this.formSubmit,this));$(window).bind("beforeunload",$.proxy(this.windowUnload,this));filterParameters=removeLabels(filterParameters);viewId!=null&&viewId!=""?initializeViewerForViews():initializeViewer(filterParameters)}function initializeViewer(n){$("#sync_report_viewer").boldReportViewer({reportServiceUrl:viewerUrl,processingMode:ej.ReportViewer.ProcessingMode.Remote,reportPath:reportPath,reportServerUrl:viewerUrl,ajaxBeforeLoad:"onAjaxRequest",reportExport:"onExportClick",renderingBegin:"onRenderingAction",renderClassicUI:!1,exportSettings:{wordFormat:ej.ReportViewer.WordFormats.Word2013,pptFormat:ej.ReportViewer.PPTFormats.PowerPoint2013,excelFormat:ej.ReportViewer.ExcelFormats.Excel2013},isResponsive:!0,reportLoaded:"openComments",viewReportClick:"viewReportClick",renderingComplete:"filterViews",parameterChange:"onParameterValueChange",parameters:n,locale:language,fontNames:customFontsName,parameterSettings:{position:"right"},toolbarSettings:{items:ej.ReportViewer.ToolbarItems.All&~ej.ReportViewer.ToolbarItems.Find&~ej.ReportViewer.ToolbarItems.Analytics,customItems:customToolbarItems},toolBarItemClick:"onToolbarItemClick"});enableExport=="false"&&$("#sync_report_viewer_e_export").remove()}function formSubmit(){isSubmit=!1}function windowUnload(){var n=$("#sync_report_viewer").data("boldReportViewer");n&&isSubmit&&n.clearReportCache();isSubmit=!0}function onAjaxRequest(n){isUserAuthenticatedInCurrentTenant||isPublic!=="true"?n.headers.push({Key:"Authorization",Value:token},{Key:"ReportId",Value:reportId}):n.headers.push({Key:"X-Server-Token",Value:xServerToken},{Key:"ReportId",Value:reportId})}function onExportClick(n){var t,i;$("#reportserverapireportid").length?($("#reportserverapitoken").val(token),$("#reportserverapireportid").val(reportId)):(t=document.createElement("input"),$(t).attr({type:"hidden",id:"reportserverapitoken",name:"Authorization",value:token}),$(n.exportAction).append(t),i=document.createElement("input"),$(i).attr({type:"hidden",id:"reportserverapireportid",name:"ReportId",value:reportId}),$(n.exportAction).append(i))}function removeLabels(n){if(n!==null&&n!==undefined&&n.length>0)for(i=0;i<n.length;i++)delete n[i].labels;return n}function backToServer(){window.location.href=reportServerHomeUrl}function editReport(){window.open(editReportUrl,"_blank")}function onToolbarItemClick(n){n.value==="comments"&&(n.target.classList.contains("e-rv-button-active")?($("#commentModuleContainer_iframe").length==0&&createCommentsIframeForViewerV2(),$("#comment-module-container-loader-icon").show(),openDashboardComment(null)):document.getElementById("commentModuleContainer_iframe").contentWindow.closeComments());n.value==="views"&&(n.target.classList.contains("e-rv-button-active")?($("#viewModuleContainer_iframe").length==0&&createViewsIframeForViewerV2(),document.getElementById("viewModuleContainer_iframe").contentWindow.openViews()):document.getElementById("viewModuleContainer_iframe").contentWindow.CloseReportView())}function commentImageDialogClose(){$("#commentImage_popup").ejDialog("close");$("#commentImage_popup_image").attr("src","")}function setMaxWidthForReportName(){var n=$("#report_viewer_v2_header").width()-($("#ReportViewToggle_div").outerWidth(!0)+$("#report_viewer_v2_toolbar").outerWidth(!0)+$("#report_viewer_v2_backarrow_div").outerWidth(!0)+($("#report_viewer_v2_report_name_div").outerWidth(!0)-$("#report_viewer_v2_report_name").width()));$("#report_viewer_v2_report_name_div").css("max-width",n+"px")}function initializeViewerForViews(){var n="";$.ajax({type:"POST",url:getViewParameterUrl,data:{ViewId:viewId,UserId:userId,UserName:userName,itemid:reportId},success:function(t){var i,r;t.viewDetails!=null&&t.viewDetails!=""?(i=t.viewDetails,n=i.QueryString,canHideSaveViewBtn=!i.CanEdit):window.location.href=window.location.origin+window.location.pathname;n!=null&&n!=""?(r=encodeURIComponent(n),n=JSON.parse("["+decodeURIComponent(r)+"]"),n=removeLabels(n)):window.location.href=window.location.origin+window.location.pathname;initializeViewer(n)},error:function(){window.location.href=window.location.origin+window.location.pathname}})}function setHeightForReportViewer(){var n=$(window).innerHeight(),t=$("#report_viewer_v2_header").outerHeight(),i=n-t;$("#sync_report_viewer").height(i)}function isFontFaceExist(){try{return FontFace?!0:!1}catch(n){return!1}}function addCustomFonts(n,t){var r=encodeURI(baseUrl+"/content/custom-fonts/"+t),i;if(isFontFaceExist())try{const t=new FontFace(n,"url("+r+")");t.load().then(function(n){document.fonts.add(n)}).catch(function(t){console.log("Failed to load font: "+n+"; Error: "+t)})}catch(u){console.log("Failed to load font: "+n+"; Error: "+u)}else try{const u=document.createElement("style");u.innerHTML="@@font-face { font-family:"+n+"; src: url("+r+");}";document.head.appendChild(u);i=document.createElement("link");i.setAttribute("rel","stylesheet");i.setAttribute("type","text/css");i.setAttribute("href",r+t);document.head.appendChild(i)}catch(u){console.log("Failed to register stylesheet for the font: "+n+"; Error: "+u)}}function extractXSRFTokenFromCookie(){var n=parent.document.cookie.split("; ").find(n=>n.startsWith("XSRF-TOKEN="));return n?n.split("=")[1]:null}function setXSRFRequestHeader(n){n.setRequestHeader("X-XSRF-TOKEN",extractXSRFTokenFromCookie())}function decodeHtmlAsString(n){var t=document.createElement("textarea");return t.innerHTML=n,t.value}var sessionData=!1,isSession=!1,initialQueryString,deletedViewId,customToolbarItems;$(document).ready(function(){function n(){location.reload()}function t(){location.reload()}function i(){var n,t;$(".e-btn-icon.e-icon-dlg-close.e-icons").is(":visible")&&(n=$(".e-btn-icon.e-icon-dlg-close.e-icons:visible"),$.each(n,function(n,t){var i=$(t).parents(".e-dialog").attr("id"),r;(i!=undefined||i!=null)&&(r=document.getElementById(i).ej2_instances,r[0].hide())}));$(".popup-close").is(":visible")&&(t=$(".popup-close:visible"),$.each(t,function(n,t){var i=$(t).parents(".e-dialog").attr("id");(i!=undefined||i!=null)&&(eDialog=$("#"+i).data("ejDialog"),eDialog.close())}))}if(typeof canCheckSession!="undefined"&&(isSession=Boolean(canCheckSession)),isSession){setTimeout(function(){r()},18e4);function r(){$.ajax({type:"GET",url:isSessionActiveUrl,success:function(n){n.isactive?setTimeout(function(){r()},18e4):(i(),u())}})}function u(){var u,f,o,i,r,e,s,h;(typeof isViewerV2Enabled=="undefined"||isViewerV2Enabled)&&(typeof isDesignerV2Enabled=="undefined"||isDesignerV2Enabled)?(f="",o='<span class ="dialog-header-title">'+window.Server.App.LocalizationContent.SessionHeader+"<\/span>",sessionData||(i=document.createElement("div"),i.setAttribute("id","session-time-dialog"),r=document.getElementById("content-area"),r==null&&(e=document.createElement("div"),e.setAttribute("id","content-area"),document.body.appendChild(e),r=document.getElementById("content-area")),f=ejs.popups,r.appendChild(i),s=window.Server.App.LocalizationContent.SessionContent,h=new f.Dialog({showOnInit:!1,allowDraggable:!1,enableResize:!1,width:window.innerWidth>500?"470px":window.innerWidth-10,height:"auto",showHeader:!1,isModal:!0,enableModal:!0,closeOnEscape:!0,header:o,close:"closeDialog",showCloseIcon:!0,content:s,buttons:[{click:function(){n()},buttonModel:{cssClass:"app-btn-secondary",content:window.Server.App.LocalizationContent.OKButton}}],close:t}),h.appendTo(i),sessionData=!0)):(u=$("#messageBox").data("ejDialog"),u==undefined&&($("#messageBox").ejDialog({width:parent.window.innerWidth>460?"450px":parent.window.innerWidth-10,height:"150px",showOnInit:!1,allowDraggable:!0,enableResize:!1,showHeader:!1,enableModal:!0,close:"onMessageDialogClose"}),u=$("#messageBox").data("ejDialog")),messageBox("",window.Server.App.LocalizationContent.SessionHeader,window.Server.App.LocalizationContent.SessionContent,"success",n))}}});initialQueryString="";deletedViewId="";$(document).on("click",function(n){var i,t;$("#is_mobile").val()!="true"&&(i=document.getElementById("viewModuleContainer"),i!==null&&(i.style.display=="block"||i.style.display=="")&&n.target.id!="sync_report_viewer_toolbar_views_div"&&n.target.id!="sync_report_viewer_toolbar_views"&&(t=$(n.target),t.parents().andSelf().is("#report-view-toogle")||t.parents().andSelf().is("#PopupContainerDelete")||t.parents().andSelf().is("#messageBox")||t.parents().andSelf().is("#savedViews")||$("#sync_report_viewer_toolbar_views").trigger("click")))});$(document).on("click","#delete_item",function(n){var t=document.getElementById("viewModuleContainer_iframe").contentWindow.document.getElementById("report-views"),i;(t.style.display=="block"||t.style.display=="")&&$("#delete-div_wrapper").ejWaitingPopup("show");deletedViewId=n.currentTarget.attributes.viewid.value;i={ItemViewName:$("#delete_item_name").text(),itemId:reportId,itemViewId:n.currentTarget.attributes.viewid.value,UserId:userId,UserName:userName,itemType:reportItemDetail.ItemType};ajaxPostCall("POST",deleteViewUrl,i,null,deleteViewResult,deleteViewErrorResult,null)});$(document).on("keyup focusout","#view-name-filter-pane",function(n){/^[a-zA-Z0-9_-]+$/.test(n.currentTarget.value)?($(".app-critical-action-button ").prop("disabled",!1),$("#validate-view-name").html(""),$("#validate-view-name").css("display","none"),$("#view-name-filter-pane").removeClass("has-error")):($(".app-critical-action-button ").prop("disabled",!0),n.currentTarget.value!=""?$("#validate-view-name").html(window.Server.App.LocalizationContent.AvoidSpecialCharactors):$("#validate-view-name").html(window.Server.App.LocalizationContent.ViewNameValidator),$("#validate-view-name").css("display","block"),$("#view-name-filter-pane").addClass("has-error"))});$(document).ready(function(){var t=$("#viewShare_popup").height(),n;$("#sharepopup_wrapper_WaitingPopup .loader-icon").css("top",parseInt(parseInt(t)/2)-30);$("#is_mobile").val()==="true"&&(n=$(window).height()-50,$("#sync_report_viewer").css("height",n),$(".server-dashboard-view").css("height",n))});$(window).on("orientationchange",function(){if($("#is_mobile").val()==="true"){var n=$(window).height()-50;$("#sync_report_viewer").css("height",n);$(".server-dashboard-view").css("height",n)}});$(window).on("orientationchange",function(){closeDashboardComment()});var SettingsScopes={All:0,SiteSettings:1,ReportSettings:2,EmbedSettings:3,Connector:4,Email:5,Accounts:6,UserDirectorySettings:7,AuthenticationSettings:8,NotificationSettings:9,ManageLicense:10,SupportSettings:11,Subscription:12,Payments:13,CORSPolicySettings:14,Security:15},PermissionEntities={None:0,AllReports:1,ReportsInCategory:2,SpecificReports:3,AllCategories:4,SpecificCategory:5,AllDataSources:6,SpecificDataSource:7,AllFiles:8,SpecificFile:9,AllSchedules:10,SpecificSchedule:11,AllDashboards:12,DashboardsInCategory:13,SpecificDashboard:14,AllWidgets:15,SpecificWidget:16,AllDatasets:17,SpecificDataset:18,SpecificItemView:19,AllItemViews:20,SpecificSlideshow:21,AllSlideshow:22,SpecificSettings:23,AllSettings:24,SpecificGroup:25,UsersandGroups:26,SpecificPermissions:27,AllPermissions:28,AllGroups:29},ReportLayoutView={Card:1,Grid:2};$(document).ready(function(){var n,t;$("#permission_delete_confirmation").ejDialog({width:window.innerWidth>410?"400px":window.innerWidth-10,showOnInit:!1,allowDraggable:!1,enableResize:!1,height:"187px",showHeader:!1,title:window.Server.App.LocalizationContent.Deleteuser,enableModal:!0,close:"onPermissionDeleteDialogClose",closeOnEscape:!0,open:"onPermissionDeleteDialogOpen"});$("#messageBox").ejDialog({width:window.innerWidth>460?"450px":window.innerWidth-10,showOnInit:!1,allowDraggable:!0,enableResize:!1,height:"auto",showHeader:!1,enableModal:!0,close:"onMessageDialogClose"});n=createLoader("permission_delete_confirmation_wrapper");$("#permission_delete_confirmation_wrapper").ejWaitingPopup({template:$("#"+n)});t=createLoader("MasterContainer");$("#MasterContainer").ejWaitingPopup({template:$("#"+t)});$(document).on("click","#SubscribersPanel .i-selected-cancel",function(){var n=$(this).parents(".SelectedShareItems").attr("id"),t=$(this).parents(".SelectedShareItems").attr("data-searchtype");t=="userSearch"?(currentElementIndex=$("#UserSearch").find("[value='"+n+"']").index(),$("#userSearch_container .bootstrap-select li").filter("[data-original-index='"+currentElementIndex+"']").find("a").click()):t=="groupSearch"&&(currentElementIndex=$("#GroupSearch").find("[value='"+n+"']").index(),$("#groupSearch_container .bootstrap-select li").filter("[data-original-index='"+currentElementIndex+"']").find("a").click())});$("#schedule_Submit").on("click",function(){var t=$("#UserSearch").val(),i=$("#GroupSearch").val(),r=$("#hiddenItemId").val(),n=$("#IsPublic").data("ejCheckBox").model.checked,u=$("#isPublicHiddenValue").val().toLowerCase();t!=null||i!=null||n==!0?($("#validationMessage").css("display","none"),$.ajax({type:"POST",url:addItemViewPermissionUrl,data:{shareList:JSON.stringify({UserList:t,GroupList:i,itemViewId:r,IsPublic:n})},beforeSend:function(){$("#MasterContainer").ejWaitingPopup("show")},success:function(){$("#MasterContainer").ejWaitingPopup("hide");messageBox("su-share",window.Server.App.LocalizationContent.ShareView,window.Server.App.LocalizationContent.ShareViewSuccess,"success",function(){$("#isPublicHiddenValue").val(n);refreshUserGroupList();var t=$("#UserGrid").data("ejGrid"),i=$("#GroupGrid").data("ejGrid"),r=$(".ListItems.selected").attr("data-grid");t.refreshContent();i.refreshContent();r.toLowerCase()=="usergrid"?$("#GroupGrid_WaitingPopup").hide():$("#UserGrid_WaitingPopup").hide();onCloseMessageBox()})}})):$("#validationMessage").css("display","block")});$(".ListItems").click(function(){var n=$(this).attr("data-grid");$(".ListItems").removeClass("selected");$(".ListItems[data-grid='"+n+"']").addClass("selected");$(".itemGrid").removeClass("active");$("#"+n).parent(".itemGrid").addClass("active");$(".ListItems").parent("li").removeClass("active");$(".selected").parent("li").addClass("active")});$(".scheduleEditPopup").on("click",function(){var n=parent.document.getElementById("viewShare_popup_iframe"),t=n.contentDocument||n.contentWindow.document;t.documentElement.innerHTML="";parent.$("#viewShare_popup,.ViewShare_popup_shadow").css("display","none")})});customToolbarItems=[];enableComment!="true"||isMobile||customToolbarItems.push({type:"button",prefixIcon:"comment",id:"comments","class":"e-comments",tooltip:{header:window.Server.App.LocalizationContent.CommentTitle},appendTo:"VerticalToolbar",sidePanel:{isEnabled:!0,id:"commentModuleContainer"}});enableViews!="true"||isMobile||customToolbarItems.push({type:"button",prefixIcon:"su-view",id:"views","class":"su-view",tooltip:{header:window.Server.App.LocalizationContent.ViewTitle},appendTo:"VerticalToolbar",sidePanel:{isEnabled:!0,id:"viewModuleContainer"}});$(document).ready(function(){try{sameOrigin=window.parent.location.host==window.location.host}catch(t){sameOrigin=!1}if(setHeightForReportViewer(),reportViewer(),reportviewerObj=$("#sync_report_viewer").data("boldReportViewer"),canEdit){var n=new ejs.popups.Tooltip({content:window.Server.App.LocalizationContent.Editdashboard});n.appendTo("#report_viewer_v2_edit")}setMaxWidthForReportName();loadCustomFonts()});$(window).resize(function(){setHeightForReportViewer();setMaxWidthForReportName()});$.ajaxSetup({beforeSend:function(n){setXSRFRequestHeader(n)}})