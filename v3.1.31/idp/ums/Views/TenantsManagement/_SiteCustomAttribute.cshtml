@model TenantInfo
@{
    var activeTab = (!string.IsNullOrWhiteSpace(Context.Request.Query["tab"]) && Context.Request.Query["tab"] == "attributes") ? "active" : string.Empty;
}

<!DOCTYPE html>
<head>
    <script>
        var tenantInfoId ="@Model.TenantInfoId";
        var siteAttributesUrl = "@Url.Action("GetSiteAttributes", "CustomAttribute")";
        $(document).ready(function () {
                $("#SiteAttributesGrid").ejGrid({
                    dataSource: window.siteAttributes,
                    gridLines: ej.Grid.GridLines.None,
                    allowSorting: true,
                    allowSearching: true,
                    allowPaging: true,
                    allowSelection: true,
                    allowFiltering: true,
                    filterSettings: { filterType: "menu" },
                    pageSettings: { pageSize: 10 },
                    enableRowHover: true,
                    enableAltRow: false,
                    create: "initialSiteGridCreate",
                    dataBound: function (args) {
                        $('[data-toggle="tooltip"]').tooltip();
                    },
                    columns: [
                        { field: 'Name', templateID: "#attribute-name-template", headerText: '[[[Name]]]', width: 40, allowSorting: true, allowFiltering: true },
                        { field: 'Value', templateID: "#attribute-value-template", headerText: '[[[Value]]]', width: 60, allowSorting: true, allowFiltering: true },
                        { field: 'Description', templateID: "#attribute-description-template", headerText: '[[[Description]]]', width: 50, allowSorting: true, allowFiltering: true },
                        { field: 'ModifiedDateString', headerText: '[[[Last Modified]]]', width: 40, allowSorting: true, allowFiltering: false },
                        { field: 'Options', headerText: '', templateID: "#options", width: 20, allowSorting: false, allowFiltering: false }
                    ]
                });

            $.ajax({
                type: "GET",
                url: siteAttributesUrl,
                data: { tenantInfoId: tenantInfoId },
                success: function (result) {
                    if (result.Status) {
                        var siteAttributesGrid = $("#SiteAttributesGrid").data("ejGrid");
                        siteAttributesGrid.dataSource(result.Attributes);
                    }
                    hideWaitingPopup("SiteAttributesGrid");
                }
            });
        });
    </script>
    <script type="text/x-jsrender" id="attribute-name-template">
        <span class="grid-content" title="{{:Name}}" data-toggle="tooltip">{{:Name}}</span>
    </script>
    <script type="text/x-jsrender" id="attribute-description-template">
        <span class="grid-content" title="{{:Description}}" data-toggle="tooltip">{{:Description}}</span>
    </script>
    <script type="text/x-jsrender" id="attribute-value-template">
        <span class="grid-content" title="{{:Value}}" data-toggle="tooltip">{{:Value}}</span>
    </script>
    <link rel="stylesheet" href="~/bundles/css/custom-attribute.css" asp-append-version="true"/>
    <script src="~/bundles/js/custom-attribute.js" asp-append-version="true"></script>
</head>
<body>
    <div role="tabpanel" class="tab-pane @activeTab" id="custom-attribute-tab">
        <div class="admin-page-body col-lg-12 col-md-12 col-sm-12 col-xs-12 no-padding">
            <input type="button" class="primary-button pull-right" id="add-custom-attribute" title="" value="[[[Add Attribute]]]" onclick="openCustomAttributeDialog()">
            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 form-group">
                <div id="SiteAttributesGrid"></div>
            </div>
            <script type="text/x-jsrender" id="options">
                <div class="user-hover-options">
                    <a href="javascript:void(0);" id="edit-site-attribute" title="[[[Edit]]]" data-toggle="tooltip" data-id="{{:Id}}" onclick="editCustomAttribute(this)">
                        <i class="su su-edit"></i>
                    </a>
                    <a class="delete-class" href="javascript:void(0);" id="remove-site-attribute" title="[[[Remove]]]" data-toggle="tooltip" data-id="{{:Id}}" onclick="deleteConfirmation(this)">
                        <i class="su su-delete"></i>
                    </a>
                </div>
            </script>
        </div>
        </div>
    @await Html.PartialAsync("_AddCustomAttribue")
</body>